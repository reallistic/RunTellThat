/**
 * almond 0.2.6 Copyright (c) 2011-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

//     Underscore.js 1.6.0
//     http://underscorejs.org
//     (c) 2009-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.

/*!
 * jQuery JavaScript Library v1.10.2
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-07-03T13:48Z
 */

/*!
 * Sizzle CSS Selector Engine v1.10.2
 * http://sizzlejs.com/
 *
 * Copyright 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-07-03
 */

//     (c) 2010-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Backbone may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://backbonejs.org

// Backbone.BabySitter
// -------------------
// v0.1.0
//
// Copyright (c)2014 Derick Bailey, Muted Solutions, LLC.
// Distributed under MIT license
//
// http://github.com/marionettejs/backbone.babysitter

// MarionetteJS (Backbone.Marionette)
// ----------------------------------
// v1.6.4
//
// Copyright (c)2014 Derick Bailey, Muted Solutions, LLC.
// Distributed under MIT license
//
// http://marionettejs.com

/*!
 * Includes BabySitter
 * https://github.com/marionettejs/backbone.babysitter/
 *
 * Includes Wreqr
 * https://github.com/marionettejs/backbone.wreqr/
 */

/* ========================================================================
 * Bootstrap: transition.js v3.0.0
 * http://twbs.github.com/bootstrap/javascript.html#transitions
 * ========================================================================
 * Copyright 2013 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: dropdown.js v3.0.0
 * http://twbs.github.com/bootstrap/javascript.html#dropdowns
 * ========================================================================
 * Copyright 2013 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: tooltip.js v3.0.0
 * http://twbs.github.com/bootstrap/javascript.html#tooltip
 * Inspired by the original jQuery.tipsy by Jason Frame
 * ========================================================================
 * Copyright 2013 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: button.js v3.0.0
 * http://twbs.github.com/bootstrap/javascript.html#buttons
 * ========================================================================
 * Copyright 2013 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: modal.js v3.0.0
 * http://twbs.github.com/bootstrap/javascript.html#modals
 * ========================================================================
 * Copyright 2013 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ======================================================================== */

/*!
  * Bowser - a browser detector
  * https://github.com/ded/bowser
  * MIT License | (c) Dustin Diaz 2013
  */

/*
 TraceKit - Cross brower stack traces - github.com/occ/TraceKit
 MIT license
*/

/*
 * Bugsense JavaScript SDK v1.1.1
 * http://bugsense.com/
 *
 * Copyright 2013 Splunk Inc.
 *
 */

/*
 Copyright 2011 Abdulla Abdurakhmanov
 Original sources are available at https://code.google.com/p/x2js/

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
 */

//! moment.js
//! version : 2.4.0
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com

/*	SWFObject v2.2 <http://code.google.com/p/swfobject/> 
	is released under the MIT License <http://www.opensource.org/licenses/mit-license.php> 
*/

/*
 *  jssha256 version 0.1  -  Copyright 2006 B. Poettering
 *
 *  This program is free software; you can redistribute it and/or
 *  modify it under the terms of the GNU General Public License as
 *  published by the Free Software Foundation; either version 2 of the
 *  License, or (at your option) any later version.
 *
 *  This program is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 *  General Public License for more details.
 *
 *  You should have received a copy of the GNU General Public License
 *  along with this program; if not, write to the Free Software
 *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA
 *  02111-1307 USA
 */

// Copyright 2013 Google Inc. All Rights Reserved.

/**
 * @fileoverview Manages the DRM license requests.
 */

// perform a single license call. This may be important if the server

// is tracking license requests, for example.

/*!

 handlebars v1.1.2

Copyright (C) 2011 by Yehuda Katz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

@license
*/

/**
 * @license RequireJS text 2.0.10 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

/**
 * @preserve FastClick: polyfill to remove click delays on browsers with touch UIs.
 *
 * @version 0.6.11
 * @codingstandard ftlabs-jsv2
 * @copyright The Financial Times Limited [All Rights Reserved]
 * @license MIT License (see LICENSE.txt)
 */

/**!
 * Sortable
 * @author	RubaXa   <trash@rubaxa.org>
 * @license MIT
 */

/*
Copyright 2012 Igor Vaynberg

Version: 3.4.5 Timestamp: Mon Nov  4 08:22:42 PST 2013

This software is licensed under the Apache License, Version 2.0 (the "Apache License") or the GNU
General Public License version 2 (the "GPL License"). You may choose either license to govern your
use of this software only upon the condition that you accept all of the terms of either the Apache
License or the GPL License.

You may obtain a copy of the Apache License and the GPL License at:

    http://www.apache.org/licenses/LICENSE-2.0
    http://www.gnu.org/licenses/gpl-2.0.html

Unless required by applicable law or agreed to in writing, software distributed under the
Apache License or the GPL Licesnse is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
CONDITIONS OF ANY KIND, either express or implied. See the Apache License and the GPL License for
the specific language governing permissions and limitations under the Apache License and the GPL License.
*/

/**
 * Copyright 2013 Craig Campbell
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * Mousetrap is a simple keyboard shortcut library for Javascript with
 * no external dependencies
 *
 * @version 1.4.6
 * @url craig.is/killing/mice
 */

/** @license
 *
 * SoundManager 2: JavaScript Sound for the Web
 * ----------------------------------------------
 * http://schillmania.com/projects/soundmanager2/
 *
 * Copyright (c) 2007, Scott Schiller. All rights reserved.
 * Code provided under the BSD License:
 * http://schillmania.com/projects/soundmanager2/license.txt
 *
 * V2.97a.20120318
 */

function X2JS(e,t,n){function i(e){var t=e.localName;return null==t&&(t=e.baseName),(null==t||""==t)&&(t=e.nodeName),t}function s(a){var r,l,c;if(a.nodeType==o.DOCUMENT_NODE){var d,u;for(l=a.firstChild,d=0,u=a.childNodes.length;u>d;d+=1)if(a.childNodes[d].nodeType!==o.COMMENT_NODE){l=a.childNodes[d];break}return n?r=s(l):(r={},c=i(l),r[c]=s(l)),r}if(a.nodeType==o.ELEMENT_NODE){var h=0,p=a.childNodes;r=new Object;for(var f=0;f<p.length;f++)if(l=p.item(f),c=i(l),h++,null==r[c])r[c]=s(l);else{if(null!=r[c]&&!(r[c]instanceof Array)){var m=r[c];
r[c]=[],r[c].push(m)}for(var g=0;null!=r[c][g];)g++;r[c][g]=s(l)}for(var v=0;v<a.attributes.length;v++){var y=a.attributes.item(v);h++;for(var b=y.value,w=0,x=e.length;x>w;w++){var k=e[w];k.test.call(this,y.value)&&(b=k.converter.call(this,y.value))}r[t+y.name]=b}if(null!=r["#text"]){var S=r["#text"];"string"==typeof S?(S=S.replace(/[\r\n]/g,""),r["#text"]=S,1==h&&(r=S)):delete r["#text"]}return r}return a.nodeType==o.TEXT_NODE||a.nodeType==o.CDATA_SECTION_NODE?a.nodeValue:a.nodeType==o.COMMENT_NODE?null:void 0
}(null===t||void 0===t)&&(t="_"),(null===n||void 0===n)&&(n=!1);var a="1.0.11",r=!1,o={"ELEMENT_NODE":1,"TEXT_NODE":3,"CDATA_SECTION_NODE":4,"COMMENT_NODE":8,"DOCUMENT_NODE":9};this.parseXmlString=function(e){var t;if(window.DOMParser){var n=new window.DOMParser;t=n.parseFromString(e,"text/xml")}else 0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e);return t},this.xml2json=function(e){return s(e)},this.xml_str2json=function(e){var t=this.parseXmlString(e);
return this.xml2json(t)},this.getVersion=function(){return a},this.escapeMode=function(e){r=e}}function string_to_array(e){for(var t=e.length,n=new Array(t),i=0;t>i;i++)n[i]=e.charCodeAt(i);return n}function array_to_hex_string(e){for(var t="",n=0;n<e.length;n++)t+=SHA256_hexchars[e[n]>>4]+SHA256_hexchars[15&e[n]];return t}function array_to_string(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}function SHA256_init(){SHA256_H=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),SHA256_buf=new Array,SHA256_len=0
}function SHA256_write(e){SHA256_buf=SHA256_buf.concat("string"==typeof e?string_to_array(e):e);for(var t=0;t+64<=SHA256_buf.length;t+=64)SHA256_Hash_Byte_Block(SHA256_H,SHA256_buf.slice(t,t+64));SHA256_buf=SHA256_buf.slice(t),SHA256_len+=e.length}function SHA256_finalize(){if(SHA256_buf[SHA256_buf.length]=128,SHA256_buf.length>56){for(var e=SHA256_buf.length;64>e;e++)SHA256_buf[e]=0;SHA256_Hash_Byte_Block(SHA256_H,SHA256_buf),SHA256_buf.length=0}for(var e=SHA256_buf.length;59>e;e++)SHA256_buf[e]=0;
SHA256_buf[59]=SHA256_len>>>29&255,SHA256_buf[60]=SHA256_len>>>21&255,SHA256_buf[61]=SHA256_len>>>13&255,SHA256_buf[62]=SHA256_len>>>5&255,SHA256_buf[63]=SHA256_len<<3&255,SHA256_Hash_Byte_Block(SHA256_H,SHA256_buf);for(var t=new Array(32),e=0;8>e;e++)t[4*e+0]=SHA256_H[e]>>>24,t[4*e+1]=SHA256_H[e]>>16&255,t[4*e+2]=SHA256_H[e]>>8&255,t[4*e+3]=255&SHA256_H[e];return delete SHA256_H,delete SHA256_buf,delete SHA256_len,t}function SHA256_hash(e){var t;return SHA256_init(),SHA256_write(e),t=SHA256_finalize(),array_to_hex_string(t)
}function HMAC_SHA256_init(e){HMAC_SHA256_key="string"==typeof e?string_to_array(e):(new Array).concat(e),HMAC_SHA256_key.length>64&&(SHA256_init(),SHA256_write(HMAC_SHA256_key),HMAC_SHA256_key=SHA256_finalize());for(var t=HMAC_SHA256_key.length;64>t;t++)HMAC_SHA256_key[t]=0;for(var t=0;64>t;t++)HMAC_SHA256_key[t]^=54;SHA256_init(),SHA256_write(HMAC_SHA256_key)}function HMAC_SHA256_write(e){SHA256_write(e)}function HMAC_SHA256_finalize(){for(var e=SHA256_finalize(),t=0;64>t;t++)HMAC_SHA256_key[t]^=106;
SHA256_init(),SHA256_write(HMAC_SHA256_key),SHA256_write(e);for(var t=0;64>t;t++)HMAC_SHA256_key[t]=0;return delete HMAC_SHA256_key,SHA256_finalize()}function HMAC_SHA256_MAC(e,t){var n;return HMAC_SHA256_init(e),HMAC_SHA256_write(t),n=HMAC_SHA256_finalize(),array_to_hex_string(n)}function SHA256_sigma0(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}function SHA256_sigma1(e){return(e>>>17|e<<15)^(e>>>19|e<<13)^e>>>10}function SHA256_Sigma0(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function SHA256_Sigma1(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)
}function SHA256_Ch(e,t,n){return n^e&(t^n)}function SHA256_Maj(e,t,n){return e&t^n&(e^t)}function SHA256_Hash_Word_Block(e,t){for(var n=16;64>n;n++)t[n]=SHA256_sigma1(t[n-2])+t[n-7]+SHA256_sigma0(t[n-15])+t[n-16]&4294967295;for(var i=(new Array).concat(e),n=0;64>n;n++){var s=i[7]+SHA256_Sigma1(i[4])+SHA256_Ch(i[4],i[5],i[6])+SHA256_K[n]+t[n],a=SHA256_Sigma0(i[0])+SHA256_Maj(i[0],i[1],i[2]);i.pop(),i.unshift(s+a&4294967295),i[4]=i[4]+s&4294967295}for(var n=0;8>n;n++)e[n]=e[n]+i[n]&4294967295}function SHA256_Hash_Byte_Block(e,t){for(var n=new Array(16),i=0;16>i;i++)n[i]=t[4*i+0]<<24|t[4*i+1]<<16|t[4*i+2]<<8|t[4*i+3];
SHA256_Hash_Word_Block(e,n)}function FastClick(e){var t,n=this;if(this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=10,this.layer=e,!e||!e.nodeType)throw new TypeError("Layer must be a document node");this.onClick=function(){return FastClick.prototype.onClick.apply(n,arguments)},this.onMouse=function(){return FastClick.prototype.onMouse.apply(n,arguments)},this.onTouchStart=function(){return FastClick.prototype.onTouchStart.apply(n,arguments)
},this.onTouchMove=function(){return FastClick.prototype.onTouchMove.apply(n,arguments)},this.onTouchEnd=function(){return FastClick.prototype.onTouchEnd.apply(n,arguments)},this.onTouchCancel=function(){return FastClick.prototype.onTouchCancel.apply(n,arguments)},FastClick.notNeeded(e)||(this.deviceIsAndroid&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,n,i){var s=Node.prototype.removeEventListener;
"click"===t?s.call(e,t,n.hijacked||n,i):s.call(e,t,n,i)},e.addEventListener=function(t,n,i){var s=Node.prototype.addEventListener;"click"===t?s.call(e,t,n.hijacked||(n.hijacked=function(e){e.propagationStopped||n(e)}),i):s.call(e,t,n,i)}),"function"==typeof e.onclick&&(t=e.onclick,e.addEventListener("click",function(e){t(e)},!1),e.onclick=null))}var requirejs,require,define;!function(e){function t(e,t){return v.call(e,t)}function n(e,t){var n,i,s,a,r,o,l,c,d,u,h=t&&t.split("/"),p=m.map,f=p&&p["*"]||{};
if(e&&"."===e.charAt(0))if(t){for(h=h.slice(0,h.length-1),e=h.concat(e.split("/")),c=0;c<e.length;c+=1)if(u=e[c],"."===u)e.splice(c,1),c-=1;else if(".."===u){if(1===c&&(".."===e[2]||".."===e[0]))break;c>0&&(e.splice(c-1,2),c-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((h||f)&&p){for(n=e.split("/"),c=n.length;c>0;c-=1){if(i=n.slice(0,c).join("/"),h)for(d=h.length;d>0;d-=1)if(s=p[h.slice(0,d).join("/")],s&&(s=s[i])){a=s,r=c;break}if(a)break;!o&&f&&f[i]&&(o=f[i],l=c)}!a&&o&&(a=o,r=l),a&&(n.splice(0,r,a),e=n.join("/"))
}return e}function i(t,n){return function(){return d.apply(e,y.call(arguments,0).concat([t,n]))}}function s(e){return function(t){return n(t,e)}}function a(e){return function(t){p[e]=t}}function r(n){if(t(f,n)){var i=f[n];delete f[n],g[n]=!0,c.apply(e,i)}if(!t(p,n)&&!t(g,n))throw new Error("No "+n);return p[n]}function o(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function l(e){return function(){return m&&m.config&&m.config[e]||{}}}var c,d,u,h,p={},f={},m={},g={},v=Object.prototype.hasOwnProperty,y=[].slice;
u=function(e,t){var i,a=o(e),l=a[0];return e=a[1],l&&(l=n(l,t),i=r(l)),l?e=i&&i.normalize?i.normalize(e,s(t)):n(e,t):(e=n(e,t),a=o(e),l=a[0],e=a[1],l&&(i=r(l))),{"f":l?l+"!"+e:e,"n":e,"pr":l,"p":i}},h={"require":function(e){return i(e)},"exports":function(e){var t=p[e];return"undefined"!=typeof t?t:p[e]={}},"module":function(e){return{"id":e,"uri":"","exports":p[e],"config":l(e)}}},c=function(n,s,o,l){var c,d,m,v,y,b,w=[];if(l=l||n,"function"==typeof o){for(s=!s.length&&o.length?["require","exports","module"]:s,y=0;y<s.length;y+=1)if(v=u(s[y],l),d=v.f,"require"===d)w[y]=h.require(n);
else if("exports"===d)w[y]=h.exports(n),b=!0;else if("module"===d)c=w[y]=h.module(n);else if(t(p,d)||t(f,d)||t(g,d))w[y]=r(d);else{if(!v.p)throw new Error(n+" missing "+d);v.p.load(v.n,i(l,!0),a(d),{}),w[y]=p[d]}m=o.apply(p[n],w),n&&(c&&c.exports!==e&&c.exports!==p[n]?p[n]=c.exports:m===e&&b||(p[n]=m))}else n&&(p[n]=o)},requirejs=require=d=function(t,n,i,s,a){return"string"==typeof t?h[t]?h[t](n):r(u(t,n).f):(t.splice||(m=t,n.splice?(t=n,n=i,i=null):t=e),n=n||function(){},"function"==typeof i&&(i=s,s=a),s?c(e,t,n,i):setTimeout(function(){c(e,t,n,i)
},4),d)},d.config=function(e){return m=e,m.deps&&d(m.deps,m.callback),d},requirejs._defined=p,define=function(e,n,i){n.splice||(i=n,n=[]),t(p,e)||t(f,e)||(f[e]=[e,n,i])},define.amd={"jQuery":!0}}(),define("libs/require/almond-0.2.6",function(){}),require.config({"baseUrl":"js","templatePathPrefixs":["app/","app/js/"],"paths":{"templates":"../templates","text":"libs/require/text-2.0.10","hb":"libs/require/handlebars.precompile-0.1","tpl":"libs/require/underscore-tpl-0.1.0","jquery-lib":"libs/jquery-1.10.2","underscore":"libs/backbone/underscore-1.6.0","backbone-lib":"libs/backbone/backbone-1.1.2","marionette-lib":"libs/backbone/backbone.marionette-1.6.4","backbone.wreqr":"libs/backbone/backbone.wreqr-1.1.0","backbone.babysitter":"libs/backbone/backbone.babysitter-0.1.0","handlebars-lib":"libs/backbone/handlebars-1.1.2","soundmanager-defer":"libs/soundmanager/soundmanager2-defer","soundmanager-lib":"libs/soundmanager/soundmanager2-nodebug","googledash":"libs/googledash","jwplayer":"libs/jwplayer/jwplayer-6.8","swfobject":"libs/jwplayer/swfobject-2.2","fastclick":"libs/fastclick-0.6.11","x2js":"libs/x2js-1.0.11","moment":"libs/moment-2.4.0","chrome-analytics":"libs/analytics/chrome-analytics","google-analytics":"libs/analytics/google-analytics","bugsense":"libs/analytics/bugsense-2.0.1","select2":"libs/select2-3.4.5","jquery.freefocus":"libs/jquery.freefocus-0.4.1","jquery.translate":"libs/jquery.translate-0.1.0","sortable":"libs/sortable-0.1.5","mousetrap":"libs/mousetrap-1.4.6","jssha256":"libs/jssha256-0.1","requestanimframe":"libs/requestanimframe-0.1","jquery":"plex/base/initializers/configs/JQueryConfig","backbone":"plex/base/initializers/configs/BackboneConfig","marionette":"plex/base/initializers/configs/MarionetteConfig","handlebars":"plex/base/initializers/configs/HandlebarsConfig","soundmanager":"plex/base/initializers/configs/SoundManagerConfig","affix":"libs/bootstrap/affix","alert":"libs/bootstrap/alert","button":"libs/bootstrap/button","carousel":"libs/bootstrap/carousel","collapse":"libs/bootstrap/collapse","dropdown":"libs/bootstrap/dropdown","modal":"libs/bootstrap/modal","popover":"libs/bootstrap/popover","scrollspy":"libs/bootstrap/scrollspy","tab":"libs/bootstrap/tab","tooltip":"libs/bootstrap/tooltip","transition":"libs/bootstrap/transition"},"shim":{"hb":["handlebars"],"handlebars-lib":{"exports":"Handlebars"},"soundmanager-lib":{"deps":["soundmanager-defer"],"exports":"soundManager"},"googledash":{"exports":"googledash"},"jwplayer":{"exports":"jwplayer"},"swfobject":{"exports":"swfobject"},"x2js":{"exports":"X2JS"},"moment":{"exports":"moment"},"chrome-analytics":{"exports":"analytics"},"google-analytics":{"exports":"ga"},"bugsense":{"exports":"Bugsense"},"jquery.freefocus":["jquery"],"jquery.translate":["jquery"],"sortable":{"exports":"Sortable"},"affix":["jquery"],"alert":["jquery"],"button":["jquery"],"carousel":["jquery"],"collapse":["jquery"],"dropdown":["jquery"],"modal":["jquery"],"popover":["jquery"],"scrollspy":["jquery"],"tab":["jquery"],"tooltip":["jquery"],"transition":["jquery"]}}),define("config",function(){}),function(){var e=this,t=e._,n={},i=Array.prototype,s=Object.prototype,a=Function.prototype,r=i.push,o=i.slice,l=i.concat,c=s.toString,d=s.hasOwnProperty,u=i.forEach,h=i.map,p=i.reduce,f=i.reduceRight,m=i.filter,g=i.every,v=i.some,y=i.indexOf,b=i.lastIndexOf,w=Array.isArray,x=Object.keys,k=a.bind,S=function(e){return e instanceof S?e:this instanceof S?void(this._wrapped=e):new S(e)
};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=S),exports._=S):e._=S,S.VERSION="1.6.0";var C=S.each=S.forEach=function(e,t,i){if(null==e)return e;if(u&&e.forEach===u)e.forEach(t,i);else if(e.length===+e.length){for(var s=0,a=e.length;a>s;s++)if(t.call(i,e[s],s,e)===n)return}else for(var r=S.keys(e),s=0,a=r.length;a>s;s++)if(t.call(i,e[r[s]],r[s],e)===n)return;return e};S.map=S.collect=function(e,t,n){var i=[];return null==e?i:h&&e.map===h?e.map(t,n):(C(e,function(e,s,a){i.push(t.call(n,e,s,a))
}),i)};var T="Reduce of empty array with no initial value";S.reduce=S.foldl=S.inject=function(e,t,n,i){var s=arguments.length>2;if(null==e&&(e=[]),p&&e.reduce===p)return i&&(t=S.bind(t,i)),s?e.reduce(t,n):e.reduce(t);if(C(e,function(e,a,r){s?n=t.call(i,n,e,a,r):(n=e,s=!0)}),!s)throw new TypeError(T);return n},S.reduceRight=S.foldr=function(e,t,n,i){var s=arguments.length>2;if(null==e&&(e=[]),f&&e.reduceRight===f)return i&&(t=S.bind(t,i)),s?e.reduceRight(t,n):e.reduceRight(t);var a=e.length;if(a!==+a){var r=S.keys(e);
a=r.length}if(C(e,function(o,l,c){l=r?r[--a]:--a,s?n=t.call(i,n,e[l],l,c):(n=e[l],s=!0)}),!s)throw new TypeError(T);return n},S.find=S.detect=function(e,t,n){var i;return A(e,function(e,s,a){return t.call(n,e,s,a)?(i=e,!0):void 0}),i},S.filter=S.select=function(e,t,n){var i=[];return null==e?i:m&&e.filter===m?e.filter(t,n):(C(e,function(e,s,a){t.call(n,e,s,a)&&i.push(e)}),i)},S.reject=function(e,t,n){return S.filter(e,function(e,i,s){return!t.call(n,e,i,s)},n)},S.every=S.all=function(e,t,i){t||(t=S.identity);
var s=!0;return null==e?s:g&&e.every===g?e.every(t,i):(C(e,function(e,a,r){return(s=s&&t.call(i,e,a,r))?void 0:n}),!!s)};var A=S.some=S.any=function(e,t,i){t||(t=S.identity);var s=!1;return null==e?s:v&&e.some===v?e.some(t,i):(C(e,function(e,a,r){return s||(s=t.call(i,e,a,r))?n:void 0}),!!s)};S.contains=S.include=function(e,t){return null==e?!1:y&&e.indexOf===y?-1!=e.indexOf(t):A(e,function(e){return e===t})},S.invoke=function(e,t){var n=o.call(arguments,2),i=S.isFunction(t);return S.map(e,function(e){return(i?t:e[t]).apply(e,n)
})},S.pluck=function(e,t){return S.map(e,S.property(t))},S.where=function(e,t){return S.filter(e,S.matches(t))},S.findWhere=function(e,t){return S.find(e,S.matches(t))},S.max=function(e,t,n){if(!t&&S.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);var i=-1/0,s=-1/0;return C(e,function(e,a,r){var o=t?t.call(n,e,a,r):e;o>s&&(i=e,s=o)}),i},S.min=function(e,t,n){if(!t&&S.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);var i=1/0,s=1/0;return C(e,function(e,a,r){var o=t?t.call(n,e,a,r):e;
s>o&&(i=e,s=o)}),i},S.shuffle=function(e){var t,n=0,i=[];return C(e,function(e){t=S.random(n++),i[n-1]=i[t],i[t]=e}),i},S.sample=function(e,t,n){return null==t||n?(e.length!==+e.length&&(e=S.values(e)),e[S.random(e.length-1)]):S.shuffle(e).slice(0,Math.max(0,t))};var I=function(e){return null==e?S.identity:S.isFunction(e)?e:S.property(e)};S.sortBy=function(e,t,n){return t=I(t),S.pluck(S.map(e,function(e,i,s){return{"value":e,"index":i,"criteria":t.call(n,e,i,s)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;
if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return e.index-t.index}),"value")};var P=function(e){return function(t,n,i){var s={};return n=I(n),C(t,function(a,r){var o=n.call(i,a,r,t);e(s,o,a)}),s}};S.groupBy=P(function(e,t,n){S.has(e,t)?e[t].push(n):e[t]=[n]}),S.indexBy=P(function(e,t,n){e[t]=n}),S.countBy=P(function(e,t){S.has(e,t)?e[t]++:e[t]=1}),S.sortedIndex=function(e,t,n,i){n=I(n);for(var s=n.call(i,t),a=0,r=e.length;r>a;){var o=a+r>>>1;n.call(i,e[o])<s?a=o+1:r=o}return a
},S.toArray=function(e){return e?S.isArray(e)?o.call(e):e.length===+e.length?S.map(e,S.identity):S.values(e):[]},S.size=function(e){return null==e?0:e.length===+e.length?e.length:S.keys(e).length},S.first=S.head=S.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:0>t?[]:o.call(e,0,t)},S.initial=function(e,t,n){return o.call(e,0,e.length-(null==t||n?1:t))},S.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:o.call(e,Math.max(e.length-t,0))},S.rest=S.tail=S.drop=function(e,t,n){return o.call(e,null==t||n?1:t)
},S.compact=function(e){return S.filter(e,S.identity)};var M=function(e,t,n){return t&&S.every(e,S.isArray)?l.apply(n,e):(C(e,function(e){S.isArray(e)||S.isArguments(e)?t?r.apply(n,e):M(e,t,n):n.push(e)}),n)};S.flatten=function(e,t){return M(e,t,[])},S.without=function(e){return S.difference(e,o.call(arguments,1))},S.partition=function(e,t,n){t=I(t);var i=[],s=[];return C(e,function(e){(t.call(n,e)?i:s).push(e)}),[i,s]},S.uniq=S.unique=function(e,t,n,i){S.isFunction(t)&&(i=n,n=t,t=!1);var s=n?S.map(e,n,i):e,a=[],r=[];
return C(s,function(n,i){(t?i&&r[r.length-1]===n:S.contains(r,n))||(r.push(n),a.push(e[i]))}),a},S.union=function(){return S.uniq(S.flatten(arguments,!0))},S.intersection=function(e){var t=o.call(arguments,1);return S.filter(S.uniq(e),function(e){return S.every(t,function(t){return S.contains(t,e)})})},S.difference=function(e){var t=l.apply(i,o.call(arguments,1));return S.filter(e,function(e){return!S.contains(t,e)})},S.zip=function(){for(var e=S.max(S.pluck(arguments,"length").concat(0)),t=new Array(e),n=0;e>n;n++)t[n]=S.pluck(arguments,""+n);
return t},S.object=function(e,t){if(null==e)return{};for(var n={},i=0,s=e.length;s>i;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},S.indexOf=function(e,t,n){if(null==e)return-1;var i=0,s=e.length;if(n){if("number"!=typeof n)return i=S.sortedIndex(e,t),e[i]===t?i:-1;i=0>n?Math.max(0,s+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;s>i;i++)if(e[i]===t)return i;return-1},S.lastIndexOf=function(e,t,n){if(null==e)return-1;var i=null!=n;if(b&&e.lastIndexOf===b)return i?e.lastIndexOf(t,n):e.lastIndexOf(t);
for(var s=i?n:e.length;s--;)if(e[s]===t)return s;return-1},S.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((t-e)/n),0),s=0,a=new Array(i);i>s;)a[s++]=e,e+=n;return a};var D=function(){};S.bind=function(e,t){var n,i;if(k&&e.bind===k)return k.apply(e,o.call(arguments,1));if(!S.isFunction(e))throw new TypeError;return n=o.call(arguments,2),i=function(){if(!(this instanceof i))return e.apply(t,n.concat(o.call(arguments)));D.prototype=e.prototype;
var s=new D;D.prototype=null;var a=e.apply(s,n.concat(o.call(arguments)));return Object(a)===a?a:s}},S.partial=function(e){var t=o.call(arguments,1);return function(){for(var n=0,i=t.slice(),s=0,a=i.length;a>s;s++)i[s]===S&&(i[s]=arguments[n++]);for(;n<arguments.length;)i.push(arguments[n++]);return e.apply(this,i)}},S.bindAll=function(e){var t=o.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return C(t,function(t){e[t]=S.bind(e[t],e)}),e},S.memoize=function(e,t){var n={};
return t||(t=S.identity),function(){var i=t.apply(this,arguments);return S.has(n,i)?n[i]:n[i]=e.apply(this,arguments)}},S.delay=function(e,t){var n=o.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},S.defer=function(e){return S.delay.apply(S,[e,1].concat(o.call(arguments,1)))},S.throttle=function(e,t,n){var i,s,a,r=null,o=0;n||(n={});var l=function(){o=n.leading===!1?0:S.now(),r=null,a=e.apply(i,s),i=s=null};return function(){var c=S.now();o||n.leading!==!1||(o=c);var d=t-(c-o);
return i=this,s=arguments,0>=d?(clearTimeout(r),r=null,o=c,a=e.apply(i,s),i=s=null):r||n.trailing===!1||(r=setTimeout(l,d)),a}},S.debounce=function(e,t,n){var i,s,a,r,o,l=function(){var c=S.now()-r;t>c?i=setTimeout(l,t-c):(i=null,n||(o=e.apply(a,s),a=s=null))};return function(){a=this,s=arguments,r=S.now();var c=n&&!i;return i||(i=setTimeout(l,t)),c&&(o=e.apply(a,s),a=s=null),o}},S.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},S.wrap=function(e,t){return S.partial(t,e)
},S.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},S.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},S.keys=function(e){if(!S.isObject(e))return[];if(x)return x(e);var t=[];for(var n in e)S.has(e,n)&&t.push(n);return t},S.values=function(e){for(var t=S.keys(e),n=t.length,i=new Array(n),s=0;n>s;s++)i[s]=e[t[s]];return i},S.pairs=function(e){for(var t=S.keys(e),n=t.length,i=new Array(n),s=0;n>s;s++)i[s]=[t[s],e[t[s]]];
return i},S.invert=function(e){for(var t={},n=S.keys(e),i=0,s=n.length;s>i;i++)t[e[n[i]]]=n[i];return t},S.functions=S.methods=function(e){var t=[];for(var n in e)S.isFunction(e[n])&&t.push(n);return t.sort()},S.extend=function(e){return C(o.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},S.pick=function(e){var t={},n=l.apply(i,o.call(arguments,1));return C(n,function(n){n in e&&(t[n]=e[n])}),t},S.omit=function(e){var t={},n=l.apply(i,o.call(arguments,1));for(var s in e)S.contains(n,s)||(t[s]=e[s]);
return t},S.defaults=function(e){return C(o.call(arguments,1),function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])}),e},S.clone=function(e){return S.isObject(e)?S.isArray(e)?e.slice():S.extend({},e):e},S.tap=function(e,t){return t(e),e};var _=function(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof S&&(e=e._wrapped),t instanceof S&&(t=t._wrapped);var s=c.call(e);if(s!=c.call(t))return!1;switch(s){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;
case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var a=n.length;a--;)if(n[a]==e)return i[a]==t;var r=e.constructor,o=t.constructor;if(r!==o&&!(S.isFunction(r)&&r instanceof r&&S.isFunction(o)&&o instanceof o)&&"constructor"in e&&"constructor"in t)return!1;n.push(e),i.push(t);var l=0,d=!0;if("[object Array]"==s){if(l=e.length,d=l==t.length)for(;l--&&(d=_(e[l],t[l],n,i)););}else{for(var u in e)if(S.has(e,u)&&(l++,!(d=S.has(t,u)&&_(e[u],t[u],n,i))))break;
if(d){for(u in t)if(S.has(t,u)&&!l--)break;d=!l}}return n.pop(),i.pop(),d};S.isEqual=function(e,t){return _(e,t,[],[])},S.isEmpty=function(e){if(null==e)return!0;if(S.isArray(e)||S.isString(e))return 0===e.length;for(var t in e)if(S.has(e,t))return!1;return!0},S.isElement=function(e){return!(!e||1!==e.nodeType)},S.isArray=w||function(e){return"[object Array]"==c.call(e)},S.isObject=function(e){return e===Object(e)},C(["Arguments","Function","String","Number","Date","RegExp"],function(e){S["is"+e]=function(t){return c.call(t)=="[object "+e+"]"
}}),S.isArguments(arguments)||(S.isArguments=function(e){return!(!e||!S.has(e,"callee"))}),"function"!=typeof/./&&(S.isFunction=function(e){return"function"==typeof e}),S.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},S.isNaN=function(e){return S.isNumber(e)&&e!=+e},S.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==c.call(e)},S.isNull=function(e){return null===e},S.isUndefined=function(e){return void 0===e},S.has=function(e,t){return d.call(e,t)},S.noConflict=function(){return e._=t,this
},S.identity=function(e){return e},S.constant=function(e){return function(){return e}},S.property=function(e){return function(t){return t[e]}},S.matches=function(e){return function(t){if(t===e)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0}},S.times=function(e,t,n){for(var i=Array(Math.max(0,e)),s=0;e>s;s++)i[s]=t.call(n,s);return i},S.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},S.now=Date.now||function(){return(new Date).getTime()};var E={"escape":{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};
E.unescape=S.invert(E.escape);var L={"escape":new RegExp("["+S.keys(E.escape).join("")+"]","g"),"unescape":new RegExp("("+S.keys(E.unescape).join("|")+")","g")};S.each(["escape","unescape"],function(e){S[e]=function(t){return null==t?"":(""+t).replace(L[e],function(t){return E[e][t]})}}),S.result=function(e,t){if(null==e)return void 0;var n=e[t];return S.isFunction(n)?n.call(e):n},S.mixin=function(e){C(S.functions(e),function(t){var n=S[t]=e[t];S.prototype[t]=function(){var e=[this._wrapped];return r.apply(e,arguments),V.call(this,n.apply(S,e))
}})};var R=0;S.uniqueId=function(e){var t=++R+"";return e?e+t:t},S.templateSettings={"evaluate":/<%([\s\S]+?)%>/g,"interpolate":/<%=([\s\S]+?)%>/g,"escape":/<%-([\s\S]+?)%>/g};var N=/(.)^/,O={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\t|\u2028|\u2029/g;S.template=function(e,t,n){var i;n=S.defaults({},n,S.templateSettings);var s=new RegExp([(n.escape||N).source,(n.interpolate||N).source,(n.evaluate||N).source].join("|")+"|$","g"),a=0,r="__p+='";e.replace(s,function(t,n,i,s,o){return r+=e.slice(a,o).replace(B,function(e){return"\\"+O[e]
}),n&&(r+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(r+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),s&&(r+="';\n"+s+"\n__p+='"),a=o+t.length,t}),r+="';\n",n.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";try{i=new Function(n.variable||"obj","_",r)}catch(o){throw o.source=r,o}if(t)return i(t,S);var l=function(e){return i.call(this,e,S)};return l.source="function("+(n.variable||"obj")+"){\n"+r+"}",l
},S.chain=function(e){return S(e).chain()};var V=function(e){return this._chain?S(e).chain():e};S.mixin(S),C(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=i[e];S.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],V.call(this,n)}}),C(["concat","join","slice"],function(e){var t=i[e];S.prototype[e]=function(){return V.call(this,t.apply(this._wrapped,arguments))}}),S.extend(S.prototype,{"chain":function(){return this._chain=!0,this
},"value":function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return S})}.call(this),function(e,t){function n(e){var t=e.length,n=dt.type(e);return dt.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function i(e){var t=Tt[e]={};return dt.each(e.match(ht)||[],function(e,n){t[n]=!0}),t}function s(e,n,i,s){if(dt.acceptData(e)){var a,r,o=dt.expando,l=e.nodeType,c=l?dt.cache:e,d=l?e[o]:e[o]&&o;
if(d&&c[d]&&(s||c[d].data)||i!==t||"string"!=typeof n)return d||(d=l?e[o]=tt.pop()||dt.guid++:o),c[d]||(c[d]=l?{}:{"toJSON":dt.noop}),("object"==typeof n||"function"==typeof n)&&(s?c[d]=dt.extend(c[d],n):c[d].data=dt.extend(c[d].data,n)),r=c[d],s||(r.data||(r.data={}),r=r.data),i!==t&&(r[dt.camelCase(n)]=i),"string"==typeof n?(a=r[n],null==a&&(a=r[dt.camelCase(n)])):a=r,a}}function a(e,t,n){if(dt.acceptData(e)){var i,s,a=e.nodeType,r=a?dt.cache:e,l=a?e[dt.expando]:dt.expando;if(r[l]){if(t&&(i=n?r[l]:r[l].data)){dt.isArray(t)?t=t.concat(dt.map(t,dt.camelCase)):t in i?t=[t]:(t=dt.camelCase(t),t=t in i?[t]:t.split(" ")),s=t.length;
for(;s--;)delete i[t[s]];if(n?!o(i):!dt.isEmptyObject(i))return}(n||(delete r[l].data,o(r[l])))&&(a?dt.cleanData([e],!0):dt.support.deleteExpando||r!=r.window?delete r[l]:r[l]=null)}}}function r(e,n,i){if(i===t&&1===e.nodeType){var s="data-"+n.replace(It,"-$1").toLowerCase();if(i=e.getAttribute(s),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:At.test(i)?dt.parseJSON(i):i}catch(a){}dt.data(e,n,i)}else i=t}return i}function o(e){var t;for(t in e)if(("data"!==t||!dt.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;
return!0}function l(){return!0}function c(){return!1}function d(){try{return G.activeElement}catch(e){}}function u(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function h(e,t,n){if(dt.isFunction(t))return dt.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return dt.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(zt.test(t))return dt.filter(t,e,n);t=dt.filter(t,e)}return dt.grep(e,function(e){return dt.inArray(e,t)>=0!==n})}function p(e){var t=Wt.split("|"),n=e.createDocumentFragment();
if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function f(e,t){return dt.nodeName(e,"table")&&dt.nodeName(1===t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function m(e){return e.type=(null!==dt.find.attr(e,"type"))+"/"+e.type,e}function g(e){var t=an.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function v(e,t){for(var n,i=0;null!=(n=e[i]);i++)dt._data(n,"globalEval",!t||dt._data(t[i],"globalEval"))
}function y(e,t){if(1===t.nodeType&&dt.hasData(e)){var n,i,s,a=dt._data(e),r=dt._data(t,a),o=a.events;if(o){delete r.handle,r.events={};for(n in o)for(i=0,s=o[n].length;s>i;i++)dt.event.add(t,n,o[n][i])}r.data&&(r.data=dt.extend({},r.data))}}function b(e,t){var n,i,s;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!dt.support.noCloneEvent&&t[dt.expando]){s=dt._data(t);for(i in s.events)dt.removeEvent(t,i,s.handle);t.removeAttribute(dt.expando)}"script"===n&&t.text!==e.text?(m(t).text=e.text,g(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),dt.support.html5Clone&&e.innerHTML&&!dt.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&tn.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)
}}function w(e,n){var i,s,a=0,r=typeof e.getElementsByTagName!==Q?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==Q?e.querySelectorAll(n||"*"):t;if(!r)for(r=[],i=e.childNodes||e;null!=(s=i[a]);a++)!n||dt.nodeName(s,n)?r.push(s):dt.merge(r,w(s,n));return n===t||n&&dt.nodeName(e,n)?dt.merge([e],r):r}function x(e){tn.test(e.type)&&(e.defaultChecked=e.checked)}function k(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),i=t,s=Tn.length;s--;)if(t=Tn[s]+n,t in e)return t;
return i}function S(e,t){return e=t||e,"none"===dt.css(e,"display")||!dt.contains(e.ownerDocument,e)}function C(e,t){for(var n,i,s,a=[],r=0,o=e.length;o>r;r++)i=e[r],i.style&&(a[r]=dt._data(i,"olddisplay"),n=i.style.display,t?(a[r]||"none"!==n||(i.style.display=""),""===i.style.display&&S(i)&&(a[r]=dt._data(i,"olddisplay",P(i.nodeName)))):a[r]||(s=S(i),(n&&"none"!==n||!s)&&dt._data(i,"olddisplay",s?n:dt.css(i,"display"))));for(r=0;o>r;r++)i=e[r],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?a[r]||"":"none"));
return e}function T(e,t,n){var i=yn.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function A(e,t,n,i,s){for(var a=n===(i?"border":"content")?4:"width"===t?1:0,r=0;4>a;a+=2)"margin"===n&&(r+=dt.css(e,n+Cn[a],!0,s)),i?("content"===n&&(r-=dt.css(e,"padding"+Cn[a],!0,s)),"margin"!==n&&(r-=dt.css(e,"border"+Cn[a]+"Width",!0,s))):(r+=dt.css(e,"padding"+Cn[a],!0,s),"padding"!==n&&(r+=dt.css(e,"border"+Cn[a]+"Width",!0,s)));return r}function I(e,t,n){var i=!0,s="width"===t?e.offsetWidth:e.offsetHeight,a=un(e),r=dt.support.boxSizing&&"border-box"===dt.css(e,"boxSizing",!1,a);
if(0>=s||null==s){if(s=hn(e,t,a),(0>s||null==s)&&(s=e.style[t]),bn.test(s))return s;i=r&&(dt.support.boxSizingReliable||s===e.style[t]),s=parseFloat(s)||0}return s+A(e,t,n||(r?"border":"content"),i,a)+"px"}function P(e){var t=G,n=xn[e];return n||(n=M(e,t),"none"!==n&&n||(dn=(dn||dt("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(dn[0].contentWindow||dn[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=M(e,t),dn.detach()),xn[e]=n),n
}function M(e,t){var n=dt(t.createElement(e)).appendTo(t.body),i=dt.css(n[0],"display");return n.remove(),i}function D(e,t,n,i){var s;if(dt.isArray(t))dt.each(t,function(t,s){n||In.test(e)?i(e,s):D(e+"["+("object"==typeof s?t:"")+"]",s,n,i)});else if(n||"object"!==dt.type(t))i(e,t);else for(s in t)D(e+"["+s+"]",t[s],n,i)}function _(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,s=0,a=t.toLowerCase().match(ht)||[];if(dt.isFunction(n))for(;i=a[s++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)
}}function E(e,t,n,i){function s(o){var l;return a[o]=!0,dt.each(e[o]||[],function(e,o){var c=o(t,n,i);return"string"!=typeof c||r||a[c]?r?!(l=c):void 0:(t.dataTypes.unshift(c),s(c),!1)}),l}var a={},r=e===Hn;return s(t.dataTypes[0])||!a["*"]&&s("*")}function L(e,n){var i,s,a=dt.ajaxSettings.flatOptions||{};for(s in n)n[s]!==t&&((a[s]?e:i||(i={}))[s]=n[s]);return i&&dt.extend(!0,e,i),e}function R(e,n,i){for(var s,a,r,o,l=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),a===t&&(a=e.mimeType||n.getResponseHeader("Content-Type"));
if(a)for(o in l)if(l[o]&&l[o].test(a)){c.unshift(o);break}if(c[0]in i)r=c[0];else{for(o in i){if(!c[0]||e.converters[o+" "+c[0]]){r=o;break}s||(s=o)}r=r||s}return r?(r!==c[0]&&c.unshift(r),i[r]):void 0}function N(e,t,n,i){var s,a,r,o,l,c={},d=e.dataTypes.slice();if(d[1])for(r in e.converters)c[r.toLowerCase()]=e.converters[r];for(a=d.shift();a;)if(e.responseFields[a]&&(n[e.responseFields[a]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=a,a=d.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(r=c[l+" "+a]||c["* "+a],!r)for(s in c)if(o=s.split(" "),o[1]===a&&(r=c[l+" "+o[0]]||c["* "+o[0]])){r===!0?r=c[s]:c[s]!==!0&&(a=o[0],d.unshift(o[1]));
break}if(r!==!0)if(r&&e["throws"])t=r(t);else try{t=r(t)}catch(u){return{"state":"parsererror","error":r?u:"No conversion from "+l+" to "+a}}}return{"state":"success","data":t}}function O(){try{return new e.XMLHttpRequest}catch(t){}}function B(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function V(){return setTimeout(function(){Zn=t}),Zn=dt.now()}function F(e,t,n){for(var i,s=(ai[t]||[]).concat(ai["*"]),a=0,r=s.length;r>a;a++)if(i=s[a].call(n,t,e))return i}function q(e,t,n){var i,s,a=0,r=si.length,o=dt.Deferred().always(function(){delete l.elem
}),l=function(){if(s)return!1;for(var t=Zn||V(),n=Math.max(0,c.startTime+c.duration-t),i=n/c.duration||0,a=1-i,r=0,l=c.tweens.length;l>r;r++)c.tweens[r].run(a);return o.notifyWith(e,[c,a,n]),1>a&&l?n:(o.resolveWith(e,[c]),!1)},c=o.promise({"elem":e,"props":dt.extend({},t),"opts":dt.extend(!0,{"specialEasing":{}},n),"originalProperties":t,"originalOptions":n,"startTime":Zn||V(),"duration":n.duration,"tweens":[],"createTween":function(t,n){var i=dt.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);
return c.tweens.push(i),i},"stop":function(t){var n=0,i=t?c.tweens.length:0;if(s)return this;for(s=!0;i>n;n++)c.tweens[n].run(1);return t?o.resolveWith(e,[c,t]):o.rejectWith(e,[c,t]),this}}),d=c.props;for(U(d,c.opts.specialEasing);r>a;a++)if(i=si[a].call(c,e,d,c.opts))return i;return dt.map(d,F,c),dt.isFunction(c.opts.start)&&c.opts.start.call(e,c),dt.fx.timer(dt.extend(l,{"elem":e,"anim":c,"queue":c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)
}function U(e,t){var n,i,s,a,r;for(n in e)if(i=dt.camelCase(n),s=t[i],a=e[n],dt.isArray(a)&&(s=a[1],a=e[n]=a[0]),n!==i&&(e[i]=a,delete e[n]),r=dt.cssHooks[i],r&&"expand"in r){a=r.expand(a),delete e[i];for(n in a)n in e||(e[n]=a[n],t[n]=s)}else t[i]=s}function z(e,t,n){var i,s,a,r,o,l,c=this,d={},u=e.style,h=e.nodeType&&S(e),p=dt._data(e,"fxshow");n.queue||(o=dt._queueHooks(e,"fx"),null==o.unqueued&&(o.unqueued=0,l=o.empty.fire,o.empty.fire=function(){o.unqueued||l()}),o.unqueued++,c.always(function(){c.always(function(){o.unqueued--,dt.queue(e,"fx").length||o.empty.fire()
})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[u.overflow,u.overflowX,u.overflowY],"inline"===dt.css(e,"display")&&"none"===dt.css(e,"float")&&(dt.support.inlineBlockNeedsLayout&&"inline"!==P(e.nodeName)?u.zoom=1:u.display="inline-block")),n.overflow&&(u.overflow="hidden",dt.support.shrinkWrapBlocks||c.always(function(){u.overflow=n.overflow[0],u.overflowX=n.overflow[1],u.overflowY=n.overflow[2]}));for(i in t)if(s=t[i],ti.exec(s)){if(delete t[i],a=a||"toggle"===s,s===(h?"hide":"show"))continue;
d[i]=p&&p[i]||dt.style(e,i)}if(!dt.isEmptyObject(d)){p?"hidden"in p&&(h=p.hidden):p=dt._data(e,"fxshow",{}),a&&(p.hidden=!h),h?dt(e).show():c.done(function(){dt(e).hide()}),c.done(function(){var t;dt._removeData(e,"fxshow");for(t in d)dt.style(e,t,d[t])});for(i in d)r=F(h?p[i]:0,i,c),i in p||(p[i]=r.start,h&&(r.end=r.start,r.start="width"===i||"height"===i?1:0))}}function j(e,t,n,i,s){return new j.prototype.init(e,t,n,i,s)}function H(e,t){var n,i={"height":e},s=0;for(t=t?1:0;4>s;s+=2-t)n=Cn[s],i["margin"+n]=i["padding"+n]=e;
return t&&(i.opacity=i.width=e),i}function $(e){return dt.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var W,Y,Q=typeof t,K=e.location,G=e.document,X=G.documentElement,J=e.jQuery,Z=e.$,et={},tt=[],nt="1.10.2",it=tt.concat,st=tt.push,at=tt.slice,rt=tt.indexOf,ot=et.toString,lt=et.hasOwnProperty,ct=nt.trim,dt=function(e,t){return new dt.fn.init(e,t,Y)},ut=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ht=/\S+/g,pt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ft=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,mt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,gt=/^[\],:{}\s]*$/,vt=/(?:^|:|,)(?:\s*\[)+/g,yt=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,bt=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,wt=/^-ms-/,xt=/-([\da-z])/gi,kt=function(e,t){return t.toUpperCase()
},St=function(e){(G.addEventListener||"load"===e.type||"complete"===G.readyState)&&(Ct(),dt.ready())},Ct=function(){G.addEventListener?(G.removeEventListener("DOMContentLoaded",St,!1),e.removeEventListener("load",St,!1)):(G.detachEvent("onreadystatechange",St),e.detachEvent("onload",St))};dt.fn=dt.prototype={"jquery":nt,"constructor":dt,"init":function(e,n,i){var s,a;if(!e)return this;if("string"==typeof e){if(s="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:ft.exec(e),!s||!s[1]&&n)return!n||n.jquery?(n||i).find(e):this.constructor(n).find(e);
if(s[1]){if(n=n instanceof dt?n[0]:n,dt.merge(this,dt.parseHTML(s[1],n&&n.nodeType?n.ownerDocument||n:G,!0)),mt.test(s[1])&&dt.isPlainObject(n))for(s in n)dt.isFunction(this[s])?this[s](n[s]):this.attr(s,n[s]);return this}if(a=G.getElementById(s[2]),a&&a.parentNode){if(a.id!==s[2])return i.find(e);this.length=1,this[0]=a}return this.context=G,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):dt.isFunction(e)?i.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),dt.makeArray(e,this))
},"selector":"","length":0,"toArray":function(){return at.call(this)},"get":function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},"pushStack":function(e){var t=dt.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},"each":function(e,t){return dt.each(this,e,t)},"ready":function(e){return dt.ready.promise().done(e),this},"slice":function(){return this.pushStack(at.apply(this,arguments))},"first":function(){return this.eq(0)},"last":function(){return this.eq(-1)
},"eq":function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},"map":function(e){return this.pushStack(dt.map(this,function(t,n){return e.call(t,n,t)}))},"end":function(){return this.prevObject||this.constructor(null)},"push":st,"sort":[].sort,"splice":[].splice},dt.fn.init.prototype=dt.fn,dt.extend=dt.fn.extend=function(){var e,n,i,s,a,r,o=arguments[0]||{},l=1,c=arguments.length,d=!1;for("boolean"==typeof o&&(d=o,o=arguments[1]||{},l=2),"object"==typeof o||dt.isFunction(o)||(o={}),c===l&&(o=this,--l);c>l;l++)if(null!=(a=arguments[l]))for(s in a)e=o[s],i=a[s],o!==i&&(d&&i&&(dt.isPlainObject(i)||(n=dt.isArray(i)))?(n?(n=!1,r=e&&dt.isArray(e)?e:[]):r=e&&dt.isPlainObject(e)?e:{},o[s]=dt.extend(d,r,i)):i!==t&&(o[s]=i));
return o},dt.extend({"expando":"jQuery"+(nt+Math.random()).replace(/\D/g,""),"noConflict":function(t){return e.$===dt&&(e.$=Z),t&&e.jQuery===dt&&(e.jQuery=J),dt},"isReady":!1,"readyWait":1,"holdReady":function(e){e?dt.readyWait++:dt.ready(!0)},"ready":function(e){if(e===!0?!--dt.readyWait:!dt.isReady){if(!G.body)return setTimeout(dt.ready);dt.isReady=!0,e!==!0&&--dt.readyWait>0||(W.resolveWith(G,[dt]),dt.fn.trigger&&dt(G).trigger("ready").off("ready"))}},"isFunction":function(e){return"function"===dt.type(e)
},"isArray":Array.isArray||function(e){return"array"===dt.type(e)},"isWindow":function(e){return null!=e&&e==e.window},"isNumeric":function(e){return!isNaN(parseFloat(e))&&isFinite(e)},"type":function(e){return null==e?String(e):"object"==typeof e||"function"==typeof e?et[ot.call(e)]||"object":typeof e},"isPlainObject":function(e){var n;if(!e||"object"!==dt.type(e)||e.nodeType||dt.isWindow(e))return!1;try{if(e.constructor&&!lt.call(e,"constructor")&&!lt.call(e.constructor.prototype,"isPrototypeOf"))return!1
}catch(i){return!1}if(dt.support.ownLast)for(n in e)return lt.call(e,n);for(n in e);return n===t||lt.call(e,n)},"isEmptyObject":function(e){var t;for(t in e)return!1;return!0},"error":function(e){throw new Error(e)},"parseHTML":function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||G;var i=mt.exec(e),s=!n&&[];return i?[t.createElement(i[1])]:(i=dt.buildFragment([e],t,s),s&&dt(s).remove(),dt.merge([],i.childNodes))},"parseJSON":function(t){return e.JSON&&e.JSON.parse?e.JSON.parse(t):null===t?t:"string"==typeof t&&(t=dt.trim(t),t&&gt.test(t.replace(yt,"@").replace(bt,"]").replace(vt,"")))?new Function("return "+t)():void dt.error("Invalid JSON: "+t)
},"parseXML":function(n){var i,s;if(!n||"string"!=typeof n)return null;try{e.DOMParser?(s=new DOMParser,i=s.parseFromString(n,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(n))}catch(a){i=t}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length||dt.error("Invalid XML: "+n),i},"noop":function(){},"globalEval":function(t){t&&dt.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},"camelCase":function(e){return e.replace(wt,"ms-").replace(xt,kt)
},"nodeName":function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},"each":function(e,t,i){var s,a=0,r=e.length,o=n(e);if(i){if(o)for(;r>a&&(s=t.apply(e[a],i),s!==!1);a++);else for(a in e)if(s=t.apply(e[a],i),s===!1)break}else if(o)for(;r>a&&(s=t.call(e[a],a,e[a]),s!==!1);a++);else for(a in e)if(s=t.call(e[a],a,e[a]),s===!1)break;return e},"trim":ct&&!ct.call("\ufeff\xa0")?function(e){return null==e?"":ct.call(e)}:function(e){return null==e?"":(e+"").replace(pt,"")},"makeArray":function(e,t){var i=t||[];
return null!=e&&(n(Object(e))?dt.merge(i,"string"==typeof e?[e]:e):st.call(i,e)),i},"inArray":function(e,t,n){var i;if(t){if(rt)return rt.call(t,e,n);for(i=t.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in t&&t[n]===e)return n}return-1},"merge":function(e,n){var i=n.length,s=e.length,a=0;if("number"==typeof i)for(;i>a;a++)e[s++]=n[a];else for(;n[a]!==t;)e[s++]=n[a++];return e.length=s,e},"grep":function(e,t,n){var i,s=[],a=0,r=e.length;for(n=!!n;r>a;a++)i=!!t(e[a],a),n!==i&&s.push(e[a]);return s
},"map":function(e,t,i){var s,a=0,r=e.length,o=n(e),l=[];if(o)for(;r>a;a++)s=t(e[a],a,i),null!=s&&(l[l.length]=s);else for(a in e)s=t(e[a],a,i),null!=s&&(l[l.length]=s);return it.apply([],l)},"guid":1,"proxy":function(e,n){var i,s,a;return"string"==typeof n&&(a=e[n],n=e,e=a),dt.isFunction(e)?(i=at.call(arguments,2),s=function(){return e.apply(n||this,i.concat(at.call(arguments)))},s.guid=e.guid=e.guid||dt.guid++,s):t},"access":function(e,n,i,s,a,r,o){var l=0,c=e.length,d=null==i;if("object"===dt.type(i)){a=!0;
for(l in i)dt.access(e,n,l,i[l],!0,r,o)}else if(s!==t&&(a=!0,dt.isFunction(s)||(o=!0),d&&(o?(n.call(e,s),n=null):(d=n,n=function(e,t,n){return d.call(dt(e),n)})),n))for(;c>l;l++)n(e[l],i,o?s:s.call(e[l],l,n(e[l],i)));return a?e:d?n.call(e):c?n(e[0],i):r},"now":function(){return(new Date).getTime()},"swap":function(e,t,n,i){var s,a,r={};for(a in t)r[a]=e.style[a],e.style[a]=t[a];s=n.apply(e,i||[]);for(a in t)e.style[a]=r[a];return s}}),dt.ready.promise=function(t){if(!W)if(W=dt.Deferred(),"complete"===G.readyState)setTimeout(dt.ready);
else if(G.addEventListener)G.addEventListener("DOMContentLoaded",St,!1),e.addEventListener("load",St,!1);else{G.attachEvent("onreadystatechange",St),e.attachEvent("onload",St);var n=!1;try{n=null==e.frameElement&&G.documentElement}catch(i){}n&&n.doScroll&&!function s(){if(!dt.isReady){try{n.doScroll("left")}catch(e){return setTimeout(s,50)}Ct(),dt.ready()}}()}return W.promise(t)},dt.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){et["[object "+t+"]"]=t.toLowerCase()
}),Y=dt(G),function(e,t){function n(e,t,n,i){var s,a,r,o,l,c,d,u,f,m;if((t?t.ownerDocument||t:q)!==E&&_(t),t=t||E,n=n||[],!e||"string"!=typeof e)return n;if(1!==(o=t.nodeType)&&9!==o)return[];if(R&&!i){if(s=bt.exec(e))if(r=s[1]){if(9===o){if(a=t.getElementById(r),!a||!a.parentNode)return n;if(a.id===r)return n.push(a),n}else if(t.ownerDocument&&(a=t.ownerDocument.getElementById(r))&&V(t,a)&&a.id===r)return n.push(a),n}else{if(s[2])return et.apply(n,t.getElementsByTagName(e)),n;if((r=s[3])&&S.getElementsByClassName&&t.getElementsByClassName)return et.apply(n,t.getElementsByClassName(r)),n
}if(S.qsa&&(!N||!N.test(e))){if(u=d=F,f=t,m=9===o&&e,1===o&&"object"!==t.nodeName.toLowerCase()){for(c=h(e),(d=t.getAttribute("id"))?u=d.replace(kt,"\\$&"):t.setAttribute("id",u),u="[id='"+u+"'] ",l=c.length;l--;)c[l]=u+p(c[l]);f=pt.test(e)&&t.parentNode||t,m=c.join(",")}if(m)try{return et.apply(n,f.querySelectorAll(m)),n}catch(g){}finally{d||t.removeAttribute("id")}}}return x(e.replace(ct,"$1"),t,n,i)}function i(){function e(n,i){return t.push(n+=" ")>T.cacheLength&&delete e[t.shift()],e[n]=i}var t=[];
return e}function s(e){return e[F]=!0,e}function a(e){var t=E.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function r(e,t){for(var n=e.split("|"),i=e.length;i--;)T.attrHandle[n[i]]=t}function o(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||K)-(~e.sourceIndex||K);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function l(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e
}}function c(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function d(e){return s(function(t){return t=+t,s(function(n,i){for(var s,a=e([],n.length,t),r=a.length;r--;)n[s=a[r]]&&(n[s]=!(i[s]=n[s]))})})}function u(){}function h(e,t){var i,s,a,r,o,l,c,d=H[e+" "];if(d)return t?0:d.slice(0);for(o=e,l=[],c=T.preFilter;o;){(!i||(s=ut.exec(o)))&&(s&&(o=o.slice(s[0].length)||o),l.push(a=[])),i=!1,(s=ht.exec(o))&&(i=s.shift(),a.push({"value":i,"type":s[0].replace(ct," ")}),o=o.slice(i.length));
for(r in T.filter)!(s=vt[r].exec(o))||c[r]&&!(s=c[r](s))||(i=s.shift(),a.push({"value":i,"type":r,"matches":s}),o=o.slice(i.length));if(!i)break}return t?o.length:o?n.error(e):H(e,l).slice(0)}function p(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function f(e,t,n){var i=t.dir,s=n&&"parentNode"===i,a=z++;return t.first?function(t,n,a){for(;t=t[i];)if(1===t.nodeType||s)return e(t,n,a)}:function(t,n,r){var o,l,c,d=U+" "+a;if(r){for(;t=t[i];)if((1===t.nodeType||s)&&e(t,n,r))return!0
}else for(;t=t[i];)if(1===t.nodeType||s)if(c=t[F]||(t[F]={}),(l=c[i])&&l[0]===d){if((o=l[1])===!0||o===C)return o===!0}else if(l=c[i]=[d],l[1]=e(t,n,r)||C,l[1]===!0)return!0}}function m(e){return e.length>1?function(t,n,i){for(var s=e.length;s--;)if(!e[s](t,n,i))return!1;return!0}:e[0]}function g(e,t,n,i,s){for(var a,r=[],o=0,l=e.length,c=null!=t;l>o;o++)(a=e[o])&&(!n||n(a,i,s))&&(r.push(a),c&&t.push(o));return r}function v(e,t,n,i,a,r){return i&&!i[F]&&(i=v(i)),a&&!a[F]&&(a=v(a,r)),s(function(s,r,o,l){var c,d,u,h=[],p=[],f=r.length,m=s||w(t||"*",o.nodeType?[o]:o,[]),v=!e||!s&&t?m:g(m,h,e,o,l),y=n?a||(s?e:f||i)?[]:r:v;
if(n&&n(v,y,o,l),i)for(c=g(y,p),i(c,[],o,l),d=c.length;d--;)(u=c[d])&&(y[p[d]]=!(v[p[d]]=u));if(s){if(a||e){if(a){for(c=[],d=y.length;d--;)(u=y[d])&&c.push(v[d]=u);a(null,y=[],c,l)}for(d=y.length;d--;)(u=y[d])&&(c=a?nt.call(s,u):h[d])>-1&&(s[c]=!(r[c]=u))}}else y=g(y===r?y.splice(f,y.length):y),a?a(null,r,y,l):et.apply(r,y)})}function y(e){for(var t,n,i,s=e.length,a=T.relative[e[0].type],r=a||T.relative[" "],o=a?1:0,l=f(function(e){return e===t},r,!0),c=f(function(e){return nt.call(t,e)>-1},r,!0),d=[function(e,n,i){return!a&&(i||n!==M)||((t=n).nodeType?l(e,n,i):c(e,n,i))
}];s>o;o++)if(n=T.relative[e[o].type])d=[f(m(d),n)];else{if(n=T.filter[e[o].type].apply(null,e[o].matches),n[F]){for(i=++o;s>i&&!T.relative[e[i].type];i++);return v(o>1&&m(d),o>1&&p(e.slice(0,o-1).concat({"value":" "===e[o-2].type?"*":""})).replace(ct,"$1"),n,i>o&&y(e.slice(o,i)),s>i&&y(e=e.slice(i)),s>i&&p(e))}d.push(n)}return m(d)}function b(e,t){var i=0,a=t.length>0,r=e.length>0,o=function(s,o,l,c,d){var u,h,p,f=[],m=0,v="0",y=s&&[],b=null!=d,w=M,x=s||r&&T.find.TAG("*",d&&o.parentNode||o),k=U+=null==w?1:Math.random()||.1;
for(b&&(M=o!==E&&o,C=i);null!=(u=x[v]);v++){if(r&&u){for(h=0;p=e[h++];)if(p(u,o,l)){c.push(u);break}b&&(U=k,C=++i)}a&&((u=!p&&u)&&m--,s&&y.push(u))}if(m+=v,a&&v!==m){for(h=0;p=t[h++];)p(y,f,o,l);if(s){if(m>0)for(;v--;)y[v]||f[v]||(f[v]=J.call(c));f=g(f)}et.apply(c,f),b&&!s&&f.length>0&&m+t.length>1&&n.uniqueSort(c)}return b&&(U=k,M=w),y};return a?s(o):o}function w(e,t,i){for(var s=0,a=t.length;a>s;s++)n(e,t[s],i);return i}function x(e,t,n,i){var s,a,r,o,l,c=h(e);if(!i&&1===c.length){if(a=c[0]=c[0].slice(0),a.length>2&&"ID"===(r=a[0]).type&&S.getById&&9===t.nodeType&&R&&T.relative[a[1].type]){if(t=(T.find.ID(r.matches[0].replace(St,Ct),t)||[])[0],!t)return n;
e=e.slice(a.shift().value.length)}for(s=vt.needsContext.test(e)?0:a.length;s--&&(r=a[s],!T.relative[o=r.type]);)if((l=T.find[o])&&(i=l(r.matches[0].replace(St,Ct),pt.test(a[0].type)&&t.parentNode||t))){if(a.splice(s,1),e=i.length&&p(a),!e)return et.apply(n,i),n;break}}return P(e,c)(i,t,!R,n,pt.test(e)),n}var k,S,C,T,A,I,P,M,D,_,E,L,R,N,O,B,V,F="sizzle"+-new Date,q=e.document,U=0,z=0,j=i(),H=i(),$=i(),W=!1,Y=function(e,t){return e===t?(W=!0,0):0},Q=typeof t,K=1<<31,G={}.hasOwnProperty,X=[],J=X.pop,Z=X.push,et=X.push,tt=X.slice,nt=X.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;
return-1},it="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",st="[\\x20\\t\\r\\n\\f]",at="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",rt=at.replace("w","w#"),ot="\\["+st+"*("+at+")"+st+"*(?:([*^$|!~]?=)"+st+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+rt+")|)|)"+st+"*\\]",lt=":("+at+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+ot.replace(3,8)+")*)|.*)\\)|)",ct=new RegExp("^"+st+"+|((?:^|[^\\\\])(?:\\\\.)*)"+st+"+$","g"),ut=new RegExp("^"+st+"*,"+st+"*"),ht=new RegExp("^"+st+"*([>+~]|"+st+")"+st+"*"),pt=new RegExp(st+"*[+~]"),ft=new RegExp("="+st+"*([^\\]'\"]*)"+st+"*\\]","g"),mt=new RegExp(lt),gt=new RegExp("^"+rt+"$"),vt={"ID":new RegExp("^#("+at+")"),"CLASS":new RegExp("^\\.("+at+")"),"TAG":new RegExp("^("+at.replace("w","w*")+")"),"ATTR":new RegExp("^"+ot),"PSEUDO":new RegExp("^"+lt),"CHILD":new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+st+"*(even|odd|(([+-]|)(\\d*)n|)"+st+"*(?:([+-]|)"+st+"*(\\d+)|))"+st+"*\\)|)","i"),"bool":new RegExp("^(?:"+it+")$","i"),"needsContext":new RegExp("^"+st+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+st+"*((?:-\\d)?\\d*)"+st+"*\\)|)(?=[^-]|$)","i")},yt=/^[^{]+\{\s*\[native \w/,bt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,wt=/^(?:input|select|textarea|button)$/i,xt=/^h\d$/i,kt=/'|\\/g,St=new RegExp("\\\\([\\da-f]{1,6}"+st+"?|("+st+")|.)","ig"),Ct=function(e,t,n){var i="0x"+t-65536;
return i!==i||n?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{et.apply(X=tt.call(q.childNodes),q.childNodes),X[q.childNodes.length].nodeType}catch(Tt){et={"apply":X.length?function(e,t){Z.apply(e,tt.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}I=n.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},S=n.support={},_=n.setDocument=function(e){var t=e?e.ownerDocument||e:q,n=t.defaultView;
return t!==E&&9===t.nodeType&&t.documentElement?(E=t,L=t.documentElement,R=!I(t),n&&n.attachEvent&&n!==n.top&&n.attachEvent("onbeforeunload",function(){_()}),S.attributes=a(function(e){return e.className="i",!e.getAttribute("className")}),S.getElementsByTagName=a(function(e){return e.appendChild(t.createComment("")),!e.getElementsByTagName("*").length}),S.getElementsByClassName=a(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length
}),S.getById=a(function(e){return L.appendChild(e).id=F,!t.getElementsByName||!t.getElementsByName(F).length}),S.getById?(T.find.ID=function(e,t){if(typeof t.getElementById!==Q&&R){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},T.filter.ID=function(e){var t=e.replace(St,Ct);return function(e){return e.getAttribute("id")===t}}):(delete T.find.ID,T.filter.ID=function(e){var t=e.replace(St,Ct);return function(e){var n=typeof e.getAttributeNode!==Q&&e.getAttributeNode("id");return n&&n.value===t
}}),T.find.TAG=S.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==Q?t.getElementsByTagName(e):void 0}:function(e,t){var n,i=[],s=0,a=t.getElementsByTagName(e);if("*"===e){for(;n=a[s++];)1===n.nodeType&&i.push(n);return i}return a},T.find.CLASS=S.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==Q&&R?t.getElementsByClassName(e):void 0},O=[],N=[],(S.qsa=yt.test(t.querySelectorAll))&&(a(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||N.push("\\["+st+"*(?:value|"+it+")"),e.querySelectorAll(":checked").length||N.push(":checked")
}),a(function(e){var n=t.createElement("input");n.setAttribute("type","hidden"),e.appendChild(n).setAttribute("t",""),e.querySelectorAll("[t^='']").length&&N.push("[*^$]="+st+"*(?:''|\"\")"),e.querySelectorAll(":enabled").length||N.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),N.push(",.*:")})),(S.matchesSelector=yt.test(B=L.webkitMatchesSelector||L.mozMatchesSelector||L.oMatchesSelector||L.msMatchesSelector))&&a(function(e){S.disconnectedMatch=B.call(e,"div"),B.call(e,"[s!='']:x"),O.push("!=",lt)
}),N=N.length&&new RegExp(N.join("|")),O=O.length&&new RegExp(O.join("|")),V=yt.test(L.contains)||L.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},Y=L.compareDocumentPosition?function(e,n){if(e===n)return W=!0,0;var i=n.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(n);
return i?1&i||!S.sortDetached&&n.compareDocumentPosition(e)===i?e===t||V(q,e)?-1:n===t||V(q,n)?1:D?nt.call(D,e)-nt.call(D,n):0:4&i?-1:1:e.compareDocumentPosition?-1:1}:function(e,n){var i,s=0,a=e.parentNode,r=n.parentNode,l=[e],c=[n];if(e===n)return W=!0,0;if(!a||!r)return e===t?-1:n===t?1:a?-1:r?1:D?nt.call(D,e)-nt.call(D,n):0;if(a===r)return o(e,n);for(i=e;i=i.parentNode;)l.unshift(i);for(i=n;i=i.parentNode;)c.unshift(i);for(;l[s]===c[s];)s++;return s?o(l[s],c[s]):l[s]===q?-1:c[s]===q?1:0},t):E
},n.matches=function(e,t){return n(e,null,null,t)},n.matchesSelector=function(e,t){if((e.ownerDocument||e)!==E&&_(e),t=t.replace(ft,"='$1']"),!(!S.matchesSelector||!R||O&&O.test(t)||N&&N.test(t)))try{var i=B.call(e,t);if(i||S.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(s){}return n(t,E,null,[e]).length>0},n.contains=function(e,t){return(e.ownerDocument||e)!==E&&_(e),V(e,t)},n.attr=function(e,n){(e.ownerDocument||e)!==E&&_(e);var i=T.attrHandle[n.toLowerCase()],s=i&&G.call(T.attrHandle,n.toLowerCase())?i(e,n,!R):t;
return s===t?S.attributes||!R?e.getAttribute(n):(s=e.getAttributeNode(n))&&s.specified?s.value:null:s},n.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},n.uniqueSort=function(e){var t,n=[],i=0,s=0;if(W=!S.detectDuplicates,D=!S.sortStable&&e.slice(0),e.sort(Y),W){for(;t=e[s++];)t===e[s]&&(i=n.push(s));for(;i--;)e.splice(n[i],1)}return e},A=n.getText=function(e){var t,n="",i=0,s=e.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof e.textContent)return e.textContent;
for(e=e.firstChild;e;e=e.nextSibling)n+=A(e)}else if(3===s||4===s)return e.nodeValue}else for(;t=e[i];i++)n+=A(t);return n},T=n.selectors={"cacheLength":50,"createPseudo":s,"match":vt,"attrHandle":{},"find":{},"relative":{">":{"dir":"parentNode","first":!0}," ":{"dir":"parentNode"},"+":{"dir":"previousSibling","first":!0},"~":{"dir":"previousSibling"}},"preFilter":{"ATTR":function(e){return e[1]=e[1].replace(St,Ct),e[3]=(e[4]||e[5]||"").replace(St,Ct),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)
},"CHILD":function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||n.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&n.error(e[0]),e},"PSEUDO":function(e){var n,i=!e[5]&&e[2];return vt.CHILD.test(e[0])?null:(e[3]&&e[4]!==t?e[2]=e[4]:i&&mt.test(i)&&(n=h(i,!0))&&(n=i.indexOf(")",i.length-n)-i.length)&&(e[0]=e[0].slice(0,n),e[2]=i.slice(0,n)),e.slice(0,3))}},"filter":{"TAG":function(e){var t=e.replace(St,Ct).toLowerCase();
return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},"CLASS":function(e){var t=j[e+" "];return t||(t=new RegExp("(^|"+st+")"+e+"("+st+"|$)"))&&j(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==Q&&e.getAttribute("class")||"")})},"ATTR":function(e,t,i){return function(s){var a=n.attr(s,e);return null==a?"!="===t:t?(a+="","="===t?a===i:"!="===t?a!==i:"^="===t?i&&0===a.indexOf(i):"*="===t?i&&a.indexOf(i)>-1:"$="===t?i&&a.slice(-i.length)===i:"~="===t?(" "+a+" ").indexOf(i)>-1:"|="===t?a===i||a.slice(0,i.length+1)===i+"-":!1):!0
}},"CHILD":function(e,t,n,i,s){var a="nth"!==e.slice(0,3),r="last"!==e.slice(-4),o="of-type"===t;return 1===i&&0===s?function(e){return!!e.parentNode}:function(t,n,l){var c,d,u,h,p,f,m=a!==r?"nextSibling":"previousSibling",g=t.parentNode,v=o&&t.nodeName.toLowerCase(),y=!l&&!o;if(g){if(a){for(;m;){for(u=t;u=u[m];)if(o?u.nodeName.toLowerCase()===v:1===u.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[r?g.firstChild:g.lastChild],r&&y){for(d=g[F]||(g[F]={}),c=d[e]||[],p=c[0]===U&&c[1],h=c[0]===U&&c[2],u=p&&g.childNodes[p];u=++p&&u&&u[m]||(h=p=0)||f.pop();)if(1===u.nodeType&&++h&&u===t){d[e]=[U,p,h];
break}}else if(y&&(c=(t[F]||(t[F]={}))[e])&&c[0]===U)h=c[1];else for(;(u=++p&&u&&u[m]||(h=p=0)||f.pop())&&((o?u.nodeName.toLowerCase()!==v:1!==u.nodeType)||!++h||(y&&((u[F]||(u[F]={}))[e]=[U,h]),u!==t)););return h-=s,h===i||h%i===0&&h/i>=0}}},"PSEUDO":function(e,t){var i,a=T.pseudos[e]||T.setFilters[e.toLowerCase()]||n.error("unsupported pseudo: "+e);return a[F]?a(t):a.length>1?(i=[e,e,"",t],T.setFilters.hasOwnProperty(e.toLowerCase())?s(function(e,n){for(var i,s=a(e,t),r=s.length;r--;)i=nt.call(e,s[r]),e[i]=!(n[i]=s[r])
}):function(e){return a(e,0,i)}):a}},"pseudos":{"not":s(function(e){var t=[],n=[],i=P(e.replace(ct,"$1"));return i[F]?s(function(e,t,n,s){for(var a,r=i(e,null,s,[]),o=e.length;o--;)(a=r[o])&&(e[o]=!(t[o]=a))}):function(e,s,a){return t[0]=e,i(t,null,a,n),!n.pop()}}),"has":s(function(e){return function(t){return n(e,t).length>0}}),"contains":s(function(e){return function(t){return(t.textContent||t.innerText||A(t)).indexOf(e)>-1}}),"lang":s(function(e){return gt.test(e||"")||n.error("unsupported lang: "+e),e=e.replace(St,Ct).toLowerCase(),function(t){var n;
do if(n=R?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),"target":function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},"root":function(e){return e===L},"focus":function(e){return e===E.activeElement&&(!E.hasFocus||E.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},"enabled":function(e){return e.disabled===!1},"disabled":function(e){return e.disabled===!0},"checked":function(e){var t=e.nodeName.toLowerCase();
return"input"===t&&!!e.checked||"option"===t&&!!e.selected},"selected":function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},"empty":function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},"parent":function(e){return!T.pseudos.empty(e)},"header":function(e){return xt.test(e.nodeName)},"input":function(e){return wt.test(e.nodeName)},"button":function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t
},"text":function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},"first":d(function(){return[0]}),"last":d(function(e,t){return[t-1]}),"eq":d(function(e,t,n){return[0>n?n+t:n]}),"even":d(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),"odd":d(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),"lt":d(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),"gt":d(function(e,t,n){for(var i=0>n?n+t:n;++i<t;)e.push(i);
return e})}},T.pseudos.nth=T.pseudos.eq;for(k in{"radio":!0,"checkbox":!0,"file":!0,"password":!0,"image":!0})T.pseudos[k]=l(k);for(k in{"submit":!0,"reset":!0})T.pseudos[k]=c(k);u.prototype=T.filters=T.pseudos,T.setFilters=new u,P=n.compile=function(e,t){var n,i=[],s=[],a=$[e+" "];if(!a){for(t||(t=h(e)),n=t.length;n--;)a=y(t[n]),a[F]?i.push(a):s.push(a);a=$(e,b(s,i))}return a},S.sortStable=F.split("").sort(Y).join("")===F,S.detectDuplicates=W,_(),S.sortDetached=a(function(e){return 1&e.compareDocumentPosition(E.createElement("div"))
}),a(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||r("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),S.attributes&&a(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||r("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),a(function(e){return null==e.getAttribute("disabled")})||r(it,function(e,t,n){var i;
return n?void 0:(i=e.getAttributeNode(t))&&i.specified?i.value:e[t]===!0?t.toLowerCase():null}),dt.find=n,dt.expr=n.selectors,dt.expr[":"]=dt.expr.pseudos,dt.unique=n.uniqueSort,dt.text=n.getText,dt.isXMLDoc=n.isXML,dt.contains=n.contains}(e);var Tt={};dt.Callbacks=function(e){e="string"==typeof e?Tt[e]||i(e):dt.extend({},e);var n,s,a,r,o,l,c=[],d=!e.once&&[],u=function(t){for(s=e.memory&&t,a=!0,o=l||0,l=0,r=c.length,n=!0;c&&r>o;o++)if(c[o].apply(t[0],t[1])===!1&&e.stopOnFalse){s=!1;break}n=!1,c&&(d?d.length&&u(d.shift()):s?c=[]:h.disable())
},h={"add":function(){if(c){var t=c.length;!function i(t){dt.each(t,function(t,n){var s=dt.type(n);"function"===s?e.unique&&h.has(n)||c.push(n):n&&n.length&&"string"!==s&&i(n)})}(arguments),n?r=c.length:s&&(l=t,u(s))}return this},"remove":function(){return c&&dt.each(arguments,function(e,t){for(var i;(i=dt.inArray(t,c,i))>-1;)c.splice(i,1),n&&(r>=i&&r--,o>=i&&o--)}),this},"has":function(e){return e?dt.inArray(e,c)>-1:!(!c||!c.length)},"empty":function(){return c=[],r=0,this},"disable":function(){return c=d=s=t,this
},"disabled":function(){return!c},"lock":function(){return d=t,s||h.disable(),this},"locked":function(){return!d},"fireWith":function(e,t){return!c||a&&!d||(t=t||[],t=[e,t.slice?t.slice():t],n?d.push(t):u(t)),this},"fire":function(){return h.fireWith(this,arguments),this},"fired":function(){return!!a}};return h},dt.extend({"Deferred":function(e){var t=[["resolve","done",dt.Callbacks("once memory"),"resolved"],["reject","fail",dt.Callbacks("once memory"),"rejected"],["notify","progress",dt.Callbacks("memory")]],n="pending",i={"state":function(){return n
},"always":function(){return s.done(arguments).fail(arguments),this},"then":function(){var e=arguments;return dt.Deferred(function(n){dt.each(t,function(t,a){var r=a[0],o=dt.isFunction(e[t])&&e[t];s[a[1]](function(){var e=o&&o.apply(this,arguments);e&&dt.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[r+"With"](this===i?n.promise():this,o?[e]:arguments)})}),e=null}).promise()},"promise":function(e){return null!=e?dt.extend(e,i):i}},s={};return i.pipe=i.then,dt.each(t,function(e,a){var r=a[2],o=a[3];
i[a[1]]=r.add,o&&r.add(function(){n=o},t[1^e][2].disable,t[2][2].lock),s[a[0]]=function(){return s[a[0]+"With"](this===s?i:this,arguments),this},s[a[0]+"With"]=r.fireWith}),i.promise(s),e&&e.call(s,s),s},"when":function(e){var t,n,i,s=0,a=at.call(arguments),r=a.length,o=1!==r||e&&dt.isFunction(e.promise)?r:0,l=1===o?e:dt.Deferred(),c=function(e,n,i){return function(s){n[e]=this,i[e]=arguments.length>1?at.call(arguments):s,i===t?l.notifyWith(n,i):--o||l.resolveWith(n,i)}};if(r>1)for(t=new Array(r),n=new Array(r),i=new Array(r);r>s;s++)a[s]&&dt.isFunction(a[s].promise)?a[s].promise().done(c(s,i,a)).fail(l.reject).progress(c(s,n,t)):--o;
return o||l.resolveWith(i,a),l.promise()}}),dt.support=function(t){var n,i,s,a,r,o,l,c,d,u=G.createElement("div");if(u.setAttribute("className","t"),u.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=u.getElementsByTagName("*")||[],i=u.getElementsByTagName("a")[0],!i||!i.style||!n.length)return t;a=G.createElement("select"),o=a.appendChild(G.createElement("option")),s=u.getElementsByTagName("input")[0],i.style.cssText="top:1px;float:left;opacity:.5",t.getSetAttribute="t"!==u.className,t.leadingWhitespace=3===u.firstChild.nodeType,t.tbody=!u.getElementsByTagName("tbody").length,t.htmlSerialize=!!u.getElementsByTagName("link").length,t.style=/top/.test(i.getAttribute("style")),t.hrefNormalized="/a"===i.getAttribute("href"),t.opacity=/^0.5/.test(i.style.opacity),t.cssFloat=!!i.style.cssFloat,t.checkOn=!!s.value,t.optSelected=o.selected,t.enctype=!!G.createElement("form").enctype,t.html5Clone="<:nav></:nav>"!==G.createElement("nav").cloneNode(!0).outerHTML,t.inlineBlockNeedsLayout=!1,t.shrinkWrapBlocks=!1,t.pixelPosition=!1,t.deleteExpando=!0,t.noCloneEvent=!0,t.reliableMarginRight=!0,t.boxSizingReliable=!0,s.checked=!0,t.noCloneChecked=s.cloneNode(!0).checked,a.disabled=!0,t.optDisabled=!o.disabled;
try{delete u.test}catch(h){t.deleteExpando=!1}s=G.createElement("input"),s.setAttribute("value",""),t.input=""===s.getAttribute("value"),s.value="t",s.setAttribute("type","radio"),t.radioValue="t"===s.value,s.setAttribute("checked","t"),s.setAttribute("name","t"),r=G.createDocumentFragment(),r.appendChild(s),t.appendChecked=s.checked,t.checkClone=r.cloneNode(!0).cloneNode(!0).lastChild.checked,u.attachEvent&&(u.attachEvent("onclick",function(){t.noCloneEvent=!1}),u.cloneNode(!0).click());for(d in{"submit":!0,"change":!0,"focusin":!0})u.setAttribute(l="on"+d,"t"),t[d+"Bubbles"]=l in e||u.attributes[l].expando===!1;
u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===u.style.backgroundClip;for(d in dt(t))break;return t.ownLast="0"!==d,dt(function(){var n,i,s,a="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",r=G.getElementsByTagName("body")[0];r&&(n=G.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",r.appendChild(n).appendChild(u),u.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s=u.getElementsByTagName("td"),s[0].style.cssText="padding:0;margin:0;border:0;display:none",c=0===s[0].offsetHeight,s[0].style.display="",s[1].style.display="none",t.reliableHiddenOffsets=c&&0===s[0].offsetHeight,u.innerHTML="",u.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",dt.swap(r,null!=r.style.zoom?{"zoom":1}:{},function(){t.boxSizing=4===u.offsetWidth
}),e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(u,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(u,null)||{"width":"4px"}).width,i=u.appendChild(G.createElement("div")),i.style.cssText=u.style.cssText=a,i.style.marginRight=i.style.width="0",u.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(i,null)||{}).marginRight)),typeof u.style.zoom!==Q&&(u.innerHTML="",u.style.cssText=a+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===u.offsetWidth,u.style.display="block",u.innerHTML="<div></div>",u.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==u.offsetWidth,t.inlineBlockNeedsLayout&&(r.style.zoom=1)),r.removeChild(n),n=u=s=i=null)
}),n=a=r=o=i=s=null,t}({});var At=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,It=/([A-Z])/g;dt.extend({"cache":{},"noData":{"applet":!0,"embed":!0,"object":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},"hasData":function(e){return e=e.nodeType?dt.cache[e[dt.expando]]:e[dt.expando],!!e&&!o(e)},"data":function(e,t,n){return s(e,t,n)},"removeData":function(e,t){return a(e,t)},"_data":function(e,t,n){return s(e,t,n,!0)},"_removeData":function(e,t){return a(e,t,!0)},"acceptData":function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;
var t=e.nodeName&&dt.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),dt.fn.extend({"data":function(e,n){var i,s,a=null,o=0,l=this[0];if(e===t){if(this.length&&(a=dt.data(l),1===l.nodeType&&!dt._data(l,"parsedAttrs"))){for(i=l.attributes;o<i.length;o++)s=i[o].name,0===s.indexOf("data-")&&(s=dt.camelCase(s.slice(5)),r(l,s,a[s]));dt._data(l,"parsedAttrs",!0)}return a}return"object"==typeof e?this.each(function(){dt.data(this,e)}):arguments.length>1?this.each(function(){dt.data(this,e,n)
}):l?r(l,e,dt.data(l,e)):null},"removeData":function(e){return this.each(function(){dt.removeData(this,e)})}}),dt.extend({"queue":function(e,t,n){var i;return e?(t=(t||"fx")+"queue",i=dt._data(e,t),n&&(!i||dt.isArray(n)?i=dt._data(e,t,dt.makeArray(n)):i.push(n)),i||[]):void 0},"dequeue":function(e,t){t=t||"fx";var n=dt.queue(e,t),i=n.length,s=n.shift(),a=dt._queueHooks(e,t),r=function(){dt.dequeue(e,t)};"inprogress"===s&&(s=n.shift(),i--),s&&("fx"===t&&n.unshift("inprogress"),delete a.stop,s.call(e,r,a)),!i&&a&&a.empty.fire()
},"_queueHooks":function(e,t){var n=t+"queueHooks";return dt._data(e,n)||dt._data(e,n,{"empty":dt.Callbacks("once memory").add(function(){dt._removeData(e,t+"queue"),dt._removeData(e,n)})})}}),dt.fn.extend({"queue":function(e,n){var i=2;return"string"!=typeof e&&(n=e,e="fx",i--),arguments.length<i?dt.queue(this[0],e):n===t?this:this.each(function(){var t=dt.queue(this,e,n);dt._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&dt.dequeue(this,e)})},"dequeue":function(e){return this.each(function(){dt.dequeue(this,e)
})},"delay":function(e,t){return e=dt.fx?dt.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}})},"clearQueue":function(e){return this.queue(e||"fx",[])},"promise":function(e,n){var i,s=1,a=dt.Deferred(),r=this,o=this.length,l=function(){--s||a.resolveWith(r,[r])};for("string"!=typeof e&&(n=e,e=t),e=e||"fx";o--;)i=dt._data(r[o],e+"queueHooks"),i&&i.empty&&(s++,i.empty.add(l));return l(),a.promise(n)}});var Pt,Mt,Dt=/[\t\r\n\f]/g,_t=/\r/g,Et=/^(?:input|select|textarea|button|object)$/i,Lt=/^(?:a|area)$/i,Rt=/^(?:checked|selected)$/i,Nt=dt.support.getSetAttribute,Ot=dt.support.input;
dt.fn.extend({"attr":function(e,t){return dt.access(this,dt.attr,e,t,arguments.length>1)},"removeAttr":function(e){return this.each(function(){dt.removeAttr(this,e)})},"prop":function(e,t){return dt.access(this,dt.prop,e,t,arguments.length>1)},"removeProp":function(e){return e=dt.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},"addClass":function(e){var t,n,i,s,a,r=0,o=this.length,l="string"==typeof e&&e;if(dt.isFunction(e))return this.each(function(t){dt(this).addClass(e.call(this,t,this.className))
});if(l)for(t=(e||"").match(ht)||[];o>r;r++)if(n=this[r],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Dt," "):" ")){for(a=0;s=t[a++];)i.indexOf(" "+s+" ")<0&&(i+=s+" ");n.className=dt.trim(i)}return this},"removeClass":function(e){var t,n,i,s,a,r=0,o=this.length,l=0===arguments.length||"string"==typeof e&&e;if(dt.isFunction(e))return this.each(function(t){dt(this).removeClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(ht)||[];o>r;r++)if(n=this[r],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Dt," "):"")){for(a=0;s=t[a++];)for(;i.indexOf(" "+s+" ")>=0;)i=i.replace(" "+s+" "," ");
n.className=e?dt.trim(i):""}return this},"toggleClass":function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):this.each(dt.isFunction(e)?function(n){dt(this).toggleClass(e.call(this,n,this.className,t),t)}:function(){if("string"===n)for(var t,i=0,s=dt(this),a=e.match(ht)||[];t=a[i++];)s.hasClass(t)?s.removeClass(t):s.addClass(t);else(n===Q||"boolean"===n)&&(this.className&&dt._data(this,"__className__",this.className),this.className=this.className||e===!1?"":dt._data(this,"__className__")||"")
})},"hasClass":function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(Dt," ").indexOf(t)>=0)return!0;return!1},"val":function(e){var n,i,s,a=this[0];{if(arguments.length)return s=dt.isFunction(e),this.each(function(n){var a;1===this.nodeType&&(a=s?e.call(this,n,dt(this).val()):e,null==a?a="":"number"==typeof a?a+="":dt.isArray(a)&&(a=dt.map(a,function(e){return null==e?"":e+""})),i=dt.valHooks[this.type]||dt.valHooks[this.nodeName.toLowerCase()],i&&"set"in i&&i.set(this,a,"value")!==t||(this.value=a))
});if(a)return i=dt.valHooks[a.type]||dt.valHooks[a.nodeName.toLowerCase()],i&&"get"in i&&(n=i.get(a,"value"))!==t?n:(n=a.value,"string"==typeof n?n.replace(_t,""):null==n?"":n)}}}),dt.extend({"valHooks":{"option":{"get":function(e){var t=dt.find.attr(e,"value");return null!=t?t:e.text}},"select":{"get":function(e){for(var t,n,i=e.options,s=e.selectedIndex,a="select-one"===e.type||0>s,r=a?null:[],o=a?s+1:i.length,l=0>s?o:a?s:0;o>l;l++)if(n=i[l],!(!n.selected&&l!==s||(dt.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&dt.nodeName(n.parentNode,"optgroup"))){if(t=dt(n).val(),a)return t;
r.push(t)}return r},"set":function(e,t){for(var n,i,s=e.options,a=dt.makeArray(t),r=s.length;r--;)i=s[r],(i.selected=dt.inArray(dt(i).val(),a)>=0)&&(n=!0);return n||(e.selectedIndex=-1),a}}},"attr":function(e,n,i){var s,a,r=e.nodeType;if(e&&3!==r&&8!==r&&2!==r)return typeof e.getAttribute===Q?dt.prop(e,n,i):(1===r&&dt.isXMLDoc(e)||(n=n.toLowerCase(),s=dt.attrHooks[n]||(dt.expr.match.bool.test(n)?Mt:Pt)),i===t?s&&"get"in s&&null!==(a=s.get(e,n))?a:(a=dt.find.attr(e,n),null==a?t:a):null!==i?s&&"set"in s&&(a=s.set(e,i,n))!==t?a:(e.setAttribute(n,i+""),i):void dt.removeAttr(e,n))
},"removeAttr":function(e,t){var n,i,s=0,a=t&&t.match(ht);if(a&&1===e.nodeType)for(;n=a[s++];)i=dt.propFix[n]||n,dt.expr.match.bool.test(n)?Ot&&Nt||!Rt.test(n)?e[i]=!1:e[dt.camelCase("default-"+n)]=e[i]=!1:dt.attr(e,n,""),e.removeAttribute(Nt?n:i)},"attrHooks":{"type":{"set":function(e,t){if(!dt.support.radioValue&&"radio"===t&&dt.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},"propFix":{"for":"htmlFor","class":"className"},"prop":function(e,n,i){var s,a,r,o=e.nodeType;
if(e&&3!==o&&8!==o&&2!==o)return r=1!==o||!dt.isXMLDoc(e),r&&(n=dt.propFix[n]||n,a=dt.propHooks[n]),i!==t?a&&"set"in a&&(s=a.set(e,i,n))!==t?s:e[n]=i:a&&"get"in a&&null!==(s=a.get(e,n))?s:e[n]},"propHooks":{"tabIndex":{"get":function(e){var t=dt.find.attr(e,"tabindex");return t?parseInt(t,10):Et.test(e.nodeName)||Lt.test(e.nodeName)&&e.href?0:-1}}}}),Mt={"set":function(e,t,n){return t===!1?dt.removeAttr(e,n):Ot&&Nt||!Rt.test(n)?e.setAttribute(!Nt&&dt.propFix[n]||n,n):e[dt.camelCase("default-"+n)]=e[n]=!0,n
}},dt.each(dt.expr.match.bool.source.match(/\w+/g),function(e,n){var i=dt.expr.attrHandle[n]||dt.find.attr;dt.expr.attrHandle[n]=Ot&&Nt||!Rt.test(n)?function(e,n,s){var a=dt.expr.attrHandle[n],r=s?t:(dt.expr.attrHandle[n]=t)!=i(e,n,s)?n.toLowerCase():null;return dt.expr.attrHandle[n]=a,r}:function(e,n,i){return i?t:e[dt.camelCase("default-"+n)]?n.toLowerCase():null}}),Ot&&Nt||(dt.attrHooks.value={"set":function(e,t,n){return dt.nodeName(e,"input")?void(e.defaultValue=t):Pt&&Pt.set(e,t,n)}}),Nt||(Pt={"set":function(e,n,i){var s=e.getAttributeNode(i);
return s||e.setAttributeNode(s=e.ownerDocument.createAttribute(i)),s.value=n+="","value"===i||n===e.getAttribute(i)?n:t}},dt.expr.attrHandle.id=dt.expr.attrHandle.name=dt.expr.attrHandle.coords=function(e,n,i){var s;return i?t:(s=e.getAttributeNode(n))&&""!==s.value?s.value:null},dt.valHooks.button={"get":function(e,n){var i=e.getAttributeNode(n);return i&&i.specified?i.value:t},"set":Pt.set},dt.attrHooks.contenteditable={"set":function(e,t,n){Pt.set(e,""===t?!1:t,n)}},dt.each(["width","height"],function(e,t){dt.attrHooks[t]={"set":function(e,n){return""===n?(e.setAttribute(t,"auto"),n):void 0
}}})),dt.support.hrefNormalized||dt.each(["href","src"],function(e,t){dt.propHooks[t]={"get":function(e){return e.getAttribute(t,4)}}}),dt.support.style||(dt.attrHooks.style={"get":function(e){return e.style.cssText||t},"set":function(e,t){return e.style.cssText=t+""}}),dt.support.optSelected||(dt.propHooks.selected={"get":function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),dt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){dt.propFix[this.toLowerCase()]=this
}),dt.support.enctype||(dt.propFix.enctype="encoding"),dt.each(["radio","checkbox"],function(){dt.valHooks[this]={"set":function(e,t){return dt.isArray(t)?e.checked=dt.inArray(dt(e).val(),t)>=0:void 0}},dt.support.checkOn||(dt.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Bt=/^(?:input|select|textarea)$/i,Vt=/^key/,Ft=/^(?:mouse|contextmenu)|click/,qt=/^(?:focusinfocus|focusoutblur)$/,Ut=/^([^.]*)(?:\.(.+)|)$/;dt.event={"global":{},"add":function(e,n,i,s,a){var r,o,l,c,d,u,h,p,f,m,g,v=dt._data(e);
if(v){for(i.handler&&(c=i,i=c.handler,a=c.selector),i.guid||(i.guid=dt.guid++),(o=v.events)||(o=v.events={}),(u=v.handle)||(u=v.handle=function(e){return typeof dt===Q||e&&dt.event.triggered===e.type?t:dt.event.dispatch.apply(u.elem,arguments)},u.elem=e),n=(n||"").match(ht)||[""],l=n.length;l--;)r=Ut.exec(n[l])||[],f=g=r[1],m=(r[2]||"").split(".").sort(),f&&(d=dt.event.special[f]||{},f=(a?d.delegateType:d.bindType)||f,d=dt.event.special[f]||{},h=dt.extend({"type":f,"origType":g,"data":s,"handler":i,"guid":i.guid,"selector":a,"needsContext":a&&dt.expr.match.needsContext.test(a),"namespace":m.join(".")},c),(p=o[f])||(p=o[f]=[],p.delegateCount=0,d.setup&&d.setup.call(e,s,m,u)!==!1||(e.addEventListener?e.addEventListener(f,u,!1):e.attachEvent&&e.attachEvent("on"+f,u))),d.add&&(d.add.call(e,h),h.handler.guid||(h.handler.guid=i.guid)),a?p.splice(p.delegateCount++,0,h):p.push(h),dt.event.global[f]=!0);
e=null}},"remove":function(e,t,n,i,s){var a,r,o,l,c,d,u,h,p,f,m,g=dt.hasData(e)&&dt._data(e);if(g&&(d=g.events)){for(t=(t||"").match(ht)||[""],c=t.length;c--;)if(o=Ut.exec(t[c])||[],p=m=o[1],f=(o[2]||"").split(".").sort(),p){for(u=dt.event.special[p]||{},p=(i?u.delegateType:u.bindType)||p,h=d[p]||[],o=o[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=a=h.length;a--;)r=h[a],!s&&m!==r.origType||n&&n.guid!==r.guid||o&&!o.test(r.namespace)||i&&i!==r.selector&&("**"!==i||!r.selector)||(h.splice(a,1),r.selector&&h.delegateCount--,u.remove&&u.remove.call(e,r));
l&&!h.length&&(u.teardown&&u.teardown.call(e,f,g.handle)!==!1||dt.removeEvent(e,p,g.handle),delete d[p])}else for(p in d)dt.event.remove(e,p+t[c],n,i,!0);dt.isEmptyObject(d)&&(delete g.handle,dt._removeData(e,"events"))}},"trigger":function(n,i,s,a){var r,o,l,c,d,u,h,p=[s||G],f=lt.call(n,"type")?n.type:n,m=lt.call(n,"namespace")?n.namespace.split("."):[];if(l=u=s=s||G,3!==s.nodeType&&8!==s.nodeType&&!qt.test(f+dt.event.triggered)&&(f.indexOf(".")>=0&&(m=f.split("."),f=m.shift(),m.sort()),o=f.indexOf(":")<0&&"on"+f,n=n[dt.expando]?n:new dt.Event(f,"object"==typeof n&&n),n.isTrigger=a?2:3,n.namespace=m.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=s),i=null==i?[n]:dt.makeArray(i,[n]),d=dt.event.special[f]||{},a||!d.trigger||d.trigger.apply(s,i)!==!1)){if(!a&&!d.noBubble&&!dt.isWindow(s)){for(c=d.delegateType||f,qt.test(c+f)||(l=l.parentNode);l;l=l.parentNode)p.push(l),u=l;
u===(s.ownerDocument||G)&&p.push(u.defaultView||u.parentWindow||e)}for(h=0;(l=p[h++])&&!n.isPropagationStopped();)n.type=h>1?c:d.bindType||f,r=(dt._data(l,"events")||{})[n.type]&&dt._data(l,"handle"),r&&r.apply(l,i),r=o&&l[o],r&&dt.acceptData(l)&&r.apply&&r.apply(l,i)===!1&&n.preventDefault();if(n.type=f,!a&&!n.isDefaultPrevented()&&(!d._default||d._default.apply(p.pop(),i)===!1)&&dt.acceptData(s)&&o&&s[f]&&!dt.isWindow(s)){u=s[o],u&&(s[o]=null),dt.event.triggered=f;try{s[f]()}catch(g){}dt.event.triggered=t,u&&(s[o]=u)
}return n.result}},"dispatch":function(e){e=dt.event.fix(e);var n,i,s,a,r,o=[],l=at.call(arguments),c=(dt._data(this,"events")||{})[e.type]||[],d=dt.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!d.preDispatch||d.preDispatch.call(this,e)!==!1){for(o=dt.event.handlers.call(this,e,c),n=0;(a=o[n++])&&!e.isPropagationStopped();)for(e.currentTarget=a.elem,r=0;(s=a.handlers[r++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(s.namespace))&&(e.handleObj=s,e.data=s.data,i=((dt.event.special[s.origType]||{}).handle||s.handler).apply(a.elem,l),i!==t&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()));
return d.postDispatch&&d.postDispatch.call(this,e),e.result}},"handlers":function(e,n){var i,s,a,r,o=[],l=n.delegateCount,c=e.target;if(l&&c.nodeType&&(!e.button||"click"!==e.type))for(;c!=this;c=c.parentNode||this)if(1===c.nodeType&&(c.disabled!==!0||"click"!==e.type)){for(a=[],r=0;l>r;r++)s=n[r],i=s.selector+" ",a[i]===t&&(a[i]=s.needsContext?dt(i,this).index(c)>=0:dt.find(i,this,null,[c]).length),a[i]&&a.push(s);a.length&&o.push({"elem":c,"handlers":a})}return l<n.length&&o.push({"elem":this,"handlers":n.slice(l)}),o
},"fix":function(e){if(e[dt.expando])return e;var t,n,i,s=e.type,a=e,r=this.fixHooks[s];for(r||(this.fixHooks[s]=r=Ft.test(s)?this.mouseHooks:Vt.test(s)?this.keyHooks:{}),i=r.props?this.props.concat(r.props):this.props,e=new dt.Event(a),t=i.length;t--;)n=i[t],e[n]=a[n];return e.target||(e.target=a.srcElement||G),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,r.filter?r.filter(e,a):e},"props":"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),"fixHooks":{},"keyHooks":{"props":"char charCode key keyCode".split(" "),"filter":function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e
}},"mouseHooks":{"props":"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),"filter":function(e,n){var i,s,a,r=n.button,o=n.fromElement;return null==e.pageX&&null!=n.clientX&&(s=e.target.ownerDocument||G,a=s.documentElement,i=s.body,e.pageX=n.clientX+(a&&a.scrollLeft||i&&i.scrollLeft||0)-(a&&a.clientLeft||i&&i.clientLeft||0),e.pageY=n.clientY+(a&&a.scrollTop||i&&i.scrollTop||0)-(a&&a.clientTop||i&&i.clientTop||0)),!e.relatedTarget&&o&&(e.relatedTarget=o===e.target?n.toElement:o),e.which||r===t||(e.which=1&r?1:2&r?3:4&r?2:0),e
}},"special":{"load":{"noBubble":!0},"focus":{"trigger":function(){if(this!==d()&&this.focus)try{return this.focus(),!1}catch(e){}},"delegateType":"focusin"},"blur":{"trigger":function(){return this===d()&&this.blur?(this.blur(),!1):void 0},"delegateType":"focusout"},"click":{"trigger":function(){return dt.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},"_default":function(e){return dt.nodeName(e.target,"a")}},"beforeunload":{"postDispatch":function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)
}}},"simulate":function(e,t,n,i){var s=dt.extend(new dt.Event,n,{"type":e,"isSimulated":!0,"originalEvent":{}});i?dt.event.trigger(s,null,t):dt.event.dispatch.call(t,s),s.isDefaultPrevented()&&n.preventDefault()}},dt.removeEvent=G.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var i="on"+t;e.detachEvent&&(typeof e[i]===Q&&(e[i]=null),e.detachEvent(i,n))},dt.Event=function(e,t){return this instanceof dt.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?l:c):this.type=e,t&&dt.extend(this,t),this.timeStamp=e&&e.timeStamp||dt.now(),void(this[dt.expando]=!0)):new dt.Event(e,t)
},dt.Event.prototype={"isDefaultPrevented":c,"isPropagationStopped":c,"isImmediatePropagationStopped":c,"preventDefault":function(){var e=this.originalEvent;this.isDefaultPrevented=l,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},"stopPropagation":function(){var e=this.originalEvent;this.isPropagationStopped=l,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},"stopImmediatePropagation":function(){this.isImmediatePropagationStopped=l,this.stopPropagation()}},dt.each({"mouseenter":"mouseover","mouseleave":"mouseout"},function(e,t){dt.event.special[e]={"delegateType":t,"bindType":t,"handle":function(e){var n,i=this,s=e.relatedTarget,a=e.handleObj;
return(!s||s!==i&&!dt.contains(i,s))&&(e.type=a.origType,n=a.handler.apply(this,arguments),e.type=t),n}}}),dt.support.submitBubbles||(dt.event.special.submit={"setup":function(){return dt.nodeName(this,"form")?!1:void dt.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,i=dt.nodeName(n,"input")||dt.nodeName(n,"button")?n.form:t;i&&!dt._data(i,"submitBubbles")&&(dt.event.add(i,"submit._submit",function(e){e._submit_bubble=!0}),dt._data(i,"submitBubbles",!0))})},"postDispatch":function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&dt.event.simulate("submit",this.parentNode,e,!0))
},"teardown":function(){return dt.nodeName(this,"form")?!1:void dt.event.remove(this,"._submit")}}),dt.support.changeBubbles||(dt.event.special.change={"setup":function(){return Bt.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(dt.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),dt.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),dt.event.simulate("change",this,e,!0)
})),!1):void dt.event.add(this,"beforeactivate._change",function(e){var t=e.target;Bt.test(t.nodeName)&&!dt._data(t,"changeBubbles")&&(dt.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||dt.event.simulate("change",this.parentNode,e,!0)}),dt._data(t,"changeBubbles",!0))})},"handle":function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},"teardown":function(){return dt.event.remove(this,"._change"),!Bt.test(this.nodeName)
}}),dt.support.focusinBubbles||dt.each({"focus":"focusin","blur":"focusout"},function(e,t){var n=0,i=function(e){dt.event.simulate(t,e.target,dt.event.fix(e),!0)};dt.event.special[t]={"setup":function(){0===n++&&G.addEventListener(e,i,!0)},"teardown":function(){0===--n&&G.removeEventListener(e,i,!0)}}}),dt.fn.extend({"on":function(e,n,i,s,a){var r,o;if("object"==typeof e){"string"!=typeof n&&(i=i||n,n=t);for(r in e)this.on(r,n,i,e[r],a);return this}if(null==i&&null==s?(s=n,i=n=t):null==s&&("string"==typeof n?(s=i,i=t):(s=i,i=n,n=t)),s===!1)s=c;
else if(!s)return this;return 1===a&&(o=s,s=function(e){return dt().off(e),o.apply(this,arguments)},s.guid=o.guid||(o.guid=dt.guid++)),this.each(function(){dt.event.add(this,e,s,i,n)})},"one":function(e,t,n,i){return this.on(e,t,n,i,1)},"off":function(e,n,i){var s,a;if(e&&e.preventDefault&&e.handleObj)return s=e.handleObj,dt(e.delegateTarget).off(s.namespace?s.origType+"."+s.namespace:s.origType,s.selector,s.handler),this;if("object"==typeof e){for(a in e)this.off(a,n,e[a]);return this}return(n===!1||"function"==typeof n)&&(i=n,n=t),i===!1&&(i=c),this.each(function(){dt.event.remove(this,e,i,n)
})},"trigger":function(e,t){return this.each(function(){dt.event.trigger(e,t,this)})},"triggerHandler":function(e,t){var n=this[0];return n?dt.event.trigger(e,t,n,!0):void 0}});var zt=/^.[^:#\[\.,]*$/,jt=/^(?:parents|prev(?:Until|All))/,Ht=dt.expr.match.needsContext,$t={"children":!0,"contents":!0,"next":!0,"prev":!0};dt.fn.extend({"find":function(e){var t,n=[],i=this,s=i.length;if("string"!=typeof e)return this.pushStack(dt(e).filter(function(){for(t=0;s>t;t++)if(dt.contains(i[t],this))return!0}));
for(t=0;s>t;t++)dt.find(e,i[t],n);return n=this.pushStack(s>1?dt.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},"has":function(e){var t,n=dt(e,this),i=n.length;return this.filter(function(){for(t=0;i>t;t++)if(dt.contains(this,n[t]))return!0})},"not":function(e){return this.pushStack(h(this,e||[],!0))},"filter":function(e){return this.pushStack(h(this,e||[],!1))},"is":function(e){return!!h(this,"string"==typeof e&&Ht.test(e)?dt(e):e||[],!1).length},"closest":function(e,t){for(var n,i=0,s=this.length,a=[],r=Ht.test(e)||"string"!=typeof e?dt(e,t||this.context):0;s>i;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(r?r.index(n)>-1:1===n.nodeType&&dt.find.matchesSelector(n,e))){n=a.push(n);
break}return this.pushStack(a.length>1?dt.unique(a):a)},"index":function(e){return e?"string"==typeof e?dt.inArray(this[0],dt(e)):dt.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},"add":function(e,t){var n="string"==typeof e?dt(e,t):dt.makeArray(e&&e.nodeType?[e]:e),i=dt.merge(this.get(),n);return this.pushStack(dt.unique(i))},"addBack":function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),dt.each({"parent":function(e){var t=e.parentNode;
return t&&11!==t.nodeType?t:null},"parents":function(e){return dt.dir(e,"parentNode")},"parentsUntil":function(e,t,n){return dt.dir(e,"parentNode",n)},"next":function(e){return u(e,"nextSibling")},"prev":function(e){return u(e,"previousSibling")},"nextAll":function(e){return dt.dir(e,"nextSibling")},"prevAll":function(e){return dt.dir(e,"previousSibling")},"nextUntil":function(e,t,n){return dt.dir(e,"nextSibling",n)},"prevUntil":function(e,t,n){return dt.dir(e,"previousSibling",n)},"siblings":function(e){return dt.sibling((e.parentNode||{}).firstChild,e)
},"children":function(e){return dt.sibling(e.firstChild)},"contents":function(e){return dt.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:dt.merge([],e.childNodes)}},function(e,t){dt.fn[e]=function(n,i){var s=dt.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(s=dt.filter(i,s)),this.length>1&&($t[e]||(s=dt.unique(s)),jt.test(e)&&(s=s.reverse())),this.pushStack(s)}}),dt.extend({"filter":function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?dt.find.matchesSelector(i,e)?[i]:[]:dt.find.matches(e,dt.grep(t,function(e){return 1===e.nodeType
}))},"dir":function(e,n,i){for(var s=[],a=e[n];a&&9!==a.nodeType&&(i===t||1!==a.nodeType||!dt(a).is(i));)1===a.nodeType&&s.push(a),a=a[n];return s},"sibling":function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var Wt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Yt=/ jQuery\d+="(?:null|\d+)"/g,Qt=new RegExp("<(?:"+Wt+")[\\s/>]","i"),Kt=/^\s+/,Gt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Xt=/<([\w:]+)/,Jt=/<tbody/i,Zt=/<|&#?\w+;/,en=/<(?:script|style|link)/i,tn=/^(?:checkbox|radio)$/i,nn=/checked\s*(?:[^=]|=\s*.checked.)/i,sn=/^$|\/(?:java|ecma)script/i,an=/^true\/(.*)/,rn=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,on={"option":[1,"<select multiple='multiple'>","</select>"],"legend":[1,"<fieldset>","</fieldset>"],"area":[1,"<map>","</map>"],"param":[1,"<object>","</object>"],"thead":[1,"<table>","</table>"],"tr":[2,"<table><tbody>","</tbody></table>"],"col":[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],"td":[3,"<table><tbody><tr>","</tr></tbody></table>"],"_default":dt.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},ln=p(G),cn=ln.appendChild(G.createElement("div"));
on.optgroup=on.option,on.tbody=on.tfoot=on.colgroup=on.caption=on.thead,on.th=on.td,dt.fn.extend({"text":function(e){return dt.access(this,function(e){return e===t?dt.text(this):this.empty().append((this[0]&&this[0].ownerDocument||G).createTextNode(e))},null,e,arguments.length)},"append":function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=f(this,e);t.appendChild(e)}})},"prepend":function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=f(this,e);
t.insertBefore(e,t.firstChild)}})},"before":function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},"after":function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},"remove":function(e,t){for(var n,i=e?dt.filter(e,this):this,s=0;null!=(n=i[s]);s++)t||1!==n.nodeType||dt.cleanData(w(n)),n.parentNode&&(t&&dt.contains(n.ownerDocument,n)&&v(w(n,"script")),n.parentNode.removeChild(n));
return this},"empty":function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&dt.cleanData(w(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&dt.nodeName(e,"select")&&(e.options.length=0)}return this},"clone":function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return dt.clone(this,e,t)})},"html":function(e){return dt.access(this,function(e){var n=this[0]||{},i=0,s=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(Yt,""):t;if(!("string"!=typeof e||en.test(e)||!dt.support.htmlSerialize&&Qt.test(e)||!dt.support.leadingWhitespace&&Kt.test(e)||on[(Xt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(Gt,"<$1></$2>");
try{for(;s>i;i++)n=this[i]||{},1===n.nodeType&&(dt.cleanData(w(n,!1)),n.innerHTML=e);n=0}catch(a){}}n&&this.empty().append(e)},null,e,arguments.length)},"replaceWith":function(){var e=dt.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(n){var i=e[t++],s=e[t++];s&&(i&&i.parentNode!==s&&(i=this.nextSibling),dt(this).remove(),s.insertBefore(n,i))},!0),t?this:this.remove()},"detach":function(e){return this.remove(e,!0)},"domManip":function(e,t,n){e=it.apply([],e);
var i,s,a,r,o,l,c=0,d=this.length,u=this,h=d-1,p=e[0],f=dt.isFunction(p);if(f||!(1>=d||"string"!=typeof p||dt.support.checkClone)&&nn.test(p))return this.each(function(i){var s=u.eq(i);f&&(e[0]=p.call(this,i,s.html())),s.domManip(e,t,n)});if(d&&(l=dt.buildFragment(e,this[0].ownerDocument,!1,!n&&this),i=l.firstChild,1===l.childNodes.length&&(l=i),i)){for(r=dt.map(w(l,"script"),m),a=r.length;d>c;c++)s=l,c!==h&&(s=dt.clone(s,!0,!0),a&&dt.merge(r,w(s,"script"))),t.call(this[c],s,c);if(a)for(o=r[r.length-1].ownerDocument,dt.map(r,g),c=0;a>c;c++)s=r[c],sn.test(s.type||"")&&!dt._data(s,"globalEval")&&dt.contains(o,s)&&(s.src?dt._evalUrl(s.src):dt.globalEval((s.text||s.textContent||s.innerHTML||"").replace(rn,"")));
l=i=null}return this}}),dt.each({"appendTo":"append","prependTo":"prepend","insertBefore":"before","insertAfter":"after","replaceAll":"replaceWith"},function(e,t){dt.fn[e]=function(e){for(var n,i=0,s=[],a=dt(e),r=a.length-1;r>=i;i++)n=i===r?this:this.clone(!0),dt(a[i])[t](n),st.apply(s,n.get());return this.pushStack(s)}}),dt.extend({"clone":function(e,t,n){var i,s,a,r,o,l=dt.contains(e.ownerDocument,e);if(dt.support.html5Clone||dt.isXMLDoc(e)||!Qt.test("<"+e.nodeName+">")?a=e.cloneNode(!0):(cn.innerHTML=e.outerHTML,cn.removeChild(a=cn.firstChild)),!(dt.support.noCloneEvent&&dt.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||dt.isXMLDoc(e)))for(i=w(a),o=w(e),r=0;null!=(s=o[r]);++r)i[r]&&b(s,i[r]);
if(t)if(n)for(o=o||w(e),i=i||w(a),r=0;null!=(s=o[r]);r++)y(s,i[r]);else y(e,a);return i=w(a,"script"),i.length>0&&v(i,!l&&w(e,"script")),i=o=s=null,a},"buildFragment":function(e,t,n,i){for(var s,a,r,o,l,c,d,u=e.length,h=p(t),f=[],m=0;u>m;m++)if(a=e[m],a||0===a)if("object"===dt.type(a))dt.merge(f,a.nodeType?[a]:a);else if(Zt.test(a)){for(o=o||h.appendChild(t.createElement("div")),l=(Xt.exec(a)||["",""])[1].toLowerCase(),d=on[l]||on._default,o.innerHTML=d[1]+a.replace(Gt,"<$1></$2>")+d[2],s=d[0];s--;)o=o.lastChild;
if(!dt.support.leadingWhitespace&&Kt.test(a)&&f.push(t.createTextNode(Kt.exec(a)[0])),!dt.support.tbody)for(a="table"!==l||Jt.test(a)?"<table>"!==d[1]||Jt.test(a)?0:o:o.firstChild,s=a&&a.childNodes.length;s--;)dt.nodeName(c=a.childNodes[s],"tbody")&&!c.childNodes.length&&a.removeChild(c);for(dt.merge(f,o.childNodes),o.textContent="";o.firstChild;)o.removeChild(o.firstChild);o=h.lastChild}else f.push(t.createTextNode(a));for(o&&h.removeChild(o),dt.support.appendChecked||dt.grep(w(f,"input"),x),m=0;a=f[m++];)if((!i||-1===dt.inArray(a,i))&&(r=dt.contains(a.ownerDocument,a),o=w(h.appendChild(a),"script"),r&&v(o),n))for(s=0;a=o[s++];)sn.test(a.type||"")&&n.push(a);
return o=null,h},"cleanData":function(e,t){for(var n,i,s,a,r=0,o=dt.expando,l=dt.cache,c=dt.support.deleteExpando,d=dt.event.special;null!=(n=e[r]);r++)if((t||dt.acceptData(n))&&(s=n[o],a=s&&l[s])){if(a.events)for(i in a.events)d[i]?dt.event.remove(n,i):dt.removeEvent(n,i,a.handle);l[s]&&(delete l[s],c?delete n[o]:typeof n.removeAttribute!==Q?n.removeAttribute(o):n[o]=null,tt.push(s))}},"_evalUrl":function(e){return dt.ajax({"url":e,"type":"GET","dataType":"script","async":!1,"global":!1,"throws":!0})
}}),dt.fn.extend({"wrapAll":function(e){if(dt.isFunction(e))return this.each(function(t){dt(this).wrapAll(e.call(this,t))});if(this[0]){var t=dt(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},"wrapInner":function(e){return this.each(dt.isFunction(e)?function(t){dt(this).wrapInner(e.call(this,t))}:function(){var t=dt(this),n=t.contents();
n.length?n.wrapAll(e):t.append(e)})},"wrap":function(e){var t=dt.isFunction(e);return this.each(function(n){dt(this).wrapAll(t?e.call(this,n):e)})},"unwrap":function(){return this.parent().each(function(){dt.nodeName(this,"body")||dt(this).replaceWith(this.childNodes)}).end()}});var dn,un,hn,pn=/alpha\([^)]*\)/i,fn=/opacity\s*=\s*([^)]*)/,mn=/^(top|right|bottom|left)$/,gn=/^(none|table(?!-c[ea]).+)/,vn=/^margin/,yn=new RegExp("^("+ut+")(.*)$","i"),bn=new RegExp("^("+ut+")(?!px)[a-z%]+$","i"),wn=new RegExp("^([+-])=("+ut+")","i"),xn={"BODY":"block"},kn={"position":"absolute","visibility":"hidden","display":"block"},Sn={"letterSpacing":0,"fontWeight":400},Cn=["Top","Right","Bottom","Left"],Tn=["Webkit","O","Moz","ms"];
dt.fn.extend({"css":function(e,n){return dt.access(this,function(e,n,i){var s,a,r={},o=0;if(dt.isArray(n)){for(a=un(e),s=n.length;s>o;o++)r[n[o]]=dt.css(e,n[o],!1,a);return r}return i!==t?dt.style(e,n,i):dt.css(e,n)},e,n,arguments.length>1)},"show":function(){return C(this,!0)},"hide":function(){return C(this)},"toggle":function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){S(this)?dt(this).show():dt(this).hide()})}}),dt.extend({"cssHooks":{"opacity":{"get":function(e,t){if(t){var n=hn(e,"opacity");
return""===n?"1":n}}}},"cssNumber":{"columnCount":!0,"fillOpacity":!0,"fontWeight":!0,"lineHeight":!0,"opacity":!0,"order":!0,"orphans":!0,"widows":!0,"zIndex":!0,"zoom":!0},"cssProps":{"float":dt.support.cssFloat?"cssFloat":"styleFloat"},"style":function(e,n,i,s){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,r,o,l=dt.camelCase(n),c=e.style;if(n=dt.cssProps[l]||(dt.cssProps[l]=k(c,l)),o=dt.cssHooks[n]||dt.cssHooks[l],i===t)return o&&"get"in o&&(a=o.get(e,!1,s))!==t?a:c[n];if(r=typeof i,"string"===r&&(a=wn.exec(i))&&(i=(a[1]+1)*a[2]+parseFloat(dt.css(e,n)),r="number"),!(null==i||"number"===r&&isNaN(i)||("number"!==r||dt.cssNumber[l]||(i+="px"),dt.support.clearCloneStyle||""!==i||0!==n.indexOf("background")||(c[n]="inherit"),o&&"set"in o&&(i=o.set(e,i,s))===t)))try{c[n]=i
}catch(d){}}},"css":function(e,n,i,s){var a,r,o,l=dt.camelCase(n);return n=dt.cssProps[l]||(dt.cssProps[l]=k(e.style,l)),o=dt.cssHooks[n]||dt.cssHooks[l],o&&"get"in o&&(r=o.get(e,!0,i)),r===t&&(r=hn(e,n,s)),"normal"===r&&n in Sn&&(r=Sn[n]),""===i||i?(a=parseFloat(r),i===!0||dt.isNumeric(a)?a||0:r):r}}),e.getComputedStyle?(un=function(t){return e.getComputedStyle(t,null)},hn=function(e,n,i){var s,a,r,o=i||un(e),l=o?o.getPropertyValue(n)||o[n]:t,c=e.style;return o&&(""!==l||dt.contains(e.ownerDocument,e)||(l=dt.style(e,n)),bn.test(l)&&vn.test(n)&&(s=c.width,a=c.minWidth,r=c.maxWidth,c.minWidth=c.maxWidth=c.width=l,l=o.width,c.width=s,c.minWidth=a,c.maxWidth=r)),l
}):G.documentElement.currentStyle&&(un=function(e){return e.currentStyle},hn=function(e,n,i){var s,a,r,o=i||un(e),l=o?o[n]:t,c=e.style;return null==l&&c&&c[n]&&(l=c[n]),bn.test(l)&&!mn.test(n)&&(s=c.left,a=e.runtimeStyle,r=a&&a.left,r&&(a.left=e.currentStyle.left),c.left="fontSize"===n?"1em":l,l=c.pixelLeft+"px",c.left=s,r&&(a.left=r)),""===l?"auto":l}),dt.each(["height","width"],function(e,t){dt.cssHooks[t]={"get":function(e,n,i){return n?0===e.offsetWidth&&gn.test(dt.css(e,"display"))?dt.swap(e,kn,function(){return I(e,t,i)
}):I(e,t,i):void 0},"set":function(e,n,i){var s=i&&un(e);return T(e,n,i?A(e,t,i,dt.support.boxSizing&&"border-box"===dt.css(e,"boxSizing",!1,s),s):0)}}}),dt.support.opacity||(dt.cssHooks.opacity={"get":function(e,t){return fn.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},"set":function(e,t){var n=e.style,i=e.currentStyle,s=dt.isNumeric(t)?"alpha(opacity="+100*t+")":"",a=i&&i.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===dt.trim(a.replace(pn,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||i&&!i.filter)||(n.filter=pn.test(a)?a.replace(pn,s):a+" "+s)
}}),dt(function(){dt.support.reliableMarginRight||(dt.cssHooks.marginRight={"get":function(e,t){return t?dt.swap(e,{"display":"inline-block"},hn,[e,"marginRight"]):void 0}}),!dt.support.pixelPosition&&dt.fn.position&&dt.each(["top","left"],function(e,t){dt.cssHooks[t]={"get":function(e,n){return n?(n=hn(e,t),bn.test(n)?dt(e).position()[t]+"px":n):void 0}}})}),dt.expr&&dt.expr.filters&&(dt.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!dt.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||dt.css(e,"display"))
},dt.expr.filters.visible=function(e){return!dt.expr.filters.hidden(e)}),dt.each({"margin":"","padding":"","border":"Width"},function(e,t){dt.cssHooks[e+t]={"expand":function(n){for(var i=0,s={},a="string"==typeof n?n.split(" "):[n];4>i;i++)s[e+Cn[i]+t]=a[i]||a[i-2]||a[0];return s}},vn.test(e)||(dt.cssHooks[e+t].set=T)});var An=/%20/g,In=/\[\]$/,Pn=/\r?\n/g,Mn=/^(?:submit|button|image|reset|file)$/i,Dn=/^(?:input|select|textarea|keygen)/i;dt.fn.extend({"serialize":function(){return dt.param(this.serializeArray())
},"serializeArray":function(){return this.map(function(){var e=dt.prop(this,"elements");return e?dt.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!dt(this).is(":disabled")&&Dn.test(this.nodeName)&&!Mn.test(e)&&(this.checked||!tn.test(e))}).map(function(e,t){var n=dt(this).val();return null==n?null:dt.isArray(n)?dt.map(n,function(e){return{"name":t.name,"value":e.replace(Pn,"\r\n")}}):{"name":t.name,"value":n.replace(Pn,"\r\n")}}).get()}}),dt.param=function(e,n){var i,s=[],a=function(e,t){t=dt.isFunction(t)?t():null==t?"":t,s[s.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)
};if(n===t&&(n=dt.ajaxSettings&&dt.ajaxSettings.traditional),dt.isArray(e)||e.jquery&&!dt.isPlainObject(e))dt.each(e,function(){a(this.name,this.value)});else for(i in e)D(i,e[i],n,a);return s.join("&").replace(An,"+")},dt.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){dt.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)
}}),dt.fn.extend({"hover":function(e,t){return this.mouseenter(e).mouseleave(t||e)},"bind":function(e,t,n){return this.on(e,null,t,n)},"unbind":function(e,t){return this.off(e,null,t)},"delegate":function(e,t,n,i){return this.on(t,e,n,i)},"undelegate":function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var _n,En,Ln=dt.now(),Rn=/\?/,Nn=/#.*$/,On=/([?&])_=[^&]*/,Bn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Vn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Fn=/^(?:GET|HEAD)$/,qn=/^\/\//,Un=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,zn=dt.fn.load,jn={},Hn={},$n="*/".concat("*");
try{En=K.href}catch(Wn){En=G.createElement("a"),En.href="",En=En.href}_n=Un.exec(En.toLowerCase())||[],dt.fn.load=function(e,n,i){if("string"!=typeof e&&zn)return zn.apply(this,arguments);var s,a,r,o=this,l=e.indexOf(" ");return l>=0&&(s=e.slice(l,e.length),e=e.slice(0,l)),dt.isFunction(n)?(i=n,n=t):n&&"object"==typeof n&&(r="POST"),o.length>0&&dt.ajax({"url":e,"type":r,"dataType":"html","data":n}).done(function(e){a=arguments,o.html(s?dt("<div>").append(dt.parseHTML(e)).find(s):e)}).complete(i&&function(e,t){o.each(i,a||[e.responseText,t,e])
}),this},dt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){dt.fn[t]=function(e){return this.on(t,e)}}),dt.extend({"active":0,"lastModified":{},"etag":{},"ajaxSettings":{"url":En,"type":"GET","isLocal":Vn.test(_n[1]),"global":!0,"processData":!0,"async":!0,"contentType":"application/x-www-form-urlencoded; charset=UTF-8","accepts":{"*":$n,"text":"text/plain","html":"text/html","xml":"application/xml, text/xml","json":"application/json, text/javascript"},"contents":{"xml":/xml/,"html":/html/,"json":/json/},"responseFields":{"xml":"responseXML","text":"responseText","json":"responseJSON"},"converters":{"* text":String,"text html":!0,"text json":dt.parseJSON,"text xml":dt.parseXML},"flatOptions":{"url":!0,"context":!0}},"ajaxSetup":function(e,t){return t?L(L(e,dt.ajaxSettings),t):L(dt.ajaxSettings,e)
},"ajaxPrefilter":_(jn),"ajaxTransport":_(Hn),"ajax":function(e,n){function i(e,n,i,s){var a,u,y,b,x,S=n;2!==w&&(w=2,l&&clearTimeout(l),d=t,o=s||"",k.readyState=e>0?4:0,a=e>=200&&300>e||304===e,i&&(b=R(h,k,i)),b=N(h,b,k,a),a?(h.ifModified&&(x=k.getResponseHeader("Last-Modified"),x&&(dt.lastModified[r]=x),x=k.getResponseHeader("etag"),x&&(dt.etag[r]=x)),204===e||"HEAD"===h.type?S="nocontent":304===e?S="notmodified":(S=b.state,u=b.data,y=b.error,a=!y)):(y=S,(e||!S)&&(S="error",0>e&&(e=0))),k.status=e,k.statusText=(n||S)+"",a?m.resolveWith(p,[u,S,k]):m.rejectWith(p,[k,S,y]),k.statusCode(v),v=t,c&&f.trigger(a?"ajaxSuccess":"ajaxError",[k,h,a?u:y]),g.fireWith(p,[k,S]),c&&(f.trigger("ajaxComplete",[k,h]),--dt.active||dt.event.trigger("ajaxStop")))
}"object"==typeof e&&(n=e,e=t),n=n||{};var s,a,r,o,l,c,d,u,h=dt.ajaxSetup({},n),p=h.context||h,f=h.context&&(p.nodeType||p.jquery)?dt(p):dt.event,m=dt.Deferred(),g=dt.Callbacks("once memory"),v=h.statusCode||{},y={},b={},w=0,x="canceled",k={"readyState":0,"getResponseHeader":function(e){var t;if(2===w){if(!u)for(u={};t=Bn.exec(o);)u[t[1].toLowerCase()]=t[2];t=u[e.toLowerCase()]}return null==t?null:t},"getAllResponseHeaders":function(){return 2===w?o:null},"setRequestHeader":function(e,t){var n=e.toLowerCase();
return w||(e=b[n]=b[n]||e,y[e]=t),this},"overrideMimeType":function(e){return w||(h.mimeType=e),this},"statusCode":function(e){var t;if(e)if(2>w)for(t in e)v[t]=[v[t],e[t]];else k.always(e[k.status]);return this},"abort":function(e){var t=e||x;return d&&d.abort(t),i(0,t),this}};if(m.promise(k).complete=g.add,k.success=k.done,k.error=k.fail,h.url=((e||h.url||En)+"").replace(Nn,"").replace(qn,_n[1]+"//"),h.type=n.method||n.type||h.method||h.type,h.dataTypes=dt.trim(h.dataType||"*").toLowerCase().match(ht)||[""],null==h.crossDomain&&(s=Un.exec(h.url.toLowerCase()),h.crossDomain=!(!s||s[1]===_n[1]&&s[2]===_n[2]&&(s[3]||("http:"===s[1]?"80":"443"))===(_n[3]||("http:"===_n[1]?"80":"443")))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=dt.param(h.data,h.traditional)),E(jn,h,n,k),2===w)return k;
c=h.global,c&&0===dt.active++&&dt.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Fn.test(h.type),r=h.url,h.hasContent||(h.data&&(r=h.url+=(Rn.test(r)?"&":"?")+h.data,delete h.data),h.cache===!1&&(h.url=On.test(r)?r.replace(On,"$1_="+Ln++):r+(Rn.test(r)?"&":"?")+"_="+Ln++)),h.ifModified&&(dt.lastModified[r]&&k.setRequestHeader("If-Modified-Since",dt.lastModified[r]),dt.etag[r]&&k.setRequestHeader("If-None-Match",dt.etag[r])),(h.data&&h.hasContent&&h.contentType!==!1||n.contentType)&&k.setRequestHeader("Content-Type",h.contentType),k.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+$n+"; q=0.01":""):h.accepts["*"]);
for(a in h.headers)k.setRequestHeader(a,h.headers[a]);if(h.beforeSend&&(h.beforeSend.call(p,k,h)===!1||2===w))return k.abort();x="abort";for(a in{"success":1,"error":1,"complete":1})k[a](h[a]);if(d=E(Hn,h,n,k)){k.readyState=1,c&&f.trigger("ajaxSend",[k,h]),h.async&&h.timeout>0&&(l=setTimeout(function(){k.abort("timeout")},h.timeout));try{w=1,d.send(y,i)}catch(S){if(!(2>w))throw S;i(-1,S)}}else i(-1,"No Transport");return k},"getJSON":function(e,t,n){return dt.get(e,t,n,"json")},"getScript":function(e,n){return dt.get(e,t,n,"script")
}}),dt.each(["get","post"],function(e,n){dt[n]=function(e,i,s,a){return dt.isFunction(i)&&(a=a||s,s=i,i=t),dt.ajax({"url":e,"type":n,"dataType":a,"data":i,"success":s})}}),dt.ajaxSetup({"accepts":{"script":"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},"contents":{"script":/(?:java|ecma)script/},"converters":{"text script":function(e){return dt.globalEval(e),e}}}),dt.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)
}),dt.ajaxTransport("script",function(e){if(e.crossDomain){var n,i=G.head||dt("head")[0]||G.documentElement;return{"send":function(t,s){n=G.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||s(200,"success"))},i.insertBefore(n,i.firstChild)},"abort":function(){n&&n.onload(t,!0)
}}}});var Yn=[],Qn=/(=)\?(?=&|$)|\?\?/;dt.ajaxSetup({"jsonp":"callback","jsonpCallback":function(){var e=Yn.pop()||dt.expando+"_"+Ln++;return this[e]=!0,e}}),dt.ajaxPrefilter("json jsonp",function(n,i,s){var a,r,o,l=n.jsonp!==!1&&(Qn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Qn.test(n.data)&&"data");return l||"jsonp"===n.dataTypes[0]?(a=n.jsonpCallback=dt.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,l?n[l]=n[l].replace(Qn,"$1"+a):n.jsonp!==!1&&(n.url+=(Rn.test(n.url)?"&":"?")+n.jsonp+"="+a),n.converters["script json"]=function(){return o||dt.error(a+" was not called"),o[0]
},n.dataTypes[0]="json",r=e[a],e[a]=function(){o=arguments},s.always(function(){e[a]=r,n[a]&&(n.jsonpCallback=i.jsonpCallback,Yn.push(a)),o&&dt.isFunction(r)&&r(o[0]),o=r=t}),"script"):void 0});var Kn,Gn,Xn=0,Jn=e.ActiveXObject&&function(){var e;for(e in Kn)Kn[e](t,!0)};dt.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&O()||B()}:O,Gn=dt.ajaxSettings.xhr(),dt.support.cors=!!Gn&&"withCredentials"in Gn,Gn=dt.support.ajax=!!Gn,Gn&&dt.ajaxTransport(function(n){if(!n.crossDomain||dt.support.cors){var i;
return{"send":function(s,a){var r,o,l=n.xhr();if(n.username?l.open(n.type,n.url,n.async,n.username,n.password):l.open(n.type,n.url,n.async),n.xhrFields)for(o in n.xhrFields)l[o]=n.xhrFields[o];n.mimeType&&l.overrideMimeType&&l.overrideMimeType(n.mimeType),n.crossDomain||s["X-Requested-With"]||(s["X-Requested-With"]="XMLHttpRequest");try{for(o in s)l.setRequestHeader(o,s[o])}catch(c){}l.send(n.hasContent&&n.data||null),i=function(e,s){var o,c,d,u;try{if(i&&(s||4===l.readyState))if(i=t,r&&(l.onreadystatechange=dt.noop,Jn&&delete Kn[r]),s)4!==l.readyState&&l.abort();
else{u={},o=l.status,c=l.getAllResponseHeaders(),"string"==typeof l.responseText&&(u.text=l.responseText);try{d=l.statusText}catch(h){d=""}o||!n.isLocal||n.crossDomain?1223===o&&(o=204):o=u.text?200:404}}catch(p){s||a(-1,p)}u&&a(o,d,u,c)},n.async?4===l.readyState?setTimeout(i):(r=++Xn,Jn&&(Kn||(Kn={},dt(e).unload(Jn)),Kn[r]=i),l.onreadystatechange=i):i()},"abort":function(){i&&i(t,!0)}}}});var Zn,ei,ti=/^(?:toggle|show|hide)$/,ni=new RegExp("^(?:([+-])=|)("+ut+")([a-z%]*)$","i"),ii=/queueHooks$/,si=[z],ai={"*":[function(e,t){var n=this.createTween(e,t),i=n.cur(),s=ni.exec(t),a=s&&s[3]||(dt.cssNumber[e]?"":"px"),r=(dt.cssNumber[e]||"px"!==a&&+i)&&ni.exec(dt.css(n.elem,e)),o=1,l=20;
if(r&&r[3]!==a){a=a||r[3],s=s||[],r=+i||1;do o=o||".5",r/=o,dt.style(n.elem,e,r+a);while(o!==(o=n.cur()/i)&&1!==o&&--l)}return s&&(r=n.start=+r||+i||0,n.unit=a,n.end=s[1]?r+(s[1]+1)*s[2]:+s[2]),n}]};dt.Animation=dt.extend(q,{"tweener":function(e,t){dt.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,i=0,s=e.length;s>i;i++)n=e[i],ai[n]=ai[n]||[],ai[n].unshift(t)},"prefilter":function(e,t){t?si.unshift(e):si.push(e)}}),dt.Tween=j,j.prototype={"constructor":j,"init":function(e,t,n,i,s,a){this.elem=e,this.prop=n,this.easing=s||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=a||(dt.cssNumber[n]?"":"px")
},"cur":function(){var e=j.propHooks[this.prop];return e&&e.get?e.get(this):j.propHooks._default.get(this)},"run":function(e){var t,n=j.propHooks[this.prop];return this.pos=t=this.options.duration?dt.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):j.propHooks._default.set(this),this}},j.prototype.init.prototype=j.prototype,j.propHooks={"_default":{"get":function(e){var t;
return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=dt.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},"set":function(e){dt.fx.step[e.prop]?dt.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[dt.cssProps[e.prop]]||dt.cssHooks[e.prop])?dt.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},j.propHooks.scrollTop=j.propHooks.scrollLeft={"set":function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},dt.each(["toggle","show","hide"],function(e,t){var n=dt.fn[t];
dt.fn[t]=function(e,i,s){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(H(t,!0),e,i,s)}}),dt.fn.extend({"fadeTo":function(e,t,n,i){return this.filter(S).css("opacity",0).show().end().animate({"opacity":t},e,n,i)},"animate":function(e,t,n,i){var s=dt.isEmptyObject(e),a=dt.speed(t,n,i),r=function(){var t=q(this,dt.extend({},e),a);(s||dt._data(this,"finish"))&&t.stop(!0)};return r.finish=r,s||a.queue===!1?this.each(r):this.queue(a.queue,r)},"stop":function(e,n,i){var s=function(e){var t=e.stop;
delete e.stop,t(i)};return"string"!=typeof e&&(i=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",a=dt.timers,r=dt._data(this);if(n)r[n]&&r[n].stop&&s(r[n]);else for(n in r)r[n]&&r[n].stop&&ii.test(n)&&s(r[n]);for(n=a.length;n--;)a[n].elem!==this||null!=e&&a[n].queue!==e||(a[n].anim.stop(i),t=!1,a.splice(n,1));(t||!i)&&dt.dequeue(this,e)})},"finish":function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=dt._data(this),i=n[e+"queue"],s=n[e+"queueHooks"],a=dt.timers,r=i?i.length:0;
for(n.finish=!0,dt.queue(this,e,[]),s&&s.stop&&s.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;r>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),dt.each({"slideDown":H("show"),"slideUp":H("hide"),"slideToggle":H("toggle"),"fadeIn":{"opacity":"show"},"fadeOut":{"opacity":"hide"},"fadeToggle":{"opacity":"toggle"}},function(e,t){dt.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),dt.speed=function(e,t,n){var i=e&&"object"==typeof e?dt.extend({},e):{"complete":n||!n&&t||dt.isFunction(e)&&e,"duration":e,"easing":n&&t||t&&!dt.isFunction(t)&&t};
return i.duration=dt.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in dt.fx.speeds?dt.fx.speeds[i.duration]:dt.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){dt.isFunction(i.old)&&i.old.call(this),i.queue&&dt.dequeue(this,i.queue)},i},dt.easing={"linear":function(e){return e},"swing":function(e){return.5-Math.cos(e*Math.PI)/2}},dt.timers=[],dt.fx=j.prototype.init,dt.fx.tick=function(){var e,n=dt.timers,i=0;for(Zn=dt.now();i<n.length;i++)e=n[i],e()||n[i]!==e||n.splice(i--,1);
n.length||dt.fx.stop(),Zn=t},dt.fx.timer=function(e){e()&&dt.timers.push(e)&&dt.fx.start()},dt.fx.interval=13,dt.fx.start=function(){ei||(ei=setInterval(dt.fx.tick,dt.fx.interval))},dt.fx.stop=function(){clearInterval(ei),ei=null},dt.fx.speeds={"slow":600,"fast":200,"_default":400},dt.fx.step={},dt.expr&&dt.expr.filters&&(dt.expr.filters.animated=function(e){return dt.grep(dt.timers,function(t){return e===t.elem}).length}),dt.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){dt.offset.setOffset(this,e,t)
});var n,i,s={"top":0,"left":0},a=this[0],r=a&&a.ownerDocument;if(r)return n=r.documentElement,dt.contains(n,a)?(typeof a.getBoundingClientRect!==Q&&(s=a.getBoundingClientRect()),i=$(r),{"top":s.top+(i.pageYOffset||n.scrollTop)-(n.clientTop||0),"left":s.left+(i.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):s},dt.offset={"setOffset":function(e,t,n){var i=dt.css(e,"position");"static"===i&&(e.style.position="relative");var s,a,r=dt(e),o=r.offset(),l=dt.css(e,"top"),c=dt.css(e,"left"),d=("absolute"===i||"fixed"===i)&&dt.inArray("auto",[l,c])>-1,u={},h={};
d?(h=r.position(),s=h.top,a=h.left):(s=parseFloat(l)||0,a=parseFloat(c)||0),dt.isFunction(t)&&(t=t.call(e,n,o)),null!=t.top&&(u.top=t.top-o.top+s),null!=t.left&&(u.left=t.left-o.left+a),"using"in t?t.using.call(e,u):r.css(u)}},dt.fn.extend({"position":function(){if(this[0]){var e,t,n={"top":0,"left":0},i=this[0];return"fixed"===dt.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),dt.nodeName(e[0],"html")||(n=e.offset()),n.top+=dt.css(e[0],"borderTopWidth",!0),n.left+=dt.css(e[0],"borderLeftWidth",!0)),{"top":t.top-n.top-dt.css(i,"marginTop",!0),"left":t.left-n.left-dt.css(i,"marginLeft",!0)}
}},"offsetParent":function(){return this.map(function(){for(var e=this.offsetParent||X;e&&!dt.nodeName(e,"html")&&"static"===dt.css(e,"position");)e=e.offsetParent;return e||X})}}),dt.each({"scrollLeft":"pageXOffset","scrollTop":"pageYOffset"},function(e,n){var i=/Y/.test(n);dt.fn[e]=function(s){return dt.access(this,function(e,s,a){var r=$(e);return a===t?r?n in r?r[n]:r.document.documentElement[s]:e[s]:void(r?r.scrollTo(i?dt(r).scrollLeft():a,i?a:dt(r).scrollTop()):e[s]=a)},e,s,arguments.length,null)
}}),dt.each({"Height":"height","Width":"width"},function(e,n){dt.each({"padding":"inner"+e,"content":n,"":"outer"+e},function(i,s){dt.fn[s]=function(s,a){var r=arguments.length&&(i||"boolean"!=typeof s),o=i||(s===!0||a===!0?"margin":"border");return dt.access(this,function(n,i,s){var a;return dt.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(a=n.documentElement,Math.max(n.body["scroll"+e],a["scroll"+e],n.body["offset"+e],a["offset"+e],a["client"+e])):s===t?dt.css(n,i,o):dt.style(n,i,s,o)
},n,r?s:t,r,null)}})}),dt.fn.size=function(){return this.length},dt.fn.andSelf=dt.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=dt:(e.jQuery=e.$=dt,"function"==typeof define&&define.amd&&define("jquery-lib",[],function(){return dt}))}(window),define("jquery",["underscore","jquery-lib"],function(e,t){t.support.cors||t.ajaxPrefilter(function(t){if(t.crossDomain&&t.async){var n=t.type.toUpperCase();!t.data||"GET"!=n&&"HEAD"!=n||(t.url+="?"+t.data,delete t.data),t.headers||(t.headers={});
var i="X-Plex-",s=e.filter(e.keys(t.headers),function(e){return 0===e.lastIndexOf(i,0)});e.each(s,function(e){t.headers["X-Plex-Proxy-"+e.slice(i.length)]=t.headers[e],delete t.headers[e]}),t.headers["X-Plex-Url"]=t.url,t.url="/system/proxy",t.crossDomain=!1,t.headers["X-Plex-Proxy-Token"]&&(t.headers["X-Plex-Token"]=t.headers["X-Plex-Proxy-Token"])}});var n=["Cache-Control","Content-Language","Content-Type","Expires","Last-Modified","Pragma","Location"],i=t.ajaxSettings.xhr;return t.ajaxSettings.xhr=function(){var t=i(),s=t.getAllResponseHeaders;
return t.getAllResponseHeaders=function(){var i=s.apply(t);if(i)return i;var a=[];return e.each(n,function(e){var n=t.getResponseHeader(e);n&&a.push(e+": "+n)}),a.join("\n")},t},t.ajaxPrefilter(function(e){return e.crossDomain&&!e.skipCorsWithRedirect?"cors_with_redirect":void 0}),t.ajaxTransport("cors_with_redirect",function(n,i,s){n.dataTypes.shift();var a,r=e.extend({},i,{"skipCorsWithRedirect":!0,"complete":null,"error":null,"success":null});return{"send":function(n,i){r.error=function(t,n){e.extend(s,t),i(t.status,n,{"alreadyConverted":t.responseText},t.getAllResponseHeaders())
},r.success=function(n,o,l){e.extend(s,l);var c=l.getResponseHeader("Location");200==l.status&&c?(r.url=c,a=t.ajax(r)):i(l.status,o,{"alreadyConverted":l.responseText},l.getAllResponseHeaders())},a=t.ajax(r)},"abort":function(){a&&a.abort()}}}),t.fn.selectText=function(){var e,t=this[0];if(document.body.createTextRange)e=document.body.createTextRange(),e.moveToElementText(t),e.select();else if(window.getSelection){var n=window.getSelection();e=document.createRange(),e.selectNodeContents(t),n.removeAllRanges(),n.addRange(e)
}},t.fn.isDisabled=function(){return this.hasClass("disabled")||this.hasClass("active")||this.hasClass("hidden")},t}),function(e,t){if("function"==typeof define&&define.amd)define("backbone-lib",["underscore","jquery","exports"],function(n,i,s){e.Backbone=t(e,s,n,i)});else if("undefined"!=typeof exports){var n=require("underscore");t(e,exports,n)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,n,i){{var s=e.Backbone,a=[],r=(a.push,a.slice);a.splice}t.VERSION="1.1.2",t.$=i,t.noConflict=function(){return e.Backbone=s,this
},t.emulateHTTP=!1,t.emulateJSON=!1;var o=t.Events={"on":function(e,t,n){if(!c(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var i=this._events[e]||(this._events[e]=[]);return i.push({"callback":t,"context":n,"ctx":n||this}),this},"once":function(e,t,i){if(!c(this,"once",e,[t,i])||!t)return this;var s=this,a=n.once(function(){s.off(e,a),t.apply(this,arguments)});return a._callback=t,this.on(e,a,i)},"off":function(e,t,i){var s,a,r,o,l,d,u,h;if(!this._events||!c(this,"off",e,[t,i]))return this;
if(!e&&!t&&!i)return this._events=void 0,this;for(o=e?[e]:n.keys(this._events),l=0,d=o.length;d>l;l++)if(e=o[l],r=this._events[e]){if(this._events[e]=s=[],t||i)for(u=0,h=r.length;h>u;u++)a=r[u],(t&&t!==a.callback&&t!==a.callback._callback||i&&i!==a.context)&&s.push(a);s.length||delete this._events[e]}return this},"trigger":function(e){if(!this._events)return this;var t=r.call(arguments,1);if(!c(this,"trigger",e,t))return this;var n=this._events[e],i=this._events.all;return n&&d(n,t),i&&d(i,arguments),this
},"stopListening":function(e,t,i){var s=this._listeningTo;if(!s)return this;var a=!t&&!i;i||"object"!=typeof t||(i=this),e&&((s={})[e._listenId]=e);for(var r in s)e=s[r],e.off(t,i,this),(a||n.isEmpty(e._events))&&delete this._listeningTo[r];return this}},l=/\s+/,c=function(e,t,n,i){if(!n)return!0;if("object"==typeof n){for(var s in n)e[t].apply(e,[s,n[s]].concat(i));return!1}if(l.test(n)){for(var a=n.split(l),r=0,o=a.length;o>r;r++)e[t].apply(e,[a[r]].concat(i));return!1}return!0},d=function(e,t){var n,i=-1,s=e.length,a=t[0],r=t[1],o=t[2];
switch(t.length){case 0:for(;++i<s;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<s;)(n=e[i]).callback.call(n.ctx,a);return;case 2:for(;++i<s;)(n=e[i]).callback.call(n.ctx,a,r);return;case 3:for(;++i<s;)(n=e[i]).callback.call(n.ctx,a,r,o);return;default:for(;++i<s;)(n=e[i]).callback.apply(n.ctx,t);return}},u={"listenTo":"on","listenToOnce":"once"};n.each(u,function(e,t){o[t]=function(t,i,s){var a=this._listeningTo||(this._listeningTo={}),r=t._listenId||(t._listenId=n.uniqueId("l"));return a[r]=t,s||"object"!=typeof i||(s=this),t[e](i,s,this),this
}}),o.bind=o.on,o.unbind=o.off,n.extend(t,o);var h=t.Model=function(e,t){var i=e||{};t||(t={}),this.cid=n.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(i=this.parse(i,t)||{}),i=n.defaults({},i,n.result(this,"defaults")),this.set(i,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(h.prototype,o,{"changed":null,"validationError":null,"idAttribute":"id","initialize":function(){},"toJSON":function(){return n.clone(this.attributes)},"sync":function(){return t.sync.apply(this,arguments)
},"get":function(e){return this.attributes[e]},"escape":function(e){return n.escape(this.get(e))},"has":function(e){return null!=this.get(e)},"set":function(e,t,i){var s,a,r,o,l,c,d,u;if(null==e)return this;if("object"==typeof e?(a=e,i=t):(a={})[e]=t,i||(i={}),!this._validate(a,i))return!1;r=i.unset,l=i.silent,o=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=n.clone(this.attributes),this.changed={}),u=this.attributes,d=this._previousAttributes,this.idAttribute in a&&(this.id=a[this.idAttribute]);
for(s in a)t=a[s],n.isEqual(u[s],t)||o.push(s),n.isEqual(d[s],t)?delete this.changed[s]:this.changed[s]=t,r?delete u[s]:u[s]=t;if(!l){o.length&&(this._pending=i);for(var h=0,p=o.length;p>h;h++)this.trigger("change:"+o[h],this,u[o[h]],i)}if(c)return this;if(!l)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},"unset":function(e,t){return this.set(e,void 0,n.extend({},t,{"unset":!0}))},"clear":function(e){var t={};for(var i in this.attributes)t[i]=void 0;
return this.set(t,n.extend({},e,{"unset":!0}))},"hasChanged":function(e){return null==e?!n.isEmpty(this.changed):n.has(this.changed,e)},"changedAttributes":function(e){if(!e)return this.hasChanged()?n.clone(this.changed):!1;var t,i=!1,s=this._changing?this._previousAttributes:this.attributes;for(var a in e)n.isEqual(s[a],t=e[a])||((i||(i={}))[a]=t);return i},"previous":function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},"previousAttributes":function(){return n.clone(this._previousAttributes)
},"fetch":function(e){e=e?n.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,i=e.success;return e.success=function(n){return t.set(t.parse(n,e),e)?(i&&i(t,n,e),void t.trigger("sync",t,n,e)):!1},B(this,e),this.sync("read",this,e)},"save":function(e,t,i){var s,a,r,o=this.attributes;if(null==e||"object"==typeof e?(s=e,i=t):(s={})[e]=t,i=n.extend({"validate":!0},i),s&&!i.wait){if(!this.set(s,i))return!1}else if(!this._validate(s,i))return!1;s&&i.wait&&(this.attributes=n.extend({},o,s)),void 0===i.parse&&(i.parse=!0);
var l=this,c=i.success;return i.success=function(e){l.attributes=o;var t=l.parse(e,i);return i.wait&&(t=n.extend(s||{},t)),n.isObject(t)&&!l.set(t,i)?!1:(c&&c(l,e,i),void l.trigger("sync",l,e,i))},B(this,i),a=this.isNew()?"create":i.patch?"patch":"update","patch"===a&&(i.attrs=s),r=this.sync(a,this,i),s&&i.wait&&(this.attributes=o),r},"destroy":function(e){e=e?n.clone(e):{};var t=this,i=e.success,s=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(n){(e.wait||t.isNew())&&s(),i&&i(t,n,e),t.isNew()||t.trigger("sync",t,n,e)
},this.isNew())return e.success(),!1;B(this,e);var a=this.sync("delete",this,e);return e.wait||s(),a},"url":function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||O();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},"parse":function(e){return e},"clone":function(){return new this.constructor(this.attributes)},"isNew":function(){return!this.has(this.idAttribute)},"isValid":function(e){return this._validate({},n.extend(e||{},{"validate":!0}))},"_validate":function(e,t){if(!t.validate||!this.validate)return!0;
e=n.extend({},this.attributes,e);var i=this.validationError=this.validate(e,t)||null;return i?(this.trigger("invalid",this,i,n.extend(t,{"validationError":i})),!1):!0}});var p=["keys","values","pairs","invert","pick","omit"];n.each(p,function(e){h.prototype[e]=function(){var t=r.call(arguments);return t.unshift(this.attributes),n[e].apply(n,t)}});var f=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({"silent":!0},t))
},m={"add":!0,"remove":!0,"merge":!0},g={"add":!0,"remove":!1};n.extend(f.prototype,o,{"model":h,"initialize":function(){},"toJSON":function(e){return this.map(function(t){return t.toJSON(e)})},"sync":function(){return t.sync.apply(this,arguments)},"add":function(e,t){return this.set(e,n.extend({"merge":!1},t,g))},"remove":function(e,t){var i=!n.isArray(e);e=i?[e]:n.clone(e),t||(t={});var s,a,r,o;for(s=0,a=e.length;a>s;s++)o=e[s]=this.get(e[s]),o&&(delete this._byId[o.id],delete this._byId[o.cid],r=this.indexOf(o),this.models.splice(r,1),this.length--,t.silent||(t.index=r,o.trigger("remove",o,this,t)),this._removeReference(o,t));
return i?e[0]:e},"set":function(e,t){t=n.defaults({},t,m),t.parse&&(e=this.parse(e,t));var i=!n.isArray(e);e=i?e?[e]:[]:n.clone(e);var s,a,r,o,l,c,d,u=t.at,p=this.model,f=this.comparator&&null==u&&t.sort!==!1,g=n.isString(this.comparator)?this.comparator:null,v=[],y=[],b={},w=t.add,x=t.merge,k=t.remove,S=!f&&w&&k?[]:!1;for(s=0,a=e.length;a>s;s++){if(l=e[s]||{},r=l instanceof h?o=l:l[p.prototype.idAttribute||"id"],c=this.get(r))k&&(b[c.cid]=!0),x&&(l=l===o?o.attributes:l,t.parse&&(l=c.parse(l,t)),c.set(l,t),f&&!d&&c.hasChanged(g)&&(d=!0)),e[s]=c;
else if(w){if(o=e[s]=this._prepareModel(l,t),!o)continue;v.push(o),this._addReference(o,t)}o=c||o,!S||!o.isNew()&&b[o.id]||S.push(o),b[o.id]=!0}if(k){for(s=0,a=this.length;a>s;++s)b[(o=this.models[s]).cid]||y.push(o);y.length&&this.remove(y,t)}if(v.length||S&&S.length)if(f&&(d=!0),this.length+=v.length,null!=u)for(s=0,a=v.length;a>s;s++)this.models.splice(u+s,0,v[s]);else{S&&(this.models.length=0);var C=S||v;for(s=0,a=C.length;a>s;s++)this.models.push(C[s])}if(d&&this.sort({"silent":!0}),!t.silent){for(s=0,a=v.length;a>s;s++)(o=v[s]).trigger("add",o,this,t);
(d||S&&S.length)&&this.trigger("sort",this,t)}return i?e[0]:e},"reset":function(e,t){t||(t={});for(var i=0,s=this.models.length;s>i;i++)this._removeReference(this.models[i],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({"silent":!0},t)),t.silent||this.trigger("reset",this,t),e},"push":function(e,t){return this.add(e,n.extend({"at":this.length},t))},"pop":function(e){var t=this.at(this.length-1);return this.remove(t,e),t},"unshift":function(e,t){return this.add(e,n.extend({"at":0},t))
},"shift":function(e){var t=this.at(0);return this.remove(t,e),t},"slice":function(){return r.apply(this.models,arguments)},"get":function(e){return null==e?void 0:this._byId[e]||this._byId[e.id]||this._byId[e.cid]},"at":function(e){return this.models[e]},"where":function(e,t){return n.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},"findWhere":function(e){return this.where(e,!0)},"sort":function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");
return e||(e={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},"pluck":function(e){return n.invoke(this.models,"get",e)},"fetch":function(e){e=e?n.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success,i=this;return e.success=function(n){var s=e.reset?"reset":"set";i[s](n,e),t&&t(i,n,e),i.trigger("sync",i,n,e)},B(this,e),this.sync("read",this,e)},"create":function(e,t){if(t=t?n.clone(t):{},!(e=this._prepareModel(e,t)))return!1;
t.wait||this.add(e,t);var i=this,s=t.success;return t.success=function(e,n){t.wait&&i.add(e,t),s&&s(e,n,t)},e.save(null,t),e},"parse":function(e){return e},"clone":function(){return new this.constructor(this.models)},"_reset":function(){this.length=0,this.models=[],this._byId={}},"_prepareModel":function(e,t){if(e instanceof h)return e;t=t?n.clone(t):{},t.collection=this;var i=new this.model(e,t);return i.validationError?(this.trigger("invalid",this,i.validationError,t),!1):i},"_addReference":function(e){this._byId[e.cid]=e,null!=e.id&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)
},"_removeReference":function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},"_onModelEvent":function(e,t,n,i){("add"!==e&&"remove"!==e||n===this)&&("destroy"===e&&this.remove(t,i),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});var v=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];
n.each(v,function(e){f.prototype[e]=function(){var t=r.call(arguments);return t.unshift(this.models),n[e].apply(n,t)}});var y=["groupBy","countBy","sortBy","indexBy"];n.each(y,function(e){f.prototype[e]=function(t,i){var s=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,s,i)}});var b=t.View=function(e){this.cid=n.uniqueId("view"),e||(e={}),n.extend(this,n.pick(e,x)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},w=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];
n.extend(b.prototype,o,{"tagName":"div","$":function(e){return this.$el.find(e)},"initialize":function(){},"render":function(){return this},"remove":function(){return this.$el.remove(),this.stopListening(),this},"setElement":function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},"delegateEvents":function(e){if(!e&&!(e=n.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var i=e[t];if(n.isFunction(i)||(i=this[e[t]]),i){var s=t.match(w),a=s[1],r=s[2];
i=n.bind(i,this),a+=".delegateEvents"+this.cid,""===r?this.$el.on(a,i):this.$el.on(a,r,i)}}return this},"undelegateEvents":function(){return this.$el.off(".delegateEvents"+this.cid),this},"_ensureElement":function(){if(this.el)this.setElement(n.result(this,"el"),!1);else{var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e["class"]=n.result(this,"className"));var i=t.$("<"+n.result(this,"tagName")+">").attr(e);this.setElement(i,!1)}}}),t.sync=function(e,i,s){var a=S[e];
n.defaults(s||(s={}),{"emulateHTTP":t.emulateHTTP,"emulateJSON":t.emulateJSON});var r={"type":a,"dataType":"json"};if(s.url||(r.url=n.result(i,"url")||O()),null!=s.data||!i||"create"!==e&&"update"!==e&&"patch"!==e||(r.contentType="application/json",r.data=JSON.stringify(s.attrs||i.toJSON(s))),s.emulateJSON&&(r.contentType="application/x-www-form-urlencoded",r.data=r.data?{"model":r.data}:{}),s.emulateHTTP&&("PUT"===a||"DELETE"===a||"PATCH"===a)){r.type="POST",s.emulateJSON&&(r.data._method=a);var o=s.beforeSend;
s.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",a),o?o.apply(this,arguments):void 0}}"GET"===r.type||s.emulateJSON||(r.processData=!1),"PATCH"===r.type&&k&&(r.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=s.xhr=t.ajax(n.extend(r,s));return i.trigger("request",i,l,s),l};var k=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),S={"create":"POST","update":"PUT","patch":"PATCH","delete":"DELETE","read":"GET"};
t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var C=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},T=/\((.*?)\)/g,A=/(\(\?)?:\w+/g,I=/\*\w+/g,P=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(C.prototype,o,{"initialize":function(){},"route":function(e,i,s){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(i)&&(s=i,i=""),s||(s=this[i]);var a=this;return t.history.route(e,function(n){var r=a._extractParameters(e,n);a.execute(s,r),a.trigger.apply(a,["route:"+i].concat(r)),a.trigger("route",i,r),t.history.trigger("route",a,i,r)
}),this},"execute":function(e,t){e&&e.apply(this,t)},"navigate":function(e,n){return t.history.navigate(e,n),this},"_bindRoutes":function(){if(this.routes){this.routes=n.result(this,"routes");for(var e,t=n.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},"_routeToRegExp":function(e){return e=e.replace(P,"\\$&").replace(T,"(?:$1)?").replace(A,function(e,t){return t?e:"([^/?]+)"}).replace(I,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},"_extractParameters":function(e,t){var i=e.exec(t).slice(1);
return n.map(i,function(e,t){return t===i.length-1?e||null:e?decodeURIComponent(e):null})}});var M=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},D=/^[#\/]|\s+$/g,_=/^\/+|\/+$/g,E=/msie [\w.]+/,L=/\/$/,R=/#.*$/;M.started=!1,n.extend(M.prototype,o,{"interval":50,"atRoot":function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},"getHash":function(e){var t=(e||this).location.href.match(/#(.*)$/);
return t?t[1]:""},"getFragment":function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(L,"");e.indexOf(n)||(e=e.slice(n.length))}else e=this.getHash();return e.replace(D,"")},"start":function(e){if(M.started)throw new Error("Backbone.history has already been started");M.started=!0,this.options=n.extend({"root":"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);
var i=this.getFragment(),s=document.documentMode,a=E.exec(navigator.userAgent.toLowerCase())&&(!s||7>=s);if(this.root=("/"+this.root+"/").replace(_,"/"),a&&this._wantsHashChange){var r=t.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=r.hide().appendTo("body")[0].contentWindow,this.navigate(i)}this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!a?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=i;
var o=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&o.hash&&(this.fragment=this.getHash().replace(D,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},"stop":function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),M.started=!1
},"route":function(e,t){this.handlers.unshift({"route":e,"callback":t})},"checkUrl":function(){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),void this.loadUrl())},"loadUrl":function(e){return e=this.fragment=this.getFragment(e),n.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0})},"navigate":function(e,t){if(!M.started)return!1;t&&t!==!0||(t={"trigger":!!t});
var n=this.root+(e=this.getFragment(e||""));if(e=e.replace(R,""),this.fragment!==e){if(this.fragment=e,""===e&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}return t.trigger?this.loadUrl(e):void 0
}},"_updateHash":function(e,t,n){if(n){var i=e.href.replace(/(javascript:|#).*$/,"");e.replace(i+"#"+t)}else e.hash="#"+t}}),t.history=new M;var N=function(e,t){var i,s=this;i=e&&n.has(e,"constructor")?e.constructor:function(){return s.apply(this,arguments)},n.extend(i,s,t);var a=function(){this.constructor=i};return a.prototype=s.prototype,i.prototype=new a,e&&n.extend(i.prototype,e),i.__super__=s.prototype,i};h.extend=f.extend=C.extend=b.extend=M.extend=N;var O=function(){throw new Error('A "url" property or function must be specified')
},B=function(e,t){var n=t.error;t.error=function(i){n&&n(e,i,t),e.trigger("error",e,i,t)}};return t}),define("plex/base/utils/BaseClass",["underscore"],function(e){function t(){e.isFunction(this.initialize)&&this.initialize.apply(this,arguments)}var n=function(t,n){var i,s=this;i=t&&e.has(t,"constructor")?t.constructor:function(){return s.apply(this,arguments)},e.extend(i,s,n);var a=function(){this.constructor=i};if(a.prototype=s.prototype,i.prototype=new a,t&&t.hasOwnProperty("mixins")){var r=t.mixins;
delete t.mixins,e.isArray(r)||(r=[r]),e.each(r,function(t){e.extend(i.prototype,t)})}return t&&e.extend(i.prototype,t),i.__super__=s.prototype,i};return t.extend=n,t}),define("plex/base/mixins/EventMixin",["underscore"],function(e){var t=/\s+/,n=function(e,n,i,s){if(!i)return!0;if("object"==typeof i){for(var a in i)e[n].apply(e,[a,i[a]].concat(s));return!1}if(t.test(i)){for(var r=i.split(t),o=0,l=r.length;l>o;o++)e[n].apply(e,[r[o]].concat(s));return!1}return!0},i=function(e,t){var n,i=-1,s=e.length,a=t[0],r=t[1],o=t[2];
switch(t.length){case 0:for(;++i<s;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<s;)(n=e[i]).callback.call(n.ctx,a);return;case 2:for(;++i<s;)(n=e[i]).callback.call(n.ctx,a,r);return;case 3:for(;++i<s;)(n=e[i]).callback.call(n.ctx,a,r,o);return;default:for(;++i<s;)(n=e[i]).callback.apply(n.ctx,t)}},s={"on":function(e,t,i){if(!n(this,"on",e,[t,i])||!t)return this;this._events||(this._events={});var s=this._events[e]||(this._events[e]=[]);return s.push({"callback":t,"context":i,"ctx":i||this}),this
},"once":function(t,i,s){if(!n(this,"once",t,[i,s])||!i)return this;var a=this,r=e.once(function(){a.off(t,r),i.apply(this,arguments)});return r._callback=i,this.on(t,r,s)},"off":function(t,i,s){var a,r,o,l,c,d,u,h;if(!this._events||!n(this,"off",t,[i,s]))return this;if(!t&&!i&&!s)return this._events=void 0,this;for(l=t?[t]:e.keys(this._events),c=0,d=l.length;d>c;c++)if(t=l[c],o=this._events[t]){if(this._events[t]=a=[],i||s)for(u=0,h=o.length;h>u;u++)r=o[u],(i&&i!==r.callback&&i!==r.callback._callback||s&&s!==r.context)&&a.push(r);
a.length||delete this._events[t]}return this},"trigger":function(e){if(!this._events)return this;var t=[].slice.call(arguments,1);if(!n(this,"trigger",e,t))return this;var s=this._events[e],a=this._events.all;return s&&i(s,t),a&&i(a,arguments),this},"stopListening":function(t,n,i){var s=this._listeningTo;if(!s)return this;var a=!n&&!i;i||"object"!=typeof n||(i=this),t&&((s={})[t._listenId]=t);for(var r in s)t=s[r],t.off(n,i,this),(a||e.isEmpty(t._events))&&delete this._listeningTo[r];return this}},a={"listenTo":"on","listenToOnce":"once"};
return e.each(a,function(t,n){s[n]=function(n,i,s){var a=this._listeningTo||(this._listeningTo={}),r=n._listenId||(n._listenId=e.uniqueId("l"));return a[r]=n,s||"object"!=typeof i||(s=this),n[t](i,s,this),this}}),s.bind=s.on,s.unbind=s.off,s}),define("plex/base/utils/Dispatcher",["underscore","plex/base/utils/BaseClass","plex/base/mixins/EventMixin"],function(e,t,n){var i=t.extend({"mixins":n});return new i}),define("backbone",["underscore","jquery","backbone-lib","plex/base/utils/Dispatcher","plex/base/utils/BaseClass"],function(e,t,n,i,s){n=n.noConflict();
var a=n.sync,r=[],o=!1;return n.sync=function(t,n,i){var s=i.server||n.server||n,l=i.cancelable;i.url||(n.syncUrl?i.url=e.result(n,"syncUrl"):n.url&&(i.url=e.result(n,"url"))),e.defaults(i,{"headers":{},"dataType":"text","processData":!1,"timeout":6e4}),e.isFunction(s.resolveUrl)&&(i.url=s.resolveUrl(i.url),"cloudsync"===s.get("platform")&&(i.url+=i.url.indexOf("?")>-1?"&":"?",i.url+="redirect=0"),e.extend(i.headers,s.getHeaders()));var c=a(t,n,i);return l&&(c._scope=e.isBoolean(l)?null:l,r.push(c),c.always(function(){if(!o){var t=e.indexOf(r,c);
r.splice(t,1)}})),c.fail(function(e){o||0!==e.status||s.trigger("error:connection",s)}),c},n.abort=function(e){o=!0;for(var t=r.length-1;t>-1;t--){var n=r[t];(null==e||e===n._scope)&&(n.abort(),r.splice(t,1))}o=!1},n.wrapError=function(e,t){var n=t.error;t.error=function(i){n&&n(e,i,t),e.trigger("error",e,i,t)}},e.extend(n.View.prototype,{"bindToModel":function(){this.bindings&&e.each(e.keys(this.bindings),function(t){var n=this.bindings[t],i=this[n.model]||this[this.bindingsModel]||this.model,s=n.modelAttribute,a=n.modelListeners||[s],r=this.$(t),o=e.bind(function(t){var i=n.formatter,a=n.autohide,o=t.get(s);
if(i&&(o=i.call(this,o,r)),a){var l=e.isFunction(a)?a.call(this,o):o;r.toggleClass("hidden",!l)}n.manual||r.html(o)},this);e.each(a,function(e){this.listenTo(i,"change:"+e,o)},this),o(i)},this)}}),n.Model.extend=s.extend,n.Collection.extend=s.extend,n.Router.extend=s.extend,n.View.extend=s.extend,n.History.extend=s.extend,n}),function(e,t){if("object"==typeof exports){var n=require("underscore"),i=require("backbone");module.exports=t(n,i)}else"function"==typeof define&&define.amd&&define("backbone.wreqr",["underscore","backbone"],t)
}(this,function(e,t){return t.Wreqr=function(e,t,n){var i={};return i.Handlers=function(e,t){var n=function(e){this.options=e,this._wreqrHandlers={},t.isFunction(this.initialize)&&this.initialize(e)};return n.extend=e.Model.extend,t.extend(n.prototype,e.Events,{"setHandlers":function(e){t.each(e,function(e,n){var i=null;t.isObject(e)&&!t.isFunction(e)&&(i=e.context,e=e.callback),this.setHandler(n,e,i)},this)},"setHandler":function(e,t,n){var i={"callback":t,"context":n};this._wreqrHandlers[e]=i,this.trigger("handler:add",e,t,n)
},"hasHandler":function(e){return!!this._wreqrHandlers[e]},"getHandler":function(e){var t=this._wreqrHandlers[e];if(t)return function(){var e=Array.prototype.slice.apply(arguments);return t.callback.apply(t.context,e)}},"removeHandler":function(e){delete this._wreqrHandlers[e]},"removeAllHandlers":function(){this._wreqrHandlers={}}}),n}(e,n),i.CommandStorage=function(){var t=function(e){this.options=e,this._commands={},n.isFunction(this.initialize)&&this.initialize(e)};return n.extend(t.prototype,e.Events,{"getCommands":function(e){var t=this._commands[e];
return t||(t={"command":e,"instances":[]},this._commands[e]=t),t},"addCommand":function(e,t){var n=this.getCommands(e);n.instances.push(t)},"clearCommands":function(e){var t=this.getCommands(e);t.instances=[]}}),t}(),i.Commands=function(e){return e.Handlers.extend({"storageType":e.CommandStorage,"constructor":function(t){this.options=t||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this);var n=Array.prototype.slice.call(arguments);e.Handlers.prototype.constructor.apply(this,n)
},"execute":function(e,t){e=arguments[0],t=Array.prototype.slice.call(arguments,1),this.hasHandler(e)?this.getHandler(e).apply(this,t):this.storage.addCommand(e,t)},"_executeCommands":function(e,t,i){var s=this.storage.getCommands(e);n.each(s.instances,function(e){t.apply(i,e)}),this.storage.clearCommands(e)},"_initializeStorage":function(e){var t,i=e.storageType||this.storageType;t=n.isFunction(i)?new i:i,this.storage=t}})}(i),i.RequestResponse=function(e){return e.Handlers.extend({"request":function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);
return this.hasHandler(e)?this.getHandler(e).apply(this,t):void 0}})}(i),i.EventAggregator=function(e,t){var n=function(){};return n.extend=e.Model.extend,t.extend(n.prototype,e.Events),n}(e,n),i}(t,t.Marionette,e),t.Wreqr}),function(e,t){if("object"==typeof exports){var n=require("underscore"),i=require("backbone");module.exports=t(n,i)}else"function"==typeof define&&define.amd&&define("backbone.babysitter",["underscore","backbone"],t)}(this,function(e,t){"option strict";return t.ChildViewContainer=function(e,t){var n=function(e){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),t.each(e,this.add,this)
};t.extend(n.prototype,{"add":function(e,t){var n=e.cid;return this._views[n]=e,e.model&&(this._indexByModel[e.model.cid]=n),t&&(this._indexByCustom[t]=n),this._updateLength(),this},"findByModel":function(e){return this.findByModelCid(e.cid)},"findByModelCid":function(e){var t=this._indexByModel[e];return this.findByCid(t)},"findByCustom":function(e){var t=this._indexByCustom[e];return this.findByCid(t)},"findByIndex":function(e){return t.values(this._views)[e]},"findByCid":function(e){return this._views[e]
},"remove":function(e){var n=e.cid;return e.model&&delete this._indexByModel[e.model.cid],t.any(this._indexByCustom,function(e,t){return e===n?(delete this._indexByCustom[t],!0):void 0},this),delete this._views[n],this._updateLength(),this},"call":function(e){this.apply(e,t.tail(arguments))},"apply":function(e,n){t.each(this._views,function(i){t.isFunction(i[e])&&i[e].apply(i,n||[])})},"_updateLength":function(){this.length=t.size(this._views)}});var i=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];
return t.each(i,function(e){n.prototype[e]=function(){var n=t.values(this._views),i=[n].concat(t.toArray(arguments));return t[e].apply(t,i)}}),n}(t,e),t.ChildViewContainer}),function(e,t){if("object"==typeof exports){var n=require("underscore"),i=require("backbone"),s=require("backbone.wreqr"),a=require("backbone.babysitter");module.exports=t(n,i,s,a)}else"function"==typeof define&&define.amd&&define("marionette-lib",["underscore","backbone","backbone.wreqr","backbone.babysitter"],t)}(this,function(e,t){!function(e,t,n){function i(e,t){var n=new Error(e);
throw n.name=t||"Error",n}var s={};t.Marionette=s,s.$=t.$;var a=Array.prototype.slice;return s.extend=t.Model.extend,s.getOption=function(e,t){if(e&&t){var n;return n=e.options&&t in e.options&&void 0!==e.options[t]?e.options[t]:e[t]}},s.normalizeMethods=function(e){var t,i={};return n.each(e,function(e,s){t=e,n.isFunction(t)||(t=this[t]),t&&(i[s]=t)},this),i},s.triggerMethod=function(){function e(e,t,n){return n.toUpperCase()}var t=/(^|:)(\w)/gi,i=function(i){var s="on"+i.replace(t,e),a=this[s];
return n.isFunction(this.trigger)&&this.trigger.apply(this,arguments),n.isFunction(a)?a.apply(this,n.tail(arguments)):void 0};return i}(),s.MonitorDOMRefresh=function(e){function t(e){e._isShown=!0,s(e)}function i(e){e._isRendered=!0,s(e)}function s(e){e._isShown&&e._isRendered&&a(e)&&n.isFunction(e.triggerMethod)&&e.triggerMethod("dom:refresh")}function a(t){return e.contains(t.el)}return function(e){e.listenTo(e,"show",function(){t(e)}),e.listenTo(e,"render",function(){i(e)})}}(document.documentElement),function(e){function t(e,t,s,a){var r=a.split(/\s+/);
n.each(r,function(n){var a=e[n];a||i("Method '"+n+"' was configured as an event handler, but does not exist."),e.listenTo(t,s,a)})}function s(e,t,n,i){e.listenTo(t,n,i)}function a(e,t,i,s){var a=s.split(/\s+/);n.each(a,function(n){var s=e[n];e.stopListening(t,i,s)})}function r(e,t,n,i){e.stopListening(t,n,i)}function o(e,t,i,s,a){t&&i&&(n.isFunction(i)&&(i=i.call(e)),n.each(i,function(i,r){n.isFunction(i)?s(e,t,r,i):a(e,t,r,i)}))}e.bindEntityEvents=function(e,n,i){o(e,n,i,s,t)},e.unbindEntityEvents=function(e,t,n){o(e,t,n,r,a)
}}(s),s.Callbacks=function(){this._deferred=s.$.Deferred(),this._callbacks=[]},n.extend(s.Callbacks.prototype,{"add":function(e,t){this._callbacks.push({"cb":e,"ctx":t}),this._deferred.done(function(n,i){t&&(n=t),e.call(n,i)})},"run":function(e,t){this._deferred.resolve(t,e)},"reset":function(){var e=this._callbacks;this._deferred=s.$.Deferred(),this._callbacks=[],n.each(e,function(e){this.add(e.cb,e.ctx)},this)}}),s.Controller=function(e){this.triggerMethod=s.triggerMethod,this.options=e||{},n.isFunction(this.initialize)&&this.initialize(this.options)
},s.Controller.extend=s.extend,n.extend(s.Controller.prototype,t.Events,{"close":function(){this.stopListening(),this.triggerMethod("close"),this.unbind()}}),s.Region=function(e){if(this.options=e||{},this.el=s.getOption(this,"el"),this.el||i("An 'el' must be specified for a region.","NoElError"),this.initialize){var t=Array.prototype.slice.apply(arguments);this.initialize.apply(this,t)}},n.extend(s.Region,{"buildRegion":function(e,t){var s=n.isString(e),a=n.isString(e.selector),r=n.isUndefined(e.regionType),o=n.isFunction(e);
o||s||a||i("Region must be specified as a Region type, a selector string or an object with selector property");var l,c;s&&(l=e),e.selector&&(l=e.selector,delete e.selector),o&&(c=e),!o&&r&&(c=t),e.regionType&&(c=e.regionType,delete e.regionType),(s||o)&&(e={}),e.el=l;var d=new c(e);return e.parentEl&&(d.getEl=function(t){var i=e.parentEl;return n.isFunction(i)&&(i=i()),i.find(t)}),d}}),n.extend(s.Region.prototype,t.Events,{"show":function(e){this.ensureEl();var t=e.isClosed||n.isUndefined(e.$el),i=e!==this.currentView;
i&&this.close(),e.render(),(i||t)&&this.open(e),this.currentView=e,s.triggerMethod.call(this,"show",e),s.triggerMethod.call(e,"show")},"ensureEl":function(){this.$el&&0!==this.$el.length||(this.$el=this.getEl(this.el))},"getEl":function(e){return s.$(e)},"open":function(e){this.$el.empty().append(e.el)},"close":function(){var e=this.currentView;e&&!e.isClosed&&(e.close?e.close():e.remove&&e.remove(),s.triggerMethod.call(this,"close",e),delete this.currentView)},"attachView":function(e){this.currentView=e
},"reset":function(){this.close(),delete this.$el}}),s.Region.extend=s.extend,s.RegionManager=function(e){var t=e.Controller.extend({"constructor":function(t){this._regions={},e.Controller.prototype.constructor.call(this,t)},"addRegions":function(e,t){var i={};return n.each(e,function(e,s){n.isString(e)&&(e={"selector":e}),e.selector&&(e=n.defaults({},e,t));var a=this.addRegion(s,e);i[s]=a},this),i},"addRegion":function(t,i){var s,a=n.isObject(i),r=n.isString(i),o=!!i.selector;return s=r||a&&o?e.Region.buildRegion(i,e.Region):n.isFunction(i)?e.Region.buildRegion(i,e.Region):i,this._store(t,s),this.triggerMethod("region:add",t,s),s
},"get":function(e){return this._regions[e]},"removeRegion":function(e){var t=this._regions[e];this._remove(e,t)},"removeRegions":function(){n.each(this._regions,function(e,t){this._remove(t,e)},this)},"closeRegions":function(){n.each(this._regions,function(e){e.close()},this)},"close":function(){this.removeRegions(),e.Controller.prototype.close.apply(this,arguments)},"_store":function(e,t){this._regions[e]=t,this._setLength()},"_remove":function(e,t){t.close(),delete this._regions[e],this._setLength(),this.triggerMethod("region:remove",e,t)
},"_setLength":function(){this.length=n.size(this._regions)}}),i=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return n.each(i,function(e){t.prototype[e]=function(){var t=n.values(this._regions),i=[t].concat(n.toArray(arguments));return n[e].apply(n,i)}}),t}(s),s.TemplateCache=function(e){this.templateId=e},n.extend(s.TemplateCache,{"templateCaches":{},"get":function(e){var t=this.templateCaches[e];
return t||(t=new s.TemplateCache(e),this.templateCaches[e]=t),t.load()},"clear":function(){var e,t=a.call(arguments),n=t.length;if(n>0)for(e=0;n>e;e++)delete this.templateCaches[t[e]];else this.templateCaches={}}}),n.extend(s.TemplateCache.prototype,{"load":function(){if(this.compiledTemplate)return this.compiledTemplate;var e=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(e),this.compiledTemplate},"loadTemplate":function(e){var t=s.$(e).html();return t&&0!==t.length||i("Could not find template: '"+e+"'","NoTemplateError"),t
},"compileTemplate":function(e){return n.template(e)}}),s.Renderer={"render":function(e,t){e||i("Cannot render the template since it's false, null or undefined.","TemplateNotFoundError");var n;return(n="function"==typeof e?e:s.TemplateCache.get(e))(t)}},s.View=t.View.extend({"constructor":function(e){n.bindAll(this,"render"),this.options=n.extend({},n.result(this,"options"),n.isFunction(e)?e.call(this):e),this.events=this.normalizeUIKeys(n.result(this,"events")),t.View.prototype.constructor.apply(this,arguments),s.MonitorDOMRefresh(this),this.listenTo(this,"show",this.onShowCalled)
},"triggerMethod":s.triggerMethod,"normalizeMethods":s.normalizeMethods,"getTemplate":function(){return s.getOption(this,"template")},"mixinTemplateHelpers":function(e){e=e||{};var t=s.getOption(this,"templateHelpers");return n.isFunction(t)&&(t=t.call(this)),n.extend(e,t)},"normalizeUIKeys":function(e){var t=this;if("undefined"!=typeof e)return n.each(n.keys(e),function(i){var s=/@ui.[a-zA-Z_$0-9]*/g;i.match(s)&&(e[i.replace(s,function(e){return n.result(t,"ui")[e.slice(4)]})]=e[i],delete e[i])}),e
},"configureTriggers":function(){if(this.triggers){var e={},t=this.normalizeUIKeys(n.result(this,"triggers"));return n.each(t,function(t,i){var s=n.isObject(t),a=s?t.event:t;e[i]=function(e){if(e){var n=e.preventDefault,i=e.stopPropagation,r=s?t.preventDefault:n,o=s?t.stopPropagation:i;r&&n&&n.apply(e),o&&i&&i.apply(e)}var l={"view":this,"model":this.model,"collection":this.collection};this.triggerMethod(a,l)}},this),e}},"delegateEvents":function(e){this._delegateDOMEvents(e),s.bindEntityEvents(this,this.model,s.getOption(this,"modelEvents")),s.bindEntityEvents(this,this.collection,s.getOption(this,"collectionEvents"))
},"_delegateDOMEvents":function(e){e=e||this.events,n.isFunction(e)&&(e=e.call(this));var i={},s=this.configureTriggers();n.extend(i,e,s),t.View.prototype.delegateEvents.call(this,i)},"undelegateEvents":function(){var e=Array.prototype.slice.call(arguments);t.View.prototype.undelegateEvents.apply(this,e),s.unbindEntityEvents(this,this.model,s.getOption(this,"modelEvents")),s.unbindEntityEvents(this,this.collection,s.getOption(this,"collectionEvents"))},"onShowCalled":function(){},"close":function(){if(!this.isClosed){var e=this.triggerMethod("before:close");
e!==!1&&(this.isClosed=!0,this.triggerMethod("close"),this.unbindUIElements(),this.remove())}},"bindUIElements":function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var e=n.result(this,"_uiBindings");this.ui={},n.each(n.keys(e),function(t){var n=e[t];this.ui[t]=this.$(n)},this)}},"unbindUIElements":function(){this.ui&&this._uiBindings&&(n.each(this.ui,function(e,t){delete this.ui[t]},this),this.ui=this._uiBindings,delete this._uiBindings)}}),s.ItemView=s.View.extend({"constructor":function(){s.View.prototype.constructor.apply(this,arguments)
},"serializeData":function(){var e={};return this.model?e=this.model.toJSON():this.collection&&(e={"items":this.collection.toJSON()}),e},"render":function(){this.isClosed=!1,this.triggerMethod("before:render",this),this.triggerMethod("item:before:render",this);var e=this.serializeData();e=this.mixinTemplateHelpers(e);var t=this.getTemplate(),n=s.Renderer.render(t,e);return this.$el.html(n),this.bindUIElements(),this.triggerMethod("render",this),this.triggerMethod("item:rendered",this),this},"close":function(){this.isClosed||(this.triggerMethod("item:before:close"),s.View.prototype.close.apply(this,arguments),this.triggerMethod("item:closed"))
}}),s.CollectionView=s.View.extend({"itemViewEventPrefix":"itemview","constructor":function(){this._initChildViewStorage(),s.View.prototype.constructor.apply(this,arguments),this._initialEvents(),this.initRenderBuffer()},"initRenderBuffer":function(){this.elBuffer=document.createDocumentFragment(),this._bufferedChildren=[]},"startBuffering":function(){this.initRenderBuffer(),this.isBuffering=!0},"endBuffering":function(){this.isBuffering=!1,this.appendBuffer(this,this.elBuffer),this._triggerShowBufferedChildren(),this.initRenderBuffer()
},"_triggerShowBufferedChildren":function(){this._isShown&&(n.each(this._bufferedChildren,function(e){s.triggerMethod.call(e,"show")}),this._bufferedChildren=[])},"_initialEvents":function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView),this.listenTo(this.collection,"remove",this.removeItemView),this.listenTo(this.collection,"reset",this.render))},"addChildView":function(e){this.closeEmptyView();var t=this.getItemView(e),n=this.collection.indexOf(e);this.addItemView(e,t,n)
},"onShowCalled":function(){this.children.each(function(e){s.triggerMethod.call(e,"show")})},"triggerBeforeRender":function(){this.triggerMethod("before:render",this),this.triggerMethod("collection:before:render",this)},"triggerRendered":function(){this.triggerMethod("render",this),this.triggerMethod("collection:rendered",this)},"render":function(){return this.isClosed=!1,this.triggerBeforeRender(),this._renderChildren(),this.triggerRendered(),this},"_renderChildren":function(){this.startBuffering(),this.closeEmptyView(),this.closeChildren(),this.isEmpty(this.collection)?this.showEmptyView():this.showCollection(),this.endBuffering()
},"showCollection":function(){var e;this.collection.each(function(t,n){e=this.getItemView(t),this.addItemView(t,e,n)},this)},"showEmptyView":function(){var e=this.getEmptyView();if(e&&!this._showingEmptyView){this._showingEmptyView=!0;var n=new t.Model;this.addItemView(n,e,0)}},"closeEmptyView":function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},"getEmptyView":function(){return s.getOption(this,"emptyView")},"getItemView":function(){var e=s.getOption(this,"itemView");
return e||i("An `itemView` must be specified","NoItemViewError"),e},"addItemView":function(e,t,i){var a=s.getOption(this,"itemViewOptions");n.isFunction(a)&&(a=a.call(this,e,i));var r=this.buildItemView(e,t,a);return this.addChildViewEventForwarding(r),this.triggerMethod("before:item:added",r),this.children.add(r),this.renderItemView(r,i),this._isShown&&!this.isBuffering&&s.triggerMethod.call(r,"show"),this.triggerMethod("after:item:added",r),r},"addChildViewEventForwarding":function(e){var t=s.getOption(this,"itemViewEventPrefix");
this.listenTo(e,"all",function(){var i=a.call(arguments),r=i[0],o=this.normalizeMethods(this.getItemEvents());i[0]=t+":"+r,i.splice(1,0,e),"undefined"!=typeof o&&n.isFunction(o[r])&&o[r].apply(this,i),s.triggerMethod.apply(this,i)},this)},"getItemEvents":function(){return n.isFunction(this.itemEvents)?this.itemEvents.call(this):this.itemEvents},"renderItemView":function(e,t){e.render(),this.appendHtml(this,e,t)},"buildItemView":function(e,t,i){var s=n.extend({"model":e},i);return new t(s)},"removeItemView":function(e){var t=this.children.findByModel(e);
this.removeChildView(t),this.checkEmpty()},"removeChildView":function(e){e&&(this.stopListening(e),e.close?e.close():e.remove&&e.remove(),this.children.remove(e)),this.triggerMethod("item:removed",e)},"isEmpty":function(){return!this.collection||0===this.collection.length},"checkEmpty":function(){this.isEmpty(this.collection)&&this.showEmptyView()},"appendBuffer":function(e,t){e.$el.append(t)},"appendHtml":function(e,t){e.isBuffering?(e.elBuffer.appendChild(t.el),e._bufferedChildren.push(t)):e.$el.append(t.el)
},"_initChildViewStorage":function(){this.children=new t.ChildViewContainer},"close":function(){this.isClosed||(this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),s.View.prototype.close.apply(this,arguments))},"closeChildren":function(){this.children.each(function(e){this.removeChildView(e)},this),this.checkEmpty()}}),s.CompositeView=s.CollectionView.extend({"constructor":function(){s.CollectionView.prototype.constructor.apply(this,arguments)
},"_initialEvents":function(){this.once("render",function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView),this.listenTo(this.collection,"remove",this.removeItemView),this.listenTo(this.collection,"reset",this._renderChildren))})},"getItemView":function(){var e=s.getOption(this,"itemView")||this.constructor;return e||i("An `itemView` must be specified","NoItemViewError"),e},"serializeData":function(){var e={};return this.model&&(e=this.model.toJSON()),e},"render":function(){this.isRendered=!0,this.isClosed=!1,this.resetItemViewContainer(),this.triggerBeforeRender();
var e=this.renderModel();return this.$el.html(e),this.bindUIElements(),this.triggerMethod("composite:model:rendered"),this._renderChildren(),this.triggerMethod("composite:rendered"),this.triggerRendered(),this},"_renderChildren":function(){this.isRendered&&(this.triggerMethod("composite:collection:before:render"),s.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},"renderModel":function(){var e={};e=this.serializeData(),e=this.mixinTemplateHelpers(e);
var t=this.getTemplate();return s.Renderer.render(t,e)},"appendBuffer":function(e,t){var n=this.getItemViewContainer(e);n.append(t)},"appendHtml":function(e,t){if(e.isBuffering)e.elBuffer.appendChild(t.el),e._bufferedChildren.push(t);else{var n=this.getItemViewContainer(e);n.append(t.el)}},"getItemViewContainer":function(e){if("$itemViewContainer"in e)return e.$itemViewContainer;var t,a=s.getOption(e,"itemViewContainer");if(a){var r=n.isFunction(a)?a.call(this):a;t=e.$(r),t.length<=0&&i("The specified `itemViewContainer` was not found: "+e.itemViewContainer,"ItemViewContainerMissingError")
}else t=e.$el;return e.$itemViewContainer=t,t},"resetItemViewContainer":function(){this.$itemViewContainer&&delete this.$itemViewContainer}}),s.Layout=s.ItemView.extend({"regionType":s.Region,"constructor":function(e){e=e||{},this._firstRender=!0,this._initializeRegions(e),s.ItemView.prototype.constructor.call(this,e)},"render":function(){return this.isClosed&&this._initializeRegions(),this._firstRender?this._firstRender=!1:this.isClosed||this._reInitializeRegions(),s.ItemView.prototype.render.apply(this,arguments)
},"close":function(){this.isClosed||(this.regionManager.close(),s.ItemView.prototype.close.apply(this,arguments))},"addRegion":function(e,t){var n={};return n[e]=t,this._buildRegions(n)[e]},"addRegions":function(e){return this.regions=n.extend({},this.regions,e),this._buildRegions(e)},"removeRegion":function(e){return delete this.regions[e],this.regionManager.removeRegion(e)},"_buildRegions":function(e){var t=this,n={"regionType":s.getOption(this,"regionType"),"parentEl":function(){return t.$el}};
return this.regionManager.addRegions(e,n)},"_initializeRegions":function(e){var t;this._initRegionManager(),t=n.isFunction(this.regions)?this.regions(e):this.regions||{},this.addRegions(t)},"_reInitializeRegions":function(){this.regionManager.closeRegions(),this.regionManager.each(function(e){e.reset()})},"_initRegionManager":function(){this.regionManager=new s.RegionManager,this.listenTo(this.regionManager,"region:add",function(e,t){this[e]=t,this.trigger("region:add",e,t)}),this.listenTo(this.regionManager,"region:remove",function(e,t){delete this[e],this.trigger("region:remove",e,t)
})}}),s.AppRouter=t.Router.extend({"constructor":function(e){t.Router.prototype.constructor.apply(this,arguments),this.options=e||{};var n=s.getOption(this,"appRoutes"),i=this._getController();this.processAppRoutes(i,n)},"appRoute":function(e,t){var n=this._getController();this._addAppRoute(n,e,t)},"processAppRoutes":function(e,t){if(t){var i=n.keys(t).reverse();n.each(i,function(n){this._addAppRoute(e,n,t[n])},this)}},"_getController":function(){return s.getOption(this,"controller")},"_addAppRoute":function(e,t,s){var a=e[s];
a||i("Method '"+s+"' was not found on the controller"),this.route(t,s,n.bind(a,e))}}),s.Application=function(e){this._initRegionManager(),this._initCallbacks=new s.Callbacks,this.vent=new t.Wreqr.EventAggregator,this.commands=new t.Wreqr.Commands,this.reqres=new t.Wreqr.RequestResponse,this.submodules={},n.extend(this,e),this.triggerMethod=s.triggerMethod},n.extend(s.Application.prototype,t.Events,{"execute":function(){this.commands.execute.apply(this.commands,arguments)},"request":function(){return this.reqres.request.apply(this.reqres,arguments)
},"addInitializer":function(e){this._initCallbacks.add(e)},"start":function(e){this.triggerMethod("initialize:before",e),this._initCallbacks.run(e,this),this.triggerMethod("initialize:after",e),this.triggerMethod("start",e)},"addRegions":function(e){return this._regionManager.addRegions(e)},"closeRegions":function(){this._regionManager.closeRegions()},"removeRegion":function(e){this._regionManager.removeRegion(e)},"getRegion":function(e){return this._regionManager.get(e)},"module":function(e,t){var n=s.Module.getClass(t),i=a.call(arguments);
return i.unshift(this),n.create.apply(n,i)},"_initRegionManager":function(){this._regionManager=new s.RegionManager,this.listenTo(this._regionManager,"region:add",function(e,t){this[e]=t}),this.listenTo(this._regionManager,"region:remove",function(e){delete this[e]})}}),s.Application.extend=s.extend,s.Module=function(e,t,i){this.moduleName=e,this.options=n.extend({},this.options,i),this.initialize=i.initialize||this.initialize,this.submodules={},this._setupInitializersAndFinalizers(),this.app=t,this.startWithParent=!0,this.triggerMethod=s.triggerMethod,n.isFunction(this.initialize)&&this.initialize(this.options,e,t)
},s.Module.extend=s.extend,n.extend(s.Module.prototype,t.Events,{"initialize":function(){},"addInitializer":function(e){this._initializerCallbacks.add(e)},"addFinalizer":function(e){this._finalizerCallbacks.add(e)},"start":function(e){this._isInitialized||(n.each(this.submodules,function(t){t.startWithParent&&t.start(e)}),this.triggerMethod("before:start",e),this._initializerCallbacks.run(e,this),this._isInitialized=!0,this.triggerMethod("start",e))},"stop":function(){this._isInitialized&&(this._isInitialized=!1,s.triggerMethod.call(this,"before:stop"),n.each(this.submodules,function(e){e.stop()
}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),s.triggerMethod.call(this,"stop"))},"addDefinition":function(e,t){this._runModuleDefinition(e,t)},"_runModuleDefinition":function(e,i){if(e){var a=n.flatten([this,this.app,t,s,s.$,n,i]);e.apply(this,a)}},"_setupInitializersAndFinalizers":function(){this._initializerCallbacks=new s.Callbacks,this._finalizerCallbacks=new s.Callbacks}}),n.extend(s.Module,{"create":function(e,t,i){var s=e,r=a.call(arguments);
r.splice(0,3),t=t.split(".");var o=t.length,l=[];return l[o-1]=i,n.each(t,function(t,n){var a=s;s=this._getModule(a,t,e,i),this._addModuleDefinition(a,s,l[n],r)},this),s},"_getModule":function(e,t,i,s){var a=n.extend({},s),r=this.getClass(s),o=e[t];return o||(o=new r(t,i,a),e[t]=o,e.submodules[t]=o),o},"getClass":function(e){var t=s.Module;return e?e.prototype instanceof t?e:e.moduleClass||t:t},"_addModuleDefinition":function(e,t,i,a){var r,o;!n.isFunction(i)||i.prototype instanceof s.Module?n.isObject(i)?(r=i.define,o=n.isUndefined(i.startWithParent)?!0:i.startWithParent):o=!0:(r=i,o=!0),r&&t.addDefinition(r,a),t.startWithParent=t.startWithParent&&o,t.startWithParent&&!t.startWithParentIsConfigured&&(t.startWithParentIsConfigured=!0,e.addInitializer(function(e){t.startWithParent&&t.start(e)
}))}}),s}(this,t,e);return t.Marionette}),+function(e){function t(){var e=document.createElement("bootstrap"),t={"WebkitTransition":"webkitTransitionEnd","MozTransition":"transitionend","OTransition":"oTransitionEnd otransitionend","transition":"transitionend"};for(var n in t)if(void 0!==e.style[n])return{"end":t[n]}}e.fn.emulateTransitionEnd=function(t){var n=!1,i=this;e(this).one(e.support.transition.end,function(){n=!0});var s=function(){n||e(i).trigger(e.support.transition.end)};return setTimeout(s,t),this
},e(function(){e.support.transition=t()})}(window.jQuery),define("transition",function(){}),+function(e){function t(){e(i).remove(),e(s).each(function(t){var i=n(e(this));i.hasClass("open")&&(i.trigger(t=e.Event("hide.bs.dropdown")),t.isDefaultPrevented()||i.removeClass("open").trigger("hidden.bs.dropdown"))})}function n(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&e(n);return i&&i.length?i:t.parent()}var i=".dropdown-backdrop",s="[data-toggle=dropdown]",a=function(t){e(t).on("click.bs.dropdown",this.toggle)
};a.prototype.toggle=function(i){var s=e(this);if(!s.is(".disabled, :disabled")){var a=n(s),r=a.hasClass("open");if(t(),!r){if("ontouchstart"in document.documentElement&&!a.closest(".navbar-nav").length&&e('<div class="dropdown-backdrop"/>').insertAfter(e(this)).on("click",t),a.trigger(i=e.Event("show.bs.dropdown")),i.isDefaultPrevented())return;a.toggleClass("open").trigger("shown.bs.dropdown"),s.focus()}return!1}},a.prototype.keydown=function(t){if(/(38|40|27)/.test(t.keyCode)){var i=e(this);if(t.preventDefault(),t.stopPropagation(),!i.is(".disabled, :disabled")){var a=n(i),r=a.hasClass("open");
if(!r||r&&27==t.keyCode)return 27==t.which&&a.find(s).focus(),i.click();var o=e("[role=menu] li:not(.divider):visible a",a);if(o.length){var l=o.index(o.filter(":focus"));38==t.keyCode&&l>0&&l--,40==t.keyCode&&l<o.length-1&&l++,~l||(l=0),o.eq(l).focus()}}}};var r=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var n=e(this),i=n.data("dropdown");i||n.data("dropdown",i=new a(this)),"string"==typeof t&&i[t].call(n)})},e.fn.dropdown.Constructor=a,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=r,this
},e(document).on("click.bs.dropdown.data-api",t).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",s,a.prototype.toggle).on("keydown.bs.dropdown.data-api",s+", [role=menu]",a.prototype.keydown)}(window.jQuery),define("dropdown",function(){}),+function(e){var t=function(e,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",e,t)};t.DEFAULTS={"animation":!0,"placement":"top","selector":!1,"template":'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',"trigger":"hover focus","title":"","delay":0,"html":!1,"container":!1},t.prototype.init=function(t,n,i){this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(i);
for(var s=this.options.trigger.split(" "),a=s.length;a--;){var r=s[a];if("click"==r)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=r){var o="hover"==r?"mouseenter":"focus",l="hover"==r?"mouseleave":"blur";this.$element.on(o+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{"trigger":"manual","selector":""}):this.fixTitle()
},t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={"show":t.delay,"hide":t.delay}),t},t.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,i){n[e]!=i&&(t[e]=i)}),t},t.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);
return clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show()},t.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()
},t.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(t),t.isDefaultPrevented())return;var n=this.tip();this.setContent(),this.options.animation&&n.addClass("fade");var i="function"==typeof this.options.placement?this.options.placement.call(this,n[0],this.$element[0]):this.options.placement,s=/\s?auto?\s?/i,a=s.test(i);a&&(i=i.replace(s,"")||"top"),n.detach().css({"top":0,"left":0,"display":"block"}).addClass(i),this.options.container?n.appendTo(this.options.container):n.insertAfter(this.$element);
var r=this.getPosition(),o=n[0].offsetWidth,l=n[0].offsetHeight;if(a){var c=this.$element.parent(),d=i,u=document.documentElement.scrollTop||document.body.scrollTop,h="body"==this.options.container?window.innerWidth:c.outerWidth(),p="body"==this.options.container?window.innerHeight:c.outerHeight(),f="body"==this.options.container?0:c.offset().left;i="bottom"==i&&r.top+r.height+l-u>p?"top":"top"==i&&r.top-u-l<0?"bottom":"right"==i&&r.right+o>h?"left":"left"==i&&r.left-o<f?"right":i,n.removeClass(d).addClass(i)
}var m=this.getCalculatedOffset(i,r,o,l);this.applyPlacement(m,i),this.$element.trigger("shown.bs."+this.type)}},t.prototype.applyPlacement=function(e,t){var n,i=this.tip(),s=i[0].offsetWidth,a=i[0].offsetHeight,r=parseInt(i.css("margin-top"),10),o=parseInt(i.css("margin-left"),10);isNaN(r)&&(r=0),isNaN(o)&&(o=0),e.top=e.top+r,e.left=e.left+o,i.offset(e).addClass("in");var l=i[0].offsetWidth,c=i[0].offsetHeight;if("top"==t&&c!=a&&(n=!0,e.top=e.top+a-c),/bottom|top/.test(t)){var d=0;e.left<0&&(d=-2*e.left,e.left=0,i.offset(e),l=i[0].offsetWidth,c=i[0].offsetHeight),this.replaceArrow(d-s+l,l,"left")
}else this.replaceArrow(c-a,c,"top");n&&i.offset(e)},t.prototype.replaceArrow=function(e,t,n){this.arrow().css(n,e?50*(1-e/t)+"%":"")},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},t.prototype.hide=function(){function t(){"in"!=n.hoverState&&i.detach()}var n=this,i=this.tip(),s=e.Event("hide.bs."+this.type);return this.$element.trigger(s),s.isDefaultPrevented()?void 0:(i.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?i.one(e.support.transition.end,t).emulateTransitionEnd(150):t(),this.$element.trigger("hidden.bs."+this.type),this)
},t.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},t.prototype.hasContent=function(){return this.getTitle()},t.prototype.getPosition=function(){var t=this.$element[0];return e.extend({},"function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():{"width":t.offsetWidth,"height":t.offsetHeight},this.$element.offset())},t.prototype.getCalculatedOffset=function(e,t,n,i){return"bottom"==e?{"top":t.top+t.height,"left":t.left+t.width/2-n/2}:"top"==e?{"top":t.top-i,"left":t.left+t.width/2-n/2}:"left"==e?{"top":t.top+t.height/2-i/2,"left":t.left-n}:{"top":t.top+t.height/2-i/2,"left":t.left+t.width}
},t.prototype.getTitle=function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)},t.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},t.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},t.prototype.enable=function(){this.enabled=!0
},t.prototype.disable=function(){this.enabled=!1},t.prototype.toggleEnabled=function(){this.enabled=!this.enabled},t.prototype.toggle=function(t){var n=t?e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;n.tip().hasClass("in")?n.leave(n):n.enter(n)},t.prototype.destroy=function(){this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var n=e.fn.tooltip;e.fn.tooltip=function(n){return this.each(function(){var i=e(this),s=i.data("bs.tooltip"),a="object"==typeof n&&n;
s||i.data("bs.tooltip",s=new t(this,a)),"string"==typeof n&&s[n]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(window.jQuery),define("tooltip",function(){}),+function(e){var t=function(n,i){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,i)};t.DEFAULTS={"loadingText":"loading..."},t.prototype.setState=function(e){var t="disabled",n=this.$element,i=n.is("input")?"val":"html",s=n.data();e+="Text",s.resetText||n.data("resetText",n[i]()),n[i](s[e]||this.options[e]),setTimeout(function(){"loadingText"==e?n.addClass(t).attr(t,t):n.removeClass(t).removeAttr(t)
},0)},t.prototype.toggle=function(){var e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var t=this.$element.find("input").prop("checked",!this.$element.hasClass("active")).trigger("change");"radio"===t.prop("type")&&e.find(".active").removeClass("active")}this.$element.toggleClass("active")};var n=e.fn.button;e.fn.button=function(n){return this.each(function(){var i=e(this),s=i.data("bs.button"),a="object"==typeof n&&n;s||i.data("bs.button",s=new t(this,a)),"toggle"==n?s.toggle():n&&s.setState(n)
})},e.fn.button.Constructor=t,e.fn.button.noConflict=function(){return e.fn.button=n,this},e(document).on("click.bs.button.data-api","[data-toggle^=button]",function(t){var n=e(t.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle"),t.preventDefault()})}(window.jQuery),define("button",function(){}),+function(e){var t=function(t,n){this.options=n,this.$element=e(t),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.load(this.options.remote)};t.DEFAULTS={"backdrop":!0,"keyboard":!0,"show":!0},t.prototype.toggle=function(e){return this[this.isShown?"hide":"show"](e)
},t.prototype.show=function(t){var n=this,i=e.Event("show.bs.modal",{"relatedTarget":t});this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.backdrop(function(){var i=e.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(document.body),n.$element.show(),i&&n.$element[0].offsetWidth,n.$element.addClass("in").attr("aria-hidden",!1),n.enforceFocus();
var s=e.Event("shown.bs.modal",{"relatedTarget":t});i?n.$element.find(".modal-dialog").one(e.support.transition.end,function(){n.$element.focus().trigger(s)}).emulateTransitionEnd(300):n.$element.focus().trigger(s)}))},t.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one(e.support.transition.end,e.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())
},t.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.focus()},this))},t.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},t.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.removeBackdrop(),e.$element.trigger("hidden.bs.modal")
})},t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},t.prototype.backdrop=function(t){var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&n;if(this.$backdrop=e('<div class="modal-backdrop '+n+'" />').appendTo(document.body),this.$element.on("click.dismiss.modal",e.proxy(function(e){e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))
},this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;i?this.$backdrop.one(e.support.transition.end,t).emulateTransitionEnd(150):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,t).emulateTransitionEnd(150):t()):t&&t()};var n=e.fn.modal;e.fn.modal=function(n,i){return this.each(function(){var s=e(this),a=s.data("bs.modal"),r=e.extend({},t.DEFAULTS,s.data(),"object"==typeof n&&n);
a||s.data("bs.modal",a=new t(this,r)),"string"==typeof n?a[n](i):r.show&&a.show(i)})},e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=n,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),i=n.attr("href"),s=e(n.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),a=s.data("modal")?"toggle":e.extend({"remote":!/#/.test(i)&&i},s.data(),n.data());t.preventDefault(),s.modal(a,this).one("hide",function(){n.is(":visible")&&n.focus()
})}),e(document).on("show.bs.modal",".modal",function(){e(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){e(document.body).removeClass("modal-open")})}(window.jQuery),define("modal",function(){}),define("marionette",["underscore","marionette-lib","transition","dropdown","tooltip","button","modal"],function(e,t){var n={"constructor":function(){this.wrapAfterRender(),t.View.prototype.constructor.apply(this,arguments)},"wrapAfterRender":function(){e.isArray(this.onlyAfterRender)&&e.each(this.onlyAfterRender,function(t){this[t]=e.wrap(this[t],e.bind(function(n){var i=e.toArray(arguments).slice(1);
return this._isRendered&&!this.isClosed?n.apply(this,i):void(this.isClosed||this.listenToOnce(this,"render",e.bind(function(){this[t].apply(this,i)},this)))},this))},this)},"render":function(){this.isClosed=!1,this.triggerMethod("before:render",this),this.triggerMethod("item:before:render",this);var e=this.serializeData();e=this.mixinTemplateHelpers(e);var n=this.getTemplate(),i=t.Renderer.render(n,e);return this.$el.html(i),this.bindUIElements(),this.bindToModel(),this._isRendered=!0,this.triggerMethod("render",this),this.triggerMethod("item:rendered",this),this
}},i={"rebase":function(t){return this.stopListening(this.collection),this.collection=t,this._initialEvents(),e.isFunction(this._renderChildren)?this._renderChildren():this.render(),this}},s={"render":function(){this.isRendered=!0,this.isClosed=!1,this.resetItemViewContainer(),this.triggerBeforeRender();var e=this.renderModel();return this.$el.html(e),this.bindUIElements(),this.bindToModel(),this.triggerMethod("composite:model:rendered"),this._renderChildren(),this.triggerMethod("composite:rendered"),this.triggerRendered(),this
}},a={"append":function(n,i,s){var a=n.isClosed||e.isUndefined(n.$el),r=n!==this.currentView;return r&&this.close(),n.render(),(r||a)&&(i||(i=this.getEl(this.el)),s?i.prepend(n.el):i.append(n.el)),this.attachView(n),t.triggerMethod.call(this,"show",n),t.triggerMethod.call(n,"show"),this},"prepend":function(e,t){return this.append(e,t,!0)}};return e.extend(t.ItemView.prototype,n),e.extend(t.CollectionView.prototype,i),e.extend(t.CompositeView.prototype,n,s),e.extend(t.Region.prototype,a),t}),function(){function e(){return s?{"name":"Internet Explorer","msie":i,"version":n.match(/(msie |rv:)(\d+(\.\d+)?)/i)[2]}:h?{"name":"Opera","opera":i,"version":n.match(g)?n.match(g)[1]:n.match(/opr\/(\d+(\.\d+)?)/i)[1]}:a?{"name":"Chrome","webkit":i,"chrome":i,"version":n.match(/(?:chrome|crios)\/(\d+(\.\d+)?)/i)[1]}:r?{"name":"PhantomJS","webkit":i,"phantom":i,"version":n.match(/phantomjs\/(\d+(\.\d+)+)/i)[1]}:d?{"name":"TouchPad","webkit":i,"touchpad":i,"version":n.match(/touchpad\/(\d+(\.\d+)?)/i)[1]}:l||c?(t={"name":l?"iPhone":"iPad","webkit":i,"mobile":i,"ios":i,"iphone":l,"ipad":c},g.test(n)&&(t.version=n.match(g)[1]),t):u?{"name":"Android","webkit":i,"android":i,"mobile":i,"version":(n.match(g)||n.match(v))[1]}:o?{"name":"Safari","webkit":i,"safari":i,"version":n.match(g)[1]}:f?(t={"name":"Gecko","gecko":i,"mozilla":i,"version":n.match(v)[1]},p&&(t.name="Firefox",t.firefox=i),t):m?{"name":"SeaMonkey","seamonkey":i,"version":n.match(/seamonkey\/(\d+(\.\d+)?)/i)[1]}:{}
}var t,n=navigator.userAgent,i=!0,s=/(msie|trident)/i.test(n),a=/chrome|crios/i.test(n),r=/phantom/i.test(n),o=/safari/i.test(n)&&!a&&!r,l=/iphone/i.test(n),c=/ipad/i.test(n),d=/touchpad/i.test(n),u=/android/i.test(n),h=/opera/i.test(n)||/opr/i.test(n),p=/firefox/i.test(n),f=/gecko\//i.test(n),m=/seamonkey\//i.test(n),g=/version\/(\d+(\.\d+)?)/i,v=/firefox\/(\d+(\.\d+)?)/i;this.bowser=e(),bowser.msie&&bowser.version>=8||bowser.chrome&&bowser.version>=10||bowser.firefox&&bowser.version>=4||bowser.safari&&bowser.version>=5||bowser.opera&&bowser.version>=10?bowser.a=i:bowser.msie&&bowser.version<8||bowser.chrome&&bowser.version<10||bowser.firefox&&bowser.version<4||bowser.safari&&bowser.version<5||bowser.opera&&bowser.version<10?bowser.c=i:bowser.x=i
}.call(this),function(e){function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function n(e){return"undefined"==typeof e}var i={},s=e.TraceKit,a=[].slice,r="unknown";i.noConflict=function(){return e.TraceKit=s,i},i.wrap=function(e){function t(){try{return e.apply(this,arguments)}catch(t){throw i.report(t),t}}return t},i.report=function(){function n(e){l(),h.push(e)}function s(e){for(var t=h.length-1;t>=0;--t)h[t]===e&&h.splice(t,1)}function r(e,n){var s=null;if(!n||i.collectWindowErrors){for(var r in h)if(t(h,r))try{h[r].apply(null,[e].concat(a.call(arguments,2)))
}catch(o){s=o}if(s)throw s}}function o(e,t,n){var s=null;if(f)i.computeStackTrace.augmentStackTraceWithInitialElement(f,t,n,e),s=f,f=null,p=null;else{var a={"url":t,"line":n};a.func=i.computeStackTrace.guessFunctionName(a.url,a.line),a.context=i.computeStackTrace.gatherContext(a.url,a.line),s={"mode":"onerror","message":e,"url":document.location.href,"stack":[a]}}return r(s,"from window.onerror"),d?d.apply(this,arguments):!1}function l(){u!==!0&&(d=e.onerror,e.onerror=o,u=!0)}function c(t){var n=a.call(arguments,1);
if(f){if(p===t)return;var s=f;f=null,p=null,r.apply(null,[s,null].concat(n))}var o=i.computeStackTrace(t);throw f=o,p=t,e.setTimeout(function(){p===t&&(f=null,p=null,r.apply(null,[o,null].concat(n)))},o.incomplete?2e3:0),t}var d,u,h=[],p=null,f=null;return c.subscribe=n,c.unsubscribe=s,c}(),i.computeStackTrace=function(){function s(t){if(!i.remoteFetching)return"";try{var n=function(){try{return new e.XMLHttpRequest}catch(t){return new e.ActiveXObject("Microsoft.XMLHTTP")}},s=n();return s.open("GET",t,!1),s.send(""),s.responseText
}catch(a){return""}}function a(e){if(!t(k,e)){var n="";-1!==e.indexOf(document.domain)&&(n=s(e)),k[e]=n?n.split("\n"):[]}return k[e]}function o(e,t){var i,s=/function ([^(]*)\(([^)]*)\)/,o=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,l="",c=10,d=a(e);if(!d.length)return r;for(var u=0;c>u;++u)if(l=d[t-u]+l,!n(l)){if(i=o.exec(l))return i[1];if(i=s.exec(l))return i[1]}return r}function l(e,t){var s=a(e);if(!s.length)return null;var r=[],o=Math.floor(i.linesOfContext/2),l=o+i.linesOfContext%2,c=Math.max(0,t-o-1),d=Math.min(s.length,t+l-1);
t-=1;for(var u=c;d>u;++u)n(s[u])||r.push(s[u]);return r.length>0?r:null}function c(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,"\\$&")}function d(e){return c(e).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")}function u(e,t){for(var n,i,s=0,r=t.length;r>s;++s)if((n=a(t[s])).length&&(n=n.join("\n"),i=e.exec(n)))return{"url":t[s],"line":n.substring(0,i.index).split("\n").length,"column":i.index-n.lastIndexOf("\n",i.index)-1};
return null}function h(e,t,n){var i,s=a(t),r=new RegExp("\\b"+c(e)+"\\b");return n-=1,s&&s.length>n&&(i=r.exec(s[n]))?i.index:null}function p(t){for(var n,i,s,a,r=[e.location.href],o=document.getElementsByTagName("script"),l=""+t,h=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,p=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,f=0;f<o.length;++f){var m=o[f];m.src&&r.push(m.src)}if(s=h.exec(l)){var g=s[1]?"\\s+"+s[1]:"",v=s[2].split(",").join("\\s*,\\s*");
n=c(s[3]).replace(/;$/,";?"),i=new RegExp("function"+g+"\\s*\\(\\s*"+v+"\\s*\\)\\s*{\\s*"+n+"\\s*}")}else i=new RegExp(c(l).replace(/\s+/g,"\\s+"));if(a=u(i,r))return a;if(s=p.exec(l)){var y=s[1];if(n=d(s[2]),i=new RegExp("on"+y+"=[\\'\"]\\s*"+n+"\\s*[\\'\"]","i"),a=u(i,r[0]))return a;if(i=new RegExp(n),a=u(i,r))return a}return null}function f(e){if(!e.stack)return null;for(var t,n,i=/^\s*at (?:((?:\[object object\])?\S+(?: \[as \S+\])?) )?\(?((?:file|http|https):.*?):(\d+)(?::(\d+))?\)?\s*$/i,s=/^\s*(\S*)(?:\((.*?)\))?@((?:file|http|https).*?):(\d+)(?::(\d+))?\s*$/i,a=e.stack.split("\n"),c=[],d=/^(.*) is undefined$/.exec(e.message),u=0,p=a.length;p>u;++u){if(t=s.exec(a[u]))n={"url":t[3],"func":t[1]||r,"args":t[2]?t[2].split(","):"","line":+t[4],"column":t[5]?+t[5]:null};
else{if(!(t=i.exec(a[u])))continue;n={"url":t[2],"func":t[1]||r,"line":+t[3],"column":t[4]?+t[4]:null}}!n.func&&n.line&&(n.func=o(n.url,n.line)),n.line&&(n.context=l(n.url,n.line)),c.push(n)}return c[0]&&c[0].line&&!c[0].column&&d&&(c[0].column=h(d[1],c[0].url,c[0].line)),c.length?{"mode":"stack","name":e.name,"message":e.message,"url":document.location.href,"stack":c}:null}function m(e){for(var t,n=e.stacktrace,i=/ line (\d+), column (\d+) in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\) in (.*):\s*$/i,s=n.split("\n"),a=[],r=0,c=s.length;c>r;r+=2)if(t=i.exec(s[r])){var d={"line":+t[1],"column":+t[2],"func":t[3]||t[4],"args":t[5]?t[5].split(","):[],"url":t[6]};
if(!d.func&&d.line&&(d.func=o(d.url,d.line)),d.line)try{d.context=l(d.url,d.line)}catch(u){}d.context||(d.context=[s[r+1]]),a.push(d)}return a.length?{"mode":"stacktrace","name":e.name,"message":e.message,"url":document.location.href,"stack":a}:null}function g(n){var i=n.message.split("\n");if(i.length<4)return null;var s,r,c,h,p=/^\s*Line (\d+) of linked script ((?:file|http|https)\S+)(?:: in function (\S+))?\s*$/i,f=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|http|https)\S+)(?:: in function (\S+))?\s*$/i,m=/^\s*Line (\d+) of function script\s*$/i,g=[],v=document.getElementsByTagName("script"),y=[];
for(r in v)t(v,r)&&!v[r].src&&y.push(v[r]);for(r=2,c=i.length;c>r;r+=2){var b=null;if(s=p.exec(i[r]))b={"url":s[2],"func":s[3],"line":+s[1]};else if(s=f.exec(i[r])){b={"url":s[3],"func":s[4]};var w=+s[1],x=y[s[2]-1];if(x&&(h=a(b.url))){h=h.join("\n");var k=h.indexOf(x.innerText);k>=0&&(b.line=w+h.substring(0,k).split("\n").length)}}else if(s=m.exec(i[r])){var S=e.location.href.replace(/#.*$/,""),C=s[1],T=new RegExp(d(i[r+1]));h=u(T,[S]),b={"url":S,"line":h?h.line:C,"func":""}}if(b){b.func||(b.func=o(b.url,b.line));
var A=l(b.url,b.line),I=A?A[Math.floor(A.length/2)]:null;b.context=A&&I.replace(/^\s*/,"")===i[r+1].replace(/^\s*/,"")?A:[i[r+1]],g.push(b)}}return g.length?{"mode":"multiline","name":n.name,"message":i[0],"url":document.location.href,"stack":g}:null}function v(e,t,n,i){var s={"url":t,"line":n};if(s.url&&s.line){e.incomplete=!1,s.func||(s.func=o(s.url,s.line)),s.context||(s.context=l(s.url,s.line));var a=/ '([^']+)' /.exec(i);if(a&&(s.column=h(a[1],s.url,s.line)),e.stack.length>0&&e.stack[0].url===s.url){if(e.stack[0].line===s.line)return!1;
if(!e.stack[0].line&&e.stack[0].func===s.func)return e.stack[0].line=s.line,e.stack[0].context=s.context,!1}return e.stack.unshift(s),e.partial=!0,!0}return e.incomplete=!0,!1}function y(e,t){for(var n,s,a,l=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,c=[],d={},u=!1,f=y.caller;f&&!u;f=f.caller)if(f!==b&&f!==i.report){if(s={"url":null,"func":r,"line":null,"column":null},f.name?s.func=f.name:(n=l.exec(f.toString()))&&(s.func=n[1]),a=p(f)){s.url=a.url,s.line=a.line,s.func===r&&(s.func=o(s.url,s.line));
var m=/ '([^']+)' /.exec(e.message||e.description);m&&(s.column=h(m[1],a.url,a.line))}d[""+f]?u=!0:d[""+f]=!0,c.push(s)}t&&c.splice(0,t);var g={"mode":"callers","name":e.name,"message":e.message,"url":document.location.href,"stack":c};return v(g,e.sourceURL||e.fileName,e.line||e.lineNumber,e.message||e.description),g}function b(e,t){var n=null;t=null==t?0:+t;try{if(n=m(e))return n}catch(i){if(x)throw i}try{if(n=f(e))return n}catch(i){if(x)throw i}try{if(n=g(e))return n}catch(i){if(x)throw i}try{if(n=y(e,t+1))return n
}catch(i){if(x)throw i}return{"mode":"failed"}}function w(e){e=(null==e?0:+e)+1;try{throw new Error}catch(t){return b(t,e+1)}}var x=!1,k={};return b.augmentStackTraceWithInitialElement=v,b.guessFunctionName=o,b.gatherContext=l,b.ofCaller=w,b}(),function(){var t=function(t){var n=e[t];e[t]=function(){var e=a.call(arguments),t=e[0];return"function"==typeof t&&(e[0]=i.wrap(t)),n.apply?n.apply(this,e):n(e[0],e[1])}};t("setTimeout"),t("setInterval")}(),i.remoteFetching||(i.remoteFetching=!0),i.collectWindowErrors||(i.collectWindowErrors=!0),(!i.linesOfContext||i.linesOfContext<1)&&(i.linesOfContext=11),e.TraceKit=i
}(window);var timestamp=function(){return(new Date).getTime()},extend=function(e){return each(slice.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},_has=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},escape=encodeURIComponent;Object.keys=Object.keys||function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t};var isObject=function(e){return e instanceof Object},array=[],slice=array.slice,isArray=function(e){return e instanceof Array},isValidKeyValue=function(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e
},forEach=function(e,t){Array.prototype.forEach.call(Object.keys(e),function(n){t(n,e[n])})},each=function(e,t,n){if(null!=e){var i=Array.prototype.forEach;if(i&&e.forEach===i)e.forEach(t,n);else if(e.length===+e.length){for(var s=0,a=e.length;a>s;s++)if(t.call(n,e[s],s,e)===breaker)return}else for(var r=_.keys(e),s=0,a=r.length;a>s;s++)if(t.call(n,e[r[s]],r[s],e)===breaker)return}},serialize=function e(t,n,i,s){var a=isArray(n);forEach(n,function(n,r){s&&(n=i?s:s+"["+(a?"":n)+"]"),!s&&a?t.add(r.name,r.value):(i?isArray(r):isObject(r))?e(t,r,i,n):t.add(n,r)
})},param=function(e,t){var n=[];return n.add=function(e,t){this.push(escape(e)+"="+escape(t))},serialize(n,e,t),n.join("&")},generator=function(){var e=function(){return Math.floor(65536*Math.random()).toString(16)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},eventSplitter=/\s+/,eventsApi=function(e,t,n,i){if(!n)return!0;if("object"==typeof n){for(var s in n)e[t].apply(e,[s,n[s]].concat(i));return!1}if(eventSplitter.test(n)){for(var a=n.split(eventSplitter),r=0,o=a.length;o>r;r++)e[t].apply(e,[a[r]].concat(i));
return!1}return!0},triggerEvents=function(e,t){var n,i=-1,s=e.length,a=t[0],r=t[1],o=t[2];switch(t.length){case 0:for(;++i<s;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<s;)(n=e[i]).callback.call(n.ctx,a);return;case 2:for(;++i<s;)(n=e[i]).callback.call(n.ctx,a,r);return;case 3:for(;++i<s;)(n=e[i]).callback.call(n.ctx,a,r,o);return;default:for(;++i<s;)(n=e[i]).callback.apply(n.ctx,t)}},_once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}};(function(){return this.Lockr={},Lockr.set=function(e,t){localStorage.setItem(e,t)
},Lockr.hset=function(e,t){localStorage.setItem(e,JSON.stringify(t))},Lockr.get=function(e){var t=localStorage.getItem(e);return null==t?void 0:t.match(/[\{\}\:\[\]]/)?JSON.parse(t):t.match(/^\d+(?:\.\d+$)/)?parseFloat(t):t.match(/^\d+$/)?parseInt(t):t},Lockr.getAll=function(){var e=Object.keys(localStorage);return e.map(function(e){return Lockr.get(e)})},Lockr.flush=function(){localStorage.clear()},Lockr}).call(this);var md5cycle=function(e,t){var n=e[0],i=e[1],s=e[2],a=e[3];n=ff(n,i,s,a,t[0],7,-680876936),a=ff(a,n,i,s,t[1],12,-389564586),s=ff(s,a,n,i,t[2],17,606105819),i=ff(i,s,a,n,t[3],22,-1044525330),n=ff(n,i,s,a,t[4],7,-176418897),a=ff(a,n,i,s,t[5],12,1200080426),s=ff(s,a,n,i,t[6],17,-1473231341),i=ff(i,s,a,n,t[7],22,-45705983),n=ff(n,i,s,a,t[8],7,1770035416),a=ff(a,n,i,s,t[9],12,-1958414417),s=ff(s,a,n,i,t[10],17,-42063),i=ff(i,s,a,n,t[11],22,-1990404162),n=ff(n,i,s,a,t[12],7,1804603682),a=ff(a,n,i,s,t[13],12,-40341101),s=ff(s,a,n,i,t[14],17,-1502002290),i=ff(i,s,a,n,t[15],22,1236535329),n=gg(n,i,s,a,t[1],5,-165796510),a=gg(a,n,i,s,t[6],9,-1069501632),s=gg(s,a,n,i,t[11],14,643717713),i=gg(i,s,a,n,t[0],20,-373897302),n=gg(n,i,s,a,t[5],5,-701558691),a=gg(a,n,i,s,t[10],9,38016083),s=gg(s,a,n,i,t[15],14,-660478335),i=gg(i,s,a,n,t[4],20,-405537848),n=gg(n,i,s,a,t[9],5,568446438),a=gg(a,n,i,s,t[14],9,-1019803690),s=gg(s,a,n,i,t[3],14,-187363961),i=gg(i,s,a,n,t[8],20,1163531501),n=gg(n,i,s,a,t[13],5,-1444681467),a=gg(a,n,i,s,t[2],9,-51403784),s=gg(s,a,n,i,t[7],14,1735328473),i=gg(i,s,a,n,t[12],20,-1926607734),n=hh(n,i,s,a,t[5],4,-378558),a=hh(a,n,i,s,t[8],11,-2022574463),s=hh(s,a,n,i,t[11],16,1839030562),i=hh(i,s,a,n,t[14],23,-35309556),n=hh(n,i,s,a,t[1],4,-1530992060),a=hh(a,n,i,s,t[4],11,1272893353),s=hh(s,a,n,i,t[7],16,-155497632),i=hh(i,s,a,n,t[10],23,-1094730640),n=hh(n,i,s,a,t[13],4,681279174),a=hh(a,n,i,s,t[0],11,-358537222),s=hh(s,a,n,i,t[3],16,-722521979),i=hh(i,s,a,n,t[6],23,76029189),n=hh(n,i,s,a,t[9],4,-640364487),a=hh(a,n,i,s,t[12],11,-421815835),s=hh(s,a,n,i,t[15],16,530742520),i=hh(i,s,a,n,t[2],23,-995338651),n=ii(n,i,s,a,t[0],6,-198630844),a=ii(a,n,i,s,t[7],10,1126891415),s=ii(s,a,n,i,t[14],15,-1416354905),i=ii(i,s,a,n,t[5],21,-57434055),n=ii(n,i,s,a,t[12],6,1700485571),a=ii(a,n,i,s,t[3],10,-1894986606),s=ii(s,a,n,i,t[10],15,-1051523),i=ii(i,s,a,n,t[1],21,-2054922799),n=ii(n,i,s,a,t[8],6,1873313359),a=ii(a,n,i,s,t[15],10,-30611744),s=ii(s,a,n,i,t[6],15,-1560198380),i=ii(i,s,a,n,t[13],21,1309151649),n=ii(n,i,s,a,t[4],6,-145523070),a=ii(a,n,i,s,t[11],10,-1120210379),s=ii(s,a,n,i,t[2],15,718787259),i=ii(i,s,a,n,t[9],21,-343485551),e[0]=add32(n,e[0]),e[1]=add32(i,e[1]),e[2]=add32(s,e[2]),e[3]=add32(a,e[3])
},cmn=function(e,t,n,i,s,a){return t=add32(add32(t,e),add32(i,a)),add32(t<<s|t>>>32-s,n)},ff=function(e,t,n,i,s,a,r){return cmn(t&n|~t&i,e,t,s,a,r)},gg=function(e,t,n,i,s,a,r){return cmn(t&i|n&~i,e,t,s,a,r)},hh=function(e,t,n,i,s,a,r){return cmn(t^n^i,e,t,s,a,r)},ii=function(e,t,n,i,s,a,r){return cmn(n^(t|~i),e,t,s,a,r)},md51=function(e){var t,n=e.length,i=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)md5cycle(i,md5blk(e.substring(t-64,t)));e=e.substring(t-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
for(t=0;t<e.length;t++)s[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(s[t>>2]|=128<<(t%4<<3),t>55)for(md5cycle(i,s),t=0;16>t;t++)s[t]=0;return s[14]=8*n,md5cycle(i,s),i},md5blk=function(e){var t,n=[];for(t=0;64>t;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n},hex_chr="0123456789abcdef".split(""),rhex=function(e){for(var t="",n=0;4>n;n++)t+=hex_chr[e>>8*n+4&15]+hex_chr[e>>8*n&15];return t},hex=function(e){for(var t=0;t<e.length;t++)e[t]=rhex(e[t]);
return e.join("")},md5=function(e){return hex(md51(e))},add32=function(e,t){return e+t&4294967295};if("5d41402abc4b2a76b9719d911017c592"!=md5("hello"))var add32=function(e,t){var n=(65535&e)+(65535&t),i=(e>>16)+(t>>16)+(n>>16);return i<<16|65535&n};window.Bugsense=function(){var e={"apiKey":null,"message":null,"uid":null,"userIdentifier":null,"appver":null,"appname":null,"osver":null,"url":"https://www.bugsense.com/api/errors","context":window},t=function(t){e=extend(e,t)},n=function(){var e=window.navigator.userAgent;
return{"client":{"name":"bugsense-js","version":"2.0.1"},"request":{"user_id":Bugsense.config.userIdentifier||"unknown"},"exception":{"message":null,"where":null,"klass":null,"backtrace":null,"breadcrumbs":null},"application_environment":{"phone":window.navigator.platform,"appver":Bugsense.config.appver||"unknown","appname":Bugsense.config.appname||"unknown","osver":"undefined"!=typeof window.device?window.device.version:e.substr(e.indexOf("; ")+2,e.length).replace(")",";").split(";")[0]||"unknown","user_agent":bowser.name+" "+bowser.version,"cordova":"undefined"!=typeof window.device?window.device.cordova:"unknown","device_name":"undefined"!=typeof window.device?window.device.name:"unknown","log_data":{}}}
};return{"config":e,"initAndStartSession":t,"generateFixture":n}}(),Bugsense.Crashes=function(){Bugsense.breadcrumbs=[],Bugsense.extraData={},Bugsense.addExtraData=function(e,t){isValidKeyValue(e)&&isValidKeyValue(t)&&(Bugsense.extraData[e]=t)},Bugsense.removeExtraData=function(e){delete Bugsense.extraData[e]},Bugsense.clearExtraData=function(){Bugsense.extraData={}},Bugsense.leaveBreadcrumb=function(e){isValidKeyValue(e)&&(Bugsense.breadcrumbs.length+1==16&&(Bugsense.breadcrumbs=Bugsense.breacrumbs.slice(1)),Bugsense.breadcrumbs.push(e))
},Bugsense.clearBreadcrumbs=function(){Bugsense.breadcrumbs=[]}}(),Bugsense.channel=function(){var e=/\s+/,t=function(t,n,i,s){if(!i)return!0;if("object"==typeof i){for(var a in i)t[n].apply(t,[a,i[a]].concat(s));return!1}if(e.test(i)){for(var r=i.split(e),o=0,l=r.length;l>o;o++)t[n].apply(t,[r[o]].concat(s));return!1}return!0},n=function(e,t){var n,i=-1,s=e.length,a=t[0],r=t[1],o=t[2];switch(t.length){case 0:for(;++i<s;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<s;)(n=e[i]).callback.call(n.ctx,a);
return;case 2:for(;++i<s;)(n=e[i]).callback.call(n.ctx,a,r);return;case 3:for(;++i<s;)(n=e[i]).callback.call(n.ctx,a,r,o);return;default:for(;++i<s;)(n=e[i]).callback.apply(n.ctx,t)}},i=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}};Bugsense.on=function(e,n,i){if(!t(this,"on",e,[n,i])||!n)return this;this._events||(this._events={});var s=this._events[e]||(this._events[e]=[]);return s.push({"callback":n,"context":i,"ctx":i||this}),this},Bugsense.once=function(e,n,s){if(!t(this,"once",e,[n,s])||!n)return this;
var a=this,r=i(function(){a.off(e,r),n.apply(this,arguments)});return r._callback=n,this.on(e,r,s)},Bugsense.off=function(e,n,i){var s,a,r,o,l,c,d,u;if(!this._events||!t(this,"off",e,[n,i]))return this;if(!e&&!n&&!i)return this._events=void 0,this;for(o=e?[e]:_.keys(this._events),l=0,c=o.length;c>l;l++)if(e=o[l],r=this._events[e]){if(this._events[e]=s=[],n||i)for(d=0,u=r.length;u>d;d++)a=r[d],(n&&n!==a.callback&&n!==a.callback._callback||i&&i!==a.context)&&s.push(a);s.length||delete this._events[e]
}return this},Bugsense.trigger=function(e){if(!this._events)return this;var i=slice.call(arguments,1);if(!t(this,"trigger",e,i))return this;var s=this._events[e],a=this._events.all;return s&&n(s,i),a&&n(a,arguments),this}}(),Bugsense.Cache=function(){var e={"_queue":[],"cacheReport":function(e){this._queue.push(e),this.update()},"retrieve":function(){var e=Lockr.get("bugsense_cache");this._queue=e||[],this._queue.length&&this.sendCachedReport()},"update":function(){Lockr.hset("bugsense_cache",this._queue)
},"sendCachedReport":function(){if(!this._queue.length)return!1;var e=this;each(this._queue,function(t,n){Bugsense.Network.send(t,"POST"),e._queue.shift(n)}),this.update()}};return e}(),Bugsense.Errors=function(){var e=function(e,t,n,i,s){var a=e+t+n+i+s;return md5(a)},t=function(e){var t={"message":e.exception||e.message,"url":e.url||e.lineNumber||e.sourceURL,"line":e.line};return t.custom_data=e.custom_data||{},bowser.chrome&&(t.stack=e.stack),t},n=function(e){var t="string"!=typeof e?e.message:e,n={},i=s(e),a=e.url||e.lineNumber||e.sourceUrl,r=e.line,o=a&&r?TraceKit.computeStackTrace.guessFunctionName(a,r):"unknown";
return n=extend(Bugsense.generateFixture(),{"exception":{"message":t,"where":[a,r].join(":"),"klass":o,"backtrace":i&&i.length?i:[],"breadcrumbs":Bugsense.breadcrumbs}}),n.application_environment.log_data=extend(Bugsense.extraData,e.custom_data),n},i=function(e){var t=TraceKit.computeStackTrace(e).stack;return t.map(function(e){return e.func+"@"+e.url+":"+e.line})},s=function(e){return e.stack||i(e)};return Bugsense.notify=function(e,i){var s={};return i&&(e.custom_data=i),s=t(e),Bugsense.Network.send(n(s),"POST"),!0
},window.onerror=function(e,t,n,i,s){return Bugsense.config.apiKey?(Bugsense.trigger("crash"),Bugsense.notify({"exception":e,"url":t,"line":n,"column":i,"errorobj":s})):("warn"in console?console.warn("You need a BugSense API key to use bugsense.js."):console.log("You need a BugSense API key to use bugsense.js"),!1)},{"parse":t,"computeErrorHash":e,"generateExceptionData":n}}(),Bugsense.Sessions=function(){var e=function(){var e=function(){return Math.floor(65536*Math.random()).toString(16)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()
},t={"generateUid":function(){var t=Lockr.get("bugsense:uid")||e();return Lockr.set("bugsense:uid",t),t}};return t}(),Bugsense.Network=function(){var e={"getPostURL":function(){return Bugsense.config.url+"?cacheBuster="+timestamp()},"send":function(e,t){function n(){return i&&4!=i.readyState?void 0:i&&200!=i.status?!1:void("console"in window&&console.log("logged 1 error to Bugsense, status: "+i.responseText))}var i=new XMLHttpRequest;i.open(t,this.getPostURL(),!0),i.setRequestHeader("X-BugSense-Api-Key",Bugsense.config.apiKey),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
var s=this;i.onerror=function(){s.cacheReport(e)},i.onreadystatechange=n,i.send(param({"data":JSON.stringify(e)}))}};return e}(),define("bugsense",function(e){return function(){var t;return t||e.Bugsense}}(this)),define("plex/base/adapters/LocalizerAdapter",[],function(){var e,t={"get":function(){return e},"register":function(t){e=t}};return t}),define("plex/base/adapters/BugsenseAdapter",[],function(){var e;return{"register":function(t){e=t},"get":function(){return e}}}),define("plex/base/utils/Capabilities",["underscore"],function(){return{"hasConsole":function(){return!!(window.console&&window.console.log&&window.console.log.call)
}(),"hasWebSocket":function(){return!!window.WebSocket}(),"hasReplaceState":function(){return!(!window.history||!window.history.replaceState)}(),"hasFileUpload":function(){return!!(window.File&&window.FileList&&window.FileReader)}(),"hasMediaSource":function(){return!(!window.MediaSource&&!window.WebKitMediaSource)}(),"hasCreateObjectUrl":function(){return!!(window.URL&&window.URL.createObjectURL&&window.URL.revokeObjectURL)}(),"hasBlob":function(){try{return!!new Blob}catch(e){return!1}}(),"hasFullscreen":function(){var e=document.createElement("div");
return!!(e.requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen)}(),"hasCanvas":function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))}(),"hasTouchScreen":function(){return!!("ontouchstart"in window)}(),"isChromeApp":function(){return!(!window.chrome||!window.chrome.storage)}()}}),define("plex/base/utils/Logger",["underscore","plex/base/utils/BaseClass","plex/base/utils/Capabilities","plex/base/mixins/EventMixin"],function(e,t,n,i){var s=t.extend({"mixins":i,"log":function(t){e.isString(t)&&(t={"message":t});
var i=t.type||"log",s=t.message||"";if(this.trigger("add",{"type":i,"message":s}),n.hasConsole){var a=t.logFn,r=t.color;a=a in console?console[a]:console.log,r?(s="%c"+s,r="color: "+r+";",a.call(console,s,r)):a.call(console,s)}},"success":function(e){this.log({"type":"success","message":e,"color":"green"})},"info":function(e){this.log({"type":"info","message":e,"logFn":"info","color":"blue"})},"warn":function(e){this.log({"type":"warning","message":e,"logFn":"warn","color":"#ff6600"})},"error":function(e){this.log({"type":"error","message":e,"logFn":"error","color":"red"})
},"group":function(e,t){console.group&&console.group(e);for(var n=0,i=t.length;i>n;n++)this.log(t[n]);console.groupEnd&&console.groupEnd()}});return new s}),define("x2js",function(e){return function(){var t;return t||e.X2JS}}(this)),define("plex/base/utils/Parser",["underscore","x2js"],function(e,t){function n(t,n){e.isArray(n)?e.each(n,t):t(n)}var i=new t(!1,"",!0);return{"parseXML":function(e){return i.xml_str2json(e)},"parseEncodedString":function(e,t){function i(t){if(e.hasOwnProperty(t)){var n=e[t];
e[t]=null==n?"":decodeURIComponent(n)}}e&&n(i,t)},"parseInteger":function(e,t){function i(t){if(e.hasOwnProperty(t)){var n=e[t];e[t]=null==n?0:parseInt(n,10)}}e&&n(i,t)},"parseBoolean":function(e,t){function i(t){if(e.hasOwnProperty(t)){var n=e[t];e[t]=n===!0||"true"==n||"1"==n}}e&&n(i,t)},"parseArray":function(t,i){function s(n){if(t.hasOwnProperty(n)){var i=t[n];e.isArray(i)||(t[n]=[i])}else t[n]=[]}t&&n(s,i)}}}),define("plex/base/models/BaseCollection",["underscore","backbone","jquery","plex/base/utils/Parser"],function(e,t,n,i){var s=t.Collection.extend({"constructor":function(n,i){i=e.extend({},i),this.server=i.server,this.section=i.section,this.channel=i.channel,this.device=i.device,this.parent=i.parent,this.skipCache=i.skipCache,i.url&&(this.url=i.url),i.path&&(this.path=i.path),(null!=i.pageStart||null!=i.pageSize)&&(this.pageStart=i.pageStart||0,this.pageSize=i.pageSize||0),t.Collection.prototype.constructor.apply(this,arguments)
},"populate":function(){return this.populatePromise||(this.populatePromise=this.fetch.apply(this,arguments)),this.populatePromise},"fetch":function(){var i=t.Collection.prototype.fetch.apply(this,arguments),s=n.Deferred();return i.done(e.bind(function(e){s.resolveWith(this,[this,e])},this)),i.fail(e.bind(function(e){s.rejectWith(this,[this,e])},this)),this.populatePromise=s.promise(),this.populatePromise},"syncUrl":function(){var t="";if(this.url&&(t=e.result(this,"url")),this.path){var i=e.result(this,"path");
t+="/"!==t.substr(t.length-1)?"/":"",t+="/"===i[0]?i.substr(1):i}if(null!=this.pageStart||null!=this.pageSize){var s=this.pageStart||0,a=this.pageSize||0,r={};r["X-Plex-Container-Start"]=s,r["X-Plex-Container-Size"]=a;var o=t.indexOf("?"),l=t.length;t+=o>-1?l-1>o?"&":"":"?",t+=n.param(r,!0)}return t},"convert":function(t,n){var s=e.isObject(t)?t:i.parseXML(t);if(!n)return s;var a=s[n];return a?(e.isArray(a)||(a=[a]),a):[]},"clone":function(e){var t={"server":this.server,"section":this.section,"parent":this.parent,"url":this.url};
return e||(e=this.models),new this.constructor(e,t)},"release":function(t,n){this.each(function(i){t&&e.contains(t,i)||i.release(n)}),this.populatePromise=null,this.reset(t)}});return s}),define("plex/base/models/BaseModel",["underscore","backbone","jquery","plex/base/utils/Dispatcher","plex/base/utils/Parser"],function(e,t,n,i,s){var a=t.Model.extend({"_cache":{},"_cacheReferences":0,"constructor":function(n,i){n=e.extend({},n),i=e.extend({},i),this.server=this.findOption(i,"server"),this.section=this.findOption(i,"section"),this.channel=this.findOption(i,"channel"),this.device=this.findOption(i,"device"),this.parent=this.findOption(i,"parent");
var s=this.findOption(i,"skipCache");if(s)return void t.Model.prototype.constructor.apply(this,arguments);var a=this.cacheKey?this.cacheKey(n):null;if(a&&this._cache[a]){var r=this._cache[a];return i.parse&&(n=r.parse.call(r,n)),/\/children(\?.*)?$/.test(i.url)||r.set(n),r.server=this.server||r.server,r.section=this.section||r.section,r.channel=this.channel||r.channel,r.device=this.device||r.device,r.parent=this.parent||r.parent,r._cacheReferences++,r}var o=this.findOption(i,"onlyIfCached");return o?{}:(t.Model.prototype.constructor.apply(this,arguments),void this.cache(a))
},"findOption":function(e,t){return e[t]||e.collection&&e.collection[t]},"cache":function(e){this._cacheKey=e,this._cacheKey&&(this._cacheReferences||(this._cacheReferences=1,this.listenTo(i,"purge:cache",this.purge)),this._cache[this._cacheKey]=this)},"release":function(e){this._cacheKey&&(e||(e={}),e.force?this._cacheReferences=0:this._cacheReferences--)},"purge":function(){return this._cacheReferences>0||!this._cacheKey||!this._cache[this._cacheKey]?!1:(this.stopListening(),delete this._cache[this._cacheKey],!0)
},"clone":function(){var e={"server":this.server,"section":this.section,"channel":this.channel,"parent":this.parent,"skipCache":!0};return new this.constructor(this.attributes,e)},"refreshCacheKey":function(){this._cacheKey&&this._cache[this._cacheKey]&&delete this._cache[this._cacheKey];var e=this.toJSON(),t=this.cacheKey?this.cacheKey(e):null;this.cache(t)},"convert":function(t){var n=e.isObject(t)?t:s.parseXML(t);return n},"parse":function(t){var n=this.convert(t);return this.whitelistedAttrs&&(n=e.pick(n,this.whitelistedAttrs)),n
},"populate":function(){return this.populatePromise||(this.populatePromise=this.fetch.apply(this,arguments)),this.populatePromise},"fetch":function(){var i=t.Model.prototype.fetch.apply(this,arguments),s=n.Deferred();return i.done(e.bind(function(e){s.resolveWith(this,[this,e])},this)),i.fail(e.bind(function(e){s.rejectWith(this,[this,e])},this)),this.populatePromise=s.promise(),this.populatePromise},"save":function(i,s,a){var r,o,l,c=this.attributes;null==i||"object"==typeof i?(r=i,a=s):(r={})[i]=s,a=e.extend({"validate":!0},a);
var d=this.getSaveParams(r,a);if(e.extend(d,a.data),r&&!a.wait){if(!this.set(r,a))return!1}else if(!this._validate(r,a))return!1;if(r&&a.wait&&(this.attributes=e.extend({},c,r)),e.isEmpty(d))return a.success&&a.success(this),n.Deferred().resolve(this);void 0===a.parse&&(a.parse=!0);var u=this,h=a.success;a.success=function(t){if(u.attributes=c,t){var n=u.parse(t,a);if(a.wait&&(n=e.extend(r||{},n)),e.isObject(n)&&!u.set(n,a))return!1;u.refreshCacheKey()}h&&h(u,t,a),u.trigger("sync",u,t,a)},t.wrapError(this,a),o=this.isNew()?"create":a.patch?"patch":"update","patch"===o&&(a.attrs=r);
var p=e.result(this,"url");return a.url=p+"?"+n.param(d,!0),a.data="",l=this.sync(o,this,a),r&&a.wait&&(this.attributes=c),l},"getSaveParams":function(e,t){return this.isNew()||t.forceSave?e||this.toJSON():this.changedAttributes(e)||{}},"getScopedKey":function(e){return this.cacheKey?this.cacheKey(this.attributes)+"!"+e:e}});return a.extend=function(){var e=t.Model.extend.apply(this,arguments);return e.prototype._cache={},e},a}),define("plex/base/utils/Browser",["underscore","plex/base/utils/BaseClass"],function(e,t){var n=/version\/(\d+(\.\d+)?)/i,i=/(?:chrome|crios)\/(\d+(\.\d+)?)/i,s=/firefox[ \/](\d+(\.\d+)?)/i,a=/(msie |rv:)(\d+(\.\d+)?)/i,r=t.extend({"browsers":[{"id":"wiiu","name":"Wii U","msie":!0,"regex":/wiiu/i,"versionRegex":n},{"id":"ie","name":"Internet Explorer","msie":!0,"regex":/(msie|trident)/i,"versionRegex":a,"versionMatchIndex":2},{"id":"chrome","name":"Chrome","webkit":!0,"regex":/(chrome|crios)/i,"versionRegex":i},{"id":"firefox","name":"Firefox","gecko":!0,"regex":/firefox/i,"versionRegex":s},{"id":"opera","name":"Opera","webkit":!0,"regex":/(opera|opr)/i,"versionRegex":n},{"id":"safari","name":"Safari","webkit":!0,"regex":/safari/i,"versionRegex":n}],"platforms":[{"id":"ios","name":"iOS","mobile":!0,"regex":/(iphone|ipad|ipod)/i},{"id":"android","name":"Android","mobile":!0,"regex":/android/i},{"id":"windowsphone","name":"Windows Phone","mobile":!0,"regex":/windows phone/i},{"id":"webos","name":"WebOS","mobile":!0,"regex":/webos/i},{"id":"blackberry","name":"Blackberry","mobile":!0,"regex":/blackberry/i},{"id":"linux","name":"Linux","context":"platform","regex":/linux/i},{"id":"osx","name":"OSX","context":"platform","regex":/mac/i},{"id":"windows","name":"Windows","context":"platform","regex":/win/i}],"constructor":function(){this.id="unknown",this.name="Unknown Browser",this.platform="Unknown Platform";
var e="",t="";null!=navigator&&(e=navigator.userAgent,t=navigator.platform),this.detect({"userAgent":e,"platform":t})},"detect":function(e){var t=this.runTests(this.browsers,e),n=this.runTests(this.platforms,e);t&&(this.id=t.id,this.name=t.name,this.version=this.getVersion(e.userAgent,t.versionRegex,t.versionMatchIndex||1),this.webkit=!!t.webkit,this.gecko=!!t.gecko,this.msie=!!t.msie),n&&(this.platform=n.name,this.mobile=!!n.mobile)},"runTests":function(e,t){for(var n=0,i=e.length;i>n;n++){var s=e[n],a=s.context||"userAgent";
if(s.regex.test(t[a]))return s}},"getVersion":function(e,t,n){var i=e.match(t);return i&&i.length>n&&i[n]||0}});return new r}),define("plex/base/adapters/StorageAdapter",[],function(){var e,t={"get":function(){return e},"register":function(t){e=t}};return t}),define("plex/base/models/StorageModel",["underscore","backbone","plex/base/adapters/StorageAdapter"],function(e,t,n){var i=t.Model.extend({"save":function(i,s,a){var r,o=this.attributes;if(null==i||"object"==typeof i?(r=i,a=s):(r={})[i]=s,a=e.extend({"validate":!0},a),r&&!a.wait){if(!this.set(r,a))return!1
}else if(!this._validate(r,a))return!1;r&&a.wait&&(this.attributes=e.extend({},o,r)),void 0===a.parse&&(a.parse=!0);var l=this,c=a.success;a.success=function(){l.attributes=o,c&&c(l,o,a),l.trigger("sync",l,o,a)},t.wrapError(this,a);var d=n.get(),u=d.set({"key":e.result(this,"storageKey"),"value":JSON.stringify(this.attributes)});return u.done(a.success).fail(a.error),r&&a.wait&&(this.attributes=o),u},"populate":function(e){return this.populatePromise||(this.populatePromise=this.fetch(e)),this.populatePromise
},"fetch":function(i){i=i?e.clone(i):{},void 0===i.parse&&(i.parse=!0);var s=this,a=i.success;i.success=function(e){return s.set(s.parse(e,i),i)?(a&&a(s,e,i),void s.trigger("sync",s,e,i)):!1},t.wrapError(this,i);var r=n.get(),o=r.get({"key":e.result(this,"storageKey")});return o.done(i.success).fail(i.error),this.populatePromise=o,o},"destroy":function(i){i=i?e.clone(i):{};var s=this,a=i.success,r=function(){s.trigger("destroy",s,s.collection,i)};i.success=function(e){i.wait&&r(),a&&a(s,e,i),s.trigger("sync",s,e,i)
},t.wrapError(this,i);var o=n.get(),l=o.remove({"key":e.result(this,"storageKey")});return l.done(i.success).fail(i.error),i.wait||r(),l},"parse":function(e){return JSON.parse(e)}});return i}),define("plex/base/models/SettingsModel",["plex/base/utils/Browser","plex/base/models/StorageModel"],function(e,t){var n=window.navigator.language||window.navigator.userLanguage||"en";n=n.split("-")[0];var i=t.extend({"storageKey":"settingsv2","plexPassSettings":["syncVideoQuality","syncAudioQuality","syncPictureQuality"],"defaults":{"language":n,"playThemeMusic":!1,"keyboardShortcuts":!0,"showUnwatchedIcons":!1,"debugLevel":0,"dashboardPriorityOnDeck":1,"dashboardPriorityRecentlyAdded":2,"dashboardPriorityChannels":3,"dashboardPriorityQueue":4,"dashboardPriorityRecommendations":5,"dashboardOnDeckEnabled":!0,"dashboardRecentlyAddedEnabled":!0,"dashboardChannelsEnabled":!0,"dashboardQueueEnabled":!0,"dashboardRecommendationsEnabled":!0,"sharedSearch":!0,"channelSearch":!0,"localQuality":9,"remoteQuality":7,"channelQuality":7,"dash":!0,"directPlay":!0,"directStream":!0,"autoResolution":!0,"preferAAC":"wiiu"===e.id,"allowAC3":!1,"subtitleSize":100,"audioBoost":100,"syncVideoQuality":"medium","syncAudioQuality":"medium","syncPictureQuality":"medium","sidebarOpen":!1,"videoPlayerVolume":100,"musicPlayerVolume":100,"announcementsLastReadTimestamp":0}});
return new i}),define("plex/base/models/AnnouncementModel",["underscore","plex/base/models/BaseModel","plex/base/models/SettingsModel"],function(e,t,n){var i=t.extend({"whitelistedAttrs":["promo","timestamp","link","thumb","title","description"],"initialize":function(){this.listenTo(n,"change:announcementsLastReadTimestamp",this.onTimestampChange),this.onTimestampChange()},"parse":function(t){return e.pick(t,this.whitelistedAttrs)},"onTimestampChange":function(){this.set("isUnread",this.get("timestamp")>n.get("announcementsLastReadTimestamp"))
}});return i}),define("plex/base/models/AnnouncementCollection",["underscore","plex/base/models/BaseCollection","plex/base/models/AnnouncementModel"],function(e,t,n){var i=t.extend({"model":n,"url":"https://plex.r.worldssl.net/announcements/announcements.json?cb="+(new Date).getTime(),"parse":function(e){return JSON.parse(e)}});return i}),define("plex/base/models/debug/DebugModel",["underscore","backbone","plex/base/utils/Browser"],function(e,t,n){var i=t.Model.extend({"initialize":function(){this.set("host",window.location.host),this.set("userAgent",window.navigator.userAgent),this.set("browser",n)
},"toJSON":function(){var n=this.parent.get("primaryServer"),i=this.parent.get("user"),s=i.get("features");return this.set("version",this.parent.get("version")),n&&(this.set("primaryServerUrl",n.url()),this.set("primaryServerAuthToken",!!n.get("accessToken")),this.set("primaryServerVersion",n.get("versionFull"))),this.set("username",i.get("username")),this.set("cloudUrl",i.server.get("connections")),this.set("cloudAccessToken",!!i.server.get("accessToken")),s&&this.set("userFeatures",e.keys(s).join(", ")),t.Model.prototype.toJSON.apply(this,arguments)
}});return new i}),define("plex/base/models/debug/LogModel",["backbone"],function(e){var t=e.Model.extend({"initialize":function(){this.set("time",new Date)}});return t}),define("plex/base/models/debug/LogCollection",["underscore","jquery","backbone","plex/base/utils/Logger","plex/base/models/SettingsModel","plex/base/models/debug/DebugModel","plex/base/models/debug/LogModel"],function(e,t,n,i,s,a,r){var o=/(auth_token=|accessToken=|X-Plex-Token=)(\"?\w+\"?)/g,l=/(email=)(\"?[^&]+\"?)/g,c=/(password=)([^&]+)/,d=/(address=|host=)(\"?[^&]+\"?)/g,u=function(e){return e=e.replace(o,"$1TOKEN"),e.replace(c,"$1PASSWORD")
},h=function(e){return e&&e.hasOwnProperty("X-Plex-Token")&&(e["X-Plex-Token"]="TOKEN"),e&&e.hasOwnProperty("Authorization")&&(e.Authorization="BASIC AUTHORIZATION"),e},p=function(e){return e?(e=e.replace(o,'$1"TOKEN"'),e=e.replace(l,'$1"EMAIL"'),e=e.replace(d,'$1"IP ADRRESS"')):void 0},f=n.Collection.extend({"model":r,"initialize":function(t,n){e.bindAll(this,"onAjaxComplete"),this.parent=n.parent,a.parent=n.parent,s.on("change:debugLevel",this.onDebugLevelChange,this),s.get("debugLevel")>0&&this.startListening()
},"startListening":function(){this.enabled||(i.on("add",this.onLogAdd,this),n.history.on("route",this.onRoute,this),t(document).on("ajaxComplete",this.onAjaxComplete),this.enabled=!0)},"stopListening":function(){i.off("add",this.onLogAdd,this),n.history.off("route",this.onRoute,this),t(document).off("ajaxComplete",this.onAjaxComplete),this.reset(),this.enabled=!1},"add":function(){this.length>200&&this.shift(),n.Collection.prototype.add.apply(this,arguments)},"toJSON":function(){var t=n.Collection.prototype.toJSON.apply(this,arguments);
return t.unshift(e.extend({"type":"info"},a.toJSON())),t},"toJSONString":function(){return JSON.stringify(this.toJSON(),null,2)},"onDebugLevelChange":function(e,t){0===t?this.stopListening():this.startListening()},"onLogAdd":function(e){this.add(e)},"onRoute":function(e,t,n){var i={"type":"navigation","route":t,"args":n,"fragment":window.location.hash};this.add(i)},"onAjaxComplete":function(t,n,i){var a={"type":"ajax","url":u(i.url),"status":n.status};e.isEmpty(i.headers)||(a.headers=h(i.headers)),e.isEmpty(i.data)||(a.params=i.data),200===n.status?2===s.get("debugLevel")?a.response=p(n.responseText):a.responseLength=n.responseText.length:(a.statusText=n.statusText,a.response=p(n.responseText)),this.add(a)
}});return f}),define("plex/base/adapters/DimensionsAdapter",[],function(){var e,t={"get":function(){return e},"register":function(t){e=t}};return t}),define("plex/base/mixins/ServerMixin",["underscore","plex/base/adapters/DimensionsAdapter","plex/base/utils/Parser"],function(e,t,n){var i={"idAttribute":"machineIdentifier","defaults":function(){return{"friendlyName":"Unknown","cloud":!1,"bundled":!1,"shared":!1,"synced":!1,"mixedContent":!1,"isCloudSync":!1,"protocolCapabilities":[],"transcoderVideoBitrates":[],"transcoderVideoQualities":[],"transcoderVideoResolutions":[]}
},"whitelistedAttrs":["machineIdentifier","name","friendlyName","sourceTitle","accessToken","superToken","version","createdAt","updatedAt","protocol","protocolCapabilities","platform","platformVersion","startState","serverClass","synced","sync","multiuser","allowMediaDeletion","transcoderActiveVideoSessions","transcoderAudio","transcoderVideo","transcoderVideoBitrates","transcoderVideoQualities","transcoderVideoResolutions","flashInstalled","silverlightInstalled","soundflowerInstalled","myPlex","myPlexMappingState","myPlexSigninState","myPlexSubscription","myPlexUsername"],"features":{"splitApart":"0.9.7.0","merge":"0.9.7.0","batchEdit":"0.9.7.0","search":"0.9.7.0","advancedFilters":"0.9.7.0","cleanBundles":"0.9.7.0","timelineState":"0.9.7.2","firstRunPref":"0.9.7.3","artworkUpload":"0.9.7.9","sync":"0.9.7.10","universalTranscoder":"0.9.7.17","universalMusicTranscoder":"0.9.8.3","syncNotifications":"0.9.7.23","sharedSettings":"0.9.7.23","specificMediaDeletion":"0.9.7.23","dash":"0.9.8.6","chunkedHTTP":"0.9.9.3","streamingMKV":"0.9.9.4","hubFilters":"0.9.9.2","desktopStreamingMKV":"0.9.9.6","sectionSettings":"0.9.9.6","playQueues":"0.9.9.6","cancelAllUpdates":"0.9.9.10"},"cacheKey":function(e){return e.machineIdentifier
},"url":function(e,t){e||(e=this.get("activeConnection")),t||(t={});var n=e.scheme||"http",i=e.address,s=e.port;this.useHostedHttps&&this.isLocalAddress(i)&&(n="https",i=e.address.replace(/\./g,"-")+".hub.plex.tv",s=32443);var a=n+"://"+i;return s&&(a+=":"+s),a+"/"},"useHostedHttps":function(){var e="https:"===window.location.protocol,t=/plex\.tv$/.test(window.location.hostname);return e&&t}(),"convert":function(t){var i=e.isObject(t)?t:n.parseXML(t);return n.parseInteger(i,["createdAt","updatedAt","transcoderActiveVideoSessions"]),n.parseBoolean(i,["synced","sync","multiuser","allowMediaDeletion","transcoderAudio","transcoderVideo","flashInstalled","silverlightInstalled","soundflowerInstalled","myPlex","myPlexSubscription"]),i&&"undefined"==typeof i.startState&&(i.startState=null),i
},"parse":function(t){var n=this.convert(t);if(!n||!n.machineIdentifier)return null;var i=(this.server&&this.server.get("cloud"),n.scheme),s=n.address,a=parseInt(n.port,10),r=n.localAddresses;n=e.pick(n,this.whitelistedAttrs),this.get("shared")&&!n.sourceTitle?delete n.friendlyName:n.sourceTitle?(n.shared=!0,n.friendlyName=n.sourceTitle):n.friendlyName||(n.friendlyName=n.name),n.fullVersion=n.version;var o=/(\d+\.){2,3}\d+/.exec(n.version);return o&&(n.version=o[0]),n.transcoderVideoBitrates&&(n.transcoderVideoBitrates=n.transcoderVideoBitrates.split(",").reverse()),n.transcoderVideoQualities&&(n.transcoderVideoQualities=n.transcoderVideoQualities.split(",").reverse()),n.transcoderVideoResolutions&&(n.transcoderVideoResolutions=n.transcoderVideoResolutions.split(",").reverse()),n.protocolCapabilities&&(n.protocolCapabilities=n.protocolCapabilities.split(",")),"secondary"===n.serverClass&&(n.synced=!0),"cloudsync"===n.platform&&(n.isCloudSync=!0),n.accessToken&&this.set("accessToken",n.accessToken),s&&a&&this.addConnection({"scheme":i,"address":s,"port":a,"accessToken":n.accessToken}),r&&(r=r.split(","),e.each(r,function(e){this.addConnection({"address":e,"port":32400,"accessToken":n.accessToken})
},this)),n},"resolveUrl":function(e,t){if(t||(t={}),/^\w+:\/\//.test(e))return e;var n=this.get("accessToken"),i=t.useLoopback?"http://127.0.0.1:32400/":this.url(t.connection,t);return e&&(i+="/"===e[0]?e.substr(1):e),t.appendToken&&n?(i+=i.indexOf("?")>0?"&":"?",i+="X-Plex-Token="+n):i},"getXHROptions":function(e){var t={};return t.url=this.resolveUrl(e),t.dataType="text",t.headers=this.getHeaders(),t},"getHeaders":function(){var n=t.get(),i=this.parent,s=i.get("user"),a=this.get("accessToken"),r=e.clone(n);
return a&&(r["X-Plex-Token"]=a),s&&s.get("username")&&(r["X-Plex-Username"]=s.get("username")),r},"isLocalAddress":function(e){return/^(localhost|10\.|192\.168\.|127\.0\.0\.)/.test(e)},"supports":function(e){var t=this.features[e];return this.isVersionOrNewer(t)},"isVersionOrNewer":function(e){var t=this.get("version");if(e&&t){e=e.split("."),t=t.split(".");for(var n=0,i=e.length;i>n;n++)if(n<t.length){var s=parseInt(e[n],10),a=parseInt(t[n],10);if(a>s)return!0;if(s>a)return!1}return!0}return!0}};
return i}),define("plex/base/utils/types/SubsetTypes",["underscore","plex/base/utils/BaseClass"],function(e,t){var n=t.extend({"types":[{"key":"all","title":"All"},{"key":"unwatched","title":"Unwatched"},{"key":"newest","title":"Recently Released"},{"key":"recentlyAdded","title":"Recently Added"},{"key":"recentlyViewed","title":"Recently Viewed"},{"key":"recentlyViewedShows","title":"Recently Viewed Shows"},{"key":"onDeck","title":"On Deck"},{"key":"folder","title":"By Folder"}],"initialize":function(){this.byKey=e.reduce(this.types,function(e,t){return e[t.key]=t,e
},{})},"getSubsetType":function(e){return this.byKey[e]}});return new n}),define("plex/base/models/library/section/SectionSubsetModel",["underscore","plex/base/utils/Parser","plex/base/models/BaseModel"],function(e,t,n){var i=n.extend({"idAttribute":"key","whitelistedAttrs":["key","title","secondary"],"whitelistedPrimarySubsets":["all","recentlyAdded","recentlyViewed","recentlyViewedShows","onDeck","newest","folder"],"convert":function(n){var i=e.isObject(n)?n:t.parseXML(n);return t.parseBoolean(i,"secondary"),i
},"parse":function(t){var n=this.convert(t);return n=e.pick(n,this.whitelistedAttrs),n.primary=!n.secondary&&e.contains(this.whitelistedPrimarySubsets,n.key),"all"===n.key&&(n.title="All"),n}});return i}),define("plex/base/models/library/section/SectionSubsetCollection",["underscore","plex/base/models/BaseCollection","plex/base/models/library/section/SectionSubsetModel"],function(e,t,n){var i=t.extend({"model":n,"url":function(){return e.result(this.section,"url")},"parse":function(e){return this.convert(e,"Directory")
},"filterPrimaries":function(){var e=this.filter(function(e){return e.get("primary")});return this.clone(e)}});return i}),define("plex/base/models/library/section/MediaTypeModel",["underscore","plex/base/models/BaseModel"],function(e,t){var n=t.extend({"defaults":{"selected":!1},"whitelistedAttrs":["id","typeString","title","element"],"parse":function(t){var n=e.pick(t,this.whitelistedAttrs);return n}});return n}),define("plex/base/models/library/section/MediaTypeCollection",["plex/base/models/BaseCollection","plex/base/models/library/section/MediaTypeModel"],function(e,t){var n=e.extend({"model":t});
return n}),define("plex/base/models/library/section/FilterOptionModel",["underscore","plex/base/utils/Parser","plex/base/models/BaseModel"],function(e,t,n){var i=n.extend({"idAttribute":"key","whitelistedAttrs":["key","type","title"],"convert":function(n){var i=e.isObject(n)?n:t.parseXML(n);return i},"parse":function(t){var n=this.convert(t);return n=e.pick(n,this.whitelistedAttrs)}});return i}),define("plex/base/models/library/section/FilterOptionCollection",["underscore","plex/base/models/BaseCollection","plex/base/models/library/section/FilterOptionModel"],function(e,t,n){var i=t.extend({"model":n,"url":function(){var t=e.result(this.section,"url"),n=t+"/"+this.parent.id;
return this.standalone||(n+="?"+this.getUrlParams()),n},"initialize":function(e,t){this.standalone=t.standalone},"getUrlParams":function(){var t={},n=[],i=this.section.get("currentType"),s=this.section.get("currentFilters");i&&(t.type=i.id),e.each(s,function(e){e.key!==this.parent.id&&e.values.length&&(t[e.key]=e.values.join(","))},this);for(var a in t)n.push("unviewedLeafCount"===a?a+">="+t[a]:a+"="+t[a]);return n.join("&")},"parse":function(e){return this.convert(e,"Directory")},"search":function(e){var t=this.filter(function(t){return t.get("title").toLowerCase().indexOf(e.toLowerCase())>-1
});return this.clone(t)}});return i}),define("plex/base/models/library/section/FilterModel",["underscore","plex/base/utils/Parser","plex/base/models/BaseModel","plex/base/models/library/section/FilterOptionCollection"],function(e,t,n,i){var s=n.extend({"idAttribute":"filter","whitelistedAttrs":["filter","filterType","key","title"],"initialize":function(e){e||(e={}),this.set("options",new i([],{"server":this.server,"section":this.section,"parent":this,"standalone":e.standalone}))},"convert":function(n){var i=e.isObject(n)?n:t.parseXML(n);
return i},"parse":function(t){var n=this.convert(t);return n=e.pick(n,this.whitelistedAttrs)}});return s}),define("plex/base/models/library/section/FilterCollection",["underscore","jquery","plex/base/models/BaseCollection","plex/base/models/library/section/FilterModel"],function(e,t,n,i){var s=n.extend({"model":i,"comparator":"filterType","url":function(){var n=e.result(this.section,"url")+"/filters",i=this.section.get("currentType"),s={"includeAdvanced":1};return i&&(s.type=i.id),n+"?"+t.param(s,!0)
},"parse":function(e){return this.convert(e,"Directory")}});return s}),define("plex/base/models/library/section/LinearFilterModel",["underscore","plex/base/utils/Parser","plex/base/models/BaseModel","plex/base/models/library/section/FilterOptionCollection"],function(e,t,n,i){var s=n.extend({"idAttribute":"key","whitelistedAttrs":["secondary","key","title"],"initialize":function(){this.set("options",new i([],{"server":this.server,"section":this.section,"parent":this}))},"convert":function(n){var i=e.isObject(n)?n:t.parseXML(n);
return t.parseBoolean(i,"secondary"),i},"parse":function(t){var n=this.convert(t);return n.title=n.title.replace("By ",""),n=e.pick(n,this.whitelistedAttrs)}});return s}),define("plex/base/models/library/section/LinearFilterCollection",["underscore","jquery","plex/base/models/BaseCollection","plex/base/models/library/section/LinearFilterModel"],function(e,t,n,i){var s=n.extend({"model":i,"url":function(){var t=e.result(this.section,"url");return t},"parse":function(e){return this.convert(e,"Directory")
},"filterBySecondary":function(){var e=this.filter(function(e){return e.get("secondary")});return this.clone(e)}});return s}),define("plex/base/models/library/section/SortModel",["underscore","plex/base/utils/Parser","plex/base/models/BaseModel"],function(e,t,n){var i=n.extend({"idAttribute":"key","defaults":{"selected":!1},"whitelistedAttrs":["key","title","defaultDirection"],"convert":function(n){var i=e.isObject(n)?n:t.parseXML(n);return i},"parse":function(t){var n=this.convert(t);return n.defaultDirection=n["default"],n=e.pick(n,this.whitelistedAttrs)
}});return i}),define("plex/base/models/library/section/SortCollection",["underscore","jquery","plex/base/models/BaseCollection","plex/base/models/library/section/SortModel"],function(e,t,n,i){var s=n.extend({"model":i,"url":function(){var n=e.result(this.section,"url")+"/sorts",i=this.section.get("currentType"),s={};return i&&(s.type=i.id),n+"?"+t.param(s,!0)},"parse":function(e){return this.convert(e,"Directory")}});return s}),define("plex/base/models/library/section/AlphanumericModel",["underscore","plex/base/utils/Parser","plex/base/models/BaseModel"],function(e,t,n){var i=n.extend({"idAttribute":"key","whitelistedAttrs":["key","title","size"],"url":function(){return"/library/sections/"+this.section.id+"/firstCharacter/"+this.id
},"convert":function(n){var i=e.isObject(n)?n:t.parseXML(n);return t.parseInteger(i,"size"),i},"parse":function(t){var n=this.convert(t);return n=e.pick(n,this.whitelistedAttrs)}});return i}),define("plex/base/models/library/section/AlphanumericCollection",["underscore","plex/base/models/BaseCollection","plex/base/models/library/section/AlphanumericModel"],function(e,t,n){var i=t.extend({"model":n,"url":function(){var t=e.result(this.section,"url"),n=t+"/firstCharacter?"+this.getUrlParams();return n
},"getUrlParams":function(){var t={},n=[],i=this.section.get("currentType"),s=this.section.get("currentFilters");t.type=i.id,e.each(s,function(e){e.values.length&&(t[e.key]=e.values.join(","))},this);for(var a in t)n.push("unviewedLeafCount"===a?a+">="+t[a]:a+"="+t[a]);return n.join("&")},"parse":function(e){return this.convert(e,"Directory")}});return i}),define("plex/base/utils/formatters/StringUtil",["underscore","plex/base/utils/BaseClass","plex/base/utils/Logger","plex/base/adapters/LocalizerAdapter"],function(e,t,n,i){var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=t.extend({"encode64":function(e){var t,n,i,a,r,o="",l="",c="",d=0;
do t=e.charCodeAt(d++),n=e.charCodeAt(d++),l=e.charCodeAt(d++),i=t>>2,a=(3&t)<<4|n>>4,r=(15&n)<<2|l>>6,c=63&l,isNaN(n)?r=c=64:isNaN(l)&&(c=64),o=o+s.charAt(i)+s.charAt(a)+s.charAt(r)+s.charAt(c),t=n=l="",i=a=r=c="";while(d<e.length);return o},"decode64":function(e){var t,i,a,r,o,l="",c="",d="",u=0,h=/[^A-Za-z0-9\+\/\=]/g;h.exec(e)&&n.warn('There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, "+", "/", and "="\nExpect errors in decoding.'),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");
do a=s.indexOf(e.charAt(u++)),r=s.indexOf(e.charAt(u++)),o=s.indexOf(e.charAt(u++)),d=s.indexOf(e.charAt(u++)),t=a<<2|r>>4,i=(15&r)<<4|o>>2,c=(3&o)<<6|d,l+=String.fromCharCode(t),64!=o&&(l+=String.fromCharCode(i)),64!=d&&(l+=String.fromCharCode(c)),t=i=c="",a=r=o=d="";while(u<e.length);return unescape(l)},"toUtf8":function(e){for(var t="",n=0,i=0;i<e.length;i++){var s=e.charCodeAt(i);128>s||(2048>s?(i>n&&(t+=e.substring(n,i)),n=i+1,t+=String.fromCharCode(192|s>>>6),t+=String.fromCharCode(128|63&s)):(i>n&&(t+=e.substring(n,i)),n=i+1,t+=String.fromCharCode(224|s>>>12),t+=String.fromCharCode(128|s>>>6&63),t+=String.fromCharCode(128|63&s)))
}return n>0&&n<e.length&&(t+=e.substring(n)),0===n?e:t},"truncate":function(e,t){if(!e)return"";if(e.length>t){for(var n=e.substring(0,t-3);/\S/.test(n.charAt(n.length-1))===!1&&n.length>1;)n=n.slice(0,-1);return n+"..."}return e},"truncateMiddle":function(e,t,n){if(!e)return"";if(e.length>t){n=n||Math.floor((t-3)/2);var i=t-3-n;return e.substr(0,n)+"..."+e.substr(e.length-i)}return e},"pluralize":function(e,t,n){return null==n&&(n=e+"s"),1===t?e:n},"formatLabel":function(e){for(var t="",n=0,i=e.length;i>n;n++){var s=e.charAt(n),a=s.toUpperCase();
t+=0===n?a:s===a?" "+a:s}return t},"formatBoolean":function(e){var t=i.get();return t.t(e&&0!==parseInt(e,10)?"Yes":"No")},"upperCase":function(e){return(e||"").toUpperCase()},"titleCase":function(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})},"getLastSegment":function(t){return e.first(/[^\/\\]+$/.exec(t||"")||[])},"random":function(){return Math.random().toString(36).substr(2)}});return new a}),define("plex/base/utils/types/MediaTypes",["underscore","plex/base/utils/BaseClass","plex/base/utils/formatters/StringUtil"],function(e,t,n){var i=t.extend({"types":[{"id":1,"typeString":"movie","title":"Movie","plural":n.pluralize("Movie"),"element":"video"},{"id":2,"typeString":"show","title":"Show","plural":n.pluralize("TV Show"),"element":"directory","related":[3,4]},{"id":3,"typeString":"season","title":"Season","plural":n.pluralize("Season"),"element":"directory","related":[2,4]},{"id":4,"typeString":"episode","title":"Episode","plural":n.pluralize("Episode"),"element":"video","related":[2,3]},{"id":5,"typeString":"trailer","title":"Trailer","plural":n.pluralize("Trailer"),"element":"video"},{"id":6,"typeString":"comic","title":"Comic","plural":n.pluralize("Comic"),"element":"photo"},{"id":7,"typeString":"person","title":"Person","plural":n.pluralize("Person",null,"People"),"element":"directory"},{"id":8,"typeString":"artist","title":"Artist","plural":n.pluralize("Artist"),"element":"directory","related":[9,10]},{"id":9,"typeString":"album","title":"Album","plural":n.pluralize("Album"),"element":"directory","related":[8,10]},{"id":10,"typeString":"track","title":"Track","plural":n.pluralize("Track"),"element":"audio","related":[8,9]},{"id":11,"typeString":"photoAlbum","title":"Photo Album","plural":n.pluralize("Photo Album"),"element":"directory","related":[12,13]},{"id":12,"typeString":"picture","title":"Picture","plural":n.pluralize("Picture"),"element":"photo","related":[11]},{"id":13,"typeString":"photo","title":"Photo","plural":n.pluralize("Photo"),"element":"photo","related":[11]},{"id":14,"typeString":"clip","title":"Clip","plural":n.pluralize("Clip"),"element":"video"},{"id":15,"typeString":"playlistItem","title":"Clip","plural":n.pluralize("Clip"),"element":"video"}],"initialize":function(){this.byID=e.reduce(this.types,function(e,t){return e[t.id]=t,e
},{}),this.byType=e.reduce(this.types,function(e,t){return e[t.typeString]=t,e},{})},"getMediaType":function(e){return this.byID[e]},"getMediaTypeByString":function(e){return this.byType[e]},"getRelatedMediaTypes":function(t){var n=this.byType[t],i=e.map(n.related,e.bind(function(e){return this.byID[e]},this));return i.unshift(n),i},"getChildMediaType":function(t){var n,i=this.byType[t],s=e.map(i.related,e.bind(function(e){return this.byID[e]},this));return s&&s.length&&(n=e.last(s)),n&&n.id>i.id?n:i
}});return new i}),define("plex/base/utils/RangeUtil",["underscore","plex/base/utils/BaseClass"],function(e,t){function n(t){var n=e.clone(t);return"undefined"!=typeof n.last?(n.size=n.last-n.start+1,n.end=n.last+1):"undefined"!=typeof n.size?(n.last=n.start+n.size-1,n.end=n.last+1):"undefined"!=typeof n.end&&(n.last=n.end-1,n.size=n.last-n.start+1),n}function i(t,i){return e.filter(e.map(t,n),function(e){return i?e.size>=0:e.size>0})}var s=t.extend({"difference":function(e,t,s){e=n(e),t=n(t);var a=[{"start":e.start,"last":Math.min(e.last,t.start-1)},{"start":Math.max(e.start,t.end),"last":e.last}];
return i(a,s)},"union":function(e,t,s){if(e=n(e),t=n(t),e.start>t.start){var a=e;e=t,t=a}var r=[e];return t.start<=e.end?r[0].last=Math.max(t.last,e.last):r.push(t),i(r,s)},"each":function(e,t,i){e=n(e);for(var s=Math.min(e.start,e.end),a=Math.max(e.start,e.end);a>=s;s++)t.call(i,s)}});return new s}),define("plex/base/mixins/PaginationMixin",["underscore","jquery","plex/base/utils/RangeUtil"],function(e,t,n){var i={"fetchRange":function(e){return e.remove=!1,e.cancelable=!0,e.prepend&&(e.at=0),this.pageStart=e.start,this.pageSize=e.size,this.fetch(e).promise()
},"populateRange":function(i){var s=t.Deferred();if(this.populatePromise&&"pending"===this.populatePromise.state())return s.reject().promise();this.populatedRange||(this.populatedRange={"start":0,"end":0});var a=e.first(n.difference(i,this.populatedRange));if(!a)return s.resolve().promise();var r=e.extend(i,a);r.prepend=a.start<this.populatedRange.start,this.populatedRange=e.first(n.union(this.populatedRange,a));var o=this.fetchRange(r);return o.done(s.resolve),o.fail(s.reject),s.promise()},"remove":function(t){var n=e.isArray(t)?t.length:1;
this.populatedRange&&this.populatedRange.end&&(this.populatedRange.end-=n)}};return i}),function(e){function t(e,t){return function(n){return l(e.call(this,n),t)}}function n(e,t){return function(n){return this.lang().ordinal(e.call(this,n),t)}}function i(){}function s(e){w(e),r(this,e)}function a(e){var t=f(e),n=t.year||0,i=t.month||0,s=t.week||0,a=t.day||0,r=t.hour||0,o=t.minute||0,l=t.second||0,c=t.millisecond||0;this._input=e,this._milliseconds=+c+1e3*l+6e4*o+36e5*r,this._days=+a+7*s,this._months=+i+12*n,this._data={},this._bubble()
}function r(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return t.hasOwnProperty("toString")&&(e.toString=t.toString),t.hasOwnProperty("valueOf")&&(e.valueOf=t.valueOf),e}function o(e){return 0>e?Math.ceil(e):Math.floor(e)}function l(e,t){for(var n=e+"";n.length<t;)n="0"+n;return n}function c(e,t,n,i){var s,a,r=t._milliseconds,o=t._days,l=t._months;r&&e._d.setTime(+e._d+r*n),(o||l)&&(s=e.minute(),a=e.hour()),o&&e.date(e.date()+o*n),l&&e.month(e.month()+l*n),r&&!i&&tt.updateOffset(e),(o||l)&&(e.minute(s),e.hour(a))
}function d(e){return"[object Array]"===Object.prototype.toString.call(e)}function u(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function h(e,t,n){var i,s=Math.min(e.length,t.length),a=Math.abs(e.length-t.length),r=0;for(i=0;s>i;i++)(n&&e[i]!==t[i]||!n&&g(e[i])!==g(t[i]))&&r++;return r+a}function p(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=Ot[e]||Bt[t]||t}return e}function f(e){var t,n,i={};for(n in e)e.hasOwnProperty(n)&&(t=p(n),t&&(i[t]=e[n]));return i
}function m(t){var n,i;if(0===t.indexOf("week"))n=7,i="day";else{if(0!==t.indexOf("month"))return;n=12,i="month"}tt[t]=function(s,a){var r,o,l=tt.fn._lang[t],c=[];if("number"==typeof s&&(a=s,s=e),o=function(e){var t=tt().utc().set(i,e);return l.call(tt.fn._lang,t,s||"")},null!=a)return o(a);for(r=0;n>r;r++)c.push(o(r));return c}}function g(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=t>=0?Math.floor(t):Math.ceil(t)),n}function v(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function y(e){return b(e)?366:365
}function b(e){return 0===e%4&&0!==e%100||0===e%400}function w(e){var t;e._a&&-2===e._pf.overflow&&(t=e._a[rt]<0||e._a[rt]>11?rt:e._a[ot]<1||e._a[ot]>v(e._a[at],e._a[rt])?ot:e._a[lt]<0||e._a[lt]>23?lt:e._a[ct]<0||e._a[ct]>59?ct:e._a[dt]<0||e._a[dt]>59?dt:e._a[ut]<0||e._a[ut]>999?ut:-1,e._pf._overflowDayOfYear&&(at>t||t>ot)&&(t=ot),e._pf.overflow=t)}function x(e){e._pf={"empty":!1,"unusedTokens":[],"unusedInput":[],"overflow":-2,"charsLeftOver":0,"nullInput":!1,"invalidMonth":null,"invalidFormat":!1,"userInvalidated":!1,"iso":!1}
}function k(e){return null==e._isValid&&(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&0===e._pf.charsLeftOver&&0===e._pf.unusedTokens.length)),e._isValid}function S(e){return e?e.toLowerCase().replace("_","-"):e}function C(e,t){return t.abbr=e,ht[e]||(ht[e]=new i),ht[e].set(t),ht[e]}function T(e){delete ht[e]}function A(e){var t,n,i,s,a=0,r=function(e){if(!ht[e]&&pt)try{require("./lang/"+e)
}catch(t){}return ht[e]};if(!e)return tt.fn._lang;if(!d(e)){if(n=r(e))return n;e=[e]}for(;a<e.length;){for(s=S(e[a]).split("-"),t=s.length,i=S(e[a+1]),i=i?i.split("-"):null;t>0;){if(n=r(s.slice(0,t).join("-")))return n;if(i&&i.length>=t&&h(s,i,!0)>=t-1)break;t--}a++}return tt.fn._lang}function I(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function P(e){var t,n,i=e.match(vt);for(t=0,n=i.length;n>t;t++)i[t]=Ut[i[t]]?Ut[i[t]]:I(i[t]);return function(s){var a="";for(t=0;n>t;t++)a+=i[t]instanceof Function?i[t].call(s,e):i[t];
return a}}function M(e,t){return e.isValid()?(t=D(t,e.lang()),Vt[t]||(Vt[t]=P(t)),Vt[t](e)):e.lang().invalidDate()}function D(e,t){function n(e){return t.longDateFormat(e)||e}var i=5;for(yt.lastIndex=0;i>=0&&yt.test(e);)e=e.replace(yt,n),yt.lastIndex=0,i-=1;return e}function _(e,t){var n;switch(e){case"DDDD":return xt;case"YYYY":case"GGGG":case"gggg":return kt;case"YYYYY":case"GGGGG":case"ggggg":return St;case"S":case"SS":case"SSS":case"DDD":return wt;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Tt;
case"a":case"A":return A(t._l)._meridiemParse;case"X":return Pt;case"Z":case"ZZ":return At;case"T":return It;case"SSSS":return Ct;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"ww":case"W":case"WW":case"e":case"E":return bt;default:return n=new RegExp(F(V(e.replace("\\","")),"i"))}}function E(e){var t=(At.exec(e)||[])[0],n=(t+"").match(Lt)||["-",0,0],i=+(60*n[1])+g(n[2]);return"+"===n[0]?-i:i}function L(e,t,n){var i,s=n._a;
switch(e){case"M":case"MM":null!=t&&(s[rt]=g(t)-1);break;case"MMM":case"MMMM":i=A(n._l).monthsParse(t),null!=i?s[rt]=i:n._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(s[ot]=g(t));break;case"DDD":case"DDDD":null!=t&&(n._dayOfYear=g(t));break;case"YY":s[at]=g(t)+(g(t)>68?1900:2e3);break;case"YYYY":case"YYYYY":s[at]=g(t);break;case"a":case"A":n._isPm=A(n._l).isPM(t);break;case"H":case"HH":case"h":case"hh":s[lt]=g(t);break;case"m":case"mm":s[ct]=g(t);break;case"s":case"ss":s[dt]=g(t);break;case"S":case"SS":case"SSS":case"SSSS":s[ut]=g(1e3*("0."+t));
break;case"X":n._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=E(t);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":e=e.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(n._w=n._w||{},n._w[e]=t)}}function R(e){var t,n,i,s,a,r,o,l,c,d,u=[];if(!e._d){for(i=O(e),e._w&&null==e._a[ot]&&null==e._a[rt]&&(a=function(t){return t?t.length<3?parseInt(t,10)>68?"19"+t:"20"+t:t:null==e._a[at]?tt().weekYear():e._a[at]
},r=e._w,null!=r.GG||null!=r.W||null!=r.E?o=K(a(r.GG),r.W||1,r.E,4,1):(l=A(e._l),c=null!=r.d?$(r.d,l):null!=r.e?parseInt(r.e,10)+l._week.dow:0,d=parseInt(r.w,10)||1,null!=r.d&&c<l._week.dow&&d++,o=K(a(r.gg),d,c,l._week.doy,l._week.dow)),e._a[at]=o.year,e._dayOfYear=o.dayOfYear),e._dayOfYear&&(s=null==e._a[at]?i[at]:e._a[at],e._dayOfYear>y(s)&&(e._pf._overflowDayOfYear=!0),n=H(s,0,e._dayOfYear),e._a[rt]=n.getUTCMonth(),e._a[ot]=n.getUTCDate()),t=0;3>t&&null==e._a[t];++t)e._a[t]=u[t]=i[t];for(;7>t;t++)e._a[t]=u[t]=null==e._a[t]?2===t?1:0:e._a[t];
u[lt]+=g((e._tzm||0)/60),u[ct]+=g((e._tzm||0)%60),e._d=(e._useUTC?H:j).apply(null,u)}}function N(e){var t;e._d||(t=f(e._i),e._a=[t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond],R(e))}function O(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function B(e){e._a=[],e._pf.empty=!0;var t,n,i,s,a,r=A(e._l),o=""+e._i,l=o.length,c=0;for(i=D(e._f,r).match(vt)||[],t=0;t<i.length;t++)s=i[t],n=(_(s,e).exec(o)||[])[0],n&&(a=o.substr(0,o.indexOf(n)),a.length>0&&e._pf.unusedInput.push(a),o=o.slice(o.indexOf(n)+n.length),c+=n.length),Ut[s]?(n?e._pf.empty=!1:e._pf.unusedTokens.push(s),L(s,n,e)):e._strict&&!n&&e._pf.unusedTokens.push(s);
e._pf.charsLeftOver=l-c,o.length>0&&e._pf.unusedInput.push(o),e._isPm&&e._a[lt]<12&&(e._a[lt]+=12),e._isPm===!1&&12===e._a[lt]&&(e._a[lt]=0),R(e),w(e)}function V(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,i,s){return t||n||i||s})}function F(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function q(e){var t,n,i,s,a;if(0===e._f.length)return e._pf.invalidFormat=!0,void(e._d=new Date(0/0));for(s=0;s<e._f.length;s++)a=0,t=r({},e),x(t),t._f=e._f[s],B(t),k(t)&&(a+=t._pf.charsLeftOver,a+=10*t._pf.unusedTokens.length,t._pf.score=a,(null==i||i>a)&&(i=a,n=t));
r(e,n||t)}function U(e){var t,n=e._i,i=Mt.exec(n);if(i){for(e._pf.iso=!0,t=4;t>0;t--)if(i[t]){e._f=_t[t-1]+(i[6]||" ");break}for(t=0;4>t;t++)if(Et[t][1].exec(n)){e._f+=Et[t][0];break}At.exec(n)&&(e._f+="Z"),B(e)}else e._d=new Date(n)}function z(t){var n=t._i,i=ft.exec(n);n===e?t._d=new Date:i?t._d=new Date(+i[1]):"string"==typeof n?U(t):d(n)?(t._a=n.slice(0),R(t)):u(n)?t._d=new Date(+n):"object"==typeof n?N(t):t._d=new Date(n)}function j(e,t,n,i,s,a,r){var o=new Date(e,t,n,i,s,a,r);return 1970>e&&o.setFullYear(e),o
}function H(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function $(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function W(e,t,n,i,s){return s.relativeTime(t||1,!!n,e,i)}function Y(e,t,n){var i=st(Math.abs(e)/1e3),s=st(i/60),a=st(s/60),r=st(a/24),o=st(r/365),l=45>i&&["s",i]||1===s&&["m"]||45>s&&["mm",s]||1===a&&["h"]||22>a&&["hh",a]||1===r&&["d"]||25>=r&&["dd",r]||45>=r&&["M"]||345>r&&["MM",st(r/30)]||1===o&&["y"]||["yy",o];
return l[2]=t,l[3]=e>0,l[4]=n,W.apply({},l)}function Q(e,t,n){var i,s=n-t,a=n-e.day();return a>s&&(a-=7),s-7>a&&(a+=7),i=tt(e).add("d",a),{"week":Math.ceil(i.dayOfYear()/7),"year":i.year()}}function K(e,t,n,i,s){var a,r,o=new Date(Date.UTC(e,0)).getUTCDay();return n=null!=n?n:s,a=s-o+(o>i?7:0),r=7*(t-1)+(n-s)+a+1,{"year":r>0?e:e-1,"dayOfYear":r>0?r:y(e-1)+r}}function G(e){var t=e._i,n=e._f;return"undefined"==typeof e._pf&&x(e),null===t?tt.invalid({"nullInput":!0}):("string"==typeof t&&(e._i=t=A().preparse(t)),tt.isMoment(t)?(e=r({},t),e._d=new Date(+t._d)):n?d(n)?q(e):B(e):z(e),new s(e))
}function X(e,t){tt.fn[e]=tt.fn[e+"s"]=function(e){var n=this._isUTC?"UTC":"";return null!=e?(this._d["set"+n+t](e),tt.updateOffset(this),this):this._d["get"+n+t]()}}function J(e){tt.duration.fn[e]=function(){return this._data[e]}}function Z(e,t){tt.duration.fn["as"+e]=function(){return+this/t}}function et(e){var t=!1,n=tt;"undefined"==typeof ender&&(this.moment=e?function(){return!t&&console&&console.warn&&(t=!0,console.warn("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.")),n.apply(null,arguments)
}:tt)}for(var tt,nt,it="2.4.0",st=Math.round,at=0,rt=1,ot=2,lt=3,ct=4,dt=5,ut=6,ht={},pt="undefined"!=typeof module&&module.exports,ft=/^\/?Date\((\-?\d+)/i,mt=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,gt=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,vt=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,yt=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,bt=/\d\d?/,wt=/\d{1,3}/,xt=/\d{3}/,kt=/\d{1,4}/,St=/[+\-]?\d{1,6}/,Ct=/\d+/,Tt=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,At=/Z|[\+\-]\d\d:?\d\d/i,It=/T/i,Pt=/[\+\-]?\d+(\.\d{1,3})?/,Mt=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d:?\d\d|Z)?)?$/,Dt="YYYY-MM-DDTHH:mm:ssZ",_t=["YYYY-MM-DD","GGGG-[W]WW","GGGG-[W]WW-E","YYYY-DDD"],Et=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Lt=/([\+\-]|\d\d)/gi,Rt="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),Nt={"Milliseconds":1,"Seconds":1e3,"Minutes":6e4,"Hours":36e5,"Days":864e5,"Months":2592e6,"Years":31536e6},Ot={"ms":"millisecond","s":"second","m":"minute","h":"hour","d":"day","D":"date","w":"week","W":"isoWeek","M":"month","y":"year","DDD":"dayOfYear","e":"weekday","E":"isoWeekday","gg":"weekYear","GG":"isoWeekYear"},Bt={"dayofyear":"dayOfYear","isoweekday":"isoWeekday","isoweek":"isoWeek","weekyear":"weekYear","isoweekyear":"isoWeekYear"},Vt={},Ft="DDD w W M D d".split(" "),qt="M D H h m s w W".split(" "),Ut={"M":function(){return this.month()+1
},"MMM":function(e){return this.lang().monthsShort(this,e)},"MMMM":function(e){return this.lang().months(this,e)},"D":function(){return this.date()},"DDD":function(){return this.dayOfYear()},"d":function(){return this.day()},"dd":function(e){return this.lang().weekdaysMin(this,e)},"ddd":function(e){return this.lang().weekdaysShort(this,e)},"dddd":function(e){return this.lang().weekdays(this,e)},"w":function(){return this.week()},"W":function(){return this.isoWeek()},"YY":function(){return l(this.year()%100,2)
},"YYYY":function(){return l(this.year(),4)},"YYYYY":function(){return l(this.year(),5)},"gg":function(){return l(this.weekYear()%100,2)},"gggg":function(){return this.weekYear()},"ggggg":function(){return l(this.weekYear(),5)},"GG":function(){return l(this.isoWeekYear()%100,2)},"GGGG":function(){return this.isoWeekYear()},"GGGGG":function(){return l(this.isoWeekYear(),5)},"e":function(){return this.weekday()},"E":function(){return this.isoWeekday()},"a":function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)
},"A":function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},"H":function(){return this.hours()},"h":function(){return this.hours()%12||12},"m":function(){return this.minutes()},"s":function(){return this.seconds()},"S":function(){return g(this.milliseconds()/100)},"SS":function(){return l(g(this.milliseconds()/10),2)},"SSS":function(){return l(this.milliseconds(),3)},"SSSS":function(){return l(this.milliseconds(),3)},"Z":function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+l(g(e/60),2)+":"+l(g(e)%60,2)
},"ZZ":function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+l(g(10*e/6),4)},"z":function(){return this.zoneAbbr()},"zz":function(){return this.zoneName()},"X":function(){return this.unix()}},zt=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];Ft.length;)nt=Ft.pop(),Ut[nt+"o"]=n(Ut[nt],nt);for(;qt.length;)nt=qt.pop(),Ut[nt+nt]=t(Ut[nt],2);for(Ut.DDDD=t(Ut.DDD,3),r(i.prototype,{"set":function(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t},"_months":"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),"months":function(e){return this._months[e.month()]
},"_monthsShort":"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),"monthsShort":function(e){return this._monthsShort[e.month()]},"monthsParse":function(e){var t,n,i;for(this._monthsParse||(this._monthsParse=[]),t=0;12>t;t++)if(this._monthsParse[t]||(n=tt.utc([2e3,t]),i="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[t]=new RegExp(i.replace(".",""),"i")),this._monthsParse[t].test(e))return t},"_weekdays":"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),"weekdays":function(e){return this._weekdays[e.day()]
},"_weekdaysShort":"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),"weekdaysShort":function(e){return this._weekdaysShort[e.day()]},"_weekdaysMin":"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),"weekdaysMin":function(e){return this._weekdaysMin[e.day()]},"weekdaysParse":function(e){var t,n,i;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(n=tt([2e3,1]).day(t),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(i.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t
},"_longDateFormat":{"LT":"h:mm A","L":"MM/DD/YYYY","LL":"MMMM D YYYY","LLL":"MMMM D YYYY LT","LLLL":"dddd, MMMM D YYYY LT"},"longDateFormat":function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},"isPM":function(e){return"p"===(e+"").toLowerCase().charAt(0)},"_meridiemParse":/[ap]\.?m?\.?/i,"meridiem":function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"
},"_calendar":{"sameDay":"[Today at] LT","nextDay":"[Tomorrow at] LT","nextWeek":"dddd [at] LT","lastDay":"[Yesterday at] LT","lastWeek":"[Last] dddd [at] LT","sameElse":"L"},"calendar":function(e,t){var n=this._calendar[e];return"function"==typeof n?n.apply(t):n},"_relativeTime":{"future":"in %s","past":"%s ago","s":"a few seconds","m":"a minute","mm":"%d minutes","h":"an hour","hh":"%d hours","d":"a day","dd":"%d days","M":"a month","MM":"%d months","y":"a year","yy":"%d years"},"relativeTime":function(e,t,n,i){var s=this._relativeTime[n];
return"function"==typeof s?s(e,t,n,i):s.replace(/%d/i,e)},"pastFuture":function(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)},"ordinal":function(e){return this._ordinal.replace("%d",e)},"_ordinal":"%d","preparse":function(e){return e},"postformat":function(e){return e},"week":function(e){return Q(e,this._week.dow,this._week.doy).week},"_week":{"dow":0,"doy":6},"_invalidDate":"Invalid date","invalidDate":function(){return this._invalidDate}}),tt=function(t,n,i,s){return"boolean"==typeof i&&(s=i,i=e),G({"_i":t,"_f":n,"_l":i,"_strict":s,"_isUTC":!1})
},tt.utc=function(t,n,i,s){var a;return"boolean"==typeof i&&(s=i,i=e),a=G({"_useUTC":!0,"_isUTC":!0,"_l":i,"_i":t,"_f":n,"_strict":s}).utc()},tt.unix=function(e){return tt(1e3*e)},tt.duration=function(e,t){var n,i,s,r=tt.isDuration(e),o="number"==typeof e,l=r?e._input:o?{}:e,c=null;return o?t?l[t]=e:l.milliseconds=e:(c=mt.exec(e))?(n="-"===c[1]?-1:1,l={"y":0,"d":g(c[ot])*n,"h":g(c[lt])*n,"m":g(c[ct])*n,"s":g(c[dt])*n,"ms":g(c[ut])*n}):(c=gt.exec(e))&&(n="-"===c[1]?-1:1,s=function(e){var t=e&&parseFloat(e.replace(",","."));
return(isNaN(t)?0:t)*n},l={"y":s(c[2]),"M":s(c[3]),"d":s(c[4]),"h":s(c[5]),"m":s(c[6]),"s":s(c[7]),"w":s(c[8])}),i=new a(l),r&&e.hasOwnProperty("_lang")&&(i._lang=e._lang),i},tt.version=it,tt.defaultFormat=Dt,tt.updateOffset=function(){},tt.lang=function(e,t){var n;return e?(t?C(S(e),t):null===t?(T(e),e="en"):ht[e]||A(e),n=tt.duration.fn._lang=tt.fn._lang=A(e),n._abbr):tt.fn._lang._abbr},tt.langData=function(e){return e&&e._lang&&e._lang._abbr&&(e=e._lang._abbr),A(e)},tt.isMoment=function(e){return e instanceof s
},tt.isDuration=function(e){return e instanceof a},nt=zt.length-1;nt>=0;--nt)m(zt[nt]);for(tt.normalizeUnits=function(e){return p(e)},tt.invalid=function(e){var t=tt.utc(0/0);return null!=e?r(t._pf,e):t._pf.userInvalidated=!0,t},tt.parseZone=function(e){return tt(e).parseZone()},r(tt.fn=s.prototype,{"clone":function(){return tt(this)},"valueOf":function(){return+this._d+6e4*(this._offset||0)},"unix":function(){return Math.floor(+this/1e3)},"toString":function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")
},"toDate":function(){return this._offset?new Date(+this):this._d},"toISOString":function(){return M(tt(this).utc(),"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},"toArray":function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},"isValid":function(){return k(this)},"isDSTShifted":function(){return this._a?this.isValid()&&h(this._a,(this._isUTC?tt.utc(this._a):tt(this._a)).toArray())>0:!1},"parsingFlags":function(){return r({},this._pf)},"invalidAt":function(){return this._pf.overflow
},"utc":function(){return this.zone(0)},"local":function(){return this.zone(0),this._isUTC=!1,this},"format":function(e){var t=M(this,e||tt.defaultFormat);return this.lang().postformat(t)},"add":function(e,t){var n;return n="string"==typeof e?tt.duration(+t,e):tt.duration(e,t),c(this,n,1),this},"subtract":function(e,t){var n;return n="string"==typeof e?tt.duration(+t,e):tt.duration(e,t),c(this,n,-1),this},"diff":function(e,t,n){var i,s,a=this._isUTC?tt(e).zone(this._offset||0):tt(e).local(),r=6e4*(this.zone()-a.zone());
return t=p(t),"year"===t||"month"===t?(i=432e5*(this.daysInMonth()+a.daysInMonth()),s=12*(this.year()-a.year())+(this.month()-a.month()),s+=(this-tt(this).startOf("month")-(a-tt(a).startOf("month")))/i,s-=6e4*(this.zone()-tt(this).startOf("month").zone()-(a.zone()-tt(a).startOf("month").zone()))/i,"year"===t&&(s/=12)):(i=this-a,s="second"===t?i/1e3:"minute"===t?i/6e4:"hour"===t?i/36e5:"day"===t?(i-r)/864e5:"week"===t?(i-r)/6048e5:i),n?s:o(s)},"from":function(e,t){return tt.duration(this.diff(e)).lang(this.lang()._abbr).humanize(!t)
},"fromNow":function(e){return this.from(tt(),e)},"calendar":function(){var e=this.diff(tt().zone(this.zone()).startOf("day"),"days",!0),t=-6>e?"sameElse":-1>e?"lastWeek":0>e?"lastDay":1>e?"sameDay":2>e?"nextDay":7>e?"nextWeek":"sameElse";return this.format(this.lang().calendar(t,this))},"isLeapYear":function(){return b(this.year())},"isDST":function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},"day":function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();
return null!=e?(e=$(e,this.lang()),this.add({"d":e-t})):t},"month":function(e){var t,n=this._isUTC?"UTC":"";return null!=e?"string"==typeof e&&(e=this.lang().monthsParse(e),"number"!=typeof e)?this:(t=this.date(),this.date(1),this._d["set"+n+"Month"](e),this.date(Math.min(t,this.daysInMonth())),tt.updateOffset(this),this):this._d["get"+n+"Month"]()},"startOf":function(e){switch(e=p(e)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);
case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),this},"endOf":function(e){return e=p(e),this.startOf(e).add("isoWeek"===e?"week":e,1).subtract("ms",1)},"isAfter":function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)>+tt(e).startOf(t)},"isBefore":function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)<+tt(e).startOf(t)},"isSame":function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)===+tt(e).startOf(t)
},"min":function(e){return e=tt.apply(null,arguments),this>e?this:e},"max":function(e){return e=tt.apply(null,arguments),e>this?this:e},"zone":function(e){var t=this._offset||0;return null==e?this._isUTC?t:this._d.getTimezoneOffset():("string"==typeof e&&(e=E(e)),Math.abs(e)<16&&(e=60*e),this._offset=e,this._isUTC=!0,t!==e&&c(this,tt.duration(t-e,"m"),1,!0),this)},"zoneAbbr":function(){return this._isUTC?"UTC":""},"zoneName":function(){return this._isUTC?"Coordinated Universal Time":""},"parseZone":function(){return"string"==typeof this._i&&this.zone(this._i),this
},"hasAlignedHourOffset":function(e){return e=e?tt(e).zone():0,0===(this.zone()-e)%60},"daysInMonth":function(){return v(this.year(),this.month())},"dayOfYear":function(e){var t=st((tt(this).startOf("day")-tt(this).startOf("year"))/864e5)+1;return null==e?t:this.add("d",e-t)},"weekYear":function(e){var t=Q(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==e?t:this.add("y",e-t)},"isoWeekYear":function(e){var t=Q(this,1,4).year;return null==e?t:this.add("y",e-t)},"week":function(e){var t=this.lang().week(this);
return null==e?t:this.add("d",7*(e-t))},"isoWeek":function(e){var t=Q(this,1,4).week;return null==e?t:this.add("d",7*(e-t))},"weekday":function(e){var t=(this.day()+7-this.lang()._week.dow)%7;return null==e?t:this.add("d",e-t)},"isoWeekday":function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},"get":function(e){return e=p(e),this[e]()},"set":function(e,t){return e=p(e),"function"==typeof this[e]&&this[e](t),this},"lang":function(t){return t===e?this._lang:(this._lang=A(t),this)}}),nt=0;nt<Rt.length;nt++)X(Rt[nt].toLowerCase().replace(/s$/,""),Rt[nt]);
X("year","FullYear"),tt.fn.days=tt.fn.day,tt.fn.months=tt.fn.month,tt.fn.weeks=tt.fn.week,tt.fn.isoWeeks=tt.fn.isoWeek,tt.fn.toJSON=tt.fn.toISOString,r(tt.duration.fn=a.prototype,{"_bubble":function(){var e,t,n,i,s=this._milliseconds,a=this._days,r=this._months,l=this._data;l.milliseconds=s%1e3,e=o(s/1e3),l.seconds=e%60,t=o(e/60),l.minutes=t%60,n=o(t/60),l.hours=n%24,a+=o(n/24),l.days=a%30,r+=o(a/30),l.months=r%12,i=o(r/12),l.years=i},"weeks":function(){return o(this.days()/7)},"valueOf":function(){return this._milliseconds+864e5*this._days+2592e6*(this._months%12)+31536e6*g(this._months/12)
},"humanize":function(e){var t=+this,n=Y(t,!e,this.lang());return e&&(n=this.lang().pastFuture(t,n)),this.lang().postformat(n)},"add":function(e,t){var n=tt.duration(e,t);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},"subtract":function(e,t){var n=tt.duration(e,t);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},"get":function(e){return e=p(e),this[e.toLowerCase()+"s"]()},"as":function(e){return e=p(e),this["as"+e.charAt(0).toUpperCase()+e.slice(1)+"s"]()
},"lang":tt.fn.lang,"toIsoString":function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),i=Math.abs(this.hours()),s=Math.abs(this.minutes()),a=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(i||s||a?"T":"")+(i?i+"H":"")+(s?s+"M":"")+(a?a+"S":""):"P0D"}});for(nt in Nt)Nt.hasOwnProperty(nt)&&(Z(nt,Nt[nt]),J(nt.toLowerCase()));Z("Weeks",6048e5),tt.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()
},tt.lang("en",{"ordinal":function(e){var t=e%10,n=1===g(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),pt?(module.exports=tt,et(!0)):"function"==typeof define&&define.amd?define("moment",["require","exports","module"],function(t,n,i){return i.config().noGlobal!==!0&&et(i.config().noGlobal===e),tt}):et()}.call(this),define("plex/base/utils/formatters/NumberUtil",["underscore","plex/base/utils/BaseClass"],function(e,t){var n=t.extend({"leadingZero":function(t){if(t=parseInt(t,10),e.isNaN(t))return"";
var n=10>t?"0":"";return n+t},"bytesToSize":function(t,n){if(t=parseInt(t,10),n=n||1,e.isNaN(t))return"";if(0===t)return"0 Bytes";var i=["Bytes","KB","MB","GB","TB"],s=parseInt(Math.floor(Math.log(t)/Math.log(1024)),10);return(t/Math.pow(1024,s)).toFixed(n)+" "+i[s]}});return new n}),define("plex/base/utils/MediaUtil",["underscore","jquery","moment","plex/base/utils/BaseClass","plex/base/utils/Logger","plex/base/utils/formatters/NumberUtil","plex/base/adapters/LocalizerAdapter"],function(e,t,n,i,s,a,r){var o=i.extend({"capabilities":"protocols=http-live-streaming,http-mp4-streaming,http-streaming-video,http-streaming-video-720p,http-mp4-video,http-mp4-video-720p;videoDecoders=h264{profile:high&resolution:1080&level:51};audioDecoders=mp3,aac{bitrate:160000}","resolutions":["220x180","220x128","284x160","420x240","576x320","720x480","1024x768","1280x720","1280x720","1920x1080","1920x1080","1920x1080","1920x1080"],"qualities":["10","20","30","30","40","60","60","75","100","60","75","90","100"],"bitrates":["64","96","208","320","720","1500","2000","3000","4000","8000","10000","12000","20000"],"genericBitrates":{"1080":1e4,"720":3e3,"480":1500,"sd":720},"timelineDelay":1e4,"pingDelay":3e4,"playbackDelay":1e3,"timeline":function(n){var i=n.item,a=n.media,r=n.part,o=i.get("ratingKey"),l=i.get("type");
if(!o)return t.Deferred().resolve().promise();var c={"ratingKey":o,"key":i.get("key"),"state":n.state};if(n.continuing&&(c.continuing="1"),i.get("playQueueItemID")&&(c.playQueueItemID=i.get("playQueueItemID")),!("photo"===l||a&&r))return t.Deferred().resolve().promise();if("photo"!==l){var d=i.get("viewOffset")||0,u=a.duration;if(e.isNumber(n.position)&&(d=n.position,d=this.getAbsoluteOffset(a,r,d)),u||e.isNumber(n.duration)&&(u=n.duration,a.duration=u),!u)return t.Deferred().resolve().promise();
d>u&&(d=u),c.time=d,c.duration=u,"track"!==l&&i.isLibraryItem()&&this.setViewOffset(i,d,u)}var h="timeline: "+c.state;null!=c.time&&(h+=", "+c.time+"/"+c.duration),s.log(h);var p="/:/timeline?"+t.param(c,!0);return t.ajax(i.server.getXHROptions(p))},"setViewOffset":function(e,t,n){6e4>t||(t>.9*n?(e.set("viewOffset",0),e.set("viewCount",1)):e.set("viewOffset",t))},"ping":function(e,n){if(!n)return t.Deferred().resolve().promise();s.log("ping transcoder");var i;return i=e.supports("universalTranscoder")?"/video/:/transcode/universal/ping?session="+n:"/video/:/transcode/segmented/ping?session="+n,t.ajax(e.getXHROptions(i))
},"stop":function(e,n){if(!n)return t.Deferred().resolve().promise();s.log("stop transcoder");var i;return i=e.supports("universalTranscoder")?"/video/:/transcode/universal/stop?session="+n:"/video/:/transcode/segmented/stop?session="+n,t.ajax(e.getXHROptions(i))},"getMediaIndex":function(t,n){var i=t.get("Media");return e.indexOf(i,n)},"getPartIndex":function(t,n){return t?e.indexOf(t.Part,n):-1},"getPartCount":function(e){return e?e.Part.length:0},"getStreams":function(t,n){var i=[];if(t){var s=e.first(t.Part);
s&&s.Stream&&i.push.apply(i,e.where(s.Stream,n))}return i},"getMissingParts":function(t){var n=[];return e.isArray(t)||(t=[t]),e.each(t,function(t){var i=t.Part;i&&e.each(i,function(e){(e.exists===!1||e.accessible===!1)&&n.push(e)})}),n},"getMediaByBitrate":function(t,n){if(!t||!t.length)return!1;if(1===t.length)return t[0];for(var i=e.sortBy(t,e.bind(function(e){var t=e.bitrate;return!t&&e.videoResolution&&(t=this.genericBitrates[e.videoResolution],e.bitrate=t),-1*t},this)),s=0,a=i.length;a>s;s++){var r=i[s];
if(r.bitrate<=n)return r}return e.last(t)},"getRelativeOffset":function(e,t,n){var i=n;if(e.Part.length>1)for(var s=0,a=e.Part.length;a>s;s++){var r=e.Part[s];if(!r.duration)break;if(t.key===r.key)break;i-=r.duration}return i},"getAbsoluteOffset":function(e,t,n){var i=n;if(e.Part.length>1)for(var s=0,a=e.Part.length;a>s;s++){var r=e.Part[s];if(!r.duration)break;if(t.key===r.key)break;i+=r.duration}return i},"getPartByAbsoluteOffset":function(t,n){var i;if(t.Part.length>1)for(var s=0,a=0,r=t.Part.length;r>a&&(i=t.Part[a],i.duration)&&(s+=i.duration,!(s>n));a++);else i=e.first(t.Part);
return i},"getQualityInfo":function(e,t){var n;n=e.isLibraryItem()?e.server.hasLocalConnection()?"localQuality":"remoteQuality":"channelQuality";var i=t.get(n);(0>i||i>=this.bitrates.length)&&(s.warn("quality "+i+" is out of bounds"),i=t.defaults[n],t.save(n,i));var a=this.qualities[i],r=this.resolutions[i],o=this.bitrates[i];return s.info("playing video at "+r+", "+o),{"attribute":n,"index":i,"quality":a,"resolution":r,"bitrate":o}},"getScreenshotIndex":function(t,n){if(t.indexes){var i=t.indexes.split(",");
if(i.length)return e.indexOf(i,n)>-1?n:i[0]}},"getScreenshotUrl":function(e,t,n){var i=this.getPartByAbsoluteOffset(e,t);if(n=this.getScreenshotIndex(i,n)){var s=this.getRelativeOffset(e,i,t);return i.key.replace(/[^\/]*$/,"")+"indexes/"+n+"/"+s}},"getSeasonIndex":function(e){var t=r.get(),n=e.seasonPrefix||"S{1}",i=e.seasonIndex;return i>1e3?i:(e.noLeadingZero||(i=a.leadingZero(i)),t.t(n,i))},"getSeasonEpisodeIndex":function(e){var t=r.get(),i=e.seasonPrefix||"S{1}",s=e.episodePrefix||"E{1}",o=e.seasonIndex,l=e.episodeIndex;
return l>0&&1e3>o?(e.noLeadingZero||(o=a.leadingZero(o),l=a.leadingZero(l)),t.t(i,o)+t.t(s,l)):e.date?n(e.date).format("M/D/YY"):""},"getEpisodeIndex":function(e){var t=r.get(),i=e.episodePrefix||"E{1}",s=e.episodeIndex||0;return s>0?(e.noLeadingZero||(s=a.leadingZero(s)),t.t(i,s)):e.date?n(e.date).format("M/D/YY"):""}});return new o}),define("plex/base/utils/types/StreamTypes",["underscore","plex/base/utils/BaseClass"],function(e,t){var n=t.extend({"types":[{"id":1,"typeString":"video","title":"Video"},{"id":2,"typeString":"audio","title":"Audio"},{"id":3,"typeString":"subtitles","title":"Subtitles"}],"initialize":function(){this.byID=e.reduce(this.types,function(e,t){return e[t.id]=t,e
},{}),this.byType=e.reduce(this.types,function(e,t){return e[t.typeString]=t,e},{})},"getStreamType":function(e){return this.byID[e]},"getStreamTypeByString":function(e){return this.byType[e]}});return new n}),define("plex/base/models/library/MetadataModel",["require","underscore","jquery","plex/base/utils/Parser","plex/base/utils/MediaUtil","plex/base/utils/types/MediaTypes","plex/base/utils/types/StreamTypes","plex/base/adapters/LocalizerAdapter","plex/base/models/BaseModel"],function(e,t,n,i,s,a,r,o,l){var c=l.extend({"idAttribute":"ratingKey","defaults":{"title":"","titleSort":"","tagline":"","rating":"","summary":"","year":"","studio":"","contentRating":"","originallyAvailableAt":"","originalTitle":"","thumb":"","banner":"","art":""},"omittedSaveAttrs":["updatedAt","thumb","banner","art","Media","Location"],"subcollections":["Media","Genre","Collection","Field","Writer","Director","Role","Country","Location"],"url":function(){return this.get("key")
},"urlRoot":function(){return this.get("key")},"cacheKey":function(e){return e.identifier&&!this.isLibraryItem(e)&&(e=this.normalizeKey(e)),e.key?this.server.id+"!"+this.normalizeChildrenKey(e.key).key:void 0},"initialize":function(){this.listenTo(this,"socket:timeline",function(e){5===e.state?this.fetch():9===e.state&&this.trigger("destroy",this,this.collection)})},"convert":function(e){var n=t.isObject(e)?e:i.parseXML(e);if(!n.ratingKey&&!n.key&&!n.id){var s=n.Directory||n.Video||n.Track||n.Photo||n;
s.identifier=n.identifier,s.mediaTagPrefix=n.mediaTagPrefix,s.mediaTagVersion=n.mediaTagVersion,s.allowSync=n.allowSync,s.librarySectionID=n.librarySectionID,s.librarySectionUUID=n.librarySectionUUID,n=s}i.parseBoolean(n,["allowSync","selected"]),i.parseInteger(n,["index","parentIndex","duration","viewOffset","viewCount","leafCount","viewedLeafCount","lastViewedAt","addedAt","updatedAt"]),i.parseArray(n,this.subcollections);var a=n.Media;return t.each(a,function(e){i.parseBoolean(e,["indirect","optimizedForStreaming"]),i.parseInteger(e,["id","duration","width","height","bitrate"]),i.parseArray(e,"Part");
var n=e.Part;t.each(n,function(e){i.parseBoolean(e,"optimizedForStreaming"),i.parseInteger(e,["id","duration","size"]),i.parseArray(e,"Stream"),e.exists="0"!==e.exists,e.accessible="0"!==e.accessible;var n=e.Stream;t.each(n,function(e){i.parseBoolean(e,"selected"),i.parseInteger(e,["id","index","streamType","duration","width","height","bitrate","bitDepth","samplingRate"])})})}),n},"parse":function(n){var i=this.convert(n);if(!i.key)return i;this.isLibraryItem(i)||(i=this.normalize(i)),"photo"===i.type&&/\/children$/.test(i.key)&&(i.type="photoAlbum"),"photoalbum"===i.type&&(i.type="photoAlbum"),i.isFolder=/\/folder\?parent\=/.test(i.key);
var a=this.normalizeChildrenKey(i.key);if(a.hasChildren){if(!this.get("children")){var l=e("plex/base/models/library/MetadataCollection"),c=new l([],{"server":this.server,"section":this.section,"parent":this});c.url=a.previousKey,this.set("children",c)}i.key=a.key}null!=i.viewedLeafCount&&(i.unviewedLeafCount=i.leafCount-i.viewedLeafCount);var d=i.Media,u=r.getStreamTypeByString("subtitles");return t.each(d,function(e){var n=t.first(e.Part);if(n&&n.Stream){var i=n.Stream,a=s.getStreams(e,{"streamType":u.id,"selected":!0}),r={"id":0,"streamType":u.id,"language":o.get().t("None")};
a.length||(r.selected=!0),i.unshift(r)}}),t.defaults(i,this.defaults),i},"normalize":function(e){return e=this.normalizeKey(e),e=this.normalizeType(e),e=this.normalizeMetadata(e)},"normalizeChildrenKey":function(e){var t=/(.*)\/children$/.exec(e),n=e;return t&&(e=t[1]),{"key":e,"previousKey":n,"hasChildren":!!t}},"normalizeKey":function(e){var t=e.key.split("/");return 1===t.length&&e.containerKey&&(e.hasInvalidKey=!0,e.originalKey=e.key,e.key=e.containerKey+"/"+e.key),e.ratingKey||(e.ratingKey=e.originalKey||e.key),e
},"normalizeType":function(e){return e.mediaType&&!e.type&&(e.type=e.mediaType,delete e.mediaType),e.elementName&&!e.type&&(e.type=e.elementName.toLowerCase()),/image/i.test(e.type)?e.type="photo":/(movie|episode|video)/i.test(e.type)&&(e.type="clip"),a.getMediaTypeByString(e.type)||(e.type="channelDirectory"),e},"normalizeMetadata":function(e){return e.label?(e.title=e.label,delete e.label):e.artist&&(e.track?(e.title=e.track,e.originalTitle=e.artist,e.parentTitle=e.album,e.grandparentTitle=e.albumArtist):e.album?(e.title=e.album,e.parentTitle=e.artist):e.title=e.artist,delete e.track,delete e.album,delete e.albumArtist,delete e.artist),e.totalTime&&(e.duration=e.totalTime,delete e.totalTime),e
},"purge":function(){var e=l.prototype.purge.apply(this,arguments);if(e){var t=this.get("children");t&&t.release()}},"resolveIndirect":function(e,i){var s=n.Deferred(),a=t.bind(function(){s.resolve(this)},this),r=t.bind(function(){s.reject(this)},this);if(e&&e.indirect)if(i)if(i.postURL){var o=this.server.get("cloud")||this.server.get("synced"),l=o?this.server.parent.get("primaryServer"):this.server,c=this.server.getXHROptions(i.postURL);l?(c.headers=c.headers||{},c.headers["X-Plex-Url"]=c.url,c.url=l.resolveUrl("/system/proxy"),n.ajax(c).done(t.bind(function(s,o,d){var u=d.getAllResponseHeaders()+"\r\n"+s;
c=l.getXHROptions(i.key+"&postURL="+encodeURIComponent(i.postURL)),c.type="POST",c.headers=c.headers||{},c.headers["X-Plex-Url"]=c.url,c.url=l.resolveUrl("/system/proxy"),c.data=u,n.ajax(c).done(t.bind(function(t){this.mergeIndirectResponse(t,e,i)?a():r()},this)).fail(r)},this)).fail(r)):r()}else{var d=this.server.getXHROptions(i.key);n.ajax(d).done(t.bind(function(t){this.mergeIndirectResponse(t,e,i)?a():r()},this)).fail(r)}else r();else a();return s.promise()},"mergeIndirectResponse":function(e,n,s){var a=i.parseXML(e);
if(!(a&&a.Video&&a.Video.Media&&a.Video.Media.Part))return!1;var r=this.parse(a.Video),o=t.first(r.Media),l=t.first(o.Part);if(o.Part.length>1){var c=t.indexOf(n.Part,s);c<o.Part.length&&(l=o.Part[c])}if(!o||!l)return!1;if(o.indirect=!1,t.extend(n,t.omit(o,"Part")),t.extend(s,l),a.httpHeaders){for(var d,u=new RegExp("([^=]+)=([^&]+)&?","g"),h={};d=u.exec(a.httpHeaders);)d[1]in h?(t.isArray(h[d[1]])||(h[d[1]]=[h[d[1]]]),h[d[1]].push(d[2])):h[d[1]]=d[2];this.set("indirectHttpHeaders",h,{"silent":!0})
}return!0},"getSaveParams":function(e){return t.each(e.Field,function(t){e[t.name+".locked"]=t.locked}),delete e.Field,t.each(["Collection","Director","Writer","Genre","Country"],function(n){n in e&&(t.isEmpty(e[n])?e[n.toLowerCase()+"[]"]="":t.each(e[n],function(t,i){e[n.toLowerCase()+"["+i+"].tag.tag"]=t.tag}),delete e[n])}),e},"batchAdd":function(e,i,s){var a=t.pluck(e,"id").join(","),r="/library/metadata/"+a+"/"+i+"/add?tag="+encodeURIComponent(s),o=t.extend(this.server.getXHROptions(r),{"type":"PUT"});
return n.ajax(o)},"getDownloadUrl":function(){var e=t.first(this.get("Media"));if(e){var n=t.first(e.Part);if(n&&n.key)return this.server.resolveUrl(n.key,{"appendToken":!0})}return""},"getFilepath":function(){var e=t.first(this.get("Media"));if(e){var n=t.first(e.Part);if(n)return n.file}return null},"getLocation":function(){var e=t.first(this.get("Location"));return e?e.path:this.getFilepath()},"getMediaKey":function(){var e=t.first(this.get("Media")),n=this.get("key");if(e){var i=t.first(e.Part);
if(i)return i.key}return n},"isLibraryItem":function(e){var t=e?e.identifier:this.get("identifier");if(t)return"com.plexapp.plugins.library"===t;var n=e?e.key:this.get("key");return/^(\/sync\/[A-Za-z0-9-\/]*)?\/library\//.test(n)}});return c}),define("plex/base/models/library/MetadataCollection",["underscore","plex/base/utils/Parser","plex/base/mixins/PaginationMixin","plex/base/models/BaseCollection","plex/base/models/library/MetadataModel"],function(e,t,n,i,s){var a=i.extend({"model":s,"mixins":n,"subcollections":["Directory","Video","Track","Photo"],"collectionProperties":["key","totalSize","viewGroup","allowSync","title","grandparentTitle","art"],"url":function(){var t=this.section||this.parent;
return t?e.result(t,"url"):""},"initialize":function(e,t){t||(t={}),this.allowAllLeaves=t.allowAllLeaves,this.populatedRange={"start":0,"end":0}},"parse":function(n){if(e.isString(n)){var i=this.subcollections.join("|"),s=new RegExp("<("+i+")","g"),a=new RegExp("</("+i+")>","g");n=n.replace(s,'<Metadata elementName="$1"'),n=n.replace(a,"</Metadata>")}var r=this.convert(n);null==r.totalSize&&(r.totalSize=r.size),t.parseInteger(r,"totalSize"),t.parseBoolean(r,"allowSync"),t.parseArray(r,"Metadata"),e.each(this.collectionProperties,function(e){var t=this[e],n=r[e],i=this.section?this.section.get("currentSubset").id:null,s=i&&"all"!==i&&"folder"!==i;
s&&"totalSize"===e&&n>200&&(n=200),void 0!==n&&t!==n&&(this[e]=n,this.trigger("change:"+e,this,n))},this);var o=e.result(this,"url");return e.each(r.Metadata,function(e){e.containerKey=o,r.identifier&&(e.identifier=r.identifier),r.mediaTagPrefix&&(e.mediaTagPrefix=r.mediaTagPrefix),r.mediaTagVersion&&(e.mediaTagVersion=r.mediaTagVersion)},this),this.allowAllLeaves?r.Metadata:e.reject(r.Metadata,function(e){var t=/\/allLeaves$/.test(e.key);return t&&this.totalSize&&(this.totalSize-=1),t},this)},"remove":function(){i.prototype.remove.apply(this,arguments),n.remove.apply(this,arguments)
},"release":function(){this.totalSize=null,this.populatedRange&&(this.populatedRange.start=0,this.populatedRange.end=0),i.prototype.release.apply(this,arguments)},"splitByType":function(){var e={};return this.each(function(t){var n=t.get("type");e.hasOwnProperty(n)?e[n].push(t):e[n]=[t]}),e},"filterByType":function(e){var t=this.filter(function(t){return t.get("type")===e});return this.clone(t)}});return a}),define("plex/base/models/library/SectionMetadataCollection",["underscore","plex/base/utils/types/MediaTypes","plex/base/models/library/MetadataCollection","plex/base/models/library/section/MediaTypeModel"],function(e,t,n,i){var s=n.extend({"pageStart":0,"pageSize":0,"url":function(){var t=this.section.get("currentFolderKey");
if(t)return t;var n=e.result(this.section,"url"),i=this.section.get("currentSubset"),s=i.id;if(!this.section.get("allowAdvancedFilters")){var a=this.section.get("currentFilters");return a.length?a[0].values[0]:n+"/"+s}("recentlyAdded"===s||"newest"===s)&&(s="all");var r=n+"/"+s;return r+=r.indexOf("?")>-1?"&":"?",r+=this.getUrlParams()},"initialize":function(){n.prototype.initialize.apply(this,arguments),this.server.get("synced")&&(this.pageStart=null,this.pageSize=null)},"release":function(){n.prototype.release.apply(this,arguments),this.server.get("synced")?(this.pageStart=null,this.pageSize=null):(this.pageStart=0,this.pageSize=0)
},"getUrlParams":function(){var e=this.getFilterUrlParams({"sendType":!0});return this.section.get("refreshing")&&this.server.supports("timelineState")&&e.push("timelineState=1"),e.length?e.join("&"):""},"getFilterUrlParams":function(n){n||(n={});var i={},s=[],a=this.getMediaType().id;n.sendType&&a&&a!==t.getMediaTypeByString("photo").id&&(i.type=a);var r=this.section.get("currentFilters");e.each(r,function(e){e.values.length&&(i[e.key]=e.values.join(","))});var o=this.getSort();o&&(i.sort=o);for(var l in i)s.push("unviewedLeafCount"===l?l+">="+i[l]:l+"="+i[l]);
return s},"getMediaType":function(){var e=this.section.get("currentType"),n=this.section.get("currentSubset");if(e||(e=t.getMediaTypeByString(this.section.get("type")),this.section.set("currentType",new i(e))),/^(onDeck|recentlyAdded|recentlyViewed|newest)$/.test(n.id)){if(e.id===t.getMediaTypeByString("show").id)return t.getMediaTypeByString("episode");if(e.id===t.getMediaTypeByString("artist").id)return t.getMediaTypeByString("album")}return this.parent&&"season"===this.parent.get("type")?t.getMediaTypeByString("episode"):e
},"getSort":function(){var e=this.section.get("currentSort"),t=this.section.get("currentSubset").id;return"recentlyAdded"===t?"addedAt:desc":"newest"===t?"originallyAvailableAt:desc":e?e.id+":"+e.get("direction"):!1}});return s}),define("plex/base/models/library/section/SectionModel",["underscore","plex/base/utils/Parser","plex/base/utils/types/SubsetTypes","plex/base/models/BaseModel","plex/base/models/library/section/SectionSubsetModel","plex/base/models/library/section/SectionSubsetCollection","plex/base/models/library/section/MediaTypeCollection","plex/base/models/library/section/FilterCollection","plex/base/models/library/section/LinearFilterCollection","plex/base/models/library/section/SortCollection","plex/base/models/library/section/AlphanumericCollection","plex/base/models/library/SectionMetadataCollection"],function(e,t,n,i,s,a,r,o,l,c,d,u){var h=i.extend({"idAttribute":"key","defaults":function(){return{"selecting":!1,"selectedModels":[],"currentType":null,"currentFilters":[],"currentSort":null,"currentFirstCharacter":null,"currentFolderKey":null}
},"url":function(){if(this.isNew())return e.result(this,"urlRoot")||e.result(this.collection,"url");var t=/\D+/.test(this.id),n=t?this.id:"/library/sections/"+this.id;return n},"whitelistedAttrs":["key","uuid","title","type","thumb","art","language","agent","scanner","createdAt","updatedAt","allowAdvancedFilters","refreshing","Location"],"whitelistedSaveAttrs":["name","title","type","agent","scanner","language","Location"],"cacheKey":function(e){return e.key?this.server.id+"!"+e.key:void 0},"initialize":function(){var t={"server":this.server,"section":this},i=this.get("allowAdvancedFilters")?o:l;
this.set("currentSubset",new s(n.getSubsetType("all"),t)),this.set("subsets",new a([],t)),this.set("types",new r([],t)),this.set("filters",new i([],t)),this.set("sorts",new c([],t)),this.set("alphanumeric",new d([],t));var h=new u([],t);h.on("change:allowSync",e.bind(function(e,t){this.set("allowSync",t)},this)),this.set("items",h)},"convert":function(n){var i=e.isObject(n)?n:t.parseXML(n);return t.parseBoolean(i,["filters","refreshing"]),t.parseInteger(i,["createdAt","updatedAt"]),t.parseArray(i,"Location"),i
},"parse":function(t){var n=this.convert(t);return n.allowAdvancedFilters=n.filters,n=e.pick(n,this.whitelistedAttrs)},"changedAttributes":function(){var t=i.prototype.changedAttributes.apply(this,arguments);return t&&(t=e.pick(t,this.whitelistedSaveAttrs)),t},"getSaveParams":function(){var t=i.prototype.getSaveParams.apply(this,arguments);return t=e.pick(t,this.whitelistedSaveAttrs),"title"in t&&(t.name=t.title,delete t.title),e.isObject(t.type)&&(t.type=t.type.typeString),"Location"in t&&(t.location=e.map(t.Location,function(e){return e.path
}),delete t.Location),t},"getSyncTitle":function(t){var n=this.get("title"),i=[],s=this.get("currentSubset"),a=this.get("currentFilters");return t?(e.each(t,function(e){i.push(e.get("title"))}),i=i.join(", "),n+": "+i):"all"!==s.id?n+": "+s.get("title"):a.length?(e.each(a,function(e){i.push(e.titles.join(", "))}),n+": "+i.join(",")):n}});return h}),define("plex/base/models/library/section/SectionCollection",["plex/base/models/BaseCollection","plex/base/models/library/section/SectionModel"],function(e,t){var n=e.extend({"model":t,"url":"/library/sections","parse":function(e){return this.convert(e,"Directory")
}});return n}),define("plex/base/models/library/PlayQueueMetadataModel",["underscore","plex/base/models/library/MetadataModel"],function(e,t){var n=t.extend({"idAttribute":"playQueueItemID","propagatedAttributes":["viewOffset","viewCount"],"cacheKey":function(e){return e.playQueueItemID?this.server.id+"!"+e.playQueueItemID:void 0},"initialize":function(){t.prototype.initialize.apply(this,arguments),this.listenTo(this,"change",function(){var n=this.changedAttributes(),i=e.intersection(e.keys(n),this.propagatedAttributes);
e.each(i,function(n){var i=new t({"key":this.get("key")},{"server":this.server,"onlyIfCached":!0});e.isEmpty(i)||(i.set(n,this.get(n)),i.release())},this)})}});return n}),define("plex/base/models/library/LocalPlayQueueMetadataCollection",["underscore","jquery","backbone","plex/base/utils/Parser","plex/base/utils/types/MediaTypes","plex/base/models/BaseCollection","plex/base/models/library/PlayQueueMetadataModel"],function(e,t,n,i,s,a,r){var o=function(t){return t instanceof n.Collection?e(t.models):t.get("children")
},l=function(e){var t=e.get("type"),n="channelDirectory"===t,i=n||t&&"directory"===s.getMediaTypeByString(t).element,a=void 0===e.length;return a&&!i},c=function(t){var n=this._nextPlayQueueItemID++,i=e.extend({},t.attributes,{"playQueueItemID":n}),s=new r(i,{"server":t.server,"parent":t.parent});return s},d=a.extend({"model":r,"initialize":function(){this.playQueueSelectedItemID=null,this._nextPlayQueueItemID=0,this.hasUserAdditions=!1},"isItemQueueable":function(t){if(t.get("currentSubset")&&"photo"!==t.viewGroup)return!1;
if("photoAlbum"===t.get("type")&&!t.isLibraryItem())return!1;var n=["track","episode","movie","photo","clip","playlistItem","photoAlbum","album","season"],i=e(n).contains(t.get("type")),s=o(t),a=s&&s.any(l);return i||a},"supports":function(e){var t=e&&e.unwatched;return!t},"addContent":function(n,i){i||(i={});var s=t.Deferred().resolve().promise();return this.isItemQueueable(n)&&(n.get("children")&&e.result(n.get("children"),"url")&&(s=s.then(function(){return n.get("children").populate()})),s=s.done(e.bind(function(){this.lastAddedItem=n,this.length&&(this.hasUserAdditions=!0);
var t=this.indexOf(this.selectedItem());-1===t&&(t=0);var s=i.next?{"at":t+1}:{},a=o(n);if(a){var r=a.filter(l);i.shuffle&&(r=e(r).shuffle());var d=e.map(r,e.bind(c,this));if(this.add(d,s),i.firstItem){var u=e.find(d,function(e){return e.get("ratingKey")===i.firstItem.get("ratingKey")});u&&(this.playQueueSelectedItemID=u.get("playQueueItemID"))}}else this.add(c.apply(this,[n]),s);!this.playQueueSelectedItemID&&this.first()&&(this.playQueueSelectedItemID=this.first().get("playQueueItemID"))},this))),s
},"removeItem":function(e){e.playQueueItemID!==this.playQueueSelectedItemID&&(this.hasUserAdditions=!0,this.remove(e))},"moveItem":function(e,t){if(e!==this.playQueueSelectedItemID){var n=this.findWhere({"playQueueItemID":e});this.remove(n);var i=t||this.playQueueSelectedItemID,s=this.findWhere({"playQueueItemID":i}),a=this.indexOf(s)+1;this.hasUserAdditions=!0,this.add(n,{"at":a})}},"fetch":function(){},"selectedItem":function(){return this.findWhere({"playQueueItemID":this.playQueueSelectedItemID})
},"setSelectedItem":function(e){this.playQueueSelectedItemID=e.get("playQueueItemID")},"yieldOwnership":function(){var n=this.lastAddedItem,i=e.result(n.get("children")||n,"url");return t.Deferred().resolve(i).promise()},"takeOwnership":function(){return t.Deferred().resolve().promise()}});return d}),define("plex/base/models/library/PlayQueueMetadataCollection",["underscore","jquery","plex/base/utils/Parser","plex/base/models/BaseCollection","plex/base/models/library/PlayQueueMetadataModel"],function(e,t,n,i,s){var a={"audio":"Track","photo":"Photo","video":"Video"},r=i.extend({"model":s,"url":function(){return"/playQueues/"+this.playQueueID
},"isItemQueueable":function(t){var n=-1!==e(t).result("url").indexOf("/library/"),i=-1!==e(t).result("url").indexOf("/folder"),s=t.get("type")&&("photoAlbum"===t.get("type")||"photo"===t.get("type")),a="photo"===t.viewGroup||s,r=!1;return t.get("currentSubset")&&(r="all"!==t.get("currentSubset").id),n&&!i&&!a&&!r},"supports":function(){return!0},"initialize":function(e,t){this.mediaType=t.type,this.allowedElement=a[t.type],this.hasUserAdditions=!1,this.owned=!0,this.playQueueVersion=0},"parse":function(t){var i=this.convert(t);
if(n.parseInteger(i,"playQueueVersion"),i.playQueueVersion>this.playQueueVersion){var s=function(e){var t="playQueue"+e;this[t]=i[t]};e.each(["ID","Version","SelectedItemID"],s,this)}return n.parseArray(i,this.allowedElement),i[this.allowedElement]},"_ajax":function(n,i){var s=e.extend(this.server.getXHROptions(i),{"type":n}),a=t.ajax(s),r=function(e){this.reset(e,{"parse":!0})};return a.done(e.bind(r,this)),a},"addContent":function(n,i){i||(i={});var s=n.get("librarySectionUUID")||n.get("uuid");
if(!s){var a=n.server.getSectionForItem(n);e.isEmpty(a)||(s=a.get("uuid"))}var r="library://"+s,o=e(n).result("url");if(n.get("items")){var l=n.get("items").getFilterUrlParams(),c=l.indexOf("unwatchedLeaves=1");c>-1&&l.splice(c,1,"unwatched=1"),l.push("sourceType="+n.get("currentType").id);var d=n.get("currentSubset").id;r+="/directory/"+encodeURIComponent(o),r+=encodeURIComponent("/"+d+"?"+l.join("&"))}else i.unwatched?(o+="show"===n.get("type")?"/allLeaves?unwatched=1":"/children?unwatched=1",r+="/directory/"+encodeURIComponent(o)):r+=o.match("/children")?"/directory/"+encodeURIComponent(o):"/item/"+encodeURIComponent(o);
var u={"uri":r,"type":this.mediaType};return i.firstItem&&(u.key=i.firstItem.get("key")),u.shuffle=i.shuffle?1:0,i.continuous&&(u.continuous=1),this.playQueueID?(u.next=i.next?1:0,this.hasUserAdditions=!0,this._addContentPromise=this._ajax("PUT",this.url()+"?"+t.param(u,!0))):this._addContentPromise=this._ajax("POST","/playQueues?"+t.param(u,!0)),this._addContentPromise},"removeItem":function(e){if(e.get("playQueueItemID")!==this.playQueueSelectedItemID){this.hasUserAdditions=!0;var t=this.url()+"/items/"+e.get("playQueueItemID");
return this._ajax("DELETE",t)}},"moveItem":function(e,n){if(e!==this.playQueueSelectedItemID){this.hasUserAdditions=!0;var i={"after":n||this.playQueueSelectedItemID},s=this.url()+"/items/"+e+"/move?"+t.param(i);return this._ajax("PUT",s)}},"selectedItem":function(){return this.findWhere({"playQueueItemID":this.playQueueSelectedItemID})},"setSelectedItem":function(e){this.playQueueSelectedItemID=e.get("playQueueItemID")},"yieldOwnership":function(){return this.owned=!1,this._addContentPromise.then(e.bind(function(){return this.length>0?e.result(this,"url")+"?own=1&window=200":null
},this))},"takeOwnership":function(){var n=t.Deferred().resolve().promise();if(!this.owned){this.owned=!0;var i=e.result(this,"url")+"?own=1";n=this._ajax("GET",i)}return n}});return r}),define("plex/base/models/library/PlayQueues",["underscore","plex/base/utils/BaseClass","plex/base/mixins/EventMixin","plex/base/utils/types/MediaTypes","plex/base/models/library/LocalPlayQueueMetadataCollection","plex/base/models/library/PlayQueueMetadataCollection"],function(e,t,n,i,s,a){var r=t.extend({"mixins":n,"initialize":function(e){this.server=e.server,this._queues={"audio":null,"photo":null,"video":null},this.canCreateOnLocal=s.prototype.isItemQueueable,this.doesLocalSupport=s.prototype.supports
},"createFor":function(e,t){t=t||e;var n=i.getChildMediaType(t.get("type")).element;return this.canCreateOnServer(e)?this._queues[n]=new a([],{"type":n,"server":this.server}):this.canCreateOnLocal(e)&&(this._queues[n]=new s),this.trigger("change"),this._queues[n]},"getFor":function(e){var t=e.get("type");if(!t||"channelDirectory"===t)return null;var n=i.getChildMediaType(t).element,s=this._queues[n];return s&&s.isItemQueueable(e)?s:null},"remove":function(e){var t=this._queues[e];t&&(t.release(),this._queues[e]=null),this.trigger("change")
},"removeAll":function(){e.each(e.keys(this._queues),this.remove,this)},"canCreateOnServer":function(e){return this.server.supports("playQueues")&&!this.server.get("synced")&&a.prototype.isItemQueueable(e)},"doesServerSupport":function(e){return this.server.supports("playQueues")&&a.prototype.supports(e)},"canCreateFor":function(e,t){return this.canCreateOnServer(e)&&this.doesServerSupport(t)||this.canCreateOnLocal(e)&&this.doesLocalSupport(t)}});return r}),define("plex/base/models/server/ServerCloudAccountModel",["underscore","plex/base/utils/Parser","plex/base/models/BaseModel"],function(e,t,n){var i=n.extend({"url":"/myplex/account","whitelistedAttrs":["username","mappingState","mappingError","mappingErrorMessage","signInState","publicAddress","publicPort","privateAddress","privatePort","subscriptionActive","subscriptionState"],"isNew":function(){return!this.get("signedIn")
},"convert":function(n){var i=e.isObject(n)?n:t.parseXML(n);return i&&"undefined"==typeof i.mappingError&&(i.mappingError=null),i},"parse":function(t){var n=this.convert(t);return n=e.pick(n,this.whitelistedAttrs),"ok"===n.signInState?n.signedIn=!0:(n.signedIn=!1,n.username="",n.password=""),n}});return i}),define("plex/base/models/server/ServerSettingModel",["underscore","plex/base/utils/Parser","plex/base/models/BaseModel"],function(e,t,n){var i=n.extend({"idAttribute":"id","url":"/:/prefs","defaults":{"type":"string","summary":"","label":"","group":""},"whitelistedAttrs":["id","label","default","summary","value","type","group","advanced","option","hidden","enumValues","values"],"convert":function(n){var i=e.isObject(n)?n:t.parseXML(n);
return"bool"===i.type?t.parseBoolean(i,"value"):"int"===i.type&&t.parseInteger(i,"value"),t.parseBoolean(i,["advanced","hidden"]),i},"parse":function(t){var n=this.convert(t);if(n=e.pick(n,this.whitelistedAttrs),n.enumValues&&!e.isArray(n.enumValues)&&(n.enumValues=e.map(n.enumValues.split("|"),function(e){var t=e.indexOf(":");return t>0?{"label":e.slice(t+1),"value":e.slice(0,t)}:{"label":e,"value":e}})),"enum"===n.type&&n.values&&!e.isArray(n.values)){var i=0;n.enumValues=e.map(n.values.split("|"),function(e){return{"label":e,"value":i++}
})}return n},"getSaveParams":function(t){if(e.has(t,"FriendlyName")&&this.server.set("friendlyName",t.FriendlyName),e.has(t,"allowMediaDeletion")&&this.server.set("allowMediaDeletion","1"==t.allowMediaDeletion),e.isEmpty(t)){var n={};return n[this.get("id")]=this.get("value"),n}return"value"in t&&(t[this.get("id")]=t.value,delete t.value),t}});return i}),define("plex/base/models/server/ServerSettingCollection",["underscore","plex/base/models/BaseCollection","plex/base/models/server/ServerSettingModel"],function(e,t,n){var i=t.extend({"model":n,"url":"/:/prefs","initialize":function(){this.server.on("socket:setting",function(e){var t=this.get(e.id);
t&&(e=t.parse(e),t.set("value",e.value),"FriendlyName"===e.id&&e.value?this.server.set("friendlyName",e.value):"allowMediaDeletion"===e.id&&this.server.set("allowMediaDeletion",e.value))},this)},"parse":function(t){var n=this.convert(t,"Setting");return e.filter(n,function(e){return e.id})}});return i}),define("plex/base/models/PaginatedCollection",["plex/base/models/BaseCollection"],function(e){var t=e.extend({"pageSize":10,"pages":function(){return Math.max(Math.ceil(this.length/this.pageSize),1)
},"page":function(e,t){t||(t={});var n,i=0;return n=t.reverse?this.length-e*this.pageSize:e*this.pageSize-this.pageSize,0>n&&(i=n,n=0),this.models.slice(n,n+this.pageSize+i)}});return t}),define("plex/base/models/server/ServerAlertModel",["plex/base/models/BaseModel"],function(e){var t=0,n=e.extend({"idAttribute":"id","parse":function(e){var n=e;return n.time=new Date,n.id="evt"+t++,"preference"==n._type&&(n.value=""+n.value),n}});return n}),define("plex/base/models/server/ServerAlertCollection",["underscore","plex/base/models/PaginatedCollection","plex/base/models/server/ServerAlertModel"],function(e,t,n){var i=t.extend({"model":n,"url":"/servers","pageSize":20,"limit":1e3,"initialize":function(){this.startTime=new Date,this.listenTo(this.server,"socket:setting",this.onSettingChange),this.listenTo(this.server,"socket:timeline",this.onTimeline),this.listenTo(this.server,"socket:status",this.onStatus),this.listenTo(this.server,"socket:playing",this.onPlaying),this.listenTo(this.server,"socket:websocket",this.onWebSocket)
},"add":function(){this.length+1>this.limit&&this.remove(this.at(0)),t.prototype.add.apply(this,arguments)},"onSettingChange":function(t){this.add(e.extend({"_type":"setting"},t),{"parse":!0})},"onTimeline":function(t){1!==t.state&&this.add(e.extend({"_type":"timeline"},t),{"parse":!0})},"onStatus":function(t){"ProgressNotification"!==t._elementType&&this.add(e.extend({"_type":"status"},t),{"parse":!0})},"onPlaying":function(t){this.add(e.extend({"_type":"playing"},t),{"parse":!0})},"onWebSocket":function(t){this.add(e.extend({"_type":"websocket"},t),{"parse":!0})
}});return i}),define("plex/base/models/server/TranscodeJobModel",["underscore","plex/base/utils/Parser","plex/base/models/BaseModel"],function(e,t,n){var i=n.extend({"idAttribute":"syncItemId","whitelistedAttrs":["syncItemId","syncItemTitle","key","type","progress","speed","remaining","size","title","thumb"],"convert":function(n){var i=e.isObject(n)?n:t.parseXML(n);return t.parseInteger(i,["syncItemId","speed"]),i},"parse":function(t){var n=this.convert(t);return n=e.pick(n,this.whitelistedAttrs)
}});return i}),define("plex/base/models/server/TranscodeJobCollection",["underscore","plex/base/models/BaseCollection","plex/base/models/server/TranscodeJobModel"],function(e,t,n){var i=t.extend({"model":n,"url":"/sync/transcodeQueue","parse":function(e){return this.convert(e,"TranscodeJob")}});return i}),define("plex/base/models/server/SessionModel",["underscore","plex/base/utils/Parser","plex/base/models/library/MetadataModel"],function(e,t,n){var i=n.extend({"idAttribute":"sessionKey","cacheKey":function(e){return this.server.id+"!"+e.sessionKey
}});return i}),define("plex/base/models/server/SessionCollection",["underscore","plex/base/models/library/MetadataCollection","plex/base/models/server/SessionModel"],function(e,t,n){var i=t.extend({"model":n,"url":"/status/sessions"});return i}),define("plex/base/models/server/ServerModel",["underscore","jquery","backbone","plex/base/utils/Dispatcher","plex/base/utils/Logger","plex/base/mixins/ServerMixin","plex/base/models/BaseModel","plex/base/models/library/section/SectionModel","plex/base/models/library/section/SectionCollection","plex/base/models/library/PlayQueues","plex/base/models/server/ServerCloudAccountModel","plex/base/models/server/ServerSettingCollection","plex/base/models/server/ServerAlertCollection","plex/base/models/server/TranscodeJobCollection","plex/base/models/server/SessionCollection"],function(e,t,n,i,s,a,r,o,l,c,d,u,h,p,f){var m=r.extend({"mixins":a,"defaults":function(){return e.extend(a.defaults.apply(this,arguments),{"cloudAccount":new d({},{"server":this}),"sections":new l([],{"server":this}),"settings":new u([],{"server":this}),"alerts":new h([],{"server":this}),"transcodeJobs":new p([],{"server":this}),"sessions":new f([],{"server":this}),"playQueues":new c({"server":this})})
},"constructor":function(){return this.connections=[],this.populatePromise=t.Deferred(),r.prototype.constructor.apply(this,arguments)},"initialize":function(){this.listenTo(this,"change:machineIdentifier",this.onMachineIdentifierChange)},"fetch":function(){return n.Model.prototype.fetch.apply(this,arguments)},"release":function(e){r.prototype.release.apply(this,arguments);var t=this.get("sections"),n=this.get("sessions"),i=this.get("playQueues");t.release([],e),n.release([],e),i.removeAll()},"merge":function(t){t.get("bundled")&&this.set("bundled",!0),e.each(t.connections,function(t){s.log("Merging connection ("+t.address+") into "+this.get("friendlyName")),this.addConnection(e.pick(t,"scheme","address","port","accessToken"))
},this),delete this.collection._byId[t.id],delete this.collection._byId[t.cid];var n=this.collection.indexOf(t);this.collection.models.splice(n,1),this.collection.length--,this.collection._removeReference(t),t.release({"force":!0}),this.collection._byId[this.id]=this},"toLiteJSON":function(){return this.pick(["friendlyName","machineIdentifier","accessToken","cloud","shared","synced"])},"addConnection":function(n){var i=e.findWhere(this.connections,{"address":n.address,"port":n.port});if(i){if(i.available||i.accessToken||!n.accessToken)return i;
i.pending=!0,i.accessToken=n.accessToken}else n.pending=!0,n.isLocalAddress=this.isLocalAddress(n.address),this.connections.push(n);return"rejected"===this.populatePromise.state()&&(this.populatePromise=new t.Deferred,this.set("authorized",null)),this.trigger("change:connections",this,this.connections),n},"hasLocalConnection":function(){var e=this.get("activeConnection");return e?e.isLocalAddress:null},"canBePrimary":function(){return this.get("synced")||this.get("cloud")?!1:this.get("shared")&&!this.get("multiuser")?!1:this.get("available")&&this.get("authorized")&&!this.get("mixedContent")?!0:!1
},"getSectionForItem":function(t){if(t.section)return t.section;var n=new o({"key":t.get("librarySectionID")},{"server":t.server,"onlyIfCached":!0});return e.isEmpty(n)||n.release(),n},"onMachineIdentifierChange":function(){var e=this.cacheKey(this.attributes);if(this._cache.hasOwnProperty(e)){var t=this._cache[e];t.get("connected")?t.merge(this):(this.merge(t),this.refreshCacheKey())}else this.refreshCacheKey()}});return m}),define("plex/base/models/server/ServerCollection",["plex/base/models/BaseCollection","plex/base/models/server/ServerModel"],function(e,t){var n=e.extend({"model":t,"url":"/servers","parse":function(e){return this.convert(e,"Server")
},"comparator":function(e){var t=e.get("friendlyName")||"",n=e.get("shared"),i=e.get("synced"),s=n?"1":"0";return s+=i?"1":"0",s+=t.toLowerCase()},"toLiteJSON":function(){return this.map(function(e){return e.toLiteJSON()})}});return n}),define("plex/base/models/server/CloudServerModel",["underscore","jquery","plex/base/utils/Logger","plex/base/models/server/ServerModel","plex/base/models/library/PlayQueues"],function(e,t,n,i,s){var a=i.extend({"serversUrl":"/pms/servers.xml?includeLite=1","defaults":function(){return{"machineIdentifier":"myPlex","friendlyName":"Cloud","cloud":!0,"downForMaintenance":!1,"plexPassUrl":"https://plex.tv/subscription/about","accountUrl":"https://plex.tv/users/edit","cloudSyncUrl":"https://plex.tv/cloudsync/providers","appsUrl":"https://plex.tv/downloads","helpUrl":"http://support.plex.tv/hc/en-us","playQueues":new s({"server":this})}
},"initialize":function(){},"testConnection":function(i){var s=this.get("friendlyName"),a=this.resolveUrl("/pms/:/ip",{"connection":i}),r=t.ajax(this.getXHROptions(a));n.info("Testing connection to "+s+" at "+a),r.done(e.bind(function(){n.success("Setting active connection for "+s+" ("+a+")"),this.set({"connected":!0,"available":!0,"downForMaintenance":!1,"activeConnection":i})},this)),r.fail(e.bind(function(e){n.error(s+" is unavailable at "+a+" (Status "+e.status+")"),this.set({"connected":!1,"available":!1,"downForMaintenance":503===e.status}),this.populatePromise.rejectWith(this,[this,e])
},this))}});return a.prototype._cache=i.prototype._cache,a}),define("plex/base/models/player/PlexPlayerModel",["plex/base/models/server/ServerModel","plex/base/models/library/MetadataCollection"],function(e,t){var n=e.extend({"initialize":function(){this.set("activeConnection",this.connections[0]),this.set("nowPlaying",new t([],{"server":this.server}))}});return n}),define("plex/base/models/player/PlexPlayerCollection",["plex/base/models/server/ServerCollection","plex/base/models/player/PlexPlayerModel"],function(e,t){var n=e.extend({"model":t,"url":"/clients"});
return n}),define("plex/base/models/player/CastPlayerModel",["underscore","jquery","plex/base/models/BaseModel","plex/base/models/library/MetadataCollection"],function(e,t,n,i){var s=n.extend({"whitelistedAttrs":["id","ipAddress","isTabProjected","name"],"initialize":function(){this.set("nowPlaying",new i([],{"server":this.server}))},"parse":function(n){var i=e.pick(n,this.whitelistedAttrs);return i.name=t("<div/>").html(i.name).text(),i.protocol="cast",i}});return s}),define("plex/base/models/player/CastPlayerCollection",["plex/base/models/BaseCollection","plex/base/models/player/CastPlayerModel"],function(e,t){var n=e.extend({"model":t});
return n}),define("plex/base/models/user/SyncItemModel",["underscore","plex/base/utils/Parser","plex/base/models/BaseModel"],function(e,t,n){var i=n.extend({"whitelistedAttrs":["id","version","rootTitle","title","metadataType","clientIdentifier","Server","Status","MediaSettings","Policy","Location"],"convert":function(n){var i=e.isObject(n)?n:t.parseXML(n);return t.parseInteger(i,["id","version"]),i},"parse":function(t){var n=this.convert(t);return n=e.pick(n,this.whitelistedAttrs),n.Location&&n.Location.uri&&(n.isDirectory=/library\:\/\/([\w-]+)\/directory\//.test(n.Location.uri)),n
}});return i}),define("plex/base/models/user/SyncItemCollection",["underscore","plex/base/models/BaseCollection","plex/base/models/user/SyncItemModel"],function(e,t,n){var i=t.extend({"model":n,"url":function(){return this.device?"/devices/"+this.device.get("clientIdentifier")+"/sync_items":"/servers/"+this.parent.id+"/sync_lists"},"parse":function(t){var n=this.convert(t),i=[],s=function(t,n){n&&(e.isArray(n)||(n=[n]),e.each(n,function(e){e.clientIdentifier=t,i.push(e)}))};return n.SyncList&&!e.isArray(n.SyncList)&&(n.SyncList=[n.SyncList]),e.each(n.SyncList,function(e){s(e.clientIdentifier,e.SyncItems.SyncItem)
}),n.SyncItems&&s(n.clientIdentifier,n.SyncItems.SyncItem),i},"filterByServer":function(e){var t=this.filter(function(t){var n=t.get("Server");return n&&n.machineIdentifier===e});return this.clone(t)}});return i}),define("plex/base/models/user/DeviceModel",["underscore","plex/base/utils/Parser","plex/base/models/BaseModel","plex/base/models/user/SyncItemCollection"],function(e,t,n,i){var s=n.extend({"whitelistedAttrs":["id","clientIdentifier","name","product","productVersion","platform","platformVersion","device","model","provides","screenResolution","screenDensity","lastSeenAt","SyncList"],"url":function(){return"/devices/"+this.id+".xml"
},"initialize":function(){this.set("syncItems",new i([],{"server":this.server,"device":this}))},"convert":function(n){var i=e.isObject(n)?n:t.parseXML(n);return t.parseInteger(i,"lastSeenAt"),i},"parse":function(t){var n=this.convert(t);return n=e.pick(n,this.whitelistedAttrs),n.isCloudSync="cloudsync"===n.platform,n.provides=n.provides?n.provides.split(","):[],n},"supports":function(t){var n=this.get("provides");return e.indexOf(n,t)>-1}});return s}),define("plex/base/models/user/DeviceCollection",["underscore","plex/base/models/BaseCollection","plex/base/models/user/DeviceModel"],function(e,t,n){var i=t.extend({"model":n,"url":"/devices.xml","parse":function(e){return this.convert(e,"Device")
},"filterSyncDevices":function(){var t=this.filter(function(e){return e.supports("sync-target")}),n=e.sortBy(t,function(e){return!e.get("isCloudSync")});return this.clone(n)},"filterByProducts":function(t){var n=this.filter(function(n){return e.contains(t,n.get("product"))});return this.clone(n)},"products":function(){var t=this.map(function(e){return e.get("product")});return e.uniq(t)}});return i}),define("plex/base/models/user/FriendModel",["underscore","plex/base/utils/Parser","plex/base/models/BaseModel"],function(e,t,n){var i=n.extend({"urlRoot":"/pms/friends","whitelistedAttrs":["id","title","username","email","thumb","recommendationsPlaylistId"],"convert":function(n){var i=e.isObject(n)?n:t.parseXML(n);
return t.parseInteger(i,"id"),i},"parse":function(t){var n=this.convert(t);return n=e.pick(n,this.whitelistedAttrs)}});return i}),define("plex/base/models/user/FriendCollection",["plex/base/models/BaseCollection","plex/base/models/user/FriendModel"],function(e,t){var n=e.extend({"model":t,"url":function(){return"/pms/friends/"+this.subset},"initialize":function(e,t){this.subset=t.subset||"all"},"parse":function(e){return this.convert(e,"User")}});return n}),define("plex/base/models/user/SocialNetworkModel",["underscore","plex/base/utils/Parser","plex/base/models/BaseModel"],function(e,t,n){var i=n.extend({"idAttribute":"key","whitelistedAttrs":["key","title","linked","maxLength"],"convert":function(n){var i=e.isObject(n)?n:t.parseXML(n);
return t.parseBoolean(i,["linked","maxLength"]),i},"parse":function(t){var n=this.convert(t);return n=e.pick(n,this.whitelistedAttrs)}});return i}),define("plex/base/models/user/SocialNetworkCollection",["plex/base/models/BaseCollection","plex/base/models/user/SocialNetworkModel"],function(e,t){var n=e.extend({"model":t,"url":"/pms/social/networks","parse":function(e){return this.convert(e,"Directory")}});return n}),define("plex/base/models/user/UserModel",["underscore","jquery","plex/base/utils/Logger","plex/base/utils/Parser","plex/base/adapters/StorageAdapter","plex/base/models/BaseModel","plex/base/models/user/DeviceCollection","plex/base/models/user/FriendCollection","plex/base/models/user/SocialNetworkCollection"],function(e,t,n,i,s,a,r,o,l){var c=a.extend({"url":"/users/account","defaults":{"signedIn":null,"subscription":!1},"whitelistedAttrs":["id","username","email","thumb","queueUid","queueEmail","accessToken"],"initialize":function(){this.listenTo(this,"change:signedIn",this.onSignedInChange),this.listenTo(this.server,"change:available",this.onServerAvailableChange);
var t={"server":this.server,"parent":this};this.set("devices",new r([],t)),this.set("friends",new o([],t)),this.set("friendRequests",new o([],e.extend({"subset":"requests"},t))),this.set("friendsRequested",new o([],e.extend({"subset":"requested"},t))),this.set("socialNetworks",new l([],t))},"convert":function(t){var n=e.isObject(t)?t:i.parseXML(t),s=n.subscription;return i.parseInteger(n,"id"),i.parseArray(n,"roles"),s&&(i.parseBoolean(s,"active"),i.parseArray(s,"feature")),n},"parse":function(t){var i=this.convert(t),s=i.roles,a=i.subscription,r=[];
if(i.accessToken=i.authenticationToken,i=e.pick(i,this.whitelistedAttrs),i.signedIn=!0,a){var o=a.feature;i.subscription=a.active,i.plan=a.plan,r.push("subscription: "+i.plan),i.features=e.reduce(o,function(e,t){return e[t.id]=!0,e},{}),r.push("features: "+e.keys(i.features).join(", "))}else r.push("subscription: none");return s&&s.length&&(s=s[0].role,i.roles=e.reduce(s,function(e,t){return e[t.id]=!0,e},{}),r.push("roles: "+e.keys(i.roles).join(", "))),n.group(i.username,r),i},"resolveServerPromise":function(e){"pending"!==this.server.populatePromise.state()&&(this.server.populatePromise=t.Deferred()),e?this.server.populatePromise.resolveWith(this,[this]):this.server.populatePromise.rejectWith(this,[this]),this.server.set("authorized",e)
},"isEmployee":function(){var e=this.get("roles");return!!(e&&"employee"in e)},"isNinja":function(){var e=this.get("roles");return this.isEmployee()||!!(e&&"ninja"in e)},"hasPlexPass":function(){var e=this.get("features");return!!(e&&"pass"in e)},"hasSync":function(){var e=this.get("features");return!!(e&&"sync"in e)},"onSignedInChange":function(e,t){t&&this.resolveServerPromise(t)},"onServerAvailableChange":function(t,n){if(null!=n){if(n===!1)return this.set("signedIn",!1),void this.resolveServerPromise(!1);
var i=s.get(),a=i.get({"key":"myPlexAccessToken","session":!0}),r=e.bind(function(e){this.server.set("accessToken",e),this.fetch().fail(function(){this.set("signedIn",!1),this.resolveServerPromise(!1)})},this),o=e.bind(function(){this.set("signedIn",!1),this.resolveServerPromise(!1)},this);a=a.then(function(e){return e},function(){return i.get({"key":"myPlexAccessToken"})}),a.done(r).fail(o)}}});return c}),define("plex/base/models/AppModel",["backbone","plex/base/models/AnnouncementCollection","plex/base/models/debug/LogCollection","plex/base/models/server/ServerCollection","plex/base/models/server/CloudServerModel","plex/base/models/player/PlexPlayerCollection","plex/base/models/player/CastPlayerCollection","plex/base/models/user/UserModel"],function(e,t,n,i,s,a,r,o){var l=e.Model.extend({"defaults":function(){return{"version":"dev","updateStatus":"none","authorized":!1,"multiserver":!1,"multiplayer":!1,"history":[]}
},"initialize":function(){var e=new s({"machineIdentifier":"myPlex"},{"parent":this});this.set("servers",new i([e],{"parent":this})),this.set("plexPlayers",new a([],{"parent":this})),this.set("castPlayers",new r),this.set("user",new o({},{"server":e})),this.set("announcements",new t),this.set("logs",new n([],{"parent":this}))}});return new l}),define("plex/base/adapters/PlayerControllerAdapter",["underscore","plex/base/utils/Dispatcher","plex/base/utils/Logger","plex/base/adapters/LocalizerAdapter","plex/base/models/AppModel"],function(e,t,n,i,s){var a=[],r={"get":function(o,l){l||(l={});
var c,d=s.get("primaryPlayer");c=d&&!l.forceLocal?d.get("protocol")||"legacy":"local";var u=e.filter(a,function(e){var t=c===e.protocol,n=o===e.type||"*"===e.type;return t&&n});if(u.length)return u[0].create(o);var h=i.get();return n.warn("A player did not match the protocol ("+c+") and type ("+o+")."),t.trigger("show:alert",{"type":"error","message":h.t("Playback of this media is not supported with the selected player.")}),r.get(o,{"forceLocal":!0})},"register":function(e){a.push(e)}};return r}),define("plex/base/mixins/LocalizerMixin",["underscore"],function(e){var t={"t":function(t){if(!t)return"";
var n=this.translations[this.language],i=t;n&&e.has(n,t)&&(i=n[t]);for(var s=1;s<arguments.length;)i=i.replace("{"+s+"}",arguments[s]),s++;return i}};return t}),define("plex/desktop/adapters/DesktopLocalizer",["underscore","jquery","plex/base/utils/BaseClass","plex/base/utils/Dispatcher","plex/base/mixins/LocalizerMixin","plex/base/models/SettingsModel"],function(e,t,n,i,s,a){var r=n.extend({"mixins":s,"languages":{"en":"en.json","en-GB":"en-GB.json","af":"af.json","ca":"ca.json","cs":"cs.json","sr":"sr.json","da":"da.json","de":"de.json","et":"et.json","es":"es.json","es-419":"es-419.json","el":"el.json","fr":"fr.json","hr":"hr.json","is":"is.json","it":"it.json","lt":"lt.json","hu":"hu.json","nl":"nl.json","no":"no.json","pl":"pl.json","pt":"pt.json","pt-BR":"pt-BR.json","ru":"ru.json","ro":"ro.json","sk":"sk.json","sl":"sl.json","fi":"fi.json","sv":"sv.json","tr":"tr.json","uk":"uk.json","bg":"bg.json","zh":"zh.json","zh-TW":"zh-TW.json","ja":"ja.json","ko":"ko.json","th":"th.json","fa":"fa.json","ar":"ar.json","he":"he.json"},"constructor":function(){this.basePath="translations/",this.translations={},a.on("change:language",function(e,t){this.load(t)
},this)},"load":function(n){if(this.language===n)return t.Deferred().resolve();if(!e.has(this.languages,n))return t.Deferred().reject();var s=this.language;if(this.language=n,e.has(this.translations,n))return i.trigger("change:language",n),t.Deferred().resolve();var a={"dataType":"json","url":this.basePath+this.languages[this.language]},r=e.bind(function(e){this.translations[this.language]=e,i.trigger("change:language",this.language)},this),o=e.bind(function(){this.language=s},this);return t.ajax(a).done(r).fail(o)
}});return new r}),define("plex/base/mixins/player/PlayerManagerMixin",["underscore","plex/base/models/server/ServerModel","plex/base/models/library/MetadataModel","plex/base/models/library/MetadataCollection"],function(e,t,n,i){var s={"updateNowPlaying":function(s){var a=this.player.get("nowPlaying"),r=s.machineIdentifier,o=s.key,l=s.containerKey,c="stopped"===s.state||"error"===s.state,d=a.findWhere({"timelineType":s.type});if(d){if(o===d.get("key")&&!c)return;a.remove(d)}if(o&&!c){"node"===r&&(r="myPlex");
var u=new t({"machineIdentifier":r},{"onlyIfCached":!0});if(!e.isEmpty(u)){if("myPlex"===r){var h=u.parent.get("primaryServer");o=h?h.resolveUrl(o):u.resolveUrl(o,{"connection":{"address":"node.plexapp.com","port":32400}})}var p=new n({"key":o},{"server":u,"skipCache":!0});if(p.set("timelineType",s.type),l&&"myPlex"!==r){var f=new i([],{"server":u,"skipCache":!0});f.url=l,f.fetch(),p.collection=f}var m=p.populate();m.done(function(){a.add(p)})}}},"onPrimaryPlayerChange":function(e,t){t&&t.get("protocol")===this.protocol?this.start(t):this.stop()
}};return s}),define("plex/base/adapters/AnalyticsAdapter",[],function(){var e,t,n={"register":function(t){e=t},"init":function(n,i){return t=new e(n,i)},"get":function(){return t}};return n}),define("plex/base/models/SessionStatsModel",["underscore","plex/base/models/StorageModel"],function(e,t){var n=t.extend({"storageKey":"sessionstats","incPlaybackCount":function(){this.save("playbackCount",this.get("playbackCount")+1)},"startSession":function(){var t=(new Date).getTime();this.save({"playbackCount":0,"startTime":t,"heartbeatTime":t}),setInterval(e.bind(function(){this.save("heartbeatTime",(new Date).getTime())
},this),1e4)}});return new n}),define("plex/base/mixins/player/PlayerControllerMixin",["underscore","jquery","plex/base/utils/MediaUtil","plex/base/adapters/AnalyticsAdapter","plex/base/models/SessionStatsModel"],function(e,t,n,i,s){var a={"playbackDuration":0,"request":function(t){return this.pendingRequests||(this.pendingRequests=[]),this.pendingRequests.push(t),t.always(e.bind(function(){var n=e.indexOf(this.pendingRequests,t);this.pendingRequests.splice(n,1)},this)),t},"waitForRequests":function(){return t.when.apply(t,this.pendingRequests)
},"mirror":function(){},"playPause":function(){"paused"===this.model.get("state")?this.play():this.pause()},"decreaseVolume":function(){var e=this.model.get("volume");this.setVolume(Math.round(Math.max(e-10,0)))},"increaseVolume":function(){var e=this.model.get("volume");this.setVolume(Math.round(Math.min(e+10,100)))},"seekBackward":function(){var e=this.model.get("position");this.setPosition(e-1e4)},"seekForward":function(){var e=this.model.get("position");this.setPosition(e+1e4)},"stepBackward":function(){var e=this.model.get("duration"),t=this.model.get("position");
this.setPosition(t-.1*e)},"stepForward":function(){var e=this.model.get("duration"),t=this.model.get("position");this.setPosition(t+.1*e)},"skipPrevious":function(){this.previousItem&&(this.model.set("item",this.previousItem),this.update())},"skipNext":function(){this.nextItem&&(this.model.set("item",this.nextItem),this.update())},"skipTo":function(e){this.model.set("item",e),this.update()},"remove":function(e){this.model.get("playlist").removeItem(e)},"move":function(e,t){this.model.get("playlist").moveItem(e,t)
},"getPreviousItem":function(e){e||(e={});var t=this.model.get("playlist"),n=this.model.get("item");if(!t||!n)return null;var i=t.get(n.id||n.cid),s=t.indexOf(i);return s>0?t.at(s-1):e.loop&&t.length>1?t.at(t.length-1):null},"getNextItem":function(e){e||(e={});var t=this.model.get("playlist"),n=this.model.get("item");if(!t||!n)return null;var i=t.get(n.id||n.cid),s=t.indexOf(i);return s+1<t.length?t.at(s+1):e.loop&&t.length>1?t.at(0):null},"timeline":function(i){return i||(i={}),e.defaults(i,this.model.attributes),this.local&&i.item?this.request(n.timeline(i)):t.Deferred().resolve().promise()
},"startTimeline":function(){this.local&&!this.timelineInterval&&(this.timelineInterval=setInterval(e.bind(this.timeline,this),n.timelineDelay))},"stopTimeline":function(){this.timelineInterval=clearInterval(this.timelineInterval),this.trackPlaybackEvent()},"ping":function(){return this.local?this.request(n.ping(this.model.get("transcodeServer"),this.session)):t.Deferred().resolve().promise()},"startPing":function(){var t=this.model.get("directPlay");"video"!==this.type||!this.local||t||this.pingInterval||(this.pingInterval=setInterval(e.bind(this.ping,this),n.pingDelay))
},"stopPing":function(){this.pingInterval=clearInterval(this.pingInterval)},"startPlaybackTracking":function(){this.local&&!this.playbackInterval&&(this.playbackInterval=setInterval(e.bind(function(){this.playbackDuration++},this),n.playbackDelay))},"stopPlaybackTracking":function(){this.playbackInterval=clearInterval(this.playbackInterval)},"trackPlaybackEvent":function(){if(this.local){s.incPlaybackCount();var e=i.get(),t=this.model.get("item"),n=t.get("identifier");!n&&t.parent&&(n=t.parent.get("identifier")),e.trackEvent({"eventCategory":"Playback","eventAction":t.get("type"),"eventLabel":n,"eventValue":this.playbackDuration}),this.playbackDuration=0
}}};return a}),define("plex/desktop/adapters/player/PlexPlayerController",["underscore","jquery","plex/base/utils/Dispatcher","plex/base/utils/BaseClass","plex/base/utils/MediaUtil","plex/base/mixins/EventMixin","plex/base/mixins/player/PlayerControllerMixin"],function(e,t,n,i,s,a,r){var o=i.extend({"mixins":[a,r],"local":!1,"constructor":function(e){this.type="audio"===e.type?"music":e.type,this.manager=e.manager},"load":function(n){this.model=n.model,this.model.set(e.defaults({"type":this.type,"volume":n.volume,"showStop":!0,"enableQueueActions":!1},this.model.controllerDefaults)),this.update(),this.listenTo(this.manager,"timeline",this.onTimeline),this.listenTo(this.model,{"change:item":this.onItemChange,"change:mediaIndex":this.onItemChange,"change:partIndex":this.onItemChange,"change:videoStreamID":this.onVideoStreamIDChange,"change:audioStreamID":this.onAudioStreamIDChange,"change:subtitleStreamID":this.onSubtitleStreamIDChange,"change:finished":this.onFinishedChange});
var i=this.model.get("item"),s=i.server.id,a=e.clone(i.server.get("activeConnection"));if("myPlex"===s&&(s="node",a.address="node.plexapp.com",this.model.set("playlist",null)),n.silent)return t.Deferred().resolve().promise();var r={"key":i.get("key"),"offset":n.offset||0,"machineIdentifier":s,"address":a.address,"port":a.port,"protocol":a.protocol||"http"},o=t.Deferred().resolve().promise(),l=this.model.get("playlist");return l&&(o=l.yieldOwnership().then(e.bind(function(e){r.containerKey=e},this))),o.then(e.bind(function(){var e="/player/playback/playMedia?"+t.param(r,!0);
return this.manager.request(e)},this)),o},"update":function(){var e={"loop":"photo"===this.type};this.currentItem=this.model.get("item"),this.previousItem=this.getPreviousItem(e),this.nextItem=this.getNextItem(e),this.hasPlayed=!1,this.model.set({"state":"buffering","ready":!1,"loaded":!1,"duration":0,"position":0,"startBuffer":0,"endBuffer":0,"enablePrevious":!!this.previousItem,"enableNext":!!this.nextItem})},"mirror":function(n){if(e(this.manager.player.get("protocolCapabilities")).contains("mirror")){var i=n.item,s=i.server,a=s.get("activeConnection"),r={"type":this.type,"key":i.get("key"),"machineIdentifier":s.id,"address":a.address,"port":a.port,"protocol":a.scheme};
return this.manager.request("/player/mirror/details?"+t.param(r,!0))}},"play":function(){return this.model.set("state","playing"),this.manager.request("/player/playback/play?type="+this.type)},"pause":function(){return this.model.set("state","paused"),this.manager.request("/player/playback/pause?type="+this.type)},"sendVolumeRequest":e.throttle(function(e){var n={"type":this.type,"volume":e},i="/player/playback/setParameters?"+t.param(n,!0);return this.manager.request(i)},500),"setVolume":function(e){return this.model.set("volume",e),this.sendVolumeRequest(e)
},"sendPositionRequest":e.throttle(function(e){var n={"type":this.type,"offset":e},i="/player/playback/seekTo?"+t.param(n,!0);return this.manager.request(i)},500),"setPosition":function(e){return this.model.get("enableSeekBar")?(this.model.set("position",e),this.sendPositionRequest(e)):void 0},"setStream":function(e,t){return this.manager.request("/player/playback/setStreams?"+e+"="+t+"&type="+this.type)},"skipPrevious":function(){return r.skipPrevious.apply(this,arguments),this.manager.request("/player/playback/skipPrevious?type="+this.type)
},"skipNext":function(){return r.skipNext.apply(this,arguments),this.manager.request("/player/playback/skipNext?type="+this.type)},"skipTo":function(e){return r.skipTo.apply(this,arguments),this.manager.request("/player/playback/skipTo?key="+e.get("key"))},"stop":function(){var e=this.model.get("playlist");return e&&e.takeOwnership(),this.model.set("state","stopped"),this.unload(),this.manager.request("/player/playback/stop?type="+this.type)},"unload":function(){this.manager.remove(this.type)},"onTimeline":function(e){if(this.type===e.type&&!e.continuing){var t=this.model.get("playlist"),n=this.model.get("item");
if(t&&e.key&&e.key!==n.get("key")){if(n=t.findWhere({"key":e.key}),!n)return;this.model.set("item",n),this.update()}("playing"===e.state||"paused"===e.state)&&(this.hasPlayed=!0),this.model.set({"mediaIndex":e.mediaIndex,"partIndex":e.partIndex,"partCount":e.partCount,"audioStreamID":e.audioStreamID,"videoStreamID":e.videoStreamID,"subtitleStreamID":e.subtitleStreamID,"state":e.state,"ready":!0,"loaded":"photo"===this.type?!1:!0,"finished":this.hasPlayed&&"stopped"===e.state,"duration":e.duration,"position":e.time,"volume":e.volume,"shuffle":e.shuffle,"repeat":e.repeat,"showPlayPause":e.controllable.indexOf("playPause")>-1,"showStop":e.controllable.indexOf("stop")>-1,"showVolume":e.controllable.indexOf("volume")>-1,"showVideoStream":e.controllable.indexOf("videoStream")>-1,"showAudioStream":e.controllable.indexOf("audioStream")>-1,"showSubtitleStream":e.controllable.indexOf("subtitleStream")>-1,"showShuffle":e.controllable.indexOf("shuffle")>-1,"showRepeat":e.controllable.indexOf("repeat")>-1,"enableNext":e.controllable.indexOf("skipNext")>-1,"enablePrevious":e.controllable.indexOf("skipPrevious")>-1,"enableSeekBar":e.controllable.indexOf("seekTo")>-1}),"video"===this.type&&s.setViewOffset(n,e.time,e.duration)
}},"onItemChange":function(){var t,n,i=this.model.get("item"),s=this.model.get("mediaIndex"),a=this.model.get("partIndex"),r=i.get("Media");if(t=s>1&&r.length>s?r[s]:e.first(r)){var o=t.Part;n=a>1&&o.length>a?o[a]:e.first(o)}this.model.set({"media":t,"part":n})},"onVideoStreamIDChange":function(e,t){null!=e.previous("videoStreamID")&&this.setStream("videoStreamID",t)},"onAudioStreamIDChange":function(e,t){null!=e.previous("audioStreamID")&&this.setStream("audioStreamID",t)},"onSubtitleStreamIDChange":function(e,t){null!=e.previous("subtitleStreamID")&&this.setStream("subtitleStreamID",t)
},"onFinishedChange":function(e,t){t&&n.trigger("hide:"+this.type)}});return o}),define("plex/desktop/adapters/player/PlexPlayerManager",["underscore","jquery","plex/base/utils/Dispatcher","plex/base/utils/BaseClass","plex/base/utils/Parser","plex/base/adapters/LocalizerAdapter","plex/base/mixins/EventMixin","plex/base/mixins/player/PlayerManagerMixin","plex/base/models/AppModel","plex/base/models/server/ServerModel","plex/base/models/library/MetadataModel","plex/base/models/library/MetadataCollection","plex/desktop/adapters/player/PlexPlayerController"],function(e,t,n,i,s,a,r,o,l,c,d,u,h){var p=i.extend({"mixins":[r,o],"types":["video","audio","photo"],"protocol":"plex","constructor":function(){e.bindAll(this,"error"),this.listenTo(l,"change:primaryPlayer",this.onPrimaryPlayerChange)
},"start":function(e){this.player=e,this.commandID=0,this.stopPolling=!1,this.poll()},"stop":function(){this.stopPolling=!0,this.pollRequest&&this.pollRequest.abort(),this.player&&this.player.get("nowPlaying").release(),e.each(this.types,function(e){this[e]=null},this)},"add":function(e){var t=this[e];return t?t:(t=new h({"type":e,"manager":this}),this[e]=t,t)},"remove":function(e){var t=this[e];t&&(t.stopListening(),this[e]=null)},"request":function(e,n){n||(n={}),n.skipIncrement||this.commandID++,e+=e.indexOf("?")>-1?"&":"?",e+="commandID="+this.commandID;
var i=this.player.useHostedHttps?this.player.server:this.player,s=i.getXHROptions(e);return s.headers["X-Plex-Target-Client-Identifier"]=this.player.id,t.ajax(s)},"poll":function(t){t||(t={});var n="/player/timeline/poll?wait=";n+=t.wait?"1":"0",this.pollRequest=this.request(n,{"skipIncrement":!0}),this.pollRequest.done(e.bind(function(e,t,n){this.player.id===n.getResponseHeader("X-Plex-Client-Identifier")&&this.onTimeline(e),this.poll({"wait":!0})},this)),this.pollRequest.fail(e.bind(function(){this.stopPolling||this.error()
},this))},"error":function(){var e=a.get();n.trigger("show:alert",{"type":"error","message":e.t("There was a problem connecting to this player.")}),l.set("primaryPlayer",null),l.get("plexPlayers").fetch({"reset":!0})},"onTimeline":function(t){{var n=s.parseXML(t);this.player.get("nowPlaying")}s.parseArray(n,"Timeline"),n.commandID<this.commandID||e.each(n.Timeline,function(e){s.parseInteger(e,["time","duration","volume"]),s.parseBoolean(e,["repeat","shuffle","continuing"]),e.controllable=e.controllable?e.controllable.split(","):[],this.trigger("timeline",e),this.updateNowPlaying(e)
},this)}});return p}),define("plex/desktop/adapters/player/CastPlayerController",["underscore","jquery","plex/base/utils/Dispatcher","plex/base/utils/BaseClass","plex/base/utils/MediaUtil","plex/base/mixins/EventMixin","plex/base/mixins/player/PlayerControllerMixin","plex/base/models/AppModel","plex/base/models/SettingsModel"],function(e,t,n,i,s,a,r,o,l){var c=i.extend({"mixins":[a,r],"local":!1,"constructor":function(t){e.bindAll(this,"skipPrevious","skipNext"),this.type="audio"===t.type?"music":t.type,this.manager=t.manager,this.references=1
},"load":function(n){if(this.model=n.model,this.model.set(e.defaults({"type":this.type,"volume":n.volume,"showPlayPause":!0,"showStop":!0,"showVolume":!0,"enableSeekBar":!0,"enableQueueActions":!1},this.model.controllerDefaults)),this.update(),this.listenTo(this.manager,"timeline",this.onTimeline),this.listenTo(this.model,"change:finished",this.onFinishedChange),n.silent)return t.Deferred().resolve().promise();var i=this.model.get("item"),a=this.model.get("playlist"),r=i.server,c=o.get("primaryServer"),d=(n.offset||0,s.getQualityInfo(i,l)),u=o.get("user"),h={"offset":n.offset/1e3,"directPlay":l.get("directPlay"),"directStream":l.get("directStream"),"quality":d.quality,"resolution":d.resolution,"bitrate":d.bitrate,"subtitleSize":l.get("subtitleSize"),"audioBoost":l.get("audioBoost"),"server":this.getServerInfo(r),"user":{"username":u.get("username")}};
c&&r.id!==c.id&&(h.primaryServer=this.getServerInfo(c));var p=t.Deferred().resolve().promise();return a&&(p=a.yieldOwnership().then(function(e){h.containerKey=e})),p=p.then(e.bind(function(){var e=new cast.MediaLoadRequest(i.get("key"));return e.title=i.get("title"),e.autoplay=!0,e.contentInfo=h,this.manager.progressInterval=clearInterval(this.manager.progressInterval),this.manager.request("loadMedia",[e]),this.update()},this))},"update":function(){var e={"loop":"photo"===this.type};this.currentItem=this.model.get("item"),this.previousItem=this.getPreviousItem(e),this.nextItem=this.getNextItem(e),this.hasPlayed=!1,this.model.set({"state":"buffering","ready":!1,"loaded":!1,"duration":0,"position":0,"startBuffer":0,"endBuffer":0,"enablePrevious":!!this.previousItem,"enableNext":!!this.nextItem})
},"mirror":function(e){var t=e.item,n=t.server,i=o.get("primaryServer"),s=o.get("user"),a={};a.type="SHOWDETAILS",a.src=t.get("key"),a.title=t.get("title"),a.contentInfo={"server":this.getServerInfo(n),"user":{"username":s.get("username")}},i&&n.id!==i.id&&(a.contentInfo.primaryServer=this.getServerInfo(i)),this.manager.request("sendMessage",["plex",a]),this.references--},"play":function(){this.model.set("playing",!0),this.model.set("paused",!1),this.pendingCondition=function(e){return"playing"===e.state
},this.manager.request("playMedia",new cast.MediaPlayRequest)},"pause":function(){this.model.set("playing",!1),this.model.set("paused",!0),this.pendingCondition=function(e){return"paused"===e.state},this.manager.request("pauseMedia",[])},"sendVolumeRequest":e.throttle(function(e){this.manager.request("setMediaVolume",new cast.MediaVolumeRequest(e))},500),"setVolume":function(e){this.model.set("volume",e),e/=100,this.pendingCondition=function(t){return t.volume===e},this.sendVolumeRequest(e)},"sendPositionRequest":e.debounce(function(e){this.manager.request("playMedia",new cast.MediaPlayRequest(e))
},500),"setPosition":function(e){this.model.set("position",e),e/=1e3,this.pendingCondition=function(t){return Math.round(t.position)>=Math.round(e)},this.sendPositionRequest(e)},"stop":function(){var e=this.model.get("playlist");e&&e.takeOwnership(),this.manager.progressInterval=clearInterval(this.manager.progressInterval),this.manager.request("sendMessage",["plex",{"type":"UNLOAD"}]),this.unload()},"unload":function(){this.manager.remove()},"skipPrevious":function(){this.manager.request("sendMessage",["plex",{"type":"PREVIOUS"}])
},"skipNext":function(){this.manager.request("sendMessage",["plex",{"type":"NEXT"}])},"getServerInfo":function(e){var t=e.get("activeConnection");return{"machineIdentifier":e.id,"address":t.address,"port":t.port,"protocol":t.scheme,"transcoderVideo":e.get("transcoderVideo")||!1,"transcoderAudio":e.get("transcoderAudio")||!1,"accessToken":e.get("accessToken"),"version":e.get("version")}},"onTimeline":function(t){var n=this.model.get("playlist"),i=this.model.get("item");if(n&&t.key&&t.key!==i.get("key")){if(i=n.findWhere({"key":t.key}),!i)return;
this.model.set("item",i),this.update()}var a=1e3*t.position,r=1e3*t.duration;if(s.setViewOffset(i,a,r),!e.isFunction(this.pendingCondition)||this.pendingCondition(t)){this.pendingCondition=null;var o=t.state;("playing"===o||"paused"===o)&&(this.hasPlayed=!0),this.model.set({"state":o,"ready":!0,"loaded":"photo"===this.type?!1:!0,"finished":this.hasPlayed&&"stopped"===t.state,"errorMessage":t.errorMessage,"duration":r,"position":a,"volume":100*t.volume})}},"onFinishedChange":function(e,t){t&&n.trigger("hide:"+this.type)
}});return c}),define("plex/desktop/adapters/player/CastPlayerManager",["underscore","plex/base/utils/Dispatcher","plex/base/utils/BaseClass","plex/base/adapters/LocalizerAdapter","plex/base/mixins/EventMixin","plex/base/mixins/player/PlayerManagerMixin","plex/base/models/AppModel","plex/base/models/SettingsModel","plex/base/models/server/ServerModel","plex/base/models/library/MetadataModel","plex/desktop/adapters/player/CastPlayerController"],function(e,t,n,i,s,a,r,o,l,c,d){var u,h="06ee44ee-e7e3-4249-83b6-f5d0b6f07f34_1",p="06ee44ee-e7e3-4249-83b6-f5d0b6f07f34",f=1e4,m=0,g=n.extend({"mixins":[s,a],"types":["video","audio","photo"],"protocol":"cast","constructor":function(){e.bindAll(this,"onMessage","onReceiverList","onActivityLaunch","onActivityStatus","onActivityStop","onMediaStatus"),this.backlog=[],this.listenTo(r,"change:primaryPlayer",this.onPrimaryPlayerChange),"undefined"!=typeof cast&&cast.isAvailable?this.load():window.addEventListener&&window.addEventListener("message",this.onMessage)
},"load":function(){o.populate({"reset":!0}).done(e.bind(function(){u=o.get("chromecastQA")?p:h,this.castApi=new cast.Api,this.castApi.addReceiverListener(u,this.onReceiverList)},this))},"start":function(t){this.player=t;var n=t.toJSON();n=e.omit(n,"protocol","nowPlaying");var i=new cast.LaunchRequest(u,n);i.description=new cast.LaunchDescription,this.castApi.launch(i,this.onActivityLaunch)},"stop":function(){this.remove(),this.player&&this.player.get("nowPlaying").release(),this.castActivityID&&this.castApi.stopActivity(this.castActivityID,this.onActivityStop)
},"add":function(e){return this.controller?(this.controller.references++,this.controller):(this.controller=new d({"id":++m,"type":e,"manager":this}),this.controller)},"remove":function(){this.controller&&(this.controller.stopListening(),--this.controller.references<=0&&(this.controller=null))},"request":function(t,n){e.isArray(n)||(n=[n]),this.castActivityID?(n.unshift(this.castActivityID),this.castApi[t].apply(this.castApi,n)):this.backlog.push({"fn":t,"args":n})},"reset":function(e){this.castActivity=null,this.castActivityID=null,this.statusInterval=clearInterval(this.statusInterval),this.backlog.length=0,e&&this.error(),this.castActivityID&&this.castApi.removeMediaStatusListener(this.castActivityID,this.onMediaStatus)
},"error":function(){var e=i.get();t.trigger("show:alert",{"type":"error","message":e.t("There was a problem connecting to this player.")}),r.set("primaryPlayer",null)},"onMessage":function(e){e.source===window&&e.data&&"CastApi"==e.data.source&&"Hello"==e.data.event&&(window.removeEventListener("message",this.onMessage),this.load())},"onReceiverList":function(e){r.get("castPlayers").reset(e,{"parse":!0})},"onActivityLaunch":function(t){if("running"===t.status){this.castActivity=t,this.castActivityID=t.activityId,this.castApi.addMediaStatusListener(this.castActivityID,this.onMediaStatus),this.statusInterval=setInterval(e.bind(function(){this.castApi.getActivityStatus(this.castActivityID,this.onActivityStatus)
},this),f);for(var n=0,i=this.backlog.length;i>n;n++){var s=this.backlog[n];s.args.unshift(this.castActivityID),this.castApi[s.fn].apply(this.castApi,s.args)}}else"error"===t.status&&this.reset(t.errorString);this.backlog.length=0},"onActivityStatus":function(e){"error"===e.status&&this.reset(e.errorString)},"onActivityStop":function(){this.reset()},"onMediaStatus":function(t){{var n=t.contentInfo;this.player.get("nowPlaying")}if(n){var i=e.extend({"machineIdentifier":n.server.machineIdentifier,"duration":t.duration,"position":t.position,"volume":t.volume,"type":"*"},e.omit(n,["server","primaryServer"])),s=t.state;
s>1?i.state="playing":1===s?i.state="paused":0===s?i.state="stopped":(i.state="error",i.errorMessage=t.contentId),this.trigger("timeline",i),this.updateNowPlaying(i)}}});return g}),define("plex/base/adapters/player/PhotoPlayerController",["underscore","plex/base/utils/BaseClass","plex/base/mixins/EventMixin","plex/base/mixins/player/PlayerControllerMixin"],function(e,t,n,i){var s=t.extend({"mixins":[n,i],"type":"photo","local":!0,"slideshowDelay":5e3,"skipTransition":!1,"initialize":function(){e.bindAll(this,"skipPrevious","skipNext")
},"load":function(t){return this.model=t.model,this.listenTo(this.model,{"change:item":this.onItemChange,"change:state":this.onStateChange,"change:loaded":this.onLoadedChange}),this.model.set(e.defaults({"type":this.type,"showPlayPause":!0,"ready":!0},this.model.controllerDefaults)),t.autoplay?this.play():this.pause(),this.update()},"update":function(){this.currentItem=this.model.get("item"),this.previousItem=this.getPreviousItem({"loop":!0}),this.nextItem=this.getNextItem({"loop":!0}),this.model.set({"loaded":!1,"enablePrevious":!!this.previousItem,"enableNext":!!this.nextItem})
},"play":function(){this.model.set("state","playing"),this.model.get("loaded")&&(this.slideshowTimeout=setTimeout(this.skipNext,this.slideshowDelay)),this.startPlaybackTracking()},"pause":function(){this.model.set("state","paused"),this.slideshowTimeout=clearTimeout(this.slideshowTimeout),this.stopPlaybackTracking()},"skipPrevious":function(e){e||(e={}),this.model.get("loaded")&&(this.skipTransition=!!e.manual,this.slideshowTimeout=clearTimeout(this.slideshowTimeout),i.skipPrevious.apply(this,arguments))
},"skipNext":function(e){e||(e={}),this.model.get("loaded")&&(this.skipTransition=!!e.manual,this.slideshowTimeout=clearTimeout(this.slideshowTimeout),i.skipNext.apply(this,arguments))},"stop":function(){this.model.set("state","stopped"),this.stopListening(),this.slideshowTimeout=clearTimeout(this.slideshowTimeout),this.stopPlaybackTracking(),this.trackPlaybackEvent()},"unload":function(){return this.stop()},"onItemChange":function(e){this.timeline({"item":e.previous("item"),"state":"stopped","continuing":!0}),this.timeline()
},"onStateChange":function(){this.timeline()},"onLoadedChange":function(e,t){t&&e.get("playing")&&(clearTimeout(this.slideshowTimeout),this.slideshowTimeout=setTimeout(this.skipNext,this.slideshowDelay))}});return s}),define("plex/desktop/adapters/BaseAdapters",["bugsense","plex/base/adapters/LocalizerAdapter","plex/base/adapters/BugsenseAdapter","plex/base/adapters/PlayerControllerAdapter","plex/desktop/adapters/DesktopLocalizer","plex/desktop/adapters/player/PlexPlayerManager","plex/desktop/adapters/player/CastPlayerManager","plex/base/adapters/player/PhotoPlayerController"],function(e,t,n,i,s,a,r,o){return{"registerAll":function(){t.register(s),n.register(e);
var l=new a,c=new r;i.register({"protocol":"plex","type":"*","create":function(e){return l.add(e)}}),i.register({"protocol":"cast","type":"*","create":function(e){return c.add(e)}}),i.register({"protocol":"local","type":"photo","create":function(e){return new o({"type":e})}})}}}),define("plex/base/adapters/PlayerProfileAdapter",[],function(){var e,t={"get":function(){return e},"register":function(t){e=t}};return t}),define("plex/desktop/adapters/LocalStorage",["jquery","plex/base/utils/Logger"],function(e,t){function n(e){return e?window.sessionStorage:window.localStorage
}function i(i,s){var a=n(s.session),r=e.Deferred();try{r.resolve(i(a))}catch(o){t.warn(o),r.reject(o)}return r.promise()}return{"get":function(e){return i(function(t){var n=window.PLEXWEB[e.key]||t.getItem(e.key);if(null==n){var i=e.session?"session":"local";throw e.key+" is not in "+i+" storage"}return n},e)},"set":function(e){return i(function(t){return t.setItem(e.key,e.value)},e)},"remove":function(e){return i(function(t){return t.removeItem(e.key)},e)},"clear":function(e){return i(function(e){return e.clear()
},e)}}}),define("plex/desktop/adapters/DesktopDimensions",["plex/base/utils/Browser","plex/base/models/AppModel"],function(e,t){var n={"X-Plex-Client-Identifier":t.get("clientID"),"X-Plex-Product":"Plex Web","X-Plex-Device":e.platform,"X-Plex-Platform":e.name,"X-Plex-Platform-Version":e.version,"X-Plex-Version":t.get("version"),"X-Plex-Device-Name":"Plex Web ("+e.name+")"};return t.on("change:clientID",function(e,t){n["X-Plex-Client-Identifier"]=t}),t.on("change:version",function(e,t){n["X-Plex-Version"]=t
}),n}),function(){function e(e,t){return e.name=t}function t(e,t){return e.href=t}function n(e){yt.set(e)}function i(e){return"function"==typeof e}function s(e){return void 0!=e&&-1<(e.constructor+"")[H]("String")}function a(){return O.round(2147483647*O.random())}function r(e){var t=St[Q]("img");return t.width=1,t.height=1,t.src=e,t}function o(){}function l(e){return L instanceof Function?L(e):(n(28),e)}function c(e){return l(e)[U](/\(/g,"%28")[U](/\)/g,"%29")}function d(e,t){if(e){var n=St[Q]("script");
n.type="text/javascript",n.async=!0,n.src=e,n.id=t;var i=St.getElementsByTagName("script")[0];i[mt].insertBefore(n,i)}}function u(){var e=""+St[it][st];return 0==e[H]("www.")?e[ut](4):e}function h(e){var t=St.referrer;if(/^https?:\/\//i.test(t)){if(e)return t;e="//"+St[it][st];var n=t[H](e);if((5==n||6==n)&&(e=t.charAt(n+e[Z]),"/"==e||"?"==e||""==e||":"==e))return;return t}}function p(e,t){if(1==t[Z]&&null!=t[0]&&"object"==typeof t[0])return t[0];for(var n={},i=O.min(e[Z]+1,t[Z]),s=0;i>s;s++){if("object"==typeof t[s]){for(var a in t[s])t[s].hasOwnProperty(a)&&(n[a]=t[s][a]);
break}s<e[Z]&&(n[e[s]]=t[s])}return n}function f(e){if(100!=e.get(mi)&&E(Ut(e,si))%1e4>=100*zt(e,mi))throw"abort"}function m(e){if(Ct(Ut(e,ai)))throw"abort"}function g(){var e=St[it][lt];if("http:"!=e&&"https:"!=e)throw"abort"}function v(e){e.set(ln,zt(e,ln)+1);var t=[];Ft.map(function(n,i){if(i.p){var s=e.get(n);void 0!=s&&s!=i[W]&&("boolean"==typeof s&&(s*=1),t[V](i.p+"="+l(""+s)))}}),t[V]("z="+a()),e.set(on,t[gt]("&"),!0)}function y(e){Lt(Ut(e,on),e.get(rn)),e.set(rn,o,!0)}function b(e){var t=kt.gaData;
t&&(t.expId&&e.set(Vn,t.expId),t.expVar&&e.set(Fn,t.expVar))}function w(){if(kt[ft]&&"preview"==kt[ft].loadPurpose)throw"abort"}function x(e){var t=zt(e,jn);t>=500&&n(15);var i=Ut(e,an);if("transaction"!=i&&"item"!=i){var i=zt(e,$n),s=(new Date)[X](),a=zt(e,Hn);if(0==a&&e.set(Hn,s),a=O.round(2*(s-a)/1e3),a>0&&(i=O.min(i+a,20),e.set(Hn,s)),0>=i)throw"abort";e.set($n,--i)}e.set(jn,++t)}function k(){var e=Xi;S("create",e,e.create,3),S("getByName",e,e.j,5),S("getAll",e,e.K,6),e=zi[et],S("get",e,e.get,7),S("set",e,e.set,4),S("send",e,e.send,2),e=Vt[et],S("get",e,e.get),S("set",e,e.set),(kt.gaplugins=kt.gaplugins||{}).Linker=Ri,e=Ri[et],Ki.C("linker",Ri),S("decorate",e,e.Q,20),S("autoLink",e,e.S,25),Ki.C("displayfeatures",qi)
}function S(e,t,i,s){t[e]=function(){try{return s&&n(s),i[pt](this,arguments)}catch(t){var r=t&&t[G];if(!(1<=100*O.random()||Ct("?"))){var o=["t=error","_e=exc","_v=j15","sr=1"];e&&o[V]("_f="+e),r&&o[V]("_m="+l(r[ut](0,100))),o[V]("aip=1"),o[V]("z="+a()),Lt(o[gt]("&"))}throw t}}}function C(){var e,t,n;if((n=(n=kt[ft])?n.plugins:null)&&n[Z])for(var i=0;i<n[Z]&&!t;i++){var s=n[i];-1<s[G][H]("Shockwave Flash")&&(t=s.description)}if(!t)try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),t=e.GetVariable("$version")
}catch(a){}if(!t)try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),t="WIN 6,0,21,0",e.AllowScriptAccess="always",t=e.GetVariable("$version")}catch(r){}if(!t)try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),t=e.GetVariable("$version")}catch(o){}return t&&(e=t[$](/[\d]+/g))&&3<=e[Z]&&(t=e[0]+"."+e[1]+" r"+e[2]),t||void 0}function T(e,t,n){"none"==t&&(t="");var i=[],s=At(e);e="__utma"==e?6:2;for(var a=0;a<s[Z];a++){var r=(""+s[a])[nt](".");r[Z]>=e&&i[V]({"hash":r[0],"R":s[a],"O":r})
}return 0==i[Z]?void 0:1==i[Z]?i[0]:A(t,i)||A(n,i)||A(null,i)||i[0]}function A(e,t){var n,i;null==e?n=i=1:(n=E(e),i=E(0==e[H](".")?e[ut](1):"."+e));for(var s=0;s<t[Z];s++)if(t[s][F]==n||t[s][F]==i)return t[s]}function I(e){e=e.get(si);var t=P(e,0);return"_ga=1."+l(t+"."+e)}function P(e,t){for(var n=new Date,i=kt.screen||{},s=kt[ft],a=s.plugins||[],n=[e,s.userAgent,i.width,i.height,n.getTimezoneOffset(),n.getYear(),n.getDate(),n.getHours(),n.getMinutes()+t],i=0;i<a[Z];++i)n[V](a[i].description);return E(n[gt]("."))
}function M(e,t){if(t==St[it][st])return!1;for(var n=0;n<e[Z];n++)if(0<=t[H](e[n]))return!0;return!1}function D(){var e=kt.gaGlobal=kt.gaGlobal||{};return e.hid=e.hid||a()}function _(e){function n(e){var t=(e[st]||"")[nt](":")[0][vt](),n=(e[lt]||"")[vt](),n=1*e[Y]||("http:"==n?80:"https:"==n?443:"");return e=e.pathname||"",0==e[H]("/")||(e="/"+e),[t,""+n,e]}var i=St[Q]("a");t(i,St[it][dt]);var s=(i[lt]||"")[vt](),a=n(i),r=i[at]||"",o=s+"//"+a[0]+(a[1]?":"+a[1]:"");return 0==e[H]("//")?e=s+e:0==e[H]("/")?e=o+e:e&&0!=e[H]("?")?0>e[nt]("/")[0][H](":")&&(e=o+a[2][ut](0,a[2].lastIndexOf("/"))+"/"+e):e=o+a[2]+(e||r),t(i,e),s=n(i),{"protocol":(i[lt]||"")[vt](),"host":s[0],"port":s[1],"path":s[2],"G":i[at]||"","url":e||""}
}function E(e){var t,n=1,i=0;if(e)for(n=0,t=e[Z]-1;t>=0;t--)i=e.charCodeAt(t),n=(n<<6&268435455)+i+(i<<14),i=266338304&n,n=0!=i?n^i>>21:n;return n}var L=encodeURIComponent,R=window,N=setTimeout,O=Math,B=RegExp,V="push",F="hash",q="slice",U="replace",z="data",j="cookie",H="indexOf",$="match",W="defaultValue",Y="port",Q="createElement",K="setAttribute",G="name",X="getTime",J="host",Z="length",et="prototype",tt="clientWidth",nt="split",it="location",st="hostname",at="search",rt="target",ot="call",lt="protocol",ct="clientHeight",dt="href",ut="substring",ht="action",pt="apply",ft="navigator",mt="parentNode",gt="join",vt="toLowerCase",yt=new function(){var e=[];
this.set=function(t){e[t]=!0},this.M=function(){for(var t=[],n=0;n<e[Z];n++)e[n]&&(t[O.floor(n/6)]=t[O.floor(n/6)]^1<<n%6);for(n=0;n<t[Z];n++)t[n]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".charAt(t[n]||0);return t[gt]("")+"~"}},bt=function(e,t,i,s){try{e.addEventListener?e.addEventListener(t,i,!!s):e.attachEvent&&e.attachEvent("on"+t,i)}catch(a){n(27)}},wt=function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n)},xt=function(){this.keys=[],this.w={},this.m={}
};xt[et].set=function(e,t,n){this.keys[V](e),n?this.m[":"+e]=t:this.w[":"+e]=t},xt[et].get=function(e){return this.m.hasOwnProperty(":"+e)?this.m[":"+e]:this.w[":"+e]},xt[et].map=function(e){for(var t=0;t<this.keys[Z];t++){var n=this.keys[t],i=this.get(n);i&&e(n,i)}};var kt=R,St=document,Ct=function(e){var t=kt._gaUserPrefs;if(t&&t.ioo&&t.ioo()||e&&!0===kt["ga-disable-"+e])return!0;try{var n=kt.external;if(n&&n._gaUserPrefs&&"oo"==n._gaUserPrefs)return!0}catch(i){}return!1},Tt=function(e){N(e,100)
},At=function(e){var t=[],n=St[j][nt](";");e=B("^\\s*"+e+"=\\s*(.*?)\\s*$");for(var i=0;i<n[Z];i++){var s=n[i][$](e);s&&t[V](s[1])}return t},It=function(e,t,i,s,a,r){if(a=Ct(a)?!1:Mt.test(St[it][st])||"/"==i&&Pt.test(s)?!1:!0,!a)return!1;if(t&&200<t[Z]&&(t=t[ut](0,200),n(24)),i=e+"="+t+"; path="+i+"; ",r&&(i+="expires="+new Date((new Date)[X]()+r).toGMTString()+"; "),s&&"none"!=s&&(i+="domain="+s+";"),s=St[j],St.cookie=i,!(s=s!=St[j]))e:{for(e=At(e),s=0;s<e[Z];s++)if(t==e[s]){s=!0;break e}s=!1}return s
},Pt=B(/^(www\.)?google(\.com?)?(\.[a-z]{2})?$/),Mt=B(/(^|\.)doubleclick\.net$/i),Dt=function(){return(en||"https:"==St[it][lt]?"https:":"http:")+"//www.google-analytics.com"},_t=function(t){e(this,"len"),this.message=t+"-8192"},Et=function(t){e(this,"ff2post"),this.message=t+"-2036"},Lt=function(e,t){if(t=t||o,2036>=e[Z])Rt(e,t);else{if(!(8192>=e[Z]))throw new _t(e[Z]);var n=t;if(0<=kt[ft].userAgent[H]("Firefox")&&![].reduce)throw new Et(e[Z]);Nt(e,n)||Ot(e,n)}},Rt=function(e,t){var n=r(Dt()+"/collect?"+e);
n.onload=n.onerror=function(){n.onload=null,n.onerror=null,t()}},Nt=function(e,t){var n,i=kt.XDomainRequest;return i?(n=new i,n.open("POST",Dt()+"/collect")):(i=kt.XMLHttpRequest)&&(i=new i,"withCredentials"in i&&(n=i,n.open("POST",Dt()+"/collect",!0),n.setRequestHeader("Content-Type","text/plain"))),n?(n.onreadystatechange=function(){4==n.readyState&&(t(),n=null)},n.send(e),!0):void 0},Ot=function(t,n){if(St.body){t=L(t);try{var i=St[Q]('<iframe name="'+t+'"></iframe>')}catch(s){i=St[Q]("iframe"),e(i,t)
}i.height="0",i.width="0",i.style.display="none",i.style.visibility="hidden";var a=St[it],a=Dt()+"/analytics_iframe.html#"+L(a[lt]+"//"+a[J]+"/favicon.ico"),r=function(){i.src="",i[mt]&&i[mt].removeChild(i)};bt(kt,"beforeunload",r);var o=!1,l=0,c=function(){if(!o){try{if(l>9||i.contentWindow[it][J]==St[it][J])return o=!0,r(),wt(kt,"beforeunload",r),void n()}catch(e){}l++,N(c,200)}};bt(i,"load",c),St.body.appendChild(i),i.src=a}else Tt(function(){Ot(t,n)})},Bt=function(){this.t=[]};Bt[et].add=function(e){this.t[V](e)
},Bt[et].execute=function(e){try{for(var t=0;t<this.t[Z];t++){var n=e.get(this.t[t]);n&&i(n)&&n[ot](kt,e)}}catch(s){}t=e.get(rn),t!=o&&i(t)&&(e.set(rn,o,!0),N(t,10))};var Vt=function(){this.data=new xt},Ft=new xt,qt=[];Vt[et].get=function(e){var t=Wt(e),n=this[z].get(e);return t&&void 0==n&&(n=i(t[W])?t[W]():t[W]),t&&t.n?t.n(this,e,n):n};var Ut=function(e,t){var n=e.get(t);return void 0==n?"":""+n},zt=function(e,t){var n=e.get(t);return void 0==n||""===n?0:1*n};Vt[et].set=function(e,t,n){if(e)if("object"==typeof e)for(var i in e)e.hasOwnProperty(i)&&Ht(this,i,e[i],n);
else Ht(this,e,t,n)};var jt,Ht=function(e,t,n,i){var s=Wt(t);s&&s.o?s.o(e,t,n,i):e[z].set(t,n,i)},$t=function(t,n,i,s,a){e(this,t),this.p=n,this.n=s,this.o=a,this.defaultValue=i},Wt=function(e){var t=Ft.get(e);if(!t)for(var n=0;n<qt[Z];n++){var i=qt[n],s=i[0].exec(e);if(s){t=i[1](s),Ft.set(t[G],t);break}}return t},Yt=function(e){var t;return Ft.map(function(n,i){i.p==e&&(t=i)}),t&&t[G]},Qt=function(e,t,n,i,s){return e=new $t(e,t,n,i,s),Ft.set(e[G],e),e[G]},Kt=function(e,t){qt[V]([B("^"+e+"$"),t])
},Gt=function(e,t,n){return Qt(e,t,n,void 0,Xt)},Xt=function(){};if(jt=s(R.GoogleAnalyticsObject)){var Jt=R.GoogleAnalyticsObject;jt=Jt?Jt[U](/^[\s\xa0]+|[\s\xa0]+$/g,""):""}var Zt=jt||"ga",en=!1,tn=Gt("apiVersion","v"),nn=Gt("clientVersion","_v");Qt("anonymizeIp","aip");var sn=Qt("adSenseId","a"),an=Qt("hitType","t"),rn=Qt("hitCallback"),on=Qt("hitPayload");Qt("nonInteraction","ni"),Qt("currencyCode","cu"),Qt("sessionControl","sc",""),Qt("queueTime","qt");var ln=Qt("_s","_s");Qt("description","cd");
var cn=Qt("location","dl",""),dn=Qt("referrer","dr"),un=Qt("page","dp","");Qt("hostname","dh");var hn=Qt("language","ul"),pn=Qt("encoding","de");Qt("title","dt",function(){return St.title||void 0}),Kt("contentGroup([0-9]+)",function(e){return new $t(e[0],"cg"+e[1])});var fn=Qt("screenColors","sd"),mn=Qt("screenResolution","sr"),gn=Qt("viewportSize","vp"),vn=Qt("javaEnabled","je"),yn=Qt("flashVersion","fl");Qt("campaignId","ci"),Qt("campaignName","cn"),Qt("campaignSource","cs"),Qt("campaignMedium","cm"),Qt("campaignKeyword","ck"),Qt("campaignContent","cc");
var bn=Qt("eventCategory","ec"),wn=Qt("eventAction","ea"),xn=Qt("eventLabel","el"),kn=Qt("eventValue","ev"),Sn=Qt("socialNetwork","sn"),Cn=Qt("socialAction","sa"),Tn=Qt("socialTarget","st"),An=Qt("l1","plt"),In=Qt("l2","pdt"),Pn=Qt("l3","dns"),Mn=Qt("l4","rrt"),Dn=Qt("l5","srt"),_n=Qt("l6","tcp"),En=Qt("l7","dit"),Ln=Qt("l8","clt"),Rn=Qt("timingCategory","utc"),Nn=Qt("timingVar","utv"),On=Qt("timingLabel","utl"),Bn=Qt("timingValue","utt");Qt("appName","an"),Qt("appVersion","av",""),Qt("appId","aid",""),Qt("appInstallerId","aiid",""),Qt("exDescription","exd"),Qt("exFatal","exf");
var Vn=Qt("expId","xid"),Fn=Qt("expVar","xvar"),qn=Qt("_utma","_utma"),Un=Qt("_utmz","_utmz"),zn=Qt("_utmht","_utmht"),jn=Qt("_hc",void 0,0),Hn=Qt("_ti",void 0,0),$n=Qt("_to",void 0,20);Kt("dimension([0-9]+)",function(e){return new $t(e[0],"cd"+e[1])}),Kt("metric([0-9]+)",function(e){return new $t(e[0],"cm"+e[1])}),Qt("linkerParam",void 0,void 0,I,Xt),Qt("usage","_u",void 0,function(){return yt.M()},Xt),Qt("forceSSL",void 0,void 0,function(){return en},function(e,t,n){en=!!n});var Wn=Qt("joinId","jid");
Kt("\\&(.*)",function(e){var t=new $t(e[0],e[1]),n=Yt(e[0][ut](1));return n&&(t.n=function(e){return e.get(n)},t.o=function(e,t,i,s){e.set(n,i,s)},t.p=void 0),t});var Yn=Gt("oot"),Qn=Qt("previewTask"),Kn=Qt("checkProtocolTask"),Gn=Qt("checkStorageTask"),Xn=Qt("historyImportTask"),Jn=Qt("samplerTask"),Zn=Gt("rateLimiterTask"),ei=Qt("buildHitTask"),ti=Qt("sendHitTask"),ni=Qt("ceTask"),ii=Gt("name"),si=Gt("clientId","cid"),ai=Gt("trackingId","tid"),ri=Gt("cookieName",void 0,"_ga"),oi=Gt("cookieDomain"),li=Gt("cookiePath",void 0,"/"),ci=Gt("cookieExpires",void 0,63072e3),di=Gt("legacyCookieDomain"),ui=Gt("legacyHistoryImport",void 0,!0),hi=Gt("storage",void 0,"cookie"),pi=Gt("allowLinker",void 0,!1),fi=Gt("allowAnchor",void 0,!0),mi=Gt("sampleRate","sf",100),gi=Gt("siteSpeedSampleRate",void 0,1),vi=Gt("alwaysSendReferrer",void 0,!1),yi=function(e,t){var n=O.min(zt(e,gi),100);
if(!(E(Ut(e,si))%100>=n)&&(n={},bi(n)||wi(n))){var i=n[An];void 0==i||1/0==i||isNaN(i)||(i>0?(xi(n,Pn),xi(n,_n),xi(n,Dn),xi(n,In),xi(n,Mn),xi(n,En),xi(n,Ln),t(n)):bt(kt,"load",function(){yi(e,t)},!1))}},bi=function(e){var t=kt.performance||kt.webkitPerformance,t=t&&t.timing;if(!t)return!1;var n=t.navigationStart;return 0==n?!1:(e[An]=t.loadEventStart-n,e[Pn]=t.domainLookupEnd-t.domainLookupStart,e[_n]=t.connectEnd-t.connectStart,e[Dn]=t.responseStart-t.requestStart,e[In]=t.responseEnd-t.responseStart,e[Mn]=t.fetchStart-n,e[En]=t.domInteractive-n,e[Ln]=t.domContentLoadedEventStart-n,!0)
},wi=function(e){if(kt.top!=kt)return!1;var t=kt.external,n=t&&t.onloadT;return t&&!t.isValidLoadTime&&(n=void 0),n>2147483648&&(n=void 0),n>0&&t.setPageReadyTime(),void 0==n?!1:(e[An]=n,!0)},xi=function(e,t){var n=e[t];(isNaN(n)||1/0==n||0>n)&&(e[t]=void 0)},ki=!1,Si=function(e){if("cookie"==Ut(e,hi)){var t=Ut(e,ri),i=Ai(e),s=Di(Ut(e,li)),a=Pi(Ut(e,oi)),r=1e3*zt(e,ci),o=Ut(e,ai);if("auto"!=a)It(t,i,s,a,o,r)&&(ki=!0);else{n(32);var l;if(i=[],a=u()[nt]("."),4!=a[Z]||(l=a[a[Z]-1],parseInt(l,10)!=l)){for(l=a[Z]-2;l>=0;l--)i[V](a[q](l)[gt]("."));
i[V]("none"),l=i}else l=["none"];for(var c=0;c<l[Z];c++)if(a=l[c],e[z].set(oi,a),i=Ai(e),It(t,i,s,a,o,r))return void(ki=!0);e[z].set(oi,"auto")}}},Ci=function(e){if("cookie"==Ut(e,hi)&&!ki&&(Si(e),!ki))throw"abort"},Ti=function(e){if(e.get(ui)){var t=Ut(e,oi),i=Ut(e,di)||u(),s=T("__utma",i,t);s&&(n(19),e.set(zn,(new Date)[X](),!0),e.set(qn,s.R),(t=T("__utmz",i,t))&&s[F]==t[F]&&e.set(Un,t.R))}},Ai=function(e){var t=c(Ut(e,si)),n=Mi(Ut(e,oi));return e=_i(Ut(e,li)),e>1&&(n+="-"+e),["GA1",n,t][gt](".")
},Ii=function(e,t,n){for(var i,s=[],a=[],r=0;r<e[Z];r++){var o=e[r];o.r[n]==t?s[V](o):void 0==i||o.r[n]<i?(a=[o],i=o.r[n]):o.r[n]==i&&a[V](o)}return 0<s[Z]?s:a},Pi=function(e){return 0==e[H](".")?e.substr(1):e},Mi=function(e){return Pi(e)[nt](".")[Z]},Di=function(e){return e?(1<e[Z]&&e.lastIndexOf("/")==e[Z]-1&&(e=e.substr(0,e[Z]-1)),0!=e[H]("/")&&(e="/"+e),e):"/"},_i=function(e){return e=Di(e),"/"==e?1:e[nt]("/")[Z]},Ei=B(/^https?:\/\/([^\/:]+)/),Li=/(.*)([?&#])(?:_ga=[^&]*)(?:&?)(.*)/,Ri=function(e){this.target=e,this.T=!1
};Ri[et].Q=function(e,n){if(e.tagName){if("a"==e.tagName[vt]())return void(e[dt]&&t(e,Ni(this,e[dt],n)));if("form"==e.tagName[vt]())return Oi(this,e)}return"string"==typeof e?Ni(this,e,n):void 0};var Ni=function(e,t,n){var i=Li.exec(t);i&&3<=i[Z]&&(t=i[1]+(i[3]?i[2]+i[3]:"")),e=e[rt].get("linkerParam");var s=t[H]("?"),i=t[H]("#");return n?t+=(-1==i?"#":"&")+e:(n=-1==s?"?":"&",t=-1==i?t+(n+e):t[ut](0,i)+n+e+t[ut](i)),t},Oi=function(e,t){if(t&&t[ht]){var n=e[rt].get("linkerParam")[nt]("=")[1];if("get"==t.method[vt]()){for(var i=t.childNodes||[],s=0;s<i[Z];s++)if("_ga"==i[s][G])return void i[s][K]("value",n);
i=St[Q]("input"),i[K]("type","hidden"),i[K]("name","_ga"),i[K]("value",n),t.appendChild(i)}else"post"==t.method[vt]()&&(t.action=Ni(e,t[ht]))}};Ri[et].S=function(e,i,s){function a(s){try{s=s||kt.event;var a;e:{var o=s[rt]||s.srcElement;for(s=100;o&&s>0;){if(o[dt]&&o.nodeName[$](/^a(?:rea)?$/i)){a=o;break e}o=o[mt],s--}a={}}("http:"==a[lt]||"https:"==a[lt])&&M(e,a[st]||"")&&a[dt]&&t(a,Ni(r,a[dt],i))}catch(l){n(26)}}var r=this;if(this.T||(this.T=!0,bt(St,"mousedown",a,!1),bt(St,"touchstart",a,!1),bt(St,"keyup",a,!1)),s){s=function(t){if(t=t||kt.event,(t=t[rt]||t.srcElement)&&t[ht]){var n=t[ht][$](Ei);
n&&M(e,n[1])&&Oi(r,t)}};for(var o=0;o<St.forms[Z];o++)bt(St.forms[o],"submit",s)}};var Bi,Vi=function(e){return e.get(ii)&&"t0"!=e.get(ii)?"_dc_"+c(e.get(ii)):"_dc"},Fi=function(e){if(e.get(Wn)){var t=new xt,n=function(n){t.set(Wt(n).p,e.get(n))};n(tn),n(nn),n(ai),n(si),n(Wn);var i=zt(e,"forceSSL")||"https:"==St[it][lt]?"https:":"http:",i=i+"//stats.g.doubleclick.net/collect?t=dc&aip=1&";t.map(function(e,t){i+=l(e)+"="+l(""+t)+"&"}),i+="z="+a(),r(i),e.set(Wn,"",!0)}},qi=function(e){n(29),e=e.b;var t=e.get(ei);
e.set(ei,function(e){return e.get(Wn)||(-1!=St[j][H](Vi(e)+"=1")?e.set(Wn,"",!0):(Vi(e),It(Vi(e),"1",e.get(li),e.get(oi),e.get(ai),6e5)?e.set(Wn,""+a(),!0):n(30))),t(e)});var i=e.get(ti);e.set(ti,function(e){var t=i(e);return Fi(e),t})},Ui=function(e,t,n){if(!Bi){var i;i=St[it][F];var s=kt[G],r=/^#?gaso=([^&]*)/;(s=(i=(i=i&&i[$](r)||s&&s[$](r))?i[1]:At("GASO")[0]||"")&&i[$](/^(?:!([-0-9a-z.]{1,40})!)?([-.\w]{10,1200})$/i))&&(It("GASO",""+i,n,t,e,0),R._udo||(R._udo=t),R._utcp||(R._utcp=n),e=s[1],d("https://www.google.com/analytics/web/inpage/pub/inpage.js?"+(e?"prefix="+e+"&":"")+a(),"_gasojs")),Bi=!0
}},zi=function(e){function t(e,t){i.b[z].set(e,t)}function n(e,n){t(e,n),i.filters.add(e)}var i=this;this.b=new Vt,this.filters=new Bt,t(ii,e[ii]),t(ai,e[ai]),t(ri,e[ri]),t(oi,e[oi]||u()),t(li,e[li]),t(ci,e[ci]),t(di,e[di]),t(ui,e[ui]),t(pi,e[pi]),t(fi,e[fi]),t(mi,e[mi]),t(gi,e[gi]),t(vi,e[vi]),t(hi,e[hi]),t(tn,1),t(nn,"j15"),n(Yn,m),n(Qn,w),n(Kn,g),n(Gn,Ci),n(Xn,Ti),n(Jn,f),n(Zn,x),n(ni,b),n(ei,v),n(ti,y),ji(this.b,e[si]),Hi(this.b),this.b.set(sn,D()),Ui(this.b.get(ai),this.b.get(oi),this.b.get(li))
},ji=function(e,t){if("cookie"==Ut(e,hi)){ki=!1;var i;e:{var s=At(Ut(e,ri));if(s&&!(1>s[Z])){i=[];for(var r=0;r<s[Z];r++){var o;o=s[r][nt](".");var c=o.shift();("GA1"==c||"1"==c)&&1<o[Z]?(c=o.shift()[nt]("-"),1==c[Z]&&(c[1]="1"),c[0]*=1,c[1]*=1,o={"r":c,"s":o[gt](".")}):o=void 0,o&&i[V](o)}if(1==i[Z]){n(13),i=i[0].s;break e}if(0!=i[Z]){if(n(14),s=Mi(Ut(e,oi)),i=Ii(i,s,0),1==i[Z]){i=i[0].s;break e}s=_i(Ut(e,li)),i=Ii(i,s,1),i=i[0]&&i[0].s;break e}n(12)}i=void 0}i||(i=Ut(e,oi),s=Ut(e,di)||u(),i=T("__utma",s,i),(i=void 0==i?void 0:i.O[1]+"."+i.O[2])&&n(10)),i&&(e[z].set(si,i),ki=!0)
}if(i=e.get(fi),(r=(i=St[it][i?"href":"search"][$]("(?:&|#|\\?)"+l("_ga")[U](/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")+"=([^&#]*)"))&&2==i[Z]?i[1]:"")&&(e.get(pi)?(i=r[H]("."),-1==i?n(22):(s=r[ut](i+1),"1"!=r[ut](0,i)?n(22):(i=s[H]("."),-1==i?n(22):(r=s[ut](0,i),i=s[ut](i+1),r!=P(i,0)&&r!=P(i,-1)&&r!=P(i,-2)?n(23):(n(11),e[z].set(si,i)))))):n(21)),t&&(n(9),e[z].set(si,l(t))),!e.get(si))if(i=(i=kt.gaGlobal&&kt.gaGlobal.vid)&&-1!=i[at](/^(?:utma\.)?\d+\.\d+$/)?i:void 0)n(17),e[z].set(si,i);else{for(n(8),i=kt[ft],i=i.appName+i.version+i.platform+i.userAgent+(St[j]?St[j]:"")+(St.referrer?St.referrer:""),s=i[Z],r=kt.history[Z];r>0;)i+=r--^s++;
e[z].set(si,[a()^2147483647&E(i),O.round((new Date)[X]()/1e3)][gt]("."))}Si(e)},Hi=function(e){var t=kt[ft],i=kt.screen,s=St[it];if(e.set(dn,h(e.get(vi))),s){var a=s.pathname||"";"/"!=a.charAt(0)&&(n(31),a="/"+a),e.set(cn,s[lt]+"//"+s[st]+a+s[at])}i&&e.set(mn,i.width+"x"+i.height),i&&e.set(fn,i.colorDepth+"-bit");var i=St.documentElement,r=(a=St.body)&&a[tt]&&a[ct],o=[];if(i&&i[tt]&&i[ct]&&("CSS1Compat"===St.compatMode||!r)?o=[i[tt],i[ct]]:r&&(o=[a[tt],a[ct]]),i=0>=o[0]||0>=o[1]?"":o[gt]("x"),e.set(gn,i),e.set(yn,C()),e.set(pn,St.characterSet||St.charset),e.set(vn,t&&"function"==typeof t.javaEnabled&&t.javaEnabled()||!1),e.set(hn,(t&&(t.language||t.browserLanguage)||"")[vt]()),s&&e.get(fi)&&(t=St[it][F])){for(t=t[ut](1),t=t[nt]("&"),s=[],i=0;i<t[Z];++i)0!=t[i][H]("utm_id")&&0!=t[i][H]("utm_campaign")&&0!=t[i][H]("utm_source")&&0!=t[i][H]("utm_medium")&&0!=t[i][H]("utm_term")&&0!=t[i][H]("utm_content")||s[V](t[i]);
0<s[Z]&&(t="#"+s[gt]("&"),e.set(cn,e.get(cn)+t))}};zi[et].get=function(e){return this.b.get(e)},zi[et].set=function(e,t){this.b.set(e,t)};var $i={"pageview":[un],"event":[bn,wn,xn,kn],"social":[Sn,Cn,Tn],"timing":[Rn,Nn,Bn,On]};zi[et].send=function(){if(!(1>arguments[Z])){var e,t;"string"==typeof arguments[0]?(e=arguments[0],t=[][q][ot](arguments,1)):(e=arguments[0]&&arguments[0][an],t=arguments),e&&(t=p($i[e]||[],t),t[an]=e,this.b.set(t,void 0,!0),this.filters.execute(this.b),"pageview"==e&&Wi(this),this.b[z].m={})
}};var Wi=function(e){e.I||(e.I=!0,yi(e.b,function(t){e.send("timing",t)}))},Yi=function(e){return"prerender"==St.webkitVisibilityState?!1:(e(),!0)},Qi=function(e){if(!Yi(e)){n(16);var t=!1,i=function(){!t&&Yi(e)&&(t=!0,wt(St,"webkitvisibilitychange",i))};bt(St,"webkitvisibilitychange",i)}},Ki={"F":"/plugins/ua/","D":/^(?:(\w+)\.)?(?:(\w+):)?(\w+)$/};Ki.k=new xt,Ki.f=[];var Gi=function(e){if(i(e[0]))this.u=e[0];else{var t=Ki.D.exec(e[0]);if(null!=t&&4==t[Z]&&(this.c=t[1]||"t0",this.e=t[2]||"",this.d=t[3],this.a=[][q][ot](e,1),this.e||(this.A="create"==this.d,this.i="require"==this.d,this.g="provide"==this.d)),!i(e[0])){if(t=e[1],e=e[2],!this.d)throw"abort";
if(this.i&&(!s(t)||""==t))throw"abort";if(this.g&&(!s(t)||""==t||!i(e)))throw"abort";if(0<=this.c[H](".")||0<=this.c[H](":")||0<=this.e[H](".")||0<=this.e[H](":"))throw"abort";if(this.g&&"t0"!=this.c)throw"abort"}}};Ki.B=function(e,t,n){var s=Ki.k.get(e);return i(s)?(t.plugins_=t.plugins_||new xt,t.plugins_.set(e,new s(t,n||{})),!0):!1},Ki.C=function(e,t){Ki.k.set(e,t)},Ki.execute=function(){var e=Ki.J[pt](Ki,arguments),e=Ki.f.concat(e);for(Ki.f=[];0<e[Z]&&!Ki.v(e[0])&&(e.shift(),!(0<Ki.f[Z])););Ki.f=Ki.f.concat(e)
},Ki.J=function(){for(var e=[],t=0;t<arguments[Z];t++)try{var n=new Gi(arguments[t]);if(n.g)Ki.v(n);else{if(n.i){var s=n.a[1];if(!i(Ki.k.get(n.a[0]))&&!n.H&&s){var a,r=s+"",s=r&&0<=r[H]("/")?r:"//www.google-analytics.com"+Ki.F+r,o=_(""+s),l=o[lt],c=St[it][lt];a="https:"==l||l==c?!0:"http:"!=l?!1:"http:"==c;var u;if(u=a){var r=o,h=_(St[it][dt]);if(r.G||0<=r.url[H]("?")||0<=r.path[H]("://"))u=!1;else if(r[J]==h[J]&&r[Y]==h[Y])u=!0;else{var p="http:"==r[lt]?80:443;u="www.google-analytics.com"==r[J]&&(r[Y]||p)==p&&0==r.path[H]("/plugins/")?!0:!1
}}u&&(n.H=!!d(o.url))}}e[V](n)}}catch(f){}return e},Ki.v=function(e){try{if(e.u)e.u[ot](kt,Xi.j("t0"));else if(e.g)Ki.C(e.a[0],e.a[1]);else{var t=e.c==Zt?Xi:Xi.j(e.c);if(e.A)"t0"==e.c&&Xi.create[pt](Xi,e.a);else if(t)if(e.i){if(!Ki.B(e.a[0],t,e.a[2]))return!0}else e.e&&(t=t.plugins_.get(e.e)),t[e.d][pt](t,e.a)}}catch(n){}};var Xi=function(){n(1),Ki.execute[pt](Ki,[arguments])};Xi.h={},Xi.P=[],Xi.L=0,Xi.answer=42;var Ji=[ai,oi,ii];Xi.create=function(){var e=p(Ji,[][q][ot](arguments));e[ii]||(e[ii]="t0");
var t=""+e[ii];return Xi.h[t]?Xi.h[t]:(e=new zi(e),Xi.h[t]=e,Xi.P[V](e),e)},Xi.j=function(e){return Xi.h[e]},Xi.K=function(){return Xi.P[q](0)},Xi.N=function(){var e=kt[Zt];if(!e||42!=e.answer){Xi.L=e&&e.l,Xi.loaded=!0,kt[Zt]=Xi,k();var t=e&&e.q;"[object Array]"==Object[et].toString[ot](Object(t))&&Qi(function(){Ki.execute[pt](Xi,t)})}},Xi.N()}(window),define("google-analytics",function(e){return function(){var t;return t||e.ga}}(this)),define("plex/desktop/adapters/GoogleAnalytics",["underscore","google-analytics","plex/base/utils/BaseClass"],function(e,t,n){var i=n.extend({"constructor":function(e,n){this.ga=this.createGaQueue(),t("create",e,"auto"),t("set",{"appName":n.name,"appVersion":n.version})
},"createGaQueue":function(){var e=function(){e.queue.push(arguments)};return e.queue=[],e.run=function(){for(;e.queue.length;)t.apply(window,e.queue.shift())},e},"enable":function(){this.ga.run&&this.ga.run(),this.ga=t},"disable":function(){this.ga=function(){}},"set":function(e){t("set",e)},"trackView":function(e){this.ga("send",{"hitType":"appview","description":e})},"trackEvent":function(e){this.ga("send","event",e)}});return i}),define("plex/desktop/adapters/player/DesktopPlayerProfile",[],function(){return{"capabilities":["embed","redirect"],"video":{"mp4":{"mimeType":'video/mp4; codecs="avc1.42E01E"',"optimizedForStreaming":!0,"video":{"codec":"h264","maxWidth":1920,"maxHeight":1280,"maxFrameRate":60},"audio":{"codec":"aac"}},"mkv":{"mimeType":"video/webm","video":{"codec":"vp8","maxWidth":1920,"maxHeight":1280,"maxFrameRate":60},"audio":{"codec":"vorbis"}},"ogg":{"mimeType":"video/ogg"},"hls":{"mimeType":"application/x-mpegURL"}},"audio":{"mp4":{"mimeType":"audio/mp4","audioCodec":"aac"},"mp3":{"mimeType":'audio/mpeg; codecs="mp3"',"audioCodec":"mp3"},"ogg":{"mimeType":'audio/ogg; codecs="vorbis"',"audioCodec":"vorbis"},"wav":{"mimeType":"audio/wav","audioCodec":"pcm"}}}
});var swfobject=function(){function e(){if(!j){try{var e=O.getElementsByTagName("body")[0].appendChild(g("span"));e.parentNode.removeChild(e)}catch(t){return}j=!0;for(var n=F.length,i=0;n>i;i++)F[i]()}}function t(e){j?e():F[F.length]=e}function n(e){if(typeof N.addEventListener!=P)N.addEventListener("load",e,!1);else if(typeof O.addEventListener!=P)O.addEventListener("load",e,!1);else if(typeof N.attachEvent!=P)v(N,"onload",e);else if("function"==typeof N.onload){var t=N.onload;N.onload=function(){t(),e()
}}else N.onload=e}function i(){V?s():a()}function s(){var e=O.getElementsByTagName("body")[0],t=g(M);t.setAttribute("type",E);var n=e.appendChild(t);if(n){var i=0;!function(){if(typeof n.GetVariable!=P){var s=n.GetVariable("$version");s&&(s=s.split(" ")[1].split(","),W.pv=[parseInt(s[0],10),parseInt(s[1],10),parseInt(s[2],10)])}else if(10>i)return i++,void setTimeout(arguments.callee,10);e.removeChild(t),n=null,a()}()}else a()}function a(){var e=q.length;if(e>0)for(var t=0;e>t;t++){var n=q[t].id,i=q[t].callbackFn,s={"success":!1,"id":n};
if(W.pv[0]>0){var a=m(n);if(a)if(!y(q[t].swfVersion)||W.wk&&W.wk<312)if(q[t].expressInstall&&o()){var d={};d.data=q[t].expressInstall,d.width=a.getAttribute("width")||"0",d.height=a.getAttribute("height")||"0",a.getAttribute("class")&&(d.styleclass=a.getAttribute("class")),a.getAttribute("align")&&(d.align=a.getAttribute("align"));for(var u={},h=a.getElementsByTagName("param"),p=h.length,f=0;p>f;f++)"movie"!=h[f].getAttribute("name").toLowerCase()&&(u[h[f].getAttribute("name")]=h[f].getAttribute("value"));
l(d,u,n,i)}else c(a),i&&i(s);else w(n,!0),i&&(s.success=!0,s.ref=r(n),i(s))}else if(w(n,!0),i){var g=r(n);g&&typeof g.SetVariable!=P&&(s.success=!0,s.ref=g),i(s)}}}function r(e){var t=null,n=m(e);if(n&&"OBJECT"==n.nodeName)if(typeof n.SetVariable!=P)t=n;else{var i=n.getElementsByTagName(M)[0];i&&(t=i)}return t}function o(){return!H&&y("6.0.65")&&(W.win||W.mac)&&!(W.wk&&W.wk<312)}function l(e,t,n,i){H=!0,C=i||null,T={"success":!1,"id":n};var s=m(n);if(s){"OBJECT"==s.nodeName?(k=d(s),S=null):(k=s,S=n),e.id=L,(typeof e.width==P||!/%$/.test(e.width)&&parseInt(e.width,10)<310)&&(e.width="310"),(typeof e.height==P||!/%$/.test(e.height)&&parseInt(e.height,10)<137)&&(e.height="137"),O.title=O.title.slice(0,47)+" - Flash Player Installation";
var a=W.ie&&W.win?"ActiveX":"PlugIn",r="MMredirectURL="+N.location.toString().replace(/&/g,"%26")+"&MMplayerType="+a+"&MMdoctitle="+O.title;if(typeof t.flashvars!=P?t.flashvars+="&"+r:t.flashvars=r,W.ie&&W.win&&4!=s.readyState){var o=g("div");n+="SWFObjectNew",o.setAttribute("id",n),s.parentNode.insertBefore(o,s),s.style.display="none",function(){4==s.readyState?s.parentNode.removeChild(s):setTimeout(arguments.callee,10)}()}u(e,t,n)}}function c(e){if(W.ie&&W.win&&4!=e.readyState){var t=g("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(d(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)
}()}else e.parentNode.replaceChild(d(e),e)}function d(e){var t=g("div");if(W.win&&W.ie)t.innerHTML=e.innerHTML;else{var n=e.getElementsByTagName(M)[0];if(n){var i=n.childNodes;if(i)for(var s=i.length,a=0;s>a;a++)1==i[a].nodeType&&"PARAM"==i[a].nodeName||8==i[a].nodeType||t.appendChild(i[a].cloneNode(!0))}}return t}function u(e,t,n){var i,s=m(n);if(W.wk&&W.wk<312)return i;if(s)if(typeof e.id==P&&(e.id=n),W.ie&&W.win){var a="";for(var r in e)e[r]!=Object.prototype[r]&&("data"==r.toLowerCase()?t.movie=e[r]:"styleclass"==r.toLowerCase()?a+=' class="'+e[r]+'"':"classid"!=r.toLowerCase()&&(a+=" "+r+'="'+e[r]+'"'));
var o="";for(var l in t)t[l]!=Object.prototype[l]&&(o+='<param name="'+l+'" value="'+t[l]+'" />');s.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+a+">"+o+"</object>",U[U.length]=e.id,i=m(e.id)}else{var c=g(M);c.setAttribute("type",E);for(var d in e)e[d]!=Object.prototype[d]&&("styleclass"==d.toLowerCase()?c.setAttribute("class",e[d]):"classid"!=d.toLowerCase()&&c.setAttribute(d,e[d]));for(var u in t)t[u]!=Object.prototype[u]&&"movie"!=u.toLowerCase()&&h(c,u,t[u]);s.parentNode.replaceChild(c,s),i=c
}return i}function h(e,t,n){var i=g("param");i.setAttribute("name",t),i.setAttribute("value",n),e.appendChild(i)}function p(e){var t=m(e);t&&"OBJECT"==t.nodeName&&(W.ie&&W.win?(t.style.display="none",function(){4==t.readyState?f(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function f(e){var t=m(e);if(t){for(var n in t)"function"==typeof t[n]&&(t[n]=null);t.parentNode.removeChild(t)}}function m(e){var t=null;try{t=O.getElementById(e)}catch(n){}return t}function g(e){return O.createElement(e)
}function v(e,t,n){e.attachEvent(t,n),z[z.length]=[e,t,n]}function y(e){var t=W.pv,n=e.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]?!0:!1}function b(e,t,n,i){if(!W.ie||!W.mac){var s=O.getElementsByTagName("head")[0];if(s){var a=n&&"string"==typeof n?n:"screen";if(i&&(A=null,I=null),!A||I!=a){var r=g("style");r.setAttribute("type","text/css"),r.setAttribute("media",a),A=s.appendChild(r),W.ie&&W.win&&typeof O.styleSheets!=P&&O.styleSheets.length>0&&(A=O.styleSheets[O.styleSheets.length-1]),I=a
}W.ie&&W.win?A&&typeof A.addRule==M&&A.addRule(e,t):A&&typeof O.createTextNode!=P&&A.appendChild(O.createTextNode(e+" {"+t+"}"))}}}function w(e,t){if($){var n=t?"visible":"hidden";j&&m(e)?m(e).style.visibility=n:b("#"+e,"visibility:"+n)}}function x(e){var t=/[\\\"<>\.;]/,n=null!=t.exec(e);return n&&typeof encodeURIComponent!=P?encodeURIComponent(e):e}{var k,S,C,T,A,I,P="undefined",M="object",D="Shockwave Flash",_="ShockwaveFlash.ShockwaveFlash",E="application/x-shockwave-flash",L="SWFObjectExprInst",R="onreadystatechange",N=window,O=document,B=navigator,V=!1,F=[i],q=[],U=[],z=[],j=!1,H=!1,$=!0,W=function(){var e=typeof O.getElementById!=P&&typeof O.getElementsByTagName!=P&&typeof O.createElement!=P,t=B.userAgent.toLowerCase(),n=B.platform.toLowerCase(),i=/win/.test(n?n:t),s=/mac/.test(n?n:t),a=/webkit/.test(t)?parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,r=!1,o=[0,0,0],l=null;
if(typeof B.plugins!=P&&typeof B.plugins[D]==M)l=B.plugins[D].description,!l||typeof B.mimeTypes!=P&&B.mimeTypes[E]&&!B.mimeTypes[E].enabledPlugin||(V=!0,r=!1,l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),o[0]=parseInt(l.replace(/^(.*)\..*$/,"$1"),10),o[1]=parseInt(l.replace(/^.*\.(.*)\s.*$/,"$1"),10),o[2]=/[a-zA-Z]/.test(l)?parseInt(l.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof N.ActiveXObject!=P)try{var c=new ActiveXObject(_);c&&(l=c.GetVariable("$version"),l&&(r=!0,l=l.split(" ")[1].split(","),o=[parseInt(l[0],10),parseInt(l[1],10),parseInt(l[2],10)]))
}catch(d){}return{"w3":e,"pv":o,"wk":a,"ie":r,"win":i,"mac":s}}();!function(){W.w3&&((typeof O.readyState!=P&&"complete"==O.readyState||typeof O.readyState==P&&(O.getElementsByTagName("body")[0]||O.body))&&e(),j||(typeof O.addEventListener!=P&&O.addEventListener("DOMContentLoaded",e,!1),W.ie&&W.win&&(O.attachEvent(R,function(){"complete"==O.readyState&&(O.detachEvent(R,arguments.callee),e())}),N==top&&!function(){if(!j){try{O.documentElement.doScroll("left")}catch(t){return void setTimeout(arguments.callee,0)
}e()}}()),W.wk&&!function(){return j?void 0:/loaded|complete/.test(O.readyState)?void e():void setTimeout(arguments.callee,0)}(),n(e)))}(),function(){W.ie&&W.win&&window.attachEvent("onunload",function(){for(var e=z.length,t=0;e>t;t++)z[t][0].detachEvent(z[t][1],z[t][2]);for(var n=U.length,i=0;n>i;i++)p(U[i]);for(var s in W)W[s]=null;W=null;for(var a in swfobject)swfobject[a]=null;swfobject=null})}()}return{"registerObject":function(e,t,n,i){if(W.w3&&e&&t){var s={};s.id=e,s.swfVersion=t,s.expressInstall=n,s.callbackFn=i,q[q.length]=s,w(e,!1)
}else i&&i({"success":!1,"id":e})},"getObjectById":function(e){return W.w3?r(e):void 0},"embedSWF":function(e,n,i,s,a,r,c,d,h,p){var f={"success":!1,"id":n};W.w3&&!(W.wk&&W.wk<312)&&e&&n&&i&&s&&a?(w(n,!1),t(function(){i+="",s+="";var t={};if(h&&typeof h===M)for(var m in h)t[m]=h[m];t.data=e,t.width=i,t.height=s;var g={};if(d&&typeof d===M)for(var v in d)g[v]=d[v];if(c&&typeof c===M)for(var b in c)typeof g.flashvars!=P?g.flashvars+="&"+b+"="+c[b]:g.flashvars=b+"="+c[b];if(y(a)){var x=u(t,g,n);t.id==n&&w(n,!0),f.success=!0,f.ref=x
}else{if(r&&o())return t.data=r,void l(t,g,n,p);w(n,!0)}p&&p(f)})):p&&p(f)},"switchOffAutoHideShow":function(){$=!1},"ua":W,"getFlashPlayerVersion":function(){return{"major":W.pv[0],"minor":W.pv[1],"release":W.pv[2]}},"hasFlashPlayerVersion":y,"createSWF":function(e,t,n){return W.w3?u(e,t,n):void 0},"showExpressInstall":function(e,t,n,i){W.w3&&o()&&l(e,t,n,i)},"removeSWF":function(e){W.w3&&p(e)},"createCSS":function(e,t,n,i){W.w3&&b(e,t,n,i)},"addDomLoadEvent":t,"addLoadEvent":n,"getQueryParamValue":function(e){var t=O.location.search||O.location.hash;
if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return x(t);for(var n=t.split("&"),i=0;i<n.length;i++)if(n[i].substring(0,n[i].indexOf("="))==e)return x(n[i].substring(n[i].indexOf("=")+1))}return""},"expressInstallCallback":function(){if(H){var e=m(L);e&&k&&(e.parentNode.replaceChild(k,e),S&&(w(S,!0),W.ie&&W.win&&(k.style.display="block")),C&&C(T)),H=!1}}}}();define("swfobject",function(e){return function(){var t;return t||e.swfobject}}(this)),define("plex/base/utils/MediaDecisionUtil",["underscore","jquery","plex/base/utils/BaseClass","plex/base/utils/Logger","plex/base/utils/MediaUtil","plex/base/utils/formatters/StringUtil","plex/base/utils/types/StreamTypes"],function(e,t,n,i,s,a,r){var o=n.extend({"getMediaDecision":function(n){n.transcoderOptions||(n.transcoderOptions={}),n.maxBitrate=n.transcoderOptions.maxVideoBitrate||n.transcoderOptions.maxAudioBitrate;
var i=n.item.server;e.defaults(n,{"minVersionForDash":i.features.dash,"minVersionForHTTP":i.features.streamingMKV});var s={"session":a.random(),"media":n.media,"part":n.part},r=this.resolveMedia(n,s);return r=r.then(function(){return t.when(s.url)}),r=r.then(function(e){return s.url=e,s})},"resolveMedia":function(n,i){if(i.media)return this.resolvePart(n,i);var a=n.item.get("Media"),r=t.Deferred();if(!a.length)return i.offset=n.offset||0,this.resolveDirectPlay(n,i),this.resolveUrl(n,i),r.resolve(i),r.promise();
var o=e.findWhere(a,{"protocol":"embed"});return o?(i.embed=!0,i.media=o,i.part=e.first(o.Part),r.reject(i),r.promise()):(i.media=1===a.length?a[0]:s.getMediaByBitrate(a,n.maxBitrate),this.validateMedia(n,i))},"validateMedia":function(e,n){var i=s.getMissingParts(n.media),a=t.Deferred();if(!i.length)return this.resolvePart(e,n);var r=i[0];return n.error=1==r.exists?"Please check the permissions for this file.":"Please check that the file exists and the necessary drive is mounted.",a.reject(n),a.promise()
},"resolvePart":function(t,n){return t.offset&&!n.part?1===n.media.Part.length?(n.part=n.media.Part[0],n.offset=t.offset):(n.part=s.getPartByAbsoluteOffset(n.media,t.offset),n.offset=s.getRelativeOffset(n.media,n.part,t.offset)):(n.part||(n.part=e.first(n.media.Part)),n.offset=t.offset||0),this.resolveIndirect(t,n)},"resolveIndirect":function(n,i){var s=t.Deferred(),a=e.bind(function(){if("webkit"===i.media.protocol)return i.redirect=!0,void s.reject(i);var e=n.transcodeServer,t=n.fallbackServer,a=[e];
t&&t.id!==e.id&&a.push(t);for(var r=!1,o=0,l=a.length;l>o;o++)if(n.transcodeServer=a[o],delete i.directPlay,delete i.error,this.resolveDirectPlay(n,i),this.validateDirectPlay(n,i)){r=!0;break}r?(i.transcodeServer=n.transcodeServer,this.resolveUrl(n,i),s.resolve(i)):s.reject(i)},this),r=e.bind(function(){i.redirect=!0,s.reject(i)},this);return n.item.resolveIndirect(i.media,i.part).done(a).fail(r),s.promise()},"resolveDirectPlay":function(e,t){if(!t.media)return void(t.directPlay=!0);if("video"===e.type){if(t.playerType="html",t.supportsTranscoding=e.transcodeServer&&e.transcodeServer.get("transcoderVideo"),t.supportsTranscoding){if(!e.allowDirectPlay)return t.directPlay=!1,void i.warn("direct play failed, setting is disabled");
var n,a=r.getStreamTypeByString("subtitles"),o=s.getStreams(t.media,{"streamType":a.id,"selected":!0});if(o.length&&(n=o[0]),n&&n.id>0)return t.directPlay=!1,void i.warn("direct play failed, subtitles are selected")}if((e.flash||e.hls)&&"hls"===t.media.protocol)return e.hls||(t.playerType="flash"),void(t.directPlay=!0);if(e.flash&&"flv"===t.media.container)return t.playerType="flash",void(t.directPlay=!0)}else t.supportsTranscoding=e.transcodeServer&&e.transcodeServer.get("transcoderAudio");t.directPlay=this.canDirectPlay(e,t)
},"validateDirectPlay":function(e,t){if(t.directPlay)t.protocol="http";else{if("video"===e.type)if(e.hls)t.protocol="hls";else if(e.http&&e.transcodeServer&&e.transcodeServer.isVersionOrNewer(e.minVersionForHTTP))t.protocol="http";else if(e.dash){if(e.transcodeServer&&!e.transcodeServer.isVersionOrNewer(e.minVersionForDash))return t.error="HTML5 streaming requires Plex Media Server 0.9.8.6 or later.",!1;t.protocol="dash"}else{if(!e.flash)return t.error="This browser does not support video streaming.",!1;
t.protocol="hls",t.playerType="flash"}else t.protocol="http";if(!t.supportsTranscoding)return t.error="This media server does not support transcoding.",!1}return!0},"resolveUrl":function(t,n){var i=t.item,s=n.media,a=n.part;if(n.directPlay)if(a){var r=/(googlevideo|youtube).com/.test(a.key);n.url="flv"===a.container&&r&&a.postURL?a.postURL:i.server.resolveUrl(a.key,{"appendToken":!0})}else n.url=i.server.resolveUrl(i.get("key"),{"appendToken":!0});else{var o=e.extend(t.transcoderOptions,{"protocol":n.protocol,"session":n.session});
e.each(e.keys(o),function(e){null==o[e]&&delete o[e]}),("hls"===o.protocol||"dash"===o.protocol)&&(o.offset=0),n.url="video"===t.type?t.transcoder.video(t.transcodeServer,i,s,a,o):t.transcoder.music(t.transcodeServer,i,o)}},"canPlayType":function(e,t){if("audio"===e&&window.soundManager)return window.soundManager.canPlayMIME(t);var n=document.createElement(e);return!(!n.canPlayType||!n.canPlayType(t).replace(/^no$/,""))},"canDirectPlay":function(t,n){var a=n.media,o=t.supportedTypes[a.container];
if(!o)return i.warn("direct play failed, unsupported container: "+a.container),!1;var l=o[t.type];if(t.maxBitrate||l&&l.maxBitrate){l=l?e.clone(l):{};var c;c=t.maxBitrate&&l.maxBitrate?Math.min(l.maxBitrate,t.maxBitrate):t.maxBitrate||l.maxBitrate,l.maxBitrate=c,"video"===t.type?t.transcoderOptions.maxVideoBitrate=c:t.transcoderOptions.maxAudioBitrate=c}var d=e.keys(o);if(d&&d.length){for(var u=0,h=d.length;h>u;u++){var p=d[u];if("mimeType"===p){var f=o.mimeType;if(!this.canPlayType(t.type,f))return i.warn("direct play failed canPlayType test, "+p+": "+f),!1
}else if("video"===p||"audio"===p){var m=r.getStreamTypeByString(p),g=s.getStreams(a,{"streamType":m.id}),v=s.getStreams(a,{"streamType":m.id,"selected":!0});if(!g.length)continue;if(n.supportsTranscoding&&v.length&&v[0]!==g[0])return i.warn("direct play failed, first "+p+" stream is not selected"),!1;var y=t.type===p?l:o[p];if(!this.validateStream(g[0],y,t,n))return!1}else{var b=a[p];if(null!=b&&o[p]!=b)return i.warn("direct play failed, container: "+a.container+", "+p+": "+b),!1}}return!0}return i.warn("direct play failed, no keys: "+a.container),!1
},"validateStream":function(t,n,s,a){var r=e.keys(n);if(r&&r.length)for(var o=0,l=r.length;l>o;o++){var c=r[o],d=n[c],u=t[c],h=c.match(/^max(\w+)/);if(h){if(!a.supportsTranscoding)continue;if(c=h[1],c=c.charAt(0).toLowerCase()+c.slice(1),u=t[c],null!=u&&u>d)return i.warn("direct play failed, streamType: "+t.streamType+", "+c+": "+u),!1}else if(null!=u&&d!=u&&!e.contains(d,u)){if("codec"===c&&"ac3"===u&&s.allowAC3){i.warn("direct play of ac3 audio is not recommended");continue}return i.warn("direct play failed, streamType: "+t.streamType+", "+c+": "+u),!1
}}return!0}});return new o}),SHA256_hexchars=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"),SHA256_K=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),define("jssha256",function(){}),define("plex/base/utils/Transcoder",["underscore","jquery","plex/base/utils/BaseClass","plex/base/utils/MediaUtil"],function(e,t,n,i){var s={"dash":".mpd","hls":".m3u8","http":""},a=n.extend({"image":function(e,n,i){if(!n)return"";
var s=i.fallbackServer,a=s&&(e.get("cloud")||e.get("synced")),r=a?s:e,o=r.id===e.id;e.get("cloud")&&(n=s?s.resolveUrl(n,{"appendToken":!0}):e.resolveUrl(n,{"appendToken":!0,"connection":{"address":"node.plexapp.com","port":"32400"}}));var l={"url":e.resolveUrl(n,{"useLoopback":o}),"width":parseInt(i.width,10),"height":parseInt(i.height,10)};i.minSize&&(l.minSize=1);var c="/photo/:/transcode?"+t.param(l,!0);return r.resolveUrl(c,{"appendToken":!0})},"music":function(n,i,s){var a=e.first(i.get("Media"));
if(a){var r=e.first(a.Part);if(r){var o,l;return n.supports("universalMusicTranscoder")?(o=e.extend({"path":n.resolveUrl(i.get("key"),{"useLoopback":!0}),"mediaIndex":0,"partIndex":0},s),l="/music/:/transcode/universal/start.mp3"):(o={"identifier":i.get("identifier"),"url":n.resolveUrl(r.key,{"useLoopback":!0}),"format":"mp3","audioCodec":"libmp3lame","audioBitrate":320,"audioSamples":44100},l="/music/:/transcode/generic.mp3"),o=e.extend(o,n.getHeaders()),n.resolveUrl(l+"?"+t.param(o,!0))}}},"video":function(n,a,r,o,l){var c=e.indexOf(a.get("Media"),r),d=e.indexOf(r.Part,o);
l||(l={});var u=n.id===a.server.id,h=e.extend({"path":a.server.resolveUrl(a.get("key"),{"useLoopback":u,"appendToken":!u}),"mediaIndex":c,"partIndex":d,"protocol":"hls","offset":0,"fastSeek":1,"directPlay":0,"directStream":1,"videoQuality":i.qualities[12],"videoResolution":i.resolutions[12],"maxVideoBitrate":i.bitrates[12],"subtitleSize":100,"audioBoost":100},l);h.path=h.path.replace(/^http[s]?:\/\/node.plexapp.com:[\d]+\//,n.url());var p=a.get("indirectHttpHeaders");p&&(h.httpCookies=p.Cookie,h.userAgent=p["User-Agent"]),h=e.extend(h,n.getHeaders());
var f=s[h.protocol],m="/video/:/transcode/universal/start"+f;return n.resolveUrl(m+"?"+t.param(h,!0))}});return new a}),define("plex/desktop/utils/DesktopTranscoder",["underscore","jquery","jssha256","plex/base/utils/BaseClass","plex/base/utils/Logger","plex/base/utils/Transcoder","plex/base/utils/MediaUtil","plex/base/utils/formatters/StringUtil","plex/base/models/SettingsModel"],function(e,t,n,i,s,a,r,o,l){var c="KQMIY6GATPC63AIMC4R2",d=o.decode64("k3U6GLkZOoNIoSgjDshPErvqMIFdE0xMTx8kgsrhnC0="),u=i.extend({"image":function(){return a.image.apply(a,arguments)
},"music":function(){return a.music.apply(a,arguments)},"video":function(e,n,i,s,a){if(a||(a={}),e.supports("universalTranscoder"))return this.getUniversalTranscoderUrl(e,n,i,s,a);var r=t.Deferred(),o=this.getTranscoderUrl(e,n,s,a),l=t.ajax(e.getXHROptions(o));return l.done(function(t){var n=t.replace(/[\s\S]+(session.+?\.m3u8)[\s\S]+/,"$1"),i=e.resolveUrl("video/:/transcode/segmented/")+n;r.resolve(i)}),l.fail(function(){r.reject()}),r.promise()},"getTranscoderUrl":function(n,i,a,u){var h=r.getQualityInfo(i,l).index,p=Math.round((new Date).getTime()/1e3),f={"identifier":i.get("identifier"),"key":n.resolveUrl(i.get("key"),{"useLoopback":!0}),"url":n.resolveUrl(a.key,{"useLoopback":!0}),"session":u.session,"offset":0,"quality":h,"subtitleSize":l.get("subtitleSize"),"audioBoost":l.get("audioBoost"),"3g":0},m=i.get("indirectHttpHeaders");
m&&(f.httpCookies=m.Cookie,f.userAgent=m["User-Agent"]);var g="/video/:/transcode/segmented/start.m3u8?"+t.param(f,!0);HMAC_SHA256_init(d),HMAC_SHA256_write(g+"@"+p);var v=HMAC_SHA256_finalize(),y=o.encode64(array_to_string(v)),b=r.capabilities;l.get("preferAAC")&&(b=r.capabilities.replace("audioDecoders=mp3,aac","audioDecoders=aac")),l.get("directStream")||(b=r.capabilities.replace(/videoDecoders=[^;]+;audioDecoders=[^;]+/,""));var w=e.extend(n.getHeaders(),{"X-Plex-Access-Key":c,"X-Plex-Access-Code":y,"X-Plex-Access-Time":p,"X-Plex-Client-Capabilities":b});
return s.log("transcoding with old transcoder"),s.log("capabilities: "+b),s.log("quality: "+f.quality),s.log("subtitleSize: "+f.subtitleSize),s.log("audioBoost: "+f.audioBoost),g+"&"+t.param(w,!0)},"getUniversalTranscoderUrl":function(t,n,i,o,c){var d=e.extend({"directStream":l.get("directStream")?1:0,"videoQuality":r.qualities[12],"videoResolution":r.resolutions[12],"maxVideoBitrate":r.bitrates[12],"subtitleSize":l.get("subtitleSize"),"audioBoost":l.get("audioBoost")},c);return l.get("preferAAC")&&(d["X-Plex-Client-Profile-Extra"]="add-transcode-target-audio-codec(type=videoProfile&context=streaming&protocol=hls&audioCodec=aac)"),s.log("transcoding with universal transcoder"),s.log("directStream: "+d.directStream),s.log("videoQuality: "+d.videoQuality),s.log("videoResolution: "+d.videoResolution),s.log("maxVideoBitrate: "+d.maxVideoBitrate),s.log("subtitleSize: "+d.subtitleSize),s.log("audioBoost: "+d.audioBoost),d["X-Plex-Client-Profile-Extra"]&&s.log("profileExtra: "+d["X-Plex-Client-Profile-Extra"]),a.video.call(this,t,n,i,o,d)
}});return new u}),function(){var e={};!function(){function t(){i||console.log.apply(console,arguments);for(var e=Math.round(Date.now()-a),t=[],n=0;n<arguments.length;n++){var s=""+arguments[n];"[obj"!=s.slice(0,4)&&t.push(s)}var r=e+": "+t.join(", "),o=document.getElementById("console");o&&(o.value+=r+"\n"),i&&console.log(r)}function n(e){s>=e&&t.apply(null,arguments)}var i=!0,s=2,a=Date.now();e.dlog=n,e.log=t,e.DLOG_LEVEL=s}(),function(){var t={"SMOOTH_STREAMING":"smoothstreaming","DASH":"dash"};
e.StreamingType=t}(),function(){var t=function(e){this.ttml_=e,this.frameRate_=30};t.prototype.xmlDecode_=function(e){return e.replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">")},t.prototype.parseChildElements_=function(e,t,n){var i=[];if(null==n)return i;for(var s=n.firstElementChild;null!=s;s=s.nextElementSibling)s.nodeName==e&&i.push(t.call(this,s));return i},t.prototype.parseAttributes_=function(e,t){var n={};for(var i in e)null!=t.attributes.getNamedItem(i)&&(n[i]=e[i](t.attributes[i].value));
return n},t.prototype.parseTime_=function(e){var t=e.split(":"),n=3600*parseFloat(t[0])+60*parseFloat(t[1])+parseFloat(t[2])+parseFloat(t[3])/this.frameRate_;return n},t.prototype.parseTextTrack_=function(e){var t=this.xmlDecode_(e.replace(/[\r\n]+/g,"").replace(/ {2,}/g," ").replace(/<[^>]+>/g,"").replace(/<br\s*\/>/g,"\n"));return t.trim()},t.prototype.parse_cue_=function(e){var t=this.parseAttributes_({"begin":this.parseTime_.bind(this),"end":this.parseTime_.bind(this)},e);return t&&(t.caption=this.parseTextTrack_(e.textContent),t.start=t.begin,delete t.begin),t
},t.prototype.parse_div_=function(e){return this.parseChildElements_("p",this.parse_cue_,e)},t.prototype.parse_body_=function(e){var t=this.parseChildElements_("div",this.parse_div_,e);return t[0]},t.prototype.parse_ttml_=function(e){var t=this.parseChildElements_("body",this.parse_body_,e);return t[0]},t.prototype.parse=function(){for(var e=new DOMParser,t=e.parseFromString(this.ttml_,"text/xml"),n=0;n<t.childNodes.length;n++)if("tt"===t.childNodes[n].nodeName)return this.parse_ttml_(t.childNodes[n])
},e.Ttml=t}(),function(){var t=0,n=1,i=function(e){if(null==e)throw new Error("A url for the close captions location is required");this._url=e,this._callback=null,this._ccInfo=null};i.prototype.ccType=function(){return t},i.prototype.requestCC=function(){var e=new XMLHttpRequest;e.addEventListener("load",this.onCCLoad.bind(this)),e.addEventListener("error",this.onCCError.bind(this)),e.open("GET",this._url),e.send()},i.prototype.load=function(t){if(null==t)throw new Error("A callback is required");
this._callback=t,this.requestCC(),e.dlog(1,"Sent request to get the close captions info")},i.prototype.getCCInfo=function(){return this._ccInfo},i.prototype.onCCError=function(){var t="Error geting captions from "+this._url;return e.log(t),this._callback(t)},i.prototype.onCCLoad=function(i){e.dlog(2,"Close Captions Info received");var s=null;if(200!==i.target.status||i.target.status>299)return s="HTTP error "+i.target.status+" retrieving close captions from "+this._url,e.log(s),this._callback(s);
switch(this.ccType()){case t:this._ccInfo=new e.Ttml(i.target.responseText).parse();break;case n:throw new Error("VTT parsing not implemented yet")}return null===this._ccInfo?(s="Error parsing the close captions info",e.log(s),this._callback(s)):this._callback(s,this._ccInfo)},e.CloseCaptionsLoader=i}(),function(){function t(e){return e}function n(e){var t=/PT(([0-9]*)H)?(([0-9]*)M)?(([0-9.]*)S)?/,n=t.exec(e);return n?3600*parseFloat(n[2]||0)+60*parseFloat(n[4]||0)+parseFloat(n[6]||0):parseFloat(e)
}function i(e,t,n){var i=[];if(null==n)return i;for(var s=n.firstElementChild;null!=s;s=s.nextElementSibling)s.nodeName==e&&i.push(t(s));return i}function s(e,t,n){return i(e,t,n)[0]||null}function a(e,t,n){n=n||{};for(var i in e)null!=t.attributes.getNamedItem(i)&&(n[i]=e[i](t.attributes[i].value));return n}function r(e){var t=/([0-9]+)(\/([0-9]+))?/.exec(e);return t?t[3]?parseFloat(t[1])/(parseFloat(t[3])||1):parseFloat(t[1]):1}function o(e){var t=/([0-9]+)-([0-9]+)/.exec(e);if(!t)return null;var n=parseInt(t[1]),i=parseInt(t[2]);
return{"start":n,"end":i,"length":i-n+1}}function l(e){return a(x,e)}function c(e){return e.textContent}function d(e){return o(e.attributes.range.value)}function u(e){var t=a(k,e);return t.initialization=s("Initialization",d,e),t}function h(e){return a(S,e)}function p(e){var t=u(e);return t.durationSeconds=t.timescale&&t.duration?t.duration/t.timescale:t.duration,t.segmentURLs=i("SegmentURL",l,e),t}function f(e){var t=a(T,e);return t.baseURLs=i("BaseURL",c,e),t.segmentBase=s("SegmentBase",u,e),t.segmentList=s("SegmentList",p,e),t.contentProtection=s("ContentProtection",C,e),t
}function m(e){var t=f(e);return a(A,e,t),t}function g(e){var t=f(e);t.representations=i("Representation",m,e),t.segmentTemplate=s("SegmentTemplate",h,e);for(var n=0;n<t.representations.length;n++)t.representations[n].segmentTemplate=t.segmentTemplate;return t}function v(e){var t=f(e);return a(I,e,t),t.adaptationSets=i("AdaptationSet",g,e),t}function y(e){var t={};return a({"mediaPresentationDuration":n},e,t),t.periods=i("Period",v,e),t.baseURLs=i("BaseURL",c,e),t}function b(e,t){e.manifestURL=t,e.duration=e.mediaPresentationDuration,delete e.mediaPresentationDuration,e.adaptationSets=e.periods[0].adaptationSets,delete e.periods;
for(var n=0;n<e.adaptationSets.length;n++)e.adaptationSets[n].mimeType?(e.adaptationSets[n].mime=e.adaptationSets[n].mimeType,delete e.adaptationSets[n].mimeType):e.adaptationSets[n].mime=e.adaptationSets[n].representations[0].mimeType,e.adaptationSets[n].codecs||(e.adaptationSets[n].codecs=e.adaptationSets[n].representations[0].codecs);return e}function w(e,t){var n=new DOMParser,i=n.parseFromString(e,"text/xml");return b(y(i.firstChild),t)}var x={"media":t,"mediaRange":o,"index":t,"indexRange":o},k={"timescale":parseInt,"duration":parseInt,"indexRange":o,"presentationTimeOffset":parseInt,"startNumber":parseInt},S={"timescale":parseInt,"duration":parseInt,"initialization":t,"media":t,"startNumber":parseInt},C=function(e){var t=e.attributes.schemeIdUri;
if(!t||"http://youtube.com/drm/2012/10/10"!=t.textContent)return null;for(var n={},i=e.firstElementChild;null!=i;i=i.nextElementSibling)if("yt:SystemURL"==i.nodeName){var s=i.attributes.type.textContent;n[s]=i.textContent}return n},T={"id":t,"profiles":t,"width":parseInt,"height":parseInt,"frameRate":r,"audioSamplingRate":parseInt,"mimeType":t,"codecs":t},A={"bandwidth":parseInt,"qualityRanking":parseInt},I={"id":parseInt,"start":n,"duration":n};e.parseDASHManifest=w}(),function(){function t(e){for(var t=new DataView(e),n=0;n<e.byteLength;){var i=t.getUint32(n+4,!1);
if(1936286840==i||1836019558==i)break;n+=t.getUint32(n,!1)}return new Uint8Array(e.slice(0,n))}function n(e,t){for(var n=new DataView(e),i=0;1936286840!=n.getUint32(i+4,!1);)if(i+=n.getUint32(i,!1),i>=e.byteLength)throw"Could not find sidx";var s=n.getUint32(i,!1)+i;if(s>e.byteLength)throw"sidx terminates after array buffer";var a=n.getUint8(i+8);i+=12;var r=n.getUint32(i+4,!1);i+=8;var o,l;0==a?(o=n.getUint32(i,!1),l=n.getUint32(i+4,!1),i+=8):(o=(n.getUint32(i,!1)<<32)+n.getUint32(i+4,!1),l=(n.getUint32(i+8,!1)<<32)+n.getUint32(i+12,!1),i+=16),l+=s+(t||0);
var c=n.getUint16(i+2,!1);i+=4;for(var d=l,u=o,h=[],p=0;c>p;p++){var f=n.getUint32(i,!1),m=2147483648&f;if(m)throw"Unhandled indirect reference";f=2147483647&f;var g=n.getUint32(i+4,!1);i+=12,h.push({"size":f,"offset":d,"duration":g/r,"time":u/r}),d+=f,u+=g}if(i!=s)throw"Error: final pos "+i+" differs from SIDX end "+s;return h}window.ArrayBuffer&&!window.ArrayBuffer.prototype.slice&&(window.ArrayBuffer.prototype.slice=function(e,t){var n=new Uint8Array(this);null==t&&(t=n.length);for(var i=new ArrayBuffer(t-e),s=new Uint8Array(i),a=0;a<s.length;a++)s[a]=n[a+e];
return i}),e.extractInit=t,e.parseSIDX=n}(),function(){function t(e){return e}function n(e){for(var t=new ArrayBuffer(e.length/2),n=new Uint8Array(t),i=0;i<e.length;i+=2)n[i/2]=parseInt(e.substr(i,2),16);return n}function i(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t}function s(e){return n(e.replace(/[{}-]/g,""))}function a(e,t,n){var i=[];if(null==n)return i;for(var s=n.firstElementChild;null!=s;s=s.nextElementSibling)s.nodeName==e&&i.push(t(s));return i}function r(e,t,n){n=n||{};
for(var i in e)null!=t.attributes.getNamedItem(i)&&(n[i]=e[i](t.attributes[i].value));return n}function o(t){var n={},s=t.split("00000001");return 3!==s.length?(t||(e.log("Warning, Audio codec private data is not specified."),t="1210"),n=i(t)):(n.SPS=i(s[1]),n.PPS=i(s[2])),n}function l(t){return"AACL"==t?"mp4a.40.2":"H264"==t||"AVC1"==t?"avc1.4d40":(e.log("Warning, unsupported FourCC encountered: "+t),"")}function c(e){var t={};return r({"Bitrate":parseInt},e,t),r({"CodecPrivateData":o},e,t),r({"MaxWidth":parseInt},e,t),r({"MaxHeight":parseInt},e,t),r({"FourCC":l},e,t),t
}function d(e){var t={};return r({"Bitrate":parseInt},e,t),r({"CodecPrivateData":o},e,t),r({"SamplingRate":parseInt},e,t),r({"Channels":parseInt},e,t),r({"BitsPerSample":parseInt},e,t),r({"PacketSize":parseInt},e,t),r({"FourCC":l},e,t),t}function u(e){var t=[];if(null==e)return t;for(var n=-1,i=e.firstElementChild;null!=i;i=i.nextElementSibling)if("c"==i.nodeName){var s={};if(-1==n&&(n=null!=i.attributes.getNamedItem("t")?parseInt(i.attributes.t.value):0),s.time=n/1e7,s.timeURL=n,null==i.attributes.getNamedItem("d"))throw"Expected attribute 'd' not found";
var a=parseInt(i.attributes.d.value);s.duration=a/1e7,s.durationURL=a,n+=a,t.push(s)}return t}function h(e){var n={};return r({"Type":t},e,n),r({"Url":t},e,n),"video"===n.Type?n.QualityLevels=a("QualityLevel",c,e):"audio"==n.Type&&(n.QualityLevels=a("QualityLevel",d,e)),n.Fragments=u(e),n}function p(e,t){for(var n=[],i=[],s=!1,a=!1,r=e.length-1;r>=0&&(a||"video"!==e[r].Type||(i.push(r),a=!0),s||"audio"!==e[r].Type||(i.push(r),s=!0),!a||!s);r--);for(var r=0;r<e.length;r++)if(-1!==i.indexOf(r)){var o={};
switch(o.contentProtection=null,e[r].Type){case"audio":o.mime="audio/mp4";break;case"video":o.mime="video/mp4"}if(e[r].QualityLevels){o.representations=[];for(var l=0;l<e[r].QualityLevels.length;l++){var c={};switch(c.bandwidth=e[r].QualityLevels[l].Bitrate,c.baseURLs=[],c.baseURLs[0]=e[r].Url,c.segmentBase=null,c.segs=e[r].Fragments,e[r].Type){case"audio":c.codecs=e[r].QualityLevels[l].FourCC,c.audio_codec_private_data=e[r].QualityLevels[l].CodecPrivateData,c.audio_sample_rate=e[r].QualityLevels[l].SamplingRate;
break;case"video":c.codecs=e[r].QualityLevels[l].FourCC+e[r].QualityLevels[l].CodecPrivateData.SPS[3].toString(16).toLowerCase(),c.sps=e[r].QualityLevels[l].CodecPrivateData.SPS,c.pps=e[r].QualityLevels[l].CodecPrivateData.PPS,c.width=e[r].QualityLevels[l].MaxWidth,c.height=e[r].QualityLevels[l].MaxHeight}o.representations.push(c)}o.codecs=o.representations[0].codecs}t&&(o.contentProtection=t),n.push(o)}return n}function f(e){for(var t=atob(e.trim()),n=new ArrayBuffer(t.length),i=new Uint8Array(n),s=0;s<t.length;s++)i[s]=t.charCodeAt(s);
return{"ab":n,"u8":i}}function m(e){for(var t=0,n=[],i=[],s=new Uint16Array(e),a=e.byteLength/2;a>t&&(0===n.length||0===i.length);){for(;a>t&&60!==s[t];)t++;if(75===s[t+1]&&73===s[t+2]&&68===s[t+3]&&62===s[t+4])for(t+=5;a>t&&60!==s[t];)n.push(s[t]),t++;else if(76===s[t+1]&&65===s[t+2]&&95===s[t+3]&&85===s[t+4]&&82===s[t+5]&&76===s[t+6]&&62===s[t+7])for(t+=8;a>t&&60!==s[t];)i.push(s[t]),t++;else t++}return{"kid":String.fromCharCode.apply(null,n),"url":String.fromCharCode.apply(null,i)}}function g(e){var t={};
r({"SystemID":s},e,t);var n=f(e.textContent),i=m(n.ab);return t.KID=f(i.kid).u8,t.url=i.url,t.PrHeader=n.u8,t}function v(e){var t={};return t.ProtectionHeader=a("ProtectionHeader",g,e)[0],t}function y(e){var t={};r({"TimeScale":parseInt},e,t),t.TimeScale||(t.TimeScale=1e7),r({"Duration":parseInt},e,t),t.StreamIndexes=a("StreamIndex",h,e);var n=a("Protection",v,e);n&&n[0]&&(t.Protection=n[0]),t.duration=t.Duration/t.TimeScale;var i;return t.Protection&&(i={},i.playready=t.Protection.ProtectionHeader.url?t.Protection.ProtectionHeader.url:"http://playready.directtaps.net/pr/svc/rightsmanager.asmx"),t.adaptationSets=p(t.StreamIndexes,i),t.Protection&&(t.pr={},t.pr.systemId=t.Protection.ProtectionHeader.SystemID,t.pr.prHeader=t.Protection.ProtectionHeader.PrHeader,t.pr.ivsize=8,t.pr.kid=t.Protection.ProtectionHeader.KID),t
}function b(t,n){return t.manifestURL=n,t.type=e.StreamingType.SMOOTH_STREAMING,t}function w(e,t){for(var n,i=new DOMParser,s=i.parseFromString(e,"text/xml"),a=0;a<s.childNodes.length;a++)if("SmoothStreamingMedia"===s.childNodes[a].nodeName){n=s.childNodes[a];break}return b(y(n),t)}e.parseSSManifest=w}(),function(){function t(e,t,n){e.setUint32(t,n)}function n(e,t,n){for(var i=0;4>i;i++)e.setUint8(t+4+i,n.charCodeAt(i));return 8}function i(e,t,n,i,s){return n.set(s,i),i+s.length}function s(e,i,s,a,r,o){var l=a;
return a+=n(i,a,r),o&&(a=o(e,i,s,a)),t(i,l,a-l),a}function a(e,t,n,a,r,o){return s(e,t,n,a,r,function(e,t,n,s){return i(e,t,n,s,o)})}function r(e,t,n,i){return a(e,t,n,i,"smhd",[0,0,0,0,0,0,0,0])}function o(e,t,n,i){return a(e,t,n,i,"vmhd",[0,0,0,1,0,0,0,0,0,0,0,0])}function l(e,t,n,a){return s(e,t,n,a,"esds",function(e,t,n,s){var a=e.audio_codec_private_data[0],r=e.audio_codec_private_data[1];return s=i(e,t,n,s,[0,0,0,0,3,25,0,1,0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,a,r,6,1,2])})}function c(e,t,n,a){return s(e,t,n,a,"avcC",function(e,t,n,s){return s=i(e,t,n,s,[1,77,64,30,255,225]),t.setUint16(s,e.sps.length),s+=2,s=i(e,t,n,s,e.sps),t.setUint8(s,1),s+=1,t.setUint16(s,e.pps.length),s+=2,s=i(e,t,n,s,e.pps)
})}function d(e,t,n){for(var i=n-t+1,s=0,a=t;t+i/2>a;a++)s=e[a],e[a]=e[n-a+t],e[n-a+t]=s}function u(e){var t=new ArrayBuffer(e.length),n=new Uint8Array(t);return n.set(e),d(n,0,3),d(n,4,5),d(n,6,7),n}function h(e,t,n,a){return s(e,t,n,a,"tenc",function(e,t,n,s){s=i(e,t,n,s,[0,0,0,0,0,0,1]),t.setUint8(s,e.pr.ivsize),s++;var a=u(e.pr.kid);return s=i(e,t,n,s,a)})}function p(e,t,n,i){return s(e,t,n,i,"schi",function(e,t,n,i){return i=h(e,t,n,i)})}function f(e,t,n,i){return a(e,t,n,i,"schm",[0,0,0,0,99,101,110,99,0,1,0,0])
}function m(e,t,n,i){return"audio/mp4"!==e.mime?a(e,t,n,i,"frma",[97,118,99,49]):a(e,t,n,i,"frma",[109,112,52,97])}function g(e,t,n,i){return s(e,t,n,i,"sinf",function(e,t,n,i){return i=m(e,t,n,i),i=f(e,t,n,i),i=p(e,t,n,i)})}function v(e,t,n,a,r){return s(e,t,n,a,r,function(e,t,n,s){var a=e.audio_sample_rate>>8&255,o=255&e.audio_sample_rate;return s=i(e,t,n,s,[0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,2,0,16,0,0,0,0,a,o,0,0]),s=l(e,t,n,s),"enca"===r&&(s=g(e,t,n,s)),s})}function y(e,t,n,a,r){return s(e,t,n,a,r,function(e,t,n,s){return s=i(e,t,n,s,[0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),t.setUint16(s,e.width),s+=2,t.setUint16(s,e.height),s+=2,s=i(e,t,n,s,[0,72,0,0,0,72,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]),s=c(e,t,n,s),"encv"===r&&(s=g(e,t,n,s)),s
})}function b(e,t,n,a){return s(e,t,n,a,"stsd",function(e,t,n,s){return s=i(e,t,n,s,[0,0,0,0,0,0,0,1]),"audio/mp4"!==e.mime?(e.pr&&(s=y(e,t,n,s,"encv")),s=y(e,t,n,s,"avc1")):(e.pr&&(s=v(e,t,n,s,"enca")),s=v(e,t,n,s,"mp4a")),s})}function w(e,t,n,a){return s(e,t,n,a,"stbl",function(e,t,n,s){return s=b(e,t,n,s),s="audio/mp4"!==e.mime?i(e,t,n,s,[0,0,0,16,115,116,116,115,0,0,0,0,0,0,0,0,0,0,0,16,115,116,115,99,0,0,0,0,0,0,0,0,0,0,0,16,115,116,99,111,0,0,0,0,0,0,0,0,0,0,0,20,115,116,115,122,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16,115,116,115,115,0,0,0,0,0,0,0,0]):i(e,t,n,s,[0,0,0,16,115,116,116,115,0,0,0,0,0,0,0,0,0,0,0,16,115,116,115,99,0,0,0,0,0,0,0,0,0,0,0,16,115,116,99,111,0,0,0,0,0,0,0,0,0,0,0,20,115,116,115,122,0,0,0,0,0,0,0,0,0,0,0,0])
})}function x(e,t,n,i){return a(e,t,n,i,"url ",[0,0,0,1])}function k(e,t,n,a){return s(e,t,n,a,"dref",function(e,t,n,s){return s=i(e,t,n,s,[0,0,0,0,0,0,0,1]),s=x(e,t,n,s)})}function S(e,t,n,i){return s(e,t,n,i,"dinf",function(e,t,n,i){return i=k(e,t,n,i)})}function C(e,t,n,i){return s(e,t,n,i,"minf",function(e,t,n,i){return i=S(e,t,n,i),i=w(e,t,n,i),i="audio/mp4"!==e.mime?o(e,t,n,i):r(e,t,n,i)})}function T(e,t,n,i){return"audio/mp4"!==e.mime?a(e,t,n,i,"hdlr",[0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]):a(e,t,n,i,"hdlr",[0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0])
}function A(e,t,n,i){return a(e,t,n,i,"mdhd",[0,0,0,0,204,96,118,241,204,96,118,241,0,152,150,128,0,0,0,0,85,196,0,0])}function I(e,t,n,i){return s(e,t,n,i,"mdia",function(e,t,n,i){return i=A(e,t,n,i),i=T(e,t,n,i),i=C(e,t,n,i)})}function P(e,t,n,a){return s(e,t,n,a,"tkhd",function(e,t,n,s){return s=i(e,t,n,s,[0,0,0,3,204,96,118,241,204,96,118,241,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0]),t.setUint32(s,e.width),s+=4,t.setUint32(s,e.height),s+=4,t.setUint16(s,0),s+=2
})}function M(e,t,n,i){return s(e,t,n,i,"trak",function(e,t,n,i){return i=P(e,t,n,i),i=I(e,t,n,i)})}function D(e,t,n,i){return a(e,t,n,i,"trex",[0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])}function _(e,t,n,i){return s(e,t,n,i,"mvex",function(e,t,n,i){return i=D(e,t,n,i)})}function E(e,t,n,a){return s(e,t,n,a,"pssh",function(e,t,n,s){return s=i(e,t,n,s,[0,0,0,0]),s=i(e,t,n,s,e.pr.systemId),t.setUint32(s,e.pr.prHeader.length),s+=4,s=i(e,t,n,s,e.pr.prHeader)})}function L(e,t,n,i){return a(e,t,n,i,"mvhd",[0,0,0,0,204,96,118,241,204,96,118,241,0,152,150,128,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2])
}function R(e,t,n,i){return s(e,t,n,i,"moov",function(e,t,n,i){return i=L(e,t,n,i),e.pr&&(i=E(e,t,n,i)),i=_(e,t,n,i),i=M(e,t,n,i)})}function N(e){var t=new ArrayBuffer(2e4),n=new DataView(t),i=new Uint8Array(t),s=0,a=0;s=R(e,n,i,s),a=s-1;var r={};return r.data=t.slice(0,s),r.init={},r.init.start=0,r.init.end=a,r}function O(e,t,n){for(var i=0,s=t,a=0;4>a;a++)i<<=8,i+=n.charCodeAt(a);for(;e.getUint32(s+4,!1)!=i;)if(s+=e.getUint32(s),s>=e.byteLength)throw"Could not find box: "+n;return s}function B(e,t){var n=O(e,t,"traf");
n=O(e,n+8,"tfhd"),e.setUint32(n+12,1)}function V(e,t,n,i){var s=O(e,t,n),a=e.getUint32(s);return e.setUint32(s,a+i),s}function F(e,t,n){var i=0;if(i=V(e,i,"moof",t),i=V(e,i+8,"traf",t),i=O(e,i+8,"trun"),1&e.getUint32(i+8)){var s=i+16;e.setUint32(s,n)}return i}function q(e,t,n){var i=0;if(i=V(e,i,"moof",t),i=V(e,i+8,"traf",t),i=O(e,i+8,"trun"),1&e.getUint32(i+8)){var s=i+16,a=e.getUint32(s);e.setUint32(s,a+n)}return i}function U(e,t){var n=[0,0,0,20,116,102,100,116,1,0,0,0],i=n.length+8,s=new ArrayBuffer(e.byteLength+i),a=(new Uint8Array(e),new DataView(e)),r=new Uint8Array(s),o=new DataView(s),l=0;
return B(a,8),l=q(a,i,i),r.set(new Uint8Array(e,0,l)),r.set(n,l),o.setUint32(l+12,t/4294967295&4294967295),o.setUint32(l+16,4294967295&t),r.set(new Uint8Array(e,l,e.byteLength-l),l+i),s}function z(e,t,n,i,s){if(!s)return new Uint8Array(0);for(var a=new Uint8Array(n),r=0,o=0,l=t,c=0;n>c;c++)r=e.getUint16(l+i),o=i+2+6*r,a[c]=o,l+=o;return a}function j(e,t,n,a,r,o){return s(e,t,n,a,"mdat",function(e,t,n,s){return s=i(e,t,n,s,r),s=i(e,t,n,s,o)})}function H(e,t,n,a){return s(e,t,n,a,"saio",function(e,t,n,s){s=i(e,t,n,s,[0,0,0,0,0,0,0,1]);
var a=s+4+8;return t.setUint32(s,a),s+=4})}function $(e,t,n,a,r,o,l,c){return s(e,t,n,a,"saiz",function(e,t,n,s){return s=l?i(e,t,n,s,[0,0,0,0,0]):i(e,t,n,s,[0,0,0,0,c]),t.setUint32(s,r),s+=4,n.set(o,s),s+=o.length})}function W(e){var t=new DataView(e),n=0,i=0,s=0,a=t.getUint32(n);n=O(t,n+8,"traf"),n=O(t,n+8,"trun"),i=t.getUint32(n+12),n=O(t,n,"uuid");var r=t.getUint8(n+27),o=!1;if(2!==r&&0!==r)throw"uuid flags expected is 0x02 or 0x00 but found: "+r;2===r&&(o=!0);var l=t.getUint32(n+28);if(i!==l)throw"Samples count does not match "+i+" "+l;
var c=t.getUint32(n);s=c-32;var d=200,u=new ArrayBuffer(e.byteLength+d),h=new Uint8Array(u),p=new DataView(u);h.set(new Uint8Array(e,0,n));var f=n,m=8,g=n+32,v=n+c,y=t.getUint32(v),b=z(t,g,i,m,o);if(f=$(null,p,h,f,i,b,o,m),f=H(null,p,h,f),o){for(var w=0,x=0;x<b.length;x++)w+=b[x];if(w!==s)throw"Samples size does not match "+w+" "+s}else if(m*i!==s)throw"Samples size does not match "+m*i+" "+s;var k=new Uint8Array(e,g,s),S=new Uint8Array(e,v+8,y-8),C=f-a,T=f;return f=j(null,p,h,f,k,S),F(p,C,T+8+s),new Uint8Array(u,0,f)
}function Y(e,t,n){var i=U(e,t);return n?W(i):new Uint8Array(i)}e.abtohex=function(e){for(var t=[],n=0;n<e.byteLength;n++)t.push(e[n].toString(16));return t},e.abtob64=function(e){return btoa(String.fromCharCode.apply(null,new Uint8Array(e)))},e.createSSInit=N,e.process_traf=Y}(),function(){function t(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}function n(e){return String.fromCharCode.apply(String,e)}var i=function(e){this.video=e,!e.generateKeyRequest&&e.webkitGenerateKeyRequest&&(e.generateKeyRequest=e.webkitGenerateKeyRequest),!e.addKey&&e.webkitAddKey&&(e.addKey=e.webkitAddKey),this.initDataQueue=[],this.flavor=null,this.keySystem=null,this.licenseServerURL=null,e.generateKeyRequest&&e.addKey&&(e.addEventListener("needkey",this.onNeedKey.bind(this)),e.addEventListener("keymessage",this.onKeyMessage.bind(this)),e.addEventListener("keyerror",this.onKeyError.bind(this)),e.addEventListener("webkitneedkey",this.onNeedKey.bind(this)),e.addEventListener("webkitkeymessage",this.onKeyMessage.bind(this)),e.addEventListener("webkitkeyerror",this.onKeyError.bind(this)))
};i.kMime='video/mp4; codecs="avc1.640028"',i.kFlavorToSystem={"clearkey":["webkit-org.w3.clearkey","org.w3.clearkey"],"widevine":["com.widevine.alpha"],"playready":["com.youtube.playready","com.microsoft.playready"]},i.prototype.init=function(e,t){this.chooseFlavor(i.kMime,e,t),this.isClearKey="clearkey"==this.flavor},i.prototype.chooseFlavor=function(e,t,n){for(var s in t)if(!n||s==n){var a=i.kFlavorToSystem[s];if(a)for(var r in a)if(this.video.canPlayType(e,a[r]))return this.flavor=s,this.keySystem=a[r],void(this.licenseServerURL=t[s])
}throw"Could not find a compatible key system"},i.prototype.extractBMFFClearKeyID=function(e){var t=new ArrayBuffer(e.length),n=new Uint8Array(t);n.set(e);for(var i=new DataView(t),s=0;s<t.byteLength;){var a=i.getUint32(s,!1),r=i.getUint32(s+4,!1);if(1886614376!=r)throw"Box type "+r.toString(16)+' not equal to "pssh"';if(1477738184==i.getUint32(s+12,!1)&&69420633==i.getUint32(s+16,!1)&&2464609580==i.getUint32(s+20,!1)&&1558758348==i.getUint32(s+24,!1)){var o=i.getUint32(s+28,!1);if(16!=o)throw"Unexpected KID size "+o;
return new Uint8Array(t.slice(s+32,s+32+o))}if(3991899049==i.getUint32(s+12,!1)&&2044086990==i.getUint32(s+16,!1)&&2747803612==i.getUint32(s+20,!1)&&3575456237==i.getUint32(s+24,!1))return new Uint8Array(t.slice(s+36,s+52));s+=a}return e},i.prototype.onNeedKey=function(t){if(e.dlog(2,"onNeedKey()"),!this.keySystem)throw"Not initialized! Bad manifest parse?";if(16==t.initData.length)return void e.log("Dropping non-BMFF needKey event");var n=t.initData;this.isClearKey&&(n=this.extractBMFFClearKeyID(t.initData)),this.video.generateKeyRequest(this.keySystem,n),this.initDataQueue.push(n)
},i.prototype.onKeyMessage=function(t){e.dlog(2,"onKeyMessage() Sending request: "+this.licenseServerURL+" "+t.sessionId);var n=this.initDataQueue.shift(),i=new XMLHttpRequest;i.open("POST",this.licenseServerURL),i.setRequestHeader("content-type","text/xml;charset=utf-8"),i.addEventListener("load",this.onLoad.bind(this,n,t.sessionId)),i.responseType="arraybuffer",i.send(t.message)},i.prototype.onKeyError=function(t){e.dlog(2,"onKeyError("+t.keySystem+", "+t.errorCode.code+", "+t.systemCode+")")},i.prototype.onLoad=function(i,s,a){if(e.dlog(2,"onLoad("+this.licenseServerURL+"): "+s),a.target.status<200||a.target.status>299)throw"Bad XHR status: "+a.target.statusText;
{var r=n(new Uint8Array(a.target.response)).split("\r\n").pop();this.video.addKey(this.keySystem,t(r),i,s)}},e.EMEManager=i}(),function(){var t=function(e,t,n,i,s,a,r){this.url=e,this.bandwidth=t,this.width=n,this.height=i,this.sps=s,this.pps=a,this.codecs=r,this.initFragment=null,this.initRequestData=null,this.indexRequestData=null,this.isInitialized=!1,this.segs=null};e.Representation=t}(),function(){var t={"ENOUGH":20},n=function(e,t,n,i,s,a){if(this.sourceBuffer_=t,this.sourceBuffer_.appendBuffer)this.appendBuffer_=this.sourceBuffer_.appendBuffer,this.sourceBuffer_.addEventListener("updateend",this.onUpdateEnd.bind(this));
else{if(!this.sourceBuffer_.append)throw new Error("Unknown SourceBuffer interface");this.appendBuffer_=this.sourceBuffer_.append}this.representations_=n,this.currentRep=0,this.segIndex=null,this.mime=i,this.resetReason=null,this.active=!0,this.type=s,this.pr_=a,this.seekingStartTime=null,this.mediaSrc_=e,this.bitrates=[];for(var r=0;r<this.representations_.length;r++)this.bitrates.push(this.representations_[r].bandwidth);this.deferredAppends_=[],this.segmentQueue=[],this.segmentSize=0,this.segmentLastEndTime=0,this.waitingForBuffer=!1,this.segmentTimeout=null
};n.prototype.getCurrentTime=function(){return window.googledash.player.getMediaElement().currentTime},n.prototype.updateBuffer=function(){var t=this.sourceBuffer_.buffered;if(t.length>0){var n=t.end(t.length-1)-this.segmentLastEndTime;e.dlog(3,"["+this.mime+"] Play head: "+this.getCurrentTime()+" Segment size: "+(this.segmentSize/1024/1024).toFixed(2)+" MB Segment duration: "+n),this.segmentQueue.push({"size":this.segmentSize,"duration":n,"offset":this.segmentLastEndTime})}},n.prototype.reset=function(t){e.dlog(1,"SourceBuffer["+this.mime+"] reset: "+t),this.segIndex=null,this.representations_[this.currentRep].isInitialized=!1,this.resetReason=t||null,this.active=!0,this.segmentQueue=[],this.segmentSize=0,this.segmentLastEndTime=0,this.waitingForBuffer=!1,null!=this.segmentTimeout&&clearTimeout(this.segmentTimeout),"open"==this.mediaSrc_.readyState&&this.sourceBuffer_.abort()
},n.prototype.isInitialized=function(){return this.representations_[this.currentRep].isInitialized},n.prototype.initialize=function(){this.representations_[this.currentRep].isInitialized=!0},n.prototype.updating=function(){return this.sourceBuffer_.updating},n.prototype.onUpdateEnd=function(){this.updateBuffer(),this.deferredAppends_.length>0&&(e.dlog(2,"SourceBuffer["+this.mime+"] appended deferred data"),this.append(this.deferredAppends_.pop()))},n.prototype.append=function(t){var n=this.sourceBuffer_.buffered;
if(this.segmentSize=t.length,this.segmentLastEndTime=0,n.length>0&&(this.segmentLastEndTime=n.end(n.length-1)),this.sourceBuffer_.updating){if(this.deferredAppends_.length<5)return e.dlog(2,"SourceBuffer["+this.mime+"] deferring append"),void this.deferredAppends_.push(t);e.log("SourceBuffer["+this.mime+"] too many deferrals, aborting"),this.deferredAppends_=[],this.appendBuffer_.abort()}this.appendBuffer_.call(this.sourceBuffer_,t),"appendBuffer"in this.sourceBuffer_||this.updateBuffer()},n.prototype.getCurrentRep=function(){return this.representations_[this.currentRep]
},n.prototype.changeQuality=function(t){if(t===this.currentRep)return!1;e.dlog(2,"Bandwitdth change sourceBuffer["+this.mime+"]: "+this.active),e.dlog(2,"bandwidthChange["+this.mime+"]: "+this.currentRep+" "+t);var n,i=this.representations_[this.currentRep].bandwidth,s=this.representations_[t].bandwidth;e.dlog(2,"bandwidthChange["+this.mime+"]: "+i+" "+s),n=i>s?"rep_down":"rep_up",this.reset(n),this.currentRep=t},n.prototype.getRangesString=function(){for(var e=this.sourceBuffer_.buffered,t="Ranges["+this.mime+"]:",n=0;n<e.length;n++)t+=" ["+e.start(n)+","+e.end(n)+"]";
return t},n.prototype.findRangeForPlaybackTime=function(e){for(var t=this.sourceBuffer_.buffered,n=0;n<t.length;n++)if(t.start(n)<=e&&t.end(n)>=e)return{"start":t.start(n),"end":t.end(n)};return null},n.prototype.getBufferSize=function(t){e.dlog(4,"Time: "+t+" Ranges in onProgress: "+this.getRangesString());var n=this.findRangeForPlaybackTime(t),i=n&&n.end||0;if(null!==this.segIndex){var s=this.representations_[this.currentRep].segs[this.segIndex].time;i=s>i?s:i}if(n){var a=Math.abs(n.end-i);a>.001&&e.dlog(2,"Difference in available data: "+n.end+" "+i)
}return i-t},n.prototype.findSegmentIndexForTime=function(t){for(var n=this.representations_[this.currentRep].segs,i=0;i<n.length;i++){var s=n[i];if(s.time<=t&&s.time+s.duration>=t)return i==n.length-1&&s.time+s.duration+.5<t?null:i}return e.dlog(5,"Could not find segment for time "+t),null},n.prototype.identifyNextFragment=function(n){var i=this.findRangeForPlaybackTime(n),s=i&&i.end||n;if(s>n+t.ENOUGH)return e.dlog(3,"Enough buffering currentTime in rage: "+this.mime+" "+n+"  "+s),null;if(1==this.waitingForBuffer)return null;
if(null==this.segIndex){if(e.dlog(4,"Non existing index, finding the index for the next request["+this.mime+"]"),this.segIndex=this.findSegmentIndexForTime(s),null===this.segIndex)return this.active=!1,null;e.dlog(4,"New Index["+this.mime+"]: "+s+" "+this.segIndex)}else{null==i&&e.log("Playback head outside of buffer in append-continue state.");var a=this.representations_[this.currentRep].segs[this.segIndex].time;if(a>n+t.ENOUGH)return e.dlog(3,"Enough buffering: "+this.mime+" "+this.segIndex+" "+n+"  "+a),null
}return s},n.prototype.appendData=function(t){for(e.dlog(2,"["+this.mime+"] Time is "+this.getCurrentTime()+", asked to add a "+(t.byteLength/1024/1024).toFixed(2)+" MB segment, see if we can."),this.segmentQueue.length>0&&e.dlog(2,"["+this.mime+"] End of first segment is "+(this.segmentQueue[0].offset+this.segmentQueue[0].duration).toFixed(2));this.segmentQueue.length>0&&this.segmentQueue[0].offset+this.segmentQueue[0].duration<this.getCurrentTime()+2;)e.dlog(2,"["+this.mime+"] Removing collectable segment."),this.segmentQueue.shift();
for(var n=0,i=0;i<this.segmentQueue.length;i++)n+=this.segmentQueue[i].size;e.dlog(2,"["+this.mime+"] Time is "+this.getCurrentTime()+" and there are "+(n/1024/1024).toFixed(2)+" MB uncollectable, bringing the proposed total to "+((n+t.byteLength)/1024/1024).toFixed(2)+" MB."),(n+t.byteLength)/1024/1024>24&&this.segmentQueue.length>0?(e.dlog(2,"["+this.mime+"] Waiting for buffer to have enough room."),this.waitingForBuffer=!0,this.segmentTimeout=setTimeout(function(){this.appendData(t)}.bind(this),1e3)):(this.reallyAppendData(t),this.waitingForBuffer=!1)
},n.prototype.reallyAppendData=function(t){e.dlog(3,"["+this.mime+"] Current Time: "+this.getCurrentTime()+" Ranges in appendData1: "+this.getRangesString());var n,i=this.representations_[this.currentRep].segs[this.segIndex].time,s=i+this.representations_[this.currentRep].segs[this.segIndex].duration;e.dlog(4,"Appending Response ["+this.mime+"] : ["+i+","+s+"]"),n=this.type===e.StreamingType.SMOOTH_STREAMING?process_traf(t,this.representations_[this.currentRep].segs[this.segIndex].timeURL,this.pr_):new Uint8Array(t),this.append(n),this.segIndex++,this.segIndex>=this.representations_[this.currentRep].segs.length&&(this.active=!1,e.dlog(2,"Source["+this.mime+"] is not active: "+this.segIndex+" "+this.representations_[this.currentRep].segs.length)),e.dlog(3,"Ranges in appendData2: "+this.getRangesString())
},e.SourceBufferManager=n}(),function(){var t=function(){this.mediaSrc_=null,this.sourceBufferManagers_=[],this.videoSrcBufIndex_=0,this.emeMgr_=null,this.type=null,this.pr,this.manifest_=null};t.prototype.getMediaSource=function(){return this.mediaSrc_},t.prototype.dispose=function(){null!=this.mediaSrc_&&(this.resetAll(),this.mediaSrc_=null,this.sourceBufferManagers_=[])},t.prototype.getSourceBufferCount=function(){return this.sourceBufferManagers_.length},t.prototype.getVideoSrcBufferIndex=function(){return this.videoSrcBufIndex_
},t.prototype.getLevel=function(e){return this.sourceBufferManagers_[e].currentRep},t.prototype.getSegIndex=function(e){return this.sourceBufferManagers_[e].segIndex},t.prototype.getCurrentRep=function(e){return this.sourceBufferManagers_[e].getCurrentRep()},t.prototype.getBufferSize=function(e,t){return this.sourceBufferManagers_[e].getBufferSize(t)},t.prototype.getLevel=function(e){return this.sourceBufferManagers_[e].currentRep},t.prototype.appendData=function(e,t){this.mediaSrc_&&"closed"!==this.mediaSrc_.readyState&&this.sourceBufferManagers_[e].appendData(t)
},t.prototype.append=function(e,t){this.mediaSrc_&&"closed"!==this.mediaSrc_.readyState&&this.sourceBufferManagers_[e].append(t)},t.prototype.isActive=function(e){return this.sourceBufferManagers_[e].active},t.prototype.isInitialized=function(e){return this.sourceBufferManagers_[e].isInitialized()},t.prototype.initialize=function(e){this.sourceBufferManagers_[e].initialize()},t.prototype.mime=function(e){return this.sourceBufferManagers_[e].mime},t.prototype.getBitrates=function(e){return this.sourceBufferManagers_[e].bitrates
},t.prototype.identifyNextFragment=function(e,t){return this.sourceBufferManagers_[e].identifyNextFragment(t)},t.prototype.resetAll=function(e){for(var t=0;t<this.sourceBufferManagers_.length;t++)this.sourceBufferManagers_[t].reset(e)},t.prototype.reset=function(e,t){this.sourceBufferManagers_[e].reset(t)},t.prototype.changeQuality=function(e,t){return this.sourceBufferManagers_[e].changeQuality(t)},t.prototype.endOfStream=function(){if(this.mediaSrc_&&"open"===this.mediaSrc_.readyState){for(var t=!1,n=0;n<this.sourceBufferManagers_.length;n++)if(this.sourceBufferManagers_[n].updating()){t=!0;
break}t||(e.log("Ending stream"),this.mediaSrc_.endOfStream())}},t.prototype.absolutizeURL=function(e,t){if(void 0===t&&(t=""),t.match(/^[a-z]*:\/\//))return t;var n;return n="/"==t[0]?e.match(/^[a-z]*:\/\/[^\/]*/)[0]:e.replace(/\/[^\/]*$/,"/"),n+t},t.prototype.displaySourceBuffers=function(t){for(var n=0;n<this.mediaSrc_.sourceBuffers.length;n++){var i=this.mediaSrc_.sourceBuffers[n];e.dlog(5,t+" SourceBuffer["+i.mime+"]: "+i.active)}},t.prototype.normalizeRepresentation=function(t){var n={"url":this.absolutizeURL(this.manifest_.manifestURL,t.baseURLs[0]),"bandwidth":t.bandwidth,"width":t.width,"height":t.height,"sps":t.sps,"pps":t.pps,"audio_codec_private_data":t.audio_codec_private_data,"audio_sample_rate":t.audio_sample_rate};
if(this.type===e.StreamingType.SMOOTH_STREAMING)return n.segs=t.segs,n;var i=null;if(null!=t.segmentList){i=t.segmentList.initialization,n.segs=[];for(var s=0;s<t.segmentList.segmentURLs.length;s++){var a=t.segmentList.segmentURLs[s],r={"start":a.mediaRange.start,"end":a.mediaRange.end,"index":a.indexRange&&a.indexRange.end||null,"time":t.segmentList.durationSeconds*s,"duration":t.segmentList.durationSeconds,"subsegments":null};n.segs.push(r)}}else if(null!=t.segmentTemplate){n.segs=[];var o=t.segmentTemplate.duration/t.segmentTemplate.timescale,r={"url":n.url+t.segmentTemplate.initialization.replace("$RepresentationID$",t.id)};
n.segs.push(r);for(var l=0;l*o<this.manifest_.duration;l++){var r={"start":-1,"end":-1,"index":null,"time":l*o,"duration":o,"subsegments":null,"url":n.url+t.segmentTemplate.media.replace("$RepresentationID$",t.id).replace("$Number$",l)};n.segs.push(r)}}else{var r={"start":null,"end":null,"index":null,"time":0,"duration":this.manifest_.duration,"subsegments":null};if(null!=t.segmentBase){var a=t.segmentBase;i=a.initialization,null!=a.indexRange&&(n.indexRequestData=a.indexRange)}n.segs=[r]}return this.type!==e.StreamingType.SMOOTH_STREAMING&&(n.initRequestData={"start":i&&i.start||0,"end":i&&i.end||n.segs[0].index||null}),n
},t.prototype.onSourceOpen=function(t,n,i){e.dlog(2,"onSourceOpen()");var s,a,r,o;if(this.mediaSrc_.sourceBuffers.length)for(e.dlog(2,"onSourceOpen(): Target already has buffers, bailing."),r=0;r<this.mediaSrc_.sourceBuffers.length;r++)this.mediaSrc_.sourceBuffers[r].active=!0;else{for(this.mediaSrc_.duration=this.manifest_.duration,this.sourceBufferManagers_=[],this.emeMgr_=new e.EMEManager(t),this.type=this.manifest_.type,this.pr=this.manifest_.pr,r=0;r<this.manifest_.adaptationSets.length;r++)if(o=this.manifest_.adaptationSets[r],!(o.mime&&o.mime.indexOf("webm")>=0)){o.contentProtection&&this.emeMgr_.init(o.contentProtection,options.flavor),s=o.representations.map(this.normalizeRepresentation.bind(this)),a=this.mediaSrc_.addSourceBuffer(o.mime+'; codecs="'+o.codecs+'"'),e.dlog(2,"Buffer added properly: "+(this.mediaSrc_.sourceBuffers[r]===a));
var l=new e.SourceBufferManager(this.mediaSrc_,a,s,o.mime,this.type,this.pr);o.mime.indexOf("video")>=0&&(this.videoSrcBufIndex_=r),this.sourceBufferManagers_.push(l),e.dlog(2,"onSourceOpen. Initialized SourceBuffer["+o.mime+"]")}i()}},t.prototype.isSupported=function(){return null==window.MediaSource&&null==window.WebKitMediaSource?!1:(null==window.MediaSource&&(window.MediaSource=window.WebKitMediaSource),!0)},t.prototype.init=function(){this.mediaSrc_=new MediaSource},t.prototype.attach=function(e,t,n,i){if(!this.mediaSrc_)throw new Error("MediaSourceManager has not been initialized, please call init()");
this.manifest_=t,this.mediaSrc_.addEventListener("sourceopen",this.onSourceOpen.bind(this,e,n,i)),this.mediaSrc_.addEventListener("webkitsourceopen",this.onSourceOpen.bind(this,e,n,i)),e.src=window.URL.createObjectURL(this.mediaSrc_)},e.MediaSourceManager=t}(),function(){var t=0,n=1,i=function(e){if(null==e)throw new Error("A url for the manifest is required");this.url_=e,this.callback_=null,this.manifest_=null};i.prototype.load=function(t){if(null==t)throw new Error("A callback is required");this.callback_=t,this.requestManifest_(),e.dlog(1,"Sent request to get the manifest")
},i.prototype.getManifest=function(){return this.manifest_},i.prototype.manifestType_=function(){return-1!=this.url_.lastIndexOf(".mpd")?t:n},i.prototype.requestManifest_=function(){var e=new XMLHttpRequest;e.addEventListener("load",this.onManifestLoad_.bind(this)),e.addEventListener("error",this.onManifestError_.bind(this)),e.open("GET",this.url_),e.send()},i.prototype.onManifestError_=function(){var t="Error retrieving manifest from "+this.url_;return e.log(t),this.callback_(t)},i.prototype.onManifestLoad_=function(i){e.dlog(2,"Manifest received");
var s=null;if(i.target.status<200||i.target.status>299)return s="HTTP error "+i.target.status+" retrieving manifest from "+this.url_,e.log(s),this.callback_(s);switch(this.manifestType_()){case t:this.manifest_=e.parseDASHManifest(i.target.responseText,this.url_);break;case n:this.manifest_=e.parseSSManifest(i.target.responseText,this.url_)}return null===this.manifest_?(s="Error parsing the manifest",e.log(s),this.callback_(s)):this.callback_(s,this.manifest_)},e.ManifestLoader=i}(),function(){var t=.99,n=.98,i=5e5,s=5e5,a=function(e,t,n){this.bitrates_=e,this.levelCount_=this.bitrates_.length,this.algorithm_=t||"adaptive",this.cooldownPeriod_=2,n&&(this.level_=parseInt(n))
};a.prototype.onBandwithTracking=function(a){var r=a.target;if(null!=r.lastTime&&a.timeStamp!=r.lastTime){var o=8e3*(a.loaded-r.lastSize)/(a.timeStamp-r.lastTime);i=t*i+(1-t)*o,s=n*s+(1-n)*o}r.lastTime=a.timeStamp,r.lastSize=a.loaded,e.dlog(5,"Calculated bandwidth: "+i+" "+s)},a.prototype.adapt=function(t){if(!this.bitrates_||this.bitrates_.length<=1)return-1;var n=-1;if("fixed"===this.algorithm_)n=this.level_;else if("random"===this.algorithm_)Math.random()>.5&&(n=Math.floor(Math.random()*this.levelCount_));
else if("adaptive"===this.algorithm_)if(this.cooldownPeriod_)this.cooldownPeriod_--;else{var a=0,r=0,o=.85,l=Math.min(i,s);e.dlog(5,"Calculated Bandwidth: "+l+" globalSlowBandwidth: "+i+" globalFastBandwidth: "+s);for(var c=0;c<this.bitrates_.length;c++){var d=this.bitrates_[c];d>a&&o*l-128e3>d&&(a=d,r=c)}if(r!==t)return e.dlog(2,"Selected new rate "+a+" for bandwidth "+l+" (from "+i+", "+s+")"),this.cooldownPeriod_=8,r}return t!==n&&-1!==n?(e.dlog(2,"Selected new bitrate level: "+n),n):-1},e.AdaptiveManager=a
}(),function(){var t=function(e,t,n){this.mediaSrcMgr_=e,this.bufferIndex_=t,this.adaptiveManager_=n,this.fragmentRequest_=null};t.prototype.appendInit=function(){e.dlog(2,"Appending init ["+this.mediaSrcMgr_.mime(this.bufferIndex_)+"]: "+this.mediaSrcMgr_.getLevel(this.bufferIndex_)),this.mediaSrcMgr_.initialize(this.bufferIndex_),this.mediaSrcMgr_.append(this.bufferIndex_,this.mediaSrcMgr_.getCurrentRep(this.bufferIndex_).initFragment)},t.prototype.onXHRAbort=function(){e.log("Received abort of XHR.")
},t.prototype.onXHRError=function(t){return this.fragmentRequest_!==t.target?void e.log("Received error of untracked XHR."):(e.log("Received error of XHR."),void(this.fragmentRequest_=null))},t.prototype.onXHRLoad=function(t){this.fragmentRequest_!==t.target&&e.log("Error, HTTP response for unknown request");var n=this.fragmentRequest_;return this.fragmentRequest_=null,n.readyState==n.DONE?n.status>=300?void e.log("HTTP Request failure, status="+n.status):(n.is_index&&(e.dlog(2,"Index Response"),this.mediaSrcMgr_.getCurrentRep(this.bufferIndex_).segs=e.parseSIDX(n.response,n.startByte)),n.is_init?(e.dlog(2,"Init Response"),this.mediaSrcMgr_.getCurrentRep(this.bufferIndex_).initFragment=e.extractInit(n.response),void(this.mediaSrcMgr_.isInitialized(this.bufferIndex_)||this.appendInit())):void this.mediaSrcMgr_.appendData(this.bufferIndex_,n.response)):void 0
},t.prototype.cancelRequests=function(){null!=this.fragmentRequest_&&(this.fragmentRequest_.abort(),this.fragmentRequest_=null)},t.prototype.makeSSXHR=function(){var t=new XMLHttpRequest,n=this.mediaSrcMgr_.getSegIndex(this.bufferIndex_),i=this.mediaSrcMgr_.getCurrentRep(this.bufferIndex_).url,s=this.mediaSrcMgr_.getCurrentRep(this.bufferIndex_).bandwidth,a=this.mediaSrcMgr_.getCurrentRep(this.bufferIndex_).segs[n].timeURL;if(i=i.replace("{bitrate}",s),i=i.replace("{start time}",a),t.open("GET",i),t.responseType="arraybuffer",t.addEventListener("load",this.onXHRLoad.bind(this)),t.addEventListener("error",this.onXHRError.bind(this)),t.addEventListener("abort",this.onXHRAbort.bind(this)),null==i)throw"Null URL";
return t.is_init=!1,t.is_index=!1,t.lastTime=null,t.lastSize=null,t.addEventListener("progress",this.adaptiveManager_.onBandwithTracking.bind(this.adaptiveManager_)),t.send(),e.dlog(2,"Sent XHR: url="+i),t},t.prototype.makeXHR=function(t){var n,i,s=new XMLHttpRequest,a=this.mediaSrcMgr_.getSegIndex(this.bufferIndex_),r=this.mediaSrcMgr_.getCurrentRep(this.bufferIndex_),o=this.mediaSrcMgr_.getCurrentRep(this.bufferIndex_).url,l=this.mediaSrcMgr_.getCurrentRep(this.bufferIndex_).segs[a],c=!1;null==a&&(a=0),null!=this.mediaSrcMgr_.getCurrentRep(this.bufferIndex_).segs[a].url&&(o=this.mediaSrcMgr_.getCurrentRep(this.bufferIndex_).segs[a].url),t?(n=0,i=r.initRequestData.end,null!=r.indexRequestData&&(i=r.indexRequestData.end,c=!0)):(n=l.offset,i=l.offset+l.size-1);
var d=null;null!=n&&null!=i&&(d="bytes="+n+"-"+i);var u=!!/youtube.com/.exec(o);if(d&&u&&(o=o.replace(/&range=[^&]*/,""),o+="&range="+d.substring(6)),s.open("GET",o),s.responseType="arraybuffer",s.startByte=n,null==d||u||s.setRequestHeader("Range",d),s.addEventListener("load",this.onXHRLoad.bind(this)),null==o)throw"Null URL";return s.is_init=t,s.is_index=c,s.lastTime=null,s.lastSize=null,s.addEventListener("progress",this.adaptiveManager_.onBandwithTracking.bind(this.adaptiveManager_)),s.send(),e.dlog(2,"Sent XHR: url="+o+", range="+d),s
},t.prototype.findRangeForPlaybackTime=function(e,t){for(var n=e.buffered,i=0;i<n.length;i++)if(n.start(i)<=t&&n.end(i)>=t)return{"start":n.start(i),"end":n.end(i)}},t.prototype.initFragmentRequestNeeded=function(){if(null==this.mediaSrcMgr_.getCurrentRep(this.bufferIndex_).initFragment){e.dlog(2,"Creating Init segment["+this.mediaSrcMgr_.mime(this.bufferIndex_)+"]");var t=this.mediaSrcMgr_.getCurrentRep(this.bufferIndex_);if(this.mediaSrcMgr_.type===e.StreamingType.SMOOTH_STREAMING){var n={"pps":t.pps,"sps":t.sps,"width":t.width,"height":t.height,"mime":this.mediaSrcMgr_.mime(this.bufferIndex_),"pr":this.mediaSrcMgr_.pr,"audio_codec_private_data":t.audio_codec_private_data,"audio_sample_rate":t.audio_sample_rate},i=e.createSSInit(n);
return this.mediaSrcMgr_.getCurrentRep(this.bufferIndex_).initFragment=e.extractInit(i.data),this.appendInit(),!1}return this.fragmentRequest_=this.makeXHR(!0),!0}return this.mediaSrcMgr_.isInitialized(this.bufferIndex_)||this.appendInit(),!1},t.prototype.requestNextFragment=function(t,n){this.fragmentRequest_=this.mediaSrcMgr_.type===e.StreamingType.SMOOTH_STREAMING?this.makeSSXHR():this.makeXHR(!1),this.fragmentRequest_.expected_time=n},t.prototype.tick=function(t){if(!this.mediaSrcMgr_.isActive(this.bufferIndex_))return e.dlog(4,"Not active["+this.mediaSrcMgr_.mime(this.bufferIndex_)+"]"),!1;
if(this.fragmentRequest_)e.dlog(4,"Will not request next segment["+this.mediaSrcMgr_.mime(this.bufferIndex_)+"] request pending");else if(!this.initFragmentRequestNeeded()){var n=this.mediaSrcMgr_.identifyNextFragment(this.bufferIndex_,t);if(null!==n){var i=-1;this.mediaSrcMgr_.mime(this.bufferIndex_).indexOf("video")>=0&&(i=this.adaptiveManager_.adapt(this.mediaSrcMgr_.getLevel(this.bufferIndex_))),i>=0?(this.cancelRequests(),this.mediaSrcMgr_.changeQuality(this.bufferIndex_,i)):this.requestNextFragment(t,n)
}}return!0},e.FragmentManager=t}(),function(){function t(e){var t=new RegExp("[?&]"+e+"=([^&]*)"),n=t.exec(window.location.search);return null!=n?(n=n[1],/%/.exec(n)&&(n=decodeURIComponent(n)),n):null}function n(){for(var e={},n=["autoplay","algorithm","flavor","level","cc","url"],i=0;i<n.length;i++){var s=t(n[i]);e[n[i]]=s}if(e&&e.url)for(var a in e)e.hasOwnProperty(a)&&(this.options[a]=e[a])}var i={"Audio_Type":"audio","Video_Type":"video","Image_Type":"img","MSE_Type":"mse"},s=function(t){t||(t={}),this.options=t,this.mediaElementType_=null,this.manifestLoader_=null,this.closeCaptionsLoader_=null,this.progressTimer_=null,this.mediaSrcMgr_=new e.MediaSourceManager,this.fragmentManagers_=null,this.showControls_=t.showControls,this.mediaElement_=null,this.imageElement_=null,this.mediaEvents_=new Object,t.mediaElement?this.mediaElement_=t.mediaElement:t.imageElement?this.imageElement_=t.imageElement:this.createMediaElement(),e.player=this
},a={"AUTO_PAUSE_START":1,"PAUSE_RESUME":5};s.prototype.getMediaElement=function(){return this.mediaElement_},s.prototype.onPause=function(){e.log("Paused, auto="+this.mediaElement_.autopause_pending),this.mediaElement_.autopaused=this.mediaElement_.autopause_pending,this.mediaElement_.autopause_time=(new Date).getTime(),this.mediaElement_.autopause_pending=!1},s.prototype.onPlay=function(){e.log("Playing"),this.mediaElement_.autopause_pending=!1,this.mediaElement_.autopaused=!1,this.mediaElement_.autopause_time=null
},s.prototype.onError=function(){e.log("Error ("+this.mediaElement_.error.code+")")},s.prototype.cancelRequests=function(){for(var e=0;e<this.fragmentManagers_.length;e++)this.fragmentManagers_[e].cancelRequests()},s.prototype.onSeeking=function(){e.log("Seeking"),this.cancelRequests(),this.mediaSrcMgr_.resetAll("seeking")},s.prototype.onSeeked=function(){e.log("Seeked")},s.prototype.onProgress=function(){var t=this.mediaSrcMgr_.getMediaSource();if(!t||"closed"===t.readyState)return void this.stopProgressTimer();
var n=this.mediaElement_.currentTime;if(this.mediaElement_.error)return void e.dlog(2,"Video Error: "+this.mediaElement_.error);for(var i=!1,s=0,r=0,o=0;o<this.fragmentManagers_.length;o++)if(this.fragmentManagers_[o].tick(n)){var l=this.mediaSrcMgr_.getBufferSize(o,n);this.mediaElement_.paused?l>=a.PAUSE_RESUME&&r++:l<a.AUTO_PAUSE_START&&(i=!0)}else s++;return s>0?void(s===this.fragmentManagers_.length&&this.mediaSrcMgr_.endOfStream()):void(this.mediaElement_.paused?this.mediaElement_.autopaused&&r===this.fragmentManagers_.length&&(e.dlog(2,"Autoresuming"),this.mediaElement_.play()):i&&(e.dlog(2,"Autopausing"),this.mediaElement_.autopause_pending=!0,this.mediaElement_.pause()))
},s.prototype.createMediaElement=function(){var t=document.getElementById("mediaElement");this.mediaElement_=document.createElement(i.Video_Type),this.imageElement_=document.createElement(i.Image_Type),t.appendChild(this.mediaElement_),t.appendChild(this.imageElement_),e.me=this.mediaElement_,e.img=this.imageElement_,this.showControls_?this.mediaElement_.hasAttribute("controls")||this.mediaElement_.setAttribute("controls","controls"):this.mediaElement_.hasAttribute("controls")&&this.mediaElement_.removeAttribute("controls")
},s.prototype.showMediaElement=function(t){var n=document.getElementById("mediaElement");this.mediaElementType_===i.MSE_Type&&(this.removeMediaEventListener("seeking"),this.removeMediaEventListener("seeked"),this.removeMediaEventListener("pause"),this.removeMediaEventListener("play"),this.removeMediaEventListener("error"),t!==i.MSE_Type&&(this.stopProgressTimer(),this.mediaSrcMgr_.dispose(),this.mediaSrcMgr_=new e.MediaSourceManager)),this.mediaElementType_!==i.Image_Type&&(this.mediaElement_.play(0),this.mediaElement_.pause());
var s=n.children;if(s&&s.length>0)for(var a=0;a<s.length;a++)"VIDEO"===s[a].nodeName&&t!==i.Image_Type?s[a].style.display="block":"IMG"===s[a].nodeName&&t===i.Image_Type?s[a].style.display="block":(s[a].style.display="none",s[a].src=null);this.mediaElementType_=t},s.prototype.addMediaEventListener=function(e,t){var n=t.bind(this);this.mediaElement_.addEventListener(e,n),this.mediaEvents_[e]=n},s.prototype.removeMediaEventListener=function(e){this.mediaElement_.removeEventListener(e,this.mediaEvents_[e]),this.mediaEvents_[e]=null
},s.prototype.initMseVideoElement=function(e){e&&this.addCaptionInfo(e),this.addMediaEventListener("seeking",this.onSeeking),this.addMediaEventListener("seeked",this.onSeeked),this.addMediaEventListener("pause",this.onPause),this.addMediaEventListener("play",this.onPlay),this.addMediaEventListener("error",this.onError),this.mediaElement_.autopause_pending=!1,this.mediaElement_.autopaused=this.options.autoplay?!0:!1,this.mediaElement_.seekingStatus="none"},s.prototype.onManifestLoad=function(t){return t?void e.log("Unable to load manifest"):void(this.options.cc?(this.closeCaptionsLoader_=new e.CloseCaptionsLoader(this.options.cc),this.closeCaptionsLoader_.load(this.onLoadcloseCaptions.bind(this))):this.onLoadcloseCaptions.call(this))
},s.prototype.addCaptionInfo=function(e){var t;t=this.mediaElement_.textTracks.length>0?this.mediaElement_.textTracks[0]:this.mediaElement_.addTextTrack("captions"),t.mode="showing";for(var n=e[0].start,i=e[0].end,s=[],a=0;a<e.length;a++){var r=new TextTrackCue(e[a].start,e[a].end,e[a].caption);if(n===e[a].start&&i===e[a].end&&s.push(r),n!==e[a].start||i!==e[a].end||a===e.length-1){for(var o=s.length-1;o>=0;o--)t.addCue(s[o]);s.length=0,n=e[a].start,i=e[a].end,a<e.length&&s.push(r)}}},s.prototype.onMediaSourceManagerInitialized=function(t){this.initMseVideoElement(t);
for(var n=0;n<this.mediaSrcMgr_.getSourceBufferCount();n++)this.fragmentManagers_.push(new e.FragmentManager(this.mediaSrcMgr_,n,new e.AdaptiveManager(this.mediaSrcMgr_.getBitrates(n),this.options.algorithm,this.options.level)));this.startProgressTimer()},s.prototype.initializeMsePlayer=function(){var e=null;this.closeCaptionsLoader_&&(e=this.closeCaptionsLoader_.getCCInfo()),this.fragmentManagers_=[],this.mediaSrcMgr_.init(),window.msrc=this.mediaSrcMgr_.getMediaSource(),this.mediaSrcMgr_.attach(this.mediaElement_,this.manifestLoader_.getManifest(),e,this.onMediaSourceManagerInitialized.bind(this,e))
},s.prototype.stopProgressTimer=function(){null!==this.progressTimer_&&(e.dlog(2,"Deregistering progress timer"),window.clearInterval(this.progressTimer_),this.progressTimer_=null)},s.prototype.startProgressTimer=function(){null===this.progressTimer_&&(e.dlog(2,"Starting progress timer"),this.progressTimer_=setInterval(this.onProgress.bind(this),250))},s.prototype.initializeSimplePlayer=function(e,t){e!==i.Image_Type?(this.mediaElement_.src=t,this.mediaElement_.play()):this.imageElement_.src=t},s.prototype.onLoadcloseCaptions=function(t){return t?void e.log("Unable to load close captions"):void this.initializeMsePlayer()
},s.prototype.onManifestLoad=function(t){return t?void e.log("Unable to load manifest"):void(this.options.cc?(this.closeCaptionsLoader_=new e.CloseCaptionsLoader(this.options.cc),this.closeCaptionsLoader_.load(this.onLoadcloseCaptions.bind(this))):this.onLoadcloseCaptions.call(this))},s.prototype.getMediaType=function(t){var n=t.length;if(5>n)return e.log("Error invalid url"),null;var s=t.substring(t.length-4,t.length);switch(s){case".webm":case".mkv":case".mp4":return i.Video_Type;case".mp3":return i.Audio_Type;
case".jpg":return i.Image_Type;case".mpd":return i.MSE_Type;default:return i.MSE_Type}},s.prototype.init=function(){if(e.log("-------- Initializing --------"),!this.mediaSrcMgr_.isSupported())return e.log("Incompatible browser: Media Source extensions not suported"),!1;if(n(),!this.options.url)return e.log("No manifest URL found, please provide one"),!1;var t=this.getMediaType(this.options.url);this.mediaElementType_=t,this.options.mediaElement||this.options.imageElement||this.showMediaElement(t),t===i.MSE_Type?(this.manifestLoader_=new e.ManifestLoader(this.options.url),this.manifestLoader_.load(this.onManifestLoad.bind(this))):this.initializeSimplePlayer(t,this.options.url)
},s.prototype.destroy=function(){this.mediaElementType_===i.MSE_Type&&(this.removeMediaEventListener("seeking"),this.removeMediaEventListener("seeked"),this.removeMediaEventListener("pause"),this.removeMediaEventListener("play"),this.removeMediaEventListener("error"),this.stopProgressTimer(),this.mediaSrcMgr_.dispose(),this.mediaSrcMgr_=new e.MediaSourceManager),this.mediaElementType_!==i.Image_Type&&(this.mediaElement_.play(0),this.mediaElement_.pause())},e.BasicPlayer=s}(),window.googledash=e}(),define("googledash",function(e){return function(){var t;
return t||e.googledash}}(this)),define("plex/base/adapters/player/HTMLPlayerSubcontroller",["underscore","googledash","plex/base/utils/BaseClass","plex/base/utils/Logger","plex/base/adapters/LocalizerAdapter"],function(e,t,n,i,s){var a=n.extend({"wrapped":["play","pause","setVolume","setPosition","resume","stop"],"initialize":function(){e.bindAll(this,"onReady","onWaiting","onPlaying","onProgress","onTime","onPause","onVolume","onEnded","onError"),e.each(this.wrapped,function(t){this[t]=e.wrap(this[t],e.bind(function(t){var n=e.toArray(arguments).slice(1);
return this.mediaElement?t.apply(this,n):void 0},this))},this)},"load":function(e){this.model=e.model,this.mediaElement=e.mediaElement,this.autoplay=null==e.autoplay?!0:e.autoplay,this.offset=this.model.get("position"),this.streamingMKV=!this.model.get("directPlay")&&"http"===e.protocol,this.mediaElement.stream_restart=!1,this.mediaElement.autoplay=this.autoplay,this.mediaElement.addEventListener("loadedmetadata",this.onReady),this.mediaElement.addEventListener("waiting",this.onWaiting),this.mediaElement.addEventListener("playing",this.onPlaying),this.mediaElement.addEventListener("progress",this.onProgress),this.mediaElement.addEventListener("timeupdate",this.onTime),this.mediaElement.addEventListener("pause",this.onPause),this.mediaElement.addEventListener("volumechange",this.onVolume),this.mediaElement.addEventListener("ended",this.onEnded),this.mediaElement.addEventListener("error",this.onError);
var n=this.model.get("url");"dash"===e.protocol?(this.dashPlayer=new t.BasicPlayer({"url":n,"mediaElement":this.mediaElement,"autoplay":this.autoplay}),this.dashPlayer.init()):(this.mediaElement.setAttribute("src",n),this.mediaElement.load())},"play":function(){this.mediaElement.play()},"pause":function(){this.mediaElement.pause()},"setVolume":function(e){this.mediaElement.volume=e/100},"setPosition":function(e){this.mediaElement.readyState>0&&(this.mediaElement.currentTime=e/1e3)},"resume":function(){i.log("resuming at "+this.offset),this.setPosition(this.offset),this.offset=0
},"stop":function(){this.mediaElement.removeEventListener("loadedmetadata",this.onReady),this.mediaElement.removeEventListener("waiting",this.onWaiting),this.mediaElement.removeEventListener("playing",this.onPlaying),this.mediaElement.removeEventListener("progress",this.onProgress),this.mediaElement.removeEventListener("timeupdate",this.onTime),this.mediaElement.removeEventListener("pause",this.onPause),this.mediaElement.removeEventListener("volumechange",this.onVolume),this.mediaElement.removeEventListener("ended",this.onEnded),this.mediaElement.removeEventListener("error",this.onError),this.dashPlayer?(this.dashPlayer.destroy(),this.dashPlayer=null):this.mediaElement.duration?(this.mediaElement.currentTime=0,this.mediaElement.pause()):this.mediaElement.autoplay=!1,this.mediaElement=null
},"onReady":function(){if(this.model.set({"ready":!0,"loaded":!0}),!this.model.get("duration")){var e=1e3*this.mediaElement.duration+this.offset;this.model.set("duration",Math.round(e))}var t=this.model.get("volume");null!=t&&this.setVolume(t),!this.model.get("showEnterFullscreen")&&this.mediaElement.webkitSupportsFullscreen&&this.model.set({"showEnterFullscreen":!0,"forceWebkitVideoFullscreen":!0})},"onWaiting":function(){this.model.set("state","buffering")},"onPlaying":function(){this.model.set("state","playing")
},"onProgress":function(){for(var e=this.mediaElement.buffered,t=null,n=null,i=0,s=e.length;s>i;i++){var a=e.start(i),r=e.end(i);(null===t||t>a)&&(t=a),(null===n||r>n)&&(n=r)}this.model.set({"startBuffer":Math.round(1e3*t),"endBuffer":Math.round(1e3*n)})},"onTime":function(){if(this.offset&&!this.streamingMKV)return void this.resume();var e=1e3*this.mediaElement.currentTime+this.offset;!this.mediaElement.paused&&this.model.get("buffering")&&this.model.set("state","playing"),this.model.set("position",Math.round(e))
},"onPause":function(){var e=this.model.get("partIndex")+1<this.model.get("partCount");this.mediaElement.ended&&e||(this.mediaElement.resume_pending||this.mediaElement.autopause_pending||this.mediaElement.autopaused||this.mediaElement.stream_restart?this.model.set("state","buffering"):this.model.set("state","paused"))},"onVolume":function(){this.model.set("volume",Math.round(100*this.mediaElement.volume))},"onEnded":function(){this.model.set("ended",!0)},"onError":function(e){var t=e.target.error;
t&&i.error("Video error code: "+t.code);var n=s.get();this.model.set({"state":"error","errorMessage":n.t("There was a problem playing this item.")})}});return a}),define("plex/base/adapters/player/LocalPlayerController",["underscore","jquery","plex/base/utils/BaseClass","plex/base/utils/MediaUtil","plex/base/adapters/LocalizerAdapter","plex/base/adapters/PlayerProfileAdapter","plex/base/mixins/EventMixin","plex/base/mixins/player/PlayerControllerMixin","plex/base/adapters/player/HTMLPlayerSubcontroller"],function(e,t,n,i,s,a,r,o,l){var c=n.extend({"mixins":[r,o],"local":!0,"wrapped":["play","pause","setVolume","setPosition","switchStreams"],"playerDefaults":function(){return e.defaults({"type":this.type},this.model.controllerDefaults)
},"initialize":function(){e.bindAll(this,"onDecisionSuccess","onDecisionError"),this.profile=a.get(),this.supportedTypes=this.profile[this.type],e.each(this.wrapped,function(t){this[t]=e.wrap(this[t],e.bind(function(t){var n=e.toArray(arguments).slice(1);return this.subcontroller?t.apply(this,n):void 0},this))},this)},"load":function(t){this.model=t.model,this.volume=t.volume,this.autoplay=t.autoplay,this.postplay=t.postplay,this.mediaElement=t.mediaElement,this.mediaElement||(this.mediaElement=document.createElement(this.type)),this.listenTo(this.model,{"change:item":this.onItemChange,"change:state":this.onStateChange,"change:qualityIndex":this.onQualityIndexChange,"change:subtitleStreamID":this.onStreamIDChange,"change:audioStreamID":this.onStreamIDChange,"change:ended":this.onEndedChange});
var n=this.model.get("playlist");return n&&this.listenTo(n,{"reset":this.onPlaylistChange,"remove":this.onPlaylistChange,"add":this.onPlaylistChange}),this.model.set(e.result(this,"playerDefaults")),this.update(t)},"update":function(e){return e||(e={}),this.originalOptions=e,this.currentItem=this.model.get("item"),this.previousItem=this.getPreviousItem(),this.nextItem=this.getNextItem(),this.model.set({"loaded":!1,"ended":!1,"finished":!1,"duration":0,"position":0,"startBuffer":0,"endBuffer":0,"enablePrevious":!!this.previousItem,"enableNext":!!this.nextItem}),this.getMediaDecision(this.currentItem,e)
},"populateItem":function(e){if("playlistItem"===e.get("type"))return t.Deferred().resolve().promise();var n={"reset":!0,"cancelable":!0};return e.isLibraryItem()&&(n.data="checkFiles=1"),e.populate(n)},"loadMedia":function(){this.subcontroller=this.getSubcontrollerByType(this.playerType),this.subcontroller.load({"model":this.model,"protocol":this.protocol,"mediaElement":this.mediaElement,"autoplay":this.autoplay})},"getSubcontrollerByType":function(){return new l},"embed":function(n){var i=this.model.get("item"),a=t.ajax(i.server.getXHROptions(n.key));
a.done(e.bind(function(e){this.model.set("embedHtml",e)},this)),a.fail(e.bind(function(){var e=s.get();this.model.set({"state":"error","errorMessage":e.t("There was a problem embedding this video.")})},this))},"redirect":function(t){var n=this.model.get("item"),i=n.get("url");if(!i&&t){var s=t.key.match(/\/webkit\?url=([^&]+)/);s&&(i=decodeURIComponent(s[1]))}window.open(i),e.defer(e.bind(function(){this.model.set("finished",!0)},this))},"play":function(){this.subcontroller.play()},"pause":function(){this.subcontroller.pause()
},"setVolume":function(e){this.model.set("volume",e),this.subcontroller.setVolume(e)},"setPosition":function(e,t){t||(t={}),e===this.model.get("position")||e>=this.model.get("duration")||(this.model.set("finished",!1),this.model.set("position",e),this.model.trigger("change:seeking",this.model,!0),this.subcontroller.streamingMKV?this.switchStreams(t):this.subcontroller.setPosition(e))},"skipPrevious":function(){this.previousItem&&(this.model.set({"item":this.previousItem,"state":"buffering","ready":!1,"media":null,"part":null,"position":0}),this.switchStreams({"autoplay":!0}))
},"skipNext":function(){this.nextItem&&(this.model.set({"item":this.nextItem,"state":"buffering","ready":!1,"media":null,"part":null,"position":0}),this.switchStreams({"autoplay":!0}))},"skipTo":function(e){this.model.set({"item":e,"state":"buffering","ready":!1,"media":null,"part":null,"position":0}),this.switchStreams({"autoplay":!0})},"switchStreams":function(e){e||(e={}),null==e.autoplay&&(e.autoplay=!this.model.get("paused")),this.mediaElement.stream_restart=!0,this.originalOptions.media=this.model.get("media"),this.originalOptions.part=this.model.get("part"),this.originalOptions.offset=this.model.get("position"),this.subcontroller.pause(),this.resetStream(e)
},"resetStream":e.debounce(function(t){var n=this.stopSession();n.done(e.bind(function(){this.autoplay=t.autoplay,this.subcontroller.pause(),this.update(this.originalOptions)},this))},200),"stop":function(){return this.model.get("stopped")?t.Deferred().resolve().promise():(this.model.set("state","stopped"),this.stopListening(),this.stopSession())},"stopSession":function(){return this.subcontroller&&this.subcontroller.stop(),"video"!==this.type||this.model.get("directPlay")?t.Deferred().resolve().promise():this.request(i.stop(this.model.get("transcodeServer"),this.session))
},"unload":function(){return this.stop()},"onDecisionSuccess":function(e){var t=this.model.get("item"),n=0;e.part&&e.part.duration&&(n=e.part.duration),this.session=e.session,this.playerType=e.playerType,this.protocol=e.protocol,this.model.set({"media":e.media,"part":e.part,"url":e.url,"transcodeServer":e.transcodeServer,"mediaIndex":i.getMediaIndex(t,e.media),"partIndex":i.getPartIndex(e.media,e.part),"partCount":i.getPartCount(e.media),"state":this.autoplay?"buffering":"paused","position":e.offset,"duration":n,"directPlay":e.directPlay}),this.loadMedia()
},"onDecisionError":function(t){if(t.embed&&e.contains(this.profile.capabilities,"embed"))return void this.embed(t.part);if(t.redirect&&e.contains(this.profile.capabilities,"redirect"))return void this.redirect(t.part);var n=s.get(),i=t.error||n.t("There was a problem playing this item.");this.model.set({"state":"error","errorMessage":i})},"onItemChange":function(e){this.timeline({"item":e.previous("item"),"state":"stopped","continuing":!0}),this.stopTimeline(),this.stopSession()},"onQualityIndexChange":function(e){null!=e.previous("qualityIndex")&&this.switchStreams()
},"onStreamIDChange":function(){this.switchStreams()},"onPlaylistChange":function(){this.previousItem=this.getPreviousItem(),this.nextItem=this.getNextItem(),this.model.set({"enablePrevious":!!this.previousItem,"enableNext":!!this.nextItem})},"onStateChange":function(e,t){this.timeline(),"stopped"===t||"error"===t?this.stopTimeline():this.startTimeline(),"paused"===t?this.startPing():this.stopPing(),"playing"===t?this.startPlaybackTracking():this.stopPlaybackTracking()},"onEndedChange":function(e,t){if(t){var n=e.get("partIndex"),i=e.get("partCount");
if(++n>=i)this.nextItem&&!this.postplay?this.skipNext():(!this.nextItem&&this.postplay?this.stop():this.pause(),this.model.set("finished",!0));else{var s=e.get("media");this.model.set({"part":s.Part[n],"position":0}),this.switchStreams({"autoplay":!0})}}}});return c}),define("plex/desktop/adapters/player/DesktopHTMLPlayerSubcontroller",["underscore","googledash","plex/base/utils/Logger","plex/base/utils/Capabilities","plex/base/adapters/player/HTMLPlayerSubcontroller"],function(e,t,n,i,s){var a=s.extend({"load":function(){s.prototype.load.apply(this,arguments),i.hasTouchScreen&&this.model.set("ready",!0)
},"resume":function(){n.log("resuming at "+this.offset);var t=this.offset;this.offset=0,this.autoplay&&(this.mediaElement.resume_pending=!0,this.pause()),this.resumePositionTimeout=setTimeout(e.bind(function(){this.setPosition(t)},this),1e3),this.autoplay&&(this.resumePlayTimeout=setTimeout(e.bind(function(){this.mediaElement.resume_pending=!1,this.play()},this),1500))},"stop":function(){s.prototype.stop.apply(this,arguments),this.resumePositionTimeout=clearTimeout(this.resumePositionTimeout),this.resumePlayTimeout=clearTimeout(this.resumePlayTimeout)
}});return a}),"undefined"==typeof jwplayer&&(jwplayer=function(e){return jwplayer.api?jwplayer.api.selectPlayer(e):void 0},jwplayer.version="6.8.4616",jwplayer.vid=document.createElement("video"),jwplayer.audio=document.createElement("audio"),jwplayer.source=document.createElement("source"),function(e){function t(e){return function(){return l(e)}}function n(e,t,n,i,s){return function(){var a,o;if(s)n(e);else{try{if((a=e.responseXML)&&(o=a.firstChild,a.lastChild&&"parsererror"===a.lastChild.nodeName))return void(i&&i("Invalid XML"))
}catch(l){}if(a&&o)return n(e);(a=r.parseXML(e.responseText))&&a.firstChild?(e=r.extend({},e,{"responseXML":a}),n(e)):i&&i(e.responseText?"Invalid XML":t)}}}var i=document,s=window,a=navigator,r=e.utils=function(){};r.exists=function(e){switch(typeof e){case"string":return 0<e.length;case"object":return null!==e;case"undefined":return!1}return!0},r.styleDimension=function(e){return e+(0<e.toString().indexOf("%")?"":"px")},r.getAbsolutePath=function(e,t){if(r.exists(t)||(t=i.location.href),r.exists(e)){var n;
if(r.exists(e)){n=e.indexOf("://");var s=e.indexOf("?");n=n>0&&(0>s||s>n)}else n=void 0;if(n)return e;n=t.substring(0,t.indexOf("://")+3);var a,s=t.substring(n.length,t.indexOf("/",n.length+1));0===e.indexOf("/")?a=e.split("/"):(a=t.split("?")[0],a=a.substring(n.length+s.length+1,a.lastIndexOf("/")),a=a.split("/").concat(e.split("/")));for(var o=[],l=0;l<a.length;l++)a[l]&&r.exists(a[l])&&"."!=a[l]&&(".."==a[l]?o.pop():o.push(a[l]));return n+s+"/"+o.join("/")}},r.extend=function(){var e=r.extend.arguments;
if(1<e.length){for(var t=1;t<e.length;t++)r.foreach(e[t],function(t,n){try{r.exists(n)&&(e[0][t]=n)}catch(i){}});return e[0]}return null};var o=window.console=window.console||{"log":function(){}};r.log=function(){var e=Array.prototype.slice.call(arguments,0);"object"==typeof o.log?o.log(e):o.log.apply(o,e)};var l=r.userAgentMatch=function(e){return null!==a.userAgent.toLowerCase().match(e)};r.isIE=r.isMSIE=t(/msie/i),r.isFF=t(/firefox/i),r.isChrome=t(/chrome/i),r.isIPod=t(/iP(hone|od)/i),r.isIPad=t(/iPad/i),r.isSafari602=t(/Macintosh.*Mac OS X 10_8.*6\.0\.\d* Safari/i),r.isIETrident=function(e){return e?(e=parseFloat(e).toFixed(1),l(RegExp("msie\\s*"+e+"|trident/.+rv:\\s*"+e,"i"))):l(/msie|trident/i)
},r.isSafari=function(){return l(/safari/i)&&!l(/chrome/i)&&!l(/chromium/i)&&!l(/android/i)},r.isIOS=function(e){return l(e?RegExp("iP(hone|ad|od).+\\sOS\\s"+e,"i"):/iP(hone|ad|od)/i)},r.isAndroid=function(e,t){var n=t?!l(/chrome\/[23456789]/i):!0;return e?n&&l(RegExp("android.*"+e,"i")):n&&l(/android/i)},r.isMobile=function(){return r.isIOS()||r.isAndroid()},r.saveCookie=function(e,t){i.cookie="jwplayer."+e+"="+t+"; path=/"},r.getCookies=function(){for(var e={},t=i.cookie.split("; "),n=0;n<t.length;n++){var s=t[n].split("=");
0===s[0].indexOf("jwplayer.")&&(e[s[0].substring(9,s[0].length)]=s[1])}return e},r.typeOf=function(e){var t=typeof e;return"object"===t?e?e instanceof Array?"array":t:"null":t},r.translateEventResponse=function(t,n){var i=r.extend({},n);if(t!=e.events.JWPLAYER_FULLSCREEN||i.fullscreen)if("object"==typeof i.data){var s=i.data;delete i.data,i=r.extend(i,s)}else"object"==typeof i.metadata&&r.deepReplaceKeyName(i.metadata,["__dot__","__spc__","__dsh__","__default__"],["."," ","-","default"]);else i.fullscreen="true"==i.message?!0:!1,delete i.message;
return r.foreach(["position","duration","offset"],function(e,t){i[t]&&(i[t]=Math.round(1e3*i[t])/1e3)}),i},r.flashVersion=function(){if(r.isAndroid())return 0;var e,t=a.plugins;try{if("undefined"!==t&&(e=t["Shockwave Flash"]))return parseInt(e.description.replace(/\D+(\d+)\..*/,"$1"),10)}catch(n){}if("undefined"!=typeof s.ActiveXObject)try{if(e=new s.ActiveXObject("ShockwaveFlash.ShockwaveFlash"))return parseInt(e.GetVariable("$version").split(" ")[1].split(",")[0],10)}catch(i){}return 0},r.getScriptPath=function(e){for(var t=i.getElementsByTagName("script"),n=0;n<t.length;n++){var s=t[n].src;
if(s&&0<=s.indexOf(e))return s.substr(0,s.indexOf(e))}return""},r.deepReplaceKeyName=function(t,n,i){switch(e.utils.typeOf(t)){case"array":for(var s=0;s<t.length;s++)t[s]=e.utils.deepReplaceKeyName(t[s],n,i);break;case"object":r.foreach(t,function(s,a){var r;if(n instanceof Array&&i instanceof Array){if(n.length!=i.length)return;r=n}else r=[n];for(var o=s,l=0;l<r.length;l++)o=o.replace(RegExp(n[l],"g"),i[l]);t[o]=e.utils.deepReplaceKeyName(a,n,i),s!=o&&delete t[s]})}return t};var c=r.pluginPathType={"ABSOLUTE":0,"RELATIVE":1,"CDN":2};
r.getPluginPathType=function(e){if("string"==typeof e){e=e.split("?")[0];var t=e.indexOf("://");if(t>0)return c.ABSOLUTE;var n=e.indexOf("/");return e=r.extension(e),!(0>t&&0>n)||e&&isNaN(e)?c.RELATIVE:c.CDN}},r.getPluginName=function(e){return e.replace(/^(.*\/)?([^-]*)-?.*\.(swf|js)$/,"$2")},r.getPluginVersion=function(e){return e.replace(/[^-]*-?([^\.]*).*$/,"$1")},r.isYouTube=function(e){return/^(http|\/\/).*(youtube\.com|youtu\.be)\/.+/.test(e)},r.youTubeID=function(e){try{return/v[=\/]([^?&]*)|youtu\.be\/([^?]*)|^([\w-]*)$/i.exec(e).slice(1).join("").replace("?","")
}catch(t){return""}},r.isRtmp=function(e,t){return 0===e.indexOf("rtmp")||"rtmp"==t},r.foreach=function(e,t){var n,i;for(n in e)"function"==r.typeOf(e.hasOwnProperty)?e.hasOwnProperty(n)&&(i=e[n],t(n,i)):(i=e[n],t(n,i))},r.isHTTPS=function(){return 0===s.location.href.indexOf("https")},r.repo=function(){var t="http://p.jwpcdn.com/"+e.version.split(/\W/).splice(0,2).join("/")+"/";try{r.isHTTPS()&&(t=t.replace("http://","https://ssl."))}catch(n){}return t},r.ajax=function(e,t,i,a){var o;if(0<e.indexOf("#")&&(e=e.replace(/#.*$/,"")),e&&0<=e.indexOf("://")&&e.split("/")[2]!=s.location.href.split("/")[2]&&r.exists(s.XDomainRequest))o=new s.XDomainRequest,o.onload=n(o,e,t,i,a),o.ontimeout=o.onprogress=function(){},o.timeout=5e3;
else{if(!r.exists(s.XMLHttpRequest))return i&&i(),o;var l=o=new s.XMLHttpRequest,c=e;o.onreadystatechange=function(){if(4===l.readyState)switch(l.status){case 200:n(l,c,t,i,a)();break;case 404:i("File not found")}}}return o.overrideMimeType&&o.overrideMimeType("text/xml"),o.onerror=function(){i("Error loading file")},setTimeout(function(){try{o.open("GET",e,!0),o.send()}catch(t){i&&i(e)}},0),o},r.parseXML=function(e){var t;try{if(s.DOMParser){if(t=(new s.DOMParser).parseFromString(e,"text/xml"),t.childNodes&&t.childNodes.length&&"parsererror"==t.childNodes[0].firstChild.nodeName)return
}else t=new s.ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)}catch(n){return}return t},r.filterPlaylist=function(e,t){var n,i,s,a,o=[];for(n=0;n<e.length;n++)if(i=r.extend({},e[n]),i.sources=r.filterSources(i.sources),0<i.sources.length){for(s=0;s<i.sources.length;s++)a=i.sources[s],a.label||(a.label=s.toString());o.push(i)}if(t&&0===o.length)for(n=0;n<e.length;n++)if(i=r.extend({},e[n]),i.sources=r.filterSources(i.sources,!0),0<i.sources.length){for(s=0;s<i.sources.length;s++)a=i.sources[s],a.label||(a.label=s.toString());
o.push(i)}return o},r.filterSources=function(t,n){var i,s,a=r.extensionmap;if(t){s=[];for(var o=0;o<t.length;o++){var l=t[o].type,c=t[o].file;c&&(c=r.trim(c)),l||(l=a.extType(r.extension(c)),t[o].type=l),n?e.embed.flashCanPlay(c,l)&&(i||(i=l),l==i&&s.push(r.extend({},t[o]))):r.canPlayHTML5(l)&&(i||(i=l),l==i&&s.push(r.extend({},t[o])))}}return s},r.canPlayHTML5=function(t){return!r.isAndroid()||"hls"!=t&&"m3u"!=t&&"m3u8"!=t?(t=r.extensionmap.types[t],!!t&&!!e.vid.canPlayType&&e.vid.canPlayType(t)):!1
},r.seconds=function(e){e=e.replace(",",".");var t=e.split(":"),n=0;return"s"==e.slice(-1)?n=parseFloat(e):"m"==e.slice(-1)?n=60*parseFloat(e):"h"==e.slice(-1)?n=3600*parseFloat(e):1<t.length?(n=parseFloat(t[t.length-1]),n+=60*parseFloat(t[t.length-2]),3==t.length&&(n+=3600*parseFloat(t[t.length-3]))):n=parseFloat(e),n},r.serialize=function(e){return null==e?null:"true"==e.toString().toLowerCase()?!0:"false"==e.toString().toLowerCase()?!1:isNaN(Number(e))||5<e.length||0===e.length?e:Number(e)}}(jwplayer),function(e){var t="video/",n=e.foreach,i={"mp4":t+"mp4","vorbis":"audio/ogg","ogg":t+"ogg","webm":t+"webm","aac":"audio/mp4","mp3":"audio/mpeg","hls":"application/vnd.apple.mpegurl"},s={"mp4":i.mp4,"f4v":i.mp4,"m4v":i.mp4,"mov":i.mp4,"m4a":i.aac,"f4a":i.aac,"aac":i.aac,"mp3":i.mp3,"ogv":i.ogg,"ogg":i.vorbis,"oga":i.vorbis,"webm":i.webm,"m3u8":i.hls,"hls":i.hls},t="video",t={"flv":t,"f4v":t,"mov":t,"m4a":t,"m4v":t,"mp4":t,"aac":t,"f4a":t,"mp3":"sound","smil":"rtmp","m3u8":"hls","hls":"hls"},a=e.extensionmap={};
n(s,function(e,t){a[e]={"html5":t}}),n(t,function(e,t){a[e]||(a[e]={}),a[e].flash=t}),a.types=i,a.mimeType=function(e){var t;return n(i,function(n,i){!t&&i==e&&(t=n)}),t},a.extType=function(e){return a.mimeType(s[e])}}(jwplayer.utils),function(e){var t=e.loaderstatus={"NEW":0,"LOADING":1,"ERROR":2,"COMPLETE":3},n=document;e.scriptloader=function(i){function s(){r=t.ERROR,l.sendEvent(o.ERROR)}function a(){r=t.COMPLETE,l.sendEvent(o.COMPLETE)}var r=t.NEW,o=jwplayer.events,l=new o.eventdispatcher;e.extend(this,l),this.load=function(){var l=e.scriptloader.loaders[i];
if(!l||l.getStatus()!=t.NEW&&l.getStatus()!=t.LOADING){if(e.scriptloader.loaders[i]=this,r==t.NEW){r=t.LOADING;var c=n.createElement("script");c.addEventListener?(c.onload=a,c.onerror=s):c.readyState&&(c.onreadystatechange=function(){("loaded"==c.readyState||"complete"==c.readyState)&&a()}),n.getElementsByTagName("head")[0].appendChild(c),c.src=i}}else l.addEventListener(o.ERROR,s),l.addEventListener(o.COMPLETE,a)},this.getStatus=function(){return r}},e.scriptloader.loaders={}}(jwplayer.utils),function(e){e.trim=function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")
},e.pad=function(e,t,n){for(n||(n="0");e.length<t;)e=n+e;return e},e.xmlAttribute=function(e,t){for(var n=0;n<e.attributes.length;n++)if(e.attributes[n].name&&e.attributes[n].name.toLowerCase()==t.toLowerCase())return e.attributes[n].value.toString();return""},e.extension=function(e){return e&&"rtmp"!=e.substr(0,4)?(e=e.substring(e.lastIndexOf("/")+1,e.length).split("?")[0].split("#")[0],-1<e.lastIndexOf(".")?e.substr(e.lastIndexOf(".")+1,e.length).toLowerCase():void 0):""},e.stringToColor=function(e){return e=e.replace(/(#|0x)?([0-9A-F]{3,6})$/gi,"$2"),3==e.length&&(e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2)),parseInt(e,16)
}}(jwplayer.utils),function(e){var t="touchmove",n="touchstart";e.touch=function(i){function s(e){e.type==n?(l=!0,d=r(h.DRAG_START,e)):e.type==t?l&&(u||(a(h.DRAG_START,e,d),u=!0),a(h.DRAG,e)):(l&&(u?a(h.DRAG_END,e):(e.cancelBubble=!0,a(h.TAP,e))),l=u=!1,d=null)}function a(e,t,n){c[e]&&(t.preventManipulation&&t.preventManipulation(),t.preventDefault&&t.preventDefault(),t=n?n:r(e,t))&&c[e](t)}function r(e,t){var n=null;if(t.touches&&t.touches.length?n=t.touches[0]:t.changedTouches&&t.changedTouches.length&&(n=t.changedTouches[0]),!n)return null;
var i=o.getBoundingClientRect(),n={"type":e,"target":o,"x":n.pageX-window.pageXOffset-i.left,"y":n.pageY,"deltaX":0,"deltaY":0};return e!=h.TAP&&d&&(n.deltaX=n.x-d.x,n.deltaY=n.y-d.y),n}var o=i,l=!1,c={},d=null,u=!1,h=e.touchEvents;return document.addEventListener(t,s),document.addEventListener("touchend",function(e){l&&u&&a(h.DRAG_END,e),l=u=!1,d=null}),document.addEventListener("touchcancel",s),i.addEventListener(n,s),i.addEventListener("touchend",s),this.addEventListener=function(e,t){c[e]=t},this.removeEventListener=function(e){delete c[e]
},this}}(jwplayer.utils),function(e){e.touchEvents={"DRAG":"jwplayerDrag","DRAG_START":"jwplayerDragStart","DRAG_END":"jwplayerDragEnd","TAP":"jwplayerTap"}}(jwplayer.utils),function(e){e.key=function(t){var n,i,s;this.edition=function(){return s&&s.getTime()<(new Date).getTime()?"invalid":n},this.token=function(){return i},e.exists(t)||(t="");try{t=e.tea.decrypt(t,"36QXq4W@GSBV^teR");var a=t.split("/");(n=a[0])?/^(free|pro|premium|ads)$/i.test(n)?(i=a[1],a[2]&&0<parseInt(a[2])&&(s=new Date,s.setTime(String(a[2])))):n="invalid":n="free"
}catch(r){n="invalid"}}}(jwplayer.utils),function(e){var t=e.tea={};t.encrypt=function(e,s){if(0==e.length)return"";var a=t.strToLongs(i.encode(e));1>=a.length&&(a[1]=0);for(var r,o=t.strToLongs(i.encode(s).slice(0,16)),l=a.length,c=a[l-1],d=a[0],u=Math.floor(6+52/l),h=0;0<u--;){h+=2654435769,r=h>>>2&3;for(var p=0;l>p;p++)d=a[(p+1)%l],c=(c>>>5^d<<2)+(d>>>3^c<<4)^(h^d)+(o[3&p^r]^c),c=a[p]+=c}return a=t.longsToStr(a),n.encode(a)},t.decrypt=function(e,s){if(0==e.length)return"";for(var a,r=t.strToLongs(n.decode(e)),o=t.strToLongs(i.encode(s).slice(0,16)),l=r.length,c=r[l-1],d=r[0],u=2654435769*Math.floor(6+52/l);0!=u;){a=u>>>2&3;
for(var h=l-1;h>=0;h--)c=r[h>0?h-1:l-1],c=(c>>>5^d<<2)+(d>>>3^c<<4)^(u^d)+(o[3&h^a]^c),d=r[h]-=c;u-=2654435769}return r=t.longsToStr(r),r=r.replace(/\0+$/,""),i.decode(r)},t.strToLongs=function(e){for(var t=Array(Math.ceil(e.length/4)),n=0;n<t.length;n++)t[n]=e.charCodeAt(4*n)+(e.charCodeAt(4*n+1)<<8)+(e.charCodeAt(4*n+2)<<16)+(e.charCodeAt(4*n+3)<<24);return t},t.longsToStr=function(e){for(var t=Array(e.length),n=0;n<e.length;n++)t[n]=String.fromCharCode(255&e[n],e[n]>>>8&255,e[n]>>>16&255,e[n]>>>24&255);
return t.join("")};var n={"code":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=","encode":function(e,t){var s,a,r,o,l,c,d=[],u="",h=n.code;if(c=("undefined"==typeof t?0:t)?i.encode(e):e,l=c.length%3,l>0)for(;3>l++;)u+="=",c+="\x00";for(l=0;l<c.length;l+=3)s=c.charCodeAt(l),a=c.charCodeAt(l+1),r=c.charCodeAt(l+2),o=s<<16|a<<8|r,s=o>>18&63,a=o>>12&63,r=o>>6&63,o&=63,d[l/3]=h.charAt(s)+h.charAt(a)+h.charAt(r)+h.charAt(o);return d=d.join(""),d=d.slice(0,d.length-u.length)+u},"decode":function(e,t){t="undefined"==typeof t?!1:t;
var s,a,r,o,l,c,d=[],u=n.code;c=t?i.decode(e):e;for(var h=0;h<c.length;h+=4)s=u.indexOf(c.charAt(h)),a=u.indexOf(c.charAt(h+1)),o=u.indexOf(c.charAt(h+2)),l=u.indexOf(c.charAt(h+3)),r=s<<18|a<<12|o<<6|l,s=r>>>16&255,a=r>>>8&255,r&=255,d[h/4]=String.fromCharCode(s,a,r),64==l&&(d[h/4]=String.fromCharCode(s,a)),64==o&&(d[h/4]=String.fromCharCode(s));return o=d.join(""),t?i.decode(o):o}},i={"encode":function(e){return e=e.replace(/[\u0080-\u07ff]/g,function(e){return e=e.charCodeAt(0),String.fromCharCode(192|e>>6,128|63&e)
}),e=e.replace(/[\u0800-\uffff]/g,function(e){return e=e.charCodeAt(0),String.fromCharCode(224|e>>12,128|e>>6&63,128|63&e)})},"decode":function(e){return e=e.replace(/[\u00e0-\u00ef][\u0080-\u00bf][\u0080-\u00bf]/g,function(e){return e=(15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2),String.fromCharCode(e)}),e=e.replace(/[\u00c0-\u00df][\u0080-\u00bf]/g,function(e){return e=(31&e.charCodeAt(0))<<6|63&e.charCodeAt(1),String.fromCharCode(e)})}}}(jwplayer.utils),function(e){e.events={"COMPLETE":"COMPLETE","ERROR":"ERROR","API_READY":"jwplayerAPIReady","JWPLAYER_READY":"jwplayerReady","JWPLAYER_FULLSCREEN":"jwplayerFullscreen","JWPLAYER_RESIZE":"jwplayerResize","JWPLAYER_ERROR":"jwplayerError","JWPLAYER_SETUP_ERROR":"jwplayerSetupError","JWPLAYER_MEDIA_BEFOREPLAY":"jwplayerMediaBeforePlay","JWPLAYER_MEDIA_BEFORECOMPLETE":"jwplayerMediaBeforeComplete","JWPLAYER_COMPONENT_SHOW":"jwplayerComponentShow","JWPLAYER_COMPONENT_HIDE":"jwplayerComponentHide","JWPLAYER_MEDIA_BUFFER":"jwplayerMediaBuffer","JWPLAYER_MEDIA_BUFFER_FULL":"jwplayerMediaBufferFull","JWPLAYER_MEDIA_ERROR":"jwplayerMediaError","JWPLAYER_MEDIA_LOADED":"jwplayerMediaLoaded","JWPLAYER_MEDIA_COMPLETE":"jwplayerMediaComplete","JWPLAYER_MEDIA_SEEK":"jwplayerMediaSeek","JWPLAYER_MEDIA_TIME":"jwplayerMediaTime","JWPLAYER_MEDIA_VOLUME":"jwplayerMediaVolume","JWPLAYER_MEDIA_META":"jwplayerMediaMeta","JWPLAYER_MEDIA_MUTE":"jwplayerMediaMute","JWPLAYER_MEDIA_LEVELS":"jwplayerMediaLevels","JWPLAYER_MEDIA_LEVEL_CHANGED":"jwplayerMediaLevelChanged","JWPLAYER_CAPTIONS_CHANGED":"jwplayerCaptionsChanged","JWPLAYER_CAPTIONS_LIST":"jwplayerCaptionsList","JWPLAYER_CAPTIONS_LOADED":"jwplayerCaptionsLoaded","JWPLAYER_PLAYER_STATE":"jwplayerPlayerState","state":{"BUFFERING":"BUFFERING","IDLE":"IDLE","PAUSED":"PAUSED","PLAYING":"PLAYING"},"JWPLAYER_PLAYLIST_LOADED":"jwplayerPlaylistLoaded","JWPLAYER_PLAYLIST_ITEM":"jwplayerPlaylistItem","JWPLAYER_PLAYLIST_COMPLETE":"jwplayerPlaylistComplete","JWPLAYER_DISPLAY_CLICK":"jwplayerViewClick","JWPLAYER_CONTROLS":"jwplayerViewControls","JWPLAYER_USER_ACTION":"jwplayerUserAction","JWPLAYER_INSTREAM_CLICK":"jwplayerInstreamClicked","JWPLAYER_INSTREAM_DESTROYED":"jwplayerInstreamDestroyed","JWPLAYER_AD_TIME":"jwplayerAdTime","JWPLAYER_AD_ERROR":"jwplayerAdError","JWPLAYER_AD_CLICK":"jwplayerAdClicked","JWPLAYER_AD_COMPLETE":"jwplayerAdComplete","JWPLAYER_AD_IMPRESSION":"jwplayerAdImpression","JWPLAYER_AD_COMPANIONS":"jwplayerAdCompanions","JWPLAYER_AD_SKIPPED":"jwplayerAdSkipped"}
}(jwplayer),function(e){var t=e.utils;e.events.eventdispatcher=function(n,i){function s(e,n,i){if(e)for(var s=0;s<e.length;s++){var a=e[s];if(a){null!==a.count&&0===--a.count&&delete e[s];try{a.listener(n)}catch(r){t.log('Error handling "'+i+'" event listener ['+s+"]: "+r.toString(),a.listener,n)}}}}var a,r;this.resetEventListeners=function(){a={},r=[]},this.resetEventListeners(),this.addEventListener=function(e,n,i){try{t.exists(a[e])||(a[e]=[]),"string"==t.typeOf(n)&&(n=new Function("return "+n)()),a[e].push({"listener":n,"count":i||null})
}catch(s){t.log("error",s)}return!1},this.removeEventListener=function(e,n){if(a[e]){try{for(var i=0;i<a[e].length;i++)if(a[e][i].listener.toString()==n.toString()){a[e].splice(i,1);break}}catch(s){t.log("error",s)}return!1}},this.addGlobalListener=function(e,n){try{"string"==t.typeOf(e)&&(e=new Function("return "+e)()),r.push({"listener":e,"count":n||null})}catch(i){t.log("error",i)}return!1},this.removeGlobalListener=function(e){if(e){try{for(var n=r.length;n--;)r[n].listener.toString()==e.toString()&&r.splice(n,1)
}catch(i){t.log("error",i)}return!1}},this.sendEvent=function(o,l){t.exists(l)||(l={}),t.extend(l,{"id":n,"version":e.version,"type":o}),i&&t.log(o,l),s(a[o],l,o),s(r,l,o)}}}(window.jwplayer),function(e){var t={},n={};e.plugins=function(){},e.plugins.loadPlugins=function(i,s){return n[i]=new e.plugins.pluginloader(new e.plugins.model(t),s),n[i]},e.plugins.registerPlugin=function(n,i,s,a){var r=e.utils.getPluginName(n);t[r]||(t[r]=new e.plugins.plugin(n)),t[r].registerPlugin(n,i,s,a)}}(jwplayer),function(e){e.plugins.model=function(t){this.addPlugin=function(n){var i=e.utils.getPluginName(n);
return t[i]||(t[i]=new e.plugins.plugin(n)),t[i]},this.getPlugins=function(){return t}}}(jwplayer),function(e){var t=jwplayer.utils,n=jwplayer.events;e.pluginmodes={"FLASH":0,"JAVASCRIPT":1,"HYBRID":2},e.plugin=function(i){function s(){switch(t.getPluginPathType(i)){case t.pluginPathType.ABSOLUTE:return i;case t.pluginPathType.RELATIVE:return t.getAbsolutePath(i,window.location.href)}}function a(){d=setTimeout(function(){u=t.loaderstatus.COMPLETE,h.sendEvent(n.COMPLETE)},1e3)}function r(){u=t.loaderstatus.ERROR,h.sendEvent(n.ERROR)
}var o,l,c,d,u=t.loaderstatus.NEW,h=new n.eventdispatcher;t.extend(this,h),this.load=function(){if(u==t.loaderstatus.NEW)if(0<i.lastIndexOf(".swf"))o=i,u=t.loaderstatus.COMPLETE,h.sendEvent(n.COMPLETE);else if(t.getPluginPathType(i)==t.pluginPathType.CDN)u=t.loaderstatus.COMPLETE,h.sendEvent(n.COMPLETE);else{u=t.loaderstatus.LOADING;var e=new t.scriptloader(s());e.addEventListener(n.COMPLETE,a),e.addEventListener(n.ERROR,r),e.load()}},this.registerPlugin=function(e,i,s,a){d&&(clearTimeout(d),d=void 0),c=i,s&&a?(o=a,l=s):"string"==typeof s?o=s:"function"==typeof s?l=s:!s&&!a&&(o=e),u=t.loaderstatus.COMPLETE,h.sendEvent(n.COMPLETE)
},this.getStatus=function(){return u},this.getPluginName=function(){return t.getPluginName(i)},this.getFlashPath=function(){if(o)switch(t.getPluginPathType(o)){case t.pluginPathType.ABSOLUTE:return o;case t.pluginPathType.RELATIVE:return 0<i.lastIndexOf(".swf")?t.getAbsolutePath(o,window.location.href):t.getAbsolutePath(o,s())}return null},this.getJS=function(){return l},this.getTarget=function(){return c},this.getPluginmode=function(){return"undefined"!=typeof o&&"undefined"!=typeof l?e.pluginmodes.HYBRID:"undefined"!=typeof o?e.pluginmodes.FLASH:"undefined"!=typeof l?e.pluginmodes.JAVASCRIPT:void 0
},this.getNewInstance=function(e,t,n){return new l(e,t,n)},this.getURL=function(){return i}}}(jwplayer.plugins),function(e){var t=e.utils,n=e.events,i=t.foreach;e.plugins.pluginloader=function(s,a){function r(){u?p.sendEvent(n.ERROR,{"message":l}):d||(d=!0,c=t.loaderstatus.COMPLETE,p.sendEvent(n.COMPLETE))}function o(){if(h||r(),!d&&!u){var n=0,i=s.getPlugins();t.foreach(h,function(s){s=t.getPluginName(s);var a=i[s];s=a.getJS();var o=a.getTarget(),a=a.getStatus();a==t.loaderstatus.LOADING||a==t.loaderstatus.NEW?n++:s&&(!o||parseFloat(o)>parseFloat(e.version))&&(u=!0,l="Incompatible player version",r())
}),0==n&&r()}}var l,c=t.loaderstatus.NEW,d=!1,u=!1,h=a,p=new n.eventdispatcher;t.extend(this,p),this.setupPlugins=function(e,n,a){var r={"length":0,"plugins":{}},o=0,l={},c=s.getPlugins();return i(n.plugins,function(i,s){var d=t.getPluginName(i),u=c[d],h=u.getFlashPath(),p=u.getJS(),f=u.getURL();h&&(r.plugins[h]=t.extend({},s),r.plugins[h].pluginmode=u.getPluginmode(),r.length++);try{if(p&&n.plugins&&n.plugins[f]){var m=document.createElement("div");m.id=e.id+"_"+d,m.style.position="absolute",m.style.top=0,m.style.zIndex=o+10,l[d]=u.getNewInstance(e,t.extend({},n.plugins[f]),m),o++,e.onReady(a(l[d],m,!0)),e.onResize(a(l[d],m))
}}catch(g){t.log("ERROR: Failed to load "+d+".")}}),e.plugins=l,r},this.load=function(){if(!t.exists(a)||"object"==t.typeOf(a)){c=t.loaderstatus.LOADING,i(a,function(e){t.exists(e)&&(e=s.addPlugin(e),e.addEventListener(n.COMPLETE,o),e.addEventListener(n.ERROR,f))});var e=s.getPlugins();i(e,function(e,t){t.load()})}o()};var f=this.pluginFailed=function(){u||(u=!0,l="File not found",r())};this.getStatus=function(){return c}}}(jwplayer),function(){jwplayer.parsers={"localName":function(e){return e?e.localName?e.localName:e.baseName?e.baseName:"":""
},"textContent":function(e){return e?e.textContent?jwplayer.utils.trim(e.textContent):e.text?jwplayer.utils.trim(e.text):"":""},"getChildNode":function(e,t){return e.childNodes[t]},"numChildren":function(e){return e.childNodes?e.childNodes.length:0}}}(jwplayer),function(e){var t=e.parsers;(t.jwparser=function(){}).parseEntry=function(n,i){for(var s=[],a=[],r=e.utils.xmlAttribute,o=0;o<n.childNodes.length;o++){var l=n.childNodes[o];if("jwplayer"==l.prefix){var c=t.localName(l);"source"==c?(delete i.sources,s.push({"file":r(l,"file"),"default":r(l,"default"),"label":r(l,"label"),"type":r(l,"type")})):"track"==c?(delete i.tracks,a.push({"file":r(l,"file"),"default":r(l,"default"),"kind":r(l,"kind"),"label":r(l,"label")})):(i[c]=e.utils.serialize(t.textContent(l)),"file"==c&&i.sources&&delete i.sources)
}i.file||(i.file=i.link)}if(s.length)for(i.sources=[],o=0;o<s.length;o++)0<s[o].file.length&&(s[o]["default"]="true"==s[o]["default"]?!0:!1,s[o].label.length||delete s[o].label,i.sources.push(s[o]));if(a.length)for(i.tracks=[],o=0;o<a.length;o++)0<a[o].file.length&&(a[o]["default"]="true"==a[o]["default"]?!0:!1,a[o].kind=a[o].kind.length?a[o].kind:"captions",a[o].label.length||delete a[o].label,i.tracks.push(a[o]));return i}}(jwplayer),function(e){var t=jwplayer.utils,n=t.xmlAttribute,i=e.localName,s=e.textContent,a=e.numChildren,r=e.mediaparser=function(){};
r.parseGroup=function(e,o){var l,c,d=[];for(c=0;c<a(e);c++)if(l=e.childNodes[c],"media"==l.prefix&&i(l))switch(i(l).toLowerCase()){case"content":n(l,"duration")&&(o.duration=t.seconds(n(l,"duration"))),0<a(l)&&(o=r.parseGroup(l,o)),n(l,"url")&&(o.sources||(o.sources=[]),o.sources.push({"file":n(l,"url"),"type":n(l,"type"),"width":n(l,"width"),"label":n(l,"label")}));break;case"title":o.title=s(l);break;case"description":o.description=s(l);break;case"guid":o.mediaid=s(l);break;case"thumbnail":o.image||(o.image=n(l,"url"));
break;case"group":r.parseGroup(l,o);break;case"subtitle":var u={};if(u.file=n(l,"url"),u.kind="captions",0<n(l,"lang").length){var h=u;l=n(l,"lang");var p={"zh":"Chinese","nl":"Dutch","en":"English","fr":"French","de":"German","it":"Italian","ja":"Japanese","pt":"Portuguese","ru":"Russian","es":"Spanish"};l=p[l]?p[l]:l,h.label=l}d.push(u)}for(o.hasOwnProperty("tracks")||(o.tracks=[]),c=0;c<d.length;c++)o.tracks.push(d[c]);return o}}(jwplayer.parsers),function(e){function t(t){for(var s={},a=0;a<t.childNodes.length;a++){var o=t.childNodes[a],l=r(o);
if(l)switch(l.toLowerCase()){case"enclosure":s.file=n.xmlAttribute(o,"url");break;case"title":s.title=i(o);break;case"guid":s.mediaid=i(o);break;case"pubdate":s.date=i(o);break;case"description":s.description=i(o);break;case"link":s.link=i(o);break;case"category":s.tags=s.tags?s.tags+i(o):i(o)}}return s=e.mediaparser.parseGroup(t,s),s=e.jwparser.parseEntry(t,s),new jwplayer.playlist.item(s)}var n=jwplayer.utils,i=e.textContent,s=e.getChildNode,a=e.numChildren,r=e.localName;e.rssparser={},e.rssparser.parse=function(e){for(var n=[],i=0;i<a(e);i++){var o=s(e,i);
if("channel"==r(o).toLowerCase())for(var l=0;l<a(o);l++){var c=s(o,l);"item"==r(c).toLowerCase()&&n.push(t(c))}}return n}}(jwplayer.parsers),function(e){e.playlist=function(t){var n=[];if("array"==e.utils.typeOf(t))for(var i=0;i<t.length;i++)n.push(new e.playlist.item(t[i]));else n.push(new e.playlist.item(t));return n}}(jwplayer),function(e){var t=e.item=function(n){var i=jwplayer.utils,s=i.extend({},t.defaults,n);s.tracks=n&&i.exists(n.tracks)?n.tracks:[],0==s.sources.length&&(s.sources=[new e.source(s)]);
for(var a=0;a<s.sources.length;a++){var r=s.sources[a]["default"];s.sources[a]["default"]=r?"true"==r.toString():!1,s.sources[a]=new e.source(s.sources[a])}if(s.captions&&!i.exists(n.tracks)){for(n=0;n<s.captions.length;n++)s.tracks.push(s.captions[n]);delete s.captions}for(a=0;a<s.tracks.length;a++)s.tracks[a]=new e.track(s.tracks[a]);return s};t.defaults={"description":"","image":"","mediaid":"","title":"","sources":[],"tracks":[]}}(jwplayer.playlist),function(e){var t=jwplayer,n=t.utils,i=t.events,s=t.parsers;
e.loader=function(){function t(t){try{var n=t.responseXML.childNodes;t="";for(var a=0;a<n.length&&(t=n[a],!(8!=t.nodeType));a++);if("xml"==s.localName(t)&&(t=t.nextSibling),"rss"!=s.localName(t))r("Not a valid RSS feed");else{var l=new e(s.rssparser.parse(t));o.sendEvent(i.JWPLAYER_PLAYLIST_LOADED,{"playlist":l})}}catch(c){r()}}function a(e){r(e.match(/invalid/i)?"Not a valid RSS feed":"")}function r(e){o.sendEvent(i.JWPLAYER_ERROR,{"message":e?e:"Error loading file"})}var o=new i.eventdispatcher;
n.extend(this,o),this.load=function(e){n.ajax(e,t,a)}}}(jwplayer.playlist),function(e){var t=jwplayer.utils,n={"file":void 0,"label":void 0,"type":void 0,"default":void 0};e.source=function(e){var i=t.extend({},n);return t.foreach(n,function(n){t.exists(e[n])&&(i[n]=e[n],delete e[n])}),i.type&&0<i.type.indexOf("/")&&(i.type=t.extensionmap.mimeType(i.type)),"m3u8"==i.type&&(i.type="hls"),"smil"==i.type&&(i.type="rtmp"),i}}(jwplayer.playlist),function(e){var t=jwplayer.utils,n={"file":void 0,"label":void 0,"kind":"captions","default":!1};
e.track=function(e){var i=t.extend({},n);return e||(e={}),t.foreach(n,function(n){t.exists(e[n])&&(i[n]=e[n],delete e[n])}),i}}(jwplayer.playlist),function(e){function t(e,t,i){var s=e.style;s.backgroundColor="#000",s.color="#FFF",s.width=n.styleDimension(i.width),s.height=n.styleDimension(i.height),s.display="table",s.opacity=1,i=document.createElement("p"),s=i.style,s.verticalAlign="middle",s.textAlign="center",s.display="table-cell",s.font="15px/20px Arial, Helvetica, sans-serif",i.innerHTML=t.replace(":",":<br>"),e.innerHTML="",e.appendChild(i)
}var n=e.utils,i=e.events,s=!0,a=!1,r=document,o=e.embed=function(l){function c(e,t){n.foreach(t,function(t,n){"function"==typeof e[t]&&e[t].call(e,n)})}function d(){if(!T)if("array"==n.typeOf(b.playlist)&&2>b.playlist.length&&(0==b.playlist.length||!b.playlist[0].sources||0==b.playlist[0].sources.length))p();else if(!C)if("string"==n.typeOf(b.playlist)){var t=new e.playlist.loader;t.addEventListener(i.JWPLAYER_PLAYLIST_LOADED,function(e){b.playlist=e.playlist,C=a,d()}),t.addEventListener(i.JWPLAYER_ERROR,function(e){C=a,p(e)
}),C=s,t.load(b.playlist)}else if(S.getStatus()==n.loaderstatus.COMPLETE){for(t=0;t<b.modes.length;t++)if(b.modes[t].type&&o[b.modes[t].type]){var r=n.extend({},b),h=new o[b.modes[t].type](g,b.modes[t],r,S,l);if(h.supportsConfig())return h.addEventListener(i.ERROR,u),h.embed(),c(l,r.events),l}var m;b.fallback?(m="No suitable players found and fallback enabled",A=setTimeout(function(){f(m,s)},10),n.log(m),new o.download(g,b,p)):(m="No suitable players found and fallback disabled",f(m,a),n.log(m),g.parentNode.replaceChild(y,g))
}}function u(e){m(k+e.message)}function h(e){m("Could not load plugins: "+e.message)}function p(e){m(e&&e.message?"Error loading playlist: "+e.message:k+"No playable sources found")}function f(e,t){A&&(clearTimeout(A),A=null),A=setTimeout(function(){A=null,l.dispatchEvent(i.JWPLAYER_SETUP_ERROR,{"message":e,"fallback":t})},0)}function m(e){T||(b.fallback?(T=s,t(g,e,b),f(e,s)):f(e,a))}var g,v,y,b=new o.config(l.config),w=b.width,x=b.height,k="Error loading player: ",S=e.plugins.loadPlugins(l.id,b.plugins),C=a,T=a,A=null;
return b.fallbackDiv&&(y=b.fallbackDiv,delete b.fallbackDiv),b.id=l.id,v=r.getElementById(l.id),b.aspectratio?l.config.aspectratio=b.aspectratio:delete l.config.aspectratio,g=r.createElement("div"),g.id=v.id,g.style.width=0<w.toString().indexOf("%")?w:w+"px",g.style.height=0<x.toString().indexOf("%")?x:x+"px",v.parentNode.replaceChild(g,v),this.embed=function(){T||(S.addEventListener(i.COMPLETE,d),S.addEventListener(i.ERROR,h),S.load())},this.errorScreen=m,this};e.embed.errorScreen=t}(jwplayer),function(e){function t(e){if(e.playlist)for(var t=0;t<e.playlist.length;t++)e.playlist[t]=new s(e.playlist[t]);
else{var a={};i.foreach(s.defaults,function(t){n(e,a,t)}),a.sources||(e.levels?(a.sources=e.levels,delete e.levels):(t={},n(e,t,"file"),n(e,t,"type"),a.sources=t.file?[t]:[])),e.playlist=[new s(a)]}}function n(e,t,n){i.exists(e[n])&&(t[n]=e[n],delete e[n])}var i=e.utils,s=e.playlist.item;(e.embed.config=function(n){var s={"fallback":!0,"height":270,"primary":"html5","width":480,"base":n.base?n.base:i.getScriptPath("jwplayer.js"),"aspectratio":""};n=i.extend(s,e.defaults,n);var s={"type":"html5","src":n.base+"jwplayer.html5.js"},a={"type":"flash","src":n.base+"jwplayer.flash.swf"};
if(n.modes="flash"==n.primary?[a,s]:[s,a],n.listbar&&(n.playlistsize=n.listbar.size,n.playlistposition=n.listbar.position,n.playlistlayout=n.listbar.layout),n.flashplayer&&(a.src=n.flashplayer),n.html5player&&(s.src=n.html5player),t(n),a=n.aspectratio,"string"==typeof a&&i.exists(a)){var r=a.indexOf(":");-1==r?s=0:(s=parseFloat(a.substr(0,r)),a=parseFloat(a.substr(r+1)),s=0>=s||0>=a?0:100*(a/s)+"%")}else s=0;return-1==n.width.toString().indexOf("%")?delete n.aspectratio:s?n.aspectratio=s:delete n.aspectratio,n
}).addConfig=function(e,n){return t(n),i.extend(e,n)}}(jwplayer),function(e){var t=e.utils,n=document;e.embed.download=function(e,i,s){function a(e,i){for(var s=n.querySelectorAll(e),a=0;a<s.length;a++)t.foreach(i,function(e,t){s[a].style[e]=t})}function r(e,t,i){return e=n.createElement(e),t&&(e.className="jwdownload"+t),i&&i.appendChild(e),e}var o,l=t.extend({},i),c=l.width?l.width:480,d=l.height?l.height:320;i=i.logo?i.logo:{"prefix":t.repo(),"file":"logo.png","margin":10};var u,h,p,f,l=l.playlist,m=["mp4","aac","mp3"];
if(l&&l.length){for(f=l[0],o=f.sources,l=0;l<o.length;l++){var g=o[l],v=g.type?g.type:t.extensionmap.extType(t.extension(g.file));g.file&&t.foreach(m,function(e){v==m[e]?(u=g.file,h=f.image):t.isYouTube(g.file)&&(p=g.file)})}u?(o=u,s=h,e&&(l=r("a","display",e),r("div","icon",l),r("div","logo",l),o&&l.setAttribute("href",t.getAbsolutePath(o))),l="#"+e.id+" .jwdownload",e.style.width="",e.style.height="",a(l+"display",{"width":t.styleDimension(Math.max(320,c)),"height":t.styleDimension(Math.max(180,d)),"background":"black center no-repeat "+(s?"url("+s+")":""),"backgroundSize":"contain","position":"relative","border":"none","display":"block"}),a(l+"display div",{"position":"absolute","width":"100%","height":"100%"}),a(l+"logo",{"top":i.margin+"px","right":i.margin+"px","background":"top right no-repeat url("+i.prefix+i.file+")"}),a(l+"icon",{"background":"center no-repeat url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAgNJREFUeNrs28lqwkAYB/CZqNVDDj2r6FN41QeIy8Fe+gj6BL275Q08u9FbT8ZdwVfotSBYEPUkxFOoks4EKiJdaDuTjMn3wWBO0V/+sySR8SNSqVRKIR8qaXHkzlqS9jCfzzWcTCYp9hF5o+59sVjsiRzcegSckFzcjT+ruN80TeSlAjCAAXzdJSGPFXRpAAMYwACGZQkSdhG4WCzehMNhqV6vG6vVSrirKVEw66YoSqDb7cqlUilE8JjHd/y1MQefVzqdDmiaJpfLZWHgXMHn8F6vJ1cqlVAkEsGuAn83J4gAd2RZymQygX6/L1erVQt+9ZPWb+CDwcCC2zXGJaewl/DhcHhK3DVj+KfKZrMWvFarcYNLomAv4aPRSFZVlTlcSPA5fDweW/BoNIqFnKV53JvncjkLns/n/cLdS+92O7RYLLgsKfv9/t8XlDn4eDyiw+HA9Jyz2eyt0+kY2+3WFC5hluej0Ha7zQQq9PPwdDq1Et1sNsx/nFBgCqWJ8oAK1aUptNVqcYWewE4nahfU0YQnk4ntUEfGMIU2m01HoLaCKbTRaDgKtaVLk9tBYaBcE/6Artdr4RZ5TB6/dC+9iIe/WgAMYADDpAUJAxjAAAYwgGFZgoS/AtNNTF7Z2bL0BYPBV3Jw5xFwwWcYxgtBP5OkE8i9G7aWGOOCruvauwADALMLMEbKf4SdAAAAAElFTkSuQmCC)"})):p?(i=p,e=r("iframe","",e),e.src="http://www.youtube.com/embed/"+t.youTubeID(i),e.width=c,e.height=d,e.style.border="none"):s()
}}}(jwplayer),function(e){var t=e.utils,n=e.events,i={};(e.embed.flash=function(a,r,o,l,c){function d(e,t,n){var i=document.createElement("param");i.setAttribute("name",t),i.setAttribute("value",n),e.appendChild(i)}function u(e,t,n){return function(){try{n&&document.getElementById(c.id+"_wrapper").appendChild(t);var i=document.getElementById(c.id).getPluginConfig("display");"function"==typeof e.resize&&e.resize(i.width,i.height),t.style.left=i.x,t.style.top=i.h}catch(s){}}}function h(e){if(!e)return{};
var n={},i=[];return t.foreach(e,function(e,s){var a=t.getPluginName(e);i.push(e),t.foreach(s,function(e,t){n[a+"."+e]=t})}),n.plugins=i.join(","),n}var p=new e.events.eventdispatcher,f=t.flashVersion();t.extend(this,p),this.embed=function(){if(o.id=c.id,10>f)return p.sendEvent(n.ERROR,{"message":"Flash version must be 10.0 or greater"}),!1;var e,s,m=c.config.listbar,g=t.extend({},o);if(a.id+"_wrapper"==a.parentNode.id)e=document.getElementById(a.id+"_wrapper");else{if(e=document.createElement("div"),s=document.createElement("div"),s.style.display="none",s.id=a.id+"_aspect",e.id=a.id+"_wrapper",e.style.position="relative",e.style.display="block",e.style.width=t.styleDimension(g.width),e.style.height=t.styleDimension(g.height),c.config.aspectratio){var v=parseFloat(c.config.aspectratio);
s.style.display="block",s.style.marginTop=c.config.aspectratio,e.style.height="auto",e.style.display="inline-block",m&&("bottom"==m.position?s.style.paddingBottom=m.size+"px":"right"==m.position&&(s.style.marginBottom=-1*m.size*(v/100)+"px"))}a.parentNode.replaceChild(e,a),e.appendChild(a),e.appendChild(s)}for(e=l.setupPlugins(c,g,u),0<e.length?t.extend(g,h(e.plugins)):delete g.plugins,"undefined"!=typeof g["dock.position"]&&"false"==g["dock.position"].toString().toLowerCase()&&(g.dock=g["dock.position"],delete g["dock.position"]),e=g.wmode?g.wmode:g.height&&40>=g.height?"transparent":"opaque",s="height width modes events primary base fallback volume".split(" "),m=0;m<s.length;m++)delete g[s[m]];
s=t.getCookies(),t.foreach(s,function(e,t){"undefined"==typeof g[e]&&(g[e]=t)}),s=window.location.href.split("/"),s.splice(s.length-1,1),s=s.join("/"),g.base=s+"/",i[a.id]=g,t.isIE()?(s='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" " width="100%" height="100%"id="'+a.id+'" name="'+a.id+'" tabindex=0"">',s+='<param name="movie" value="'+r.src+'">',s+='<param name="allowfullscreen" value="true"><param name="allowscriptaccess" value="always">',s+='<param name="seamlesstabbing" value="true">',s+='<param name="wmode" value="'+e+'">',s+='<param name="bgcolor" value="#000000">',s+="</object>",a.outerHTML=s,e=document.getElementById(a.id)):(s=document.createElement("object"),s.setAttribute("type","application/x-shockwave-flash"),s.setAttribute("data",r.src),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("bgcolor","#000000"),s.setAttribute("id",a.id),s.setAttribute("name",a.id),s.setAttribute("tabindex",0),d(s,"allowfullscreen","true"),d(s,"allowscriptaccess","always"),d(s,"seamlesstabbing","true"),d(s,"wmode",e),a.parentNode.replaceChild(s,a),e=s),c.config.aspectratio&&(e.style.position="absolute"),c.container=e,c.setPlayer(e,"flash")
},this.supportsConfig=function(){if(f){if(!o)return!0;if("string"==t.typeOf(o.playlist))return!0;try{var e=o.playlist[0].sources;if("undefined"==typeof e)return!0;for(var n=0;n<e.length;n++)if(e[n].file&&s(e[n].file,e[n].type))return!0}catch(i){}}return!1}}).getVars=function(e){return i[e]};var s=e.embed.flashCanPlay=function(e,n){if(t.isYouTube(e)||t.isRtmp(e,n)||"hls"==n)return!0;var i=t.extensionmap[n?n:t.extension(e)];return i?!!i.flash:!1}}(jwplayer),function(e){var t=e.utils,n=t.extensionmap,i=e.events;
e.embed.html5=function(s,a,r,o,l){function c(e,t,n){return function(){try{var i=document.querySelector("#"+s.id+" .jwmain");n&&i.appendChild(t),"function"==typeof e.resize&&(e.resize(i.clientWidth,i.clientHeight),setTimeout(function(){e.resize(i.clientWidth,i.clientHeight)},400)),t.left=i.style.left,t.top=i.style.top}catch(a){}}}function d(e){u.sendEvent(e.type,{"message":"HTML5 player not found"})}var u=this,h=new i.eventdispatcher;t.extend(u,h),u.embed=function(){if(e.html5){o.setupPlugins(l,r,c),s.innerHTML="";
var n=e.utils.extend({},r);delete n.volume,n=new e.html5.player(n),l.container=document.getElementById(l.id),l.setPlayer(n,"html5")}else n=new t.scriptloader(a.src),n.addEventListener(i.ERROR,d),n.addEventListener(i.COMPLETE,u.embed),n.load()},u.supportsConfig=function(){if(e.vid.canPlayType)try{if("string"==t.typeOf(r.playlist))return!0;for(var i=r.playlist[0].sources,s=0;s<i.length;s++){var a,o=i[s].file,l=i[s].type;if(null!==navigator.userAgent.match(/BlackBerry/i)||t.isAndroid()&&("m3u"==t.extension(o)||"m3u8"==t.extension(o))||t.isRtmp(o,l))a=!1;
else{var c,d=n[l?l:t.extension(o)];if(!d||d.flash&&!d.html5)c=!1;else{var u=d.html5,h=e.vid;if(u)try{c=h.canPlayType(u)?!0:!1}catch(p){c=!1}else c=!0}a=c}if(a)return!0}}catch(f){}return!1}}}(jwplayer),function(e){var t=e.embed,n=e.utils,i=/\.(js|swf)$/;e.embed=n.extend(function(s){function a(){r="Adobe SiteCatalyst Error: Could not find Media Module"}var r,o=n.repo(),l=n.extend({},e.defaults),c=n.extend({},l,s.config),d=s.config,u=c.plugins,h=c.analytics,p=o+"jwpsrv.js",f=o+"sharing.js",m=o+"related.js",g=o+"gapro.js",l=e.key?e.key:l.key,v=new e.utils.key(l).edition(),u=u?u:{};
switch("ads"==v&&c.advertising&&(i.test(c.advertising.client)?u[c.advertising.client]=c.advertising:u[o+c.advertising.client+".js"]=c.advertising),delete d.advertising,d.key=l,c.analytics&&i.test(c.analytics.client)&&(p=c.analytics.client),delete d.analytics,h&&"ads"!==v&&delete h.enabled,"free"!=v&&h&&!1===h.enabled||(u[p]=h?h:{}),delete u.sharing,delete u.related,v){case"ads":if(d.sitecatalyst)try{window.s&&window.s.hasOwnProperty("Media")?new e.embed.sitecatalyst(s):a()}catch(y){a()}case"premium":c.related&&(i.test(c.related.client)&&(m=c.related.client),u[m]=c.related),c.ga&&(i.test(c.ga.client)&&(g=c.ga.client),u[g]=c.ga);
case"pro":c.sharing&&(i.test(c.sharing.client)&&(f=c.sharing.client),u[f]=c.sharing),c.skin&&(d.skin=c.skin.replace(/^(beelden|bekle|five|glow|modieus|roundster|stormtrooper|vapor)$/i,n.repo()+"skins/$1.xml"))}return d.plugins=u,s.config=d,s=new t(s),r&&s.errorScreen(r),s},e.embed)}(jwplayer),function(e){var t=jwplayer.utils;e.sitecatalyst=function(e){function n(e){h.debug&&t.log(e)}function i(e){return e=e.split("/"),e=e[e.length-1],e=e.split("?"),e[0]}function a(){if(!f){f=!0;var e=u.getPosition();
n("stop: "+o+" : "+e),s.Media.stop(o,e)}}function r(){m||(a(),m=!0,n("close: "+o),s.Media.close(o),d=!0,c=0)}var o,l,c,d,u=e,h=t.extend({},u.config.sitecatalyst),p={"onPlay":function(){if(!d){var e=u.getPosition();f=!1,n("play: "+o+" : "+e),s.Media.play(o,e)}},"onPause":a,"onBuffer":a,"onIdle":r,"onPlaylistItem":function(e){try{d=!0,r(),c=0;var n;if(h.mediaName)n=h.mediaName;else{var s=u.getPlaylistItem(e.index);n=s.title?s.title:s.file?i(s.file):s.sources&&s.sources.length?i(s.sources[0].file):""
}o=n,l=h.playerName?h.playerName:u.id}catch(a){t.log(a)}},"onTime":function(){if(d){var e=u.getDuration();if(-1==e)return;m=f=d=!1,n("open: "+o+" : "+e+" : "+l),s.Media.open(o,e,l),n("play: "+o+" : 0"),s.Media.play(o,0)}if(e=u.getPosition(),3<=Math.abs(e-c)){var t=c;n("seek: "+t+" to "+e),n("stop: "+o+" : "+t),s.Media.stop(o,t),n("play: "+o+" : "+e),s.Media.play(o,e)}c=e},"onComplete":r},f=!0,m=!0;t.foreach(p,function(e){u[e](p[e])})}}(jwplayer.embed),function(e,t){var n=[],i=e.utils,s=e.events,a=s.state,r=document,o=e.api=function(n){function l(e,t){return function(n){return t(e,n)
}}function c(e,t){return v[e]||(v[e]=[],u(s.JWPLAYER_PLAYER_STATE,function(t){var n=t.newstate;if(t=t.oldstate,n==e){var i=v[n];if(i)for(var s=0;s<i.length;s++){var a=i[s];"function"==typeof a&&a.call(this,{"oldstate":t,"newstate":n})}}})),v[e].push(t),m}function d(e,t){try{e.jwAddEventListener(t,'function(dat) { jwplayer("'+m.id+'").dispatchEvent("'+t+'", dat); }')}catch(n){i.log("Could not add internal listener")}}function u(e,t){return g[e]||(g[e]=[],p&&y&&d(p,e)),g[e].push(t),m}function h(){if(y){if(p){var e=Array.prototype.slice.call(arguments,0),t=e.shift();
if("function"==typeof p[t]){switch(e.length){case 6:return p[t](e[0],e[1],e[2],e[3],e[4],e[5]);case 5:return p[t](e[0],e[1],e[2],e[3],e[4]);case 4:return p[t](e[0],e[1],e[2],e[3]);case 3:return p[t](e[0],e[1],e[2]);case 2:return p[t](e[0],e[1]);case 1:return p[t](e[0])}return p[t]()}}return null}b.push(arguments)}var p,f,m=this,g={},v={},y=!1,b=[],w={},x={};m.container=n,m.id=n.id,m.getBuffer=function(){return h("jwGetBuffer")},m.getContainer=function(){return m.container},m.addButton=function(e,t,n,s){try{x[s]=n,h("jwDockAddButton",e,t,"jwplayer('"+m.id+"').callback('"+s+"')",s)
}catch(a){i.log("Could not add dock button"+a.message)}},m.removeButton=function(e){h("jwDockRemoveButton",e)},m.callback=function(e){x[e]&&x[e]()},m.forceState=function(e){return h("jwForceState",e),m},m.releaseState=function(){return h("jwReleaseState")},m.getDuration=function(){return h("jwGetDuration")},m.getFullscreen=function(){return h("jwGetFullscreen")},m.getHeight=function(){return h("jwGetHeight")},m.getLockState=function(){return h("jwGetLockState")},m.getMeta=function(){return m.getItemMeta()
},m.getMute=function(){return h("jwGetMute")},m.getPlaylist=function(){var e=h("jwGetPlaylist");return"flash"==m.renderingMode&&i.deepReplaceKeyName(e,["__dot__","__spc__","__dsh__","__default__"],["."," ","-","default"]),e},m.getPlaylistItem=function(e){return i.exists(e)||(e=m.getPlaylistIndex()),m.getPlaylist()[e]},m.getPlaylistIndex=function(){return h("jwGetPlaylistIndex")},m.getPosition=function(){return h("jwGetPosition")},m.getRenderingMode=function(){return m.renderingMode},m.getState=function(){return h("jwGetState")
},m.getVolume=function(){return h("jwGetVolume")},m.getWidth=function(){return h("jwGetWidth")},m.setFullscreen=function(e){return i.exists(e)?h("jwSetFullscreen",e):h("jwSetFullscreen",!h("jwGetFullscreen")),m},m.setMute=function(e){return i.exists(e)?h("jwSetMute",e):h("jwSetMute",!h("jwGetMute")),m},m.lock=function(){return m},m.unlock=function(){return m},m.load=function(e){return h("jwLoad",e),m},m.playlistItem=function(e){return h("jwPlaylistItem",parseInt(e,10)),m},m.playlistPrev=function(){return h("jwPlaylistPrev"),m
},m.playlistNext=function(){return h("jwPlaylistNext"),m},m.resize=function(e,t){if("flash"!==m.renderingMode)h("jwResize",e,t);else{var n=r.getElementById(m.id+"_wrapper"),s=r.getElementById(m.id+"_aspect");s&&(s.style.display="none"),n&&(n.style.display="block",n.style.width=i.styleDimension(e),n.style.height=i.styleDimension(t))}return m},m.play=function(e){return e===t?(e=m.getState(),h(e==a.PLAYING||e==a.BUFFERING?"jwPause":"jwPlay")):h("jwPlay",e),m},m.pause=function(e){return e===t?(e=m.getState(),h(e==a.PLAYING||e==a.BUFFERING?"jwPause":"jwPlay")):h("jwPause",e),m
},m.stop=function(){return h("jwStop"),m},m.seek=function(e){return h("jwSeek",e),m},m.setVolume=function(e){return h("jwSetVolume",e),m},m.createInstream=function(){return new o.instream(this,p)},m.setInstream=function(e){return f=e},m.loadInstream=function(e,t){return f=m.setInstream(m.createInstream()).init(t),f.loadItem(e),f},m.getQualityLevels=function(){return h("jwGetQualityLevels")},m.getCurrentQuality=function(){return h("jwGetCurrentQuality")},m.setCurrentQuality=function(e){h("jwSetCurrentQuality",e)
},m.getCaptionsList=function(){return h("jwGetCaptionsList")},m.getCurrentCaptions=function(){return h("jwGetCurrentCaptions")},m.setCurrentCaptions=function(e){h("jwSetCurrentCaptions",e)},m.getControls=function(){return h("jwGetControls")},m.getSafeRegion=function(){return h("jwGetSafeRegion")},m.setControls=function(e){h("jwSetControls",e)},m.destroyPlayer=function(){h("jwPlayerDestroy")},m.playAd=function(t){var n=e(m.id).plugins;n.vast&&n.vast.jwPlayAd(t)},m.pauseAd=function(){var t=e(m.id).plugins;
t.vast?t.vast.jwPauseAd():h("jwPauseAd")};var k={"onBufferChange":s.JWPLAYER_MEDIA_BUFFER,"onBufferFull":s.JWPLAYER_MEDIA_BUFFER_FULL,"onError":s.JWPLAYER_ERROR,"onSetupError":s.JWPLAYER_SETUP_ERROR,"onFullscreen":s.JWPLAYER_FULLSCREEN,"onMeta":s.JWPLAYER_MEDIA_META,"onMute":s.JWPLAYER_MEDIA_MUTE,"onPlaylist":s.JWPLAYER_PLAYLIST_LOADED,"onPlaylistItem":s.JWPLAYER_PLAYLIST_ITEM,"onPlaylistComplete":s.JWPLAYER_PLAYLIST_COMPLETE,"onReady":s.API_READY,"onResize":s.JWPLAYER_RESIZE,"onComplete":s.JWPLAYER_MEDIA_COMPLETE,"onSeek":s.JWPLAYER_MEDIA_SEEK,"onTime":s.JWPLAYER_MEDIA_TIME,"onVolume":s.JWPLAYER_MEDIA_VOLUME,"onBeforePlay":s.JWPLAYER_MEDIA_BEFOREPLAY,"onBeforeComplete":s.JWPLAYER_MEDIA_BEFORECOMPLETE,"onDisplayClick":s.JWPLAYER_DISPLAY_CLICK,"onControls":s.JWPLAYER_CONTROLS,"onQualityLevels":s.JWPLAYER_MEDIA_LEVELS,"onQualityChange":s.JWPLAYER_MEDIA_LEVEL_CHANGED,"onCaptionsList":s.JWPLAYER_CAPTIONS_LIST,"onCaptionsChange":s.JWPLAYER_CAPTIONS_CHANGED,"onAdError":s.JWPLAYER_AD_ERROR,"onAdClick":s.JWPLAYER_AD_CLICK,"onAdImpression":s.JWPLAYER_AD_IMPRESSION,"onAdTime":s.JWPLAYER_AD_TIME,"onAdComplete":s.JWPLAYER_AD_COMPLETE,"onAdCompanions":s.JWPLAYER_AD_COMPANIONS,"onAdSkipped":s.JWPLAYER_AD_SKIPPED};
i.foreach(k,function(e){m[e]=l(k[e],u)});var S={"onBuffer":a.BUFFERING,"onPause":a.PAUSED,"onPlay":a.PLAYING,"onIdle":a.IDLE};return i.foreach(S,function(e){m[e]=l(S[e],c)}),m.remove=function(){if(!y)throw"Cannot call remove() before player is ready";b=[],o.destroyPlayer(this.id)},m.setup=function(t){if(e.embed){var n=r.getElementById(m.id);return n&&(t.fallbackDiv=n),n=m,b=[],o.destroyPlayer(n.id),n=e(m.id),n.config=t,new e.embed(n).embed(),n}return m},m.registerPlugin=function(t,n,i,s){e.plugins.registerPlugin(t,n,i,s)
},m.setPlayer=function(e,t){p=e,m.renderingMode=t},m.detachMedia=function(){return"html5"==m.renderingMode?h("jwDetachMedia"):void 0},m.attachMedia=function(e){return"html5"==m.renderingMode?h("jwAttachMedia",e):void 0},m.removeEventListener=function(e,t){var n=g[e];if(n)for(var i=n.length;i--;)n[i]===t&&n.splice(i,1)},m.dispatchEvent=function(e,t){var n=g[e];if(n)for(var n=n.slice(0),a=i.translateEventResponse(e,t),r=0;r<n.length;r++){var o=n[r];if("function"==typeof o)try{e===s.JWPLAYER_PLAYLIST_LOADED&&i.deepReplaceKeyName(a.playlist,["__dot__","__spc__","__dsh__","__default__"],["."," ","-","default"]),o.call(this,a)
}catch(l){i.log("There was an error calling back an event handler")}}},m.dispatchInstreamEvent=function(e){f&&f.dispatchEvent(e,arguments)},m.callInternal=h,m.playerReady=function(e){for(y=!0,p||m.setPlayer(r.getElementById(e.id)),m.container=r.getElementById(m.id),i.foreach(g,function(e){d(p,e)}),u(s.JWPLAYER_PLAYLIST_ITEM,function(){w={}}),u(s.JWPLAYER_MEDIA_META,function(e){i.extend(w,e.metadata)}),m.dispatchEvent(s.API_READY);0<b.length;)h.apply(this,b.shift())},m.getItemMeta=function(){return w
},m.isBeforePlay=function(){return h("jwIsBeforePlay")},m.isBeforeComplete=function(){return h("jwIsBeforeComplete")},m};o.selectPlayer=function(e){var t;return i.exists(e)||(e=0),e.nodeType?t=e:"string"==typeof e&&(t=r.getElementById(e)),t?(e=o.playerById(t.id))?e:o.addPlayer(new o(t)):"number"==typeof e?n[e]:null},o.playerById=function(e){for(var t=0;t<n.length;t++)if(n[t].id==e)return n[t];return null},o.addPlayer=function(e){for(var t=0;t<n.length;t++)if(n[t]==e)return e;return n.push(e),e},o.destroyPlayer=function(e){for(var t,s=-1,a=0;a<n.length;a++)n[a].id==e&&(s=a,t=n[a]);
return s>=0&&(e=t.id,a=r.getElementById(e+("flash"==t.renderingMode?"_wrapper":"")),i.clearCss&&i.clearCss("#"+e),a&&("html5"==t.renderingMode&&t.destroyPlayer(),t=r.createElement("div"),t.id=e,a.parentNode.replaceChild(t,a)),n.splice(s,1)),null},e.playerReady=function(t){var n=e.api.playerById(t.id);n?n.playerReady(t):e.api.selectPlayer(t.id).playerReady(t)}}(window.jwplayer),function(e){var t=e.events,n=e.utils,i=t.state;e.api.instream=function(e,s){function a(t,n){return c[t]||(c[t]=[],s.jwInstreamAddEventListener(t,'function(dat) { jwplayer("'+e.id+'").dispatchInstreamEvent("'+t+'", dat); }')),c[t].push(n),this
}function r(e,n){return d[e]||(d[e]=[],a(t.JWPLAYER_PLAYER_STATE,function(t){var n=t.newstate,i=t.oldstate;if(n==e){var s=d[n];if(s)for(var a=0;a<s.length;a++){var r=s[a];"function"==typeof r&&r.call(this,{"oldstate":i,"newstate":n,"type":t.type})}}})),d[e].push(n),this}var o,l,c={},d={},u=this;u.type="instream",u.init=function(){return e.callInternal("jwInitInstream"),u},u.loadItem=function(t,i){o=t,l=i||{},"array"==n.typeOf(t)?e.callInternal("jwLoadArrayInstream",o,l):e.callInternal("jwLoadItemInstream",o,l)
},u.removeEvents=function(){c=d={}},u.removeEventListener=function(e,t){var n=c[e];if(n)for(var i=n.length;i--;)n[i]===t&&n.splice(i,1)},u.dispatchEvent=function(e,t){var i=c[e];if(i)for(var i=i.slice(0),s=n.translateEventResponse(e,t[1]),a=0;a<i.length;a++){var r=i[a];"function"==typeof r&&r.call(this,s)}},u.onError=function(e){return a(t.JWPLAYER_ERROR,e)},u.onMediaError=function(e){return a(t.JWPLAYER_MEDIA_ERROR,e)},u.onFullscreen=function(e){return a(t.JWPLAYER_FULLSCREEN,e)},u.onMeta=function(e){return a(t.JWPLAYER_MEDIA_META,e)
},u.onMute=function(e){return a(t.JWPLAYER_MEDIA_MUTE,e)},u.onComplete=function(e){return a(t.JWPLAYER_MEDIA_COMPLETE,e)},u.onPlaylistComplete=function(e){return a(t.JWPLAYER_PLAYLIST_COMPLETE,e)},u.onPlaylistItem=function(e){return a(t.JWPLAYER_PLAYLIST_ITEM,e)},u.onTime=function(e){return a(t.JWPLAYER_MEDIA_TIME,e)},u.onBuffer=function(e){return r(i.BUFFERING,e)},u.onPause=function(e){return r(i.PAUSED,e)},u.onPlay=function(e){return r(i.PLAYING,e)},u.onIdle=function(e){return r(i.IDLE,e)},u.onClick=function(e){return a(t.JWPLAYER_INSTREAM_CLICK,e)
},u.onInstreamDestroyed=function(e){return a(t.JWPLAYER_INSTREAM_DESTROYED,e)},u.onAdSkipped=function(e){return a(t.JWPLAYER_AD_SKIPPED,e)},u.play=function(e){s.jwInstreamPlay(e)},u.pause=function(e){s.jwInstreamPause(e)},u.hide=function(){e.callInternal("jwInstreamHide")},u.destroy=function(){u.removeEvents(),e.callInternal("jwInstreamDestroy")},u.setText=function(e){s.jwInstreamSetText(e?e:"")},u.getState=function(){return s.jwInstreamState()},u.setClick=function(e){s.jwInstreamClick&&s.jwInstreamClick(e)
}}}(window.jwplayer),function(e){var t=e.api,n=t.selectPlayer;t.selectPlayer=function(t){return(t=n(t))?t:{"registerPlugin":function(t,n,i){e.plugins.registerPlugin(t,n,i)}}}}(jwplayer)),define("jwplayer",function(e){return function(){var t;return t||e.jwplayer}}(this)),define("plex/desktop/adapters/player/DesktopFlashPlayerSubcontroller",["underscore","jwplayer","plex/base/utils/BaseClass","plex/base/utils/Logger","plex/base/adapters/LocalizerAdapter"],function(e,t,n,i,s){t.key="fv2ELs9q2gEZxE9uuiAGfhbE9Qhc4DyhZjt1j0GaxUI=";
var a=n.extend({"wrapped":["play","pause","playPause","getState","setVolume","setPosition","resume","stop"],"initialize":function(){e.bindAll(this,"onReady","onPlay","onTime","onBuffer","onPause","onVolume","onComplete","onError"),e.each(this.wrapped,function(t){this[t]=e.wrap(this[t],e.bind(function(t){var n=e.toArray(arguments).slice(1);return this.video?t.apply(this,n):void 0},this))},this)},"load":function(n){this.model=n.model,this.offset=this.model.get("position"),e.defer(e.bind(function(){var n=t("flash-video-placeholder");
if(!e.isFunction(n.setup)){var i=s.get();return void this.model.set({"state":"error","errorMessage":i.t("Your browser does not support video streaming.")})}this.model.set("ready",!0),this.video=n.setup({"file":this.model.get("url"),"skin":"swf/jwplayer/plex.xml","flashplayer":"swf/jwplayer/jwplayer.swf","stretching":"uniform","width":"100%","height":"100%","volume":100,"mute":!1,"autostart":!0,"analytics":{"enabled":!1},"events":{"onReady":this.onReady,"onPlay":this.onPlay,"onTime":this.onTime,"onBuffer":this.onBuffer,"onPause":this.onPause,"onVolume":this.onVolume,"onComplete":this.onComplete,"onError":this.onError}})
},this))},"play":function(){this.video.play(!0)},"pause":function(){this.video.pause(!0)},"setVolume":function(e){this.video.setVolume(e)},"setPosition":function(e){this.video.seek(e/1e3)},"resume":function(){i.log("resuming at "+this.offset);var e=this.offset;this.offset=null,this.setPosition(e)},"stop":function(){this.model.get("loaded")&&this.video.remove(),this.video=null},"onReady":function(){this.model.set("loaded",!0),this.setVolume(this.model.get("volume"))},"onPlay":function(){this.model.set("state","playing")
},"onTime":function(e){return this.offset?void this.resume():(this.model.get("duration")||this.model.set("duration",Math.round(1e3*e.duration)),void this.model.set("position",Math.round(1e3*e.position)))},"onBuffer":function(){this.model.set("state","buffering")},"onPause":function(){this.model.set("state","paused")},"onVolume":function(e){this.model.set("volume",e.volume)},"onComplete":function(){this.model.set({"state":"stopped","ended":!0})},"onError":function(e){this.model.set({"state":"error","errorMessage":e.message})
}});return a}),define("plex/desktop/adapters/player/DesktopVideoPlayerController",["underscore","jquery","swfobject","plex/base/utils/Capabilities","plex/base/utils/Browser","plex/base/utils/MediaUtil","plex/base/utils/MediaDecisionUtil","plex/desktop/utils/DesktopTranscoder","plex/base/adapters/LocalizerAdapter","plex/base/adapters/player/LocalPlayerController","plex/desktop/adapters/player/DesktopHTMLPlayerSubcontroller","plex/desktop/adapters/player/DesktopFlashPlayerSubcontroller","plex/base/models/AppModel","plex/base/models/SettingsModel"],function(e,t,n,i,s,a,r,o,l,c,d,u,h,p){var f=c.extend({"type":"video","playerDefaults":function(){return e.defaults({"type":this.type,"volume":this.volume,"showPlayPause":!0,"showVolume":!s.mobile,"enableSeekBar":!0,"showQuality":!0,"showSubtitleStream":!0,"showAudioStream":!0,"showEnterFullscreen":i.hasFullscreen,"enableQueueActions":!0},this.model.controllerDefaults)
},"getMediaDecision":function(t,n){var i=this.populateItem(t);return i=i.then(e.bind(function(){var e=a.getQualityInfo(t,p);this.model.set("qualityIndex",e.index);var i=r.getMediaDecision({"type":this.type,"item":t,"media":n.media,"part":n.part,"supportedTypes":this.supportedTypes,"allowDirectPlay":p.get("directPlay"),"allowAC3":p.get("allowAC3"),"offset":n.offset,"flash":this.canPlayFlash(),"hls":this.canPlayHLS(),"dash":this.canPlayDASH(),"http":this.canPlayStreamingMKV(),"minVersionForHTTP":t.server.features.desktopStreamingMKV,"transcodeServer":t.server,"fallbackServer":h.get("primaryServer"),"transcoder":o,"transcoderOptions":{"videoQuality":e.quality,"videoResolution":e.resolution,"maxVideoBitrate":e.bitrate,"offset":n.offset/1e3}});
return i.done(this.onDecisionSuccess),i.fail(this.onDecisionError),i},this),e.bind(function(){var e=l.get();this.model.set({"state":"error","errorMessage":e.t("Plex Media Server is not responding.")})},this))},"getSubcontrollerByType":function(e){return"flash"===e?new u:new d},"canPlayFlash":function(){return n.hasFlashPlayerVersion("10")},"canPlayHLS":function(){if(!this.supportedTypes.hasOwnProperty("hls"))return!1;var e=r.canPlayType("video",this.supportedTypes.hls.mimeType),t="Android"===s.platform;
return e||t},"canPlayDASH":function(){if(!this.supportedTypes.hasOwnProperty("mp4"))return!1;var e=r.canPlayType("video",this.supportedTypes.mp4.mimeType);return p.get("dash")&&e&&i.hasMediaSource},"canPlayStreamingMKV":function(){var e=r.canPlayType("video",this.supportedTypes.mp4.mimeType);return p.get("dash")&&"chrome"===s.id&&!s.mobile&&e},"setPosition":function(){this.model.get("enableSeekBar")&&c.prototype.setPosition.apply(this,arguments)}});return f}),define("plex/base/commands/server/TestServerConnectionCommand",["underscore","jquery","plex/base/utils/Logger"],function(e,t,n){function i(i){var s=i.server,a=i.connection,r=s.get("friendlyName"),o=s.url(a),l=t.Deferred();
a.test&&"pending"===a.test.state()&&(a.aborting=!0,a.test.abort(),a.aborting=!1),n.info("Testing connection to "+r+" at "+o);var c=e.extend(s.getXHROptions(o),{"timeout":1e4}),d=t.ajax(c);return a.test=d,d.always(function(){a.test=null}),d.done(function(e,t,i){var c=s.parse(e),d=c&&c.machineIdentifier;!d||s.id&&c.machineIdentifier!==s.id?(n.warn(r+" is unavailable at "+o+" (Invalid Response)"),l.reject(s,a,i)):(n.success(r+" is available at "+o),l.resolve(s,a,c,o))}),d.fail(function(e){n.warn(r+" is unavailable at "+o+" (Status "+e.status+")"),l.reject(s,a,e)
}),l.promise()}return i}),define("plex/base/commands/server/TestServerImageCommand",["underscore","jquery","plex/base/utils/Logger"],function(e,t,n){function i(e){var i,s=e.server,a=e.connection,r=s.get("friendlyName"),o=(new Date).getTime(),l=s.resolveUrl("/web/img/blank.png?cb="+o,{"connection":a}),c=t.Deferred();n.info("Testing image for "+r+" at "+l);var d=new Image;return d.onload=function(){d.onload=d.onerror=d.onabort=null,i=clearTimeout(i),n.success("Image test for "+r+" was successful. Show mixed content warning."),c.resolve(s,a)
},d.onerror=d.onabort=function(){d.onload=d.onerror=d.onabort=null,i=clearTimeout(i),n.warn(r+" is unavailable at "+l),c.reject(s,a)},i=setTimeout(function(){d.onload=d.onerror=d.onabort=null,d.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",n.warn(r+" is unavailable at "+l+" (Timeout)"),c.reject(s,a)},5e3),d.src=l,c.promise()}return i}),define("plex/base/commands/user/RecommendCommand",["jquery","underscore","plex/base/utils/Dispatcher","plex/base/adapters/LocalizerAdapter","plex/base/models/AppModel"],function(e,t,n,i,s){function a(a){var r=s.get("user"),o=a.item.get("url"),l=[],c={"url":o,"message":a.message};
t.each(a.playlistIDs,function(n){var i="/pms/playlists/"+n+"/items?"+e.param(c),s=t.extend(r.server.getXHROptions(i),{"type":"POST"});l.push(e.ajax(s))});var d=e.when.apply(e,l);return d.fail(function(){var e,t=i.get();e=t.t("There was a problem recommending this item."),n.trigger("show:alert",{"type":"error","message":e})}),d.promise()}return a}),define("plex/base/commands/user/SignInCommand",["jquery","plex/base/utils/Dispatcher","plex/base/utils/formatters/StringUtil","plex/base/adapters/LocalizerAdapter","plex/base/adapters/StorageAdapter","plex/base/models/AppModel"],function(e,t,n,i,s,a){function r(r){var o=a.get("user"),l=o.server.getXHROptions("/users/sign_in.xml");
l.type="POST";var c="Basic "+n.encode64(n.toUtf8(r.username+":"+r.password));l.headers.Authorization=c;var d=e.ajax(l);return d.done(function(t){var n=s.get(),i=o.parse(t),l=i.accessToken,c=a.get("servers");c.populatePromise=e.Deferred(),a.get("primaryServer")===!1&&a.set("primaryServer",null),o.server.set("accessToken",l),o.set(i),n.set({"key":"myPlexAccessToken","value":l,"session":!r.remember})}),d.fail(function(e){var n,s=i.get();n=s.t(401===e.status?"The username or password is incorrect.":"There was a problem connecting to Plex."),t.trigger("show:alert",{"type":"error","message":n})
}),d.promise()}return r}),define("plex/base/commands/user/SignUpCommand",["underscore","jquery","plex/base/utils/Dispatcher","plex/base/utils/Parser","plex/base/adapters/LocalizerAdapter","plex/base/adapters/StorageAdapter","plex/base/models/AppModel"],function(e,t,n,i,s,a,r){function o(o){var l=r.get("user"),c=e.pick(o,"username","email","password");o.birthday&&(c.birthday_str=o.birthday.format("YYYY/MM/DD"));var d=l.server.getXHROptions("/users?format=xml");d.type="POST",d.data=c;var u=t.ajax(d);
return u.done(function(e){var t=a.get(),n=l.parse(e),i=n.accessToken;l.server.set("accessToken",i),l.set(n),t.set({"key":"myPlexAccessToken","value":i,"session":!o.remember})}),u.fail(function(t){var a,r=s.get();if(422===t.status){var o=t.responseText,l=i.parseXML(o);i.parseArray(l,"error"),a=r.t(l.error.length?e.first(l.error):"This account information is invalid.")}else a=r.t("There was a problem connecting to Plex.");n.trigger("show:alert",{"type":"error","message":a})}),u.promise()}return o}),define("plex/base/models/ConfigModel",["underscore","backbone"],function(e,t){var n=t.Model.extend({"defaults":e.extend({"env":"production","bundled":!1,"hosted":!0,"flash":!0,"playerDiscovery":!0,"defaultTarget":"_self"},window.PLEXWEB)});
return new n}),define("plex/base/models/server/ServerStorageModel",["underscore","plex/base/adapters/StorageAdapter","plex/base/models/StorageModel"],function(e,t,n){var i=n.extend({"storageKey":"connections","defaults":function(){return{"users":[]}},"addConnection":function(n,i){if(!n.server||n.server.get("cloud")){var s=t.get(),a=s.get({"key":"myPlexAccessToken"});a.done(e.bind(function(t){var s,a=this.get("users"),r=e.findWhere(a,{"accessToken":t});r?s=r.servers:(s=[],a.push({"accessToken":t,"servers":s}));
var o=e.findWhere(s,{"machineIdentifier":n.id}),l=e.pick(i,"scheme","address","port","accessToken");o?e.extend(o,n.toLiteJSON()):(o=n.toLiteJSON(),o.connections=[],s.push(o));var c=o.connections,d=e.findWhere(c,{"address":i.address,"port":i.port});d?e.extend(d,l):c.push(l),this.save()},this))}}});return new i}),define("plex/base/managers/ServerConnectionManager",["underscore","jquery","plex/base/utils/Dispatcher","plex/base/utils/BaseClass","plex/base/utils/Logger","plex/base/adapters/LocalizerAdapter","plex/base/mixins/EventMixin","plex/base/models/server/ServerStorageModel"],function(e,t,n,i,s,a,r,o){var l=i.extend({"mixins":r,"browserConnectionChangeDelay":2e3,"unavailableServersDelay":3e4,"initialize":function(n){e.bindAll(this,"checkUnavailableServer","onBrowserConnectionChange","onConnectionTestSuccess","onConnectionTestError","onImageTestSuccess"),this.servers=n.servers,this.listenTo(this.servers,{"add":this.onServerAdd,"remove":this.onServerRemove,"reset":this.onServersReset,"error:connection":this.onServerConnectionError,"change:connections":this.onServerConnectionsChange,"change:connected":this.onServerConnectedChange}),t(window).on("online",this.onBrowserConnectionChange),t(window).on("offline",this.onBrowserConnectionChange),this.testAllPendingConnections()
},"testAllServers":function(){this.servers.each(this.testAllConnections,this)},"testAllConnections":function(t){this.resetServerAvailability(t),e.each(t.connections,function(e){e.available=null,this.testConnection(t,e)},this)},"testAllPendingConnections":function(){this.servers.each(this.testPendingConnections,this)},"testPendingConnections":function(t){var n=e.where(t.connections,{"pending":!0});e.each(n,function(e){this.testConnection(t,e)},this)},"testConnection":function(t,i){if(i.pending=!1,e.isFunction(t.testConnection))return void t.testConnection(i);
var s={"server":t,"connection":i};n.trigger("command","testServerConnection",s,e.bind(function(e){e.done(this.onConnectionTestSuccess),e.fail(this.onConnectionTestError)},this))},"findBestConnection":function(t){var n=e.where(t.connections,{"available":!0}),i=null;return e.each(n,function(e){(!i||!i.isLocalAddress&&e.isLocalAddress)&&(i=e)}),i},"resetServerAvailability":function(e){e.populatePromise=t.Deferred(),e.set({"available":null,"authorized":null})},"addUnavailableServer":function(t){this.unavailableServersLoop||(this.unavailableServersLoop=[]),e.contains(this.unavailableServersLoop,t)||(this.unavailableServersLoop.push(t),this.unavailableServersInterval||(this.unavailableServersPosition=-1,this.unavailableServersInterval=setInterval(this.checkUnavailableServer,this.unavailableServersDelay)))
},"checkUnavailableServer":function(){this.unavailableServersPosition++,this.unavailableServersPosition>=this.unavailableServersLoop.length&&(this.unavailableServersPosition=0);var e=this.unavailableServersLoop[this.unavailableServersPosition];this.testAllConnections(e)},"removeUnavailableServer":function(t){if(this.unavailableServersLoop){var n=e.indexOf(this.unavailableServersLoop,t);n>-1&&(this.unavailableServersLoop.splice(n,1),this.unavailableServersLoop.length||(this.unavailableServersInterval=clearInterval(this.unavailableServersInterval)))
}},"abortConnectionTests":function(t){var n=t.connections;e.each(n,function(e){e.test&&"pending"===e.test.state()&&(e.aborting=!0,e.test.abort(),e.aborting=!1)})},"onServerAdd":function(e){e.connections.length&&this.testPendingConnections(e)},"onServerRemove":function(e){this.abortConnectionTests(e),this.removeUnavailableServer(e)},"onServersReset":function(t,n){var i=n.previousModels;e.each(i,function(e){t.contains(e)||(this.abortConnectionTests(e),this.removeUnavailableServer(e))},this)},"onServerConnectionError":function(e){this.testAllConnections(e)
},"onServerConnectionsChange":function(e){this.testPendingConnections(e)},"onServerConnectedChange":function(e,t){if(null!=t&&null!=e.previous("connected")){var i,s=a.get();i=t?s.t("Found {1}",e.get("friendlyName")):s.t("{1} went away",e.get("friendlyName")),n.trigger("show:status",e,i)}},"onBrowserConnectionChange":function(){s.info("Online status: "+window.navigator.onLine),clearTimeout(this.browserConnectionChangeTimeout),this.browserConnectionChangeTimeout=setTimeout(e.bind(this.testAllServers,this),this.browserConnectionChangeDelay)
},"onConnectionTestSuccess":function(t,n,i){n.available=!0;var a=this.findBestConnection(t);s.success("Setting active connection for "+t.get("friendlyName")+" ("+a.address+")"),t.set("activeConnection",a),e.extend(i,{"connected":!0,"available":!0,"authorized":!0,"mixedContent":!1}),t.populatePromise.resolveWith(t,[t,i]),t.set(i),this.removeUnavailableServer(t),o.addConnection(t,n)},"onConnectionTestError":function(t,i,a){if(!i.aborting&&(i.available=!1,!t.get("available")&&"pending"===t.populatePromise.state())){if(!i.isLocalAddress&&t.useHostedHttps){var r={"server":t,"connection":i};
n.trigger("command","testServerImage",r,e.bind(function(e){e.done(this.onImageTestSuccess)},this))}var o=e.where(t.connections,{"available":!1}),l=t.get("friendlyName");401===a.status||403===a.status?(s.error("Authorization for "+l+" failed"),t.set({"connected":!1,"available":!0,"authorized":!1}),t.populatePromise.rejectWith(t,[t,a]),this.removeUnavailableServer(t)):t.connections.length===o.length&&(s.error("All connections for "+l+" failed"),t.set({"connected":!1,"available":!1,"authorized":null}),t.populatePromise.rejectWith(t,[t,a]),this.addUnavailableServer(t))
}},"onImageTestSuccess":function(e,t){t.mixedContent=!0,e.get("authorized")||e.set("mixedContent",!0)}});return l}),define("plex/base/managers/PrimaryServerManager",["underscore","jquery","plex/base/utils/Dispatcher","plex/base/utils/BaseClass","plex/base/utils/Logger","plex/base/mixins/EventMixin","plex/base/models/AppModel","plex/base/models/ConfigModel","plex/base/adapters/AnalyticsAdapter"],function(e,t,n,i,s,a,r,o,l){var c=i.extend({"mixins":a,"bundleUpdatesDelay":36e5,"waitingForServers":!1,"initialize":function(t){e.bindAll(this,"checkPendingServers"),t||(t={}),this.lastPrimaryServerID=t.lastPrimaryServerID,this.servers=r.get("servers"),this.startListening()
},"startListening":function(){this.listenTo(this.servers,"add",this.checkPendingServers),this.listenTo(this.servers,"change:connected",this.onServerConnectedChange),this.listenTo(r,"change:primaryServer",this.onPrimaryServerChange)},"checkPendingServers":function(){if(this.servers.populatePromise){if("pending"===this.servers.populatePromise.state()){if(this.waitingForServers)return;return s.log("Primary server is waiting for servers to populate"),this.waitingForServers=!0,void this.servers.populate().always(this.checkPendingServers)
}if(!r.get("primaryServer")){this.waitingForServers=!1;var t=this.servers.filter(function(e){return null==e.get("connected")}),n=e.filter(t,function(e){return!e.get("shared")});if(this.primaryCandidate){var i=!1,a=this.servers.get(this.lastPrimaryServerID),o=!this.lastPrimaryServerID&&!n.length;if(this.lastPrimaryServerID&&a&&(i="pending"===a.populatePromise.state()),!t.length||!i&&!o)return void this.setPrimaryServer(this.primaryCandidate)}t.length||(this.setPrimaryServer(!1),l.get().enable())}}},"findBestPrimaryServer":function(){var t=this.servers.where({"connected":!0,"cloud":!1,"synced":!1});
if(!t.length)return!1;var n=e.findWhere(t,{"id":this.lastPrimaryServerID});if(this.lastPrimaryServerID&&n)return n;var i=e.sortBy(t,function(e){return e.get("shared")});return e.first(i)},"setPrimaryServer":function(e){r.set("primaryServer",e)},"onServerConnectedChange":function(e,t){if(!r.get("primaryServer")){if(!t||e.get("cloud")||e.get("synced"))return void this.checkPendingServers();var n=e.id===this.lastPrimaryServerID,i=!this.lastPrimaryServerID&&!e.get("shared");if(n||i)return s.log("setting primary server immediately to "+e.get("friendlyName")),void this.setPrimaryServer(e);
(!this.primaryCandidate||this.primaryCandidate.get("shared")&&!e.get("shared"))&&(s.log("setting primary server candidate to "+e.get("friendlyName")),this.primaryCandidate=e),this.checkPendingServers()}},"onPrimaryServerChange":function(e,t){if(this.stopListening(),this.startListening(),null==t?this.checkPendingServers():t?s.success("Setting primary server to "+t.get("friendlyName")):s.warn("No primary server"),t){this.primaryCandidate=null,this.listenTo(t,"change:connected",this.onPrimaryServerConnectedChange);
var i=t.get("shared");if(!i){if(o.get("playerDiscovery")){var a=e.get("plexPlayers");a.server=t,a.fetch({"reset":!0})}var r=t.get("sessions");r.fetch({"reset":!0})}if(o.get("bundled")&&!this.bundleUpdatesInterval&&(n.trigger("command","checkForBundleUpdates"),this.bundleUpdatesInterval=setInterval(function(){n.trigger("command","checkForBundleUpdates")},this.bundleUpdatesDelay)),!i||t.supports("sharedSettings")){var l=t.get("settings");this.listenTo(l,"reset",this.onPrimaryServerSettingsReset),l.populate({"reset":!0})
}}},"onPrimaryServerSettingsReset":function(e){var t=e.server.get("shared"),i=e.get("AcceptedEULA"),s=e.get("collectUsageData");!t&&i&&i.get("value")===!1&&n.trigger("command","showTermsOfService",{"collection":e}),s&&s.get("value")===!0?l.get().enable():l.get().disable()},"onPrimaryServerConnectedChange":function(e,t){t||(s.warn("The primary server lost its connection"),this.setPrimaryServer(this.findBestPrimaryServer()))}});return c}),define("plex/base/initializers/ServerInitializer",["underscore","jquery","plex/base/utils/Logger","plex/base/adapters/StorageAdapter","plex/base/managers/ServerConnectionManager","plex/base/managers/PrimaryServerManager","plex/base/models/AppModel","plex/base/models/ConfigModel","plex/base/models/SettingsModel","plex/base/models/server/ServerStorageModel","plex/base/models/server/ServerCollection","plex/base/models/server/ServerModel"],function(e,t,n,i,s,a,r,o,l,c,d,u){function h(){var e=f.populatePromise;
if("pending"===e.state()){if(g.length)return void n.log("Waiting to resolve servers promise, secondary servers requests = "+g.length);var t=f.filter(function(e){return!e.server&&"pending"===e.populatePromise.state()});if(t.length)return void n.log("Waiting to resolve servers promise, pending initial servers = "+t.length);var i=f.where({"available":!0});n.log("Resolving servers promise, available servers = "+i.length),i.length?e.resolveWith(f,[f]):e.rejectWith(f,[f])}}function p(t,i){var s=f.where({"authorized":!0,"cloud":!1});
if(r.set("multiserver",s.length>1),!i)return void h();r.set("authorized",!0),t.get("cloud")&&f.reset(f.reject(function(e){return e.get("authorized")===!1}));var a=t.server&&!t.server.get("cloud");if(!(a||t.secondaryServersPromise||t.get("shared")||t.get("synced"))){var o=new d([],{"server":t,"parent":r,"url":t.serversUrl}),l=t.get("name")||e.result(t,"url"),c=o.populate();t.secondaryServersPromise=c,g.push(c),n.log("Requesting secondary servers through "+l),c.done(function(){f.add(o.models)}),c.always(function(){n.log("Secondary servers requested through "+l),g.splice(e.indexOf(g,c),1),h()
})}}var f=r.get("servers"),m=(new s({"servers":f}),new a),g=[];return f.on("change:authorized",p),{"init":function(){f.populatePromise=t.Deferred(),m.lastPrimaryServerID=c.get("lastPrimaryServerID"),m.checkPendingServers();var n=i.get(),s=n.get({"key":"myPlexAccessToken"});s.done(function(t){var n=c.get("users");e.each(n,function(n){if(t===n.accessToken){var i=n.servers;e.each(i,function(t){var n=new u(e.omit(t,"connections"),{"parent":r}),i=t.connections;f.add(n),e.each(i,function(t){n.addConnection(e.clone(t))
})})}})});var a=f.findWhere({"cloud":!0}),d=a.addConnection({"scheme":o.get("myPlexScheme")||"https","address":o.get("myPlexUrl")||l.get("myPlexUrl")||"plex.tv"});a.set("activeConnection",d);var h=o.get("primaryServer");if(h||o.get("bundled")){var p,g={"parent":r},v={"bundled":!0};if(h)g.parse=!0,e.extend(v,h);else{var y;y="production"===o.get("env")?window.location.port:"32400",p={"scheme":window.location.protocol.replace(":",""),"address":window.location.hostname,"port":y}}var b=new u(v,g);f.add(b),p&&b.addConnection(p)
}}}}),define("plex/base/commands/user/SignOutCommand",["underscore","jquery","backbone","plex/base/models/ConfigModel","plex/base/utils/Dispatcher","plex/base/initializers/ServerInitializer","plex/base/adapters/StorageAdapter","plex/base/models/AppModel","plex/base/models/server/ServerStorageModel"],function(e,t,n,i,s,a,r,o,l){function c(){var t=r.get(),c=o.get("user"),d=o.get("servers"),u=c.server;if(t.clear({"session":!0}),t.remove({"key":"myPlexAccessToken"}),l.clear(),l.save(e.result(l,"defaults")),i.get("hosted"))return void(window.location="/users/sign_out");
o.set({"primaryServer":null,"history":[]}),c.stopListening(),c.clear(),c.set(e.result(c,"defaults")),c.initialize(),u.secondaryServersPromise=null,u.connections=[],u.clear(),u.set(e.result(u,"defaults")),d.release([u],{"force":!0}),s.trigger("purge:cache"),o.set("authorized",!1),s.trigger("disconnect:websocket"),a.init();var h=n.history.getFragment();""===h||"!/dashboard"===h?n.history.loadUrl(""):s.trigger("navigate","dashboard")}return c}),define("plex/base/commands/user/ShareCommand",["jquery","underscore","plex/base/utils/Dispatcher","plex/base/adapters/LocalizerAdapter","plex/base/models/AppModel"],function(e,t,n,i,s){function a(a){var r=s.get("user"),o=a.item.get("url"),l=[],c={"url":o,"message":a.message};
t.each(a.networkIDs,function(n){var i="/pms/social/networks/"+n+"/share?"+e.param(c),s=t.extend(r.server.getXHROptions(i),{"type":"POST"});l.push(e.ajax(s))});var d=e.when.apply(e,l);return d.fail(function(){var e,t=i.get();e=t.t("There was a problem sharing this item."),n.trigger("show:alert",{"type":"error","message":e})}),d.promise()}return a}),define("plex/base/commands/library/SelectStreamCommand",["underscore","jquery","plex/base/utils/Dispatcher","plex/base/utils/MediaUtil","plex/base/adapters/LocalizerAdapter"],function(e,t,n,i,s){function a(a){var r=t.Deferred(),o=a.type,l=a.item,c=a.streamID,d=e.first(l.get("Media"));
if(!d)return r.reject().promise();var u=e.first(d.Part);if(!u)return r.reject().promise();var h=2===o?"audioStreamID":"subtitleStreamID",p="/library/parts/"+u.id+"?"+h+"="+c,f=e.extend(l.server.getXHROptions(p),{"type":"PUT"}),m=t.ajax(f);return m.done(function(){var t=i.getStreams(d,{"streamType":o});e.each(t,function(e){e.selected=e.id===c}),l.trigger("change:streams"),r.resolve()}),m.fail(function(e){var t=s.get();n.trigger("show:alert",{"type":"error","message":t.t("There was a problem selecting the stream for this item.")}),r.reject(e)
}),r.promise()}return a}),define("plex/base/commands/Commands",["underscore","plex/base/utils/Dispatcher","plex/base/commands/server/TestServerConnectionCommand","plex/base/commands/server/TestServerImageCommand","plex/base/commands/user/RecommendCommand","plex/base/commands/user/SignInCommand","plex/base/commands/user/SignUpCommand","plex/base/commands/user/SignOutCommand","plex/base/commands/user/ShareCommand","plex/base/commands/library/SelectStreamCommand"],function(e,t,n,i,s,a,r,o,l,c){var d={"map":{"testServerConnection":n,"testServerImage":i,"signIn":a,"signUp":r,"signOut":o,"share":l,"recommend":s,"selectStream":c},"execute":function(t){var n=d.map,i=e.toArray(arguments).slice(1);
return n.hasOwnProperty(t)?n[t].apply(d,i):!1}};return t.on("command",function(t,n,i){var s=d.execute.apply(this,arguments);e.isFunction(i)&&i(s)}),d}),define("plex/desktop/adapters/player/DesktopMusicPlayerController",["underscore","plex/base/utils/BaseClass","plex/base/utils/Dispatcher","plex/base/utils/Browser","plex/base/utils/MediaUtil","plex/base/utils/MediaDecisionUtil","plex/desktop/utils/DesktopTranscoder","plex/base/adapters/LocalizerAdapter","plex/base/adapters/PlayerProfileAdapter","plex/base/commands/Commands","plex/base/mixins/EventMixin","plex/base/mixins/player/PlayerControllerMixin","plex/base/models/AppModel"],function(e,t,n,i,s,a,r,o,l,c,d,u,h){var p=t.extend({"mixins":[d,u],"local":!0,"type":"audio","wrapped":["play","pause","playPause","setVolume","setPosition","whileLoading","whilePlaying"],"initialize":function(){e.bindAll(this,"onDecisionSuccess","onDecisionError","onCreate","onPlay","onLoad","onFinish"),this.profile=l.get(),this.supportedTypes=this.profile[this.type],e.each(this.wrapped,function(t){this[t]=e.wrap(this[t],e.bind(function(t){var n=e.toArray(arguments).slice(1);
return this.sound?t.apply(this,n):void 0},this))},this)},"load":function(t){return this.model=t.model,this.autoplay=t.autoplay,this.listenTo(this.model,{"change:item":this.onItemChange,"change:state":this.onStateChange}),this.listenTo(this.model.get("playlist"),{"reset":this.onPlaylistChange,"remove":this.onPlaylistChange,"add":this.onPlaylistChange}),this.model.set(e.defaults({"type":this.type,"volume":t.volume,"showPlayPause":!0,"showStop":!0,"showVolume":!i.mobile,"enableQueueActions":!0},this.model.controllerDefaults)),this.update()
},"update":function(){return this.currentItem=this.model.get("item"),this.previousItem=this.getPreviousItem(),this.nextItem=this.getNextItem(),this.model.set({"loaded":!1,"finished":!1,"duration":0,"position":0,"startBuffer":0,"endBuffer":0,"enablePrevious":!!this.previousItem,"enableNext":!!this.nextItem}),this.getMediaDecision(this.currentItem)},"getMediaDecision":function(e){var t=a.getMediaDecision({"type":this.type,"item":e,"supportedTypes":this.supportedTypes,"transcodeServer":e.server,"fallbackServer":h.get("primaryServer"),"transcoder":r,"transcoderOptions":{"maxAudioBitrate":350}});
return t.done(this.onDecisionSuccess),t.fail(this.onDecisionError),t},"play":function(){this.model.set("state","playing"),this.sound.play()},"pause":function(){this.model.set("state","paused"),this.sound.pause()},"setVolume":function(e){this.model.set("volume",e),this.sound.setVolume(e)},"setPosition":function(e){this.model.get("enableSeekBar")&&(this.model.set("position",e),this.sound.setPosition(e))},"stop":function(){this.sound=null,this.model.set("state","stopped"),this.stopListening(),c.execute("playSound",{"key":this.currentItem.get("key"),"stop":!0})
},"unload":function(){return this.stop()},"onDecisionSuccess":function(e){var t=this.model.get("item"),n=0;e.part&&e.part.duration&&(n=e.part.duration),this.session=e.session,this.model.set({"media":e.media,"part":e.part,"url":e.url,"transcodeServer":e.transcodeServer,"mediaIndex":s.getMediaIndex(t,e.media),"partIndex":s.getPartIndex(e.media,e.part),"partCount":s.getPartCount(e.media),"state":this.autoplay?"buffering":"paused","position":e.offset,"duration":n,"directPlay":e.directPlay,"enableSeekBar":e.directPlay}),c.execute("playSound",{"key":this.currentItem.get("key"),"url":e.url,"autoLoad":!0,"autoPlay":this.autoplay,"volume":this.model.get("volume"),"oncreate":this.onCreate,"onplay":this.onPlay,"onload":this.onLoad,"whileloading":this.whileLoading,"whileplaying":this.whilePlaying,"onfinish":this.onFinish})
},"onDecisionError":function(e){this.model.set("state","error"),n.trigger("stop:music"),e.error&&n.trigger("show:alert",{"type":"error","message":o.get().t(e.error)})},"onItemChange":function(e){this.timeline({"item":e.previous("item"),"state":"stopped","continuing":!0}),this.stopTimeline()},"onStateChange":function(e,t){var n=this.timeline();if("playing"===t){var i=e.get("playlist");i&&n.done(function(){i.fetch({"item":e.get("item")})})}"stopped"===t?this.stopTimeline():this.startTimeline(),"playing"===t?this.startPlaybackTracking():this.stopPlaybackTracking()
},"onPlaylistChange":function(){this.previousItem=this.getPreviousItem(),this.nextItem=this.getNextItem(),this.model.set({"enablePrevious":!!this.previousItem,"enableNext":!!this.nextItem})},"onCreate":function(e){this.sound=e,this.model.set("ready",!0)},"onPlay":function(){this.model.set("state","playing")},"onLoad":function(){var e=this.model.get("media"),t=this.model.get("directPlay");this.model.set("loaded",!0),!t&&e&&this.model.set({"endBuffer":e.duration,"enableSeekBar":!0})},"whileLoading":function(){var e,t,n=this.model.get("media"),i=this.model.get("directPlay");
if(!i&&n)e=n.duration,t=0;else{var s=!this.sound.isHTML5||!n||!n.duration;e=s?this.sound.durationEstimate:n.duration,t=this.sound.bytesLoaded/this.sound.bytesTotal*e}this.model.set({"endBuffer":t,"duration":e})},"whilePlaying":function(){this.model.set("position",this.sound.position)},"onFinish":function(){this.sound=null,this.nextItem?this.skipNext():this.model.set({"state":"stopped","finished":!0})}});return p}),define("plex/desktop/adapters/DesktopAdapters",["plex/desktop/adapters/BaseAdapters","plex/base/adapters/StorageAdapter","plex/base/adapters/DimensionsAdapter","plex/base/adapters/AnalyticsAdapter","plex/base/adapters/PlayerProfileAdapter","plex/base/adapters/PlayerControllerAdapter","plex/desktop/adapters/LocalStorage","plex/desktop/adapters/DesktopDimensions","plex/desktop/adapters/GoogleAnalytics","plex/desktop/adapters/player/DesktopPlayerProfile","plex/desktop/adapters/player/DesktopVideoPlayerController","plex/desktop/adapters/player/DesktopMusicPlayerController"],function(e,t,n,i,s,a,r,o,l,c,d,u){return{"registerAll":function(){t.register(r),n.register(o),i.register(l),s.register(c),a.register({"protocol":"local","type":"video","create":function(e){return new d({"type":e})
}}),a.register({"protocol":"local","type":"audio","create":function(e){return new u({"type":e})}}),e.registerAll()}}});var Handlebars=function(){var e=function(){function e(e){this.string=e}var t;return e.prototype.toString=function(){return""+this.string},t=e}(),t=function(e){function t(e){return o[e]||"&amp;"}function n(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}function i(e){return e instanceof r?e.toString():e||0===e?(e=""+e,c.test(e)?e.replace(l,t):e):""}function s(e){return e||0===e?h(e)&&0===e.length?!0:!1:!0
}var a={},r=e,o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},l=/[&<>"'`]/g,c=/[&<>"'`]/;a.extend=n;var d=Object.prototype.toString;a.toString=d;var u=function(e){return"function"==typeof e};u(/x/)&&(u=function(e){return"function"==typeof e&&"[object Function]"===d.call(e)});var u;a.isFunction=u;var h=Array.isArray||function(e){return e&&"object"==typeof e?"[object Array]"===d.call(e):!1};return a.isArray=h,a.escapeExpression=i,a.isEmpty=s,a}(e),n=function(){function e(){for(var e=Error.prototype.constructor.apply(this,arguments),t=0;t<n.length;t++)this[n[t]]=e[n[t]]
}var t,n=["description","fileName","lineNumber","message","name","number","stack"];return e.prototype=new Error,t=e}(),i=function(e,t){function n(e,t){this.helpers=e||{},this.partials=t||{},i(this)}function i(e){e.registerHelper("helperMissing",function(e){if(2===arguments.length)return void 0;throw new Error("Missing helper: '"+e+"'")}),e.registerHelper("blockHelperMissing",function(t,n){var i=n.inverse||function(){},s=n.fn;return h(t)&&(t=t.call(this)),t===!0?s(this):t===!1||null==t?i(this):u(t)?t.length>0?e.helpers.each(t,n):i(this):s(t)
}),e.registerHelper("each",function(e,t){var n,i=t.fn,s=t.inverse,a=0,r="";if(h(e)&&(e=e.call(this)),t.data&&(n=g(t.data)),e&&"object"==typeof e)if(u(e))for(var o=e.length;o>a;a++)n&&(n.index=a,n.first=0===a,n.last=a===e.length-1),r+=i(e[a],{"data":n});else for(var l in e)e.hasOwnProperty(l)&&(n&&(n.key=l),r+=i(e[l],{"data":n}),a++);return 0===a&&(r=s(this)),r}),e.registerHelper("if",function(e,t){return h(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||r.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{"fn":n.inverse,"inverse":n.fn,"hash":n.hash})
}),e.registerHelper("with",function(e,t){return h(e)&&(e=e.call(this)),r.isEmpty(e)?void 0:t.fn(e)}),e.registerHelper("log",function(t,n){var i=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;e.log(i,t)})}function s(e,t){m.log(e,t)}var a={},r=e,o=t,l="1.1.2";a.VERSION=l;var c=4;a.COMPILER_REVISION=c;var d={"1":"<= 1.0.rc.2","2":"== 1.0.0-rc.3","3":"== 1.0.0-rc.4","4":">= 1.0.0"};a.REVISION_CHANGES=d;var u=r.isArray,h=r.isFunction,p=r.toString,f="[object Object]";a.HandlebarsEnvironment=n,n.prototype={"constructor":n,"logger":m,"log":s,"registerHelper":function(e,t,n){if(p.call(e)===f){if(n||t)throw new o("Arg not supported with multiple helpers");
r.extend(this.helpers,e)}else n&&(t.not=n),this.helpers[e]=t},"registerPartial":function(e,t){p.call(e)===f?r.extend(this.partials,e):this.partials[e]=t}};var m={"methodMap":{"0":"debug","1":"info","2":"warn","3":"error"},"DEBUG":0,"INFO":1,"WARN":2,"ERROR":3,"level":3,"log":function(e,t){if(m.level<=e){var n=m.methodMap[e];"undefined"!=typeof console&&console[n]&&console[n].call(console,t)}}};a.logger=m,a.log=s;var g=function(e){var t={};return r.extend(t,e),t};return a.createFrame=g,a}(t,n),s=function(e,t,n){function i(e){var t=e&&e[0]||1,n=h;
if(t!==n){if(n>t){var i=p[n],s=p[t];throw new Error("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+s+").")}throw new Error("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function s(e,t){if(!t)throw new Error("No environment passed to template");var n;n=t.compile?function(e,n,i,s,a,r){var l=o.apply(this,arguments);
if(l)return l;var c={"helpers":s,"partials":a,"data":r};return a[n]=t.compile(e,{"data":void 0!==r},t),a[n](i,c)}:function(e,t){var n=o.apply(this,arguments);if(n)return n;throw new u("The partial "+t+" could not be compiled when running in runtime-only mode")};var s={"escapeExpression":d.escapeExpression,"invokePartial":n,"programs":[],"program":function(e,t,n){var i=this.programs[e];return n?i=r(e,t,n):i||(i=this.programs[e]=r(e,t)),i},"merge":function(e,t){var n=e||t;return e&&t&&e!==t&&(n={},d.extend(n,t),d.extend(n,e)),n
},"programWithDepth":a,"noop":l,"compilerInfo":null};return function(n,a){a=a||{};var r,o,l=a.partial?a:t;a.partial||(r=a.helpers,o=a.partials);var c=e.call(s,l,n,r,o,a.data);return a.partial||i(s.compilerInfo),c}}function a(e,t,n){var i=Array.prototype.slice.call(arguments,3),s=function(e,s){return s=s||{},t.apply(this,[e,s.data||n].concat(i))};return s.program=e,s.depth=i.length,s}function r(e,t,n){var i=function(e,i){return i=i||{},t(e,i.data||n)};return i.program=e,i.depth=0,i}function o(e,t,n,i,s,a){var r={"partial":!0,"helpers":i,"partials":s,"data":a};
if(void 0===e)throw new u("The partial "+t+" could not be found");return e instanceof Function?e(n,r):void 0}function l(){return""}var c={},d=e,u=t,h=n.COMPILER_REVISION,p=n.REVISION_CHANGES;return c.template=s,c.programWithDepth=a,c.program=r,c.invokePartial=o,c.noop=l,c}(t,n,i),a=function(e,t,n,i,s){var a,r=e,o=t,l=n,c=i,d=s,u=function(){var e=new r.HandlebarsEnvironment;return c.extend(e,r),e.SafeString=o,e.Exception=l,e.Utils=c,e.VM=d,e.template=function(t){return d.template(t,e)},e},h=u();return h.create=u,a=h
}(i,e,n,t,s),r=function(e){function t(e,n,i){this.type="program",this.statements=e,this.strip={},i?(this.inverse=new t(i,n),this.strip.right=n.left):n&&(this.strip.left=n.right)}function n(e,t,n,i){this.type="mustache",this.hash=t,this.strip=i;var s=n[3]||n[2];this.escaped="{"!==s&&"&"!==s;var a=this.id=e[0],r=this.params=e.slice(1),o=this.eligibleHelper=a.isSimple;this.isHelper=o&&(r.length||t)}function i(e,t,n){this.type="partial",this.partialName=e,this.context=t,this.strip=n}function s(e,t,n,i){if(e.id.original!==i.path.original)throw new m(e.id.original+" doesn't match "+i.path.original);
this.type="block",this.mustache=e,this.program=t,this.inverse=n,this.strip={"left":e.strip.left,"right":i.strip.right},(t||n).strip.left=e.strip.right,(n||t).strip.right=i.strip.left,n&&!t&&(this.isInverse=!0)}function a(e){this.type="content",this.string=e}function r(e){this.type="hash",this.pairs=e}function o(e){this.type="ID";for(var t="",n=[],i=0,s=0,a=e.length;a>s;s++){var r=e[s].part;if(t+=(e[s].separator||"")+r,".."===r||"."===r||"this"===r){if(n.length>0)throw new m("Invalid path: "+t);".."===r?i++:this.isScoped=!0
}else n.push(r)}this.original=t,this.parts=n,this.string=n.join("."),this.depth=i,this.isSimple=1===e.length&&!this.isScoped&&0===i,this.stringModeValue=this.string}function l(e){this.type="PARTIAL_NAME",this.name=e.original}function c(e){this.type="DATA",this.id=e}function d(e){this.type="STRING",this.original=this.string=this.stringModeValue=e}function u(e){this.type="INTEGER",this.original=this.integer=e,this.stringModeValue=Number(e)}function h(e){this.type="BOOLEAN",this.bool=e,this.stringModeValue="true"===e
}function p(e){this.type="comment",this.comment=e}var f={},m=e;return f.ProgramNode=t,f.MustacheNode=n,f.PartialNode=i,f.BlockNode=s,f.ContentNode=a,f.HashNode=r,f.IdNode=o,f.PartialNameNode=l,f.DataNode=c,f.StringNode=d,f.IntegerNode=u,f.BooleanNode=h,f.CommentNode=p,f}(n),o=function(){var e,t=function(){function e(e,t){return{"left":"~"===e[2],"right":"~"===t[0]||"~"===t[1]}}function t(){this.yy={}}var n={"trace":function(){},"yy":{},"symbols_":{"error":2,"root":3,"statements":4,"EOF":5,"program":6,"simpleInverse":7,"statement":8,"openInverse":9,"closeBlock":10,"openBlock":11,"mustache":12,"partial":13,"CONTENT":14,"COMMENT":15,"OPEN_BLOCK":16,"inMustache":17,"CLOSE":18,"OPEN_INVERSE":19,"OPEN_ENDBLOCK":20,"path":21,"OPEN":22,"OPEN_UNESCAPED":23,"CLOSE_UNESCAPED":24,"OPEN_PARTIAL":25,"partialName":26,"partial_option0":27,"inMustache_repetition0":28,"inMustache_option0":29,"dataName":30,"param":31,"STRING":32,"INTEGER":33,"BOOLEAN":34,"hash":35,"hash_repetition_plus0":36,"hashSegment":37,"ID":38,"EQUALS":39,"DATA":40,"pathSegments":41,"SEP":42,"$accept":0,"$end":1},"terminals_":{"2":"error","5":"EOF","14":"CONTENT","15":"COMMENT","16":"OPEN_BLOCK","18":"CLOSE","19":"OPEN_INVERSE","20":"OPEN_ENDBLOCK","22":"OPEN","23":"OPEN_UNESCAPED","24":"CLOSE_UNESCAPED","25":"OPEN_PARTIAL","32":"STRING","33":"INTEGER","34":"BOOLEAN","38":"ID","39":"EQUALS","40":"DATA","42":"SEP"},"productions_":[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[35,1],[37,3],[26,1],[26,1],[26,1],[30,2],[21,1],[41,3],[41,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[36,1],[36,2]],"performAction":function(t,n,i,s,a,r){var o=r.length-1;
switch(a){case 1:return new s.ProgramNode(r[o-1]);case 2:return new s.ProgramNode([]);case 3:this.$=new s.ProgramNode([],r[o-1],r[o]);break;case 4:this.$=new s.ProgramNode(r[o-2],r[o-1],r[o]);break;case 5:this.$=new s.ProgramNode(r[o-1],r[o],[]);break;case 6:this.$=new s.ProgramNode(r[o]);break;case 7:this.$=new s.ProgramNode([]);break;case 8:this.$=new s.ProgramNode([]);break;case 9:this.$=[r[o]];break;case 10:r[o-1].push(r[o]),this.$=r[o-1];break;case 11:this.$=new s.BlockNode(r[o-2],r[o-1].inverse,r[o-1],r[o]);
break;case 12:this.$=new s.BlockNode(r[o-2],r[o-1],r[o-1].inverse,r[o]);break;case 13:this.$=r[o];break;case 14:this.$=r[o];break;case 15:this.$=new s.ContentNode(r[o]);break;case 16:this.$=new s.CommentNode(r[o]);break;case 17:this.$=new s.MustacheNode(r[o-1][0],r[o-1][1],r[o-2],e(r[o-2],r[o]));break;case 18:this.$=new s.MustacheNode(r[o-1][0],r[o-1][1],r[o-2],e(r[o-2],r[o]));break;case 19:this.$={"path":r[o-1],"strip":e(r[o-2],r[o])};break;case 20:this.$=new s.MustacheNode(r[o-1][0],r[o-1][1],r[o-2],e(r[o-2],r[o]));
break;case 21:this.$=new s.MustacheNode(r[o-1][0],r[o-1][1],r[o-2],e(r[o-2],r[o]));break;case 22:this.$=new s.PartialNode(r[o-2],r[o-1],e(r[o-3],r[o]));break;case 23:this.$=e(r[o-1],r[o]);break;case 24:this.$=[[r[o-2]].concat(r[o-1]),r[o]];break;case 25:this.$=[[r[o]],null];break;case 26:this.$=r[o];break;case 27:this.$=new s.StringNode(r[o]);break;case 28:this.$=new s.IntegerNode(r[o]);break;case 29:this.$=new s.BooleanNode(r[o]);break;case 30:this.$=r[o];break;case 31:this.$=new s.HashNode(r[o]);
break;case 32:this.$=[r[o-2],r[o]];break;case 33:this.$=new s.PartialNameNode(r[o]);break;case 34:this.$=new s.PartialNameNode(new s.StringNode(r[o]));break;case 35:this.$=new s.PartialNameNode(new s.IntegerNode(r[o]));break;case 36:this.$=new s.DataNode(r[o]);break;case 37:this.$=new s.IdNode(r[o]);break;case 38:r[o-2].push({"part":r[o],"separator":r[o-1]}),this.$=r[o-2];break;case 39:this.$=[{"part":r[o]}];break;case 42:this.$=[];break;case 43:r[o-1].push(r[o]);break;case 46:this.$=[r[o]];break;
case 47:r[o-1].push(r[o])}},"table":[{"3":1,"4":2,"5":[1,3],"8":4,"9":5,"11":6,"12":7,"13":8,"14":[1,9],"15":[1,10],"16":[1,12],"19":[1,11],"22":[1,13],"23":[1,14],"25":[1,15]},{"1":[3]},{"5":[1,16],"8":17,"9":5,"11":6,"12":7,"13":8,"14":[1,9],"15":[1,10],"16":[1,12],"19":[1,11],"22":[1,13],"23":[1,14],"25":[1,15]},{"1":[2,2]},{"5":[2,9],"14":[2,9],"15":[2,9],"16":[2,9],"19":[2,9],"20":[2,9],"22":[2,9],"23":[2,9],"25":[2,9]},{"4":20,"6":18,"7":19,"8":4,"9":5,"11":6,"12":7,"13":8,"14":[1,9],"15":[1,10],"16":[1,12],"19":[1,21],"20":[2,8],"22":[1,13],"23":[1,14],"25":[1,15]},{"4":20,"6":22,"7":19,"8":4,"9":5,"11":6,"12":7,"13":8,"14":[1,9],"15":[1,10],"16":[1,12],"19":[1,21],"20":[2,8],"22":[1,13],"23":[1,14],"25":[1,15]},{"5":[2,13],"14":[2,13],"15":[2,13],"16":[2,13],"19":[2,13],"20":[2,13],"22":[2,13],"23":[2,13],"25":[2,13]},{"5":[2,14],"14":[2,14],"15":[2,14],"16":[2,14],"19":[2,14],"20":[2,14],"22":[2,14],"23":[2,14],"25":[2,14]},{"5":[2,15],"14":[2,15],"15":[2,15],"16":[2,15],"19":[2,15],"20":[2,15],"22":[2,15],"23":[2,15],"25":[2,15]},{"5":[2,16],"14":[2,16],"15":[2,16],"16":[2,16],"19":[2,16],"20":[2,16],"22":[2,16],"23":[2,16],"25":[2,16]},{"17":23,"21":24,"30":25,"38":[1,28],"40":[1,27],"41":26},{"17":29,"21":24,"30":25,"38":[1,28],"40":[1,27],"41":26},{"17":30,"21":24,"30":25,"38":[1,28],"40":[1,27],"41":26},{"17":31,"21":24,"30":25,"38":[1,28],"40":[1,27],"41":26},{"21":33,"26":32,"32":[1,34],"33":[1,35],"38":[1,28],"41":26},{"1":[2,1]},{"5":[2,10],"14":[2,10],"15":[2,10],"16":[2,10],"19":[2,10],"20":[2,10],"22":[2,10],"23":[2,10],"25":[2,10]},{"10":36,"20":[1,37]},{"4":38,"8":4,"9":5,"11":6,"12":7,"13":8,"14":[1,9],"15":[1,10],"16":[1,12],"19":[1,11],"20":[2,7],"22":[1,13],"23":[1,14],"25":[1,15]},{"7":39,"8":17,"9":5,"11":6,"12":7,"13":8,"14":[1,9],"15":[1,10],"16":[1,12],"19":[1,21],"20":[2,6],"22":[1,13],"23":[1,14],"25":[1,15]},{"17":23,"18":[1,40],"21":24,"30":25,"38":[1,28],"40":[1,27],"41":26},{"10":41,"20":[1,37]},{"18":[1,42]},{"18":[2,42],"24":[2,42],"28":43,"32":[2,42],"33":[2,42],"34":[2,42],"38":[2,42],"40":[2,42]},{"18":[2,25],"24":[2,25]},{"18":[2,37],"24":[2,37],"32":[2,37],"33":[2,37],"34":[2,37],"38":[2,37],"40":[2,37],"42":[1,44]},{"21":45,"38":[1,28],"41":26},{"18":[2,39],"24":[2,39],"32":[2,39],"33":[2,39],"34":[2,39],"38":[2,39],"40":[2,39],"42":[2,39]},{"18":[1,46]},{"18":[1,47]},{"24":[1,48]},{"18":[2,40],"21":50,"27":49,"38":[1,28],"41":26},{"18":[2,33],"38":[2,33]},{"18":[2,34],"38":[2,34]},{"18":[2,35],"38":[2,35]},{"5":[2,11],"14":[2,11],"15":[2,11],"16":[2,11],"19":[2,11],"20":[2,11],"22":[2,11],"23":[2,11],"25":[2,11]},{"21":51,"38":[1,28],"41":26},{"8":17,"9":5,"11":6,"12":7,"13":8,"14":[1,9],"15":[1,10],"16":[1,12],"19":[1,11],"20":[2,3],"22":[1,13],"23":[1,14],"25":[1,15]},{"4":52,"8":4,"9":5,"11":6,"12":7,"13":8,"14":[1,9],"15":[1,10],"16":[1,12],"19":[1,11],"20":[2,5],"22":[1,13],"23":[1,14],"25":[1,15]},{"14":[2,23],"15":[2,23],"16":[2,23],"19":[2,23],"20":[2,23],"22":[2,23],"23":[2,23],"25":[2,23]},{"5":[2,12],"14":[2,12],"15":[2,12],"16":[2,12],"19":[2,12],"20":[2,12],"22":[2,12],"23":[2,12],"25":[2,12]},{"14":[2,18],"15":[2,18],"16":[2,18],"19":[2,18],"20":[2,18],"22":[2,18],"23":[2,18],"25":[2,18]},{"18":[2,44],"21":56,"24":[2,44],"29":53,"30":60,"31":54,"32":[1,57],"33":[1,58],"34":[1,59],"35":55,"36":61,"37":62,"38":[1,63],"40":[1,27],"41":26},{"38":[1,64]},{"18":[2,36],"24":[2,36],"32":[2,36],"33":[2,36],"34":[2,36],"38":[2,36],"40":[2,36]},{"14":[2,17],"15":[2,17],"16":[2,17],"19":[2,17],"20":[2,17],"22":[2,17],"23":[2,17],"25":[2,17]},{"5":[2,20],"14":[2,20],"15":[2,20],"16":[2,20],"19":[2,20],"20":[2,20],"22":[2,20],"23":[2,20],"25":[2,20]},{"5":[2,21],"14":[2,21],"15":[2,21],"16":[2,21],"19":[2,21],"20":[2,21],"22":[2,21],"23":[2,21],"25":[2,21]},{"18":[1,65]},{"18":[2,41]},{"18":[1,66]},{"8":17,"9":5,"11":6,"12":7,"13":8,"14":[1,9],"15":[1,10],"16":[1,12],"19":[1,11],"20":[2,4],"22":[1,13],"23":[1,14],"25":[1,15]},{"18":[2,24],"24":[2,24]},{"18":[2,43],"24":[2,43],"32":[2,43],"33":[2,43],"34":[2,43],"38":[2,43],"40":[2,43]},{"18":[2,45],"24":[2,45]},{"18":[2,26],"24":[2,26],"32":[2,26],"33":[2,26],"34":[2,26],"38":[2,26],"40":[2,26]},{"18":[2,27],"24":[2,27],"32":[2,27],"33":[2,27],"34":[2,27],"38":[2,27],"40":[2,27]},{"18":[2,28],"24":[2,28],"32":[2,28],"33":[2,28],"34":[2,28],"38":[2,28],"40":[2,28]},{"18":[2,29],"24":[2,29],"32":[2,29],"33":[2,29],"34":[2,29],"38":[2,29],"40":[2,29]},{"18":[2,30],"24":[2,30],"32":[2,30],"33":[2,30],"34":[2,30],"38":[2,30],"40":[2,30]},{"18":[2,31],"24":[2,31],"37":67,"38":[1,68]},{"18":[2,46],"24":[2,46],"38":[2,46]},{"18":[2,39],"24":[2,39],"32":[2,39],"33":[2,39],"34":[2,39],"38":[2,39],"39":[1,69],"40":[2,39],"42":[2,39]},{"18":[2,38],"24":[2,38],"32":[2,38],"33":[2,38],"34":[2,38],"38":[2,38],"40":[2,38],"42":[2,38]},{"5":[2,22],"14":[2,22],"15":[2,22],"16":[2,22],"19":[2,22],"20":[2,22],"22":[2,22],"23":[2,22],"25":[2,22]},{"5":[2,19],"14":[2,19],"15":[2,19],"16":[2,19],"19":[2,19],"20":[2,19],"22":[2,19],"23":[2,19],"25":[2,19]},{"18":[2,47],"24":[2,47],"38":[2,47]},{"39":[1,69]},{"21":56,"30":60,"31":70,"32":[1,57],"33":[1,58],"34":[1,59],"38":[1,28],"40":[1,27],"41":26},{"18":[2,32],"24":[2,32],"38":[2,32]}],"defaultActions":{"3":[2,2],"16":[2,1],"50":[2,41]},"parseError":function(e){throw new Error(e)
},"parse":function(e){function t(){var e;return e=n.lexer.lex()||1,"number"!=typeof e&&(e=n.symbols_[e]||e),e}var n=this,i=[0],s=[null],a=[],r=this.table,o="",l=0,c=0,d=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var u=this.lexer.yylloc;a.push(u);var h=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,f,m,g,v,y,b,w,x,k={};;){if(m=i[i.length-1],this.defaultActions[m]?g=this.defaultActions[m]:((null===p||"undefined"==typeof p)&&(p=t()),g=r[m]&&r[m][p]),"undefined"==typeof g||!g.length||!g[0]){var S="";
if(!d){x=[];for(y in r[m])this.terminals_[y]&&y>2&&x.push("'"+this.terminals_[y]+"'");S=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+x.join(", ")+", got '"+(this.terminals_[p]||p)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(S,{"text":this.lexer.match,"token":this.terminals_[p]||p,"line":this.lexer.yylineno,"loc":u,"expected":x})}}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+p);
switch(g[0]){case 1:i.push(p),s.push(this.lexer.yytext),a.push(this.lexer.yylloc),i.push(g[1]),p=null,f?(p=f,f=null):(c=this.lexer.yyleng,o=this.lexer.yytext,l=this.lexer.yylineno,u=this.lexer.yylloc,d>0&&d--);break;case 2:if(b=this.productions_[g[1]][1],k.$=s[s.length-b],k._$={"first_line":a[a.length-(b||1)].first_line,"last_line":a[a.length-1].last_line,"first_column":a[a.length-(b||1)].first_column,"last_column":a[a.length-1].last_column},h&&(k._$.range=[a[a.length-(b||1)].range[0],a[a.length-1].range[1]]),v=this.performAction.call(k,o,c,l,this.yy,g[1],s,a),"undefined"!=typeof v)return v;
b&&(i=i.slice(0,-1*b*2),s=s.slice(0,-1*b),a=a.slice(0,-1*b)),i.push(this.productions_[g[1]][0]),s.push(k.$),a.push(k._$),w=r[i[i.length-2]][i[i.length-1]],i.push(w);break;case 3:return!0}}return!0}},i=function(){var e={"EOF":1,"parseError":function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},"setInput":function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={"first_line":1,"first_column":0,"last_line":1,"last_column":0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this
},"input":function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},"unput":function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var i=this.match.split(/(?:\r\n?|\n)/g);
this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var s=this.yylloc.range;return this.yylloc={"first_line":this.yylloc.first_line,"last_line":this.yylineno+1,"first_column":this.yylloc.first_column,"last_column":n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[s[0],s[0]+this.yyleng-t]),this
},"more":function(){return this._more=!0,this},"less":function(e){this.unput(this.match.slice(e))},"pastInput":function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},"upcomingInput":function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},"showPosition":function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"
},"next":function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,i,s;this._more||(this.yytext="",this.match="");for(var a=this._currentRules(),r=0;r<a.length&&(n=this._input.match(this.rules[a[r]]),!n||t&&!(n[0].length>t[0].length)||(t=n,i=r,this.options.flex));r++);return t?(s=t[0].match(/(?:\r\n?|\n).*/g),s&&(this.yylineno+=s.length),this.yylloc={"first_line":this.yylloc.last_line,"last_line":this.yylineno+1,"first_column":this.yylloc.last_column,"last_column":s?s[s.length-1].length-s[s.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,a[i],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e?e:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{"text":"","token":null,"line":this.yylineno})
},"lex":function(){var e=this.next();return"undefined"!=typeof e?e:this.lex()},"begin":function(e){this.conditionStack.push(e)},"popState":function(){return this.conditionStack.pop()},"_currentRules":function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},"topState":function(){return this.conditionStack[this.conditionStack.length-2]},"pushState":function(e){this.begin(e)}};return e.options={},e.performAction=function(e,t,n,i){function s(e,n){return t.yytext=t.yytext.substr(e,t.yyleng-n)
}switch(n){case 0:if("\\\\"===t.yytext.slice(-2)?(s(0,1),this.begin("mu")):"\\"===t.yytext.slice(-1)?(s(0,1),this.begin("emu")):this.begin("mu"),t.yytext)return 14;break;case 1:return 14;case 2:return"\\"!==t.yytext.slice(-1)&&this.popState(),"\\"===t.yytext.slice(-1)&&s(0,1),14;case 3:return s(0,4),this.popState(),15;case 4:return 25;case 5:return 16;case 6:return 20;case 7:return 19;case 8:return 19;case 9:return 23;case 10:return 22;case 11:this.popState(),this.begin("com");break;case 12:return s(3,5),this.popState(),15;
case 13:return 22;case 14:return 39;case 15:return 38;case 16:return 38;case 17:return 42;case 18:break;case 19:return this.popState(),24;case 20:return this.popState(),18;case 21:return t.yytext=s(1,2).replace(/\\"/g,'"'),32;case 22:return t.yytext=s(1,2).replace(/\\'/g,"'"),32;case 23:return 40;case 24:return 34;case 25:return 34;case 26:return 33;case 27:return 38;case 28:return t.yytext=s(1,2),38;case 29:return"INVALID";case 30:return 5}},e.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s])))/,/^(?:false(?=([~}\s])))/,/^(?:-?[0-9]+(?=([~}\s])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],e.conditions={"mu":{"rules":[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30],"inclusive":!1},"emu":{"rules":[2],"inclusive":!1},"com":{"rules":[3],"inclusive":!1},"INITIAL":{"rules":[0,1,30],"inclusive":!0}},e
}();return n.lexer=i,t.prototype=n,n.Parser=t,new t}();return e=t}(),l=function(e,t){function n(e){return e.constructor===a.ProgramNode?e:(s.yy=a,s.parse(e))}var i={},s=e,a=t;return i.parser=s,i.parse=n,i}(o,r),c=function(e){function t(e){this.value=e}function n(){}var i,s=e.COMPILER_REVISION,a=e.REVISION_CHANGES,r=e.log;n.prototype={"nameLookup":function(e,t){var i,s;return 0===e.indexOf("depth")&&(i=!0),s=/^[0-9]+$/.test(t)?e+"["+t+"]":n.isValidJavaScriptVariableName(t)?e+"."+t:e+"['"+t+"']",i?"("+e+" && "+s+")":s
},"appendToBuffer":function(e){return this.environment.isSimple?"return "+e+";":{"appendToBuffer":!0,"content":e,"toString":function(){return"buffer += "+e+";"}}},"initializeBuffer":function(){return this.quotedString("")},"namespace":"Handlebars","compile":function(e,t,n,i){this.environment=e,this.options=t||{},r("debug",this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!n,this.context=n||{"programs":[],"environments":[],"aliases":{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={"list":[]},this.compileStack=[],this.inlineStack=[],this.compileChildren(e,t);
var s,a=e.opcodes;this.i=0;for(var o=a.length;this.i<o;this.i++)s=a[this.i],"DECLARE"===s.opcode?this[s.name]=s.value:this[s.opcode].apply(this,s.args),s.opcode!==this.stripNext&&(this.stripNext=!1);return this.pushSource(""),this.createFunctionContext(i)},"preamble":function(){var e=[];if(this.isChild)e.push("");else{var t=this.namespace,n="helpers = this.merge(helpers, "+t+".helpers);";this.environment.usePartial&&(n=n+" partials = this.merge(partials, "+t+".partials);"),this.options.data&&(n+=" data = data || {};"),e.push(n)
}e.push(this.environment.isSimple?"":", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=e},"createFunctionContext":function(e){var t=this.stackVars.concat(this.registers.list);if(t.length>0&&(this.source[1]=this.source[1]+", "+t.join(", ")),!this.isChild)for(var n in this.context.aliases)this.context.aliases.hasOwnProperty(n)&&(this.source[1]=this.source[1]+", "+n+"="+this.context.aliases[n]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.pushSource("return buffer;");
for(var i=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],o=0,l=this.environment.depths.list.length;l>o;o++)i.push("depth"+this.environment.depths.list[o]);var c=this.mergeSource();if(!this.isChild){var d=s,u=a[d];c="this.compilerInfo = ["+d+",'"+u+"'];\n"+c}if(e)return i.push(c),Function.apply(this,i);var h="function "+(this.name||"")+"("+i.join(",")+") {\n  "+c+"}";return r("debug",h+"\n\n"),h},"mergeSource":function(){for(var e,t="",n=0,i=this.source.length;i>n;n++){var s=this.source[n];
s.appendToBuffer?e=e?e+"\n    + "+s.content:s.content:(e&&(t+="buffer += "+e+";\n  ",e=void 0),t+=s+"\n  ")}return t},"blockValue":function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e),this.replaceStack(function(t){return e.splice(1,0,t),"blockHelperMissing.call("+e.join(", ")+")"})},"ambiguousBlockValue":function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e);var t=this.topStack();
e.splice(1,0,t),e[e.length-1]="options",this.pushSource("if (!"+this.lastHelper+") { "+t+" = blockHelperMissing.call("+e.join(", ")+"); }")},"appendContent":function(e){this.pendingContent&&(e=this.pendingContent+e),this.stripNext&&(e=e.replace(/^\s+/,"")),this.pendingContent=e},"strip":function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\s+$/,"")),this.stripNext="strip"},"append":function(){this.flushInline();var e=this.popStack();this.pushSource("if("+e+" || "+e+" === 0) { "+this.appendToBuffer(e)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")
},"appendEscaped":function(){this.context.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},"getContext":function(e){this.lastContext!==e&&(this.lastContext=e)},"lookupOnContext":function(e){this.push(this.nameLookup("depth"+this.lastContext,e,"context"))},"pushContext":function(){this.pushStackLiteral("depth"+this.lastContext)},"resolvePossibleLambda":function(){this.context.aliases.functionType='"function"',this.replaceStack(function(e){return"typeof "+e+" === functionType ? "+e+".apply(depth0) : "+e
})},"lookup":function(e){this.replaceStack(function(t){return t+" == null || "+t+" === false ? "+t+" : "+this.nameLookup(t,e,"context")})},"lookupData":function(){this.push("data")},"pushStringParam":function(e,t){this.pushStackLiteral("depth"+this.lastContext),this.pushString(t),"string"==typeof e?this.pushString(e):this.pushStackLiteral(e)},"emptyHash":function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.register("hashTypes","{}"),this.register("hashContexts","{}"))},"pushHash":function(){this.hash={"values":[],"types":[],"contexts":[]}
},"popHash":function(){var e=this.hash;this.hash=void 0,this.options.stringParams&&(this.register("hashContexts","{"+e.contexts.join(",")+"}"),this.register("hashTypes","{"+e.types.join(",")+"}")),this.push("{\n    "+e.values.join(",\n    ")+"\n  }")},"pushString":function(e){this.pushStackLiteral(this.quotedString(e))},"push":function(e){return this.inlineStack.push(e),e},"pushLiteral":function(e){this.pushStackLiteral(e)},"pushProgram":function(e){this.pushStackLiteral(null!=e?this.programExpression(e):null)
},"invokeHelper":function(e,t){this.context.aliases.helperMissing="helpers.helperMissing";var n=this.lastHelper=this.setupHelper(e,t,!0),i=this.nameLookup("depth"+this.lastContext,t,"context");this.push(n.name+" || "+i),this.replaceStack(function(e){return e+" ? "+e+".call("+n.callParams+") : helperMissing.call("+n.helperMissingParams+")"})},"invokeKnownHelper":function(e,t){var n=this.setupHelper(e,t);this.push(n.name+".call("+n.callParams+")")},"invokeAmbiguous":function(e,t){this.context.aliases.functionType='"function"',this.pushStackLiteral("{}");
var n=this.setupHelper(0,e,t),i=this.lastHelper=this.nameLookup("helpers",e,"helper"),s=this.nameLookup("depth"+this.lastContext,e,"context"),a=this.nextStack();this.pushSource("if ("+a+" = "+i+") { "+a+" = "+a+".call("+n.callParams+"); }"),this.pushSource("else { "+a+" = "+s+"; "+a+" = typeof "+a+" === functionType ? "+a+".call("+n.callParams+") : "+a+"; }")},"invokePartial":function(e){var t=[this.nameLookup("partials",e,"partial"),"'"+e+"'",this.popStack(),"helpers","partials"];this.options.data&&t.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+t.join(", ")+")")
},"assignToHash":function(e){var t,n,i=this.popStack();this.options.stringParams&&(n=this.popStack(),t=this.popStack());var s=this.hash;t&&s.contexts.push("'"+e+"': "+t),n&&s.types.push("'"+e+"': "+n),s.values.push("'"+e+"': ("+i+")")},"compiler":n,"compileChildren":function(e,t){for(var n,i,s=e.children,a=0,r=s.length;r>a;a++){n=s[a],i=new this.compiler;var o=this.matchExistingProgram(n);null==o?(this.context.programs.push(""),o=this.context.programs.length,n.index=o,n.name="program"+o,this.context.programs[o]=i.compile(n,t,this.context),this.context.environments[o]=n):(n.index=o,n.name="program"+o)
}},"matchExistingProgram":function(e){for(var t=0,n=this.context.environments.length;n>t;t++){var i=this.context.environments[t];if(i&&i.equals(e))return t}},"programExpression":function(e){if(this.context.aliases.self="this",null==e)return"self.noop";for(var t,n=this.environment.children[e],i=n.depths.list,s=[n.index,n.name,"data"],a=0,r=i.length;r>a;a++)t=i[a],s.push(1===t?"depth0":"depth"+(t-1));return(0===i.length?"self.program(":"self.programWithDepth(")+s.join(", ")+")"},"register":function(e,t){this.useRegister(e),this.pushSource(e+" = "+t+";")
},"useRegister":function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},"pushStackLiteral":function(e){return this.push(new t(e))},"pushSource":function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),e&&this.source.push(e)},"pushStack":function(e){this.flushInline();var t=this.incrStack();return e&&this.pushSource(t+" = "+e+";"),this.compileStack.push(t),t},"replaceStack":function(e){var n,i="",s=this.isInline();
if(s){var a=this.popStack(!0);if(a instanceof t)n=a.value;else{var r=this.stackSlot?this.topStackName():this.incrStack();i="("+this.push(r)+" = "+a+"),",n=this.topStack()}}else n=this.topStack();var o=e.call(this,n);return s?((this.inlineStack.length||this.compileStack.length)&&this.popStack(),this.push("("+i+o+")")):(/^stack/.test(n)||(n=this.nextStack()),this.pushSource(n+" = ("+i+o+");")),n},"nextStack":function(){return this.pushStack()},"incrStack":function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()
},"topStackName":function(){return"stack"+this.stackSlot},"flushInline":function(){var e=this.inlineStack;if(e.length){this.inlineStack=[];for(var n=0,i=e.length;i>n;n++){var s=e[n];s instanceof t?this.compileStack.push(s):this.pushStack(s)}}},"isInline":function(){return this.inlineStack.length},"popStack":function(e){var n=this.isInline(),i=(n?this.inlineStack:this.compileStack).pop();return!e&&i instanceof t?i.value:(n||this.stackSlot--,i)},"topStack":function(e){var n=this.isInline()?this.inlineStack:this.compileStack,i=n[n.length-1];
return!e&&i instanceof t?i.value:i},"quotedString":function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},"setupHelper":function(e,t,n){var i=[];this.setupParams(e,i,n);var s=this.nameLookup("helpers",t,"helper");return{"params":i,"name":s,"callParams":["depth0"].concat(i).join(", "),"helperMissingParams":n&&["depth0",this.quotedString(t)].concat(i).join(", ")}},"setupParams":function(e,t,n){var i,s,a,r=[],o=[],l=[];
r.push("hash:"+this.popStack()),s=this.popStack(),a=this.popStack(),(a||s)&&(a||(this.context.aliases.self="this",a="self.noop"),s||(this.context.aliases.self="this",s="self.noop"),r.push("inverse:"+s),r.push("fn:"+a));for(var c=0;e>c;c++)i=this.popStack(),t.push(i),this.options.stringParams&&(l.push(this.popStack()),o.push(this.popStack()));return this.options.stringParams&&(r.push("contexts:["+o.join(",")+"]"),r.push("types:["+l.join(",")+"]"),r.push("hashContexts:hashContexts"),r.push("hashTypes:hashTypes")),this.options.data&&r.push("data:data"),r="{"+r.join(",")+"}",n?(this.register("options",r),t.push("options")):t.push(r),t.join(", ")
}};for(var o="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),l=n.RESERVED_WORDS={},c=0,d=o.length;d>c;c++)l[o[c]]=!0;return n.isValidJavaScriptVariableName=function(e){return!n.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(e)?!0:!1
},i=n}(i),d=function(e,t,n,i){function s(){}function a(e,t){if(null==e||"string"!=typeof e&&e.constructor!==u.ProgramNode)throw new l("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);t=t||{},"data"in t||(t.data=!0);var n=c(e),i=(new s).compile(n,t);return(new d).compile(i,t)}function r(e,t,n){function i(){var i=c(e),a=(new s).compile(i,t),r=(new d).compile(a,t,void 0,!0);return n.template(r)}if(null==e||"string"!=typeof e&&e.constructor!==u.ProgramNode)throw new l("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);
t=t||{},"data"in t||(t.data=!0);var a;return function(e,t){return a||(a=i()),a.call(this,e,t)}}var o={},l=e,c=t.parse,d=n,u=i;return o.Compiler=s,s.prototype={"compiler":s,"disassemble":function(){for(var e,t,n,i=this.opcodes,s=[],a=0,r=i.length;r>a;a++)if(e=i[a],"DECLARE"===e.opcode)s.push("DECLARE "+e.name+"="+e.value);else{t=[];for(var o=0;o<e.args.length;o++)n=e.args[o],"string"==typeof n&&(n='"'+n.replace("\n","\\n")+'"'),t.push(n);s.push(e.opcode+" "+t.join(" "))}return s.join("\n")},"equals":function(e){var t=this.opcodes.length;
if(e.opcodes.length!==t)return!1;for(var n=0;t>n;n++){var i=this.opcodes[n],s=e.opcodes[n];if(i.opcode!==s.opcode||i.args.length!==s.args.length)return!1;for(var a=0;a<i.args.length;a++)if(i.args[a]!==s.args[a])return!1}if(t=this.children.length,e.children.length!==t)return!1;for(n=0;t>n;n++)if(!this.children[n].equals(e.children[n]))return!1;return!0},"guid":0,"compile":function(e,t){this.opcodes=[],this.children=[],this.depths={"list":[]},this.options=t;var n=this.options.knownHelpers;if(this.options.knownHelpers={"helperMissing":!0,"blockHelperMissing":!0,"each":!0,"if":!0,"unless":!0,"with":!0,"log":!0},n)for(var i in n)this.options.knownHelpers[i]=n[i];
return this.accept(e)},"accept":function(e){var t,n=e.strip||{};return n.left&&this.opcode("strip"),t=this[e.type](e),n.right&&this.opcode("strip"),t},"program":function(e){for(var t=e.statements,n=0,i=t.length;i>n;n++)this.accept(t[n]);return this.isSimple=1===i,this.depths.list=this.depths.list.sort(function(e,t){return e-t}),this},"compileProgram":function(e){var t,n=(new this.compiler).compile(e,this.options),i=this.guid++;this.usePartial=this.usePartial||n.usePartial,this.children[i]=n;for(var s=0,a=n.depths.list.length;a>s;s++)t=n.depths.list[s],2>t||this.addDepth(t-1);
return i},"block":function(e){var t=e.mustache,n=e.program,i=e.inverse;n&&(n=this.compileProgram(n)),i&&(i=this.compileProgram(i));var s=this.classifyMustache(t);"helper"===s?this.helperMustache(t,n,i):"simple"===s?(this.simpleMustache(t),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousMustache(t,n,i),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")
},"hash":function(e){var t,n,i=e.pairs;this.opcode("pushHash");for(var s=0,a=i.length;a>s;s++)t=i[s],n=t[1],this.options.stringParams?(n.depth&&this.addDepth(n.depth),this.opcode("getContext",n.depth||0),this.opcode("pushStringParam",n.stringModeValue,n.type)):this.accept(n),this.opcode("assignToHash",t[0]);this.opcode("popHash")},"partial":function(e){var t=e.partialName;this.usePartial=!0,e.context?this.ID(e.context):this.opcode("push","depth0"),this.opcode("invokePartial",t.name),this.opcode("append")
},"content":function(e){this.opcode("appendContent",e.string)},"mustache":function(e){var t=this.options,n=this.classifyMustache(e);"simple"===n?this.simpleMustache(e):"helper"===n?this.helperMustache(e):this.ambiguousMustache(e),this.opcode(e.escaped&&!t.noEscape?"appendEscaped":"append")},"ambiguousMustache":function(e,t,n){var i=e.id,s=i.parts[0],a=null!=t||null!=n;this.opcode("getContext",i.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("invokeAmbiguous",s,a)},"simpleMustache":function(e){var t=e.id;
"DATA"===t.type?this.DATA(t):t.parts.length?this.ID(t):(this.addDepth(t.depth),this.opcode("getContext",t.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},"helperMustache":function(e,t,n){var i=this.setupFullMustacheParams(e,t,n),s=e.id.parts[0];if(this.options.knownHelpers[s])this.opcode("invokeKnownHelper",i.length,s);else{if(this.options.knownHelpersOnly)throw new Error("You specified knownHelpersOnly, but used the unknown helper "+s);this.opcode("invokeHelper",i.length,s)
}},"ID":function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0];t?this.opcode("lookupOnContext",e.parts[0]):this.opcode("pushContext");for(var n=1,i=e.parts.length;i>n;n++)this.opcode("lookup",e.parts[n])},"DATA":function(e){if(this.options.data=!0,e.id.isScoped||e.id.depth)throw new l("Scoped data references are not supported: "+e.original);this.opcode("lookupData");for(var t=e.id.parts,n=0,i=t.length;i>n;n++)this.opcode("lookup",t[n])},"STRING":function(e){this.opcode("pushString",e.string)
},"INTEGER":function(e){this.opcode("pushLiteral",e.integer)},"BOOLEAN":function(e){this.opcode("pushLiteral",e.bool)},"comment":function(){},"opcode":function(e){this.opcodes.push({"opcode":e,"args":[].slice.call(arguments,1)})},"declare":function(e,t){this.opcodes.push({"opcode":"DECLARE","name":e,"value":t})},"addDepth":function(e){if(isNaN(e))throw new Error("EWOT");0!==e&&(this.depths[e]||(this.depths[e]=!0,this.depths.list.push(e)))},"classifyMustache":function(e){var t=e.isHelper,n=e.eligibleHelper,i=this.options;
if(n&&!t){var s=e.id.parts[0];i.knownHelpers[s]?t=!0:i.knownHelpersOnly&&(n=!1)}return t?"helper":n?"ambiguous":"simple"},"pushParams":function(e){for(var t,n=e.length;n--;)t=e[n],this.options.stringParams?(t.depth&&this.addDepth(t.depth),this.opcode("getContext",t.depth||0),this.opcode("pushStringParam",t.stringModeValue,t.type)):this[t.type](t)},"setupMustacheParams":function(e){var t=e.params;return this.pushParams(t),e.hash?this.hash(e.hash):this.opcode("emptyHash"),t},"setupFullMustacheParams":function(e,t,n){var i=e.params;
return this.pushParams(i),this.opcode("pushProgram",t),this.opcode("pushProgram",n),e.hash?this.hash(e.hash):this.opcode("emptyHash"),i}},o.precompile=a,o.compile=r,o}(n,l,c,r),u=function(e,t,n,i,s){var a,r=e,o=t,l=n.parser,c=n.parse,d=i.Compiler,u=i.compile,h=i.precompile,p=s,f=r.create,m=function(){var e=f();return e.compile=function(t,n){return u(t,n,e)},e.precompile=h,e.AST=o,e.Compiler=d,e.JavaScriptCompiler=p,e.Parser=l,e.parse=c,e};return r=m(),r.create=m,a=r}(a,r,l,d,c);return u}();define("handlebars-lib",function(e){return function(){var t;
return t||e.Handlebars}}(this)),define("plex/base/utils/formatters/DateTimeUtil",["underscore","moment","plex/base/utils/BaseClass","plex/base/adapters/LocalizerAdapter"],function(e,t,n,i){var s=n.extend({"formatHoursMinutes":function(e){var n=i.get(),s=t.duration(e),a=s.get("hours"),r=s.get("minutes"),o=s.get("seconds");return a&&r?n.t("{1} hr {2} min",a,r):a?n.t("{1} hr",a):r?n.t("{1} min",r):n.t("{1} sec",o)},"formatDate":function(e,n){return n||(n="MMMM D, YYYY"),e?t(e).format(n):""},"formatTimestamp":function(e,n){return n||(n="MMMM D, YYYY"),e?t.unix(e).format(n):""
},"formatDuration":function(n){if(!e.isNumber(n))return"0:00";var i=t.duration(n),s=i.seconds(),a=i.minutes(),r=i.hours(),o="";return o=10>s?":0"+s:":"+s,o=10>a&&r>0?"0"+a+o:a+o,r>0&&(o=r+":"+o),o},"formatMinutesRemaining":function(e){if(!e)return"";var t=i.get();if(60>e)return 1===e?t.t("{1} second left",e):t.t("{1} seconds left",e);var n=Math.ceil(e/60);return 1===n?t.t("{1} minute left",n):t.t("{1} minutes left",n)}});return new s}),define("plex/base/utils/formatters/MetadataUtil",["underscore","plex/base/utils/BaseClass","plex/base/adapters/LocalizerAdapter"],function(e,t,n){var i=t.extend({"formatBitrate":function(e,t){var n=["bps","kbps","Mbps","Gbps","Tbps"],i=parseInt(Math.floor(Math.log(e)/Math.log(1024)),10);
return(e/Math.pow(1024,i)).toFixed(t)+" "+n[i+1]},"formatVideoQuality":function(e){var t=e[1],n=e[2],i=this.formatBitrate(t,1500==t?1:0);return t>=1e3&&(i+=" "+n+"p"),i},"formatBytes":function(e){var t=["B","KB","MB","GB","TB"],n=parseInt(Math.floor(Math.log(e)/Math.log(1024)),10);return(e/Math.pow(1024,n)).toFixed(2)+" "+t[n]},"formatVideoLevel":function(e){return e=parseInt(e,10),(e/10).toFixed(1)},"formatResolution":function(t){if(!t)return"";if("4k"===t)return"4K";var n=parseInt(t,10);return e.isNaN(n)?t.toUpperCase():t+"p"
},"formatAudioCodec":function(e){return e?"dca"===e?"DTS":e.toUpperCase():""},"formatAudioChannels":function(e){if(e=parseInt(e,10),!e)return"";var t=n.get();return 2>e?t.t("Mono"):3>e?t.t("Stereo"):""+(e-1)+".1"}});return new i}),define("handlebars",["underscore","handlebars-lib","moment","plex/base/utils/formatters/StringUtil","plex/base/utils/formatters/DateTimeUtil","plex/base/utils/formatters/MetadataUtil","plex/base/adapters/LocalizerAdapter"],function(e,t,n,i,s,a,r){t.registerHelper("if_eq",function(e,t,n){return e==t?n.fn(this):n.inverse(this)
}),t.registerHelper("if_neq",function(e,t,n){return e!=t?n.fn(this):n.inverse(this)}),t.registerHelper("t",function(){var e=r.get(),n=[].splice.call(arguments,0,arguments.length-1);return new t.SafeString(e.t.apply(e,n))}),t.registerHelper("csl",function(e){return e.join(", ")}),t.registerHelper("encodeUrl",function(e){return encodeURIComponent(e||"")}),t.registerHelper("tags",function(t){return e.pluck(t,"tag").join(",")});var o=[{"util":i,"helpers":["truncate","truncateMiddle","formatLabel","formatBoolean","upperCase","getLastSegment"]},{"util":a,"helpers":["formatBitrate","formatVideoQuality","formatBytes","formatVideoLevel","formatResolution","formatAudioCodec","formatAudioChannels"]},{"util":s,"helpers":["formatDate","formatTimestamp","formatDuration"]}];
return e.each(o,function(n){e.each(n.helpers,function(i){t.registerHelper(i,function(){return n.util[i].apply(n.util,e.initial(arguments))})})}),t.registerHelper("partial",function(n,i){var s=t.partials[n],a=i.hash.context?e.extend({},i.hash.context,i.hash):e.extend({},this,i.hash);return new t.SafeString(s(a))}),t}),define("text",["module"],function(e){var t,n,i,s,a,r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],o=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,l=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,c="undefined"!=typeof location&&location.href,d=c&&location.protocol&&location.protocol.replace(/\:/,""),u=c&&location.hostname,h=c&&(location.port||void 0),p={},f=e.config&&e.config()||{};
return t={"version":"2.0.10","strip":function(e){if(e){e=e.replace(o,"");var t=e.match(l);t&&(e=t[1])}else e="";return e},"jsEscape":function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},"createXhr":f.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){n=r[t];
try{e=new ActiveXObject(n)}catch(i){}if(e){r=[n];break}}return e},"parseName":function(e){var t,n,i,s=!1,a=e.indexOf("."),r=0===e.indexOf("./")||0===e.indexOf("../");return-1!==a&&(!r||a>1)?(t=e.substring(0,a),n=e.substring(a+1,e.length)):t=e,i=n||t,a=i.indexOf("!"),-1!==a&&(s="strip"===i.substring(a+1),i=i.substring(0,a),n?n=i:t=i),{"moduleName":t,"ext":n,"strip":s}},"xdRegExp":/^((\w+)\:)?\/\/([^\/\\]+)/,"useXhr":function(e,n,i,s){var a,r,o,l=t.xdRegExp.exec(e);return l?(a=l[2],r=l[3],r=r.split(":"),o=r[1],r=r[0],!(a&&a!==n||r&&r.toLowerCase()!==i.toLowerCase()||(o||r)&&o!==s)):!0
},"finishLoad":function(e,n,i,s){i=n?t.strip(i):i,f.isBuild&&(p[e]=i),s(i)},"load":function(e,n,i,s){if(s.isBuild&&!s.inlineText)return void i();f.isBuild=s.isBuild;var a=t.parseName(e),r=a.moduleName+(a.ext?"."+a.ext:""),o=n.toUrl(r),l=f.useXhr||t.useXhr;return 0===o.indexOf("empty:")?void i():void(!c||l(o,d,u,h)?t.get(o,function(n){t.finishLoad(e,a.strip,n,i)},function(e){i.error&&i.error(e)}):n([r],function(e){t.finishLoad(a.moduleName+"."+a.ext,a.strip,e,i)}))},"write":function(e,n,i){if(p.hasOwnProperty(n)){var s=t.jsEscape(p[n]);
i.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},"writeFile":function(e,n,i,s,a){var r=t.parseName(n),o=r.ext?"."+r.ext:"",l=r.moduleName+o,c=i.toUrl(r.moduleName+o)+".js";t.load(l,i,function(){var n=function(e){return s(c,e)};n.asModule=function(e,t){return s.asModule(e,c,t)},t.write(e,l,n,a)},a)}},"node"===f.env||!f.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(n=require.nodeRequire("fs"),t.get=function(e,t,i){try{var s=n.readFileSync(e,"utf8");
0===s.indexOf("\ufeff")&&(s=s.substring(1)),t(s)}catch(a){i(a)}}):"xhr"===f.env||!f.env&&t.createXhr()?t.get=function(e,n,i,s){var a,r=t.createXhr();if(r.open("GET",e,!0),s)for(a in s)s.hasOwnProperty(a)&&r.setRequestHeader(a.toLowerCase(),s[a]);f.onXhr&&f.onXhr(r,e),r.onreadystatechange=function(){var t,s;4===r.readyState&&(t=r.status,t>399&&600>t?(s=new Error(e+" HTTP status: "+t),s.xhr=r,i(s)):n(r.responseText),f.onXhrComplete&&f.onXhrComplete(r,e))},r.send(null)}:"rhino"===f.env||!f.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var n,i,s="utf-8",a=new java.io.File(e),r=java.lang.System.getProperty("line.separator"),o=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(a),s)),l="";
try{for(n=new java.lang.StringBuffer,i=o.readLine(),i&&i.length()&&65279===i.charAt(0)&&(i=i.substring(1)),null!==i&&n.append(i);null!==(i=o.readLine());)n.append(r),n.append(i);l=String(n.toString())}finally{o.close()}t(l)}:("xpconnect"===f.env||!f.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(i=Components.classes,s=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),a="@mozilla.org/windows-registry-key;1"in i,t.get=function(e,t){var n,r,o,l={};
a&&(e=e.replace(/\//g,"\\")),o=new FileUtils.File(e);try{n=i["@mozilla.org/network/file-input-stream;1"].createInstance(s.nsIFileInputStream),n.init(o,1,0,!1),r=i["@mozilla.org/intl/converter-input-stream;1"].createInstance(s.nsIConverterInputStream),r.init(n,"utf-8",n.available(),s.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),r.readString(n.available(),l),r.close(),n.close(),t(l.value)}catch(c){throw new Error((o&&o.path||"")+": "+c)}}),t}),define("hb",["underscore","handlebars-lib","text"],function(e,t,n){var i={},s=function(s,a,r,o){if(o.isBuild&&"undefined"!=typeof process&&process.versions&&process.versions.node){var l=require.nodeRequire("fs"),c=e.chain(o.templatePathPrefixs).map(function(e){return e+s+".tpl"
}).filter(function(e){return l.existsSync(e)}).map(function(e){return l.readFileSync(e,"utf8")}).first().value(),d=t.precompile(c);i[s]=d,r(d)}else n.get(a.toUrl(s+".tpl"),function(e){var n=t.compile(e);r(n)})},a=function(e,t,n){if(t in i){var s=i[t];n('define("'+e+"!"+t+'", ["handlebars"], function (Handlebars){return Handlebars.template('+s+");});\n")}},r=function(e,t){return".tpl"==e.substr(e.length-4,4)&&(e=e.substr(0,e.length-4)),t(e)};return{"load":s,"write":a,"normalize":r}}),define("hb!templates/desktop/partials/Setting",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(){return"advanced-setting"
}function r(e,t){var i,s,a,r="";return r+='\n    <label class="control-label" for="input_',(i=n.id)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.id,i=typeof i===k?i.call(e,{"hash":{},"data":t}):i),r+=x(i),(i=n.idSuffix)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.idSuffix,i=typeof i===k?i.call(e,{"hash":{},"data":t}):i),r+=x(i)+'">\n      <input type="checkbox" id="input_',(i=n.id)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.id,i=typeof i===k?i.call(e,{"hash":{},"data":t}):i),r+=x(i),(i=n.idSuffix)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.idSuffix,i=typeof i===k?i.call(e,{"hash":{},"data":t}):i),r+=x(i)+'" name="',(i=n.id)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.id,i=typeof i===k?i.call(e,{"hash":{},"data":t}):i),r+=x(i)+'" value="1" ',i=n["if"].call(e,e&&e.value,{"hash":{},"inverse":S.noop,"fn":S.program(4,o,t),"data":t}),(i||0===i)&&(r+=i),r+="> ",a={"hash":{},"data":t},r+=x((i=n.t||e&&e.t,i?i.call(e,e&&e.label,a):w.call(e,"t",e&&e.label,a)))+"\n    </label>\n\n    ",s=n["if"].call(e,e&&e.summary,{"hash":{},"inverse":S.noop,"fn":S.program(6,l,t),"data":t}),(s||0===s)&&(r+=s),r+="\n  "
}function o(){return"checked"}function l(e,t){var i,s,a="";return a+='\n      <p class="help-block">',s={"hash":{},"data":t},a+=x((i=n.t||e&&e.t,i?i.call(e,e&&e.summary,s):w.call(e,"t",e&&e.summary,s)))+"</p>\n    "}function c(e,t){var i,s,a,r="";return r+='\n    <label class="control-label" for="input_',(i=n.id)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.id,i=typeof i===k?i.call(e,{"hash":{},"data":t}):i),r+=x(i),(i=n.idSuffix)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.idSuffix,i=typeof i===k?i.call(e,{"hash":{},"data":t}):i),r+=x(i)+'">',a={"hash":{},"data":t},r+=x((i=n.t||e&&e.t,i?i.call(e,e&&e.label,a):w.call(e,"t",e&&e.label,a)))+"</label>\n\n    ",s=n["if"].call(e,e&&e.enumValues,{"hash":{},"inverse":S.program(13,p,t),"fn":S.program(9,d,t),"data":t}),(s||0===s)&&(r+=s),r+="\n\n    ",s=n["if"].call(e,e&&e.summary,{"hash":{},"inverse":S.noop,"fn":S.program(6,l,t),"data":t}),(s||0===s)&&(r+=s),r+="\n  "
}function d(e,t){var i,s="";return s+='\n      <select id="input_',(i=n.id)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.id,i=typeof i===k?i.call(e,{"hash":{},"data":t}):i),s+=x(i),(i=n.idSuffix)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.idSuffix,i=typeof i===k?i.call(e,{"hash":{},"data":t}):i),s+=x(i)+'" name="',(i=n.id)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.id,i=typeof i===k?i.call(e,{"hash":{},"data":t}):i),s+=x(i)+'">\n        ',i=n.each.call(e,e&&e.enumValues,{"hash":{},"inverse":S.noop,"fn":S.programWithDepth(10,u,t,e),"data":t}),(i||0===i)&&(s+=i),s+="\n      </select>\n    "
}function u(e,t,i){var s,a,r,o="";return o+='\n          <option value="',(s=n.value)?s=s.call(e,{"hash":{},"data":t}):(s=e&&e.value,s=typeof s===k?s.call(e,{"hash":{},"data":t}):s),o+=x(s)+'"',r={"hash":{},"inverse":S.noop,"fn":S.program(11,h,t),"data":t},s=n.if_eq||e&&e.if_eq,a=s?s.call(e,e&&e.value,i&&i.value,r):w.call(e,"if_eq",e&&e.value,i&&i.value,r),(a||0===a)&&(o+=a),o+=">",r={"hash":{},"data":t},o+=x((s=n.t||e&&e.t,s?s.call(e,e&&e.label,r):w.call(e,"t",e&&e.label,r)))+"</option>\n        "
}function h(){return' selected="selected"'}function p(e,t){var i,s,a,r="";return r+='\n      <input type="',a={"hash":{},"inverse":S.program(16,m,t),"fn":S.program(14,f,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,e&&e.option,"hidden",a):w.call(e,"if_eq",e&&e.option,"hidden",a),(s||0===s)&&(r+=s),r+='" id="input_',(s=n.id)?s=s.call(e,{"hash":{},"data":t}):(s=e&&e.id,s=typeof s===k?s.call(e,{"hash":{},"data":t}):s),r+=x(s),(s=n.idSuffix)?s=s.call(e,{"hash":{},"data":t}):(s=e&&e.idSuffix,s=typeof s===k?s.call(e,{"hash":{},"data":t}):s),r+=x(s)+'" class="form-control" name="',(s=n.id)?s=s.call(e,{"hash":{},"data":t}):(s=e&&e.id,s=typeof s===k?s.call(e,{"hash":{},"data":t}):s),r+=x(s)+'" value="',(s=n.value)?s=s.call(e,{"hash":{},"data":t}):(s=e&&e.value,s=typeof s===k?s.call(e,{"hash":{},"data":t}):s),r+=x(s)+'">\n    '
}function f(){return"password"}function m(){return"text"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var g,v,y,b="",w=n.helperMissing,x=this.escapeExpression,k="function",S=this;return b+='<div class="form-group ',g=n["if"].call(t,t&&t.advanced,{"hash":{},"inverse":S.noop,"fn":S.program(1,a,s),"data":s}),(g||0===g)&&(b+=g),b+='">\n  ',y={"hash":{},"inverse":S.program(8,c,s),"fn":S.program(3,r,s),"data":s},g=n.if_eq||t&&t.if_eq,v=g?g.call(t,t&&t.type,"bool",y):w.call(t,"if_eq",t&&t.type,"bool",y),(v||0===v)&&(b+=v),b+="\n</div>\n"
})}),define("hb!templates/desktop/partials/LockableTagInput",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(){return" locked"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var r,o,l,c="",d="function",u=this.escapeExpression,h=n.helperMissing,p=this;return c+='<div class="form-group">\n  <label for="lockable-',(r=n.name)?r=r.call(t,{"hash":{},"data":s}):(r=t&&t.name,r=typeof r===d?r.call(t,{"hash":{},"data":s}):r),c+=u(r)+'">',l={"hash":{},"data":s},c+=u((r=n.t||t&&t.t,r?r.call(t,t&&t.label,l):h.call(t,"t",t&&t.label,l)))+'</label>\n  <div class="input-group select2-bootstrap-prepend">\n    <a href="#" data-field="',(o=n.name)?o=o.call(t,{"hash":{},"data":s}):(o=t&&t.name,o=typeof o===d?o.call(t,{"hash":{},"data":s}):o),c+=u(o)+'" class="input-group-addon edit-lock-addon',o=n["if"].call(t,t&&t.locked,{"hash":{},"inverse":p.noop,"fn":p.program(1,a,s),"data":s}),(o||0===o)&&(c+=o),c+='"><i class="glyphicon lock"></i></a>\n    <input type="hidden" id="lockable-',(o=n.name)?o=o.call(t,{"hash":{},"data":s}):(o=t&&t.name,o=typeof o===d?o.call(t,{"hash":{},"data":s}):o),c+=u(o)+'" class="form-control lockable-field tag-input-hidden" data-name="',(o=n.name)?o=o.call(t,{"hash":{},"data":s}):(o=t&&t.name,o=typeof o===d?o.call(t,{"hash":{},"data":s}):o),c+=u(o)+'" value="',l={"hash":{},"data":s},c+=u((r=n.tags||t&&t.tags,r?r.call(t,t&&t.value,l):h.call(t,"tags",t&&t.value,l)))+'">\n  </div>\n</div>'
})}),define("hb!templates/desktop/partials/LockableTextInput",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(){return" locked"}function r(e,t){var i,s="";return s+='\n    <textarea class="form-control lockable-field" id="lockable-',(i=n.name)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.name,i=typeof i===p?i.call(e,{"hash":{},"data":t}):i),s+=f(i)+'" name="',(i=n.name)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.name,i=typeof i===p?i.call(e,{"hash":{},"data":t}):i),s+=f(i)+'"',i=n["if"].call(e,e&&e.rows,{"hash":{},"inverse":m.noop,"fn":m.program(4,o,t),"data":t}),(i||0===i)&&(s+=i),s+=">",(i=n.value)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.value,i=typeof i===p?i.call(e,{"hash":{},"data":t}):i),s+=f(i)+"</textarea>\n    "
}function o(e,t){var i,s="";return s+=' rows="',(i=n.rows)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.rows,i=typeof i===p?i.call(e,{"hash":{},"data":t}):i),s+=f(i)+'"'}function l(e,t){var i,s="";return s+='\n    <input type="text" id="lockable-',(i=n.name)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.name,i=typeof i===p?i.call(e,{"hash":{},"data":t}):i),s+=f(i)+'" class="form-control lockable-field" name="',(i=n.name)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.name,i=typeof i===p?i.call(e,{"hash":{},"data":t}):i),s+=f(i)+'" value="',(i=n.value)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.value,i=typeof i===p?i.call(e,{"hash":{},"data":t}):i),s+=f(i)+'">\n    '
}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var c,d,u,h="",p="function",f=this.escapeExpression,m=this,g=n.helperMissing;return h+='<div class="form-group">\n  <label for="lockable-',(c=n.name)?c=c.call(t,{"hash":{},"data":s}):(c=t&&t.name,c=typeof c===p?c.call(t,{"hash":{},"data":s}):c),h+=f(c)+'">',u={"hash":{},"data":s},h+=f((c=n.t||t&&t.t,c?c.call(t,t&&t.label,u):g.call(t,"t",t&&t.label,u)))+'</label>\n  <div class="input-group">\n    <a href="#" data-field="',(d=n.name)?d=d.call(t,{"hash":{},"data":s}):(d=t&&t.name,d=typeof d===p?d.call(t,{"hash":{},"data":s}):d),h+=f(d)+'" class="input-group-addon edit-lock-addon',d=n["if"].call(t,t&&t.locked,{"hash":{},"inverse":m.noop,"fn":m.program(1,a,s),"data":s}),(d||0===d)&&(h+=d),h+='"><i class="glyphicon lock"></i></a>\n    ',u={"hash":{},"inverse":m.program(6,l,s),"fn":m.program(3,r,s),"data":s},c=n.if_eq||t&&t.if_eq,d=c?c.call(t,t&&t.type,"textarea",u):g.call(t,"if_eq",t&&t.type,"textarea",u),(d||0===d)&&(h+=d),h+="\n  </div>\n</div>"
})}),define("hb!templates/desktop/partials/ConnectError",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s,a="";return a+='\n  <h4 class="server-connect-error-header">',s={"hash":{},"data":t},a+=m((i=n.t||e&&e.t,i?i.call(e,"Problem Connecting to Plex",s):f.call(e,"t","Problem Connecting to Plex",s)))+'</h4>\n  <p class="text-muted">',s={"hash":{},"data":t},a+=m((i=n.t||e&&e.t,i?i.call(e,"Plex was unable to authenticate your server. Please sign your server out and try again.",s):f.call(e,"t","Plex was unable to authenticate your server. Please sign your server out and try again.",s)))+"</p>\n"
}function r(e,t){var i,s,a,r="";return a={"hash":{},"inverse":g.program(6,l,t),"fn":g.program(4,o,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,e&&e.mappingError,"myplexgone",a):f.call(e,"if_eq",e&&e.mappingError,"myplexgone",a),(s||0===s)&&(r+=s),r+="\n"}function o(e,t){var i,s,a="";return a+='\n  <h4 class="server-connect-error-header">',s={"hash":{},"data":t},a+=m((i=n.t||e&&e.t,i?i.call(e,"Problem Connecting to Plex",s):f.call(e,"t","Problem Connecting to Plex",s)))+'</h4>\n  <p class="text-muted">',s={"hash":{},"data":t},a+=m((i=n.t||e&&e.t,i?i.call(e,"Your server was unable to reach Plex. Please ensure that the computer or device running your server can access the internet.",s):f.call(e,"t","Your server was unable to reach Plex. Please ensure that the computer or device running your server can access the internet.",s)))+"</p>\n"
}function l(e,t){var i,s,a="";return a+='\n  <h4 class="server-connect-error-header">',s={"hash":{},"data":t},a+=m((i=n.t||e&&e.t,i?i.call(e,"Signed in to Plex",s):f.call(e,"t","Signed in to Plex",s)))+'</h4>\n  <p class="text-muted">',s={"hash":{},"data":t},a+=m((i=n.t||e&&e.t,i?i.call(e,"You have successfully signed your server in to Plex, but we were unable to reach it from outside your network.",s):f.call(e,"t","You have successfully signed your server in to Plex, but we were unable to reach it from outside your network.",s)))+"</p>\n"
}function c(e,t){var i,s,a="";return a+='\n  <p class="text-muted">',s={"hash":{},"data":t},a+=m((i=n.t||e&&e.t,i?i.call(e,"If you skip this step you will not be able to share or stream media outside your home. If you change your mind later, you can adjust this in Settings.",s):f.call(e,"t","If you skip this step you will not be able to share or stream media outside your home. If you change your mind later, you can adjust this in Settings.",s)))+"</p>\n"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};
var d,u,h,p="",f=n.helperMissing,m=this.escapeExpression,g=this;return h={"hash":{},"inverse":g.program(3,r,s),"fn":g.program(1,a,s),"data":s},d=n.if_eq||t&&t.if_eq,u=d?d.call(t,t&&t.mappingError,"badauth",h):f.call(t,"if_eq",t&&t.mappingError,"badauth",h),(u||0===u)&&(p+=u),p+="\n\n",h={"hash":{},"inverse":g.noop,"fn":g.program(8,c,s),"data":s},d=n.if_neq||t&&t.if_neq,u=d?d.call(t,t&&t.context,"settings",h):f.call(t,"if_neq",t&&t.context,"settings",h),(u||0===u)&&(p+=u),p+='\n\n<p class="text-muted">',h={"hash":{},"data":s},p+=m((d=n.t||t&&t.t,d?d.call(t,"If you would like to enable this now, you will need to configure your router or firewall to allow Plex to contact your server. Please refer to our {1}Connecting a Server{2} article for more information.","<a href='http://support.plex.tv/hc/en-us/articles/200484543-Connecting-a-Server' target='_blank'>","</a>",h):f.call(t,"t","If you would like to enable this now, you will need to configure your router or firewall to allow Plex to contact your server. Please refer to our {1}Connecting a Server{2} article for more information.","<a href='http://support.plex.tv/hc/en-us/articles/200484543-Connecting-a-Server' target='_blank'>","</a>",h)))+"</p>\n"
})}),define("hb!templates/desktop/partials/Terms",["handlebars"],function(e){return e.template(function(e,t,n,i,s){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{},'<p>\n  Thank you for using Plex!  By accessing, using, downloading, or visiting any Plex \u201cService(s)\u201d, which includes the Plex website, Plex software and products described <a href="https://plex.tv/products" target="_blank">here</a>, and any other products or materials provided by Plex, you agree to the terms (\u201cTerms\u201d) listed in this agreement (\u201cAgreement\u201d). Plex reserves the right to amend these Terms at any time and without notice. Any revisions to the Terms will be posted on the Plex website. By continuing to access or use the Services, you accept any changes or revisions to the Terms. Plex reserves the right to amend these Terms at any time and without notice. Any revisions to the Terms will be posted on the Plex website. By continuing to access or use the Services, you accept any changes or revisions to the Terms.\n</p>\n\n<h4>Plex Software</h4>\n<ol>\n  <li>Plex gives you a personal, worldwide, royalty-free, revocable, non-transferable, non-sublicensable, and non-exclusive license to use the software provided to you by Plex as part of the Services (\u201cSoftware\u201d). This license is for the sole purpose of enabling you to use and enjoy the benefit of the Services in the manner permitted by these Terms.</li>\n  <li>The Software includes certain executable modules that Plex has licensed from third party providers (\u201cThird Party Components\u201d) that may be subject to different end user license terms as specified in the license agreement(s) provided with such Third Party Components.</li>\n  <li>You may not, or allow anyone else to, directly or indirectly to: (1) copy, modify, distribute, sell, or lease any part of the Software; (2) reverse engineer, disassemble, decompile, or otherwise attempt to discover the source code or structure, sequence, and/or organization of all or any part of the Software, unless laws prohibit those restrictions or you have our written permission; (3) rent, lease, or use the Software for timesharing or service bureau purposes; (4) develop any improvement, modification, or derivative works of the Software, or include any portion thereof in any other product, software, work, equipment, or item (except that you may customize and/or modify the Software only as set forth in the documentation or as authorized in any license agreement of Plex\u2019s third party licensors and applicable to Third Party Components); or (5) allow the transfer, transmission, export, or re-export of the Software or any portion thereof or any technical data associated with any Software.</li>\n  <li>You shall not incorporate any of Plex\u2019s Software or any part thereof into any other product(s) or use the proprietary software in any manner that would cause the proprietary software to become subject to any \u201copen source license\u201d that would impose obligations on Plex\u2019s use of the proprietary software or impair any rights of Plex or third parties thereto.</li>\n  <li>You shall maintain and shall not remove nor obscure any proprietary notices on the Software, and shall reproduce such notices exactly on all permitted copies of the Software.</li>\n  <li>You may reverse engineer the Software solely (1) as permitted by applicable law, or (2) for the purpose of debugging modifications made by you to certain third party files in source code format that are licensed under the GNU Lesser General Public License (LGPL) or under the GNU General Public License diversion 2 (GPL2) and only provided that you have made, prior to any such reverse engineering permitted under this sentence, unsuccessful prior reasonable good faith efforts to debug such modifications using techniques other than the reverse engineering of the Software.</li>\n  <li>As between the parties and except as otherwise provided in any license agreement for Third Party Components, Plex shall own all title, ownership rights, and intellectual property rights in and to the Software, and any copies or derivative works thereof, except that by downloading the Software, you retain any title that you may own in and to the recording media on which the Software is recorded.</li>\n  <li>You understand that Plex or its licensors may modify or discontinue offering the Services at any time.</li>\n  <li>You shall not make, or assist others in making, any use of data adapters or similar technologies used by or with the Services that are designed to receive and use data from Plex, its third party data providers, and their affiliates and third parties, other than to receive and use such data in accordance with these Terms and your agreement with the third party data providers, and their affiliates and third parties, including without limitation any data passing through the Services or otherwise effectively made available by any Service through an API, a download, a database, or the like.</li>\n  <li>This Agreement does not entitle you to any support, upgrades, patches, enhancements, or \ufb01xes (collectively, "Support") for the Services. Any such Support for the Services that may be made available by Plex, in its sole discretion, shall become part of the Services and will be subject to these Terms.</li>\n</ol>\n\n<h4>Data</h4>\n<p>\n  Data provided by Plex or other third party data providers may be delayed or unavailable as specified by Plex or such third party data providers. Plex does not verify any data provided by Plex or other third party data providers and disclaims any obligation to do so. Plex, its third party data providers, and each of their affiliates and business partners: (1) expressly disclaim the availability, accuracy, adequacy, or completeness of any data or third party data provider, and (2) shall not be liable for any errors, omissions, or other defects in, unavailability of, delays or interruptions in such data or third party data provider.\n</p>\n\n<h4>Acceptable Use</h4>\n<ol>\n  <li>\n    You may not, or allow anyone else to, use any of the Services to do the following:\n    <ol>\n      <li>Infringe the intellectual property rights, proprietary rights, or rights of publicity or privacy of any third party;</li>\n      <li>Violate any law, statute, ordinance, or regulation, or perform any other action that would incur civil liability or constitute a crime;</li>\n      <li>Disseminate, transfer or store information or materials in any form or format that is harmful, threatening, abusive, harassing, tortuous, defamatory, vulgar, obscene, libelous, or otherwise objectionable, or that otherwise violate any law or right of any third party; or</li>\n      <li>Disseminate any software viruses or any other computer code, files, programs, or the like that may without limitation interrupt, destroy, or limit the functionality of any computer software or hardware or telecommunications equipment, violate the security of any computer network, or the like.</li>\n    </ol>\n  </li>\n  <li>If the occurrence of any prohibited use comes to our attention, we reserve the right to disable any accounts associated with prohibited use or otherwise terminate your access to the Services.</li>\n</ol>\n\n<h4>Your Content</h4>\n<ol>\n  <li>You continue to retain any ownership rights you have in content you make available via the Services, or otherwise use in conjunction with the Services. However, by using the Services with particular content, for example by using the Services to share particular content or access particular content, you grant to Plex (and to each of the third parties with whom we work to provide you with the Services) a worldwide license to reproduce, modify, create derivative works, transmit, publish, publicly perform, publicly display, distribute, and otherwise use the particular content and metadata associated with the content, such as poster images. The rights you grant us in this license are only for the limited purpose of providing you with our Services. You may not use the Services in connection with any content for which you do not have the right to grant us this license.</li>\n  <li>The Services may include features that allow you to share your content with others. Please be careful when choosing to share content with other users; Plex is not responsible for how others use your content. Additionally, you hereby grant to any user with whom you share content a non-exclusive license to access the content through the Service, and to use, reproduce in copies, distribute, display and perform the shared content as permitted through the functionality of the Service and under this Agreement.\xa0You may not share any content with others via the Services if you do not have the right to grant this license to any user with whom you share the content.</li>\n  <li>You understand that all content imported, published, shared, transmitted, or otherwise made available via the Services is the sole responsibility of the person from whom such content originated, and that you, and not Plex, are solely responsible for any civil or criminal legal liability that may arise or result from any content that you import, publish, share, transmit, or otherwise make available through your use of the Services.</li>\n</ol>\n\n<h4>Content of Others</h4>\n<ol>\n  <li>You acknowledge that all content that you access through use of the Software or other Services is accessed at your own risk, and you will be solely responsible for any damage or liability to any party resulting from such access.</li>\n  <li>You understand that by using the Services you may encounter content that you may find offensive, indecent, or objectionable. Plex does not inspect, screen, or otherwise control the content that is posted, shared or made available via the Services, and Plex does not guarantee the accuracy, integrity or quality of such content.</li>\n  <li>You acknowledge that unauthorized use of copyrighted content of others may subject you to civil and criminal penalties, including possible monetary damages, for copyright infringement.</li>\n</ol>\n\n<h4>Developers and Interfacing Software</h4>\n<ol>\n  <li>"Interfacing Software" means any software that you obtain or provide and that accesses or calls any Software provided by Plex as part of the Services including, but not limited to, plug-ins for the Services, channel plug-ins, metadata agents, and client applications that communicate directly or indirectly with the Services.</li>\n  <li>\n    By making, or assisting others in making, Interfacing Software, you agree to the following terms:\n    <ol>\n      <li>You grant Plex and its affiliates worldwide a worldwide, non-exclusive, and royalty-free right and license to use (including testing, hosting and linking to), copy, publicly perform, publicly display, reproduce in copies for distribution, and distribute the copies of any Interfacing Software made by you or with your assistance.</li>\n      <li>\n        You may notify us at legal@plex.tv if you do not wish for Plex to use, distribute, copy, publicly perform, publicly display, reproduce in copies for distribution, or distribute copies of any Interfacing Software that was created by you. Plex will comply with such a request but Plex must be granted a transition period of thirty (30) days after receipt of the request to comply. A request to take down Interfacing Software must include (1) an identification of the Interfacing Software you wish to be removed; (2) your signature in either electronic or physical form; and (3) the following statements:\n        <ul>\n          <li>"I swear under penalty of perjury that I am the owner of the Interfacing Software or I am authorized to act on behalf of the owner of the Interfacing Software.\u201d</li>\n          <li>"I swear under penalty of perjury that the information in this notification is accurate.\u201d</li>\n        </ul>\n      </li>\n      <li>You shall protect the privacy and legal rights of Plex users. If the users provide, or the Interfacing Software accesses or uses, user names, passwords, or other login information or personal information, you must make the users aware that such information will be available to the Interfacing Software, and you must provide privacy notices and protection for those users in compliance with applicable law. Further, the Interfacing Software may use that information only for the limited purposes for which the user has given you permission to do so. If the Interfacing Software stores personally identifying information of users or information that a reasonable user would consider to be sensitive, then the Interfacing Software must do so securely and only for as long as it is needed. However, if the user has opted or entered into a separate agreement with you that allows you or the Interfacing Software to store or use personally identifying information of users or information that a reasonable user would consider to be sensitive, then the terms of that separate agreement will govern your use of such information. If the user provides the Interfacing Software with Plex account information, the Interfacing Software may only use that information to access the user\u2019s Plex account when, and for the limited purposes for which, the user has given you permission to do so.</li>\n      <li>\n        Prohibited Uses. Plex prohibits performing certain actions using the Interfacing Software. You shall not make, or assist others in making, any Interfacing Software that:\n        <ol>\n          <li>Knowingly violates a third party\u2019s terms of service;</li>\n          <li>Violates any applicable laws or regulations;</li>\n          <li>Interferes with, disrupts, damages, harms, or accesses in an unauthorized manner the machines, hardware. devices, servers, networks, data, or other properties or services of any other party including, but not limited to, Plex users, Plex or any network operator;</li>\n          <li>Posts misleading information about an application\u2019s purpose;</li>\n          <li>Infringes on the intellectual property rights of others; or</li>\n          <li>Performs any other prohibited action listed under \u201cAcceptable Use\u201d above.</li>\n        </ol>\n      </li>\n      <li>You will require your end users to comply with any applicable law and these Terms. You will not knowingly enable your end users to violate applicable law or these Terms.</li>\n      <li>You shall indemnify and hold harmless Plex and its officers, directors, employees, contractors, licensors, suppliers, distributors, contractors, agents, and third party contributors from any claims, damages, liabilities, costs and fees (including reasonable attorney fees) arising from any use of the Interfacing Software or from Plex\u2019s distribution of the Interfacing Software.</li>\n      <li>Brand Features and Attribution\n        <ol>\n          <li>"Brand Features" is defined as the trade names, trademarks, service marks, logos, domain names, and other distinctive brand features of a party. Except where expressly stated, these terms do not grant either party any right, title, or interest in or to the other party\'s Brand Features. Any use by you of\xa0Plex\u2019s Brand Features (including any goodwill associated therewith) will inure to the benefit of\xa0Plex. Plex Brand Features include the Plex Play Logo (\u201c>\u201d in stylized format) and the trademarks, trade names and designs as may be identified from time to time in the Plex Trademark Notice that is posted at <a href="https://plex.tv/legal" target="_blank">www.plex.tv/legal</a>.</li>\n          <li>You must seek prior written approval from Plex to display\xa0Plex\'s Brand Features, including for the purpose of promoting or advertising that your Interfacing Software is for use in conjunction with Plex Services. Plex, in its sole discretion and in a separate writing such as an e-mail from an authorized representative of Plex, may grant you a revocable, non-transferable, nonexclusive license, without right of sub-license, to display\xa0Plex\'s Brand Features for the purpose of promoting or advertising that your Interfacing Software is for use in conjunction with Plex Services. You understand and agree that Plex\xa0has the sole discretion to determine whether your attribution(s) and use of\xa0Plex\'s Brand Features are in accordance with the above requirements and guidelines and that Plex may revoke the license granted herein at any time, or may require you to modify your use of Plex\u2019s Brand Features, for any reason in its sole discretion.</li>\n          <li>You will not make any statement that suggests a partnership with, sponsorship by, or endorsement by\xa0Plex,\xa0without\xa0Plex\'s express prior written approval.</li>\n          <li>In the course of promoting, marketing, or demonstrating the Services, Plex\xa0may produce and distribute incidental depictions, including screenshots, video, or other content from your Interfacing Software, and may use your company or product name. You grant\xa0us\xa0all necessary rights for the above purposes.</li>\n        </ol>\n      </li>\n    </ol>\n  </li>\n</ol>\n\n<h4>Children</h4>\n<p>\n  While Plex does distribute products that may be used by children, the Services are not intended to be used by children, without involvement, supervision, and approval of a parent or legal guardian.\xa0Therefore, if an account owner sets parental controls or establishes sub-accounts that the account owner intends to permit a child to use, the account owner should not reveal the account password to the child.\xa0Plex and its contributors may not provide controls that restrict the maturity level of content available via Plex and an adult account owner has sole responsibility for determining what maturity level is appropriate for or accessible to any children whom the account owner permits to use the Plex service or a sub-account.\n</p>\n\n<h4>NO WARRANTY</h4>\n<ol>\n  <li>PLEX SERVICES ARE PROVIDED "AS IS". PLEX MAKES NO WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, AND PLEX EXPRESSLY DISCLAIMS ALL WARRANTIES WITH RESPECT TO THE PLEX SERVICES, INCLUDING WITHOUT LIMITATION, ANY IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. FURTHER, PLEX DOES NOT WARRANT AGAINST ERRORS, OMISSIONS, RESULTS OF USE, OR THAT PLEX SERVICES ARE BUG FREE OR ERROR FREE OR THAT USE WILL BE UNINTERRUPTED. THIS DISCLAIMER OF WARRANTY CONSTITUTES AN ESSENTIAL PART OF THE AGREEMENT. ALL THE FOREGOING DISCLAIMERS ALSO APPLY IN\xa0FULL WITH RESPECT TO PLEX\'S LICENSORS, SUPPLIERS, DISTRIBUTORS, CONTRACTORS, AGENTS, AND THIRD PARTY CONTRIBUTORS. SOME STATES DO NOT ALLOW THE EXCLUSION OF IMPLIED WARRANTIES, SO THE ABOVE LIMITATIONS MAY NOT APPLY TO YOU.</li>\n  <li>You agree that Plex and its officers, directors, employees, and contractors are not responsible for any fault, inaccuracy, error, omission, delay or any other failure of your equipment and/or services caused by Plex\u2019s hardware, software, cabling, network services, or the like, or arising from Plex\u2019s use of such equipment and/or services.</li>\n  <li>The above disclaimer of warranty applies to software developed by Plex and any software developed by a third party and provided by Plex including, but not limited to, Interfacing Software developed by any Plex user.</li>\n</ol>\n\n<h4>Limitation of Liability and Damages</h4>\n<ol>\n  <li>UNDER NO CIRCUMSTANCES AND UNDER NO LEGAL THEORY, INCLUDING, BUT NOT LIMITED TO, TORT, CONTRACT, NEGLIGENCE, STRICT LIABILITY, OR OTHERWISE, SHALL PLEX BE LIABLE TO YOU OR ANY OTHER PERSON OR ENTITY: (I) FOR ANY INDIRECT, SPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGES OF ANY CHARACTER INCLUDING, WITHOUT LIMITATION, DAMAGES FOR LOST PROFITS, LOSS OF GOODWILL, WORK STOPPAGE, ACCURACY OF RESULTS, COMPUTER FAILURE OR MALFUNCTION, LOSS OF DATA, OR OTHER DAMAGES RESULTING FROM YOUR USE OF THE SOFTWARE; OR (II) FOR ANY MATTER BEYOND ITS REASONABLE CONTROL. PLEX\'S AGGREGATE LIABILITY FOR DAMAGES OF ANY KIND WHATSOEVER ARISING OUT OF THIS AGREEMENT SHALL BE LIMITED TO THE LESSER OF THE TOTAL FEES PAID BY YOU TO PLEX (IF ANY) FOR THE PORTION OF THE SOFTWARE THAT GAVE RISE TO SUCH DAMAGES OR $100 (U.S.), EXCEPT WHERE NOT PERMITTED BY APPLICABLE LAW, IN WHICH CASE PLEX\'S LIABILITY SHALL BE LIMITED TO THE MINIMUM AMOUNT PERMITTED BY SUCH APPLICABLE LAW. ALL THE FOREGOING LIMITATIONS SHALL APPLY EVEN IF EITHER PARTY HAS BEEN INFORMED OF THE POSSIBILITY OF SUCH DAMAGES. ALL THE FOREGOING LIMITATIONS ALSO APPLY WITH RESPECT TO PLEX\'S SUPPLIERS, LICENSORS, DISTRIBUTORS, CONTRACTORS, AGENTS, AND THIRD PARTY CONTRIBUTORS. SOME STATES DO NOT ALLOW THE EXCLUSION OR LIMITATION OF INCIDENTAL OR CONSEQUENTIAL DAMAGES, SO THE ABOVE LIMITATION AND EXCLUSION MAY NOT APPLY TO YOU.</li>\n  <li>The above limitations and exclusions apply to software developed by Plex and any software developed by a third party and provided by Plex including, but not limited to, Interfacing Software developed by Plex user.</li>\n</ol>\n\n<h4>Third-Party Materials</h4>\n<p>\n  This website and other Services may provide links to websites, software, or other materials provided by third parties.  Plex does not endorse and is not responsible or liable for the availability, accuracy, safety, or intellectual property rights of or relating to such content. Plex is not liable for any harm caused by any such materials.\n</p>\n\n<h4>Malware</h4>\n<p>\n  "Malware" means any known, discovered, envisioned, or invented, or any yet to be known, discovered, envisioned, or invented: (i) virus, Trojan horse, or any other harmful, harassing, or malicious software; or (ii) method, use, or means by which any software, firmware, equipment, device, communications medium, person, entity, or the like directly or indirectly engages in or is used for: (a) any unauthorized access; (b) any unauthorized communication; or (c) any cracks, hacks, exploits, or other activity, method, use, or means, that may cause harassment, harm, data loss, data theft, loss of communication, loss of privacy, or the like. You acknowledge that the Internet, Internet service providers, shared or dedicated telecommunication lines, wireless access points and wireless networks, other forms of communication, online resources including websites and cloud computing environments, or other means that you use to connect to the Software may not be secure and may be vulnerable to attack by third parties, and that it is possible to receive Malware by using the Internet, dedicated lines, other forms of communication, or other means. In order to protect the Software, you shall regularly obtain, use, and update appropriate third party software or other means to protect yourself from Malware and to detect and remove Malware that may be downloaded using the Internet, dedicated lines, other forms of communication, or other means. Plex does not warrant that the Software will be free of Malware including, but not limited to, Malware that is introduced by third parties, the Internet, dedicated lines, other forms of communication, or other means.\n</p>\n\n<h4>Waiver and Indemnity</h4>\n<p>\n  You agree that Plex and its licensors, distributors, contractors, agents, and third party contributors shall have no liability whatsoever for any use you make of the Services. You shall indemnify and hold harmless Plex and its licensors, suppliers, distributors, contractors, agents, and third party contributors from any claims, damages, liabilities, costs and fees (including reasonable attorney fees) arising from your use of the Plex Services as well as from your failure to comply with any of the Terms, or any losses, damages, claims, costs, and/or attorneys\u2019 fees arising from any use of or reliance upon any information received in connection with the Services that comprises or is based upon data provided by Plex or any third party.\n</p>\n\n<h4>Termination of Services</h4>\n<p>\n  Plex may at any time, with or without cause and with or without prior notice, immediately terminate or suspend your Plex account or otherwise terminate or suspend your access to all or a portion of the Services. Cause for such termination may include: (a) violations of the Terms or any other policies or guidelines that are referenced herein; (b) a request by you to cancel or terminate your account; (c) a request and/or order from law enforcement, a judicial body, or other government agency; (d) where providing the Services to you is or may become unlawful; or (e) unexpected technical or security issues or problems; (f) your participation in fraudulent or illegal activities. Any such termination or suspension shall be made by Plex in its sole discretion and Plex will not be responsible to you or any third party for any damages that may result or arise out of such termination or suspension of your access to the Services.\n</p>\n\n<h4>Miscellaneous</h4>\n<ol>\n  <li>This Agreement does not give you any rights not expressly and unambiguously granted herein.</li>\n  <li>No agency, partnership, joint venture, or employment is created as a result of this Agreement and you do not have any authority of any kind to bind Plex in any respect whatsoever.</li>\n  <li>If any provision of this Agreement is found to be unenforceable or invalid, that provision shall be limited or eliminated to the minimum extent necessary so that this Agreement shall otherwise remain in full force and effect and enforceable.</li>\n  <li>This Agreement is not assignable, transferable, or sublicensable by you except with Plex\'s prior written consent. Plex may transfer, assign, or delegate this Agreement and its rights and obligations without consent.</li>\n  <li>Plex\'s failure to enforce any right or provisions in this Agreement will not constitute a waiver of such or any other provision.</li>\n  <li>This Agreement shall be governed by and construed in accordance with the laws of the state of California, as if made within California between two residents thereof, and the parties submit to the exclusive jurisdiction of the Superior Court of Santa Clara County and the United States District Court for the Northern District of California. Notwithstanding the foregoing sentence, but without limiting Plex\'s right to seek injunctive or other equitable relief in any court of competent jurisdiction, any disputes arising with respect to this Agreement shall be referred to an arbitrator affiliated with the Judicial Arbitration and Mediation Services, Inc. ("JAMS"). The arbitrator shall be selected by joint agreement of the parties. In the event the parties cannot agree on an arbitrator within thirty (30) days of the initiating party providing the other party with written notice that it plans to seek arbitration, the parties shall each select an arbitrator affiliated with JAMS, which arbitrators shall jointly select a third such arbitrator to resolve the dispute. The written decision of the arbitrator shall be final and binding on the parties. The arbitration proceeding shall be carried on and heard in Santa Clara County, California using the English language and pursuant to the rules of (and administered by) JAMS. In any action or proceeding to enforce rights under this Agreement, the prevailing party will be entitled to recover costs and reasonable attorneys\' fees from the other party. A separate written license agreement or order and signed by Plex and you or your company, employer, or principal may state other terms and conditions that apply to you, including terms relating to price, payment, delivery, confidential information, support services, and the like. You are solely responsible to review such terms or conditions with your company, employer or principal. In the event of any conflict in terms, the terms of the separate license agreement shall supersede the terms of this Agreement.</li>\n  <li>Both parties agree that this Agreement is the complete and exclusive statement of the mutual understanding of the parties and supersedes and cancels all previous written and oral agreements, communications, and other understandings relating to the subject matter of this Agreement.</li>\n</ol>\n'
})}),define("plex/desktop/initializers/configs/DesktopPartials",["hb!templates/desktop/partials/Setting.tpl","hb!templates/desktop/partials/LockableTagInput.tpl","hb!templates/desktop/partials/LockableTextInput.tpl","hb!templates/desktop/partials/ConnectError.tpl","hb!templates/desktop/partials/Terms.tpl","handlebars"],function(e,t,n,i,s,a){return a.registerPartial("setting",e),a.registerPartial("lockableTagInput",t),a.registerPartial("lockableTextInput",n),a.registerPartial("connectError",i),a.registerPartial("terms",s),a
}),FastClick.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,FastClick.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),FastClick.prototype.deviceIsIOS4=FastClick.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),FastClick.prototype.deviceIsIOSWithBadTarget=FastClick.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),FastClick.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;
break;case"input":if(this.deviceIsIOS&&"file"===e.type||e.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(e.className)},FastClick.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!this.deviceIsAndroid;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},FastClick.prototype.sendClick=function(e,t){var n,i;
document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),i=t.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(e),!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,e.dispatchEvent(n)},FastClick.prototype.determineEventType=function(e){return this.deviceIsAndroid&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},FastClick.prototype.focus=function(e){var t;this.deviceIsIOS&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()
},FastClick.prototype.updateScrollParent=function(e){var t,n;if(t=e.fastClickScrollParent,!t||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)},FastClick.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},FastClick.prototype.onTouchStart=function(e){var t,n,i;if(e.targetTouches.length>1)return!0;if(t=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0],this.deviceIsIOS){if(i=window.getSelection(),i.rangeCount&&!i.isCollapsed)return!0;
if(!this.deviceIsIOS4){if(n.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=n.pageX,this.touchStartY=n.pageY,e.timeStamp-this.lastClickTime<200&&e.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],n=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n?!0:!1
},FastClick.prototype.onTouchMove=function(e){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},FastClick.prototype.findControl=function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(e){var t,n,i,s,a,r=this.targetElement;
if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<200)return this.cancelNextClick=!0,!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.deviceIsIOSWithBadTarget&&(a=e.changedTouches[0],r=document.elementFromPoint(a.pageX-window.pageXOffset,a.pageY-window.pageYOffset)||r,r.fastClickScrollParent=this.targetElement.fastClickScrollParent),i=r.tagName.toLowerCase(),"label"===i){if(t=this.findControl(r)){if(this.focus(r),this.deviceIsAndroid)return!1;
r=t}}else if(this.needsFocus(r))return e.timeStamp-n>100||this.deviceIsIOS&&window.top!==window&&"input"===i?(this.targetElement=null,!1):(this.focus(r),this.deviceIsIOS4&&"select"===i||(this.targetElement=null,e.preventDefault()),!1);return this.deviceIsIOS&&!this.deviceIsIOS4&&(s=r.fastClickScrollParent,s&&s.fastClickLastScrollTop!==s.scrollTop)?!0:(this.needsClick(r)||(e.preventDefault(),this.sendClick(r,e)),!1)},FastClick.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null
},FastClick.prototype.onMouse=function(e){return this.targetElement?e.forwardedTouchEvent?!0:e.cancelable?!this.needsClick(this.targetElement)||this.cancelNextClick?(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1):!0:!0:!0},FastClick.prototype.onClick=function(e){var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail?!0:(t=this.onMouse(e),t||(this.targetElement=null),t)
},FastClick.prototype.destroy=function(){var e=this.layer;this.deviceIsAndroid&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)
},FastClick.notNeeded=function(e){var t;if("undefined"==typeof window.ontouchstart)return!0;if(/Chrome\/[0-9]+/.test(navigator.userAgent)){if(!FastClick.prototype.deviceIsAndroid)return!0;if(t=document.querySelector("meta[name=viewport]"),t&&-1!==t.content.indexOf("user-scalable=no"))return!0}return"none"===e.style.msTouchAction?!0:!1},FastClick.attach=function(e){return new FastClick(e)},"undefined"!=typeof define&&define.amd?define("fastclick",[],function(){return FastClick}):"undefined"!=typeof module&&module.exports?(module.exports=FastClick.attach,module.exports.FastClick=FastClick):window.FastClick=FastClick,define("plex/base/initializers/AppInitializer",["jquery","plex/base/utils/formatters/StringUtil","plex/base/adapters/StorageAdapter"],function(e,t,n){return{"init":function(i){var s=e.Deferred(),a=e("#plex-script");
if(a.length){var r=/version=([\.\w]+)$/.exec(a[0].src);r&&i.set("version",r[1])}var o=n.get(),l=o.get({"key":"clientID"});return l.done(function(e){i.set("clientID",e)}),l.fail(function(){var e=t.random();o.set({"key":"clientID","value":e}),i.set("clientID",e)}),l.always(function(){s.resolve()}),s.promise()}}}),define("plex/base/initializers/SettingsInitializer",["jquery","plex/base/adapters/LocalizerAdapter","plex/base/adapters/StorageAdapter","plex/base/models/SettingsModel","plex/base/models/server/ServerStorageModel"],function(e,t,n,i,s){return{"init":function(){var a=e.Deferred(),r=n.get();
r.remove({"key":"settings"}),r.remove({"key":"servers"});var o=i.populate({"reset":!0}),l=s.populate({"reset":!0});return e.when(o,l).always(function(){var e=i.get("language");t.get().load(e).always(function(){a.resolve()})}),a.promise()}}}),define("plex/base/adapters/LoggingAnalytics",["underscore","plex/base/utils/BaseClass","plex/base/utils/Logger"],function(e,t,n){var i=!0,s=t.extend({"enable":function(){i&&n.info("Analytics enabled")},"disable":function(){i&&n.info("Analytics disabled")},"set":function(e){i&&n.info("Analytics set options "+JSON.stringify(e,null,2))
},"trackView":function(e){i&&n.info('Analytics tracked view "'+e+'"')},"trackEvent":function(e){i&&n.info("Analytics tracked event "+JSON.stringify(e,null,2))},"initAndStartSession":function(){i&&n.info("Bugsense enabled")},"addExtraData":function(e){i&&n.info("Bugsense set option "+JSON.stringify(e,null,2))},"notify":function(e,t){i&&(n.error(e),n.info("Bugsense tracked error "+JSON.stringify(t,null,2)))}});return s}),define("plex/base/initializers/AnalyticsInitializer",["underscore","plex/base/adapters/DimensionsAdapter","plex/base/adapters/BugsenseAdapter","plex/base/adapters/AnalyticsAdapter","plex/base/adapters/LoggingAnalytics","plex/base/models/ConfigModel","plex/base/models/SessionStatsModel"],function(e,t,n,i,s,a,r){var o="UA-6111912-18",l="6723495a";
return{"init":function(){var e=t.get();"production"!==a.get("env")&&n.register(new s);var c=n.get();c.initAndStartSession({"apiKey":l,"appver":e["X-Plex-Version"]}),c.addExtraData("X-Plex-Product",e["X-Plex-Product"]),c.addExtraData("X-Plex-Platform",e["X-Plex-Platform"]),c.addExtraData("X-Plex-Platform-Version",e["X-Plex-Platform-Version"]),"production"!==a.get("env")&&i.register(s);var d=i.init(o,{"name":e["X-Plex-Product"],"version":e["X-Plex-Version"]});return d.set({"dimension1":e["X-Plex-Product"],"dimension2":e["X-Plex-Client-Identifier"],"dimension3":e["X-Plex-Platform"],"dimension4":e["X-Plex-Platform-Version"],"dimension5":e["X-Plex-Device-Name"],"dimension6":e["X-Plex-Version"]}),r.populate().done(function(){var e=Math.round((r.get("heartbeatTime")-r.get("startTime"))/1e3),t=r.get("playbackCount");
d.trackEvent({"eventCategory":"App","eventAction":"Shutdown","eventValue":e,"metric1":t})}),r.populate().always(function(){r.startSession(),d.trackEvent({"eventCategory":"App","eventAction":"Start","eventValue":1,"sessionControl":"start"})}),{"bugsense":c,"analytics":d}}}}),define("plex/desktop/initializers/DesktopAnalyticsInitializer",["plex/base/utils/Dispatcher","plex/base/initializers/AnalyticsInitializer"],function(e,t){return{"init":function(){var n=t.init(),i=n.analytics;e.on("show:modal",function(e){e.name&&i.trackView(e.name)
})}}}),define("plex/base/models/library/SyncMetadataModel",["plex/base/models/library/MetadataModel"],function(e){var t=e.extend({"cacheKey":function(e){return this.server.id+"!"+e.key+"!"+e.syncItemId}});return t}),define("plex/desktop/managers/ServerSocketManager",["underscore","plex/base/models/AppModel","plex/base/utils/Dispatcher","plex/base/utils/BaseClass","plex/base/utils/Logger","plex/base/adapters/LocalizerAdapter","plex/base/mixins/EventMixin","plex/base/models/library/section/SectionModel","plex/base/models/library/MetadataModel","plex/base/models/library/SyncMetadataModel","plex/base/models/server/SessionModel"],function(e,t,n,i,s,a,r,o,l,c,d){var u=i.extend({"mixins":r,"initialize":function(t){e.bindAll(this,"onClose","onOpen","onError","onMessage");
var n=t.get("activeConnection"),i=t.isLocalAddress(n.address),s=i&&t.useHostedHttps?"wss://":"ws://",a=t.resolveUrl("/:/websockets/notifications",{"appendToken":!0});a=a.replace(/^\w+:\/\//,s),this.server=t,this.socket=new WebSocket(a),this.socket.onopen=this.onOpen,this.socket.onclose=this.onClose,this.socket.onerror=this.onError,this.socket.onmessage=this.onMessage},"disconnect":function(){this.socket.onopen=null,this.socket.onclose=null,this.socket.onerror=null,this.socket.onmessage=null},"onOpen":function(e){s.success("Socket connection to "+this.server.get("friendlyName")+" opened."),this.server.trigger("socket:websocket",{"opened":!0}),this.trigger("open",this.server,e)
},"onClose":function(e){this.disconnect(),s.warn("Socket connection to "+this.server.get("friendlyName")+" closed."),this.server.trigger("socket:websocket",{"closed":!0}),this.trigger("close",this.server,e),this.server.get("connected")&&this.server.trigger("error:connection",this.server)},"onError":function(e){this.disconnect();var t=this.server.get("friendlyName"),i=a.get(),r=i.t("Unable to receive alerts from {1}",this.server.get("friendlyName"));n.trigger("show:status",this.server,r),s.error("Error opening socket connection to "+t+"."),this.server.trigger("socket:websocket",{"error":!0}),this.trigger("close",this.server,e)
},"onMessage":function(i){var s;try{s=JSON.parse(i.data)}catch(r){return}switch(s.type){case"preference":e.each(s._children,function(e){e.key=e.id,e.server=this.server,this.server.trigger("socket:setting",e)},this);break;case"timeline":e.each(s._children,function(t){t.server=this.server;var i={"server":this.server,"onlyIfCached":!0},s=new o({"key":t.sectionID},i);if(!e.isEmpty(s)){i.section=s,t.section=s;var a="/library/metadata/"+t.itemID,r=new l({"key":a},i);if(e.isEmpty(r)||(t.item=r,r.set({"metadataState":t.metadataState,"mediaState":t.mediaState}),r.trigger("socket:timeline",t),r.release()),t.rootItemID){var c="/library/metadata/"+t.rootItemID,d=new l({"key":c},i);
e.isEmpty(d)||(d.fetch(),d.release())}if(t.parentItemID){var u="/library/metadata/"+t.parentItemID,h=new l({"key":u},i);e.isEmpty(h)||(h.fetch(),h.release())}s.trigger("socket:timeline",t)}t.server.trigger("socket:timeline",t),n.trigger("timeline",t)},this);break;case"status":e.each(s._children,function(e){var t=a.get(),i=e.title+(e.description?": "+e.description:"");n.trigger("show:status",this.server,t.t(i)),this.server.trigger("socket:status",e),"LIBRARY_UPDATE"===e.notificationName&&this.server.get("sections").fetch()
},this);break;case"progress":e.each(s._children,function(e){n.trigger("show:status",this.server,e.message),this.server.trigger("socket:status",e)},this);break;case"playing":e.each(s._children,function(i){if(i.sessionKey&&!this.server.get("shared")){var s={"server":this.server,"onlyIfCached":!0},r=this.server.get("sessions"),o=new d({"sessionKey":i.sessionKey},s);if(e.isEmpty(o)||o.get("key")!==i.key){var l=r.fetch();l.done(e.bind(function(){if(o=r.get(i.sessionKey)){var s=t.get("user"),l=o.get("Player").title,c=o.get("User").title,d=o.get("grandparentTitle"),u=o.get("title");
d&&(u=d+" - "+u);var h=a.get(),p=h.t("{1} started playing {2} on {3}.",c,u,l);c&&c!==s.get("username")&&n.trigger("show:status",this.server,p),this.server.trigger("socket:playing",e.extend(i,{"username":c||h.t("Unknown"),"title":u,"player":l}))}},this))}else if(o.release(),"stopped"===i.state)o.release(),o.purge(),o.trigger("destroy",o,o.collection);else{var c=o.get("Player");c&&(c.state=i.state,o.trigger("change:Player",o,c)),o.set("viewOffset",i.viewOffset)}}},this);break;case"syncState":e.each(s._children,function(t){var n={"server":this.server,"onlyIfCached":!0},i=new c({"key":t.key,"syncItemId":t.syncItemId},n);
if(!e.isEmpty(i)){var s=i.get("Media");e.each(s,function(n){var s=n.Part;e.each(s,function(e){e.transcodeState=t.syncFileState,e.transcodeStateContext=t.syncFileStateContext;var n=/^(transcoded|downloaded|directplay)$/;n.test(t.syncFileState)&&(e.key="placeholder"),i.trigger("change:Media",i,i.get("Media"))})}),i.release()}},this)}this.trigger("message",this.server,i)}});return u}),define("plex/desktop/initializers/SocketInitializer",["plex/base/utils/Dispatcher","plex/base/utils/Capabilities","plex/desktop/managers/ServerSocketManager","plex/base/adapters/LocalizerAdapter","plex/base/models/AppModel","plex/base/models/ConfigModel"],function(e,t,n,i,s){function a(e){if(!(e.get("shared")||e.get("synced")||e.get("cloud")||u.hasOwnProperty(e.id)))if(t.hasWebSocket){var i=new n(e);
i.on("close",r),u[e.id]=i}else e.trigger("socket:websocket",{"error":!0})}function r(e){if(u.hasOwnProperty(e.id)){var t=u[e.id];t.off("close",r),delete u[e.id]}}function o(e,t){t?a(e):r(e)}function l(){for(var e in u){var t=u[e];t.disconnect(),t.socket.close()}u={}}function c(t){var n;switch(t.state){case 0:n="Created {1} in {2} on {3}";break;case 2:n="Matching {1} in {2} on {3}";break;case 3:n="Downloading metadata for {1} in {2} on {3}";break;case 4:n="Loading metadata for {1} in {2} on {3}";break;
case 5:n="Finished processing {1} in {2} on {3}";break;case 6:n="Analyzing {1} in {2} on {3}";break;case 9:n="Deleted {1} in {2} on {3}"}if(n){var s=i.get(),a=t.title||s.t("an item"),r=t.section?t.section.get("title"):"section "+t.sectionID;e.trigger("show:status",t.server,s.t(n,a,r,t.server.get("name")))}}var d=s.get("servers"),u={};return{"init":function(){d.on("change:connected",o),e.on("disconnect:websocket",l),e.on("timeline",c)}}}),define("plex/desktop/initializers/UserInitializer",["plex/base/models/AppModel"],function(e){return{"init":function(){var t=e.get("user");
t.on("change:signedIn",function(e,t){t&&(e.get("devices").populate({"reset":!0}),e.get("friends").populate({"reset":!0}),e.get("friendRequests").populate({"reset":!0}),e.get("socialNetworks").populate({"reset":!0}))})}}}),define("plex/base/routes/BaseRouter",["underscore","backbone","marionette","plex/base/utils/Dispatcher","plex/base/models/AppModel","plex/base/adapters/AnalyticsAdapter"],function(e,t,n,i,s,a){var r=n.AppRouter.extend({"initialize":function(){this.uniqueRoutes=e.uniq(e.values(this.appRoutes)),this.fragments=e.invert(this.appRoutes),this.listenTo(this,"route",this.onRoute),this.listenTo(i,"navigate",this.onNavigate)
},"resolveUrlFragment":function(t,n){var i=t.match(/:\w+/g);return i&&e.each(i,function(e){var i=e.slice(1),s=n[i];if(null==s){var a=new RegExp("\\([^\\)]*"+e+"[^\\)]*\\)","g");t=t.replace(a,"")}else t=t.replace(e,encodeURIComponent(s))}),t.replace(/\(|\)/g,"")},"onRoute":function(n){var i=s.get("history"),r=t.history.getFragment();r!==e.last(i)&&(i.push(r),s.trigger("change:history",s,i)),a.get().trackView(n)},"onNavigate":function(t,n){if(-1!==e.indexOf(this.uniqueRoutes,t)){n||(n={});var i=!1;
if(null!=n.silent&&(i=n.silent,delete n.silent),null==n.trigger&&(n.trigger=!0),i)this.controller[t].apply(this.controller,e.values(n));else{var s=this.resolveUrlFragment(this.fragments[t],n);this.navigate(s,{"trigger":n.trigger})}}}});return r}),define("plex/base/routes/BaseAppRouter",["backbone","plex/base/utils/Dispatcher","plex/base/routes/BaseRouter","plex/base/models/AppModel"],function(e,t,n,i){var s=n.extend({"initialize":function(){n.prototype.initialize.apply(this,arguments),this.listenTo(t,{"navigate:back":this.onNavigateBack,"navigate:refresh":this.onNavigateRefresh})
},"onNavigateBack":function(){var e=i.get("history");if(e.length>1){var t=e.splice(-2);i.trigger("change:history",i,e),this.navigate(t[0],{"trigger":!0})}else this.navigate("",{"trigger":!0})},"onNavigateRefresh":function(){e.history.loadUrl(e.history.getFragment())}});return s}),define("plex/base/models/channel/ChannelModel",["underscore","plex/base/utils/Parser","plex/base/models/BaseModel","plex/base/models/library/MetadataCollection"],function(e,t,n,i){var s=n.extend({"idAttribute":"key","subcollections":["Directory","Video","Track","Photo","Artist","Album","Playlist"],"url":function(){return this.id?this.id:"/:/plugins/"+this.get("identifier")+"/root"
},"initialize":function(){this.set("items",new i([],{"server":this.server,"channel":this.channel||this,"parent":this,"skipCache":!0}))},"convert":function(n){var i=e.isObject(n)?n:t.parseXML(n);return t.parseBoolean(i,["installed","noCache","allowSync","hasPrefs","hasStoreServices","share"]),t.parseInteger(i,["size","lastAccessedAt"]),t.parseArray(i,"Metadata"),i},"parse":function(t){if(e.isString(t)){var n=this.subcollections.join("|"),i=new RegExp("<("+n+")","g"),s=new RegExp("</("+n+")>","g");
t=t.replace(i,'<Metadata elementName="$1"'),t=t.replace(s,"</Metadata>")}var a=this.convert(t),r=this.toJSON();if(r&&(r.key&&(a.key=r.key),r.identifier&&(a.identifier=r.identifier)),"none"===a.key&&delete a.key,a.title2?(a.title=a.title2,delete a.title2):a.title1?(a.title=a.title1,delete a.title1):a.name&&(a.title=a.name,delete a.name),a.prefsKey&&(a.settingsKey=a.prefsKey,delete a.prefsKey),a.key){var o=/^\/(\w+)\//,l=a.key.match(o);l&&(a.type=l[1])}for(var c=a.Metadata.length-1;c>-1;c--){var d=a.Metadata[c];
d.isChannel=!0,d.allowSync=a.allowSync,a.identifier&&(d.identifier=a.identifier),a.mediaTagPrefix&&(d.mediaTagPrefix=a.mediaTagPrefix),a.mediaTagVersion&&(d.mediaTagVersion=a.mediaTagVersion),d.settings?(a.settingsKey=d.key,a.Metadata.splice(c,1)):d.search&&(a.searchKey=d.key,a.Metadata.splice(c,1))}var u=this.get("items");return u&&(u.reset({"Metadata":a.Metadata},{"parse":!0}),delete a.Metadata),a}});return s}),define("plex/base/routes/BaseController",["underscore","jquery","backbone","marionette","plex/base/utils/Dispatcher","plex/base/models/AppModel","plex/base/models/library/MetadataModel","plex/base/models/channel/ChannelModel"],function(e,t,n,i,s,a,r,o){var l,c=!1,d=i.Controller.extend({"populateView":function(e){e||(e={}),s.trigger("show:loading"),l&&"pending"===l.state()&&(c=!0),n.abort();
var i={"options":e},a=this.populateServer(e,i);return e.primaryServer&&(a=this.populatePrimaryServer(a,i)),e.sectionID&&(a=this.populateSection(e,a,i)),e.key&&(a=this.populateMetadata(e,a,i)),e.channelID&&(a=this.populateChannel(e,a,i)),e.channelKey&&(a=this.populateChannelMetadata(e,a,i)),a=a.then(function(){return t.Deferred().resolve(i)},function(){return c?(c=!1,i.item&&i.item.release()):s.trigger("navigate","unauthorized",{"result":i,"silent":!0}),t.Deferred().reject(i)}),l=a,a},"populateServer":function(e,t){var n=e.serverID;
if(!n)return this.findServers();var i=this.findServer(n);return i=i.then(function(e){return t.server=e,e.populate()})},"hasAuthorizedServer":function(){var e=a.get("servers");return!!e.findWhere({"authorized":!0})},"findServers":function(){function n(e,t){t&&(s.off("change:authorized",n),i.resolve())}var i=t.Deferred(),s=a.get("servers");return this.hasAuthorizedServer()?i.resolve().promise():(s.on("change:authorized",n),s.populate().always(e.bind(function(){s.off("change:authorized",n),"pending"===i.state()&&(this.hasAuthorizedServer()?i.resolve():i.reject())
},this)),i.promise())},"findServer":function(e){function n(t,a){t.id===e&&(a.off("add",n),a.off("change:machineIdentifier",i),s.resolve(t))}function i(t,a){a===e&&(r.off("add",n),r.off("change:machineIdentifier",i),s.resolve(t))}var s=t.Deferred(),r=a.get("servers"),o=r.get(e);return o?s.resolve(o).promise():(r.on("add",n),r.on("change:machineIdentifier",i),r.populate().always(function(){r.off("add",n),r.off("change:machineIdentifier",i),"pending"===s.state()&&s.reject()}),s.promise())},"populatePrimaryServer":function(e,n){return e=e.then(function(){function e(e,t){t?(n.server=t,i.resolve()):i.reject()
}var i=t.Deferred(),s=a.get("primaryServer");return s?(n.server=s,i.resolve().promise()):s===!1?i.reject().promise():(a.on("change:primaryServer",e),i.promise())})},"populateSection":function(e,n,i){return n=n.then(function(){return i.server.get("sections").populate()}),n=n.then(function(n){var s=i.item,a=e.sectionID;if(s&&(a=s.get("librarySectionID"),!a||i.server.get("synced")))return t.Deferred().resolve();var r=n.get(a);if(!r)return t.Deferred().reject();if(i.section=r,s){s.section=r;var o=s.get("children");
o&&(o.section=r)}return t.Deferred().resolve(r)})},"populateMetadata":function(e,t,n){return t=t.then(function(){var t=new r({"key":e.key},{"server":n.server});return n.item=t,t.fetch({"cancelable":!0,"data":"checkFiles=1"})}),t=this.populateSection(e,t,n)},"populateChannel":function(e,t,n){return t=t.then(function(){var t=e.channelID,i={};/^\/\w+\//.test(t)?i.key=t:i.identifier=t;var s=new o(i,{"server":n.server});return n.channel=s,s.fetch({"cancelable":!0})})},"populateChannelMetadata":function(e,t,n){return t=t.then(function(){var t=new o({"key":e.channelKey},{"server":n.server,"channel":n.channel});
return n.channelItem=t,t.fetch({"cancelable":!0})})}});return d}),define("hb!templates/desktop/DesktopAppView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{},'<div id="content" class="scroll-container minimal-scroll"></div>\n<div class="scroll-shadow transition-out"></div>\n'})}),define("hb!templates/desktop/LoadingView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};
var a="";return a})}),define("plex/desktop/views/LoadingView",["hb!templates/desktop/LoadingView.tpl","marionette"],function(e,t){var n=t.ItemView.extend({"className":"loading","template":e});return n}),define("hb!templates/desktop/BackgroundView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{},'<div class="background transition-out"></div>\n'})}),define("plex/desktop/views/images/BaseImage",["underscore","jquery","marionette","plex/base/utils/Capabilities","plex/desktop/utils/DesktopTranscoder","plex/base/models/AppModel"],function(e,t,n,i,s,a){var r=window.devicePixelRatio?window.devicePixelRatio:1,o=n.ItemView.extend({"tagName":"img","background":!1,"pixelRatio":r,"initialize":function(t){t||(t={}),e.bindAll(this,"onLoad"),this.blobs=[],this.url=t.url,this.server=t.server,this.placeholder=t.placeholder,this.placeholderClass=t.placeholderClass,this.modelAttribute=t.modelAttribute,t.background&&(this.background=t.background),e.isFunction(t.getUrl)&&(this.getUrl=t.getUrl),this.setup(t)
},"setup":function(e){this.setModel(e.model,e),this.setDimensions(e)},"setDimensions":function(e){e.width&&e.height&&(this.transcode=!0,this.width=e.width*this.pixelRatio,this.height=e.height*this.pixelRatio)},"setModel":function(e,t){t||(t={}),this.stopListening(),this.model=e,e&&(this.server||(this.server=e.server),t.url||e&&this.modelAttribute&&(this.url=this.getUrl(e.get(this.modelAttribute)),this.listenTo(e,"change:"+this.modelAttribute,this.onChange)))},"setElement":function(){n.ItemView.prototype.setElement.apply(this,arguments),this.render({"force":!0})
},"render":function(e){return e||(e={}),this.url||this.placeholder||this.placeholderClass?this.src?void(e.force&&this.showImage(this.src)):(this.isPlaceholderRendered&&this.url||this.showPlaceholder(),this.url&&this.load(this.url,this.transcode).done(this.onLoad),this):this},"showPlaceholder":function(){return this.isPlaceholderRendered=!0,this.placeholderClass?(this.$el.addClass(this.placeholderClass),void this.$el.removeAttr("style")):this.placeholder||this.background?this.placeholder?this.showImage(this.placeholder):void 0:this.showImage("img/blank.png")
},"showImage":function(e){return this.background?this.showBackgroundImage(e):void this.$el.attr("src",e).removeAttr("width").removeAttr("height")},"showBackgroundImage":function(e){this.$el.css("background-image","url("+e+")")},"load":function(n){if(!n)return t.Deferred().reject().promise();if(this.server&&this.transcode&&(n=s.image(this.server,n,{"fallbackServer":a.get("primaryServer"),"width":this.width,"height":this.height,"minSize":this.minSize})),i.hasBlob&&i.hasCreateObjectUrl){var r=this.loadBlob(n);
return r=r.then(e.bind(this.loadImage,this))}return this.loadImage(n)},"loadBlob":function(n){var i=t.Deferred();this.cancel();var s=new XMLHttpRequest;return s.open("GET",n,!0),s.responseType="arraybuffer",this.xhr=s,s.onreadystatechange=e.bind(function(){if(4===s.readyState)if(s.onreadystatechange=null,this.xhr=null,200===s.status){var e=new Blob([s.response],{"type":"image/jpeg"}),t=window.URL.createObjectURL(e);this.blobs.push(t),i.resolve(t)}else i.reject()},this),s.send(),i.promise()},"loadImage":function(e){var n=t.Deferred(),i=new Image;
return i.onload=function(){i.onload=i.onabort=i.onerror=null,n.resolve(e)},i.onabort=i.onerror=function(){i.onload=i.onabort=i.onerror=null,n.reject()},i.src=e,n.promise()},"cancel":function(){this.xhr&&(this.xhr.onreadystatechange=null,this.xhr.abort(),this.xhr=null)},"getUrl":function(e){return e},"onLoad":function(e){this.src=e,this.placeholderClass&&this.$el.removeClass(this.placeholderClass),this.showImage(e),this.trigger("load",e)},"onClose":function(){this.cancel(),this.blobs.length&&e.each(this.blobs,function(e){window.URL.revokeObjectURL(e)
})},"onChange":function(e,t){return t=this.getUrl(t),this.url===t?this:(this.url=t,this.src=null,void this.render())}});return o}),define("plex/desktop/views/BackgroundView",["hb!templates/desktop/BackgroundView.tpl","underscore","marionette","plex/base/utils/Dispatcher","plex/desktop/views/images/BaseImage"],function(e,t,n,i,s){var a=n.ItemView.extend({"className":"background-container","template":e,"ui":{"background":".background"},"onlyAfterRender":["onTransitionIn","onTransitionOut"],"initialize":function(){this.image=new s({"width":1280,"height":720}),this.listenTo(i,"show:background",this.onTransitionIn),this.listenTo(i,"hide:background",this.onTransitionOut)
},"load":function(e){if(this.currentBackground!==e){if(this.currentBackground=e,!e)return void this.ui.background.addClass("transition-out");this.image.server=this.model.server,this.image.load(e,!0).done(t.bind(function(e){this.ui.background.css("background-image","url("+e+")").removeClass("transition-out")},this))}},"onClose":function(){this.image.close()},"onTransitionIn":function(e){return this.model&&this.model.id===e.model.id?void this.references++:(this.references=1,this.model=e.model,this.model.on("change:art",this.onArtChange,this),this.ui.background.toggleClass("dim",!!e.dim),void this.load(this.model.get("art")))
},"onTransitionOut":function(e){if(this.model&&this.model.id===e.id){if(this.references>1)return void this.references--;this.image.cancel(),this.model.off("change:art",this.onArtChange,this),this.model=null,this.currentBackground=null,this.ui.background.addClass("transition-out")}},"onArtChange":function(e,t){this.load(t)}});return a}),define("hb!templates/desktop/alerts/Alert",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(){return"circle-ok"}function r(){return"circle-exclamation-mark"
}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var o,l,c,d="",u=this,h=n.helperMissing,p="function",f=this.escapeExpression;return d+='<button class="close-btn btn-link"><i class="glyphicon remove-2"></i></button>\n\n<i class="alert-icon glyphicon ',c={"hash":{},"inverse":u.program(3,r,s),"fn":u.program(1,a,s),"data":s},o=n.if_eq||t&&t.if_eq,l=o?o.call(t,t&&t.type,"success",c):h.call(t,"if_eq",t&&t.type,"success",c),(l||0===l)&&(d+=l),d+='"></i>\n<h4>',(l=n.message)?l=l.call(t,{"hash":{},"data":s}):(l=t&&t.message,l=typeof l===p?l.call(t,{"hash":{},"data":s}):l),d+=f(l)+"</h4>\n"
})}),define("plex/desktop/views/alerts/Alert",["hb!templates/desktop/alerts/Alert.tpl","underscore","marionette"],function(e,t,n){var i=n.ItemView.extend({"className":"alert transition-in","template":e,"alertDuration":2e3,"transitionDuration":500,"events":{"mouseenter":"onMouseEnter","mouseleave":"onMouseLeave","click .close-btn":"onCloseClick"},"initialize":function(e){t.isString(e)&&(e={"message":e}),this.type=e.type,this.message=e.message,"success"===this.type?this.$el.addClass("has-success"):"error"===this.type&&this.$el.addClass("has-error")
},"serializeData":function(){return{"type":this.type,"message":this.message}},"hide":function(){this.hiding=!0,this.$el.addClass("transition-out"),setTimeout(t.bind(function(){this.close()},this),500)},"onAfterRender":function(){this.$el[0].offsetHeight,this.$el.removeClass("transition-in"),this.hideTimeout=setTimeout(t.bind(this.hide,this),this.alertDuration)},"onMouseEnter":function(){this.hiding||(this.hideTimeout=clearTimeout(this.hideTimeout))},"onMouseLeave":function(){this.hideTimeout=setTimeout(t.bind(this.hide,this),this.alertDuration/2)
},"onCloseClick":function(e){e.preventDefault(),this.hiding||this.close()}});return i}),define("hb!templates/desktop/alerts/StatusAlert",["handlebars"],function(e){return e.template(function(e,t,n,i,s){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{},'<i class="alert-icon glyphicon cardio"></i>\n\n<span class="status"></span>\n'})}),define("plex/desktop/views/alerts/StatusAlert",["hb!templates/desktop/alerts/StatusAlert.tpl","underscore","marionette","plex/base/utils/Dispatcher"],function(e,t,n,i){var s=n.ItemView.extend({"className":"alert alert-status transition-out","template":e,"coolDown":!1,"alertDuration":5e3,"coolDownDuration":5e3,"ui":{"status":".status"},"events":{"mouseover":"onMouseOver"},"onlyAfterRender":["onShowStatus"],"initialize":function(){t.bindAll(this,"hide"),this.listenTo(i,"show:status",this.onShowStatus)
},"hide":function(){this.$el.addClass("transition-out")},"onShowStatus":function(e,t){this.coolDown||(this.server=e,this.ui.status.text(t),this.$el.removeClass("transition-out"),this.inactivityTimeout=clearTimeout(this.inactivityTimeout),this.inactivityTimeout=setTimeout(this.hide,this.alertDuration))},"onMouseOver":function(){this.inactivityTimeout=clearTimeout(this.inactivityTimeout),this.hide(),this.coolDown=!0,setTimeout(t.bind(function(){this.coolDown=!1},this),this.coolDownDuration)}});return s
}),define("hb!templates/desktop/players/VideoPlayerView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{},'<div class="video-container">\n  <div class="video-controls-container"></div>\n  <div class="video-post-play-container"></div>\n  <div class="video-details-container"></div>\n</div>\n'})}),define("plex/base/models/player/PlayerModel",["underscore","backbone"],function(e,t){var n={"item":null,"media":null,"part":null,"url":null,"playlist":null,"transcodeServer":null,"mediaIndex":-1,"partIndex":-1,"partCount":1,"qualityIndex":null,"videoStreamID":null,"audioStreamID":null,"subtitleStreamID":null,"type":"video"},i={"state":"stopped","stopped":!0,"paused":!1,"playing":!1,"buffering":!1,"error":!1,"errorMessage":null,"ready":!1,"loaded":!1,"ended":!1,"finished":!1,"embedHtml":null,"duration":0,"position":0,"volume":100,"startBuffer":0,"endBuffer":0,"shuffle":!1,"repeat":!1,"directPlay":!1},s={"showPlayPause":!1,"showStop":!1,"showVolume":!1,"showVideoStream":!1,"showAudioStream":!1,"showSubtitleStream":!1,"showShuffle":!1,"showRepeat":!1,"enablePrevious":!1,"enableNext":!1,"enableSeekBar":!1,"enableQueueActions":!1,"showQuality":!1,"showEnterFullscreen":!1,"showExitFullscreen":!1,"forceWebkitVideoFullscreen":!1},a=t.Model.extend({"controllerDefaults":s,"defaults":e.extend({},n,i,s),"initialize":function(){this.on("invalid",function(t,n){e.indexOf(n.keys,"duration")>-1&&(n.attrs.duration=Math.max(n.attrs.duration,0)),e.indexOf(n.keys,"position")>-1&&(n.attrs.position=Math.min(Math.max(n.attrs.position,0),n.attrs.duration)),e.indexOf(n.keys,"volume")>-1&&(n.attrs.volume=Math.min(Math.max(n.attrs.position,0),100)),t.set(n.attrs)
}),this.on("change:state",function(e,t){e.set({"stopped":"stopped"===t,"paused":"paused"===t,"playing":"playing"===t,"buffering":"buffering"===t,"error":"error"===t}),"stopped"!==t&&e.set("ended",!1)}),this.on("change:item",function(t,n){var i=t.get("playlist");i&&e(i.setSelectedItem).isFunction()&&(i.setSelectedItem(n),i.fetch())})},"validate":function(e){var t=[];return e.duration<0&&t.push("duration"),(e.position<0||e.position>e.duration)&&t.push("position"),(e.volume<0||e.volume>100)&&t.push("volume"),t.length?{"keys":t,"attrs":e}:void 0
}});return a}),define("hb!templates/desktop/modals/ConfirmModal",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s,a="";return a+='\n        <button type="button" class="cancel-btn btn btn-lg btn-default" data-dismiss="modal">',s={"hash":{},"data":t},a+=h((i=n.t||e&&e.t,i?i.call(e,e&&e.cancelLabel,s):u.call(e,"t",e&&e.cancelLabel,s)))+"</button>\n      "}function r(){return"btn-danger"}function o(){return"btn-primary"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};
var l,c,d="",u=n.helperMissing,h=this.escapeExpression,p="function",f=this;return d+='<div class="modal-dialog">\n  <div class="modal-content">\n    <div class="modal-header">\n      <button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button>\n      <h4 class="modal-title"><i class="modal-icon glyphicon circle-exclamation-mark"></i> ',(l=n.title)?l=l.call(t,{"hash":{},"data":s}):(l=t&&t.title,l=typeof l===p?l.call(t,{"hash":{},"data":s}):l),d+=h(l)+'</h4>\n    </div>\n\n    <div class="modal-body">',(l=n.message)?l=l.call(t,{"hash":{},"data":s}):(l=t&&t.message,l=typeof l===p?l.call(t,{"hash":{},"data":s}):l),d+=h(l)+'</div>\n\n    <div class="modal-footer">\n      ',l=n.unless.call(t,t&&t.hideCancel,{"hash":{},"inverse":f.noop,"fn":f.program(1,a,s),"data":s}),(l||0===l)&&(d+=l),d+='\n      <button type="button" class="confirm-btn btn btn-lg ',l=n["if"].call(t,t&&t.hasDanger,{"hash":{},"inverse":f.program(5,o,s),"fn":f.program(3,r,s),"data":s}),(l||0===l)&&(d+=l),d+=' btn-loading">\n        <div class="loading loading-sm"></div>\n        <span class="btn-label">',c={"hash":{},"data":s},d+=h((l=n.t||t&&t.t,l?l.call(t,t&&t.confirmLabel,c):u.call(t,"t",t&&t.confirmLabel,c)))+"</span>\n      </button>\n    </div>\n  </div>\n</div>\n"
})}),define("plex/desktop/views/modals/BaseModal",["underscore","marionette","plex/base/utils/Dispatcher"],function(e,t,n){var i=t.Layout.extend({"className":"modal fade","events":{"hide.bs.modal":"onHide"},"hide":function(){this.$el.modal("hide")},"onRender":function(){this.listenTo(n,"shortcut:escape",this.hide),this.$el.modal()},"onHide":function(){this.hidden=!0,setTimeout(e.bind(function(){n.trigger("hide:modal",this)},this),500)}});return i}),define("plex/desktop/views/modals/ConfirmModal",["hb!templates/desktop/modals/ConfirmModal.tpl","underscore","jquery","plex/desktop/views/modals/BaseModal"],function(e,t,n,i){var s=i.extend({"className":"confirm-modal modal modal-sm fade","template":e,"ui":{"confirmBtn":".confirm-btn"},"events":t.extend({"click .confirm-btn":"onConfirm"},i.prototype.events),"initialize":function(e){this.title=e.title,this.message=e.message,this.confirmLabel=e.confirmLabel||"Yes",this.cancelLabel=e.cancelLabel||"No",this.async=e.async,this.hasDanger=e.hasDanger,this.hideCancel=e.hideCancel,this.promise=n.Deferred()
},"serializeData":function(){return{"title":this.title,"message":this.message,"confirmLabel":this.confirmLabel,"cancelLabel":this.cancelLabel,"hasDanger":this.hasDanger,"hideCancel":this.hideCancel}},"onRender":function(){i.prototype.onRender.apply(this,arguments),setTimeout(t.bind(function(){this.ui.confirmBtn.focus()},this),200)},"onHide":function(){i.prototype.onHide.apply(this,arguments),this.promise.reject()},"onConfirm":function(e){e.preventDefault(),this.promise.resolve(),this.async?this.ui.confirmBtn.addClass("active"):this.hide()
}});return s}),define("hb!templates/desktop/modals/SelectMediaModal",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t,i){var s,a,c,d="";return d+='\n          <li class="striped-list-item select-list-item">\n            <a class="media" data-value="'+f((s=t,s=null==s||s===!1?s:s.index,typeof s===m?s.apply(e):s))+'" href="#">\n              ',c={"hash":{},"inverse":g.program(4,o,t),"fn":g.program(2,r,t),"data":t},s=n.if_eq||i&&i.if_eq,a=s?s.call(e,i&&i.type,"videoResolution",c):p.call(e,"if_eq",i&&i.type,"videoResolution",c),(a||0===a)&&(d+=a),d+="\n\n              ",a=n["if"].call(e,e&&e.videoCodec,{"hash":{},"inverse":g.noop,"fn":g.program(6,l,t),"data":t}),(a||0===a)&&(d+=a),d+="\n            </a>\n          </li>\n        "
}function r(e,t){var i,s,a="";return a+="\n                ",s={"hash":{},"data":t},a+=f((i=n.formatResolution||e&&e.formatResolution,i?i.call(e,e&&e.videoResolution,s):p.call(e,"formatResolution",e&&e.videoResolution,s)))+"\n              "}function o(e,t){var i,s,a="";return a+="\n                ",s={"hash":{},"data":t},a+=f((i=n.formatBitrate||e&&e.formatBitrate,i?i.call(e,e&&e.bitrate,0,s):p.call(e,"formatBitrate",e&&e.bitrate,0,s)))+"\n              "}function l(e){var t,n="";return n+="\n                ("+f((t=e&&e.videoCodec,typeof t===m?t.apply(e):t))+")\n              "
}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var c,d,u,h="",p=n.helperMissing,f=this.escapeExpression,m="function",g=this;return h+='<div class="modal-dialog">\n  <div class="modal-content">\n    <div class="modal-header">\n      <button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button>\n      <h4 class="modal-title"><i class="modal-icon glyphicon adjust-alt"></i> ',u={"hash":{},"data":s},h+=f((c=n.t||t&&t.t,c?c.call(t,"Select a Quality",u):p.call(t,"t","Select a Quality",u)))+'</h4>\n    </div>\n\n    <div class="modal-body modal-body-scroll minimal-scroll">\n      <ul class="list select-list">\n        ',d=n.each.call(t,t&&t.medias,{"hash":{},"inverse":g.noop,"fn":g.programWithDepth(1,a,s,t),"data":s}),(d||0===d)&&(h+=d),h+="\n      </ul>\n    </div>\n  </div>\n</div>\n"
})}),define("plex/desktop/views/modals/SelectModal",["underscore","jquery","plex/desktop/views/modals/BaseModal"],function(e,t,n){var i=n.extend({"className":"select-modal modal modal-sm fade","events":e.extend({"click a":"onClick"},n.prototype.events),"initialize":function(){this.promise=t.Deferred()},"onRender":function(){n.prototype.onRender.apply(this,arguments)},"onHide":function(){n.prototype.onHide.apply(this,arguments),this.promise.reject()},"onClick":function(e){e.preventDefault(),this.promise.resolve(t(e.currentTarget).data("value")),this.hide()
}});return i}),define("plex/desktop/views/modals/SelectMediaModal",["hb!templates/desktop/modals/SelectMediaModal.tpl","underscore","plex/desktop/views/modals/SelectModal"],function(e,t,n){var i=n.extend({"name":"selectMediaModal","template":e,"serializeData":function(){var e=this.model.get("Media"),n="videoResolution",i=t.uniq(t.pluck(e,n));return i.length<2&&(n="bitrate"),{"medias":e,"type":n}}});return i}),define("hb!templates/desktop/modals/SelectOffsetModal",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};
var a,r,o,l="",c=n.helperMissing,d=this.escapeExpression,u="function";return l+='<div class="modal-dialog">\n  <div class="modal-content">\n    <div class="modal-header">\n      <button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button>\n      <h4 class="modal-title"><i class="modal-icon glyphicon circle-arrow-right"></i> ',o={"hash":{},"data":s},l+=d((a=n.t||t&&t.t,a?a.call(t,"Resume",o):c.call(t,"t","Resume",o)))+'</h4>\n    </div>\n\n    <div class="modal-body">\n      <ul class="list select-list">\n        <li class="striped-list-item select-list-item"><a class="offset" data-value="',(r=n.offset)?r=r.call(t,{"hash":{},"data":s}):(r=t&&t.offset,r=typeof r===u?r.call(t,{"hash":{},"data":s}):r),l+=d(r)+'" href="#">',o={"hash":{},"data":s},l+=d((a=n.t||t&&t.t,a?a.call(t,"Resume from {1}",t&&t.formattedOffset,o):c.call(t,"t","Resume from {1}",t&&t.formattedOffset,o)))+'</a></li>\n        <li class="striped-list-item select-list-item"><a class="offset" data-value="0" href="#">',o={"hash":{},"data":s},l+=d((a=n.t||t&&t.t,a?a.call(t,"Start from beginning",o):c.call(t,"t","Start from beginning",o)))+"</a></li>\n      </ul>\n    </div>\n  </div>\n</div>\n"
})}),define("plex/desktop/views/modals/SelectOffsetModal",["hb!templates/desktop/modals/SelectOffsetModal.tpl","underscore","plex/base/utils/formatters/DateTimeUtil","plex/desktop/views/modals/SelectModal"],function(e,t,n,i){var s=i.extend({"name":"selectOffsetModal","template":e,"initialize":function(e){i.prototype.initialize.apply(this,arguments),this.offset=e.offset},"serializeData":function(){return{"offset":this.offset,"formattedOffset":n.formatDuration(this.offset)}}});return s}),define("hb!templates/desktop/players/controls/VideoPlayerControlsView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{},'<div class="video-background"></div>\n\n<video id="html-video" class="html-video"></video>\n<div class="flash-video">\n  <div id="flash-video-placeholder"></div>\n</div>\n\n<div class="video-overlay-loading"></div>\n<div class="video-loading loading loading-inline"></div>\n\n<div class="alert-player alert-paused"><i class="glyphicon play"></i></div>\n<button class="video-overlay-btn"></button>\n<button class="player-close-btn btn-gray"><i class="glyphicon remove-2"></i></button>\n\n<div class="video-error-message-container">\n  <div class="video-error-message"></div>\n</div>\n\n<div class="video-controls-overlay video-controls-overlay-top">\n  <div class="video-controls-left">\n    <span class="video-title"></span>\n  </div>\n\n  <div class="player-dropdowns-container video-controls-right">\n    <button class="player-close-btn btn-link"><i class="glyphicon remove-2"></i></button>\n    <button class="btn-link share-btn pull-left"><i class="glyphicon share"></i></button>\n    <button class="btn-link recommend-btn pull-left"><i class="glyphicon share-alt"></i></button>\n  </div>\n</div>\n\n<div class="video-controls-overlay video-controls-overlay-bottom">\n  <div class="video-controls-left">\n    <button class="previous-btn btn-link hidden"><i class="glyphicon fast-backward"></i></button>\n    <button class="play-btn btn-link hidden"><i class="glyphicon play"></i></button>\n    <button class="pause-btn btn-link hidden"><i class="glyphicon pause"></i></button>\n    <button class="stop-btn btn-link hidden"><i class="glyphicon stop"></i></button>\n    <button class="next-btn btn-link hidden"><i class="glyphicon fast-forward"></i></button>\n  </div>\n\n  <div class="player-dropups-container video-controls-right">\n    <button class="enter-fullscreen-btn fullscreen-btn btn-link hidden"><i class="glyphicon resize-full"></i></button>\n    <button class="exit-fullscreen-btn fullscreen-btn btn-link hidden"><i class="glyphicon resize-small"></i></button>\n    <button class="volume-btn btn-link btn-link-lg hidden">\n      <i class="glyphicon volume-up"></i>\n      <i class="glyphicon volume-down"></i>\n      <i class="glyphicon mute"></i>\n    </button>\n    <div class="player-volume-slider-container"></div>\n  </div>\n\n  <div class="video-controls-center-wrapper">\n    <div class="video-controls-center">\n      <div class="seek-bar-container">\n        <span class="player-position"></span>\n        <span class="player-duration"></span>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class="video-player-poster media-poster"></div>\n'
})}),define("plex/base/models/player/UpNextCollection",["plex/base/utils/types/MediaTypes","plex/base/models/BaseCollection","plex/base/models/library/PlayQueueMetadataModel"],function(e,t,n){var i={"audio":13,"video":8},s=t.extend({"model":n,"initialize":function(e,t){if(e)throw"models cannot be set directly.";this.model=t.model,this.collection=this.model.get("playlist"),this.listenTo(this.collection,{"reset":this._filter,"remove":this._filter,"add":this._filter}),this.listenTo(this.model,"change:item",this._filter),this._filter()
},"_filter":function(){var t=this.model.get("item"),n=this.collection.indexOf(t),s=e.getChildMediaType(t.get("type")).element,a=this.collection.slice(n+1,n+i[s]);this.set(a)}});return s}),define("plex/base/utils/PosterSizes",["underscore","plex/base/utils/BaseClass"],function(e,t){var n=1/1.5,i=1,s=16/9,a=5.2,r={"movie":n,"show":n,"season":n,"episode":s,"artist":i,"album":i,"track":i,"photo":i,"photoAlbum":i,"clip":s,"playlistItem":s,"channel":i,"channelDirectory":i,"folder":n,"friend":i,"poster":n,"art":s,"banner":a},o=t.extend({"getRatioByType":function(e){return r[e]
},"getPosterWidth":function(e,t){return t*r[e]},"getPosterHeight":function(e,t){return t/r[e]}});return new o}),define("plex/base/utils/PosterPlaceholders",[],function(){var e="placeholder-standard",t="placeholder-square",n="placeholder-widescreen",i="placeholder-folder",s="placeholder-friend";return{"movie":e,"show":e,"season":e,"episode":n,"artist":t,"album":t,"track":t,"photo":t,"photoAlbum":t,"clip":n,"playlistItem":n,"channel":t,"channelDirectory":t,"folder":i,"friend":s,"device":t,"poster":e,"art":n,"banner":n}
}),define("plex/desktop/views/images/MediaPosterImage",["underscore","plex/base/utils/PosterSizes","plex/base/utils/PosterPlaceholders","plex/desktop/views/images/BaseImage"],function(e,t,n,i){var s=i.extend({"background":!0,"setup":function(e){this.minSize=!0,this.type=e.type,this.modelAttribute=e.modelAttribute||"thumb",this.placeholderClass=this.model&&this.model.get("isFolder")?n.folder:n[this.type],i.prototype.setup.apply(this,arguments)},"setDimensions":function(e){e.width?e.height=t.getPosterHeight(this.type,e.width):e.height&&(e.width=t.getPosterWidth(this.type,e.height)),i.prototype.setDimensions.call(this,e)
},"setModel":function(){i.prototype.setModel.apply(this,arguments),this.model&&this.model.get("isFolder")&&(this.placeholderClass=n.folder)}});return s}),define("hb!templates/desktop/players/controls/SeekBarView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{},'<div class="player-slider-track">\n  <div class="player-slider-buffer"></div>\n  <div class="player-slider-progress"></div>\n</div>\n\n<div class="player-slider-thumb"></div>\n'
})}),define("hb!templates/desktop/players/controls/SliderView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{},'<div class="player-slider-track">\n  <div class="player-slider-progress"></div>\n</div>\n\n<div class="player-slider-thumb"></div>\n'})}),define("plex/desktop/views/players/controls/SliderView",["hb!templates/desktop/players/controls/SliderView.tpl","underscore","jquery","marionette"],function(e,t,n,i){var s=i.ItemView.extend({"className":"player-slider","template":e,"dragging":!1,"ui":{"thumb":".player-slider-thumb","track":".player-slider-track","progress":".player-slider-progress"},"events":{"mousedown":"onMouseDown","touchstart":"onTouchStart"},"initialize":function(e){t.bindAll(this,"onMouseMove","onMouseUp","onTouchMove","onTouchEnd"),this.$document=n(document),this.currentValue=e.value||0
},"startDragging":function(){this.dragging=!0,this.$el.addClass("active")},"stopDragging":function(){this.dragging=!1,this.$el.removeClass("active")},"update":function(e,t){var n=this.getValue(e);this.updateValue(n),this.setValue(n,t)},"getValue":function(e){var t=this.ui.track,n=e-t.offset().left,i=n/t.width();return i=Math.min(Math.max(i,0),1),i=Math.round(100*i)},"updateValue":function(e){this.currentValue=e,this.trigger("change:value",e)},"setValue":function(e,t){t||(t={}),(!this.dragging||t.force)&&(this.ui.thumb.css("left",e+"%"),this.ui.progress.css("width",e+"%"))
},"onRender":function(){this.setValue(this.currentValue)},"onClose":function(){this.$document.off("mousemove",this.onMouseMove),this.$document.off("mouseup",this.onMouseUp),this.$document.off("touchmove",this.onTouchMove),this.$document.off("touchend",this.onTouchEnd)},"onMouseDown":function(e){e.preventDefault(),this.$document.on("mousemove",this.onMouseMove),this.$document.on("mouseup",this.onMouseUp),this.startDragging(),this.updateValue(this.getValue(e.pageX))},"onTouchStart":function(e){this.$document.on("touchmove",this.onTouchMove),this.$document.on("touchend",this.onTouchEnd),this.startDragging();
var t=e.originalEvent.touches[0];t&&this.update(t.pageX)},"onMouseMove":function(e){e.preventDefault(),this.update(e.pageX,{"force":!0})},"onTouchMove":function(e){e.preventDefault();var t=e.originalEvent.touches[0];t&&this.update(t.pageX,{"force":!0})},"onMouseUp":function(e){e.preventDefault(),this.$document.off("mousemove",this.onMouseMove),this.$document.off("mouseup",this.onMouseUp),this.stopDragging(),this.update(e.pageX)},"onTouchEnd":function(e){this.$document.off("touchmove",this.onTouchMove),this.$document.off("touchend",this.onTouchEnd),this.stopDragging();
var t=e.originalEvent.touches[0];t&&this.update(t.pageX)}});return s}),define("plex/desktop/views/players/controls/SeekBarView",["hb!templates/desktop/players/controls/SeekBarView.tpl","underscore","jquery","plex/desktop/views/players/controls/SliderView"],function(e,t,n,i){var s=i.extend({"className":"player-seek-bar player-slider","template":e,"ui":{"thumb":".player-slider-thumb","track":".player-slider-track","progress":".player-slider-progress","buffer":".player-slider-buffer"},"modelEvents":{"change:position":"onPositionChange","change:startBuffer":"onBufferChange","change:endBuffer":"onBufferChange"},"normalizeValue":function(e){var t=this.model.get("duration");
return e=t?e/t*100:0,e=Math.min(Math.max(e,0),100)},"getValue":function(e){var t=this.model.get("duration"),n=this.ui.track,i=e-n.offset().left,s=i/n.width();return s=Math.min(Math.max(s,0),1),s*=t,Math.round(s)},"setValue":function(e,t){t||(t={}),(!this.dragging||t.force)&&(e=this.normalizeValue(e),this.ui.thumb.css("left",e+"%"),this.ui.progress.css("width",e+"%"))},"onPositionChange":function(e,t){this.setValue(t)},"onBufferChange":function(){var e=this.model.get("endBuffer"),t=this.normalizeValue(e);
this.ui.buffer.css("width",t+"%")}});return s}),define("hb!templates/desktop/players/controls/VideoPlayerQualityDropdown",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s,a,o="";return o+='\n    <li>\n      <a class="',a={"hash":{},"inverse":d.noop,"fn":d.program(2,r,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,e&&e.selectedQuality,"highest",a):u.call(e,"if_eq",e&&e.selectedQuality,"highest",a),(s||0===s)&&(o+=s),o+='" data-index="',(s=n.highestQuality)?s=s.call(e,{"hash":{},"data":t}):(s=e&&e.highestQuality,s=typeof s===h?s.call(e,{"hash":{},"data":t}):s),o+=p(s)+'" href="#">\n        ',a={"hash":{},"data":t},o+=p((i=n.t||e&&e.t,i?i.call(e,"Highest",a):u.call(e,"t","Highest",a)))+' <i class="player-dropdown-selected-icon selected-icon glyphicon ok-2"></i>\n      </a>\n    </li>\n  '
}function r(){return"selected"}function o(e,t,i){var s,a,o,l="";return l+='\n    <li>\n      <a class="',o={"hash":{},"inverse":d.noop,"fn":d.program(2,r,t),"data":t},s=n.if_eq||e&&e.if_eq,a=s?s.call(e,e&&e[0],i&&i.selectedQuality,o):u.call(e,"if_eq",e&&e[0],i&&i.selectedQuality,o),(a||0===a)&&(l+=a),l+='" data-index="'+p((s=e&&e[0],typeof s===h?s.apply(e):s))+'" href="#">\n        ',o={"hash":{},"data":t},l+=p((s=n.formatVideoQuality||e&&e.formatVideoQuality,s?s.call(e,e,o):u.call(e,"formatVideoQuality",e,o)))+' <i class="player-dropdown-selected-icon dropdown-selected-icon glyphicon ok-2"></i>\n      </a>\n    </li>\n  '
}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var l,c="",d=this,u=n.helperMissing,h="function",p=this.escapeExpression;return c+='<button class="btn-link dropdown-toggle" href="#player-quality-dropdown" data-toggle="dropdown">\n  <i class="glyphicon adjust-alt"></i>\n</button>\n\n<ul class="dropdown-menu pull-right">\n  ',l=n["if"].call(t,t&&t.showHighest,{"hash":{},"inverse":d.noop,"fn":d.program(1,a,s),"data":s}),(l||0===l)&&(c+=l),c+="\n\n  ",l=n.each.call(t,t&&t.videoQualities,{"hash":{},"inverse":d.noop,"fn":d.programWithDepth(4,o,s,t),"data":s}),(l||0===l)&&(c+=l),c+="\n</ul>\n"
})}),define("plex/desktop/views/players/controls/VideoPlayerQualityDropdown",["hb!templates/desktop/players/controls/VideoPlayerQualityDropdown.tpl","underscore","jquery","marionette","plex/base/utils/MediaUtil","plex/base/models/SettingsModel"],function(e,t,n,i,s,a){var r=i.ItemView.extend({"id":"player-quality-dropdown","tagName":"span","className":"dropdown hidden","template":e,"modelEvents":{"change:transcodeServer":"render","change:media":"render"},"events":{"click .dropdown-menu a":"onQualityClick"},"serializeData":function(){var e=this.model.get("transcodeServer"),n=this.model.get("media"),i=e&&e.get("transcoderVideo"),r=!n||!n.bitrate;
if(!i||r)return this.empty=!0,void this.$el.addClass("hidden");var o=null,l="highest",c=0,d=!1;this.qualityInfo=s.getQualityInfo(this.model.get("item"),a);var u=this.qualityInfo.index,h=n.bitrate,p=e.get("transcoderVideoQualities"),f=e.get("transcoderVideoBitrates"),m=e.get("transcoderVideoResolutions"),g=t.clone(p),v=t.clone(f),y=t.clone(m);if(g.length>1&&v.length>1&&y.length>1){this.model.get("showQuality")&&this.$el.hasClass("hidden")&&this.$el.removeClass("hidden"),this.empty=!1,c=g.length-1;
for(var b=0,w=v.length;w>b;b++){var x=v[b];if(h>x)break}b>0?(d=!0,u<v.length-b&&(l=u),g.splice(0,b),v.splice(0,b),y.splice(0,b)):l=u,o=t.zip(g,v,y)}else this.empty=!0,this.$el.addClass("hidden");return{"videoQualities":o,"selectedQuality":l,"highestQuality":c,"showHighest":d}},"onQualityClick":function(e){e.preventDefault();{var t=n(e.currentTarget);this.model.get("transcodeServer")}if(!t.hasClass("selected")){var i=parseInt(t.data("index"),10);a.save(this.qualityInfo.attribute,i),this.model.set("qualityIndex",i),this.$(".selected").removeClass("selected"),t.addClass("selected")
}}});return r}),define("hb!templates/desktop/players/controls/VideoPlayerStreamDropdown",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(){return"audio"}function r(){return"subtitles"}function o(e,t,i){var s,a,r,o="";return o+='\n    <li><a class="',s=n["if"].call(e,e&&e.selected,{"hash":{},"inverse":S.noop,"fn":S.program(6,l,t),"data":t}),(s||0===s)&&(o+=s),o+='"  data-id="',(s=n.id)?s=s.call(e,{"hash":{},"data":t}):(s=e&&e.id,s=typeof s===w?s.call(e,{"hash":{},"data":t}):s),o+=x(s)+'" href="#">',s=n["if"].call(e,e&&e.language,{"hash":{},"inverse":S.program(10,d,t),"fn":S.program(8,c,t),"data":t}),(s||0===s)&&(o+=s),r={"hash":{},"inverse":S.noop,"fn":S.program(12,u,t),"data":t},s=n.if_eq||i&&i.if_eq,a=s?s.call(e,i&&i.type,"subtitles",r):k.call(e,"if_eq",i&&i.type,"subtitles",r),(a||0===a)&&(o+=a),r={"hash":{},"inverse":S.noop,"fn":S.program(16,f,t),"data":t},s=n.if_eq||i&&i.if_eq,a=s?s.call(e,i&&i.type,"audio",r):k.call(e,"if_eq",i&&i.type,"audio",r),(a||0===a)&&(o+=a),o+=' <i class="player-dropdown-selected-icon dropdown-selected-icon glyphicon ok-2"></i></a></li>\n  '
}function l(){return"selected"}function c(e,t){var i;return(i=n.language)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.language,i=typeof i===w?i.call(e,{"hash":{},"data":t}):i),x(i)}function d(e,t){var i,s;return s={"hash":{},"data":t},x((i=n.t||e&&e.t,i?i.call(e,"Unknown",s):k.call(e,"t","Unknown",s)))}function u(e,t){var i;return i=n["if"].call(e,e&&e.format,{"hash":{},"inverse":S.noop,"fn":S.program(13,h,t),"data":t}),i||0===i?i:""}function h(e,t){var i,s,a,r="";return r+=" (",a={"hash":{},"data":t},r+=x((i=n.upperCase||e&&e.upperCase,i?i.call(e,e&&e.format,a):k.call(e,"upperCase",e&&e.format,a))),s=n["if"].call(e,e&&e.forced,{"hash":{},"inverse":S.noop,"fn":S.program(14,p,t),"data":t}),(s||0===s)&&(r+=s),r+=")"
}function p(e,t){var i,s,a="";return a+=" ",s={"hash":{},"data":t},a+=x((i=n.t||e&&e.t,i?i.call(e,"Forced",s):k.call(e,"t","Forced",s)))}function f(e,t){var i;return i=n["if"].call(e,e&&e.codec,{"hash":{},"inverse":S.noop,"fn":S.program(17,m,t),"data":t}),i||0===i?i:""}function m(e,t){var i,s,a="";return a+=" (",s={"hash":{},"data":t},a+=x((i=n.formatAudioCodec||e&&e.formatAudioCodec,i?i.call(e,e&&e.codec,s):k.call(e,"formatAudioCodec",e&&e.codec,s)))+" ",s={"hash":{},"data":t},a+=x((i=n.formatAudioChannels||e&&e.formatAudioChannels,i?i.call(e,e&&e.channels,s):k.call(e,"formatAudioChannels",e&&e.channels,s)))+")"
}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var g,v,y,b="",w="function",x=this.escapeExpression,k=n.helperMissing,S=this;return b+='<button class="btn-link dropdown-toggle" href="#player-',(g=n.type)?g=g.call(t,{"hash":{},"data":s}):(g=t&&t.type,g=typeof g===w?g.call(t,{"hash":{},"data":s}):g),b+=x(g)+'-dropdown" data-toggle="dropdown">\n  <i class="plex-icon ',y={"hash":{},"inverse":S.program(3,r,s),"fn":S.program(1,a,s),"data":s},g=n.if_eq||t&&t.if_eq,v=g?g.call(t,t&&t.type,"audio",y):k.call(t,"if_eq",t&&t.type,"audio",y),(v||0===v)&&(b+=v),b+='"></i>\n</button>\n\n<ul class="dropdown-menu pull-right">\n  ',v=n.each.call(t,t&&t.streams,{"hash":{},"inverse":S.noop,"fn":S.programWithDepth(5,o,s,t),"data":s}),(v||0===v)&&(b+=v),b+="\n</ul>\n"
})}),define("plex/desktop/views/players/controls/VideoPlayerStreamDropdown",["hb!templates/desktop/players/controls/VideoPlayerStreamDropdown.tpl","underscore","jquery","marionette","plex/base/utils/MediaUtil","plex/base/utils/types/StreamTypes","plex/base/models/SettingsModel","plex/base/commands/Commands"],function(e,t,n,i,s,a,r,o){var l=i.ItemView.extend({"id":"player-quality-dropdown","tagName":"span","className":"dropdown hidden","template":e,"modelEvents":{"change:media":"render"},"events":{"click .dropdown-menu a":"onStreamClick"},"initialize":function(e){this.streamType=a.getStreamTypeByString(e.type)
},"serializeData":function(){var e=this.model.get("media"),t=this.streamType.typeString;if(!e)return this.empty=!0,this.$el.addClass("hidden"),{"type":t};var n="audio"===t?"showAudioStream":"showSubtitleStream";this.model.get(n)&&this.$el.hasClass("hidden")&&this.$el.removeClass("hidden");var i=s.getStreams(e,{"streamType":this.streamType.id});if(i.length<2)return this.empty=!0,this.$el.addClass("hidden"),{"type":t};var a,r=s.getStreams(e,{"streamType":this.streamType.id,"selected":!0});return r.length&&(a=r[0]),this.empty=!1,{"type":t,"streams":i,"selectedStream":a}
},"onRender":function(){this.$el.attr("id",this.streamType.typeString+"-dropdown-list")},"onStreamClick":function(e){e.preventDefault();var i=n(e.currentTarget),s=i.data("id"),a=this.streamType.typeString,r="audio"===a?"audioStreamID":"subtitleStreamID",l=o.execute("selectStream",{"type":this.streamType.id,"item":this.model.get("item"),"streamID":s});l.done(t.bind(function(){this.model.set(r,s)},this)),this.$(".selected").removeClass("selected"),i.addClass("selected")}});return l}),define("hb!templates/desktop/players/controls/VideoPlayerPrimaryPlayerDropdown",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(){return"dropdown-casting"
}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var r,o="",l=this;return o+='<button class="btn-link dropdown-toggle ',r=n["if"].call(t,t&&t.primaryPlayer,{"hash":{},"inverse":l.noop,"fn":l.program(1,a,s),"data":s}),(r||0===r)&&(o+=r),o+='" href="#player-primary-player-dropdown" data-toggle="dropdown">\n  <i class="plex-icon cast-player"></i><i class="plex-icon adjust-alt"></i>\n</button>\n'})}),define("hb!templates/desktop/dropdowns/PrimaryPlayerDropdown",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(){return"dropdown-casting"
}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var r,o="",l=this;return o+='<a class="dropdown-toggle ',r=n["if"].call(t,t&&t.primaryPlayer,{"hash":{},"inverse":l.noop,"fn":l.program(1,a,s),"data":s}),(r||0===r)&&(o+=r),o+='" href="#primary-player-dropdown" data-toggle="dropdown">\n  <i class="plex-icon cast-player"></i><i class="caret-icon"></i>\n</a>\n'})}),define("hb!templates/desktop/dropdowns/PrimaryPlayerDropdownList",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s,a,l="";
return l+='\n  <li class="dropdown-header"><span class="dropdown-truncated-label">',i=n["if"].call(e,e&&e.nowPlaying,{"hash":{},"inverse":y.noop,"fn":y.program(2,r,t),"data":t}),(i||0===i)&&(l+=i),l+=g((i=e&&e.primaryPlayer,i=null==i||i===!1?i:i.name,typeof i===v?i.apply(e):i))+"</span></li>\n\n  ",s=n["if"].call(e,e&&e.showNowPlaying,{"hash":{},"inverse":y.noop,"fn":y.program(4,o,t),"data":t}),(s||0===s)&&(l+=s),l+='\n\n  <li>\n    <a class="local-player-btn" href="#">\n      <i class="glyphicon ban"></i> ',a={"hash":{},"data":t},l+=g((i=n.t||e&&e.t,i?i.call(e,"Disconnect",a):m.call(e,"t","Disconnect",a)))+"\n    </a>\n  </li>\n"
}function r(e,t){var i,s,a="";return s={"hash":{},"data":t},a+=g((i=n.t||e&&e.t,i?i.call(e,"Casting on",s):m.call(e,"t","Casting on",s)))+" "}function o(e,t){var i,s="";return s+="\n    ",i=n.each.call(e,e&&e.nowPlaying,{"hash":{},"inverse":y.noop,"fn":y.program(5,l,t),"data":t}),(i||0===i)&&(s+=i),s+="\n  "}function l(e,t){var i,s="";return s+='\n      <li>\n        <a class="now-playing-btn" data-id="',(i=n.ratingKey)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.ratingKey,i=typeof i===v?i.call(e,{"hash":{},"data":t}):i),s+=g(i)+'" href="#">\n          <i class="glyphicon play"></i> <span class="dropdown-truncated-label">',(i=n.title)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.title,i=typeof i===v?i.call(e,{"hash":{},"data":t}):i),s+=g(i)+"</span>\n        </a>\n      </li>\n    "
}function c(e,t){var i,s="";return s+="\n  ",i=n.each.call(e,e&&e.plexPlayers,{"hash":{},"inverse":y.noop,"fn":y.program(8,d,t),"data":t}),(i||0===i)&&(s+=i),s+="\n\n  ",i=n.each.call(e,e&&e.castPlayers,{"hash":{},"inverse":y.noop,"fn":y.program(11,h,t),"data":t}),(i||0===i)&&(s+=i),s+="\n"}function d(e,t){var i,s="";return s+='\n    <li>\n      <a class="plex-player-btn" data-id="',(i=n.machineIdentifier)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.machineIdentifier,i=typeof i===v?i.call(e,{"hash":{},"data":t}):i),s+=g(i)+'" href="#">\n        <i class="dropdown-item-icon plex-icon plex-player"></i> <span class="dropdown-truncated-label">',(i=n.name)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.name,i=typeof i===v?i.call(e,{"hash":{},"data":t}):i),s+=g(i)+"</span>\n        ",i=n["if"].call(e,e&&e.selected,{"hash":{},"inverse":y.noop,"fn":y.program(9,u,t),"data":t}),(i||0===i)&&(s+=i),s+="\n      </a>\n    </li>\n  "
}function u(){return'<i class="dropdown-selected-icon glyphicon ok-2"></i>'}function h(e,t){var i,s="";return s+='\n    <li>\n      <a class="cast-player-btn" data-id="',(i=n.id)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.id,i=typeof i===v?i.call(e,{"hash":{},"data":t}):i),s+=g(i)+'" href="#">\n        <i class="dropdown-item-icon plex-icon cast-player"></i> <span class="dropdown-truncated-label">',(i=n.name)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.name,i=typeof i===v?i.call(e,{"hash":{},"data":t}):i),s+=g(i)+"</span>\n        ",i=n["if"].call(e,e&&e.selected,{"hash":{},"inverse":y.noop,"fn":y.program(9,u,t),"data":t}),(i||0===i)&&(s+=i),s+="\n      </a>\n    </li>\n  "
}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var p,f="",m=n.helperMissing,g=this.escapeExpression,v="function",y=this;return p=n["if"].call(t,t&&t.primaryPlayer,{"hash":{},"inverse":y.program(7,c,s),"fn":y.program(1,a,s),"data":s}),(p||0===p)&&(f+=p),f+="\n"})}),define("hb!templates/desktop/modals/PlexPassModal",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s,a,r="";return r+='\n        <h4 class="text-center">',a={"hash":{},"data":t},r+=h((i=n.t||e&&e.t,i?i.call(e,"This feature requires a Plex Pass subscription.",a):u.call(e,"t","This feature requires a Plex Pass subscription.",a)))+'</h4>\n\n        <p class="text-muted">',a={"hash":{},"data":t},r+=h((i=n.t||e&&e.t,i?i.call(e,"Everything you need to experience the best of Plex. Your subscription gives you premium features and exclusive access to new ones.",a):u.call(e,"t","Everything you need to experience the best of Plex. Your subscription gives you premium features and exclusive access to new ones.",a)))+'</p>\n\n        <p class="text-center">\n          <a class="btn btn-sm btn-primary" href="',(s=n.plexPassUrl)?s=s.call(e,{"hash":{},"data":t}):(s=e&&e.plexPassUrl,s=typeof s===p?s.call(e,{"hash":{},"data":t}):s),r+=h(s)+'" target="_blank">',a={"hash":{},"data":t},r+=h((i=n.t||e&&e.t,i?i.call(e,"Learn More",a):u.call(e,"t","Learn More",a)))+"</a>\n        </p>\n      "
}function r(e,t){var i,s,a="";return a+='\n        <h4 class="text-center">',s={"hash":{},"data":t},a+=h((i=n.t||e&&e.t,i?i.call(e,"{1}Sign in{2} to a Plex account with a Plex Pass subscription.","<a class='sign-in-btn' href='#'>","</a>",s):u.call(e,"t","{1}Sign in{2} to a Plex account with a Plex Pass subscription.","<a class='sign-in-btn' href='#'>","</a>",s)))+"</h4>\n      "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var o,l,c,d="",u=n.helperMissing,h=this.escapeExpression,p="function",f=this;
return d+='<div class="modal-dialog">\n  <div class="modal-content">\n    <div class="modal-header">\n      <button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button>\n      <h4 class="modal-title">\n        <i class="modal-icon glyphicon circle-arrow-right"></i>\n        ',c={"hash":{},"data":s},d+=h((o=n.t||t&&t.t,o?o.call(t,"Go Premium",c):u.call(t,"t","Go Premium",c)))+'\n      </h4>\n    </div>\n\n    <div class="modal-body">\n      <p class="text-center"><i class="plex-image plex-pass"></i></p>\n\n      ',l=n["if"].call(t,t&&t.signedIn,{"hash":{},"inverse":f.program(3,r,s),"fn":f.program(1,a,s),"data":s}),(l||0===l)&&(d+=l),d+="\n    </div>\n  </div>\n</div>\n"
})}),define("plex/desktop/views/modals/PlexPassModal",["hb!templates/desktop/modals/PlexPassModal.tpl","underscore","plex/base/utils/Dispatcher","plex/desktop/views/modals/BaseModal"],function(e,t,n,i){var s=i.extend({"name":"plexPassModal","template":e,"events":t.extend({"click .sign-in-btn":"onSignInClick"},i.prototype.events),"serializeData":function(){return{"signedIn":this.model.get("signedIn"),"plexPassUrl":this.model.server.get("plexPassUrl")}},"onSignInClick":function(e){e.preventDefault(),this.hide(),n.trigger("navigate","login",{"silent":!0})
}});return s}),define("plex/desktop/views/dropdowns/PrimaryPlayerDropdownList",["hb!templates/desktop/dropdowns/PrimaryPlayerDropdownList.tpl","underscore","jquery","marionette","plex/base/utils/Dispatcher","plex/base/commands/Commands","plex/base/models/AppModel","plex/desktop/views/modals/PlexPassModal"],function(e,t,n,i,s,a,r){var o=i.ItemView.extend({"tagName":"ul","className":"dropdown-menu pull-right","template":e,"events":{"click .local-player-btn":"onLocalPlayerClick","click .plex-player-btn":"onPlexPlayerClick","click .cast-player-btn":"onCastPlayerClick","click .now-playing-btn":"onNowPlayingClick"},"initialize":function(e){e||(e={}),this.showNowPlaying=e.showNowPlaying,this.plexPlayers=r.get("plexPlayers"),this.castPlayers=r.get("castPlayers")
},"serializeData":function(){var e=r.get("primaryPlayer");return{"showNowPlaying":this.showNowPlaying,"primaryPlayer":e?e.toJSON():null,"nowPlaying":e?e.get("nowPlaying").toJSON():null,"plexPlayers":this.plexPlayers.toJSON(),"castPlayers":this.castPlayers.toJSON()}},"onLocalPlayerClick":function(e){e.preventDefault(),r.set("primaryPlayer",null)},"onPlexPlayerClick":function(e){e.preventDefault();var t=n(e.currentTarget).data("id"),i=this.plexPlayers.get(t);r.set("primaryPlayer",i)},"onCastPlayerClick":function(e){e.preventDefault();
var t=n(e.currentTarget).data("id"),i=this.castPlayers.get(t);r.set("primaryPlayer",i)},"onNowPlayingClick":function(e){e.preventDefault();var t=r.get("primaryPlayer"),i=t.get("nowPlaying"),s=n(e.currentTarget).data("id"),o=i.get(s);a.execute("playMedia",{"item":o})}});return o}),define("plex/desktop/views/dropdowns/PrimaryPlayerDropdown",["hb!templates/desktop/dropdowns/PrimaryPlayerDropdown.tpl","marionette","plex/base/commands/Commands","plex/base/models/AppModel","plex/desktop/views/dropdowns/PrimaryPlayerDropdownList"],function(e,t,n,i,s){var a=t.Layout.extend({"id":"primary-player-dropdown","tagName":"li","className":"nav-dropdown dropdown","template":e,"regions":{"list":".dropdown-menu"},"initialize":function(e){e||(e={}),this.showNowPlaying=e.showNowPlaying,this.plexPlayers=i.get("plexPlayers"),this.castPlayers=i.get("castPlayers"),this.listenTo(i,"change:primaryPlayer",this.onPrimaryPlayerChange),this.listenTo(this.plexPlayers,"reset",this.render),this.listenTo(this.castPlayers,"reset",this.render),this.setup()
},"setup":function(){var e=i.get("primaryPlayer");if(e){var t=e.get("nowPlaying");this.listenTo(t,{"reset":this.render,"add":this.render,"remove":this.render})}},"serializeData":function(){return{"primaryPlayer":!!i.get("primaryPlayer")}},"onRender":function(){var e=this.plexPlayers.length+this.castPlayers.length>0;this.$el.toggleClass("hidden",!e),this.list.append(new s({"showNowPlaying":this.showNowPlaying}),this.$el)},"onPrimaryPlayerChange":function(e){var t=e.previous("primaryPlayer");t&&this.stopListening(t.get("nowPlaying")),this.setup(),this.render()
}});return a}),define("plex/desktop/views/players/controls/VideoPlayerPrimaryPlayerDropdown",["hb!templates/desktop/players/controls/VideoPlayerPrimaryPlayerDropdown.tpl","plex/desktop/views/dropdowns/PrimaryPlayerDropdown"],function(e,t){var n=t.extend({"id":"player-primary-player-dropdown","tagName":"span","className":"dropdown","template":e});return n}),define("hb!templates/desktop/dropdowns/PlayQueueDropdown",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(){return" hidden"
}function r(){return"readonly"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var o,l,c="",d=this,u=n.helperMissing,h=this.escapeExpression;return c+='<button class="btn-link dropdown-toggle',o=n.unless.call(t,t&&t.canEdit,{"hash":{},"inverse":d.noop,"fn":d.program(1,a,s),"data":s}),(o||0===o)&&(c+=o),c+='" href="#play-queue-dropdown" data-toggle="dropdown">\n  <i class="glyphicon show-thumbnails-with-lines"></i>\n</button>\n\n<ol class="play-queue-list dropdown-menu pull-right ',o=n.unless.call(t,t&&t.canEdit,{"hash":{},"inverse":d.noop,"fn":d.program(3,r,s),"data":s}),(o||0===o)&&(c+=o),c+='">\n  <li class="dropdown-header play-queue-header">\n    <i class="glyphicon show-thumbnails-with-lines"></i> ',l={"hash":{},"data":s},c+=h((o=n.t||t&&t.t,o?o.call(t,"Up Next",l):u.call(t,"t","Up Next",l)))+"\n  </li>\n</ol>\n"
})}),function(e){"function"==typeof define&&define.amd?define("sortable",e):window.Sortable=e()}(function(){function e(e,n){this.el=e,this.options=n=n||{},n.group=n.group||Math.random(),n.handle=n.handle||null,n.draggable=n.draggable||e.children[0]&&e.children[0].nodeName||"li",n.listClass=n.ghostClass||"sortable-list",n.dragClass=n.dragClass||"sortable-drag",n.ghostClass=n.ghostClass||"sortable-ghost",n.onAdd=t(this,n.onAdd||A),n.onUpdate=t(this,n.onUpdate||A),n.onRemove=t(this,n.onRemove||A),e[w]=n.group;
for(var i in this)"_"===i.charAt(0)&&(this[i]=t(this,this[i]));s(e,"add",n.onAdd),s(e,"update",n.onUpdate),s(e,"remove",n.onRemove),s(e,"mousedown",this._onTapStart),s(e,"touchstart",this._onTapStart),s(e,"dragover",this._onDragOver),s(e,"dragenter",this._onDragOver),P.push(this._onDragOver)}function t(e,t){var n=I.call(arguments,2);return t.bind?t.bind.apply(t,[e].concat(n)):function(){return t.apply(e,n.concat(I.call(arguments)))}}function n(e,t,n){if(e){n=n||k,t=t.split(".");var i=t.shift().toUpperCase(),s=new RegExp("\\s("+t.join("|")+")\\s","g");
do if(!(""!==i&&e.nodeName!=i||t.length&&((" "+e.className+" ").match(s)||[]).length!=t.length))return e;while(e!==n&&(e=e.parentNode))}return null}function i(e){e.dataTransfer.dropEffect="move",e.preventDefault()}function s(e,t,n){e.addEventListener(t,n,!1)}function a(e,t,n){e.removeEventListener(t,n,!1)}function r(e,t,n){if(e)if(e.classList)e.classList[n?"add":"remove"](t);else{var i=(" "+e.className+" ").replace(/\s+/g," ").replace(" "+t+" ","");e.className=i+(n?" "+t:"")}}function o(e,t,n){if(e&&e.style){if(void 0===n)return k.defaultView&&k.defaultView.getComputedStyle?n=k.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];
e.style[t]=n+("string"==typeof n?"":"px")}}function l(e,t,n){if(e){var i=e.getElementsByTagName(t),s=0,a=i.length;if(n)for(;a>s;s++)n(i[s],s);return i}return[]}function c(e){return e.draggable=!1}function d(){C=!1}var u,h,p,f,m,g,v,y,b,w="Sortable"+(new Date).getTime(),x=window,k=x.document,S=x.parseInt,C=!1,T=function(e,t){var n=k.createEvent("Event");return n.initEvent(e,!0,!0),n.item=t,n},A=function(){},I=[].slice,P=[];return e.prototype={"constructor":e,"_applyEffects":function(){r(u,this.options.dragClass,!1),r(u,this.options.ghostClass,!0)
},"_onTapStart":function(e){var t=e.touches&&e.touches[0],a=(t||e).target,r=this.options,o=this.el;if(r.handle&&(a=n(a,r.handle,o)),a=n(a,r.draggable,o),a&&!u&&a.parentNode===o){y=e,a.draggable=!0,l(a,"a",c),l(a,"img",c),t&&(y={"target":a,"clientX":t.clientX,"clientY":t.clientY},this._onDragStart(y,!0),e.preventDefault()),s(this.el,"dragstart",this._onDragStart),s(this.el,"dragend",this._onDrop),s(k,"dragover",i);try{k.selection?k.selection.empty():window.getSelection().removeAllRanges()}catch(d){}}},"_emulateDragOver":function(){if(b){o(h,"display","none");
var e=k.elementFromPoint(b.clientX,b.clientY),t=e,n=this.options.group,i=P.length;do{if(t[w]===n){for(;i--;)P[i]({"clientX":b.clientX,"clientY":b.clientY,"target":e,"rootEl":t});break}e=t}while(t=t.parentNode);o(h,"display","")}},"_onTouchMove":function(e){if(y){var t=e.touches[0],n=t.clientX-y.clientX,i=t.clientY-y.clientY;b=t,o(h,"webkitTransform","translate3d("+n+"px,"+i+"px,0)")}},"_onDragStart":function(e,t){var n=e.target,i=e.dataTransfer;if(p=this.el,u=n,f=n.nextSibling,v=this.options.group,r(p,this.options.listClass,!0),r(u,this.options.dragClass,!0),t){var a,l=n.getBoundingClientRect(),c=o(n);
h=n.cloneNode(!0),o(h,"top",l.top-S(c.marginTop,10)),o(h,"left",l.left-S(c.marginLeft,10)),o(h,"width",l.width),o(h,"height",l.height),o(h,"opacity","0.8"),o(h,"position","fixed"),o(h,"zIndex","100000"),p.appendChild(h),a=h.getBoundingClientRect(),o(h,"width",2*l.width-a.width),o(h,"height",2*l.height-a.height),s(k,"touchmove",this._onTouchMove),s(k,"touchend",this._onDrop),this._loopId=setInterval(this._emulateDragOver,150)}else i.effectAllowed="move",i.setData("Text",n.textContent),s(k,"drop",this._onDrop);
setTimeout(this._applyEffects)},"_onDragOver":function(e){if(!C&&v===this.options.group&&(void 0===e.rootEl||e.rootEl===this.el)){var t=this.el,i=n(e.target,this.options.draggable,t);if(0===t.children.length||t.children[0]===h)t.appendChild(u);else if(i&&i!==u&&void 0!==i.parentNode[w]){m!==i&&(m=i,g=o(i));var s,a=i.getBoundingClientRect(),r=a.right-a.left,l=a.bottom-a.top,c=/left|right|inline/.test(g.cssFloat+g.display),p=(c?(e.clientX-a.left)/r:(e.clientY-a.top)/l)>.5,f=i.offsetWidth>u.offsetWidth,y=i.offsetHeight>u.offsetHeight,b=i.nextSibling;
C=!0,setTimeout(d,30),s=c?i.previousElementSibling===u&&!f||p>.5&&f:i.nextElementSibling!==u&&!y||p>.5&&y,s&&!b?t.appendChild(u):i.parentNode.insertBefore(u,s?b:i)}}},"_onDrop":function(e){clearInterval(this._loopId),a(k,"drop",this._onDrop),a(k,"dragover",i),a(this.el,"dragend",this._onDrop),a(this.el,"dragstart",this._onDragStart),a(k,"touchmove",this._onTouchMove),a(k,"touchend",this._onDrop),e&&(e.preventDefault(),e.stopPropagation(),h&&h.parentNode.removeChild(h),p&&r(p,this.options.listClass,!1),u&&(r(u,this.options.ghostClass,!1),r(u,this.options.dragClass,!1),p.contains(u)?u.nextSibling!==f&&u.dispatchEvent(T("update",u)):(p.dispatchEvent(T("remove",u)),u.dispatchEvent(T("add",u)))),p=u=h=f=y=b=m=g=v=null)
},"destroy":function(){var e=this.el,t=this.options;a(e,"add",t.onAdd),a(e,"update",t.onUpdate),a(e,"remove",t.onRemove),a(e,"mousedown",this._onTapStart),a(e,"touchstart",this._onTapStart),a(e,"dragover",this._onDragOver),a(e,"dragenter",this._onDragOver),P.splice(P.indexOf(this._onDragOver),1),this._onDrop(),this.el=null}},e.utils={"on":s,"off":a,"css":o,"find":l,"bind":t,"closest":n,"toggleClass":r},e.version="0.1.5",e}),define("plex/desktop/views/lists/BaseList",["underscore","marionette"],function(e,t){var n=t.CollectionView.extend({"appendHtml":function(){return this.sorted?this.sortedAppendHtml.apply(this,arguments):this.reversed?this.reversedAppendHtml.apply(this,arguments):t.CollectionView.prototype.appendHtml.apply(this,arguments)
},"sortedAppendHtml":function(e,t,n){if(e.isBuffering){var i=e.elBuffer.childNodes;i.length<=n?e.elBuffer.appendChild(t.el):e.elBuffer.insertBefore(t.el,i[n]),e._bufferedChildren.push(t)}else{var s=e.itemViewContainer?e.$(e.itemViewContainer):e.$el,a=s.children();a.size()<=n?s.append(t.el):a.eq(n).before(t.el)}},"reversedAppendHtml":function(e,t){if(e.isBuffering)e.elBuffer.insertBefore(t.el,e.elBuffer.firstChild),e._bufferedChildren.push(t);else{var n=e.itemViewContainer?e.$(e.itemViewContainer):e.$el;
n.prepend(t.el)}},"measureList":function(){if(this.children.length){var t=this.children._views,n=t[e.first(e.keys(t))];e.defer(e.bind(function(){this.itemWidth=n.$el.outerWidth(!0),this.itemHeight=n.$el.outerHeight(!0),this.itemMarginRight=parseInt(n.$el.css("margin-right"),10),this.itemMarginBottom=parseInt(n.$el.css("margin-bottom"),10),this.triggerMethod("measure",this)},this))}},"onCollectionRendered":function(){this.measure&&this.measureList()}});return n}),define("hb!templates/desktop/dropdowns/PlayQueueItem",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};
var a,r="",o="function",l=this.escapeExpression;return r+='<a href="#">\n  <div class="media-poster ',(a=n.type)?a=a.call(t,{"hash":{},"data":s}):(a=t&&t.type,a=typeof a===o?a.call(t,{"hash":{},"data":s}):a),r+=l(a)+'"></div>\n\n  <div class="media-item">\n    <div class="media-title"></div>\n    <div class="media-subtitle-1"><span class="media-primary-subtitle"></span><span class="media-secondary-subtitle"></span></div>\n  </div>\n\n  <button class="delete-btn btn-link btn-danger" tabindex="-1"><i class="glyphicon ban"></i></button>\n</a>\n'
})}),define("plex/desktop/views/dropdowns/PlayQueueItem",["hb!templates/desktop/dropdowns/PlayQueueItem.tpl","marionette","plex/base/utils/MediaUtil","plex/base/utils/formatters/DateTimeUtil","plex/desktop/views/images/MediaPosterImage"],function(e,t,n,i,s){var a=t.ItemView.extend({"template":e,"tagName":"li","className":"play-queue-list-item","attributes":function(){return{"data-play-queue-id":this.model.get("playQueueItemID")||this.model.get("ratingKey")}},"ui":{"poster":".media-poster"},"events":{"click":"playItem","click .delete-btn":"removeItem"},"initialize":function(e){this.closeOnInstall=e.closeOnInstall,this.type=this.model.get("type");
var t=40;"episode"===this.type||"clip"===this.type?t=70:"movie"===this.type&&(t=30),this.image=new s({"model":this.model,"type":this.model.get("type"),"getUrl":this.getPosterUrl,"width":t})},"getPosterUrl":function(e){return e=e||this.model.get("parentThumb")||this.model.get("grandparentThumb"),e||(this.model.parent?e=this.model.parent.get("thumb"):this.model.channel&&(e=this.model.channel.get("thumb"))),e},"playItem":function(e){e.preventDefault(),this.trigger("skip",this.model)},"removeItem":function(e){e.preventDefault(),e.stopImmediatePropagation(),this.trigger("remove",this.model)
},"serializeData":function(){return{"type":this.type}},"bindings":{".media-title":{"modelAttribute":"title"},".media-primary-subtitle":{"modelAttribute":"grandparentTitle","modelListeners":["grandparentTitle","duration"],"formatter":function(e){var t=e;this.model.parent&&(t=t||this.model.parent.get("parentTitle"),this.model.parent.parent&&(t=this.model.parent.parent.get("title")));var n=this.model.get("duration");return"movie"===this.type&&n&&(t=i.formatHoursMinutes(n)),t||""}},".media-secondary-subtitle":{"modelAttribute":"parentTitle","modelListeners":["parentTitle","index"],"formatter":function(e){var t=e;
return this.model.parent&&(t=t||this.model.parent.get("title")),"episode"===this.type&&(t=n.getSeasonEpisodeIndex({"seasonIndex":this.model.get("parentIndex"),"episodeIndex":this.model.get("index"),"date":this.model.get("originallyAvailableAt")})),t&&(t=" - "+t),t||""}}},"onRender":function(){this.image.setElement(this.ui.poster)}});return a}),define("hb!templates/desktop/dropdowns/NoPlayQueueItems",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};
var a,r,o="",l=n.helperMissing,c=this.escapeExpression;return o+='<div class="play-queue-empty-message">',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Nothing queued",r):l.call(t,"t","Nothing queued",r)))+"</div>\n"})}),define("plex/desktop/views/dropdowns/NoPlayQueueItems",["hb!templates/desktop/dropdowns/NoPlayQueueItems.tpl","marionette"],function(e,t){var n=t.ItemView.extend({"tagName":"li","className":"play-queue-list-item","template":e});return n}),define("plex/desktop/views/dropdowns/PlayQueueDropdown",["hb!templates/desktop/dropdowns/PlayQueueDropdown.tpl","underscore","jquery","marionette","sortable","plex/desktop/views/lists/BaseList","plex/desktop/views/dropdowns/PlayQueueItem","plex/desktop/views/dropdowns/NoPlayQueueItems"],function(e,t,n,i,s,a,r,o){var l=i.CompositeView.extend({"id":"player-play-queue-dropdown","tagName":"span","className":"dropup","itemView":r,"emptyView":o,"itemViewContainer":"ol","template":e,"modelEvents":{"change:enableQueueActions":"onEnableQueueActions"},"serializeData":function(){return{"canEdit":this.model.get("enableQueueActions")}
},"appendHtml":function(e,t,n){return a.prototype.sortedAppendHtml.apply(this,[e,t,n+1])},"onRender":function(){var e=function(e){var t=n(e.item).data("play-queue-id"),i=n(e.item).prev(".play-queue-list-item").data("play-queue-id");this.trigger("move",t,i)};if(this.model.get("enableQueueActions")){var i=this.$el.children(".dropdown-menu")[0];this.sortable=new s(i,{"draggable":"li.play-queue-list-item","onUpdate":t.bind(e,this)})}},"onEnableQueueActions":function(){this.render()}});return l}),define("hb!templates/desktop/modals/ShareModal",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s,a="";
return a+='\n        <ul class="list select-list select-networks-list minimal-scroll">\n          ',i=n.each.call(e,e&&e.networks,{"hash":{},"inverse":y.noop,"fn":y.programWithDepth(2,r,t,e),"data":t}),(i||0===i)&&(a+=i),a+='\n        </ul>\n\n        <div class="message-container ',i=n.unless.call(e,e&&e.autoSelect,{"hash":{},"inverse":y.noop,"fn":y.program(10,u,t),"data":t}),(i||0===i)&&(a+=i),a+='">\n          <textarea class="message form-control" placeholder="',s={"hash":{},"data":t},a+=x((i=n.t||e&&e.t,i?i.call(e,"Say something about this...",s):b.call(e,"t","Say something about this...",s)))+'"></textarea>\n        </div>\n      '
}function r(e,t,i){var s,a,r,d="";return d+='\n            <li class="striped-list-item select-list-item">\n              <a class="network ',s=n["if"].call(e,i&&i.autoSelect,{"hash":{},"inverse":y.noop,"fn":y.program(3,o,t),"data":t}),(s||0===s)&&(d+=s),d+='" data-id="',(s=n.key)?s=s.call(e,{"hash":{},"data":t}):(s=e&&e.key,s=typeof s===w?s.call(e,{"hash":{},"data":t}):s),d+=x(s)+'" href="#">\n                ',r={"hash":{},"inverse":y.program(7,c,t),"fn":y.program(5,l,t),"data":t},s=n.if_eq||e&&e.if_eq,a=s?s.call(e,e&&e.key,"facebook",r):b.call(e,"if_eq",e&&e.key,"facebook",r),(a||0===a)&&(d+=a),d+="\n                ",(a=n.title)?a=a.call(e,{"hash":{},"data":t}):(a=e&&e.title,a=typeof a===w?a.call(e,{"hash":{},"data":t}):a),d+=x(a)+"\n              </a>\n            </li>\n          "
}function o(){return"selected"}function l(){return'\n                  <i class="network-icon glyphicon glyphicon-social facebook"></i>\n                '}function c(e,t){var i,s,a,r="";return r+="\n                  ",a={"hash":{},"inverse":y.noop,"fn":y.program(8,d,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,e&&e.key,"twitter",a):b.call(e,"if_eq",e&&e.key,"twitter",a),(s||0===s)&&(r+=s),r+="\n                "}function d(){return'\n                    <i class="network-icon glyphicon glyphicon-social twitter"></i>\n                  '
}function u(){return"invisible"}function h(e,t){var i,s,a="";return a+='\n        <div class="empty-message">',s={"hash":{},"data":t},a+=x((i=n.t||e&&e.t,i?i.call(e,"You need to <a href='{1}' target='_blank'>link your account</a>.",e&&e.accountUrl,s):b.call(e,"t","You need to <a href='{1}' target='_blank'>link your account</a>.",e&&e.accountUrl,s)))+"</div>\n      "}function p(){return"disabled"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var f,m,g,v="",y=this,b=n.helperMissing,w="function",x=this.escapeExpression;
return v+='<div class="modal-dialog">\n  <div class="modal-content">\n    <div class="modal-header">\n      <button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button>\n      <h4 class="modal-title"><i class="modal-icon glyphicon share"></i> ',g={"hash":{},"data":s},v+=x((f=n.t||t&&t.t,f?f.call(t,"Share",g):b.call(t,"t","Share",g)))+'</h4>\n    </div>\n\n    <div class="modal-body modal-body-scroll minimal-scroll">\n      ',m=n["if"].call(t,t&&t.networks,{"hash":{},"inverse":y.program(12,h,s),"fn":y.program(1,a,s),"data":s}),(m||0===m)&&(v+=m),v+='\n    </div>\n\n    <div class="modal-footer">\n      <span class="characters-remaining"></span>\n      <button type="button" class="share-btn btn btn-primary btn-loading ',m=n.unless.call(t,t&&t.autoSelect,{"hash":{},"inverse":y.noop,"fn":y.program(14,p,s),"data":s}),(m||0===m)&&(v+=m),v+='">\n        <div class="loading loading-sm"></div>\n        <span class="btn-label">',g={"hash":{},"data":s},v+=x((f=n.t||t&&t.t,f?f.call(t,"Share",g):b.call(t,"t","Share",g)))+"</span>\n      </button>\n    </div>\n  </div>\n</div>\n\n"
})}),define("plex/desktop/views/modals/ShareModal",["hb!templates/desktop/modals/ShareModal.tpl","jquery","underscore","plex/base/commands/Commands","plex/base/models/AppModel","plex/desktop/views/modals/SelectModal"],function(e,t,n,i,s,a){var r=a.extend({"name":"shareModal","className":"share-modal select-modal modal modal-sm fade","template":e,"linkedNetworks":null,"networkIDs":null,"maxLength":null,"ui":{"shareBtn":".share-btn","messageContainer":".message-container","charactersRemaining":".characters-remaining","message":".message"},"events":{"click .network":"onNetworkClick","keyup .message":"onMessageKeyUp","click .share-btn":"onShareClick"},"initialize":function(){a.prototype.initialize.apply(this,arguments),this.user=s.get("user"),this.socialNetworks=this.user.get("socialNetworks"),this.linkedNetworks=this.socialNetworks.where({"linked":!0}),this.autoSelect=1===this.linkedNetworks.length,this.networkIDs=[]
},"serializeData":function(){for(var e=[],t=0,n=this.linkedNetworks.length;n>t;t++)e.push(this.linkedNetworks[t].toJSON());return{"networks":e,"accountUrl":this.user.server.get("accountUrl"),"autoSelect":this.autoSelect}},"calculateMaxLength":function(){var e=null,t=this.socialNetworks;n.each(this.networkIDs,function(n){var i=t.get(n),s=i.get("maxLength")||null;(null===e||e>s)&&(e=s)}),this.maxLength=e,this.calculateCharactersRemaining()},"calculateCharactersRemaining":function(){var e=this.ui.message.val(),t=this.maxLength-e.length;
return null===this.maxLength?void this.ui.charactersRemaining.addClass("hidden"):(0>t?(this.ui.charactersRemaining.addClass("error").removeClass("hidden"),this.ui.shareBtn.addClass("disabled")):(this.ui.charactersRemaining.removeClass("error hidden"),this.ui.shareBtn.removeClass("disabled")),void this.ui.charactersRemaining.text(this.maxLength-e.length))},"onRender":function(){a.prototype.onRender.apply(this,arguments),this.autoSelect&&(this.networkIDs.push(this.linkedNetworks[0].id),this.calculateMaxLength())
},"onNetworkClick":function(e){e.preventDefault();var i=t(e.currentTarget),s=i.data("id");i.hasClass("selected")?this.networkIDs.splice(n.indexOf(this.networkIDs,s),1):this.networkIDs.push(s),i.toggleClass("selected"),this.networkIDs.length?(this.ui.shareBtn.removeClass("disabled"),this.ui.messageContainer.removeClass("invisible")):(this.ui.shareBtn.addClass("disabled"),this.ui.messageContainer.addClass("invisible")),this.calculateMaxLength()},"onMessageKeyUp":function(){this.calculateCharactersRemaining()
},"onShareClick":function(e){e.preventDefault();var t=this.ui.shareBtn;if(!t.isDisabled()){t.addClass("active");var s={"item":this.model,"networkIDs":this.networkIDs,"message":this.ui.message.val()},a=i.execute("share",s);a.done(n.bind(this.onShareSuccess,this)),a.fail(n.bind(this.onShareError,this))}},"onShareSuccess":function(){this.hide()},"onShareError":function(){this.ui.shareBtn.removeClass("active")}});return r}),define("hb!templates/desktop/modals/RecommendModal",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s,a="";
return a+='\n        <div class="friends-container"></div>\n\n        <div class="message-container invisible">\n          <textarea class="message form-control" placeholder="',s={"hash":{},"data":t},a+=h((i=n.t||e&&e.t,i?i.call(e,"Say something about this...",s):u.call(e,"t","Say something about this...",s)))+'"></textarea>\n        </div>\n      '}function r(e,t){var i,s,a="";return a+='\n        <div class="empty-message">',s={"hash":{},"data":t},a+=h((i=n.t||e&&e.t,i?i.call(e,"You need <a class='friends-btn' href='{1}'>friends</a> to recommend media.","#!/friends",s):u.call(e,"t","You need <a class='friends-btn' href='{1}'>friends</a> to recommend media.","#!/friends",s)))+"</div>\n      "
}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var o,l,c,d="",u=n.helperMissing,h=this.escapeExpression,p=this;return d+='<div class="modal-dialog">\n  <div class="modal-content">\n    <div class="modal-header">\n      <button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button>\n      <h4 class="modal-title"><i class="modal-icon glyphicon share-alt"></i> ',c={"hash":{},"data":s},d+=h((o=n.t||t&&t.t,o?o.call(t,"Select Friends",c):u.call(t,"t","Select Friends",c)))+'</h4>\n    </div>\n\n    <div class="modal-body modal-body-scroll minimal-scroll">\n      ',l=n["if"].call(t,t&&t.hasFriends,{"hash":{},"inverse":p.program(3,r,s),"fn":p.program(1,a,s),"data":s}),(l||0===l)&&(d+=l),d+='\n    </div>\n\n    <div class="modal-footer">\n      <span class="characters-remaining"></span>\n      <button type="button" class="send-btn btn btn-primary btn-loading disabled">\n        <div class="loading loading-sm"></div>\n        <span class="btn-label">',c={"hash":{},"data":s},d+=h((o=n.t||t&&t.t,o?o.call(t,"Send",c):u.call(t,"t","Send",c)))+"</span>\n      </button>\n    </div>\n  </div>\n</div>\n\n"
})}),define("hb!templates/desktop/lists/user/SelectFriendListItem",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,r,o="",l="function",c=this.escapeExpression,d=n.helperMissing;return o+='<a class="friend" data-id="',(a=n.recommendationsPlaylistId)?a=a.call(t,{"hash":{},"data":s}):(a=t&&t.recommendationsPlaylistId,a=typeof a===l?a.call(t,{"hash":{},"data":s}):a),o+=c(a)+'" href="#">\n  <span class="user-poster"></span> ',r={"hash":{},"data":s},o+=c((a=n.truncate||t&&t.truncate,a?a.call(t,t&&t.title,20,r):d.call(t,"truncate",t&&t.title,20,r)))+"\n</a>\n"
})}),define("plex/desktop/views/lists/user/SelectFriendListItem",["hb!templates/desktop/lists/user/SelectFriendListItem.tpl","underscore","marionette","plex/base/utils/Dispatcher","plex/base/adapters/LocalizerAdapter","plex/desktop/views/images/MediaPosterImage"],function(e,t,n,i,s,a){var r=n.ItemView.extend({"tagName":"li","className":"striped-list-item select-list-item","template":e,"ui":{"poster":".user-poster"},"initialize":function(){this.image=new a({"model":this.model,"type":"friend","width":80})
},"onRender":function(){this.image.setElement(this.ui.poster)},"onClose":function(){this.image.close()}});return r}),define("plex/desktop/views/lists/user/SelectFriendList",["plex/desktop/views/lists/BaseList","plex/desktop/views/lists/user/SelectFriendListItem"],function(e,t){var n=e.extend({"tagName":"ul","className":"list select-list select-friends-list minimal-scroll","itemView":t});return n}),define("plex/desktop/views/modals/RecommendModal",["hb!templates/desktop/modals/RecommendModal.tpl","jquery","underscore","plex/base/commands/Commands","plex/base/models/AppModel","plex/desktop/views/modals/SelectModal","plex/desktop/views/lists/user/SelectFriendList"],function(e,t,n,i,s,a,r){var o=a.extend({"name":"recommendModal","className":"recommend-modal select-modal modal modal-sm fade","template":e,"playlistIDs":null,"ui":{"sendBtn":".send-btn","messageContainer":".message-container","message":".message"},"regions":{"list":".friends-container"},"events":{"click .friend":"onFriendClick","click .friends-btn":"onFriendsClick","click .send-btn":"onSendClick"},"initialize":function(){a.prototype.initialize.apply(this,arguments);
var e=s.get("user");this.collection=e.get("friends"),this.playlistIDs=[]},"serializeData":function(){return{"hasFriends":!!this.collection.length}},"onRender":function(){a.prototype.onRender.apply(this,arguments),this.list.show(new r({"collection":this.collection}))},"onFriendClick":function(e){e.preventDefault();var i=t(e.currentTarget),s=i.data("id");i.hasClass("selected")?this.playlistIDs.splice(n.indexOf(this.playlistIDs,s),1):this.playlistIDs.push(s),i.toggleClass("selected"),this.playlistIDs.length?(this.ui.sendBtn.removeClass("disabled"),this.ui.messageContainer.removeClass("invisible")):(this.ui.sendBtn.addClass("disabled"),this.ui.messageContainer.addClass("invisible"))
},"onFriendsClick":function(){this.hide()},"onSendClick":function(e){e.preventDefault();var t=this.ui.sendBtn;if(!t.isDisabled()){t.addClass("active");var s={"item":this.model,"playlistIDs":this.playlistIDs,"message":this.ui.message.val()},a=i.execute("recommend",s);a.done(n.bind(this.onSendSuccess,this)),a.fail(n.bind(this.onSendError,this))}},"onSendSuccess":function(){this.hide()},"onSendError":function(){this.ui.sendBtn.removeClass("active")}});return o}),define("plex/desktop/views/players/controls/VideoPlayerControlsView",["hb!templates/desktop/players/controls/VideoPlayerControlsView.tpl","underscore","marionette","plex/base/utils/Dispatcher","plex/base/utils/Capabilities","plex/base/utils/formatters/DateTimeUtil","plex/base/adapters/LocalizerAdapter","plex/base/models/player/UpNextCollection","plex/desktop/views/images/BaseImage","plex/desktop/views/images/MediaPosterImage","plex/desktop/views/players/controls/SeekBarView","plex/desktop/views/players/controls/SliderView","plex/desktop/views/players/controls/VideoPlayerQualityDropdown","plex/desktop/views/players/controls/VideoPlayerStreamDropdown","plex/desktop/views/players/controls/VideoPlayerPrimaryPlayerDropdown","plex/desktop/views/dropdowns/PlayQueueDropdown","plex/desktop/views/modals/ShareModal","plex/desktop/views/modals/RecommendModal"],function(e,t,n,i,s,a,r,o,l,c,d,u,h,p,f,m,g,v){var y=n.Layout.extend({"className":"video-controls transition-out","template":e,"visible":!1,"muted":!1,"mutedVolume":0,"ui":{"video":"#html-video","poster":".media-poster","background":".video-background","volumeBtn":".volume-btn","errorMessage":".video-error-message","dropdowns":".player-dropdowns-container","dropups":".player-dropups-container"},"regions":{"seekBar":".seek-bar-container","volume":".player-volume-slider-container","playQueueDropdown":"#player-play-queue-dropdown","qualityDropdown":"#player-quality-dropdown","audioDropdown":"#player-subtitles-dropdown","subtitlesDropdown":"#player-audio-dropdown","playerDropdown":"#player-primary-player-dropdown"},"modelEvents":{"change:item":"onItemChange","change:volume":"onVolumeChange","change:errorMessage":"onErrorMessageChange","change:showQuality":"onShowQualityChange","change:showAudioStream":"onShowAudioStreamChange","change:showSubtitleStream":"onShowSubtitleStreamChange"},"events":{"click .volume-btn":"onVolumeClick","click .enter-fullscreen-btn":"onEnterFullscreenClick","click .exit-fullscreen-btn":"onExitFullscreenClick","fullscreenchange":"onFullscreenChange","webkitfullscreenchange":"onFullscreenChange","mozfullscreenchange":"onFullscreenChange","click .video-overlay-btn":"onOverlayClick","click .share-btn":"onShareClick","click .recommend-btn":"onRecommendClick"},"triggers":{"click .play-btn":"play","click .pause-btn":"pause","click .stop-btn":"stop","click .previous-btn":"previous","click .next-btn":"next"},"onlyAfterRender":["onVolumeChange","onErrorMessageChange"],"initialize":function(){t.bindAll(this,"transitionIn","transitionOut","onMobileVideoClose"),this.item=this.model.get("item"),this.upNextCollection=new o(null,{"model":this.model}),this.posterImage=new c({"model":this.item,"type":"movie","getUrl":this.getPosterUrl,"width":100}),this.backgroundImage=new l({"server":this.item.server,"width":1280,"height":720}),this.volumeSlider=new u({"className":"player-volume-slider player-slider","value":this.model.get("volume")}),this.seekBarView=new d({"model":this.model}),this.playQueueDropdownView=new m({"model":this.model,"collection":this.upNextCollection}),this.listenTo(this.volumeSlider,"change:value",this.onVolumeSliderValueChange),this.listenTo(this.seekBarView,"change:value",this.onSeekBarValueChange),this.listenTo(this.playQueueDropdownView,"itemview:skip",this.onSkip),this.listenTo(this.playQueueDropdownView,"itemview:remove",this.onRemove),this.listenTo(this.playQueueDropdownView,"move",this.onMove)
},"getPosterUrl":function(e){return this.model.get("parentThumb")||this.model.get("grandparentThumb")||e},"transitionIn":function(){this.visible=!0,this.$el.removeClass("transition-out")},"transitionOut":function(){this.$(".dropdown.open, .dropup.open").length||(this.visible=!1,this.$el.addClass("transition-out"))},"updateVolumeBtn":function(e){var t=this.ui.volumeBtn;e>50?(this.muted=!1,t.addClass("high"),t.removeClass("low mute")):50>=e&&e>0?(this.muted=!1,t.addClass("low"),t.removeClass("high mute")):(this.muted=!0,t.addClass("mute"),t.removeClass("high low"))
},"bindings":{".video-title":{"modelAttribute":"item","autohide":!0,"formatter":function(e){return e.get("title")}},".video-background":{"modelAttribute":"item","manual":!0,"formatter":function(e,n){var i=e.get("art")||e.channel&&e.channel.get("art");if(n.css("background-image","none"),n.addClass("transition-out"),!i)return this.currentArt=null,void(this.currentArtSrc=null);var s=t.bind(function(e){this.currentArt=i,this.currentArtSrc=e,n.css("background-image","url("+e+")"),n.removeClass("transition-out")
},this);this.currentArt===i?s(this.currentArtSrc):this.backgroundImage.load(i,!0).done(s)}},".play-btn":{"modelAttribute":"paused","modelListeners":["paused","showPlayPause"],"manual":!0,"autohide":!0,"formatter":function(e){return this.model.get("showPlayPause")&&e}},".pause-btn":{"modelAttribute":"paused","modelListeners":["paused","showPlayPause"],"manual":!0,"autohide":!0,"formatter":function(e){return this.model.get("showPlayPause")&&!e}},".stop-btn":{"modelAttribute":"showStop","manual":!0,"autohide":!0},".previous-btn":{"modelAttribute":"enablePrevious","manual":!0,"autohide":function(){var e=this.model.get("playlist");
return e&&e.length>1},"formatter":function(e,t){t.toggleClass("disabled",!e)}},".next-btn":{"modelAttribute":"enableNext","manual":!0,"autohide":function(){var e=this.model.get("playlist");return e&&e.length>1},"formatter":function(e,t){t.toggleClass("disabled",!e)}},".player-position":{"modelAttribute":"position","formatter":function(e){return a.formatDuration(e)}},".player-duration":{"modelAttribute":"duration","formatter":function(e){return a.formatDuration(e)}},".volume-btn":{"modelAttribute":"showVolume","manual":!0,"autohide":!0,"formatter":function(e){return this.$el.toggleClass("show-volume",e),e
}},".enter-fullscreen-btn":{"modelAttribute":"showEnterFullscreen","manual":!0,"autohide":!0},".exit-fullscreen-btn":{"modelAttribute":"showExitFullscreen","manual":!0,"autohide":!0},".share-btn":{"modelAttribute":"item","manual":!0,"autohide":function(e){return t.contains(["clip","playlistItem"],e.get("type"))}},".recommend-btn":{"modelAttribute":"item","manual":!0,"autohide":function(e){return t.contains(["clip","playlistItem"],e.get("type"))}}},"onRender":function(){this.ui.video.on("webkitendfullscreen",this.onMobileVideoClose),this.posterImage.setElement(this.ui.poster),this.seekBar.append(this.seekBarView),this.volume.show(this.volumeSlider);
var e=this.model.get("playlist");e&&e.length>1&&this.playQueueDropdown.append(this.playQueueDropdownView,this.ui.dropups),this.updateVolumeBtn(this.model.get("volume")),this.qualityDropdown.append(new h({"model":this.model}),this.ui.dropdowns),this.audioDropdown.append(new p({"model":this.model,"type":"audio"}),this.ui.dropdowns),this.subtitlesDropdown.append(new p({"model":this.model,"type":"subtitles"}),this.ui.dropdowns),this.playerDropdown.append(new f,this.ui.dropdowns)},"onClose":function(){this.ui.video.off("webkitendfullscreen",this.onMobileVideoClose),this.posterImage.close(),this.backgroundImage.close(),this.upNextCollection.release()
},"onItemChange":function(e,t){this.posterImage.src=null,this.posterImage.setModel(t),this.posterImage.render(),this.backgroundImage.src=null},"onVolumeChange":function(e,t){this.volumeSlider.setValue(t),this.updateVolumeBtn(t)},"onErrorMessageChange":function(e,t){var n=r.get();this.ui.errorMessage.text(n.t(t))},"onShowQualityChange":function(e,t){var n=this.qualityDropdown.currentView;n&&(n.empty&&(t=!1),n.$el.toggleClass("hidden",!t))},"onShowAudioStreamChange":function(e,t){var n=this.audioDropdown.currentView;
n&&(n.empty&&(t=!1),n.$el.toggleClass("hidden",!t))},"onShowSubtitleStreamChange":function(e,t){var n=this.subtitlesDropdown.currentView;n&&(n.empty&&(t=!1),n.$el.toggleClass("hidden",!t))},"onVolumeSliderValueChange":function(e){this.trigger("change:volume",e)},"onSeekBarValueChange":function(e){this.trigger("change:position",e)},"onVolumeClick":function(e){e.preventDefault(),this.muted?(this.mutedVolume>0?this.trigger("change:volume",this.mutedVolume):this.trigger("change:volume",100),this.muted=!1,this.mutedVolume=0):(this.muted=!0,this.mutedVolume=this.model.get("volume"),this.trigger("change:volume",0))
},"onEnterFullscreenClick":function(e){if(e.preventDefault(),this.model.get("forceWebkitVideoFullscreen"))this.ui.video[0].webkitEnterFullscreen();else{var t=this.el.requestFullScreen||this.el.webkitRequestFullScreen||this.el.mozRequestFullScreen;t.call(this.el)}},"onExitFullscreenClick":function(e){e.preventDefault();var t=document.cancelFullScreen||document.webkitCancelFullScreen||document.mozCancelFullScreen;t.call(document)},"onFullscreenChange":function(){var e=!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement);
this.model.set("showEnterFullscreen",!e),this.model.set("showExitFullscreen",e)},"onMobileVideoClose":function(){i.trigger("hide:video")},"onOverlayClick":function(e){e.preventDefault();var t=this.model.get("playing"),n=t?"pause":"play";return"pause"===n&&s.hasTouchScreen&&!this.visible?void this.trigger("toggleControls",{"autohide":!0}):void this.trigger(n)},"onShareClick":function(e){e.preventDefault(),i.trigger("show:modal",new g({"model":this.item}))},"onRecommendClick":function(e){e.preventDefault(),i.trigger("show:modal",new v({"model":this.item}))
},"onSkip":function(e,t){this.trigger("skip",t)},"onRemove":function(e,t){this.trigger("remove",t)},"onMove":function(e,t){this.trigger("move",e,t)}});return y}),define("hb!templates/desktop/players/PostPlayView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,r,o="",l=n.helperMissing,c=this.escapeExpression,d="function";return o+='<div class="post-play-background background"></div>\n\n<div class="post-play-footer">\n  <div class="item-previous">\n    <div class="item-poster">\n      <h1>',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Previous",r):l.call(t,"t","Previous",r)))+'</h1>\n      <a class="media-poster-container replay-btn play-btn" href="#">\n        <div class="media-poster">\n          <div class="media-poster-overlay"></div>\n          <div class="media-poster-overlay-icons">\n            <i class="media-poster-overlay-icon glyphicon refresh"></i>\n          </div>\n        </div>\n      </a>\n    </div>\n    <div class="item-summary">\n      <h1 class="media-title">'+c((a=t&&t.previous,a=null==a||a===!1?a:a.title,typeof a===d?a.apply(t):a))+'</h1>\n      <h2 class="media-subtitle-1">'+c((a=t&&t.previous,a=null==a||a===!1?a:a.subtitle,typeof a===d?a.apply(t):a))+'</h2>\n    </div>\n  </div>\n\n  <div class="item-next">\n    <div class="item-poster">\n      <h1>',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Playing Next",r):l.call(t,"t","Playing Next",r)))+'</h1>\n      <a class="media-poster-container next-btn play-btn" href="#">\n        <div class="media-poster">\n          <div class="media-poster-overlay"></div>\n\n          <div class="countdown"></div>\n\n          <div class="media-poster-overlay-icons">\n            <i class="media-poster-overlay-icon glyphicon play"></i>\n          </div>\n        </div>\n      </a>\n    </div>\n\n    <div class="item-summary">\n      <h1 class="media-title">'+c((a=t&&t.next,a=null==a||a===!1?a:a.title,typeof a===d?a.apply(t):a))+'</h1>\n      <h2 class="media-subtitle-1">'+c((a=t&&t.next,a=null==a||a===!1?a:a.subtitle,typeof a===d?a.apply(t):a))+'</h2>\n      <h3 class="media-subtitle-2">'+c((a=t&&t.next,a=null==a||a===!1?a:a.index,typeof a===d?a.apply(t):a))+"</h3>\n      <p>"+c((a=t&&t.next,a=null==a||a===!1?a:a.summary,typeof a===d?a.apply(t):a))+"</p>\n    </div>\n  </div>\n</div>\n"
})}),function(){for(var e=0,t=["ms","moz","webkit","o"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var n=(new Date).getTime(),i=Math.max(0,16-(n-e)),s=window.setTimeout(function(){t(n+i)},i);return e=n+i,s}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)
})}(),define("requestanimframe",function(){}),define("plex/base/mixins/player/PostPlayMixin",["underscore","backbone","plex/base/utils/MediaUtil"],function(e,t,n){var i={"ui":{"background":".post-play-background","previousPoster":".item-previous .media-poster","nextPoster":".item-next .media-poster","nextTitle":".next-title","nextIndex":".next-index","countdown":".countdown"},"createCountdown":function(e){this.totalSeconds=e,this.secondsLeft=this.totalSeconds,this.progressModel=new t.Model({"text":this.secondsLeft}),this.updateCountdown()
},"serializeData":function(){var e={"previous":{"title":this.previousItem.get("title")||this.previousItem.get("grandparentTitle"),"subtitle":this.episodeIndexFor(this.previousItem)||this.previousItem.get("year")},"next":{"title":this.nextItem.get("grandparentTitle")||this.nextItem.get("title"),"summary":this.nextItem.get("summary")}};return"episode"===this.nextItem.get("type")?(e.next.subtitle=this.nextItem.get("title")||this.previousItem.get("grandparentTitle"),e.next.index=this.episodeIndexFor(this.nextItem)):e.next.subtitle=this.nextItem.get("year"),e
},"episodeIndexFor":function(e){var t="";return"episode"===e.get("type")&&(t=n.getSeasonEpisodeIndex({"seasonIndex":e.get("parentIndex"),"episodeIndex":e.get("index"),"date":e.get("originallyAvailableAt")})),t},"updateCountdown":function(){var t=(new Date).getTime(),n=t-(this.startTime||t);this.startTime=t,this.secondsLeft-=n/1e3,this.secondsLeft>0?(this.progressModel.set("fraction",1-this.secondsLeft/this.totalSeconds),this.progressModel.set("text",Math.ceil(this.secondsLeft)),this.countdownAnimator=window.requestAnimationFrame(e.bind(this.updateCountdown,this))):this.trigger("next")
},"onClose":function(){window.cancelAnimationFrame(this.countdownAnimator)}};return i}),define("hb!templates/desktop/progressbar/CircleProgressBarView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{},'<canvas class="circle-progress-bar"></canvas>\n<div class="circle-progress-text"></div>'})}),define("plex/base/mixins/views/CircleProgressBarMixin",["backbone","plex/base/utils/Capabilities"],function(e,t){var n={"className":"circle-progress","ui":{"canvas":".circle-progress-bar"},"bindings":{".circle-progress-text":{"modelAttribute":"text"}},"initialize":function(){t.hasCanvas&&this.listenTo(this.model,"change:fraction",this.onFractionChange)
},"onRender":function(){t.hasCanvas&&(this.progressCanvas=this.ui.canvas[0])},"onFractionChange":function(){if(this.$el.width()>0&&(this.progressCanvas.width=this.$el.width(),this.progressCanvas.height=this.$el.height(),this.progressContext=this.progressCanvas.getContext("2d")),this.progressContext){var e=this.model.get("fraction");this.progressContext.lineWidth=5,this.progressContext.strokeStyle="#cc7b19";var t=this.progressCanvas.width/2,n=this.progressCanvas.height/2,i=t-5,s=-Math.PI/2,a=s+e*Math.PI*2;
this.progressContext.clearRect(0,0,this.progressCanvas.width,this.progressCanvas.height),this.progressContext.beginPath(),this.progressContext.arc(t,n,i,s,a,!1),this.progressContext.stroke(),this.progressContext.closePath()}}};return n}),define("plex/desktop/views/progressbar/CircleProgressBarView",["hb!templates/desktop/progressbar/CircleProgressBarView.tpl","marionette","plex/base/mixins/views/CircleProgressBarMixin"],function(e,t,n){var i=t.ItemView.extend({"template":e,"mixins":n});return i}),define("plex/desktop/views/players/PostPlayView",["hb!templates/desktop/players/PostPlayView.tpl","underscore","backbone","marionette","requestanimframe","plex/base/utils/Dispatcher","plex/base/mixins/player/PostPlayMixin","plex/desktop/views/images/BaseImage","plex/desktop/views/images/MediaPosterImage","plex/desktop/views/progressbar/CircleProgressBarView"],function(e,t,n,i,s,a,r,o,l,c){var d=i.Layout.extend({"mixins":r,"className":"video-post-play","template":e,"regions":{"countdown":".countdown"},"events":{"click .next-btn":"onNextClick","click .replay-btn":"onReplayClick","mousemove":"onMouseMove"},"initialize":function(e){e||(e={}),e.countdown&&this.createCountdown(e.countdown),this.previousItem=this.model;
var t=this.collection.indexOf(this.model)+1;this.nextItem=this.collection.at(t);var n="movie"===this.previousItem.get("type")?"art":"thumb";this.previousPoster=new l({"model":this.previousItem,"modelAttribute":n,"type":this.previousItem.get("type"),"height":140}),this.nextPoster=new l({"model":this.nextItem,"modelAttribute":n,"type":this.nextItem.get("type"),"height":190}),this.backgroundImage=new o({"model":this.nextItem,"modelAttribute":"art","width":1280,"height":720,"background":!0})},"onRender":function(){this.previousPoster.setElement(this.ui.previousPoster),this.nextPoster.setElement(this.ui.nextPoster),this.backgroundImage.setElement(this.ui.background),this.totalSeconds&&this.countdown.append(new c({"model":this.progressModel}))
},"onNextClick":function(e){e.preventDefault(),this.trigger("next",{"manual":!0})},"onReplayClick":function(e){e.preventDefault(),this.trigger("replay")},"onMouseMove":function(e){(this.lastX!==e.clientX||this.lastY!==e.clientY)&&this.totalSeconds&&(this.startTime=0,this.lastX=e.clientX,this.lastY=e.clientY,window.cancelAnimationFrame(this.countdownAnimator),clearInterval(this.idleTimer),this.idleTimer=setTimeout(t.bind(this.updateCountdown,this),1e3))},"onClose":function(){clearInterval(this.idleTimer),r.onClose.apply(this,arguments)
}});return d}),define("plex/desktop/views/players/VideoPlayerView",["hb!templates/desktop/players/VideoPlayerView.tpl","underscore","jquery","backbone","marionette","plex/base/utils/Dispatcher","plex/base/utils/Browser","plex/base/utils/Capabilities","plex/base/utils/MediaDecisionUtil","plex/base/adapters/PlayerControllerAdapter","plex/base/commands/Commands","plex/base/models/AppModel","plex/base/models/SettingsModel","plex/base/models/player/PlayerModel","plex/base/adapters/LocalizerAdapter","plex/desktop/views/modals/ConfirmModal","plex/desktop/views/modals/SelectMediaModal","plex/desktop/views/modals/SelectOffsetModal","plex/desktop/views/players/controls/VideoPlayerControlsView","plex/desktop/views/players/PostPlayView"],function(e,t,n,i,s,a,r,o,l,c,d,u,h,p,f,m,g,v,y,b){var w=s.Layout.extend({"className":"video-player minimal-scroll buffering","template":e,"controlsDelay":o.hasTouchScreen?4e3:2e3,"ui":{"container":".video-container"},"regions":{"controls":".video-controls-container","postPlay":".video-post-play-container"},"events":{"click .player-close-btn":"onCloseClick","mousemove":"onMouseMove"},"postPlayDuration":10,"awakeTime":72e5,"maximumDurationForAutoadvance":12e5,"minimumDurationForPostPlay":3e5,"initialize":function(e){this.offset=e.offset,this.controller=c.get("video"),this.startSleepProtection(),this.playerModel=new p({"item":this.model,"playlist":this.collection}),this.controlsView=new y({"model":this.playerModel}),this.listenTo(u,"change:primaryPlayer",this.onPrimaryPlayerChange),this.listenTo(this.playerModel,{"change:item":this.onPlayerItemChange,"change:ready":this.onPlayerReadyChange,"change:finished":this.onPlayerFinishedChange,"change:volume":this.onPlayerVolumeChange,"change:state":this.onPlayerStateChange,"change:embedHtml":this.onPlayerEmbedHtmlChange}),this.listenTo(this.controlsView,{"toggleControls":this.toggleControls,"play":this.onControlsPlay,"pause":this.onControlsPause,"stop":this.onControlsStop,"previous":this.onControlsPrevious,"next":this.onControlsNext,"skip":this.onControlsSkip,"remove":this.onControlsRemove,"move":this.onControlsMove,"change:position":this.onControlsPositionChange,"change:volume":this.onControlsVolumeChange}),this.listenTo(a,{"shortcut:stop":this.onControlsStop,"shortcut:playPause":this.onPlayPauseShortcut,"shortcut:decreaseVolume":this.onDecreaseVolumeShortcut,"shortcut:increaseVolume":this.onIncreaseVolumeShortcut,"shortcut:seekBackward":this.onSeekBackwardShortcut,"shortcut:seekForward":this.onSeekForwardShortcut,"shortcut:stepBackward":this.onStepBackwardShortcut,"shortcut:stepForward":this.onStepForwardShortcut}),a.trigger("hide:music"),d.execute("playSound",{"stop":!0,"background":!0})
},"play":function(e){e||(e={});var n,i,s=!1,a=u.get("primaryPlayer"),r=t.bind(function(){this.controller.load({"model":this.playerModel,"media":n,"offset":i,"volume":h.get("videoPlayerVolume"),"autoplay":e.autoplay,"postplay":a?!1:!0,"silent":s,"mediaElement":this.controls.currentView.ui.video[0]})},this);if(a){var o=a.get("nowPlaying");if(o.get(this.model.get("ratingKey")))return s=!0,void r()}var l=this.resolveMedia();l=l.then(t.bind(function(t){return n=t,e.offset?e.offset:this.resolveOffset()
},this)),l.done(function(e){i=e,r()}),l.fail(this.stop)},"resolveMedia":function(){var e=n.Deferred(),t=this.model.get("Media");if(h.get("autoResolution")||t.length<2)return e.resolve().promise();var i=new g({"model":this.model}),s=i.promise;return s.done(function(n){var i=t[n];e.resolve(i)}),s.fail(function(){e.reject()}),a.trigger("show:modal",i),e.promise()},"resolveOffset":function(){var e=n.Deferred(),i=this.model.get("viewOffset");if(t.isNumber(this.offset)&&(i=this.offset),!i)return e.resolve(0).promise();
var s=new v({"offset":i}),r=s.promise;return r.done(function(t){e.resolve(t)}),r.fail(function(){e.reject()}),a.trigger("show:modal",s),e.promise()},"stop":function(){var e,t,i=n.Deferred().resolve().promise(),s=!u.get("primaryPlayer");if(this.model&&s&&(e=this.model.server.get("playQueues"),t=e.getFor(this.model)),t&&t.hasUserAdditions){var r=f.get(),o=new m({"title":r.t("Finish Watching Queue"),"message":r.t("This will clear the contents of your play queue.")});i=o.promise,a.trigger("show:modal",o)
}return i.then(function(){e&&e.remove("video"),a.trigger("hide:video")})},"canAutoplay":function(e){return!o.hasTouchScreen&&(null==e||"paused"!==e)},"showVideo":function(e){this.$el.toggleClass("show-html-video","html"===e),this.$el.toggleClass("show-flash-video","flash"===e),this.$el.toggleClass("show-placeholder-video",!e)},"hideVideo":function(){this.$el.removeClass("show-html-video show-flash-video show-placeholder-video")},"toggleControls":function(e){this.controller.model&&this.controller.model.get("ready")&&"flash"!==this.controller.playerType&&(e||(e={}),this.controlsView.visible||this.controlsView.transitionIn(),this.controlsTimeout=clearTimeout(this.controlsTimeout),e.autohide&&(this.controlsTimeout=setTimeout(this.controlsView.transitionOut,this.controlsDelay)))
},"startSleepProtection":function(){clearTimeout(this.sleepTimeout),this.isDefinitelyAwake||(this.isPotentiallyAsleep?this.isDefinitelyAwake=!0:this.sleepTimeout=setTimeout(t.bind(this.onSleep,this),this.awakeTime))},"onRender":function(){this.controls.show(this.controlsView),this.play({"autoplay":this.canAutoplay()})},"onClose":function(){this.controlsTimeout=clearTimeout(this.controlsTimeout),this.sleepTimeout=clearTimeout(this.sleepTimeout),this.controller.model&&this.controller.unload(),i.abort()
},"onPrimaryPlayerChange":function(){{var e=this.playerModel.get("state"),t=this.playerModel.get("position");this.controls.currentView}this.playerModel.set("ready",!1),this.controller.stop(),this.controller=c.get("video"),this.play({"offset":t,"autoplay":this.canAutoplay(e)})},"onPlayerItemChange":function(e,t){this.model=t},"onPlayerReadyChange":function(e,t){t?(this.showVideo(this.controller.playerType),this.controller.local?this.toggleControls({"autohide":!0}):this.toggleControls()):this.hideVideo()
},"onPlayerVolumeChange":function(e,t){h.save("videoPlayerVolume",t)},"onPlayerStateChange":function(e,t){this.controller.local&&("paused"===t?this.toggleControls():("error"===t&&this.hideVideo(),clearTimeout(this.controlsTimeout),this.controlsTimeout=setTimeout(this.controlsView.transitionOut,this.controlsDelay))),this.$el.toggleClass("stopped",e.get("stopped")),this.$el.toggleClass("paused",e.get("paused")),this.$el.toggleClass("playing",e.get("playing")),this.$el.toggleClass("buffering",e.get("buffering")),this.$el.toggleClass("error",e.get("error"))
},"onPlayerEmbedHtmlChange":function(e,t){this.ui.container.html(t)},"onPlayerFinishedChange":function(e,t){if(t)if(this.model===this.collection.last())this.model.server.get("playQueues").remove("video"),a.trigger("hide:video");else if(this.model.get("duration")<this.minimumDurationForPostPlay)this.controller.skipNext();else{this.hideVideo();var n={"model":this.model,"collection":this.collection},i=this.model.get("duration")<this.maximumDurationForAutoadvance;(!this.isPotentiallyAsleep||this.isDefinitelyAwake||i)&&(n.countdown=this.postPlayDuration);
var s=new b(n);this.listenTo(s,{"replay":this.onPostPlayReplay,"next":this.onPostPlayNext}),this.postPlay.show(s)}},"onControlsPlay":function(){this.controller.play()},"onControlsPause":function(){this.controller.pause()},"onControlsStop":function(){this.controller.stop(),this.model.server.get("playQueues").remove("video"),a.trigger("hide:video")},"onControlsPrevious":function(){this.controller.skipPrevious()},"onControlsNext":function(){this.controller.skipNext()},"onControlsSkip":function(e){this.controller.skipTo(e)
},"onControlsRemove":function(e){this.controller.remove(e)},"onControlsMove":function(e,t){this.controller.move(e,t)},"onControlsPositionChange":function(e){this.controller.setPosition(e)},"onControlsVolumeChange":function(e){this.controller.setVolume(e)},"onPostPlayReplay":function(){this.startSleepProtection(),this.stopListening(this.postPlay.currentView),this.postPlay.close(),this.controller.setPosition(0),this.controller.play(),this.showVideo(this.controller.playerType)},"onPostPlayNext":function(e){e&&e.manual&&this.startSleepProtection(),this.stopListening(this.postPlay.currentView),this.postPlay.close(),this.controller.skipNext()
},"onSleep":function(){this.isPotentiallyAsleep=!0},"onPlayPauseShortcut":function(){this.controller.playPause()},"onIncreaseVolumeShortcut":function(){this.controller.increaseVolume()},"onDecreaseVolumeShortcut":function(){this.controller.decreaseVolume()},"onSeekBackwardShortcut":function(){this.controller.seekBackward()},"onSeekForwardShortcut":function(){this.controller.seekForward()},"onStepBackwardShortcut":function(){this.controller.stepBackward()},"onStepForwardShortcut":function(){this.controller.stepForward()
},"onCloseClick":function(e){e.preventDefault(),this.stop()},"onMouseMove":function(e){(this.lastX!==e.clientX||this.lastY!==e.clientY)&&(this.lastX=e.clientX,this.lastY=e.clientY,this.controller.local&&"paused"!==this.playerModel.get("state")&&!this.playerModel.get("finished")&&this.toggleControls({"autohide":!0}))}});return w}),define("hb!templates/desktop/players/MusicPlayerView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};
var a="";return a})}),define("hb!templates/desktop/players/controls/MusicPlayerControlsView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{},'<div class="music-controls-left">\n  <div class="media-poster"></div>\n\n  <button class="previous-btn btn-link"><i class="glyphicon fast-backward"></i></button>\n  <button class="play-btn btn-link btn-link-lg hidden"><i class="glyphicon play"></i></button>\n  <button class="pause-btn btn-link btn-link-lg hidden"><i class="glyphicon pause"></i></button>\n  <button class="stop-btn btn-link btn-link-lg hidden"><i class="glyphicon stop"></i></button>\n  <button class="next-btn btn-link"><i class="glyphicon fast-forward"></i></button>\n</div>\n\n<div class="music-controls-center">\n  <div class="music-title">\n    <button class="artist-title btn-link"></button>\n    <button class="track-title btn-link"></button>\n  </div>\n\n  <div class="seek-bar-container">\n    <span class="player-position"></span>\n    <span class="player-duration"></span>\n  </div>\n</div>\n\n<div class="music-controls-right">\n  <button class="volume-btn btn-link btn-link-lg hidden">\n    <i class="glyphicon volume-up"></i>\n    <i class="glyphicon volume-down"></i>\n    <i class="glyphicon mute"></i>\n  </button>\n</div>\n'
})}),define("plex/desktop/views/players/controls/MusicPlayerControlsView",["hb!templates/desktop/players/controls/MusicPlayerControlsView.tpl","underscore","backbone","marionette","plex/base/utils/formatters/DateTimeUtil","plex/desktop/views/images/MediaPosterImage","plex/desktop/views/players/controls/SeekBarView","plex/desktop/views/players/controls/SliderView","plex/desktop/views/dropdowns/PlayQueueDropdown"],function(e,t,n,i,s,a,r,o,l){var c=i.Layout.extend({"className":"music-controls","template":e,"muted":!1,"mutedVolume":0,"ui":{"poster":".media-poster","previousBtn":".previous-btn","nextBtn":".next-btn","volumeBtn":".volume-btn"},"regions":{"seekBar":".seek-bar-container","volume":".player-volume-slider","playQueue":".player-play-queue"},"modelEvents":{"change:item":"onItemChange","change:volume":"onVolumeChange"},"events":{"click .volume-btn":"onVolumeClick"},"triggers":{"click .artist-title":{"event":"navigate:artist","preventDefault":!0},"click .track-title":{"event":"navigate:album","preventDefault":!0},"click .previous-btn":{"event":"previous","preventDefault":!0},"click .play-btn":{"event":"play","preventDefault":!0},"click .pause-btn":{"event":"pause","preventDefault":!0},"click .stop-btn":{"event":"stop","preventDefault":!0},"click .next-btn":{"event":"next","preventDefault":!0}},"onlyAfterRender":["onVolumeChange"],"initialize":function(e){this.image=new a({"model":this.model.get("item"),"type":"album","getUrl":this.getPosterUrl,"width":60}),this.volumeSlider=new o({"className":"player-volume-slider player-slider","value":this.model.get("volume")}),this.seekBarView=new r({"model":this.model}),this.playQueueDropdown=new l({"model":this.model,"collection":e.upNextCollection}),this.listenTo(this.seekBarView,"change:value",this.onSeekBarValueChange),this.listenTo(this.volumeSlider,"change:value",this.onVolumeSliderValueChange),this.listenTo(this.playQueueDropdown,"itemview:skip",this.onSkip),this.listenTo(this.playQueueDropdown,"itemview:remove",this.onRemove),this.listenTo(this.playQueueDropdown,"move",this.onMove)
},"getPosterUrl":function(e){return e=e||this.model.get("parentThumb")||this.model.get("grandparentThumb"),e||(this.model.parent?e=this.model.parent.get("thumb"):this.model.channel&&(e=this.model.channel.get("thumb"))),e},"updateVolumeBtn":function(e){var t=this.ui.volumeBtn;e>50?(this.muted=!1,t.addClass("high"),t.removeClass("low mute")):50>=e&&e>0?(this.muted=!1,t.addClass("low"),t.removeClass("high mute")):(this.muted=!0,t.addClass("mute"),t.removeClass("high low"))},"bindings":{".artist-title":{"modelAttribute":"item","autohide":!0,"formatter":function(e){var t=e.get("originalTitle")||e.get("grandparentTitle");
return t?t:(e.channel?t=e.channel.get("title"):e.parent&&(t=e.parent.get("parentTitle")||e.parent.get("title")),t)}},".track-title":{"modelAttribute":"item","autohide":!0,"formatter":function(e){return e.get("title")}},".previous-btn":{"modelAttribute":"enablePrevious","manual":!0,"formatter":function(e,t){t.toggleClass("disabled",!e)}},".play-btn":{"modelAttribute":"paused","modelListeners":["paused","showPlayPause"],"manual":!0,"autohide":!0,"formatter":function(e){return this.model.get("showPlayPause")&&e
}},".pause-btn":{"modelAttribute":"paused","modelListeners":["paused","showPlayPause"],"manual":!0,"autohide":!0,"formatter":function(e){return this.model.get("showPlayPause")&&!e}},".stop-btn":{"modelAttribute":"showStop","manual":!0,"autohide":!0},".next-btn":{"modelAttribute":"enableNext","manual":!0,"formatter":function(e,t){t.toggleClass("disabled",!e)}},".player-position":{"modelAttribute":"position","formatter":function(e){return s.formatDuration(e)}},".player-duration":{"modelAttribute":"duration","formatter":function(e){return s.formatDuration(e)
}},".volume-btn":{"modelAttribute":"showVolume","manual":!0,"autohide":!0,"formatter":function(e){return this.$el.toggleClass("show-volume",e),e}}},"onRender":function(){this.image.setElement(this.ui.poster),this.seekBar.append(this.seekBarView),this.volume.prepend(this.volumeSlider,this.$(".music-controls-right")),this.playQueue.prepend(this.playQueueDropdown,this.$(".music-controls-right")),this.updateVolumeBtn(this.model.get("volume"))},"onClose":function(){this.image.close()},"onItemChange":function(e,t){this.image.src=null,this.image.setModel(t),this.image.render()
},"onVolumeChange":function(e,t){this.volumeSlider.setValue(t),this.updateVolumeBtn(t)},"onSeekBarValueChange":function(e){this.trigger("change:position",e)},"onVolumeSliderValueChange":function(e){this.trigger("change:volume",e)},"onVolumeClick":function(e){e.preventDefault(),this.muted?(this.mutedVolume>0?this.trigger("change:volume",this.mutedVolume):this.trigger("change:volume",100),this.muted=!1,this.mutedVolume=0):(this.muted=!0,this.mutedVolume=this.model.get("volume"),this.trigger("change:volume",0))
},"onSkip":function(e,t){this.trigger("skip",t)},"onRemove":function(e,t){this.trigger("remove",t)},"onMove":function(e,t){this.trigger("move",e,t)}});return c}),define("plex/desktop/views/players/MusicPlayerView",["hb!templates/desktop/players/MusicPlayerView.tpl","underscore","marionette","plex/base/utils/Dispatcher","plex/base/adapters/PlayerControllerAdapter","plex/base/models/AppModel","plex/base/models/SettingsModel","plex/base/models/player/PlayerModel","plex/base/models/player/UpNextCollection","plex/desktop/views/players/controls/MusicPlayerControlsView"],function(e,t,n,i,s,a,r,o,l,c){var d=n.Layout.extend({"className":"music-player","template":e,"regions":{"controls":".music-player-controls"},"initialize":function(){this.model||(this.model=this.collection.selectedItem()),this.controller=s.get("audio"),this.playerModel=new o({"item":this.model,"playlist":this.collection}),this.upNextCollection=new l(null,{"model":this.playerModel}),this.controlsView=new c({"model":this.playerModel,"upNextCollection":this.upNextCollection}),this.listenTo(a,"change:primaryPlayer",this.onPrimaryPlayerChange),this.listenTo(this.playerModel,{"change:item":this.onPlayerItemChange,"change:volume":this.onPlayerVolumeChange,"change:finished":this.onPlayerFinishedChange}),this.listenTo(this.controlsView,{"navigate:artist":this.onControlsNavigateArtist,"navigate:album":this.onControlsNavigateAlbum,"previous":this.onControlsPrevious,"play":this.onControlsPlay,"pause":this.onControlsPause,"stop":this.onControlsStop,"next":this.onControlsNext,"skip":this.onControlsSkip,"remove":this.onControlsRemove,"move":this.onControlsMove,"change:position":this.onControlsPositionChange,"change:volume":this.onControlsVolumeChange}),this.listenTo(i,{"shortcut:stop":this.onControlsStop,"shortcut:playPause":this.onPlayPauseShortcut,"shortcut:decreaseVolume":this.onDecreaseVolumeShortcut,"shortcut:increaseVolume":this.onIncreaseVolumeShortcut,"shortcut:seekBackward":this.onSeekBackwardShortcut,"shortcut:seekForward":this.onSeekForwardShortcut,"shortcut:stepBackward":this.onStepBackwardShortcut,"shortcut:stepForward":this.onStepForwardShortcut,"shortcut:skipPrevious":this.onControlsPrevious,"shortcut:skipNext":this.onControlsNext})
},"play":function(e){e||(e={});var t=!1,n=a.get("primaryPlayer");if(n){var i=n.get("nowPlaying");i.get(this.model.get("ratingKey"))&&(t=!0)}this.controller.load({"model":this.playerModel,"offset":e.offset||0,"volume":r.get("musicPlayerVolume"),"autoplay":e.autoplay,"fallbackServer":a.get("primaryServer"),"silent":t})},"onRender":function(){this.controls.append(this.controlsView,this.$el),this.play({"autoplay":!0})},"onClose":function(){this.upNextCollection.release(),this.controller.unload()},"onPrimaryPlayerChange":function(){var e=this.playerModel.get("state"),t=this.playerModel.get("position");
this.controller.stop(),this.controller=s.get("audio"),this.play({"autoplay":"paused"!==e,"offset":t})},"onPlayerItemChange":function(e,t){this.collection.setSelectedItem(t),this.model=this.collection.selectedItem()},"onPlayerVolumeChange":function(e,t){r.save("musicPlayerVolume",t)},"onPlayerFinishedChange":function(e,t){t&&i.trigger("hide:music")},"onControlsNavigateArtist":function(){if(this.model.isLibraryItem()){var e=this.model.get("grandparentKey");!e&&this.model.parent&&(e=this.model.parent.get("parentKey")),i.trigger("navigate","details",{"serverID":this.model.server.id,"key":e})
}else if(this.model.channel){var t=this.model.channel;i.trigger("navigate","channel",{"serverID":this.model.server.id,"channelID":t.id?t.id:t.get("identifier")})}},"onControlsNavigateAlbum":function(){var e=this.model.get("parentKey");if(!e&&this.model.parent&&(e=this.model.parent.get("key")),this.model.isLibraryItem())i.trigger("navigate","details",{"serverID":this.model.server.id,"key":e});else if(this.model.channel){var t=this.model.channel;i.trigger("navigate","channel",{"serverID":this.model.server.id,"channelID":t.id?t.id:t.get("identifier"),"key":e})
}},"onControlsPlay":function(){this.controller.play()},"onControlsPause":function(){this.controller.pause()},"onControlsStop":function(){this.controller.stop(),this.model.server.get("playQueues").remove("audio"),i.trigger("hide:music")},"onControlsPrevious":function(){this.controller.skipPrevious()},"onControlsNext":function(){this.controller.skipNext()},"onControlsSkip":function(e){this.controller.skipTo(e)},"onControlsRemove":function(e){this.controller.remove(e)},"onControlsMove":function(e,t){this.controller.move(e,t)
},"onControlsPositionChange":function(e){this.controller.setPosition(e)},"onControlsVolumeChange":function(e){this.controller.setVolume(e)},"onPlayPauseShortcut":function(){this.controller.playPause()},"onIncreaseVolumeShortcut":function(){this.controller.increaseVolume()},"onDecreaseVolumeShortcut":function(){this.controller.decreaseVolume()},"onSeekBackwardShortcut":function(){this.controller.seekBackward()},"onSeekForwardShortcut":function(){this.controller.seekForward()},"onStepBackwardShortcut":function(){this.controller.stepBackward()
},"onStepForwardShortcut":function(){this.controller.stepForward()}});return d}),define("hb!templates/desktop/players/PhotoPlayerView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{},'<a class="player-close-btn btn-gray" href="#">\n  <i class="glyphicon remove-2"></i>\n</a>\n\n<div class="loading loading-inline"></div>\n\n<div class="photo-player-controls">\n  <a class="previous-btn btn-gray hidden" href="#">\n    <i class="previous-icon glyphicon chevron-left"></i>\n  </a>\n\n  <a class="next-btn btn-gray hidden" href="#">\n    <i class="next-icon glyphicon chevron-right"></i>\n  </a>\n</div>\n'
})}),define("hb!templates/desktop/players/PhotoPlayerDetailsView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(){return"hidden"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var r,o,l,c="",d=this,u=n.helperMissing,h=this.escapeExpression;return c+='<div class="photo-details-container">\n  <div class="photo-details">\n    <div class="photo-loading-overlay"></div>\n\n    <div class="photo-details-info">\n      <div class="media-actions">\n        <button class="play-btn media-action-btn btn-link ',o=n.unless.call(t,(r=t&&t.player,null==r||r===!1?r:r.paused),{"hash":{},"inverse":d.noop,"fn":d.program(1,a,s),"data":s}),(o||0===o)&&(c+=o),c+=" ",o=n.unless.call(t,(r=t&&t.player,null==r||r===!1?r:r.showPlayPause),{"hash":{},"inverse":d.noop,"fn":d.program(1,a,s),"data":s}),(o||0===o)&&(c+=o),c+='"><i class="glyphicon play"></i></button>\n        <button class="pause-btn media-action-btn btn-link ',o=n["if"].call(t,(r=t&&t.player,null==r||r===!1?r:r.paused),{"hash":{},"inverse":d.noop,"fn":d.program(1,a,s),"data":s}),(o||0===o)&&(c+=o),c+=" ",o=n.unless.call(t,(r=t&&t.player,null==r||r===!1?r:r.showPlayPause),{"hash":{},"inverse":d.noop,"fn":d.program(1,a,s),"data":s}),(o||0===o)&&(c+=o),c+='"><i class="glyphicon pause"></i></button>\n        <button class="edit-btn media-action-btn btn-link"><i class="glyphicon pencil"></i></button>\n        <button class="more-btn media-action-btn btn-link"><i class="glyphicon more"></i></button>\n\n        <div class="photo-actions-dropdown media-actions-dropdown dropup pull-right">\n          <div class="dropdown-toggle" data-toggle="dropdown"></div>\n        </div>\n      </div>\n\n      <h4 class="photo-title"></h4>\n      <span class="photo-subtitle">',l={"hash":{},"data":s},c+=h((r=n.t||t&&t.t,r?r.call(t,"{1} of {2}",t&&t.index,t&&t.total,l):u.call(t,"t","{1} of {2}",t&&t.index,t&&t.total,l)))+'</span>\n      <div class="photo-summary"></div>\n    </div>\n  </div>\n</div>\n'
})}),define("plex/desktop/models/MediaActionsModel",["underscore","plex/base/models/BaseModel","plex/base/models/AppModel"],function(e,t,n){var i={"movie":{"showPlay":!0,"showEdit":!0,"showRefresh":!0,"showMarkWatched":!0,"showMarkUnwatched":!0,"showAnalyze":!0,"showFixMatch":!0,"showUnmatch":!0,"showSplitApart":!0,"showMerge":!0,"showSync":!0,"showDownload":!0,"showDelete":!0,"showInfo":!0},"show":{"showPlay":!0,"showPlayAll":!0,"showPlayUnwatched":!0,"showShuffle":!0,"showEdit":!0,"showRefresh":!0,"showMarkWatched":!0,"showMarkUnwatched":!0,"showFixMatch":!0,"showUnmatch":!0,"showSplitApart":!0,"showMerge":!0,"showSync":!0},"season":{"showPlay":!0,"showPlayAll":!0,"showPlayUnwatched":!0,"showShuffle":!0,"showEdit":!0,"showMarkWatched":!0,"showMarkUnwatched":!0,"showSync":!0},"episode":{"showPlay":!0,"showEdit":!0,"showRefresh":!0,"showMarkWatched":!0,"showMarkUnwatched":!0,"showAnalyze":!0,"showSync":!0,"showDownload":!0,"showDelete":!0,"showInfo":!0},"artist":{"showPlay":!0,"showShuffle":!0,"showEdit":!0,"showRefresh":!0,"showQueue":!0,"showFixMatch":!0,"showUnmatch":!0,"showSplitApart":!0,"showMerge":!0,"showSync":!0},"album":{"showPlay":!0,"showShuffle":!0,"showEdit":!0,"showRefresh":!0,"showQueue":!0,"showFixMatch":!0,"showUnmatch":!0,"showSplitApart":!0,"showMerge":!0,"showSync":!0},"track":{"showEdit":!0,"showAnalyze":!0,"showQueue":!0,"showSync":!0,"showDownload":!0,"showDelete":!0,"showInfo":!0},"photoAlbum":{"showPlay":!0,"showEdit":!0,"showSync":!0},"photo":{"showEdit":!0,"showAnalyze":!0,"showSync":!0,"showDownload":!0,"showDelete":!0,"showInfo":!0},"clip":{"showPlay":!0,"showSync":!0,"showShare":!0,"showInfo":!0},"playlistItem":{"showPlay":!0,"showSync":!0,"showShare":!0,"showDeleteFromPlaylist":!0,"showInfo":!0},"movieSection":{"showPlay":!0,"showShuffle":!0,"showRefresh":!0,"showMarkWatched":!0,"showMarkUnwatched":!0,"showAddToCollection":!0,"showAnalyze":!0,"showMerge":!0,"showSync":!0},"showSection":{"showPlay":!0,"showShuffle":!0,"showRefresh":!0,"showMarkWatched":!0,"showMarkUnwatched":!0,"showAddToCollection":!0,"showMerge":!0,"showSync":!0},"seasonSection":{"showPlay":!0,"showShuffle":!0,"showRefresh":!0,"showMarkWatched":!0,"showMarkUnwatched":!0,"showMerge":!0,"showSync":!0},"episodeSection":{"showPlay":!0,"showShuffle":!0,"showRefresh":!0,"showMarkWatched":!0,"showMarkUnwatched":!0,"showAnalyze":!0,"showMerge":!0,"showSync":!0},"artistSection":{"showPlay":!0,"showShuffle":!0,"showRefresh":!0,"showQueue":!0,"showAddToCollection":!0,"showMerge":!0,"showSync":!0},"albumSection":{"showPlay":!0,"showShuffle":!0,"showRefresh":!0,"showQueue":!0,"showMerge":!0,"showSync":!0},"photoSection":{"showAnalyze":!0,"showSync":!0}},s={"showListDropdown":["showShuffle","showQueue","showRefresh","showSync","showDownload","showShare","showInfo"]},a=t.extend({"initialize":function(e,t){t||(t={}),this.item=t.item,this.parent=this.item||this.section,this.showAdvanced=t.showAdvanced;
var i=n.get("user");this.signedIn=i.get("signedIn"),this.setDefaults(t.type),this.listenToParent(),this.listenTo(n,"change:primaryPlayer",this.onPrimaryPlayerChange),this.listenTo(i,"change:signedIn",this.onSignedInChange)},"setDefaults":function(e){e&&e!==this.type&&(this.type=e,this.section&&(e+="Section"),this.defaults=i[e]||{},this.clear().set(this.defaults))},"setParent":function(e){this.parent&&this.stopListening(this.parent),this.server&&this.stopListening(this.server),this.playQueues&&this.stopListening(this.playQueues),this.item=e.item,this.section=e.section,this.parent=this.item||this.section,this.listenToParent()
},"listenToParent":function(){if(this.section){var e=this.parent.get("currentType");this.setDefaults(e.get("typeString")),this.listenTo(this.parent,"change:currentType",this.onCurrentTypeChange),this.listenTo(this.parent,"change:allowSync",this.onAllowSyncChange)}else this.item&&(this.setDefaults(this.item.get("type")),this.showAdvanced&&(this.listenTo(this.parent,"change:unviewedLeafCount",this.onViewStateChange),this.listenTo(this.parent,"change:viewOffset",this.onViewStateChange),this.listenTo(this.parent,"change:viewCount",this.onViewStateChange),this.listenTo(this.parent,"change:guid",this.onGuidChange)));
this.parent&&(this.server=this.parent.server,this.shared=this.server.get("shared"),this.synced=this.server.get("synced"),this.multiuser=this.server.get("multiuser"),this.playQueues=this.server.get("playQueues"),this.listenTo(this.server,"change:shared",this.onServerSharedChange),this.listenTo(this.playQueues,"change",this.onPlayQueuesChange)),this.updateAll()},"updateAll":function(){this.updateCanPlay(),this.updateAction("showShuffle",this.canPlay,{"shuffle":!0}),this.updateAction("showQueue",this.isMedia),this.updateAction("showEdit",this.canEdit),this.updateAction("showRefresh",this.canEdit),this.updateAction("showSync",this.canSync),this.updateAction("showDownload",this.canEdit),this.updateAction("showShare",this.canShare),this.updateAction("showDelete",this.canDelete),this.updateAction("showInfo",this.isMedia),this.showAdvanced&&(this.updateAction("showAnalyze",this.canEdit),this.updateAction("showMarkWatched",this.isUnwatched),this.updateAction("showMarkUnwatched",this.isWatched),this.updateAction("showFixMatch",this.canEdit),this.updateAction("showUnmatch",this.canUnmatch),this.updateAction("showSplitApart",this.canSplitApart)),this.updateCanQueue(),this.updateDropdown("showListDropdown")
},"updateAction":function(e,t,n){var i=this.defaults?this.defaults[e]:!1;this.set(e,t.call(this,i,n))},"updateCanPlay":function(){this.updateAction("showPlay",this.canPlay),this.updateAction("showPlayAll",this.canPlay,{"all":!0}),this.updateAction("showPlayUnwatched",this.canPlay,{"unwatched":!0})},"updateCanQueue":function(){var e=this.parent&&this.playQueues.getFor(this.parent),t=!n.get("primaryPlayer");this.set("canQueue",!(!e||!t))},"updateDropdown":function(t){var n=s[t],i=e.map(n,function(e){return this.get(e)
},this);this.set(t,e.some(i))},"canPlay":function(t,n){return t?n&&n.unwatched&&this.parent&&0===this.parent.get("unviewedLeafCount")?!1:e.isEmpty(n)&&this.canPlay(this.defaults.showPlayUnwatched,{"unwatched":!0})?!1:n&&n.all&&!this.canPlay(this.defaults.showPlayUnwatched,{"unwatched":!0})?!1:this.parent&&!this.playQueues.canCreateFor(this.parent,n)?!1:!this.item||!this.item.get("isFolder")&&!this.item.get("hasInvalidKey"):!1},"canEdit":function(e){return!e||!this.item||this.shared||this.synced?!1:this.item.isLibraryItem()&&!this.item.get("isFolder")
},"isWatched":function(e){if(!e||!this.item||this.shared&&!this.multiuser)return!1;if("show"===this.type||"season"===this.type)return!this.item.get("unviewedLeafCount");var t=!!this.item.get("viewCount"),n=!!this.item.get("viewOffset");return t&&!n},"isUnwatched":function(e){if(!e||!this.item||this.shared&&!this.multiuser)return!1;if("show"===this.type||"season"===this.type)return this.item.get("unviewedLeafCount")>0;var t=!!this.item.get("viewCount"),n=!!this.item.get("viewOffset");return!t||n},"canUnmatch":function(e){if(!e||!this.item||this.shared||this.synced)return!1;
var t=this.item.get("guid");return!(!t||/(local|none)\:\/\//.test(t))},"canSplitApart":function(e){if(!e||!this.item||this.shared||this.synced)return!1;var t;return t=this.item.get("show"===this.type||"artist"===this.type||"album"===this.type?"Location":"Media"),t.length>1&&this.server.supports("splitApart")},"canSync":function(e){if(!e||!this.parent||this.shared||this.synced)return!1;var t=this.server.supports("sync"),n=this.parent.get("allowSync")||this.parent.collection&&this.parent.collection.allowSync;
return!(!t||!n||this.parent.get("isFolder"))},"canShare":function(e){return e&&this.signedIn},"canDelete":function(e){return!e||!this.item||this.shared||this.synced?!1:!(!this.item.isLibraryItem()||!this.item.server.get("allowMediaDeletion"))},"isMedia":function(e){if(!e)return!1;if(!this.item)return!0;var t="photo"===this.type&&!this.item.isLibraryItem();return!t&&!this.item.get("isFolder")},"onPrimaryPlayerChange":function(){this.updateCanQueue()},"onSignedInChange":function(e,t){this.signedIn=t,this.updateAction("showShare",this.canShare),this.updateDropdown("showListDropdown")
},"onCurrentTypeChange":function(e,t){this.setDefaults(t.get("typeString")),this.updateAll()},"onAllowSyncChange":function(){this.updateAction("showSync",this.canSync)},"onViewStateChange":function(){this.updateCanPlay(),this.updateAction("showMarkWatched",this.isUnwatched),this.updateAction("showMarkUnwatched",this.isWatched)},"onGuidChange":function(){this.updateAction("showUnmatch",this.canUnmatch)},"onServerSharedChange":function(e,t){this.shared=t,this.updateAll()},"onPlayQueuesChange":function(){this.updateCanQueue()
}});return a}),define("hb!templates/desktop/modals/EditMetadataModal",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s,a,o="";return o+='\n          <li><a class="btn-gray change-pane-btn general-btn',a={"hash":{},"inverse":m.noop,"fn":m.program(2,r,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,e&&e.selectedPane,"general",a):g.call(e,"if_eq",e&&e.selectedPane,"general",a),(s||0===s)&&(o+=s),o+='" data-pane="general" href="#">\n            <i class="modal-nav-icon glyphicon align-center"></i>\n            ',a={"hash":{},"data":t},o+=v((i=n.t||e&&e.t,i?i.call(e,"General",a):g.call(e,"t","General",a)))+"\n          </a></li>\n          "
}function r(){return" selected"}function o(e,t){var i,s,a,o="";return o+='\n          <li><a class="btn-gray change-pane-btn tags-btn',a={"hash":{},"inverse":m.noop,"fn":m.program(2,r,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,e&&e.selectedPane,"tags",a):g.call(e,"if_eq",e&&e.selectedPane,"tags",a),(s||0===s)&&(o+=s),o+='" data-pane="tags" href="#">\n            <i class="modal-nav-icon glyphicon tags"></i>\n            ',a={"hash":{},"data":t},o+=v((i=n.t||e&&e.t,i?i.call(e,"Tags",a):g.call(e,"t","Tags",a)))+"\n          </a></li>\n          "
}function l(e,t){var i,s,a,o="";return o+='\n          <li><a class="btn-gray change-pane-btn poster-btn',a={"hash":{},"inverse":m.noop,"fn":m.program(2,r,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,e&&e.selectedPane,"poster",a):g.call(e,"if_eq",e&&e.selectedPane,"poster",a),(s||0===s)&&(o+=s),o+='" data-pane="poster" href="#">\n            <i class="modal-nav-icon glyphicon picture"></i>\n            ',a={"hash":{},"data":t},o+=v((i=n.t||e&&e.t,i?i.call(e,"Poster",a):g.call(e,"t","Poster",a)))+"\n          </a></li>\n          "
}function c(e,t){var i,s,a,o="";return o+='\n          <li><a class="btn-gray change-pane-btn banner-btn',a={"hash":{},"inverse":m.noop,"fn":m.program(2,r,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,e&&e.selectedPane,"banner",a):g.call(e,"if_eq",e&&e.selectedPane,"banner",a),(s||0===s)&&(o+=s),o+='" data-pane="banner" href="#">\n            <i class="modal-nav-icon glyphicon picture"></i>\n            ',a={"hash":{},"data":t},o+=v((i=n.t||e&&e.t,i?i.call(e,"Banner",a):g.call(e,"t","Banner",a)))+"\n          </a></li>\n          "
}function d(e,t){var i,s,a,o="";return o+='\n          <li><a class="btn-gray change-pane-btn art-btn',a={"hash":{},"inverse":m.noop,"fn":m.program(2,r,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,e&&e.selectedPane,"art",a):g.call(e,"if_eq",e&&e.selectedPane,"art",a),(s||0===s)&&(o+=s),o+='" data-pane="art" href="#">\n            <i class="modal-nav-icon glyphicon picture"></i>\n            ',a={"hash":{},"data":t},o+=v((i=n.t||e&&e.t,i?i.call(e,"Background",a):g.call(e,"t","Background",a)))+"\n          </a></li>\n          "
}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var u,h,p,f="",m=this,g=n.helperMissing,v=this.escapeExpression,y="function";return f+='<div class="modal-dialog">\n  <div class="modal-content">\n    <div class="modal-header">\n      <button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button>\n      <h4 class="modal-title"><i class="modal-icon glyphicon pencil"></i> '+v((u=t&&t.item,u=null==u||u===!1?u:u.title,typeof u===y?u.apply(t):u))+'</h4>\n    </div>\n\n    <div class="modal-body modal-body-scroll modal-body-with-panes">\n      <div class="modal-nav-pane">\n        <ul class="list modal-nav-list">\n          ',h=n["if"].call(t,(u=t&&t.panes,null==u||u===!1?u:u.general),{"hash":{},"inverse":m.noop,"fn":m.program(1,a,s),"data":s}),(h||0===h)&&(f+=h),f+="\n          ",h=n["if"].call(t,(u=t&&t.panes,null==u||u===!1?u:u.tags),{"hash":{},"inverse":m.noop,"fn":m.program(4,o,s),"data":s}),(h||0===h)&&(f+=h),f+="\n          ",h=n["if"].call(t,(u=t&&t.panes,null==u||u===!1?u:u.poster),{"hash":{},"inverse":m.noop,"fn":m.program(6,l,s),"data":s}),(h||0===h)&&(f+=h),f+="\n          ",h=n["if"].call(t,(u=t&&t.panes,null==u||u===!1?u:u.banner),{"hash":{},"inverse":m.noop,"fn":m.program(8,c,s),"data":s}),(h||0===h)&&(f+=h),f+="\n          ",h=n["if"].call(t,(u=t&&t.panes,null==u||u===!1?u:u.art),{"hash":{},"inverse":m.noop,"fn":m.program(10,d,s),"data":s}),(h||0===h)&&(f+=h),f+='\n        </ul>\n      </div>\n\n      <div class="modal-body-pane minimal-scroll">\n      </div>\n    </div>\n\n    <div class="modal-footer">\n      <span class="form-message"></span>\n\n      <button type="button" class="cancel-btn btn btn-default" data-dismiss="modal">',p={"hash":{},"data":s},f+=v((u=n.t||t&&t.t,u?u.call(t,"Cancel",p):g.call(t,"t","Cancel",p)))+'</button>\n      <button type="button" class="save-btn btn btn-primary btn-loading">\n        <div class="loading loading-sm"></div>\n        <span class="btn-label">',p={"hash":{},"data":s},f+=v((u=n.t||t&&t.t,u?u.call(t,"Save Changes",p):g.call(t,"t","Save Changes",p)))+"</span>\n      </button>\n    </div>\n\n  </div>\n</div>\n"
})}),define("hb!templates/desktop/editmetadata/EditMetadataArtworkView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s,a="";return a+='\n  <div class="upload-artwork-container">\n    <div class="upload-prompt">\n      ',i=n["if"].call(e,e&&e.showFileUpload,{"hash":{},"inverse":u.noop,"fn":u.program(2,r,t),"data":t}),(i||0===i)&&(a+=i),a+='\n\n      <a class="upload-url-btn" href="#">',s={"hash":{},"data":t},a+=d((i=n.t||e&&e.t,i?i.call(e,"enter a url",s):c.call(e,"t","enter a url",s)))+'</a>\n    </div>\n\n    <div class="upload-progress">\n      ',s={"hash":{},"data":t},a+=d((i=n.t||e&&e.t,i?i.call(e,"Uploading artwork...",s):c.call(e,"t","Uploading artwork...",s)))+'\n    </div>\n\n    <div class="upload-success">\n      ',s={"hash":{},"data":t},a+=d((i=n.t||e&&e.t,i?i.call(e,"this artwork was uploaded successfully",s):c.call(e,"t","this artwork was uploaded successfully",s)))+'\n      <span class="upload-prompt-divider">&middot;</span>\n      ',s={"hash":{},"data":t},a+=d((i=n.t||e&&e.t,i?i.call(e,"{1}upload another{2}","<a class='upload-back-btn' href='#'>","</a>",s):c.call(e,"t","{1}upload another{2}","<a class='upload-back-btn' href='#'>","</a>",s)))+'\n    </div>\n\n    <div class="upload-error">\n      ',s={"hash":{},"data":t},a+=d((i=n.t||e&&e.t,i?i.call(e,"there was an error uploading this artwork",s):c.call(e,"t","there was an error uploading this artwork",s)))+'\n      <span class="upload-prompt-divider">&middot;</span>\n      ',s={"hash":{},"data":t},a+=d((i=n.t||e&&e.t,i?i.call(e,"{1}try again{2}","<a class='upload-back-btn' href='#'>","</a>",s):c.call(e,"t","{1}try again{2}","<a class='upload-back-btn' href='#'>","</a>",s)))+'\n    </div>\n\n    <form id="upload-form" class="upload-form">\n      <input type="text" class="form-control" name="url" placeholder="',s={"hash":{},"data":t},a+=d((i=n.t||e&&e.t,i?i.call(e,"Enter a url to upload an image from the web",s):c.call(e,"t","Enter a url to upload an image from the web",s)))+'">\n\n      <div class="upload-form-help">\n        <div class="pull-right">',s={"hash":{},"data":t},a+=d((i=n.t||e&&e.t,i?i.call(e,"enter to {1}upload{2}","<a class='submit-url-btn' href='#'>","</a>",s):c.call(e,"t","enter to {1}upload{2}","<a class='submit-url-btn' href='#'>","</a>",s)))+'</div>\n        <div class="pull-left">',s={"hash":{},"data":t},a+=d((i=n.t||e&&e.t,i?i.call(e,"esc to {1}cancel{2}","<a class='cancel-url-btn' href='#'>","</a>",s):c.call(e,"t","esc to {1}cancel{2}","<a class='cancel-url-btn' href='#'>","</a>",s)))+"</div>\n      </div>\n    </form>\n  </div>\n"
}function r(e,t){var i,s,a="";return a+='\n        <span class="artwork-file-container">\n          <input type="file" class="artwork-file-control" multiple>\n          <a href="#">',s={"hash":{},"data":t},a+=d((i=n.t||e&&e.t,i?i.call(e,"choose an image",s):c.call(e,"t","choose an image",s)))+'</a>\n        </span>\n\n        <span class="upload-prompt-divider">&middot;</span>\n        ',s={"hash":{},"data":t},a+=d((i=n.t||e&&e.t,i?i.call(e,"drag and drop",s):c.call(e,"t","drag and drop",s)))+'\n        <span class="upload-prompt-divider">&middot;</span>\n      '
}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var o,l="",c=n.helperMissing,d=this.escapeExpression,u=this;return o=n["if"].call(t,t&&t.showUpload,{"hash":{},"inverse":u.noop,"fn":u.program(1,a,s),"data":s}),(o||0===o)&&(l+=o),l+='\n\n<div class="artwork-list-container"></div>\n'})}),define("plex/base/models/library/ArtworkCollection",["underscore","plex/base/models/BaseCollection","plex/base/models/library/MetadataModel"],function(e,t,n){var i=t.extend({"model":n,"url":function(){var t=e.result(this.parent,"url");
return t+"/"+this.artworkType+"s"},"initialize":function(e,t){this.artworkType=t.artworkType},"parse":function(e){return this.convert(e,"Photo")}});return i}),define("hb!templates/desktop/lists/library/ArtworkListItem",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,r="",o="function",l=this.escapeExpression;return r+='<a class="artwork-option media-poster-container" data-rating-key="',(a=n.ratingKey)?a=a.call(t,{"hash":{},"data":s}):(a=t&&t.ratingKey,a=typeof a===o?a.call(t,{"hash":{},"data":s}):a),r+=l(a)+'" href="#">\n  <div class="media-poster"></div>\n</a>\n'
})}),define("plex/desktop/views/lists/library/ArtworkListItem",["hb!templates/desktop/lists/library/ArtworkListItem.tpl","underscore","marionette","plex/base/utils/PosterSizes","plex/base/utils/PosterPlaceholders","plex/desktop/views/images/BaseImage"],function(e,t,n,i,s,a){var r=n.Layout.extend({"tagName":"span","template":e,"regions":{"poster":".media-poster"},"initialize":function(e){var t=e.artworkType,n=150;"art"===t?n=242:"banner"===t&&(n=520),this.$el.addClass(t),this.image=new a({"className":"media-poster-image","model":this.model,"modelAttribute":"thumb","placeholderClass":s[t],"width":n,"height":i.getPosterHeight(t,n)})
},"bindings":{".artwork-option":{"modelAttribute":"selected","manual":!0,"formatter":function(e,t){t.toggleClass("selected",e)}}},"onRender":function(){this.poster.show(this.image)}});return r}),define("plex/desktop/views/lists/library/ArtworkList",["plex/desktop/views/lists/BaseList","plex/desktop/views/lists/library/ArtworkListItem"],function(e,t){var n=e.extend({"className":"artwork-options-list","itemView":t});return n}),define("plex/desktop/views/editmetadata/EditMetadataArtworkView",["hb!templates/desktop/editmetadata/EditMetadataArtworkView.tpl","underscore","jquery","marionette","plex/base/utils/Capabilities","plex/base/models/library/MetadataModel","plex/base/models/library/ArtworkCollection","plex/desktop/views/lists/library/ArtworkList"],function(e,t,n,i,s,a,r,o){var l=i.Layout.extend({"template":e,"dragStatus":0,"ui":{"upload":".upload-artwork-container","urlInput":"input[name=url]"},"regions":{"list":".artwork-list-container"},"events":{"dragenter":"onDragEnter","dragleave":"onDragLeave","dragover":"onDragOver","drop":"onDrop","keydown":"onKeyDown","change .artwork-file-control":"onFileChange","click .upload-url-btn":"onUploadUrlClick","click .cancel-url-btn":"onCancelUrlClick","click .submit-url-btn":"onUrlSubmit","submit #upload-form":"onUrlSubmit","click .upload-back-btn":"onUploadBackClick","click .artwork-option":"onArtworkOptionClick"},"initialize":function(e){this.type=e.type,this.changes={},this.collection=new r([],{"server":this.model.server,"section":this.model.section,"parent":this.model,"artworkType":this.type}),this.collection.fetch()
},"serializeData":function(){return{"showUpload":this.model.server.supports("artworkUpload"),"showFileUpload":s.hasFileUpload}},"flushChanges":function(){this.model.set(this.changes)},"uploadFiles":function(e){if(e&&e.length){this.changes={},this.ui.upload.removeClass("show-success show-error");var i=this.collection.url(),s=t.extend(this.model.server.getXHROptions(i),{"type":"POST","processData":!1}),a=[],r=t.bind(function(e){/image\//.test(e.type)&&(s.data=e,a.push(n.ajax(s)))},this);if(t.each(e,r),!a.length)return void this.ui.upload.addClass("show-error");
this.ui.upload.addClass("show-progress"),this.monitorUpload(n.when.apply(n,a))}},"uploadUrl":function(e){this.changes={},this.ui.upload.removeClass("show-form"),this.ui.upload.addClass("show-progress"),this.ui.urlInput.val(""),e=this.collection.url()+"?url="+encodeURIComponent(e);var i=t.extend(this.model.server.getXHROptions(e),{"type":"POST"});this.monitorUpload(n.ajax(i))},"monitorUpload":function(e){e.done(t.bind(function(){this.ui.upload.addClass("show-success");var e={"server":this.model.server,"onlyIfCached":!0},n=new a({"key":this.model.get("key")},e);
t.isEmpty(n)||(n.fetch(),n.release()),this.collection.fetch()},this)),e.fail(t.bind(function(){this.ui.upload&&this.ui.upload.addClass("show-error")},this)),e.always(t.bind(function(){this.ui.upload&&this.ui.upload.removeClass("show-progress")},this))},"onRender":function(){this.list.show(new o({"collection":this.collection,"itemViewOptions":{"artworkType":this.type}}))},"onClose":function(){this.collection.release()},"onDragEnter":function(){this.dragStatus++,this.ui.upload.addClass("drag-hover")
},"onDragLeave":function(){this.dragStatus--,0===this.dragStatus&&this.ui.upload.removeClass("drag-hover")},"onDragOver":function(e){e.preventDefault()},"onDrop":function(e){e.preventDefault(),e.stopPropagation(),this.dragStatus=0,this.ui.upload.removeClass("drag-hover"),this.uploadFiles(e.originalEvent.dataTransfer.files)},"onKeyDown":function(e){27===e.which&&this.ui.upload.hasClass("show-form")&&(e.preventDefault(),this.ui.upload.removeClass("show-form"))},"onFileChange":function(e){this.uploadFiles(e.target.files)
},"onUploadUrlClick":function(e){e.preventDefault(),this.ui.upload.addClass("show-form"),this.ui.urlInput.focus()},"onCancelUrlClick":function(e){e.preventDefault(),this.ui.upload.removeClass("show-form")},"onUrlSubmit":function(e){e.preventDefault();var t=this.ui.urlInput.val();t?this.uploadUrl(t):this.ui.upload.removeClass("show-form")},"onUploadBackClick":function(e){e.preventDefault(),this.ui.upload.removeClass("show-success show-error")},"onArtworkOptionClick":function(e){e.preventDefault();
var t=n(e.currentTarget),i=t.data("ratingKey");this.$(".artwork-option.selected").removeClass("selected"),t.addClass("selected"),this.changes["artwork:"+this.type]=i}});return l}),define("hb!templates/desktop/editmetadata/EditMetadataAlbumGeneralView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,r,o="",l=n.helperMissing,c=this.escapeExpression;return o+='<form class="edit-metadata-form">\n\n<div class="row">\n  <div class="col-md-6">\n    ',r={"hash":{"label":"Album","name":"title","value":(a=t&&t.item,null==a||a===!1?a:a.title),"locked":(a=t&&t.locked,null==a||a===!1?a:a.title)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTextInput",r):l.call(t,"partial","lockableTextInput",r)))+'\n  </div>\n\n  <div class="col-md-6">\n    ',r={"hash":{"label":"Sort Album","name":"titleSort","value":(a=t&&t.item,null==a||a===!1?a:a.titleSort),"locked":(a=t&&t.locked,null==a||a===!1?a:a.titleSort)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTextInput",r):l.call(t,"partial","lockableTextInput",r)))+'\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-md-6">\n    ',r={"hash":{"label":"Year","name":"year","value":(a=t&&t.item,null==a||a===!1?a:a.year),"locked":(a=t&&t.locked,null==a||a===!1?a:a.year)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTextInput",r):l.call(t,"partial","lockableTextInput",r)))+'\n  </div>\n\n  <div class="col-md-6">\n    ',r={"hash":{"label":"Rating","name":"rating","value":(a=t&&t.item,null==a||a===!1?a:a.rating),"locked":(a=t&&t.locked,null==a||a===!1?a:a.rating)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTextInput",r):l.call(t,"partial","lockableTextInput",r)))+'\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-md-6">\n    ',r={"hash":{"label":"Record Label","name":"studio","value":(a=t&&t.item,null==a||a===!1?a:a.studio),"locked":(a=t&&t.locked,null==a||a===!1?a:a.studio)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTextInput",r):l.call(t,"partial","lockableTextInput",r)))+'\n  </div>\n\n  <div class="col-md-6">\n    ',r={"hash":{"label":"Release Date","name":"originallyAvailableAt","value":(a=t&&t.item,null==a||a===!1?a:a.originallyAvailableAt),"locked":(a=t&&t.locked,null==a||a===!1?a:a.originallyAvailableAt)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTextInput",r):l.call(t,"partial","lockableTextInput",r)))+'\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-md-12">\n    ',r={"hash":{"label":"Review","name":"summary","value":(a=t&&t.item,null==a||a===!1?a:a.summary),"type":"textarea","rows":"5","locked":(a=t&&t.locked,null==a||a===!1?a:a.summary)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTextInput",r):l.call(t,"partial","lockableTextInput",r)))+"\n  </div>\n</div>\n\n</form>\n"
})}),define("hb!templates/desktop/editmetadata/EditMetadataArtistGeneralView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,r,o="",l=n.helperMissing,c=this.escapeExpression;return o+='<form class="edit-metadata-form">\n\n<div class="row">\n  <div class="col-md-6">\n    ',r={"hash":{"label":"Artist","name":"title","value":(a=t&&t.item,null==a||a===!1?a:a.title),"locked":(a=t&&t.locked,null==a||a===!1?a:a.title)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTextInput",r):l.call(t,"partial","lockableTextInput",r)))+'\n  </div>\n\n  <div class="col-md-6">\n    ',r={"hash":{"label":"Sort Artist","name":"titleSort","value":(a=t&&t.item,null==a||a===!1?a:a.titleSort),"locked":(a=t&&t.locked,null==a||a===!1?a:a.titleSort)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTextInput",r):l.call(t,"partial","lockableTextInput",r)))+'\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-md-6">\n    ',r={"hash":{"label":"Tagline","name":"tagline","value":(a=t&&t.item,null==a||a===!1?a:a.tagline),"locked":(a=t&&t.locked,null==a||a===!1?a:a.tagline)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTextInput",r):l.call(t,"partial","lockableTextInput",r)))+'\n  </div>\n\n  <div class="col-md-6">\n    ',r={"hash":{"label":"Rating","name":"rating","value":(a=t&&t.item,null==a||a===!1?a:a.rating),"locked":(a=t&&t.locked,null==a||a===!1?a:a.rating)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTextInput",r):l.call(t,"partial","lockableTextInput",r)))+'\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-md-12">\n    ',r={"hash":{"label":"Biography","name":"summary","value":(a=t&&t.item,null==a||a===!1?a:a.summary),"type":"textarea","rows":"5","locked":(a=t&&t.locked,null==a||a===!1?a:a.summary)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTextInput",r):l.call(t,"partial","lockableTextInput",r)))+"\n  </div>\n</div>\n\n</form>\n"
})}),define("hb!templates/desktop/editmetadata/EditMetadataEpisodeGeneralView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,r,o="",l=n.helperMissing,c=this.escapeExpression;return o+='<form class="edit-metadata-form">\n\n<div class="row">\n  <div class="col-md-6">\n    ',r={"hash":{"label":"Title","name":"title","value":(a=t&&t.item,null==a||a===!1?a:a.title),"locked":(a=t&&t.locked,null==a||a===!1?a:a.title)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTextInput",r):l.call(t,"partial","lockableTextInput",r)))+'\n  </div>\n\n  <div class="col-md-6">\n    ',r={"hash":{"label":"Sort Title","name":"titleSort","value":(a=t&&t.item,null==a||a===!1?a:a.titleSort),"locked":(a=t&&t.locked,null==a||a===!1?a:a.titleSort)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTextInput",r):l.call(t,"partial","lockableTextInput",r)))+'\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-md-4">\n    ',r={"hash":{"label":"Rating","name":"rating","value":(a=t&&t.item,null==a||a===!1?a:a.rating),"locked":(a=t&&t.locked,null==a||a===!1?a:a.rating)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTextInput",r):l.call(t,"partial","lockableTextInput",r)))+'\n  </div>\n\n  <div class="col-md-4">\n    ',r={"hash":{"label":"Content Rating","name":"contentRating","value":(a=t&&t.item,null==a||a===!1?a:a.contentRating),"locked":(a=t&&t.locked,null==a||a===!1?a:a.contentRating)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTextInput",r):l.call(t,"partial","lockableTextInput",r)))+'\n  </div>\n\n  <div class="col-md-4">\n    ',r={"hash":{"label":"Originally Available","name":"originallyAvailableAt","value":(a=t&&t.item,null==a||a===!1?a:a.originallyAvailableAt),"locked":(a=t&&t.locked,null==a||a===!1?a:a.originallyAvailableAt)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTextInput",r):l.call(t,"partial","lockableTextInput",r)))+'\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-md-12">\n    ',r={"hash":{"label":"Summary","name":"summary","value":(a=t&&t.item,null==a||a===!1?a:a.summary),"type":"textarea","rows":"5","locked":(a=t&&t.locked,null==a||a===!1?a:a.summary)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTextInput",r):l.call(t,"partial","lockableTextInput",r)))+"\n  </div>\n</div>\n\n</form>\n"
})}),define("hb!templates/desktop/editmetadata/EditMetadataMovieGeneralView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,r,o="",l=n.helperMissing,c=this.escapeExpression;return o+='<form class="edit-metadata-form">\n\n<div class="row">\n  <div class="col-md-6">\n    ',r={"hash":{"label":"Title","name":"title","value":(a=t&&t.item,null==a||a===!1?a:a.title),"locked":(a=t&&t.locked,null==a||a===!1?a:a.title)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTextInput",r):l.call(t,"partial","lockableTextInput",r)))+'\n  </div>\n\n  <div class="col-md-6">\n    ',r={"hash":{"label":"Sort Title","name":"titleSort","value":(a=t&&t.item,null==a||a===!1?a:a.titleSort),"locked":(a=t&&t.locked,null==a||a===!1?a:a.titleSort)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTextInput",r):l.call(t,"partial","lockableTextInput",r)))+'\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-md-6">\n    ',r={"hash":{"label":"Original Title","name":"originalTitle","value":(a=t&&t.item,null==a||a===!1?a:a.originalTitle),"locked":(a=t&&t.locked,null==a||a===!1?a:a.originalTitle)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTextInput",r):l.call(t,"partial","lockableTextInput",r)))+'\n  </div>\n\n  <div class="col-md-6">\n    ',r={"hash":{"label":"Studio","name":"studio","value":(a=t&&t.item,null==a||a===!1?a:a.studio),"locked":(a=t&&t.locked,null==a||a===!1?a:a.studio)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTextInput",r):l.call(t,"partial","lockableTextInput",r)))+'\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-md-4">\n    ',r={"hash":{"label":"Year","name":"year","value":(a=t&&t.item,null==a||a===!1?a:a.year),"locked":(a=t&&t.locked,null==a||a===!1?a:a.year)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTextInput",r):l.call(t,"partial","lockableTextInput",r)))+'\n  </div>\n\n  <div class="col-md-4">\n    ',r={"hash":{"label":"Rating","name":"rating","value":(a=t&&t.item,null==a||a===!1?a:a.rating),"locked":(a=t&&t.locked,null==a||a===!1?a:a.rating)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTextInput",r):l.call(t,"partial","lockableTextInput",r)))+'\n  </div>\n\n  <div class="col-md-4">\n    ',r={"hash":{"label":"Content Rating","name":"contentRating","value":(a=t&&t.item,null==a||a===!1?a:a.contentRating),"locked":(a=t&&t.locked,null==a||a===!1?a:a.contentRating)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTextInput",r):l.call(t,"partial","lockableTextInput",r)))+'\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-md-6">\n    ',r={"hash":{"label":"Originally Available","name":"originallyAvailableAt","value":(a=t&&t.item,null==a||a===!1?a:a.originallyAvailableAt),"locked":(a=t&&t.locked,null==a||a===!1?a:a.originallyAvailableAt)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTextInput",r):l.call(t,"partial","lockableTextInput",r)))+'\n  </div>\n\n  <div class="col-md-6">\n    ',r={"hash":{"label":"Tagline","name":"tagline","value":(a=t&&t.item,null==a||a===!1?a:a.tagline),"locked":(a=t&&t.locked,null==a||a===!1?a:a.tagline)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTextInput",r):l.call(t,"partial","lockableTextInput",r)))+'\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-md-12">\n    ',r={"hash":{"label":"Summary","name":"summary","value":(a=t&&t.item,null==a||a===!1?a:a.summary),"type":"textarea","rows":"5","locked":(a=t&&t.locked,null==a||a===!1?a:a.summary)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTextInput",r):l.call(t,"partial","lockableTextInput",r)))+"\n  </div>\n</div>\n\n</form>\n"
})}),define("hb!templates/desktop/editmetadata/EditMetadataPhotoAlbumGeneralView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,r,o="",l=n.helperMissing,c=this.escapeExpression;return o+='<form class="edit-metadata-form">\n\n<div class="row">\n  <div class="col-md-6">\n    ',r={"hash":{"label":"Title","name":"title","value":(a=t&&t.item,null==a||a===!1?a:a.title),"locked":(a=t&&t.locked,null==a||a===!1?a:a.title)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTextInput",r):l.call(t,"partial","lockableTextInput",r)))+'\n  </div>\n\n  <div class="col-md-6">\n    ',r={"hash":{"label":"Sort Title","name":"titleSort","value":(a=t&&t.item,null==a||a===!1?a:a.titleSort),"locked":(a=t&&t.locked,null==a||a===!1?a:a.titleSort)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTextInput",r):l.call(t,"partial","lockableTextInput",r)))+'\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-md-12">\n    ',r={"hash":{"label":"Summary","name":"summary","value":(a=t&&t.item,null==a||a===!1?a:a.summary),"type":"textarea","rows":"5","locked":(a=t&&t.locked,null==a||a===!1?a:a.summary)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTextInput",r):l.call(t,"partial","lockableTextInput",r)))+"\n  </div>\n</div>\n\n</form>\n"
})}),define("hb!templates/desktop/editmetadata/EditMetadataPhotoGeneralView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,r,o="",l=n.helperMissing,c=this.escapeExpression;return o+='<form class="edit-metadata-form">\n\n<div class="row">\n  <div class="col-md-5">\n    ',r={"hash":{"label":"Title","name":"title","value":(a=t&&t.item,null==a||a===!1?a:a.title),"locked":(a=t&&t.locked,null==a||a===!1?a:a.title)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTextInput",r):l.call(t,"partial","lockableTextInput",r)))+'\n  </div>\n\n  <div class="col-md-5">\n    ',r={"hash":{"label":"Sort Title","name":"titleSort","value":(a=t&&t.item,null==a||a===!1?a:a.titleSort),"locked":(a=t&&t.locked,null==a||a===!1?a:a.titleSort)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTextInput",r):l.call(t,"partial","lockableTextInput",r)))+'\n  </div>\n\n  <div class="col-md-2">\n    ',r={"hash":{"label":"Year","name":"year","value":(a=t&&t.item,null==a||a===!1?a:a.year),"locked":(a=t&&t.locked,null==a||a===!1?a:a.year)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTextInput",r):l.call(t,"partial","lockableTextInput",r)))+'\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-md-12">\n    ',r={"hash":{"label":"Summary","name":"summary","value":(a=t&&t.item,null==a||a===!1?a:a.summary),"type":"textarea","rows":"5","locked":(a=t&&t.locked,null==a||a===!1?a:a.summary)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTextInput",r):l.call(t,"partial","lockableTextInput",r)))+"\n  </div>\n</div>\n\n</form>\n"
})}),define("hb!templates/desktop/editmetadata/EditMetadataSeasonGeneralView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,r,o="",l=n.helperMissing,c=this.escapeExpression;return o+='<form class="edit-metadata-form">\n\n<div class="row">\n  <div class="col-md-12">\n    ',r={"hash":{"label":"Summary","name":"summary","value":(a=t&&t.item,null==a||a===!1?a:a.summary),"type":"textarea","rows":"5","locked":(a=t&&t.locked,null==a||a===!1?a:a.summary)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTextInput",r):l.call(t,"partial","lockableTextInput",r)))+"\n  </div>\n</div>\n\n</form>\n"
})}),define("hb!templates/desktop/editmetadata/EditMetadataShowGeneralView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,r,o="",l=n.helperMissing,c=this.escapeExpression;return o+='<form class="edit-metadata-form">\n\n<div class="row">\n  <div class="col-md-6">\n    ',r={"hash":{"label":"Title","name":"title","value":(a=t&&t.item,null==a||a===!1?a:a.title),"locked":(a=t&&t.locked,null==a||a===!1?a:a.title)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTextInput",r):l.call(t,"partial","lockableTextInput",r)))+'\n  </div>\n\n  <div class="col-md-6">\n    ',r={"hash":{"label":"Sort Title","name":"titleSort","value":(a=t&&t.item,null==a||a===!1?a:a.titleSort),"locked":(a=t&&t.locked,null==a||a===!1?a:a.titleSort)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTextInput",r):l.call(t,"partial","lockableTextInput",r)))+'\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-md-4">\n    ',r={"hash":{"label":"Year","name":"year","value":(a=t&&t.item,null==a||a===!1?a:a.year),"locked":(a=t&&t.locked,null==a||a===!1?a:a.year)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTextInput",r):l.call(t,"partial","lockableTextInput",r)))+'\n  </div>\n\n  <div class="col-md-4">\n    ',r={"hash":{"label":"Rating","name":"rating","value":(a=t&&t.item,null==a||a===!1?a:a.rating),"locked":(a=t&&t.locked,null==a||a===!1?a:a.rating)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTextInput",r):l.call(t,"partial","lockableTextInput",r)))+'\n  </div>\n\n  <div class="col-md-4">\n    ',r={"hash":{"label":"Content Rating","name":"contentRating","value":(a=t&&t.item,null==a||a===!1?a:a.contentRating),"locked":(a=t&&t.locked,null==a||a===!1?a:a.contentRating)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTextInput",r):l.call(t,"partial","lockableTextInput",r)))+'\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-md-6">\n    ',r={"hash":{"label":"Original Title","name":"originalTitle","value":(a=t&&t.item,null==a||a===!1?a:a.originalTitle),"locked":(a=t&&t.locked,null==a||a===!1?a:a.originalTitle)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTextInput",r):l.call(t,"partial","lockableTextInput",r)))+'\n  </div>\n\n  <div class="col-md-6">\n    ',r={"hash":{"label":"Studio","name":"studio","value":(a=t&&t.item,null==a||a===!1?a:a.studio),"locked":(a=t&&t.locked,null==a||a===!1?a:a.studio)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTextInput",r):l.call(t,"partial","lockableTextInput",r)))+'\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-md-6">\n    ',r={"hash":{"label":"Originally Available","name":"originallyAvailableAt","value":(a=t&&t.item,null==a||a===!1?a:a.originallyAvailableAt),"locked":(a=t&&t.locked,null==a||a===!1?a:a.originallyAvailableAt)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTextInput",r):l.call(t,"partial","lockableTextInput",r)))+'\n  </div>\n\n  <div class="col-md-6">\n    ',r={"hash":{"label":"Tagline","name":"tagline","value":(a=t&&t.item,null==a||a===!1?a:a.tagline),"locked":(a=t&&t.locked,null==a||a===!1?a:a.tagline)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTextInput",r):l.call(t,"partial","lockableTextInput",r)))+'\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-md-12">\n    ',r={"hash":{"label":"Summary","name":"summary","value":(a=t&&t.item,null==a||a===!1?a:a.summary),"type":"textarea","rows":"5","locked":(a=t&&t.locked,null==a||a===!1?a:a.summary)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTextInput",r):l.call(t,"partial","lockableTextInput",r)))+"\n  </div>\n</div>\n\n</form>\n"
})}),define("hb!templates/desktop/editmetadata/EditMetadataTrackGeneralView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,r,o="",l=n.helperMissing,c=this.escapeExpression;return o+='<form class="edit-metadata-form">\n\n<div class="row">\n  <div class="col-md-12">\n    ',r={"hash":{"label":"Title","name":"title","value":(a=t&&t.item,null==a||a===!1?a:a.title),"locked":(a=t&&t.locked,null==a||a===!1?a:a.title)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTextInput",r):l.call(t,"partial","lockableTextInput",r)))+'\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-md-8">\n    ',r={"hash":{"label":"Artist","name":"originalTitle","value":(a=t&&t.item,null==a||a===!1?a:a.originalTitle),"locked":(a=t&&t.locked,null==a||a===!1?a:a.originalTitle)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTextInput",r):l.call(t,"partial","lockableTextInput",r)))+'\n  </div>\n\n  <div class="col-md-4">\n    ',r={"hash":{"label":"Rating","name":"rating","value":(a=t&&t.item,null==a||a===!1?a:a.rating),"locked":(a=t&&t.locked,null==a||a===!1?a:a.rating)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTextInput",r):l.call(t,"partial","lockableTextInput",r)))+'\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-md-12">\n    ',r={"hash":{"label":"Lyrics","name":"summary","value":(a=t&&t.item,null==a||a===!1?a:a.summary),"type":"textarea","rows":"5","locked":(a=t&&t.locked,null==a||a===!1?a:a.summary)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTextInput",r):l.call(t,"partial","lockableTextInput",r)))+"\n  </div>\n</div>\n\n</form>\n"
})}),define("plex/desktop/views/editmetadata/EditMetadataBaseView",["underscore","jquery","marionette"],function(e,t,n){var i=n.ItemView.extend({"events":{"click .edit-lock-addon":"onLockClick","change .lockable-field":"onLockableFieldChange","keypress .lockable-field":"onLockableFieldChange"},"ui":{"form":".edit-metadata-form"},"serializeData":function(){var t=this.model.get("Field"),n=e.reduce(t,function(e,t){return e[t.name]=t.locked,e},{});return{"item":this.model.toJSON(),"locked":n}},"flushChanges":function(){},"getLockedFieldsArray":function(){var n=this.ui.form,i=e.reduce(this.model.get("Field"),function(e,t){return e[t.name]=t.locked,e
},{});return n.find(".edit-lock-addon").each(function(e,n){var s=t(n),a=s.data("field");s.hasClass("locked")?i[a]="1":a in i&&(i[a]="0")}),e.map(i,function(e,t){return{"name":t,"locked":e}})},"onLockClick":function(e){e.preventDefault(),t(e.currentTarget).toggleClass("locked")},"onLockableFieldChange":function(e){t(e.currentTarget).siblings(".edit-lock-addon").addClass("locked")}});return i}),define("plex/desktop/views/editmetadata/EditMetadataGeneralView",["hb!templates/desktop/editmetadata/EditMetadataAlbumGeneralView.tpl","hb!templates/desktop/editmetadata/EditMetadataArtistGeneralView.tpl","hb!templates/desktop/editmetadata/EditMetadataEpisodeGeneralView.tpl","hb!templates/desktop/editmetadata/EditMetadataMovieGeneralView.tpl","hb!templates/desktop/editmetadata/EditMetadataPhotoAlbumGeneralView.tpl","hb!templates/desktop/editmetadata/EditMetadataPhotoGeneralView.tpl","hb!templates/desktop/editmetadata/EditMetadataSeasonGeneralView.tpl","hb!templates/desktop/editmetadata/EditMetadataShowGeneralView.tpl","hb!templates/desktop/editmetadata/EditMetadataTrackGeneralView.tpl","underscore","jquery","plex/desktop/views/editmetadata/EditMetadataBaseView"],function(e,t,n,i,s,a,r,o,l,c,d,u){var h={"movie":i,"show":o,"season":r,"episode":n,"artist":t,"album":e,"track":l,"photoAlbum":s,"photo":a},p=u.extend({"initialize":function(){this.template=h[this.model.get("type")]||h.movie
},"flushChanges":function(){var e=this.ui.form,t=c.reduce(e.serializeArray(),function(e,t){return e[t.name]=t.value,e},{});t.Field=this.getLockedFieldsArray(),this.model.set(t)}});return p}),define("hb!templates/desktop/editmetadata/EditMetadataAlbumTagsView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,r,o="",l=n.helperMissing,c=this.escapeExpression;return o+='<form class="edit-metadata-form">\n\n<div class="row">\n  <div class="col-md-12">\n    ',r={"hash":{"label":"Genres","name":"genre","value":(a=t&&t.item,null==a||a===!1?a:a.Genre),"locked":(a=t&&t.locked,null==a||a===!1?a:a.genre)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTagInput",r):l.call(t,"partial","lockableTagInput",r)))+"\n  </div>\n</div>\n\n</form>\n"
})}),define("hb!templates/desktop/editmetadata/EditMetadataArtistTagsView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,r,o="",l=n.helperMissing,c=this.escapeExpression;return o+='<form class="edit-metadata-form">\n\n<div class="row">\n  <div class="col-md-12">\n    ',r={"hash":{"label":"Genres","name":"genre","value":(a=t&&t.item,null==a||a===!1?a:a.Genre),"locked":(a=t&&t.locked,null==a||a===!1?a:a.genre)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTagInput",r):l.call(t,"partial","lockableTagInput",r)))+'\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-md-12">\n    ',r={"hash":{"label":"Collections","name":"collection","value":(a=t&&t.item,null==a||a===!1?a:a.Collection),"locked":(a=t&&t.locked,null==a||a===!1?a:a.collection)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTagInput",r):l.call(t,"partial","lockableTagInput",r)))+"\n  </div>\n</div>\n\n</form>\n"
})}),define("hb!templates/desktop/editmetadata/EditMetadataEpisodeTagsView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,r,o="",l=n.helperMissing,c=this.escapeExpression;return o+='<form class="edit-metadata-form">\n\n<div class="row">\n  <div class="col-md-12">\n    ',r={"hash":{"label":"Writers","name":"writer","value":(a=t&&t.item,null==a||a===!1?a:a.Writer),"locked":(a=t&&t.locked,null==a||a===!1?a:a.writer)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTagInput",r):l.call(t,"partial","lockableTagInput",r)))+'\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-md-12">\n    ',r={"hash":{"label":"Directors","name":"director","value":(a=t&&t.item,null==a||a===!1?a:a.Director),"locked":(a=t&&t.locked,null==a||a===!1?a:a.director)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTagInput",r):l.call(t,"partial","lockableTagInput",r)))+"\n  </div>\n</div>\n\n</form>\n"
})}),define("hb!templates/desktop/editmetadata/EditMetadataMovieTagsView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,r,o="",l=n.helperMissing,c=this.escapeExpression;return o+='<form class="edit-metadata-form">\n\n<div class="row">\n  <div class="col-md-6">\n    ',r={"hash":{"label":"Directors","name":"director","value":(a=t&&t.item,null==a||a===!1?a:a.Director),"locked":(a=t&&t.locked,null==a||a===!1?a:a.director)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTagInput",r):l.call(t,"partial","lockableTagInput",r)))+'\n  </div>\n\n  <div class="col-md-6">\n    ',r={"hash":{"label":"Country","name":"country","value":(a=t&&t.item,null==a||a===!1?a:a.Country),"locked":(a=t&&t.locked,null==a||a===!1?a:a.country)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTagInput",r):l.call(t,"partial","lockableTagInput",r)))+'\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-md-12">\n    ',r={"hash":{"label":"Genres","name":"genre","value":(a=t&&t.item,null==a||a===!1?a:a.Genre),"locked":(a=t&&t.locked,null==a||a===!1?a:a.genre)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTagInput",r):l.call(t,"partial","lockableTagInput",r)))+'\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-md-12">\n    ',r={"hash":{"label":"Collections","name":"collection","value":(a=t&&t.item,null==a||a===!1?a:a.Collection),"locked":(a=t&&t.locked,null==a||a===!1?a:a.collection)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTagInput",r):l.call(t,"partial","lockableTagInput",r)))+'\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-md-12">\n    ',r={"hash":{"label":"Writers","name":"writer","value":(a=t&&t.item,null==a||a===!1?a:a.Writer),"locked":(a=t&&t.locked,null==a||a===!1?a:a.writer)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTagInput",r):l.call(t,"partial","lockableTagInput",r)))+"\n  </div>\n</div>\n\n</form>\n"
})}),define("hb!templates/desktop/editmetadata/EditMetadataShowTagsView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,r,o="",l=n.helperMissing,c=this.escapeExpression;return o+='<form class="edit-metadata-form">\n\n<div class="row">\n  <div class="col-md-12">\n    ',r={"hash":{"label":"Genres","name":"genre","value":(a=t&&t.item,null==a||a===!1?a:a.Genre),"locked":(a=t&&t.locked,null==a||a===!1?a:a.genre)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTagInput",r):l.call(t,"partial","lockableTagInput",r)))+'\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-md-12">\n    ',r={"hash":{"label":"Collections","name":"collection","value":(a=t&&t.item,null==a||a===!1?a:a.Collection),"locked":(a=t&&t.locked,null==a||a===!1?a:a.collection)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTagInput",r):l.call(t,"partial","lockableTagInput",r)))+"\n  </div>\n</div>\n\n</form>\n"
})}),define("hb!templates/desktop/editmetadata/EditMetadataTrackTagsView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,r,o="",l=n.helperMissing,c=this.escapeExpression;return o+='<form class="edit-metadata-form">\n\n<div class="row">\n  <div class="col-md-12">\n    ',r={"hash":{"label":"Writers","name":"writer","value":(a=t&&t.item,null==a||a===!1?a:a.Writer),"locked":(a=t&&t.locked,null==a||a===!1?a:a.writer)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTagInput",r):l.call(t,"partial","lockableTagInput",r)))+'\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-md-12">\n    ',r={"hash":{"label":"Producers","name":"director","value":(a=t&&t.item,null==a||a===!1?a:a.Director),"locked":(a=t&&t.locked,null==a||a===!1?a:a.director)},"data":s},o+=c((a=n.partial||t&&t.partial,a?a.call(t,"lockableTagInput",r):l.call(t,"partial","lockableTagInput",r)))+"\n  </div>\n</div>\n\n</form>\n"
})}),function(e){"undefined"==typeof e.fn.each2&&e.extend(e.fn,{"each2":function(t){for(var n=e([0]),i=-1,s=this.length;++i<s&&(n.context=n[0]=this[i])&&t.call(n[0],i,n)!==!1;);return this}})}(jQuery),function(e,t){function n(e){var t,n,i,s;if(!e||e.length<1)return e;for(t="",n=0,i=e.length;i>n;n++)s=e.charAt(n),t+=F[s]||s;return t}function i(e,t){for(var n=0,i=t.length;i>n;n+=1)if(a(e,t[n]))return n;return-1}function s(){var t=e(V);t.appendTo("body");var n={"width":t.width()-t[0].clientWidth,"height":t.height()-t[0].clientHeight};
return t.remove(),n}function a(e,n){return e===n?!0:e===t||n===t?!1:null===e||null===n?!1:e.constructor===String?e+""==n+"":n.constructor===String?n+""==e+"":!1}function r(t,n){var i,s,a;if(null===t||t.length<1)return[];for(i=t.split(n),s=0,a=i.length;a>s;s+=1)i[s]=e.trim(i[s]);return i}function o(e){return e.outerWidth(!1)-e.width()}function l(n){var i="keyup-change-value";n.on("keydown",function(){e.data(n,i)===t&&e.data(n,i,n.val())}),n.on("keyup",function(){var s=e.data(n,i);s!==t&&n.val()!==s&&(e.removeData(n,i),n.trigger("keyup-change"))
})}function c(n){n.on("mousemove",function(n){var i=B;(i===t||i.x!==n.pageX||i.y!==n.pageY)&&e(n.target).trigger("mousemove-filtered",n)})}function d(e,n,i){i=i||t;var s;return function(){var t=arguments;window.clearTimeout(s),s=window.setTimeout(function(){n.apply(i,t)},e)}}function u(e){var t,n=!1;return function(){return n===!1&&(t=e(),n=!0),t}}function h(e,t){var n=d(e,function(e){t.trigger("scroll-debounced",e)});t.on("scroll",function(e){i(e.target,t.get())>=0&&n(e)})}function p(e){e[0]!==document.activeElement&&window.setTimeout(function(){var t,n=e[0],i=e.val().length;
e.focus(),e.is(":visible")&&n===document.activeElement&&(n.setSelectionRange?n.setSelectionRange(i,i):n.createTextRange&&(t=n.createTextRange(),t.collapse(!1),t.select()))},0)}function f(t){t=e(t)[0];var n=0,i=0;if("selectionStart"in t)n=t.selectionStart,i=t.selectionEnd-n;else if("selection"in document){t.focus();var s=document.selection.createRange();i=document.selection.createRange().text.length,s.moveStart("character",-t.value.length),n=s.text.length-i}return{"offset":n,"length":i}}function m(e){e.preventDefault(),e.stopPropagation()
}function g(e){e.preventDefault(),e.stopImmediatePropagation()}function v(t){if(!R){var n=t[0].currentStyle||window.getComputedStyle(t[0],null);R=e(document.createElement("div")).css({"position":"absolute","left":"-10000px","top":"-10000px","display":"none","fontSize":n.fontSize,"fontFamily":n.fontFamily,"fontStyle":n.fontStyle,"fontWeight":n.fontWeight,"letterSpacing":n.letterSpacing,"textTransform":n.textTransform,"whiteSpace":"nowrap"}),R.attr("class","select2-sizer"),e("body").append(R)}return R.text(t.val()),R.width()
}function y(t,n,i){var s,a,r=[];s=t.attr("class"),s&&(s=""+s,e(s.split(" ")).each2(function(){0===this.indexOf("select2-")&&r.push(this)})),s=n.attr("class"),s&&(s=""+s,e(s.split(" ")).each2(function(){0!==this.indexOf("select2-")&&(a=i(this),a&&r.push(a))})),t.attr("class",r.join(" "))}function b(e,t,i,s){var a=n(e.toUpperCase()).indexOf(n(t.toUpperCase())),r=t.length;return 0>a?void i.push(s(e)):(i.push(s(e.substring(0,a))),i.push("<span class='select2-match'>"),i.push(s(e.substring(a,a+r))),i.push("</span>"),void i.push(s(e.substring(a+r,e.length))))
}function w(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})}function x(n){var i,s=null,a=n.quietMillis||100,r=n.url,o=this;return function(l){window.clearTimeout(i),i=window.setTimeout(function(){var i=n.data,a=r,c=n.transport||e.fn.select2.ajaxDefaults.transport,d={"type":n.type||"GET","cache":n.cache||!1,"jsonpCallback":n.jsonpCallback||t,"dataType":n.dataType||"json"},u=e.extend({},e.fn.select2.ajaxDefaults.params,d);
i=i?i.call(o,l.term,l.page,l.context):null,a="function"==typeof a?a.call(o,l.term,l.page,l.context):a,s&&s.abort(),n.params&&(e.isFunction(n.params)?e.extend(u,n.params.call(o)):e.extend(u,n.params)),e.extend(u,{"url":a,"dataType":n.dataType,"data":i,"success":function(e){var t=n.results(e,l.page);l.callback(t)}}),s=c.call(o,u)},a)}}function k(t){var n,i,s=t,a=function(e){return""+e.text};e.isArray(s)&&(i=s,s={"results":i}),e.isFunction(s)===!1&&(i=s,s=function(){return i});var r=s();return r.text&&(a=r.text,e.isFunction(a)||(n=r.text,a=function(e){return e[n]
})),function(t){var n,i=t.term,r={"results":[]};return""===i?void t.callback(s()):(n=function(s,r){var o,l;if(s=s[0],s.children){o={};for(l in s)s.hasOwnProperty(l)&&(o[l]=s[l]);o.children=[],e(s.children).each2(function(e,t){n(t,o.children)}),(o.children.length||t.matcher(i,a(o),s))&&r.push(o)}else t.matcher(i,a(s),s)&&r.push(s)},e(s().results).each2(function(e,t){n(t,r.results)}),void t.callback(r))}}function S(n){var i=e.isFunction(n);return function(s){var a=s.term,r={"results":[]};e(i?n():n).each(function(){var e=this.text!==t,n=e?this.text:this;
(""===a||s.matcher(a,n))&&r.results.push(e?this:{"id":this,"text":this})}),s.callback(r)}}function C(t,n){if(e.isFunction(t))return!0;if(!t)return!1;throw new Error(n+" must be a function or a falsy value")}function T(t){return e.isFunction(t)?t():t}function A(t){var n=0;return e.each(t,function(e,t){t.children?n+=A(t.children):n++}),n}function I(e,n,i,s){var r,o,l,c,d,u=e,h=!1;if(!s.createSearchChoice||!s.tokenSeparators||s.tokenSeparators.length<1)return t;for(;;){for(o=-1,l=0,c=s.tokenSeparators.length;c>l&&(d=s.tokenSeparators[l],o=e.indexOf(d),!(o>=0));l++);if(0>o)break;
if(r=e.substring(0,o),e=e.substring(o+d.length),r.length>0&&(r=s.createSearchChoice.call(this,r,n),r!==t&&null!==r&&s.id(r)!==t&&null!==s.id(r))){for(h=!1,l=0,c=n.length;c>l;l++)if(a(s.id(r),s.id(n[l]))){h=!0;break}h||i(r)}}return u!==e?e:void 0}function P(t,n){var i=function(){};return i.prototype=new t,i.prototype.constructor=i,i.prototype.parent=t.prototype,i.prototype=e.extend(i.prototype,n),i}if(window.Select2===t){var M,D,_,E,L,R,N,O,B={"x":0,"y":0},M={"TAB":9,"ENTER":13,"ESC":27,"SPACE":32,"LEFT":37,"UP":38,"RIGHT":39,"DOWN":40,"SHIFT":16,"CTRL":17,"ALT":18,"PAGE_UP":33,"PAGE_DOWN":34,"HOME":36,"END":35,"BACKSPACE":8,"DELETE":46,"isArrow":function(e){switch(e=e.which?e.which:e){case M.LEFT:case M.RIGHT:case M.UP:case M.DOWN:return!0
}return!1},"isControl":function(e){var t=e.which;switch(t){case M.SHIFT:case M.CTRL:case M.ALT:return!0}return e.metaKey?!0:!1},"isFunctionKey":function(e){return e=e.which?e.which:e,e>=112&&123>=e}},V="<div class='select2-measure-scrollbar'></div>",F={"\u24b6":"A","\uff21":"A","\xc0":"A","\xc1":"A","\xc2":"A","\u1ea6":"A","\u1ea4":"A","\u1eaa":"A","\u1ea8":"A","\xc3":"A","\u0100":"A","\u0102":"A","\u1eb0":"A","\u1eae":"A","\u1eb4":"A","\u1eb2":"A","\u0226":"A","\u01e0":"A","\xc4":"A","\u01de":"A","\u1ea2":"A","\xc5":"A","\u01fa":"A","\u01cd":"A","\u0200":"A","\u0202":"A","\u1ea0":"A","\u1eac":"A","\u1eb6":"A","\u1e00":"A","\u0104":"A","\u023a":"A","\u2c6f":"A","\ua732":"AA","\xc6":"AE","\u01fc":"AE","\u01e2":"AE","\ua734":"AO","\ua736":"AU","\ua738":"AV","\ua73a":"AV","\ua73c":"AY","\u24b7":"B","\uff22":"B","\u1e02":"B","\u1e04":"B","\u1e06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24b8":"C","\uff23":"C","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\xc7":"C","\u1e08":"C","\u0187":"C","\u023b":"C","\ua73e":"C","\u24b9":"D","\uff24":"D","\u1e0a":"D","\u010e":"D","\u1e0c":"D","\u1e10":"D","\u1e12":"D","\u1e0e":"D","\u0110":"D","\u018b":"D","\u018a":"D","\u0189":"D","\ua779":"D","\u01f1":"DZ","\u01c4":"DZ","\u01f2":"Dz","\u01c5":"Dz","\u24ba":"E","\uff25":"E","\xc8":"E","\xc9":"E","\xca":"E","\u1ec0":"E","\u1ebe":"E","\u1ec4":"E","\u1ec2":"E","\u1ebc":"E","\u0112":"E","\u1e14":"E","\u1e16":"E","\u0114":"E","\u0116":"E","\xcb":"E","\u1eba":"E","\u011a":"E","\u0204":"E","\u0206":"E","\u1eb8":"E","\u1ec6":"E","\u0228":"E","\u1e1c":"E","\u0118":"E","\u1e18":"E","\u1e1a":"E","\u0190":"E","\u018e":"E","\u24bb":"F","\uff26":"F","\u1e1e":"F","\u0191":"F","\ua77b":"F","\u24bc":"G","\uff27":"G","\u01f4":"G","\u011c":"G","\u1e20":"G","\u011e":"G","\u0120":"G","\u01e6":"G","\u0122":"G","\u01e4":"G","\u0193":"G","\ua7a0":"G","\ua77d":"G","\ua77e":"G","\u24bd":"H","\uff28":"H","\u0124":"H","\u1e22":"H","\u1e26":"H","\u021e":"H","\u1e24":"H","\u1e28":"H","\u1e2a":"H","\u0126":"H","\u2c67":"H","\u2c75":"H","\ua78d":"H","\u24be":"I","\uff29":"I","\xcc":"I","\xcd":"I","\xce":"I","\u0128":"I","\u012a":"I","\u012c":"I","\u0130":"I","\xcf":"I","\u1e2e":"I","\u1ec8":"I","\u01cf":"I","\u0208":"I","\u020a":"I","\u1eca":"I","\u012e":"I","\u1e2c":"I","\u0197":"I","\u24bf":"J","\uff2a":"J","\u0134":"J","\u0248":"J","\u24c0":"K","\uff2b":"K","\u1e30":"K","\u01e8":"K","\u1e32":"K","\u0136":"K","\u1e34":"K","\u0198":"K","\u2c69":"K","\ua740":"K","\ua742":"K","\ua744":"K","\ua7a2":"K","\u24c1":"L","\uff2c":"L","\u013f":"L","\u0139":"L","\u013d":"L","\u1e36":"L","\u1e38":"L","\u013b":"L","\u1e3c":"L","\u1e3a":"L","\u0141":"L","\u023d":"L","\u2c62":"L","\u2c60":"L","\ua748":"L","\ua746":"L","\ua780":"L","\u01c7":"LJ","\u01c8":"Lj","\u24c2":"M","\uff2d":"M","\u1e3e":"M","\u1e40":"M","\u1e42":"M","\u2c6e":"M","\u019c":"M","\u24c3":"N","\uff2e":"N","\u01f8":"N","\u0143":"N","\xd1":"N","\u1e44":"N","\u0147":"N","\u1e46":"N","\u0145":"N","\u1e4a":"N","\u1e48":"N","\u0220":"N","\u019d":"N","\ua790":"N","\ua7a4":"N","\u01ca":"NJ","\u01cb":"Nj","\u24c4":"O","\uff2f":"O","\xd2":"O","\xd3":"O","\xd4":"O","\u1ed2":"O","\u1ed0":"O","\u1ed6":"O","\u1ed4":"O","\xd5":"O","\u1e4c":"O","\u022c":"O","\u1e4e":"O","\u014c":"O","\u1e50":"O","\u1e52":"O","\u014e":"O","\u022e":"O","\u0230":"O","\xd6":"O","\u022a":"O","\u1ece":"O","\u0150":"O","\u01d1":"O","\u020c":"O","\u020e":"O","\u01a0":"O","\u1edc":"O","\u1eda":"O","\u1ee0":"O","\u1ede":"O","\u1ee2":"O","\u1ecc":"O","\u1ed8":"O","\u01ea":"O","\u01ec":"O","\xd8":"O","\u01fe":"O","\u0186":"O","\u019f":"O","\ua74a":"O","\ua74c":"O","\u01a2":"OI","\ua74e":"OO","\u0222":"OU","\u24c5":"P","\uff30":"P","\u1e54":"P","\u1e56":"P","\u01a4":"P","\u2c63":"P","\ua750":"P","\ua752":"P","\ua754":"P","\u24c6":"Q","\uff31":"Q","\ua756":"Q","\ua758":"Q","\u024a":"Q","\u24c7":"R","\uff32":"R","\u0154":"R","\u1e58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1e5a":"R","\u1e5c":"R","\u0156":"R","\u1e5e":"R","\u024c":"R","\u2c64":"R","\ua75a":"R","\ua7a6":"R","\ua782":"R","\u24c8":"S","\uff33":"S","\u1e9e":"S","\u015a":"S","\u1e64":"S","\u015c":"S","\u1e60":"S","\u0160":"S","\u1e66":"S","\u1e62":"S","\u1e68":"S","\u0218":"S","\u015e":"S","\u2c7e":"S","\ua7a8":"S","\ua784":"S","\u24c9":"T","\uff34":"T","\u1e6a":"T","\u0164":"T","\u1e6c":"T","\u021a":"T","\u0162":"T","\u1e70":"T","\u1e6e":"T","\u0166":"T","\u01ac":"T","\u01ae":"T","\u023e":"T","\ua786":"T","\ua728":"TZ","\u24ca":"U","\uff35":"U","\xd9":"U","\xda":"U","\xdb":"U","\u0168":"U","\u1e78":"U","\u016a":"U","\u1e7a":"U","\u016c":"U","\xdc":"U","\u01db":"U","\u01d7":"U","\u01d5":"U","\u01d9":"U","\u1ee6":"U","\u016e":"U","\u0170":"U","\u01d3":"U","\u0214":"U","\u0216":"U","\u01af":"U","\u1eea":"U","\u1ee8":"U","\u1eee":"U","\u1eec":"U","\u1ef0":"U","\u1ee4":"U","\u1e72":"U","\u0172":"U","\u1e76":"U","\u1e74":"U","\u0244":"U","\u24cb":"V","\uff36":"V","\u1e7c":"V","\u1e7e":"V","\u01b2":"V","\ua75e":"V","\u0245":"V","\ua760":"VY","\u24cc":"W","\uff37":"W","\u1e80":"W","\u1e82":"W","\u0174":"W","\u1e86":"W","\u1e84":"W","\u1e88":"W","\u2c72":"W","\u24cd":"X","\uff38":"X","\u1e8a":"X","\u1e8c":"X","\u24ce":"Y","\uff39":"Y","\u1ef2":"Y","\xdd":"Y","\u0176":"Y","\u1ef8":"Y","\u0232":"Y","\u1e8e":"Y","\u0178":"Y","\u1ef6":"Y","\u1ef4":"Y","\u01b3":"Y","\u024e":"Y","\u1efe":"Y","\u24cf":"Z","\uff3a":"Z","\u0179":"Z","\u1e90":"Z","\u017b":"Z","\u017d":"Z","\u1e92":"Z","\u1e94":"Z","\u01b5":"Z","\u0224":"Z","\u2c7f":"Z","\u2c6b":"Z","\ua762":"Z","\u24d0":"a","\uff41":"a","\u1e9a":"a","\xe0":"a","\xe1":"a","\xe2":"a","\u1ea7":"a","\u1ea5":"a","\u1eab":"a","\u1ea9":"a","\xe3":"a","\u0101":"a","\u0103":"a","\u1eb1":"a","\u1eaf":"a","\u1eb5":"a","\u1eb3":"a","\u0227":"a","\u01e1":"a","\xe4":"a","\u01df":"a","\u1ea3":"a","\xe5":"a","\u01fb":"a","\u01ce":"a","\u0201":"a","\u0203":"a","\u1ea1":"a","\u1ead":"a","\u1eb7":"a","\u1e01":"a","\u0105":"a","\u2c65":"a","\u0250":"a","\ua733":"aa","\xe6":"ae","\u01fd":"ae","\u01e3":"ae","\ua735":"ao","\ua737":"au","\ua739":"av","\ua73b":"av","\ua73d":"ay","\u24d1":"b","\uff42":"b","\u1e03":"b","\u1e05":"b","\u1e07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24d2":"c","\uff43":"c","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\xe7":"c","\u1e09":"c","\u0188":"c","\u023c":"c","\ua73f":"c","\u2184":"c","\u24d3":"d","\uff44":"d","\u1e0b":"d","\u010f":"d","\u1e0d":"d","\u1e11":"d","\u1e13":"d","\u1e0f":"d","\u0111":"d","\u018c":"d","\u0256":"d","\u0257":"d","\ua77a":"d","\u01f3":"dz","\u01c6":"dz","\u24d4":"e","\uff45":"e","\xe8":"e","\xe9":"e","\xea":"e","\u1ec1":"e","\u1ebf":"e","\u1ec5":"e","\u1ec3":"e","\u1ebd":"e","\u0113":"e","\u1e15":"e","\u1e17":"e","\u0115":"e","\u0117":"e","\xeb":"e","\u1ebb":"e","\u011b":"e","\u0205":"e","\u0207":"e","\u1eb9":"e","\u1ec7":"e","\u0229":"e","\u1e1d":"e","\u0119":"e","\u1e19":"e","\u1e1b":"e","\u0247":"e","\u025b":"e","\u01dd":"e","\u24d5":"f","\uff46":"f","\u1e1f":"f","\u0192":"f","\ua77c":"f","\u24d6":"g","\uff47":"g","\u01f5":"g","\u011d":"g","\u1e21":"g","\u011f":"g","\u0121":"g","\u01e7":"g","\u0123":"g","\u01e5":"g","\u0260":"g","\ua7a1":"g","\u1d79":"g","\ua77f":"g","\u24d7":"h","\uff48":"h","\u0125":"h","\u1e23":"h","\u1e27":"h","\u021f":"h","\u1e25":"h","\u1e29":"h","\u1e2b":"h","\u1e96":"h","\u0127":"h","\u2c68":"h","\u2c76":"h","\u0265":"h","\u0195":"hv","\u24d8":"i","\uff49":"i","\xec":"i","\xed":"i","\xee":"i","\u0129":"i","\u012b":"i","\u012d":"i","\xef":"i","\u1e2f":"i","\u1ec9":"i","\u01d0":"i","\u0209":"i","\u020b":"i","\u1ecb":"i","\u012f":"i","\u1e2d":"i","\u0268":"i","\u0131":"i","\u24d9":"j","\uff4a":"j","\u0135":"j","\u01f0":"j","\u0249":"j","\u24da":"k","\uff4b":"k","\u1e31":"k","\u01e9":"k","\u1e33":"k","\u0137":"k","\u1e35":"k","\u0199":"k","\u2c6a":"k","\ua741":"k","\ua743":"k","\ua745":"k","\ua7a3":"k","\u24db":"l","\uff4c":"l","\u0140":"l","\u013a":"l","\u013e":"l","\u1e37":"l","\u1e39":"l","\u013c":"l","\u1e3d":"l","\u1e3b":"l","\u017f":"l","\u0142":"l","\u019a":"l","\u026b":"l","\u2c61":"l","\ua749":"l","\ua781":"l","\ua747":"l","\u01c9":"lj","\u24dc":"m","\uff4d":"m","\u1e3f":"m","\u1e41":"m","\u1e43":"m","\u0271":"m","\u026f":"m","\u24dd":"n","\uff4e":"n","\u01f9":"n","\u0144":"n","\xf1":"n","\u1e45":"n","\u0148":"n","\u1e47":"n","\u0146":"n","\u1e4b":"n","\u1e49":"n","\u019e":"n","\u0272":"n","\u0149":"n","\ua791":"n","\ua7a5":"n","\u01cc":"nj","\u24de":"o","\uff4f":"o","\xf2":"o","\xf3":"o","\xf4":"o","\u1ed3":"o","\u1ed1":"o","\u1ed7":"o","\u1ed5":"o","\xf5":"o","\u1e4d":"o","\u022d":"o","\u1e4f":"o","\u014d":"o","\u1e51":"o","\u1e53":"o","\u014f":"o","\u022f":"o","\u0231":"o","\xf6":"o","\u022b":"o","\u1ecf":"o","\u0151":"o","\u01d2":"o","\u020d":"o","\u020f":"o","\u01a1":"o","\u1edd":"o","\u1edb":"o","\u1ee1":"o","\u1edf":"o","\u1ee3":"o","\u1ecd":"o","\u1ed9":"o","\u01eb":"o","\u01ed":"o","\xf8":"o","\u01ff":"o","\u0254":"o","\ua74b":"o","\ua74d":"o","\u0275":"o","\u01a3":"oi","\u0223":"ou","\ua74f":"oo","\u24df":"p","\uff50":"p","\u1e55":"p","\u1e57":"p","\u01a5":"p","\u1d7d":"p","\ua751":"p","\ua753":"p","\ua755":"p","\u24e0":"q","\uff51":"q","\u024b":"q","\ua757":"q","\ua759":"q","\u24e1":"r","\uff52":"r","\u0155":"r","\u1e59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1e5b":"r","\u1e5d":"r","\u0157":"r","\u1e5f":"r","\u024d":"r","\u027d":"r","\ua75b":"r","\ua7a7":"r","\ua783":"r","\u24e2":"s","\uff53":"s","\xdf":"s","\u015b":"s","\u1e65":"s","\u015d":"s","\u1e61":"s","\u0161":"s","\u1e67":"s","\u1e63":"s","\u1e69":"s","\u0219":"s","\u015f":"s","\u023f":"s","\ua7a9":"s","\ua785":"s","\u1e9b":"s","\u24e3":"t","\uff54":"t","\u1e6b":"t","\u1e97":"t","\u0165":"t","\u1e6d":"t","\u021b":"t","\u0163":"t","\u1e71":"t","\u1e6f":"t","\u0167":"t","\u01ad":"t","\u0288":"t","\u2c66":"t","\ua787":"t","\ua729":"tz","\u24e4":"u","\uff55":"u","\xf9":"u","\xfa":"u","\xfb":"u","\u0169":"u","\u1e79":"u","\u016b":"u","\u1e7b":"u","\u016d":"u","\xfc":"u","\u01dc":"u","\u01d8":"u","\u01d6":"u","\u01da":"u","\u1ee7":"u","\u016f":"u","\u0171":"u","\u01d4":"u","\u0215":"u","\u0217":"u","\u01b0":"u","\u1eeb":"u","\u1ee9":"u","\u1eef":"u","\u1eed":"u","\u1ef1":"u","\u1ee5":"u","\u1e73":"u","\u0173":"u","\u1e77":"u","\u1e75":"u","\u0289":"u","\u24e5":"v","\uff56":"v","\u1e7d":"v","\u1e7f":"v","\u028b":"v","\ua75f":"v","\u028c":"v","\ua761":"vy","\u24e6":"w","\uff57":"w","\u1e81":"w","\u1e83":"w","\u0175":"w","\u1e87":"w","\u1e85":"w","\u1e98":"w","\u1e89":"w","\u2c73":"w","\u24e7":"x","\uff58":"x","\u1e8b":"x","\u1e8d":"x","\u24e8":"y","\uff59":"y","\u1ef3":"y","\xfd":"y","\u0177":"y","\u1ef9":"y","\u0233":"y","\u1e8f":"y","\xff":"y","\u1ef7":"y","\u1e99":"y","\u1ef5":"y","\u01b4":"y","\u024f":"y","\u1eff":"y","\u24e9":"z","\uff5a":"z","\u017a":"z","\u1e91":"z","\u017c":"z","\u017e":"z","\u1e93":"z","\u1e95":"z","\u01b6":"z","\u0225":"z","\u0240":"z","\u2c6c":"z","\ua763":"z"};
N=e(document),L=function(){var e=1;return function(){return e++}}(),N.on("mousemove",function(e){B.x=e.pageX,B.y=e.pageY}),D=P(Object,{"bind":function(e){var t=this;return function(){e.apply(t,arguments)}},"init":function(n){var i,a,r=".select2-results";this.opts=n=this.prepareOpts(n),this.id=n.id,n.element.data("select2")!==t&&null!==n.element.data("select2")&&n.element.data("select2").destroy(),this.container=this.createContainer(),this.containerId="s2id_"+(n.element.attr("id")||"autogen"+L()),this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.body=u(function(){return n.element.closest("body")
}),y(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",n.element.attr("style")),this.container.css(T(n.containerCss)),this.container.addClass(T(n.containerCssClass)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",m),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),y(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(T(n.dropdownCssClass)),this.dropdown.data("select2",this),this.dropdown.on("click",m),this.results=i=this.container.find(r),this.search=a=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",m),c(this.results),this.dropdown.on("mousemove-filtered touchstart touchmove touchend",r,this.bind(this.highlightUnderEvent)),h(80,this.results),this.dropdown.on("scroll-debounced",r,this.bind(this.loadMoreIfNeeded)),e(this.container).on("change",".select2-input",function(e){e.stopPropagation()
}),e(this.dropdown).on("change",".select2-input",function(e){e.stopPropagation()}),e.fn.mousewheel&&i.mousewheel(function(e,t,n,s){var a=i.scrollTop();s>0&&0>=a-s?(i.scrollTop(0),m(e)):0>s&&i.get(0).scrollHeight-i.scrollTop()+s<=i.height()&&(i.scrollTop(i.get(0).scrollHeight-i.height()),m(e))}),l(a),a.on("keyup-change input paste",this.bind(this.updateResults)),a.on("focus",function(){a.addClass("select2-focused")}),a.on("blur",function(){a.removeClass("select2-focused")}),this.dropdown.on("mouseup",r,this.bind(function(t){e(t.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(t),this.selectHighlighted(t))
})),this.dropdown.on("click mouseup mousedown",function(e){e.stopPropagation()}),e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==n.maximumInputLength&&this.search.attr("maxlength",n.maximumInputLength);var o=n.element.prop("disabled");o===t&&(o=!1),this.enable(!o);var d=n.element.prop("readonly");d===t&&(d=!1),this.readonly(d),O=O||s(),this.autofocus=n.element.prop("autofocus"),n.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.nextSearchTerm=t
},"destroy":function(){var e=this.opts.element,n=e.data("select2");this.close(),this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),n!==t&&(n.container.remove(),n.dropdown.remove(),e.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?e.attr({"tabindex":this.elementTabIndex}):e.removeAttr("tabindex"),e.show())},"optionToData":function(e){return e.is("option")?{"id":e.prop("value"),"text":e.text(),"element":e.get(),"css":e.attr("class"),"disabled":e.prop("disabled"),"locked":a(e.attr("locked"),"locked")||a(e.data("locked"),!0)}:e.is("optgroup")?{"text":e.attr("label"),"children":[],"element":e.get(),"css":e.attr("class")}:void 0
},"prepareOpts":function(n){var i,s,o,l,c=this;if(i=n.element,"select"===i.get(0).tagName.toLowerCase()&&(this.select=s=n.element),s&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in n)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),n=e.extend({},{"populateResults":function(i,s,a){var r,o=this.opts.id;(r=function(i,s,l){var d,u,h,p,f,m,g,v,y,b;for(i=n.sortResults(i,s,a),d=0,u=i.length;u>d;d+=1)h=i[d],f=h.disabled===!0,p=!f&&o(h)!==t,m=h.children&&h.children.length>0,g=e("<li></li>"),g.addClass("select2-results-dept-"+l),g.addClass("select2-result"),g.addClass(p?"select2-result-selectable":"select2-result-unselectable"),f&&g.addClass("select2-disabled"),m&&g.addClass("select2-result-with-children"),g.addClass(c.opts.formatResultCssClass(h)),v=e(document.createElement("div")),v.addClass("select2-result-label"),b=n.formatResult(h,v,a,c.opts.escapeMarkup),b!==t&&v.html(b),g.append(v),m&&(y=e("<ul></ul>"),y.addClass("select2-result-sub"),r(h.children,y,l+1),g.append(y)),g.data("select2-data",h),s.append(g)
})(s,i,0)}},e.fn.select2.defaults,n),"function"!=typeof n.id&&(o=n.id,n.id=function(e){return e[o]}),e.isArray(n.element.data("select2Tags"))){if("tags"in n)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+n.element.attr("id");n.tags=n.element.data("select2Tags")}if(s?(n.query=this.bind(function(e){var n,s,a,r={"results":[],"more":!1},o=e.term;a=function(t,n){var i;t.is("option")?e.matcher(o,t.text(),t)&&n.push(c.optionToData(t)):t.is("optgroup")&&(i=c.optionToData(t),t.children().each2(function(e,t){a(t,i.children)
}),i.children.length>0&&n.push(i))},n=i.children(),this.getPlaceholder()!==t&&n.length>0&&(s=this.getPlaceholderOption(),s&&(n=n.not(s))),n.each2(function(e,t){a(t,r.results)}),e.callback(r)}),n.id=function(e){return e.id},n.formatResultCssClass=function(e){return e.css}):"query"in n||("ajax"in n?(l=n.element.data("ajax-url"),l&&l.length>0&&(n.ajax.url=l),n.query=x.call(n.element,n.ajax)):"data"in n?n.query=k(n.data):"tags"in n&&(n.query=S(n.tags),n.createSearchChoice===t&&(n.createSearchChoice=function(t){return{"id":e.trim(t),"text":e.trim(t)}
}),n.initSelection===t&&(n.initSelection=function(t,i){var s=[];e(r(t.val(),n.separator)).each(function(){var t={"id":this,"text":this},i=n.tags;e.isFunction(i)&&(i=i()),e(i).each(function(){return a(this.id,t.id)?(t=this,!1):void 0}),s.push(t)}),i(s)}))),"function"!=typeof n.query)throw"query function not defined for Select2 "+n.element.attr("id");return n},"monitorSource":function(){var e,n,i=this.opts.element;i.on("change.select2",this.bind(function(){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()
})),e=this.bind(function(){var e=i.prop("disabled");e===t&&(e=!1),this.enable(!e);var n=i.prop("readonly");n===t&&(n=!1),this.readonly(n),y(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(T(this.opts.containerCssClass)),y(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(T(this.opts.dropdownCssClass))}),i.on("propertychange.select2",e),this.mutationCallback===t&&(this.mutationCallback=function(t){t.forEach(e)}),n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,n!==t&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new n(this.mutationCallback),this.propertyObserver.observe(i.get(0),{"attributes":!0,"subtree":!1}))
},"triggerSelect":function(t){var n=e.Event("select2-selecting",{"val":this.id(t),"object":t});return this.opts.element.trigger(n),!n.isDefaultPrevented()},"triggerChange":function(t){t=t||{},t=e.extend({},t,{"type":"change","val":this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},"isInterfaceEnabled":function(){return this.enabledInterface===!0
},"enableInterface":function(){var e=this._enabled&&!this._readonly,t=!e;return e===this.enabledInterface?!1:(this.container.toggleClass("select2-container-disabled",t),this.close(),this.enabledInterface=e,!0)},"enable":function(e){e===t&&(e=!0),this._enabled!==e&&(this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface())},"disable":function(){this.enable(!1)},"readonly":function(e){return e===t&&(e=!1),this._readonly===e?!1:(this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface(),!0)
},"opened":function(){return this.container.hasClass("select2-dropdown-open")},"positionDropdown":function(){var t,n,i,s,a,r=this.dropdown,o=this.container.offset(),l=this.container.outerHeight(!1),c=this.container.outerWidth(!1),d=r.outerHeight(!1),u=e(window),h=u.width(),p=u.height(),f=u.scrollLeft()+h,m=u.scrollTop()+p,g=o.top+l,v=o.left,y=m>=g+d,b=o.top-d>=this.body().scrollTop(),w=r.outerWidth(!1),x=f>=v+w,k=r.hasClass("select2-drop-above");k?(n=!0,!b&&y&&(i=!0,n=!1)):(n=!1,!y&&b&&(i=!0,n=!0)),i&&(r.hide(),o=this.container.offset(),l=this.container.outerHeight(!1),c=this.container.outerWidth(!1),d=r.outerHeight(!1),f=u.scrollLeft()+h,m=u.scrollTop()+p,g=o.top+l,v=o.left,w=r.outerWidth(!1),x=f>=v+w,r.show()),this.opts.dropdownAutoWidth?(a=e(".select2-results",r)[0],r.addClass("select2-drop-auto-width"),r.css("width",""),w=r.outerWidth(!1)+(a.scrollHeight===a.clientHeight?0:O.width),w>c?c=w:w=c,x=f>=v+w):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body().css("position")&&(t=this.body().offset(),g-=t.top,v-=t.left),x||(v=o.left+c-w),s={"left":v,"width":c},n?(s.bottom=p-o.top,s.top="auto",this.container.addClass("select2-drop-above"),r.addClass("select2-drop-above")):(s.top=g,s.bottom="auto",this.container.removeClass("select2-drop-above"),r.removeClass("select2-drop-above")),s=e.extend(s,T(this.opts.dropdownCss)),r.css(s)
},"shouldOpen":function(){var t;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(t=e.Event("select2-opening"),this.opts.element.trigger(t),!t.isDefaultPrevented())},"clearDropdownAlignmentPreference":function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},"open":function(){return this.shouldOpen()?(this.opening(),!0):!1},"opening":function(){var t,n=this.containerId,i="scroll."+n,s="resize."+n,a="orientationchange."+n;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body()),t=e("#select2-drop-mask"),0==t.length&&(t=e(document.createElement("div")),t.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),t.hide(),t.appendTo(this.body()),t.on("mousedown touchstart click",function(t){var n,i=e("#select2-drop");
i.length>0&&(n=i.data("select2"),n.opts.selectOnBlur&&n.selectHighlighted({"noFocus":!0}),n.close({"focus":!0}),t.preventDefault(),t.stopPropagation())})),this.dropdown.prev()[0]!==t[0]&&this.dropdown.before(t),e("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),t.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var r=this;this.container.parents().add(window).each(function(){e(this).on(s+" "+i+" "+a,function(){r.positionDropdown()
})})},"close":function(){if(this.opened()){var t=this.containerId,n="scroll."+t,i="resize."+t,s="orientationchange."+t;this.container.parents().add(window).each(function(){e(this).off(n).off(i).off(s)}),this.clearDropdownAlignmentPreference(),e("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(e.Event("select2-close"))
}},"externalSearch":function(e){this.open(),this.search.val(e),this.updateResults(!1)},"clearSearch":function(){},"getMaximumSelectionSize":function(){return T(this.opts.maximumSelectionSize)},"ensureHighlightVisible":function(){var t,n,i,s,a,r,o,l=this.results;if(n=this.highlight(),!(0>n)){if(0==n)return void l.scrollTop(0);t=this.findHighlightableChoices().find(".select2-result-label"),i=e(t[n]),s=i.offset().top+i.outerHeight(!0),n===t.length-1&&(o=l.find("li.select2-more-results"),o.length>0&&(s=o.offset().top+o.outerHeight(!0))),a=l.offset().top+l.outerHeight(!0),s>a&&l.scrollTop(l.scrollTop()+(s-a)),r=i.offset().top-l.offset().top,0>r&&"none"!=i.css("display")&&l.scrollTop(l.scrollTop()+r)
}},"findHighlightableChoices":function(){return this.results.find(".select2-result-selectable:not(.select2-disabled, .select2-selected)")},"moveHighlight":function(t){for(var n=this.findHighlightableChoices(),i=this.highlight();i>-1&&i<n.length;){i+=t;var s=e(n[i]);if(s.hasClass("select2-result-selectable")&&!s.hasClass("select2-disabled")&&!s.hasClass("select2-selected")){this.highlight(i);break}}},"highlight":function(t){var n,s,a=this.findHighlightableChoices();return 0===arguments.length?i(a.filter(".select2-highlighted")[0],a.get()):(t>=a.length&&(t=a.length-1),0>t&&(t=0),this.removeHighlight(),n=e(a[t]),n.addClass("select2-highlighted"),this.ensureHighlightVisible(),s=n.data("select2-data"),void(s&&this.opts.element.trigger({"type":"select2-highlight","val":this.id(s),"choice":s})))
},"removeHighlight":function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},"countSelectableResults":function(){return this.findHighlightableChoices().length},"highlightUnderEvent":function(t){var n=e(t.target).closest(".select2-result-selectable");if(n.length>0&&!n.is(".select2-highlighted")){var i=this.findHighlightableChoices();this.highlight(i.index(n))}else 0==n.length&&this.removeHighlight()},"loadMoreIfNeeded":function(){var e,t=this.results,n=t.find("li.select2-more-results"),i=this.resultsPage+1,s=this,a=this.search.val(),r=this.context;
0!==n.length&&(e=n.offset().top-t.offset().top-t.height(),e<=this.opts.loadMorePadding&&(n.addClass("select2-active"),this.opts.query({"element":this.opts.element,"term":a,"page":i,"context":r,"matcher":this.opts.matcher,"callback":this.bind(function(e){s.opened()&&(s.opts.populateResults.call(this,t,e.results,{"term":a,"page":i,"context":r}),s.postprocessResults(e,!1,!1),e.more===!0?(n.detach().appendTo(t).text(s.opts.formatLoadMore(i+1)),window.setTimeout(function(){s.loadMoreIfNeeded()},10)):n.remove(),s.positionDropdown(),s.resultsPage=i,s.context=e.context,this.opts.element.trigger({"type":"select2-loaded","items":e}))
})})))},"tokenize":function(){},"updateResults":function(n){function i(){c.removeClass("select2-active"),h.positionDropdown()}function s(e){d.html(e),i()}var r,o,l,c=this.search,d=this.results,u=this.opts,h=this,p=c.val(),f=e.data(this.container,"select2-last-term");if((n===!0||!f||!a(p,f))&&(e.data(this.container,"select2-last-term",p),n===!0||this.showSearchInput!==!1&&this.opened())){l=++this.queryCount;var m=this.getMaximumSelectionSize();if(m>=1&&(r=this.data(),e.isArray(r)&&r.length>=m&&C(u.formatSelectionTooBig,"formatSelectionTooBig")))return void s("<li class='select2-selection-limit'>"+u.formatSelectionTooBig(m)+"</li>");
if(c.val().length<u.minimumInputLength)return s(C(u.formatInputTooShort,"formatInputTooShort")?"<li class='select2-no-results'>"+u.formatInputTooShort(c.val(),u.minimumInputLength)+"</li>":""),void(n&&this.showSearch&&this.showSearch(!0));if(u.maximumInputLength&&c.val().length>u.maximumInputLength)return void s(C(u.formatInputTooLong,"formatInputTooLong")?"<li class='select2-no-results'>"+u.formatInputTooLong(c.val(),u.maximumInputLength)+"</li>":"");u.formatSearching&&0===this.findHighlightableChoices().length&&s("<li class='select2-searching'>"+u.formatSearching()+"</li>"),c.addClass("select2-active"),this.removeHighlight(),o=this.tokenize(),o!=t&&null!=o&&c.val(o),this.resultsPage=1,u.query({"element":u.element,"term":c.val(),"page":this.resultsPage,"context":null,"matcher":u.matcher,"callback":this.bind(function(r){var o;
if(l==this.queryCount){if(!this.opened())return void this.search.removeClass("select2-active");if(this.context=r.context===t?null:r.context,this.opts.createSearchChoice&&""!==c.val()&&(o=this.opts.createSearchChoice.call(h,c.val(),r.results),o!==t&&null!==o&&h.id(o)!==t&&null!==h.id(o)&&0===e(r.results).filter(function(){return a(h.id(this),h.id(o))}).length&&r.results.unshift(o)),0===r.results.length&&C(u.formatNoMatches,"formatNoMatches"))return void s("<li class='select2-no-results'>"+u.formatNoMatches(c.val())+"</li>");
d.empty(),h.opts.populateResults.call(this,d,r.results,{"term":c.val(),"page":this.resultsPage,"context":null}),r.more===!0&&C(u.formatLoadMore,"formatLoadMore")&&(d.append("<li class='select2-more-results'>"+h.opts.escapeMarkup(u.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){h.loadMoreIfNeeded()},10)),this.postprocessResults(r,n),i(),this.opts.element.trigger({"type":"select2-loaded","items":r})}})})}},"cancel":function(){this.close()},"blur":function(){this.opts.selectOnBlur&&this.selectHighlighted({"noFocus":!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")
},"focusSearch":function(){p(this.search)},"selectHighlighted":function(e){var t=this.highlight(),n=this.results.find(".select2-highlighted"),i=n.closest(".select2-result").data("select2-data");i?(this.highlight(t),this.onSelect(i,e)):e&&e.noFocus&&this.close()},"getPlaceholder":function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((e=this.getPlaceholderOption())!==t?e.text():t)},"getPlaceholderOption":function(){if(this.select){var e=this.select.children("option").first();
if(this.opts.placeholderOption!==t)return"first"===this.opts.placeholderOption&&e||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===e.text()&&""===e.val())return e}},"initContainerWidth":function(){function n(){var n,i,s,a,r,o;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(n=this.opts.element.attr("style"),n!==t)for(i=n.split(";"),a=0,r=i.length;r>a;a+=1)if(o=i[a].replace(/\s/g,""),s=o.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==s&&s.length>=1)return s[1];
return"resolve"===this.opts.width?(n=this.opts.element.css("width"),n.indexOf("%")>0?n:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}var i=n.call(this);null!==i&&this.container.css("width",i)}}),_=P(D,{"createContainer":function(){var t=e(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' onclick='return false;' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&nbsp;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow'><b></b></span>","</a>","<input class='select2-focusser select2-offscreen' type='text'/>","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'/>","   </div>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));
return t},"enableInterface":function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},"opening":function(){var n,i,s;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.search.focus(),n=this.search.get(0),n.createTextRange?(i=n.createTextRange(),i.collapse(!1),i.select()):n.setSelectionRange&&(s=this.search.val().length,n.setSelectionRange(s,s)),""===this.search.val()&&this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(e.Event("select2-open"))
},"close":function(e){this.opened()&&(this.parent.close.apply(this,arguments),e=e||{"focus":!0},this.focusser.removeAttr("disabled"),e.focus&&this.focusser.focus())},"focus":function(){this.opened()?this.close():(this.focusser.removeAttr("disabled"),this.focusser.focus())},"isFocused":function(){return this.container.hasClass("select2-container-active")},"cancel":function(){this.parent.cancel.apply(this,arguments),this.focusser.removeAttr("disabled"),this.focusser.focus()},"destroy":function(){e("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments)
},"initContainer":function(){var t,n=this.container,i=this.dropdown;this.showSearch(this.opts.minimumResultsForSearch<0?!1:!0),this.selection=t=n.find(".select2-choice"),this.focusser=n.find(".select2-focusser"),this.focusser.attr("id","s2id_autogen"+L()),e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.focusser.attr("id")),this.focusser.attr("tabindex",this.elementTabIndex),this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){if(e.which===M.PAGE_UP||e.which===M.PAGE_DOWN)return void m(e);
switch(e.which){case M.UP:case M.DOWN:return this.moveHighlight(e.which===M.UP?-1:1),void m(e);case M.ENTER:return this.selectHighlighted(),void m(e);case M.TAB:return void this.selectHighlighted({"noFocus":!0});case M.ESC:return this.cancel(e),void m(e)}}})),this.search.on("blur",this.bind(function(){document.activeElement===this.body().get(0)&&window.setTimeout(this.bind(function(){this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&e.which!==M.TAB&&!M.isControl(e)&&!M.isFunctionKey(e)&&e.which!==M.ESC){if(this.opts.openOnEnter===!1&&e.which===M.ENTER)return void m(e);
if(e.which==M.DOWN||e.which==M.UP||e.which==M.ENTER&&this.opts.openOnEnter){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;return this.open(),void m(e)}return e.which==M.DELETE||e.which==M.BACKSPACE?(this.opts.allowClear&&this.clear(),void m(e)):void 0}})),l(this.focusser),this.focusser.on("keyup-change input",this.bind(function(e){if(this.opts.minimumResultsForSearch>=0){if(e.stopPropagation(),this.opened())return;this.open()}})),t.on("mousedown","abbr",this.bind(function(e){this.isInterfaceEnabled()&&(this.clear(),g(e),this.close(),this.selection.focus())
})),t.on("mousedown",this.bind(function(t){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),m(t)})),i.on("mousedown",this.bind(function(){this.search.focus()})),t.on("focus",this.bind(function(e){m(e)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")
})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(e.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},"clear":function(t){var n=this.selection.data("select2-data");
if(n){var i=e.Event("select2-clearing");if(this.opts.element.trigger(i),i.isDefaultPrevented())return;var s=this.getPlaceholderOption();this.opts.element.val(s?s.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),t!==!1&&(this.opts.element.trigger({"type":"select2-removed","val":this.id(n),"choice":n}),this.triggerChange({"removed":n}))}},"initSelection":function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();
else{var e=this;this.opts.initSelection.call(null,this.opts.element,function(n){n!==t&&null!==n&&(e.updateSelection(n),e.close(),e.setPlaceholder())})}},"isPlaceholderOptionSelected":function(){var e;return this.getPlaceholder()?(e=this.getPlaceholderOption())!==t&&e.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===t||null===this.opts.element.val():!1},"prepareOpts":function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var i=e.find("option").filter(function(){return this.selected
});t(n.optionToData(i))}:"data"in t&&(t.initSelection=t.initSelection||function(n,i){var s=n.val(),r=null;t.query({"matcher":function(e,n,i){var o=a(s,t.id(i));return o&&(r=i),o},"callback":e.isFunction(i)?function(){i(r)}:e.noop})}),t},"getPlaceholder":function(){return this.select&&this.getPlaceholderOption()===t?t:this.parent.getPlaceholder.apply(this,arguments)},"setPlaceholder":function(){var e=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&e!==t){if(this.select&&this.getPlaceholderOption()===t)return;
this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},"postprocessResults":function(e,t,n){var i=0,s=this;if(this.findHighlightableChoices().each2(function(e,t){return a(s.id(t.data("select2-data")),s.opts.element.val())?(i=e,!1):void 0}),n!==!1&&this.highlight(t===!0&&i>=0?i:0),t===!0){var r=this.opts.minimumResultsForSearch;r>=0&&this.showSearch(A(e.results)>=r)}},"showSearch":function(t){this.showSearchInput!==t&&(this.showSearchInput=t,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!t),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!t),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",t))
},"onSelect":function(e,t){if(this.triggerSelect(e)){var n=this.opts.element.val(),i=this.data();this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({"type":"select2-selected","val":this.id(e),"choice":e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.close(),t&&t.noFocus||this.focusser.focus(),a(n,this.id(e))||this.triggerChange({"added":e,"removed":i})}},"updateSelection":function(e){var n,i,s=this.selection.find(".select2-chosen");this.selection.data("select2-data",e),s.empty(),null!==e&&(n=this.opts.formatSelection(e,s,this.opts.escapeMarkup)),n!==t&&s.append(n),i=this.opts.formatSelectionCssClass(e,s),i!==t&&s.addClass(i),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==t&&this.container.addClass("select2-allowclear")
},"val":function(){var e,n=!1,i=null,s=this,a=this.data();if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],arguments.length>1&&(n=arguments[1]),this.select)this.select.val(e).find("option").filter(function(){return this.selected}).each2(function(e,t){return i=s.optionToData(t),!1}),this.updateSelection(i),this.setPlaceholder(),n&&this.triggerChange({"added":i,"removed":a});else{if(!e&&0!==e)return void this.clear(n);if(this.opts.initSelection===t)throw new Error("cannot call val() if initSelection() is not defined");
this.opts.element.val(e),this.opts.initSelection(this.opts.element,function(e){s.opts.element.val(e?s.id(e):""),s.updateSelection(e),s.setPlaceholder(),n&&s.triggerChange({"added":e,"removed":a})})}},"clearSearch":function(){this.search.val(""),this.focusser.val("")},"data":function(e){var n,i=!1;return 0===arguments.length?(n=this.selection.data("select2-data"),n==t&&(n=null),n):(arguments.length>1&&(i=arguments[1]),void(e?(n=this.data(),this.opts.element.val(e?this.id(e):""),this.updateSelection(e),i&&this.triggerChange({"added":e,"removed":n})):this.clear(i)))
}}),E=P(D,{"createContainer":function(){var t=e(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},"prepareOpts":function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;
return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var i=[];e.find("option").filter(function(){return this.selected}).each2(function(e,t){i.push(n.optionToData(t))}),t(i)}:"data"in t&&(t.initSelection=t.initSelection||function(n,i){var s=r(n.val(),t.separator),o=[];t.query({"matcher":function(n,i,r){var l=e.grep(s,function(e){return a(e,t.id(r))}).length;return l&&o.push(r),l},"callback":e.isFunction(i)?function(){for(var e=[],n=0;n<s.length;n++)for(var r=s[n],l=0;l<o.length;l++){var c=o[l];
if(a(r,t.id(c))){e.push(c),o.splice(l,1);break}}i(e)}:e.noop})}),t},"selectChoice":function(e){var t=this.container.find(".select2-search-choice-focus");t.length&&e&&e[0]==t[0]||(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",e)))},"destroy":function(){e("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments)
},"initContainer":function(){var t,n=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=t=this.container.find(n);var i=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",function(){i.search[0].focus(),i.selectChoice(e(this))}),this.search.attr("id","s2id_autogen"+L()),e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.search.attr("id")),this.search.on("input paste",this.bind(function(){this.isInterfaceEnabled()&&(this.opened()||this.open())
})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){++this.keydowns;var n=t.find(".select2-search-choice-focus"),i=n.prev(".select2-search-choice:not(.select2-locked)"),s=n.next(".select2-search-choice:not(.select2-locked)"),a=f(this.search);if(n.length&&(e.which==M.LEFT||e.which==M.RIGHT||e.which==M.BACKSPACE||e.which==M.DELETE||e.which==M.ENTER)){var r=n;return e.which==M.LEFT&&i.length?r=i:e.which==M.RIGHT?r=s.length?s:null:e.which===M.BACKSPACE?(this.unselect(n.first()),this.search.width(10),r=i.length?i:s):e.which==M.DELETE?(this.unselect(n.first()),this.search.width(10),r=s.length?s:null):e.which==M.ENTER&&(r=null),this.selectChoice(r),m(e),void(r&&r.length||this.open())
}if((e.which===M.BACKSPACE&&1==this.keydowns||e.which==M.LEFT)&&0==a.offset&&!a.length)return this.selectChoice(t.find(".select2-search-choice:not(.select2-locked)").last()),void m(e);if(this.selectChoice(null),this.opened())switch(e.which){case M.UP:case M.DOWN:return this.moveHighlight(e.which===M.UP?-1:1),void m(e);case M.ENTER:return this.selectHighlighted(),void m(e);case M.TAB:return this.selectHighlighted({"noFocus":!0}),void this.close();case M.ESC:return this.cancel(e),void m(e)}if(e.which!==M.TAB&&!M.isControl(e)&&!M.isFunctionKey(e)&&e.which!==M.BACKSPACE&&e.which!==M.ESC){if(e.which===M.ENTER){if(this.opts.openOnEnter===!1)return;
if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return}this.open(),(e.which===M.PAGE_UP||e.which===M.PAGE_DOWN)&&m(e),e.which===M.ENTER&&m(e)}}})),this.search.on("keyup",this.bind(function(){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(t){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),t.stopImmediatePropagation(),this.opts.element.trigger(e.Event("select2-blur"))
})),this.container.on("click",n,this.bind(function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),this.focusSearch(),t.preventDefault()))})),this.container.on("focus",n,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())
})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},"enableInterface":function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},"initSelection":function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var e=this;this.opts.initSelection.call(null,this.opts.element,function(n){n!==t&&null!==n&&(e.updateSelection(n),e.close(),e.clearSearch())
})}},"clearSearch":function(){var e=this.getPlaceholder(),n=this.getMaxSearchWidth();e!==t&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(e).addClass("select2-default"),this.search.width(n>0?n:this.container.css("width"))):this.search.val("").width(10)},"clearPlaceholder":function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},"opening":function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),this.updateResults(!0),this.search.focus(),this.opts.element.trigger(e.Event("select2-open"))
},"close":function(){this.opened()&&this.parent.close.apply(this,arguments)},"focus":function(){this.close(),this.search.focus()},"isFocused":function(){return this.search.hasClass("select2-focused")},"updateSelection":function(t){var n=[],s=[],a=this;e(t).each(function(){i(a.id(this),n)<0&&(n.push(a.id(this)),s.push(this))}),t=s,this.selection.find(".select2-search-choice").remove(),e(t).each(function(){a.addSelectedChoice(this)}),a.postprocessResults()},"tokenize":function(){var e=this.search.val();
e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts),null!=e&&e!=t&&(this.search.val(e),e.length>0&&this.open())},"onSelect":function(e,t){this.triggerSelect(e)&&(this.addSelectedChoice(e),this.opts.element.trigger({"type":"selected","val":this.id(e),"choice":e}),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(e,!1,this.opts.closeOnSelect===!0),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()&&this.updateResults(!0),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({"added":e}),t&&t.noFocus||this.focusSearch())
},"cancel":function(){this.close(),this.focusSearch()},"addSelectedChoice":function(n){var i,s,a=!n.locked,r=e("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),o=e("<li class='select2-search-choice select2-locked'><div></div></li>"),l=a?r:o,c=this.id(n),d=this.getVal();i=this.opts.formatSelection(n,l.find("div"),this.opts.escapeMarkup),i!=t&&l.find("div").replaceWith("<div>"+i+"</div>"),s=this.opts.formatSelectionCssClass(n,l.find("div")),s!=t&&l.addClass(s),a&&l.find(".select2-search-choice-close").on("mousedown",m).on("click dblclick",this.bind(function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(e(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),this.close(),this.focusSearch()
})).dequeue(),m(t))})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),l.data("select2-data",n),l.insertBefore(this.searchContainer),d.push(c),this.setVal(d)},"unselect":function(t){var n,s,a=this.getVal();if(t=t.closest(".select2-search-choice"),0===t.length)throw"Invalid argument: "+t+". Must be .select2-search-choice";if(n=t.data("select2-data")){for(;(s=i(this.id(n),a))>=0;)a.splice(s,1),this.setVal(a),this.select&&this.postprocessResults();
var r=e.Event("select2-removing");r.val=this.id(n),r.choice=n,this.opts.element.trigger(r),r.isDefaultPrevented()||(t.remove(),this.opts.element.trigger({"type":"select2-removed","val":this.id(n),"choice":n}),this.triggerChange({"removed":n}))}},"postprocessResults":function(e,t,n){var s=this.getVal(),a=this.results.find(".select2-result"),r=this.results.find(".select2-result-with-children"),o=this;a.each2(function(e,t){var n=o.id(t.data("select2-data"));i(n,s)>=0&&(t.addClass("select2-selected"),t.find(".select2-result-selectable").addClass("select2-selected"))
}),r.each2(function(e,t){t.is(".select2-result-selectable")||0!==t.find(".select2-result-selectable:not(.select2-selected)").length||t.addClass("select2-selected")}),-1==this.highlight()&&n!==!1&&o.highlight(0),!this.opts.createSearchChoice&&!a.filter(".select2-result:not(.select2-selected)").length>0&&(!e||e&&!e.more&&0===this.results.find(".select2-no-results").length)&&C(o.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+o.opts.formatNoMatches(o.search.val())+"</li>")
},"getMaxSearchWidth":function(){return this.selection.width()-o(this.search)},"resizeSearch":function(){var e,t,n,i,s,a=o(this.search);e=v(this.search)+10,t=this.search.offset().left,n=this.selection.width(),i=this.selection.offset().left,s=n-(t-i)-a,e>s&&(s=n-a),40>s&&(s=n-a),0>=s&&(s=e),this.search.width(Math.floor(s))},"getVal":function(){var e;return this.select?(e=this.select.val(),null===e?[]:e):(e=this.opts.element.val(),r(e,this.opts.separator))},"setVal":function(t){var n;this.select?this.select.val(t):(n=[],e(t).each(function(){i(this,n)<0&&n.push(this)
}),this.opts.element.val(0===n.length?"":n.join(this.opts.separator)))},"buildChangeDetails":function(e,t){for(var t=t.slice(0),e=e.slice(0),n=0;n<t.length;n++)for(var i=0;i<e.length;i++)a(this.opts.id(t[n]),this.opts.id(e[i]))&&(t.splice(n,1),n>0&&n--,e.splice(i,1),i--);return{"added":t,"removed":e}},"val":function(n,i){var s,a=this;if(0===arguments.length)return this.getVal();if(s=this.data(),s.length||(s=[]),!n&&0!==n)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(i&&this.triggerChange({"added":this.data(),"removed":s}));
if(this.setVal(n),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),i&&this.triggerChange(this.buildChangeDetails(s,this.data()));else{if(this.opts.initSelection===t)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(t){var n=e.map(t,a.id);a.setVal(n),a.updateSelection(t),a.clearSearch(),i&&a.triggerChange(a.buildChangeDetails(s,a.data()))})}this.clearSearch()},"onSortStart":function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");
this.search.width(0),this.searchContainer.hide()},"onSortEnd":function(){var t=[],n=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){t.push(n.opts.id(e(this).data("select2-data")))}),this.setVal(t),this.triggerChange()},"data":function(t,n){var i,s,a=this;return 0===arguments.length?this.selection.find(".select2-search-choice").map(function(){return e(this).data("select2-data")
}).get():(s=this.data(),t||(t=[]),i=e.map(t,function(e){return a.opts.id(e)}),this.setVal(i),this.updateSelection(t),this.clearSearch(),n&&this.triggerChange(this.buildChangeDetails(s,this.data())),void 0)}}),e.fn.select2=function(){var n,s,a,r,o,l=Array.prototype.slice.call(arguments,0),c=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],d=["opened","isFocused","container","dropdown"],u=["val","data"],h={"search":"externalSearch"};
return this.each(function(){if(0===l.length||"object"==typeof l[0])n=0===l.length?{}:e.extend({},l[0]),n.element=e(this),"select"===n.element.get(0).tagName.toLowerCase()?o=n.element.prop("multiple"):(o=n.multiple||!1,"tags"in n&&(n.multiple=o=!0)),s=o?new E:new _,s.init(n);else{if("string"!=typeof l[0])throw"Invalid arguments to select2 plugin: "+l;if(i(l[0],c)<0)throw"Unknown method: "+l[0];if(r=t,s=e(this).data("select2"),s===t)return;if(a=l[0],"container"===a?r=s.container:"dropdown"===a?r=s.dropdown:(h[a]&&(a=h[a]),r=s[a].apply(s,l.slice(1))),i(l[0],d)>=0||i(l[0],u)&&1==l.length)return!1
}}),r===t?this:r},e.fn.select2.defaults={"width":"copy","loadMorePadding":0,"closeOnSelect":!0,"openOnEnter":!0,"containerCss":{},"dropdownCss":{},"containerCssClass":"","dropdownCssClass":"","formatResult":function(e,t,n,i){var s=[];return b(e.text,n.term,s,i),s.join("")},"formatSelection":function(e,n,i){return e?i(e.text):t},"sortResults":function(e){return e},"formatResultCssClass":function(){return t},"formatSelectionCssClass":function(){return t},"formatNoMatches":function(){return"No matches found"
},"formatInputTooShort":function(e,t){var n=t-e.length;return"Please enter "+n+" more character"+(1==n?"":"s")},"formatInputTooLong":function(e,t){var n=e.length-t;return"Please delete "+n+" character"+(1==n?"":"s")},"formatSelectionTooBig":function(e){return"You can only select "+e+" item"+(1==e?"":"s")},"formatLoadMore":function(){return"Loading more results..."},"formatSearching":function(){return"Searching..."},"minimumResultsForSearch":0,"minimumInputLength":0,"maximumInputLength":null,"maximumSelectionSize":0,"id":function(e){return e.id
},"matcher":function(e,t){return n(""+t).toUpperCase().indexOf(n(""+e).toUpperCase())>=0},"separator":",","tokenSeparators":[],"tokenizer":I,"escapeMarkup":w,"blurOnChange":!1,"selectOnBlur":!1,"adaptContainerCssClass":function(e){return e},"adaptDropdownCssClass":function(){return null},"nextSearchTerm":function(){return t}},e.fn.select2.ajaxDefaults={"transport":e.ajax,"params":{"type":"GET","cache":!1,"dataType":"json"}},window.Select2={"query":{"ajax":x,"local":k,"tags":S},"util":{"debounce":d,"markMatch":b,"escapeMarkup":w,"stripDiacritics":n},"class":{"abstract":D,"single":_,"multi":E}}
}}(jQuery),define("select2",function(){}),define("plex/desktop/views/editmetadata/EditMetadataTagsView",["hb!templates/desktop/editmetadata/EditMetadataAlbumTagsView.tpl","hb!templates/desktop/editmetadata/EditMetadataArtistTagsView.tpl","hb!templates/desktop/editmetadata/EditMetadataEpisodeTagsView.tpl","hb!templates/desktop/editmetadata/EditMetadataMovieTagsView.tpl","hb!templates/desktop/editmetadata/EditMetadataShowTagsView.tpl","hb!templates/desktop/editmetadata/EditMetadataTrackTagsView.tpl","underscore","jquery","plex/base/models/library/section/SectionModel","plex/base/models/library/section/FilterModel","plex/desktop/views/editmetadata/EditMetadataBaseView","select2"],function(e,t,n,i,s,a,r,o,l,c,d){var u={"movie":i,"show":s,"episode":n,"artist":t,"album":e,"track":a},h=d.extend({"initialize":function(){this.template=u[this.model.get("type")]||u.movie,this.tagValues={}
},"flushChanges":function(){var e=this.ui.form,t=r.reduce(e.serializeArray(),function(e,t){return e[t.name]=t.value,e},{});t.Field=this.getLockedFieldsArray();var n=r.reduce(e.find("input.tag-input-hidden"),function(e,t){var n=o(t),i=n.data("name");i=i.charAt(0).toUpperCase()+i.slice(1);var s=n.val();return e[i]=s?r.map(n.val().split(","),function(e){return{"tag":e}}):[],e},{});r.each(n,function(e,n){var i=r.pluck(this.model.get(n),"tag"),s=r.pluck(e,"tag");r.isEqual(i,s)||(t[n]=e)},this),this.model.set(t)
},"onRender":function(){var e=this.model.section;if(e||(e=new l({"key":this.model.get("librarySectionID")},{"server":this.model.server})),r.isEmpty(this.tagValues)){this.tagValues=r.reduce(this.ui.form.find("input.tag-input-hidden"),function(t,n){var i=o(n),s=i.data("name"),a=new c({"filter":s,"filterType":"string"},{"server":this.model.server,"section":e});return t[s]=a.get("options"),t},{},this);var t=r.bind(function(e){var t=e.parent.get("filter");this.$("input[data-name="+t+"]").select2({"tags":e.pluck("title"),"tokenSeparators":[","]})
},this);r.each(this.tagValues,function(e){e.populate().done(t)})}}});return h}),define("plex/desktop/views/modals/EditMetadataModal",["hb!templates/desktop/modals/EditMetadataModal.tpl","underscore","jquery","plex/base/utils/Dispatcher","plex/base/adapters/LocalizerAdapter","plex/base/commands/Commands","plex/desktop/views/editmetadata/EditMetadataArtworkView","plex/desktop/views/editmetadata/EditMetadataGeneralView","plex/desktop/views/editmetadata/EditMetadataTagsView","plex/desktop/views/modals/BaseModal"],function(e,t,n,i,s,a,r,o,l,c){var d={"general":o,"tags":l,"poster":r,"banner":r,"art":r},u={"movie":["general","tags","poster","art"],"show":["general","tags","poster","banner","art"],"season":["general","poster","art"],"episode":["general","tags","poster","art"],"artist":["general","tags","poster","art"],"album":["general","tags","poster","art"],"track":["general","tags"],"photoAlbum":["general","poster","art"],"photo":["general"]},h=c.extend({"name":"editMetadataModal","className":"edit-metadata-modal modal modal-lg fade","template":e,"events":t.extend({"click .change-pane-btn":"onChangePaneClick","click .save-btn":"onSaveClick"},c.prototype.events),"ui":{"saveBtn":".save-btn","message":".form-message"},"regions":{"body":".modal-body-pane"},"onlyAfterRender":["saveChanges"],"initialize":function(e){this.selectedPane=e.selectedPane||"general",this.tempModel=this.model.clone(),this.listenTo(i,"shortcut:save",this.saveChanges)
},"serializeData":function(){var e=u[this.model.get("type")]||u.movie,n=t.reduce(e,function(e,t){return e[t]=!0,e},{});return{"item":this.model.toJSON(),"panes":n,"selectedPane":this.selectedPane}},"saveChanges":function(){var e=this.ui.saveBtn,i=this.ui.message;if(!e.isDisabled()){i.text(""),e.addClass("active"),this.body.currentView.flushChanges();var r=t.omit(this.model.changedAttributes(this.tempModel.attributes),this.model.omittedSaveAttrs),o={},l=[];r&&(o=t.pick(r,["artwork:poster","artwork:banner","artwork:art"])),t.each(t.keys(o),function(e){delete r[e],l.push(a.execute("changeArtwork",{"item":this.model,"artworkType":e.replace("artwork:",""),"artworkRatingKey":o[e]}))
},this),t.isEmpty(r)||l.push(this.model.save(r));var c=n.when.apply(n,l);c.done(t.bind(function(){this.hide()},this)),c.fail(function(){var e=s.get();i.text(e.t("Your changes could not be saved."))}),c.always(function(){e.removeClass("active")})}},"bindings":{".title-container":{"modelAttribute":"title"}},"onRender":function(){c.prototype.onRender.apply(this,arguments);var e=d[this.selectedPane];this.body.show(new e({"model":this.tempModel,"type":this.selectedPane}))},"onChangePaneClick":function(e){e.preventDefault();
var t=this.$(e.currentTarget),n=t.data("pane");if(n!==this.selectedPane){var i=d[n];this.$("."+this.selectedPane+"-btn").removeClass("selected"),this.$("."+n+"-btn").addClass("selected"),this.selectedPane=n,this.body.currentView.flushChanges(),this.body.show(new i({"model":this.tempModel,"type":n}))}},"onSaveClick":function(e){e.preventDefault(),this.saveChanges()}});return h}),define("hb!templates/desktop/dropdowns/MediaActionsDropdown",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s,a="";
return a+='<li><a class="download-btn btn-link" href="',(i=n.downloadUrl)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.downloadUrl,i=typeof i===d?i.call(e,{"hash":{},"data":t}):i),a+=u(i)+'" download="',(i=n.downloadName)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.downloadName,i=typeof i===d?i.call(e,{"hash":{},"data":t}):i),a+=u(i)+'" tabindex="-1">',s={"hash":{},"data":t},a+=u((i=n.t||e&&e.t,i?i.call(e,"Download",s):h.call(e,"t","Download",s)))+"</a></li>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};
var r,o,l,c="",d="function",u=this.escapeExpression,h=n.helperMissing,p=this;return c+='<li><a class="play-all-btn btn-link" href="#" tabindex="-1">',l={"hash":{},"data":s},c+=u((r=n.t||t&&t.t,r?r.call(t,"Play All",l):h.call(t,"t","Play All",l)))+'</a></li>\n<li><a class="play-shuffled-btn btn-link" href="#" tabindex="-1">',l={"hash":{},"data":s},c+=u((r=n.t||t&&t.t,r?r.call(t,"Play Shuffled",l):h.call(t,"t","Play Shuffled",l)))+'</a></li>\n<li><a class="play-next-btn btn-link" href="#" tabindex="-1">',l={"hash":{},"data":s},c+=u((r=n.t||t&&t.t,r?r.call(t,"Play Next",l):h.call(t,"t","Play Next",l)))+'</a></li>\n<li><a class="add-to-up-next-btn btn-link" href="#" tabindex="-1">',l={"hash":{},"data":s},c+=u((r=n.t||t&&t.t,r?r.call(t,"Add to Up Next",l):h.call(t,"t","Add to Up Next",l)))+'</a></li>\n\n<li class="divider"></li>\n\n<li><a class="refresh-btn btn-link" href="#" tabindex="-1">',l={"hash":{},"data":s},c+=u((r=n.t||t&&t.t,r?r.call(t,"Refresh",l):h.call(t,"t","Refresh",l)))+'</a></li>\n<li><a class="sync-btn btn-link" href="#" tabindex="-1">',l={"hash":{},"data":s},c+=u((r=n.t||t&&t.t,r?r.call(t,"Sync",l):h.call(t,"t","Sync",l)))+"</a></li>\n",o=n["if"].call(t,t&&t.downloadUrl,{"hash":{},"inverse":p.noop,"fn":p.program(1,a,s),"data":s}),(o||0===o)&&(c+=o),c+='\n<li><a class="share-btn" href="#" tabindex="-1">',l={"hash":{},"data":s},c+=u((r=n.t||t&&t.t,r?r.call(t,"Share",l):h.call(t,"t","Share",l)))+'</a></li>\n<li><a class="recommend-btn" href="#" tabindex="-1">',l={"hash":{},"data":s},c+=u((r=n.t||t&&t.t,r?r.call(t,"Recommend",l):h.call(t,"t","Recommend",l)))+'</a></li>\n<li><a class="delete-btn btn-link has-danger" href="#" tabindex="-1">',l={"hash":{},"data":s},c+=u((r=n.t||t&&t.t,r?r.call(t,"Delete",l):h.call(t,"t","Delete",l)))+'</a></li>\n<li><a class="info-btn btn-link" href="#" tabindex="-1">',l={"hash":{},"data":s},c+=u((r=n.t||t&&t.t,r?r.call(t,"Info",l):h.call(t,"t","Info",l)))+"</a></li>\n"
})}),define("hb!templates/desktop/modals/MediaInfoModal",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(){return"hide-streams-column"}function r(e,t,i){var s,a="";return a+="\n              ",s=n.each.call(e,e&&e.Part,{"hash":{},"inverse":R.noop,"fn":R.programWithDepth(4,o,t,i),"data":t}),(s||0===s)&&(a+=s),a+="\n            "}function o(e,t,i){var s,a,r,o="";return o+="\n                <li>\n                  ",s=n["if"].call(e,i&&i.showFilepath,{"hash":{},"inverse":R.program(7,c,t),"fn":R.program(5,l,t),"data":t}),(s||0===s)&&(o+=s),o+="\n\n                  ",r={"hash":{},"inverse":R.noop,"fn":R.program(9,d,t),"data":t},s=n.if_neq||e&&e.if_neq,a=s?s.call(e,e&&e.accessible,"1",r):L.call(e,"if_neq",e&&e.accessible,"1",r),(a||0===a)&&(o+=a),o+="\n                </li>\n              "
}function l(e,t){var i,s="";return s+="\n                    ",(i=n.file)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.file,i=typeof i===_?i.call(e,{"hash":{},"data":t}):i),s+=E(i)+"\n                  "}function c(e,t){var i,s,a="";return a+="\n                    ",s={"hash":{},"data":t},a+=E((i=n.getLastSegment||e&&e.getLastSegment,i?i.call(e,e&&e.file,s):L.call(e,"getLastSegment",e&&e.file,s)))+"\n                  "}function d(e,t){var i,s,a,r="";return r+="\n                    ",a={"hash":{},"inverse":R.program(12,h,t),"fn":R.program(10,u,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,e&&e.exists,"1",a):L.call(e,"if_eq",e&&e.exists,"1",a),(s||0===s)&&(r+=s),r+="\n                  "
}function u(e,t){var i,s,a="";return a+='\n                      <span class="label label-danger" data-toggle="tooltip" title="',s={"hash":{},"data":t},a+=E((i=n.t||e&&e.t,i?i.call(e,"Please check the permissions for this file.",s):L.call(e,"t","Please check the permissions for this file.",s)))+'">',s={"hash":{},"data":t},a+=E((i=n.t||e&&e.t,i?i.call(e,"Inaccessible",s):L.call(e,"t","Inaccessible",s)))+"</span>\n                    "}function h(e,t){var i,s,a="";return a+='\n                      <span class="label label-danger" data-toggle="tooltip" title="',s={"hash":{},"data":t},a+=E((i=n.t||e&&e.t,i?i.call(e,"Please check that this file exists and the necessary drive is mounted.",s):L.call(e,"t","Please check that this file exists and the necessary drive is mounted.",s)))+'">',s={"hash":{},"data":t},a+=E((i=n.t||e&&e.t,i?i.call(e,"Unavailable",s):L.call(e,"t","Unavailable",s)))+"</span>\n                    "
}function p(e,t,i){var s,a,r,o="";return o+='\n          <div class="media">\n            <div class="props">\n              <h4>',r={"hash":{},"data":t},o+=E((s=n.t||e&&e.t,s?s.call(e,"Media",r):L.call(e,"t","Media",r)))+"</h4>\n              <ul>\n                ",a=n.each.call(e,e&&e.properties,{"hash":{},"inverse":R.noop,"fn":R.program(15,f,t),"data":t}),(a||0===a)&&(o+=a),o+="\n              </ul>\n            </div>\n\n            ",a=n.each.call(e,e&&e.Part,{"hash":{},"inverse":R.noop,"fn":R.programWithDepth(17,m,t,i),"data":t}),(a||0===a)&&(o+=a),o+="\n          </div>\n        "
}function f(e,t){var i,s,a,r="";return r+='\n                  <li>\n                    <span class="detail-label">',a={"hash":{},"data":t},r+=E((i=n.t||e&&e.t,i?i.call(e,e&&e.name,a):L.call(e,"t",e&&e.name,a)))+'</span>\n                    <span class="detail">',(s=n.value)?s=s.call(e,{"hash":{},"data":t}):(s=e&&e.value,s=typeof s===_?s.call(e,{"hash":{},"data":t}):s),r+=E(s)+"</span>\n                  </li>\n                "}function m(e,t,i){var s,a,r,o="";return o+='\n              <div class="part">\n                <div class="props">\n                  <h4>',r={"hash":{},"data":t},o+=E((s=n.t||e&&e.t,s?s.call(e,"Part",r):L.call(e,"t","Part",r)))+"</h4>\n                  <ul>\n                    ",a=n.each.call(e,e&&e.properties,{"hash":{},"inverse":R.noop,"fn":R.program(18,g,t),"data":t}),(a||0===a)&&(o+=a),o+='\n                  </ul>\n                </div>\n\n                <div class="streams">\n                  ',a=n.each.call(e,e&&e.Stream,{"hash":{},"inverse":R.noop,"fn":R.program(20,v,t),"data":t}),(a||0===a)&&(o+=a),o+="\n                  ",a=n["if"].call(e,i&&i.loading,{"hash":{},"inverse":R.noop,"fn":R.program(31,C,t),"data":t}),(a||0===a)&&(o+=a),o+="\n                </div>\n              </div>\n            "
}function g(e,t){var i,s,a,r="";return r+='\n                      <li>\n                        <span class="detail-label">',a={"hash":{},"data":t},r+=E((i=n.t||e&&e.t,i?i.call(e,e&&e.name,a):L.call(e,"t",e&&e.name,a)))+'</span>\n                        <span class="detail">',(s=n.value)?s=s.call(e,{"hash":{},"data":t}):(s=e&&e.value,s=typeof s===_?s.call(e,{"hash":{},"data":t}):s),r+=E(s)+"</span>\n                      </li>\n                    "}function v(e,t){var i,s,a,r="";return r+='\n                    <div class="props">\n                      ',a={"hash":{},"inverse":R.program(23,b,t),"fn":R.program(21,y,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,e&&e.streamType,"1",a):L.call(e,"if_eq",e&&e.streamType,"1",a),(s||0===s)&&(r+=s),r+="\n\n                      <ul>\n                        ",s=n.each.call(e,e&&e.properties,{"hash":{},"inverse":R.noop,"fn":R.program(29,S,t),"data":t}),(s||0===s)&&(r+=s),r+="\n                      </ul>\n                    </div>\n                  "
}function y(e,t){var i,s,a="";return a+="\n                        <h4>",s={"hash":{},"data":t},a+=E((i=n.t||e&&e.t,i?i.call(e,"Video",s):L.call(e,"t","Video",s)))+"</h4>\n                      "}function b(e,t){var i,s,a;return a={"hash":{},"inverse":R.program(26,x,t),"fn":R.program(24,w,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,e&&e.streamType,"2",a):L.call(e,"if_eq",e&&e.streamType,"2",a),s||0===s?s:""}function w(e,t){var i,s,a="";return a+="\n                        <h4>",s={"hash":{},"data":t},a+=E((i=n.t||e&&e.t,i?i.call(e,"Audio",s):L.call(e,"t","Audio",s)))+"</h4>\n                      "
}function x(e,t){var i,s,a;return a={"hash":{},"inverse":R.noop,"fn":R.program(27,k,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,e&&e.streamType,"3",a):L.call(e,"if_eq",e&&e.streamType,"3",a),s||0===s?s:""}function k(e,t){var i,s,a="";return a+="\n                        <h4>",s={"hash":{},"data":t},a+=E((i=n.t||e&&e.t,i?i.call(e,"Subtitles",s):L.call(e,"t","Subtitles",s)))+"</h4>\n                      "}function S(e,t){var i,s,a,r="";return r+='\n                          <li>\n                            <span class="detail-label">',a={"hash":{},"data":t},r+=E((i=n.t||e&&e.t,i?i.call(e,e&&e.name,a):L.call(e,"t",e&&e.name,a)))+'</span>\n                            <span class="detail">',(s=n.value)?s=s.call(e,{"hash":{},"data":t}):(s=e&&e.value,s=typeof s===_?s.call(e,{"hash":{},"data":t}):s),r+=E(s)+"</span>\n                          </li>\n                        "
}function C(e,t){var i,s,a="";return a+='\n                    <div class="props">\n                      <h4>',s={"hash":{},"data":t},a+=E((i=n.t||e&&e.t,i?i.call(e,"Loading",s):L.call(e,"t","Loading",s)))+"...</h4>\n                    </div>\n                  "}function T(e,t,i){var s;return s=n["if"].call(e,i&&i.showFilepath,{"hash":{},"inverse":R.noop,"fn":R.program(34,A,t),"data":t}),s||0===s?s:""}function A(e,t){var i,s,a="";return a+='\n      <div class="modal-footer">\n        <div class="pull-left">\n          <a href="',(i=n.url)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.url,i=typeof i===_?i.call(e,{"hash":{},"data":t}):i),a+=E(i)+'" target="_blank">',s={"hash":{},"data":t},a+=E((i=n.t||e&&e.t,i?i.call(e,"View XML",s):L.call(e,"t","View XML",s)))+"</a>\n        </div>\n      </div>\n    "
}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var I,P,M,D="",_="function",E=this.escapeExpression,L=n.helperMissing,R=this;return D+='<div class="modal-dialog">\n  <div class="modal-content">\n    <div class="modal-header">\n      <button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button>\n      <h4 class="modal-title"><i class="modal-icon glyphicon circle-info"></i> ',M={"hash":{},"data":s},D+=E((I=n.t||t&&t.t,I?I.call(t,"Media Info",M):L.call(t,"t","Media Info",M)))+'</h4>\n    </div>\n\n    <div class="modal-body modal-body-scroll minimal-scroll">\n      <div class="position-ref ',P=n.unless.call(t,t&&t.hasStreams,{"hash":{},"inverse":R.noop,"fn":R.program(1,a,s),"data":s}),(P||0===P)&&(D+=P),D+='">\n        <div class="files">\n          <h4>Files</h4>\n          <ul>\n            ',P=n.each.call(t,t&&t.media,{"hash":{},"inverse":R.noop,"fn":R.programWithDepth(3,r,s,t),"data":s}),(P||0===P)&&(D+=P),D+="\n          </ul>\n        </div>\n\n        ",P=n.each.call(t,t&&t.media,{"hash":{},"inverse":R.noop,"fn":R.programWithDepth(14,p,s,t),"data":s}),(P||0===P)&&(D+=P),D+="\n      </div>\n    </div>\n\n    ",P=n["if"].call(t,t&&t.key,{"hash":{},"inverse":R.noop,"fn":R.programWithDepth(33,T,s,t),"data":s}),(P||0===P)&&(D+=P),D+="\n  </div>\n</div>\n"
})}),define("plex/desktop/views/modals/MediaInfoModal",["hb!templates/desktop/modals/MediaInfoModal.tpl","underscore","jquery","plex/base/utils/Browser","plex/base/utils/formatters/StringUtil","plex/base/utils/formatters/DateTimeUtil","plex/base/utils/formatters/MetadataUtil","plex/base/models/AppModel","plex/desktop/views/modals/BaseModal"],function(e,t,n,i,s,a,r,o,l){function c(e){var n=t.reject(e,function(e){return 0===e.id}),i=t.sortBy(n,"streamType");return t.map(i,function(e){return m(e,"streamType")
})}function d(e){return t.map(e.get("Media"),function(e){return t.extend(m(e,"Part"),{"Part":t.map(e.Part,function(e){return t.extend(m(e,"Stream"),{"file":e.file,"exists":e.exists,"accessible":e.accessible,"Stream":c(e.Stream)})})})})}var u=["id","key","index","videoCodec","audioCodec","audioChannels","default","selected","languageCode","codecID","accessible","exists"],h={"size":r.formatBytes,"duration":a.formatDuration,"codec":s.upperCase,"format":s.upperCase,"container":s.upperCase,"videoResolution":r.formatResolution,"channels":r.formatAudioChannels,"level":r.formatVideoLevel,"bitrateMode":s.upperCase,"accessible":s.formatBoolean,"exists":s.formatBoolean,"optimizedForStreaming":s.formatBoolean,"file":s.getLastSegment},p={"optimizedForStreaming":"Web Optimized","has64bitOffsets":"Has 64bit Offsets","cabac":"CABAC","postURL":"URL"},f={"frameRate":" fps","dialogNorm":" dB","bitrate":" kbps","samplingRate":" Hz"},m=function(e,n){var i={"properties":[]};
for(var a in e)if(a!==n&&-1===t.indexOf(u,a)){var r=p[a],o=e[a];h[a]&&(o=h[a](o)),o&&(f[a]&&(o+=f[a]),r||(r=s.formatLabel.call(this,a)),i.properties.push({"name":r,"value":o}))}return n&&e&&(i[n]=e[n]),i},g=l.extend({"name":"mediaInfoModal","className":"media-info-modal modal modal-lg fade","template":e,"ui":{"scroller":".modal-body-scroll","stickyProps":".media>.props, .part>.props"},"onlyAfterRender":["onReset"],"initialize":function(){this.media=d(this.model),this.loading=!1,this.hasStreams()||(this.loading=!0,this.model.fetch().always(t.bind(this.onReset,this)))
},"serializeData":function(){var e=this.model.get("key"),t=o.get("user");return{"key":e,"url":this.model.server.resolveUrl(e,{"appendToken":!0}),"media":this.media,"hasStreams":this.hasStreams()||this.loading,"showFilepath":!this.model.server.get("shared")||t.isNinja(),"loading":this.loading}},"hasStreams":function(){return!!t.chain(this.media).pluck("Part").flatten().pluck("Stream").flatten().size().value()},"onRender":function(){l.prototype.onRender.apply(this,arguments),this.ui.scroller.on("scroll",t.bind(this.onScroll,this)),this.$el.tooltip({"selector":".files .label","placement":"bottom"})
},"onReset":function(){this.hidden||(this.loading=!1,this.media=d(this.model),this.render())},"onClose":function(){this.ui.scroller.off("scroll",this.onScroll)},"onScroll":function(){var e=this.ui.scroller.scrollTop(),i=this.ui.scroller.offset().top+parseInt(this.$(".files>ul").css("margin-bottom"),10);return 0>i?void setTimeout(t.bind(this.onScroll,this),500):void this.ui.stickyProps.each(function(){var t=n(this),s=t.parent().height()-t.height(),a=e-this.parentNode.offsetTop,r=a;r>=s&&(r=s),0>r&&(r=0),r==a?(t.addClass("sticky"),t.css("top",i)):(t.removeClass("sticky"),t.css("top",r))
})}});return g}),define("plex/desktop/views/dropdowns/MediaActionsDropdown",["hb!templates/desktop/dropdowns/MediaActionsDropdown.tpl","underscore","marionette","plex/base/utils/Dispatcher","plex/base/utils/formatters/StringUtil","plex/base/utils/types/MediaTypes","plex/base/commands/Commands","plex/desktop/models/MediaActionsModel","plex/desktop/views/modals/ShareModal","plex/desktop/views/modals/RecommendModal","plex/desktop/views/modals/MediaInfoModal"],function(e,t,n,i,s,a,r,o,l,c,d){var u=n.ItemView.extend({"tagName":"ul","className":"dropdown-menu","template":e,"ui":{"playAllBtn":".play-all-btn","playShuffledBtn":".play-shuffled-btn","playNextBtn":".play-next-btn","addToUpNextBtn":".add-to-up-next-btn","divider":".divider"},"events":{"click .play-all-btn":"onPlayAllClick","click .play-shuffled-btn":"onPlayShuffledClick","click .play-next-btn":"onPlayNextClick","click .add-to-up-next-btn":"onAddToUpNextClick","click .refresh-btn":"onRefreshClick","click .sync-btn":"onSyncClick","click .share-btn":"onShareClick","click .recommend-btn":"onRecommendClick","click .delete-btn":"onDeleteClick","click .info-btn":"onInfoClick"},"initialize":function(){this.mediaType=a.getMediaTypeByString(this.model.get("type")),this.mediaActions=new o({},{"item":this.model})
},"serializeData":function(){var e,t;if(this.mediaActions.get("showDownload")){e=this.model.getDownloadUrl();var n=this.model.getFilepath();n&&(t=s.getLastSegment(n))}return{"downloadUrl":e,"downloadName":t}},"bindingsModel":"mediaActions","bindings":{".play-all-btn":{"modelAttribute":"showPlayAll","manual":!0,"autohide":!0},".play-shuffled-btn":{"modelAttribute":"showShuffle","manual":!0,"autohide":!0},".play-next-btn, .add-to-up-next-btn":{"modelAttribute":"showQueue","modelListeners":["showQueue","canQueue"],"manual":!0,"autohide":!0,"formatter":function(e,t){return t.toggleClass("disabled",!this.mediaActions.get("canQueue")),e
}},".refresh-btn":{"modelAttribute":"showRefresh","manual":!0,"autohide":!0},".sync-btn":{"modelAttribute":"showSync","manual":!0,"autohide":!0},".download-btn":{"modelAttribute":"showDownload","manual":!0,"autohide":!0},".share-btn, .recommend-btn":{"modelAttribute":"showShare","manual":!0,"autohide":!0},".delete-btn":{"modelAttribute":"showDelete","manual":!0,"autohide":!0},".info-btn":{"modelAttribute":"showInfo","manual":!0,"autohide":!0}},"onRender":function(){var e=this.ui.divider,t=e.prevAll(":not(:has(.hidden))").length,n=e.nextAll(":not(:has(.hidden))").length;
e.toggleClass("hidden",!t||!n)},"onClose":function(){this.mediaActions.stopListening()},"onPlayAllClick":function(e){return e.preventDefault(),this.ui.playAllBtn.isDisabled()?void e.stopImmediatePropagation():void r.execute("playMedia",{"item":this.model})},"onPlayShuffledClick":function(e){return e.preventDefault(),this.ui.playShuffledBtn.isDisabled()?void e.stopImmediatePropagation():void r.execute("playMedia",{"item":this.model,"shuffle":!0})},"onPlayNextClick":function(e){return e.preventDefault(),this.ui.playNextBtn.isDisabled()?void e.stopImmediatePropagation():void r.execute("queueMedia",{"item":this.model,"next":!0})
},"onAddToUpNextClick":function(e){return e.preventDefault(),this.ui.addToUpNextBtn.isDisabled()?void e.stopImmediatePropagation():void r.execute("queueMedia",{"item":this.model,"next":!1})},"onRefreshClick":function(e){e.preventDefault(),r.execute("refreshMetadata",{"item":this.model})},"onSyncClick":function(e){e.preventDefault();var t={"model":this.model,"type":this.mediaType,"isNew":!0,"isSection":!1};r.execute("showSyncModal",t)},"onShareClick":function(e){e.preventDefault(),i.trigger("show:modal",new l({"model":this.model}))
},"onRecommendClick":function(e){e.preventDefault(),i.trigger("show:modal",new c({"model":this.model}))},"onDeleteClick":function(e){e.preventDefault(),r.execute("deleteFile",{"item":this.model,"skipRedirect":!0})},"onInfoClick":function(e){e.preventDefault(),i.trigger("show:modal",new d({"model":this.model}))}});return u}),define("plex/desktop/views/players/PhotoPlayerDetailsView",["hb!templates/desktop/players/PhotoPlayerDetailsView.tpl","underscore","jquery","marionette","plex/base/utils/Dispatcher","plex/base/utils/formatters/StringUtil","plex/base/utils/types/MediaTypes","plex/base/commands/Commands","plex/desktop/models/MediaActionsModel","plex/desktop/views/images/BaseImage","plex/desktop/views/modals/EditMetadataModal","plex/desktop/views/dropdowns/MediaActionsDropdown"],function(e,t,n,i,s,a,r,o,l,c,d,u){var h=i.Layout.extend({"className":"photo-player-container","template":e,"resizeDelay":200,"ui":{"details":".photo-details","playBtn":".play-btn","pauseBtn":".pause-btn","dropdown":".photo-actions-dropdown"},"regions":{"photo":".photo-details"},"events":{"click .edit-btn":"onEditClick","click .more-btn":"onMoreClick","hide.bs.dropdown .photo-actions-dropdown":"onDropdownHide"},"onlyAfterRender":["onPausedChange"],"initialize":function(e){this.playerModel=e.playerModel,this.transition=e.transition,this.mediaActions=new l({},{"item":this.model}),this.onResize=t.debounce(t.bind(this.onResize,this),this.resizeDelay);
var i=this.getImageSize();this.photoImage=new c({"model":this.model,"url":this.model.getMediaKey(),"width":i.width,"height":i.height}),this.updateImageSize(i),this.transition&&(this.$el.addClass(this.transition.type),this.transition.direction&&(this.$el.addClass(this.transition.direction),"left"===this.transition.direction?this.$el.css("left",-1*this.windowWidth):this.$el.css("left",this.windowWidth))),this.listenTo(this.photoImage,"load",this.onLoad),this.listenTo(this.playerModel,"change:paused",this.onPausedChange),this.model.isLibraryItem()&&this.model.populate(),n(window).on("resize",this.onResize)
},"serializeData":function(){return{"player":this.playerModel.toJSON(),"index":this.collection.indexOf(this.model)+1,"total":this.collection.length}},"getImageSize":function(){return this.windowWidth=n(window).width(),this.windowHeight=n(window).height(),{"width":Math.round(.8*this.windowWidth),"height":Math.round(.7*this.windowHeight)}},"updateImageSize":function(e){this.photoImage.$el.css({"max-width":e.width,"max-height":e.height})},"transitionIn":function(){this.transition&&(this.$el[0].offsetHeight,this.$el.removeClass(this.transition.type),this.transition.direction&&this.$el.removeClass(this.transition.direction).css("left",0))
},"transitionOut":function(e){return e?(this.$el.addClass(e.type),e.direction&&("right"===e.direction?this.$el.addClass("left").css("left",-1*this.windowWidth):this.$el.addClass("right").css("left",this.windowWidth)),void t.delay(t.bind(this.close,this),1e3)):void this.close()},"bindings":{".photo-title":{"modelAttribute":"title"},".photo-summary":{"modelAttribute":"summary","autohide":!0},".edit-btn":{"model":"mediaActions","modelAttribute":"showEdit","manual":!0,"autohide":!0},".more-btn":{"model":"mediaActions","modelAttribute":"showListDropdown","manual":!0,"autohide":!0}},"onRender":function(){this.photo.prepend(this.photoImage)
},"onClose":function(){n(window).off("resize",this.onResize)},"onLoad":function(){this.playerModel.set("loaded",!0)},"onPausedChange":function(e,t){this.ui.playBtn.toggleClass("hidden",!t),this.ui.pauseBtn.toggleClass("hidden",t)},"onResize":function(){var e=this.getImageSize();this.updateImageSize(e)},"onEditClick":function(e){e.preventDefault(),s.trigger("show:modal",new d({"model":this.model}))},"onMoreClick":function(e){e.preventDefault(),e.stopImmediatePropagation(),this.dropdown=new u({"model":this.model}),this.ui.dropdown.append(this.dropdown.render().el),this.ui.dropdown.addClass("open"),this.ui.details.addClass("force-hover")
},"onDropdownHide":function(){this.dropdown.close(),this.dropdown=null,this.ui.details.removeClass("force-hover")}});return h}),define("plex/desktop/views/players/PhotoPlayerView",["hb!templates/desktop/players/PhotoPlayerView.tpl","underscore","marionette","plex/base/utils/Dispatcher","plex/base/adapters/PlayerControllerAdapter","plex/base/models/player/PlayerModel","plex/desktop/views/players/PhotoPlayerDetailsView"],function(e,t,n,i,s,a,r){var o=n.Layout.extend({"className":"photo-player minimal-scroll","template":e,"defaultTransition":{"type":"fade"},"ui":{"loading":".loading","previousBtn":".previous-btn","nextBtn":".next-btn"},"regions":{"details":".photo-player-container"},"events":{"click .player-close-btn":"onCloseClick","click .previous-btn":"onPreviousClick","click .next-btn":"onNextClick","click .play-btn":"onPlayClick","click .pause-btn":"onPauseClick"},"collectionEvents":{"destroy":"onItemDestroy"},"onlyAfterRender":["onPlayerEnablePreviousChange","onPlayerEnableNextChange"],"initialize":function(){this.model||(this.model=this.collection.selectedItem()),this.controller=s.get("photo"),this.playerModel=new a({"item":this.model,"playlist":this.collection}),this.listenTo(this.playerModel,{"change:item":this.onPlayerItemChange,"change:loaded":this.onPlayerLoadedChange,"change:paused":this.onPlayerPausedChange,"change:finished":this.onPlayerFinishedChange,"change:enablePrevious":this.onPlayerEnablePreviousChange,"change:enableNext":this.onPlayerEnableNextChange}),this.listenTo(i,{"shortcut:stop":this.stop,"shortcut:playPause":this.playPause,"shortcut:skipPrevious":this.skipPrevious,"shortcut:skipNext":this.skipNext})
},"play":function(){this.controller.load({"model":this.playerModel}),this.transition()},"transition":function(e){e||(e=this.defaultTransition),this.loading=!0,this.nextDetails=new r({"model":this.model,"collection":this.collection,"playerModel":this.playerModel,"transition":e}),this.ui.loading.removeClass("hidden"),this.$el.addClass("show-photo-loading"),this.$el.append(this.nextDetails.render().el),this.currentTransition=this.defaultTransition},"playPause":function(){this.controller.playPause()},"skipNext":function(){this.loading||(this.currentTransition={"type":"slide","direction":"right"},this.controller.skipNext())
},"skipPrevious":function(){this.loading||(this.currentTransition={"type":"slide","direction":"left"},this.controller.skipPrevious())},"stop":function(){this.model.server.get("playQueues").remove("photo"),i.trigger("hide:photo")},"onRender":function(){this.play()},"onClose":function(){this.controller.stop(),this.currentDetails&&this.currentDetails.close(),this.nextDetails&&this.nextDetails.close()},"onPlayerItemChange":function(e,t){this.model=t,this.transition(this.currentTransition)},"onPlayerLoadedChange":function(e,t){t&&(this.loading=!1,this.ui.loading.addClass("hidden"),this.$el.removeClass("show-photo-loading"),this.nextDetails.transitionIn(),this.currentDetails&&this.currentDetails.transitionOut(this.nextDetails.transition),this.currentDetails=this.nextDetails)
},"onPlayerFinishedChange":function(e,t){t&&this.stop()},"onPlayerEnablePreviousChange":function(e,t){this.ui.previousBtn.toggleClass("hidden",!t)},"onPlayerEnableNextChange":function(e,t){this.ui.nextBtn.toggleClass("hidden",!t)},"onItemDestroy":function(e){this.playerModel.get("item")===e&&(this.collection.length?this.skipNext():this.stop())},"onCloseClick":function(e){e.preventDefault(),this.stop()},"onPreviousClick":function(e){e.preventDefault(),this.skipPrevious()},"onNextClick":function(e){e.preventDefault(),this.skipNext()
},"onPlayClick":function(e){e.preventDefault(),this.controller.play()},"onPauseClick":function(e){e.preventDefault(),this.controller.pause()}});return o}),define("hb!templates/desktop/navbar/NavBarView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(){return"hidden"}function r(){return"active"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var o,l,c,d="",u=this,h="function",p=this.escapeExpression,f=n.helperMissing;return d+='<ul class="nav nav-bar-nav">\n  <li><a class="back-btn ',o=n.unless.call(t,t&&t.hasHistory,{"hash":{},"inverse":u.noop,"fn":u.program(1,a,s),"data":s}),(o||0===o)&&(d+=o),d+='" href="#"><i class="glyphicon left-arrow"></i></a></li>\n  <li><a class="home-btn" href="#"><i class="glyphicon home"></i></a></li>\n</ul>\n\n<div class="nav-bar-search-container"></div>\n\n<ul class="nav nav-bar-nav nav-bar-right">\n  <li><a class="plex-pass-btn ',o=n.unless.call(t,t&&t.canGoPremium,{"hash":{},"inverse":u.noop,"fn":u.program(1,a,s),"data":s}),(o||0===o)&&(d+=o),d+='" href="',(o=n.plexPassUrl)?o=o.call(t,{"hash":{},"data":s}):(o=t&&t.plexPassUrl,o=typeof o===h?o.call(t,{"hash":{},"data":s}):o),d+=p(o)+'" target="_blank" title="',c={"hash":{},"data":s},d+=p((o=n.t||t&&t.t,o?o.call(t,"Get your Plex Pass today!",c):f.call(t,"t","Get your Plex Pass today!",c)))+'" data-toggle="tooltip"><span class="plex-pass-label label label-primary">',c={"hash":{},"data":s},d+=p((o=n.t||t&&t.t,o?o.call(t,"Go Premium",c):f.call(t,"t","Go Premium",c)))+'</span></a></li>\n\n  <li class="',l=n["if"].call(t,t&&t.canUpdate,{"hash":{},"inverse":u.noop,"fn":u.program(3,r,s),"data":s}),(l||0===l)&&(d+=l),d+='"><a class="install-updates-btn ',l=n.unless.call(t,t&&t.canUpdate,{"hash":{},"inverse":u.noop,"fn":u.program(1,a,s),"data":s}),(l||0===l)&&(d+=l),d+='" href="#" title="',c={"hash":{},"data":s},d+=p((o=n.t||t&&t.t,o?o.call(t,"Updates Available",c):f.call(t,"t","Updates Available",c)))+'" data-toggle="tooltip"><i class="glyphicon up-arrow"></i></a></li>\n\n  <li class="',l=n["if"].call(t,t&&t.activityCount,{"hash":{},"inverse":u.noop,"fn":u.program(3,r,s),"data":s}),(l||0===l)&&(d+=l),d+='"><a class="activity-btn ',l=n.unless.call(t,t&&t.showActivity,{"hash":{},"inverse":u.noop,"fn":u.program(1,a,s),"data":s}),(l||0===l)&&(d+=l),d+='" href="#!/activity" title="',c={"hash":{},"data":s},d+=p((o=n.t||t&&t.t,o?o.call(t,"Activity",c):f.call(t,"t","Activity",c)))+'" data-toggle="tooltip"><span class="activity-badge badge badge-transparent ',l=n.unless.call(t,t&&t.activityCount,{"hash":{},"inverse":u.noop,"fn":u.program(1,a,s),"data":s}),(l||0===l)&&(d+=l),d+='">',(l=n.activityCount)?l=l.call(t,{"hash":{},"data":s}):(l=t&&t.activityCount,l=typeof l===h?l.call(t,{"hash":{},"data":s}):l),d+=p(l)+'</span><i class="glyphicon cardio"></i></a></li>\n\n  <li><a class="settings-btn" href="#!/settings" title="',c={"hash":{},"data":s},d+=p((o=n.t||t&&t.t,o?o.call(t,"Settings",c):f.call(t,"t","Settings",c)))+'" data-toggle="tooltip"><i class="glyphicon settings"></i></a></li>\n</ul>\n'
})}),define("hb!templates/desktop/navbar/NavBarSearchView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(){return"hidden"}function r(e,t){var i,s;return s={"hash":{},"data":t},u((i=n.t||e&&e.t,i?i.call(e,"Search {1}",e&&e.searchPlaceholder,s):d.call(e,"t","Search {1}",e&&e.searchPlaceholder,s)))}function o(e,t){var i;return(i=n.searchValue)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.searchValue,i=typeof i===h?i.call(e,{"hash":{},"data":t}):i),u(i)}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};
var l,c="",d=n.helperMissing,u=this.escapeExpression,h="function",p=this;return c+='<div class="form-group form-group-search">\n  <label class="control-label-search" for="nav-bar-search">\n    <i class="glyphicon search"></i>\n    <a class="clear-search-btn ',l=n.unless.call(t,t&&t.searchValue,{"hash":{},"inverse":p.noop,"fn":p.program(1,a,s),"data":s}),(l||0===l)&&(c+=l),c+='" href="#"><i class="glyphicon circle-remove"></i></a>\n  </label>\n\n  <input type="search" id="nav-bar-search" class="form-control form-control-search" placeholder="',l=n["if"].call(t,t&&t.searchPlaceholder,{"hash":{},"inverse":p.noop,"fn":p.program(3,r,s),"data":s}),(l||0===l)&&(c+=l),c+='" value="',l=n["if"].call(t,t&&t.searchValue,{"hash":{},"inverse":p.noop,"fn":p.program(5,o,s),"data":s}),(l||0===l)&&(c+=l),c+='">\n</div>\n'
})}),define("plex/desktop/views/navbar/NavBarSearchView",["hb!templates/desktop/navbar/NavBarSearchView.tpl","underscore","jquery","marionette","plex/base/utils/Dispatcher","plex/base/adapters/LocalizerAdapter"],function(e,t,n,i,s,a){var r=i.ItemView.extend({"id":"#nav-bar-search-form","tagName":"form","className":"nav-bar-form nav-bar-left hidden-xs","template":e,"sectionSearchDelay":500,"ui":{"searchInput":"#nav-bar-search","searchLabel":".control-label-search","clearSearchBtn":".clear-search-btn"},"events":{"focus #nav-bar-search":"onSearchFocus","blur #nav-bar-search":"onSearchBlur","keyup #nav-bar-search":"onSearchKeyUp","submit":"onSearchSubmit","mousedown .clear-search-btn":"onClearSearchClick"},"modelEvents":{"change:searchPlaceholder":"onSearchPlaceholderChange","change:searchValue":"onSearchValueChange"},"onlyAfterRender":["onSearchPlaceholderChange","onSearchValueChange"],"initialize":function(){this.listenTo(s,"shortcut:search",this.focusSearch)
},"focusSearch":function(){this.ui.searchInput.focus()},"search":function(){var e=n.trim(this.ui.searchInput.val()),t=this.model.get("searchType");return e.length<3?void(e.length||this.clearSearch()):void(t?s.trigger("search:"+t,e):s.trigger("navigate","search",{"query":e}))},"clearSearch":function(){var e=this.model.get("searchType");e&&s.trigger("search:"+e,"")},"onSearchPlaceholderChange":function(e,t){var n=a.get(),i=t?n.t("Search {1}",t):"";this.ui.searchInput.attr("placeholder",i)},"onSearchValueChange":function(e,t){this.ui.searchInput.is(document.activeElement)||(this.ui.clearSearchBtn.toggleClass("hidden",!t),this.ui.searchInput.val(t))
},"onSearchFocus":function(){this.ui.searchLabel.addClass("selected")},"onSearchBlur":function(){this.ui.searchLabel.removeClass("selected")},"onSearchKeyUp":function(e){13!==e.which&&(this.ui.clearSearchBtn.toggleClass("hidden",0===this.ui.searchInput.val().length),"section"===this.model.get("searchType")&&(this.sectionSearchTimeout=setTimeout(t.bind(this.search,this),this.sectionSearchDelay)))},"onSearchSubmit":function(e){e.preventDefault(),this.sectionSearchTimeout=clearTimeout(this.sectionSearchTimeout),this.search(),this.ui.searchInput.blur()
},"onClearSearchClick":function(e){e.preventDefault(),this.ui.clearSearchBtn.addClass("hidden"),this.ui.searchInput.val(""),this.search()}});return r}),define("hb!templates/desktop/navbar/NavDropdown",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(){return"hidden"}function r(){return"signed-in"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var o,l,c,d="",u=this,h="function",p=this.escapeExpression,f=n.helperMissing;return d+='<a class="dropdown-toggle" href="#nav-dropdown" data-toggle="dropdown">\n  <i class="glyphicon user"></i><i class="caret-icon"></i>\n  <span class="total-badge badge ',o=n.unless.call(t,t&&t.totalCount,{"hash":{},"inverse":u.noop,"fn":u.program(1,a,s),"data":s}),(o||0===o)&&(d+=o),d+='">',(o=n.totalCount)?o=o.call(t,{"hash":{},"data":s}):(o=t&&t.totalCount,o=typeof o===h?o.call(t,{"hash":{},"data":s}):o),d+=p(o)+'</span>\n</a>\n\n<ul class="dropdown-menu ',o=n["if"].call(t,t&&t.signedIn,{"hash":{},"inverse":u.noop,"fn":u.program(3,r,s),"data":s}),(o||0===o)&&(d+=o),d+='">\n  <li class="signed-in-item"><a class="username-btn" href="',(o=n.accountUrl)?o=o.call(t,{"hash":{},"data":s}):(o=t&&t.accountUrl,o=typeof o===h?o.call(t,{"hash":{},"data":s}):o),d+=p(o)+'" target="',(o=n.defaultTarget)?o=o.call(t,{"hash":{},"data":s}):(o=t&&t.defaultTarget,o=typeof o===h?o.call(t,{"hash":{},"data":s}):o),d+=p(o)+'">',(o=n.username)?o=o.call(t,{"hash":{},"data":s}):(o=t&&t.username,o=typeof o===h?o.call(t,{"hash":{},"data":s}):o),d+=p(o)+'</a></li>\n  <li class="signed-in-item divider"></li>\n\n  <li class="signed-in-item"><a class="friends-btn" href="#">',c={"hash":{},"data":s},d+=p((o=n.t||t&&t.t,o?o.call(t,"Friends",c):f.call(t,"t","Friends",c)))+' <span class="friend-requests-badge badge ',l=n.unless.call(t,t&&t.friendRequestsCount,{"hash":{},"inverse":u.noop,"fn":u.program(1,a,s),"data":s}),(l||0===l)&&(d+=l),d+='">',(l=n.friendRequestsCount)?l=l.call(t,{"hash":{},"data":s}):(l=t&&t.friendRequestsCount,l=typeof l===h?l.call(t,{"hash":{},"data":s}):l),d+=p(l)+'</span></a></li>\n  <li class="signed-in-item"><a href="#!/playlist/queue">',c={"hash":{},"data":s},d+=p((o=n.t||t&&t.t,o?o.call(t,"Queue",c):f.call(t,"t","Queue",c)))+'</a></li>\n  <li class="signed-in-item"><a href="#!/playlist/recommendations">',c={"hash":{},"data":s},d+=p((o=n.t||t&&t.t,o?o.call(t,"Recommended",c):f.call(t,"t","Recommended",c)))+'</a></li>\n\n  <li class="signed-in-item divider"></li>\n\n  <li><a href="#!/announcements">',c={"hash":{},"data":s},d+=p((o=n.t||t&&t.t,o?o.call(t,"Announcements",c):f.call(t,"t","Announcements",c)))+' <span class="announcements-badge badge ',l=n.unless.call(t,t&&t.unreadAnnouncementsCount,{"hash":{},"inverse":u.noop,"fn":u.program(1,a,s),"data":s}),(l||0===l)&&(d+=l),d+='">',(l=n.unreadAnnouncementsCount)?l=l.call(t,{"hash":{},"data":s}):(l=t&&t.unreadAnnouncementsCount,l=typeof l===h?l.call(t,{"hash":{},"data":s}):l),d+=p(l)+'</span></a></li>\n  <li><a href="',(l=n.appsUrl)?l=l.call(t,{"hash":{},"data":s}):(l=t&&t.appsUrl,l=typeof l===h?l.call(t,{"hash":{},"data":s}):l),d+=p(l)+'" target="_blank">',c={"hash":{},"data":s},d+=p((o=n.t||t&&t.t,o?o.call(t,"Apps...",c):f.call(t,"t","Apps...",c)))+'</a></li>\n  <li><a href="',(l=n.helpUrl)?l=l.call(t,{"hash":{},"data":s}):(l=t&&t.helpUrl,l=typeof l===h?l.call(t,{"hash":{},"data":s}):l),d+=p(l)+'" target="_blank">',c={"hash":{},"data":s},d+=p((o=n.t||t&&t.t,o?o.call(t,"Help...",c):f.call(t,"t","Help...",c)))+'</a></li>\n\n  <li class="divider"></li>\n\n  <li class="signed-out-item"><a class="sign-in-btn" href="#">',c={"hash":{},"data":s},d+=p((o=n.t||t&&t.t,o?o.call(t,"Sign In",c):f.call(t,"t","Sign In",c)))+'</a></li>\n  <li class="signed-in-item"><a class="sign-out-btn" href="#">',c={"hash":{},"data":s},d+=p((o=n.t||t&&t.t,o?o.call(t,"Sign Out",c):f.call(t,"t","Sign Out",c)))+"</a></li>\n</ul>\n"
})}),define("plex/desktop/views/navbar/NavDropdown",["hb!templates/desktop/navbar/NavDropdown.tpl","underscore","marionette","plex/base/utils/Dispatcher","plex/base/commands/Commands","plex/base/models/ConfigModel"],function(e,t,n,i,s,a){var r=n.ItemView.extend({"id":"nav-dropdown","tagName":"li","className":"nav-dropdown dropdown","template":e,"ui":{"dropdownMenu":".dropdown-menu","username":".username-btn","totalBadge":".total-badge","friendRequestsBadge":".friend-requests-badge","announcementsBadge":".announcements-badge"},"events":{"click .friends-btn":"onFriendsClick","click .sign-in-btn":"onSignInClick","click .sign-out-btn":"onSignOutClick"},"onlyAfterRender":["onSignedInChange","onFriendRequestsChange","onAnnouncementsChange"],"initialize":function(){this.user=this.model.get("user"),this.friendRequests=this.user.get("friendRequests"),this.announcements=this.model.get("announcements"),this.listenTo(this.user,"change:signedIn",this.onSignedInChange),this.listenTo(this.friendRequests,{"reset":this.onFriendRequestsChange,"add":this.onFriendRequestsChange,"remove":this.onFriendRequestsChange}),this.listenTo(this.announcements,{"reset":this.onAnnouncementsChange,"change:isUnread":this.onAnnouncementsChange}),this.announcements.populate({"reset":!0})
},"serializeData":function(){var e=this.friendRequests.length,t=this.getUnreadAnnouncementsCount();return{"signedIn":this.user.get("signedIn"),"username":this.user.get("username"),"friendRequestsCount":e,"unreadAnnouncementsCount":t,"totalCount":e+t,"accountUrl":this.user.server.get("accountUrl"),"appsUrl":this.user.server.get("appsUrl"),"helpUrl":this.user.server.get("helpUrl"),"defaultTarget":a.get("defaultTarget")}},"getUnreadAnnouncementsCount":function(){var e=this.announcements.where({"isUnread":!0});
return this.user.hasPlexPass()&&(e=t.reject(e,function(e){return"PlexPass"===e.get("promo")})),e.length},"updateTotalBadge":function(e){var t=e.friendRequestsCount||this.friendRequests.length,n=e.unreadAnnouncementsCount||this.getUnreadAnnouncementsCount(),i=t+n;this.ui.totalBadge.toggleClass("hidden",!i),this.ui.totalBadge.text(i)},"onSignedInChange":function(e,t){this.ui.username.text(e.get("username")),this.ui.dropdownMenu.toggleClass("signed-in",t)},"onFriendRequestsChange":function(){var e=this.friendRequests.length;
this.ui.friendRequestsBadge.toggleClass("hidden",!e),this.ui.friendRequestsBadge.text(e),this.updateTotalBadge({"friendRequestsCount":e})},"onAnnouncementsChange":function(){var e=this.getUnreadAnnouncementsCount();this.ui.announcementsBadge.toggleClass("hidden",!e),this.ui.announcementsBadge.text(e),this.updateTotalBadge({"unreadAnnouncementsCount":e})},"onFriendsClick":function(e){e.preventDefault();var t=this.friendRequests.length?"requests":"all";i.trigger("navigate","friends",{"subset":t})},"onSignInClick":function(e){e.preventDefault(),i.trigger("navigate","login",{"silent":!0})
},"onSignOutClick":function(e){e.preventDefault(),s.execute("signOut")}});return r}),define("plex/desktop/views/navbar/NavBarView",["hb!templates/desktop/navbar/NavBarView.tpl","underscore","marionette","plex/base/utils/Dispatcher","plex/base/adapters/LocalizerAdapter","plex/base/commands/Commands","plex/desktop/views/navbar/NavBarSearchView","plex/desktop/views/navbar/NavDropdown","plex/desktop/views/dropdowns/PrimaryPlayerDropdown"],function(e,t,n,i,s,a,r,o,l){var c=n.Layout.extend({"className":"nav-bar","template":e,"sectionSearchDelay":500,"ui":{"backBtn":".back-btn","plexPassBtn":".plex-pass-btn","installUpdatesBtn":".install-updates-btn","activityBtn":".activity-btn","activityBadge":".activity-badge"},"regions":{"search":".nav-bar-search-container","navDropdown":".nav-bar-right","playerDropdown":".nav-bar-right"},"events":{"click .back-btn":"onBackClick","click .install-updates-btn":"onInstallUpdatesClick","click .activity-btn":"onActivityClick"},"modelEvents":{"change:history":"onHistoryChange","change:updateStatus":"onUpdateStatusChange","change:primaryServer":"onPrimaryServerChange"},"onlyAfterRender":["focusSearch","onSignedInChange","onHistoryChange","onPrimaryServerChange","onNowPlayingChange"],"initialize":function(){this.listenTo(this.model.get("user"),"change:signedIn",this.onSignedInChange),this.listenTo(i,"change:language",this.render),this.setupServerListeners()
},"setupServerListeners":function(){if(this.primaryServer&&(this.stopListening(this.primaryServer),this.stopListening(this.primaryServer.get("sessions"))),this.primaryServer=this.model.get("primaryServer"),this.primaryServer){var e=this.primaryServer.get("sessions");this.listenTo(this.primaryServer,"change:shared",this.onPrimaryServerSharedChange),this.listenTo(e,{"reset":this.onNowPlayingChange,"add":this.onNowPlayingChange,"remove":this.onNowPlayingChange})}},"serializeData":function(){var e=this.model.get("user"),t=this.primaryServer&&this.primaryServer.get("sessions");
return{"plexPassUrl":e.server.get("plexPassUrl"),"hasHistory":this.hasHistory(),"canGoPremium":this.canGoPremium(),"canUpdate":this.canUpdate(),"showActivity":!(!this.primaryServer||this.primaryServer.get("shared")),"activityCount":t&&t.length}},"hasHistory":function(){var e=this.model.get("history");return e.length>1},"canGoPremium":function(){var e=this.model.get("user");return e.get("signedIn")&&!e.hasPlexPass()},"canUpdate":function(){var e=this.model.get("updateStatus");return"download"===e||"reload"===e
},"onRender":function(){this.search.append(new r({"model":this.model})),this.playerDropdown.append(new l({"showNowPlaying":!0})),this.navDropdown.append(new o({"model":this.model})),this.$el.tooltip({"selector":".nav > li > a","container":"body","placement":"bottom"})},"onSignedInChange":function(){this.ui.plexPassBtn.toggleClass("hidden",!this.canGoPremium())},"onHistoryChange":function(){this.ui.backBtn.toggleClass("hidden",!this.hasHistory())},"onUpdateStatusChange":function(){this.ui.installUpdatesBtn.toggleClass("hidden",!this.canUpdate()),this.ui.installUpdatesBtn.parent("li").toggleClass("active",this.canUpdate())
},"onPrimaryServerChange":function(e,t){this.setupServerListeners();var n=t&&!t.get("shared");this.ui.activityBtn.toggleClass("hidden",!n)},"onPrimaryServerSharedChange":function(e,t){this.ui.activityBtn.toggleClass("hidden",!!t)},"onNowPlayingChange":function(){var e=this.primaryServer.get("sessions"),t=e.length;this.ui.activityBtn.parent("li").toggleClass("active",!!t),this.ui.activityBadge.toggleClass("hidden",!t),this.ui.activityBadge.text(t)},"onBackClick":function(e){e.preventDefault(),i.trigger("navigate:back")
},"onInstallUpdatesClick":function(e){e.preventDefault(),"download"===this.model.get("updateStatus")?a.execute("installBundleUpdates"):window.location.reload(!0)},"onActivityClick":function(e){e.preventDefault();var t=this.primaryServer&&this.primaryServer.get("sessions");t&&t.length?i.trigger("navigate","nowPlaying"):i.trigger("navigate","activity")}});return c}),define("plex/desktop/views/DesktopAppView",["hb!templates/desktop/DesktopAppView.tpl","underscore","jquery","marionette","plex/base/utils/Dispatcher","plex/base/commands/Commands","plex/base/models/AppModel","plex/desktop/views/LoadingView","plex/desktop/views/BackgroundView","plex/desktop/views/alerts/Alert","plex/desktop/views/alerts/StatusAlert","plex/desktop/views/players/VideoPlayerView","plex/desktop/views/players/MusicPlayerView","plex/desktop/views/players/PhotoPlayerView","plex/desktop/views/navbar/NavBarView"],function(e,t,n,i,s,a,r,o,l,c,d,u,h,p,f){var m=i.Layout.extend({"el":"#plex","template":e,"sidebarDelay":200,"resizeDelay":200,"scrollDelay":100,"listeningToResize":!1,"listeningToScroll":!1,"ui":{"content":"#content","shadow":".scroll-shadow"},"regions":{"content":"#content","background":".background-container","navbar":".nav-bar","sidebar":".side-bar","actionbar":".action-bar","breadcrumbbar":".breadcrumb-bar","filterbar":".filter-bar-fixed","alphabar":".alpha-bar","status":".alert-status","video":".video-player","music":".music-player","photo":".photo-player"},"initialize":function(){t.bindAll(this,"triggerResizeEvent","triggerScrollEvent","onResize","onScroll"),this.modals=[],this.listenTo(r,"change:authorized",this.onAuthorizedChange),this.listenTo(r,"change:multiserver",this.onMultiserverChange),this.listenTo(s,"show:loading",this.onShowLoading),this.listenTo(s,"show:view",this.onShowView),this.listenTo(s,"show:modal",this.onShowModal),this.listenTo(s,"hide:modal",this.onHideModal),this.listenTo(s,"show:alert",this.onShowAlert),this.listenTo(s,"show:video",this.onShowVideo),this.listenTo(s,"hide:video",this.onHideVideo),this.listenTo(s,"show:music",this.onShowMusic),this.listenTo(s,"hide:music",this.onHideMusic),this.listenTo(s,"show:photo",this.onShowPhoto),this.listenTo(s,"hide:photo",this.onHidePhoto),this.listenTo(s,"show:sidebar",this.onShowSideBar),this.listenTo(s,"show:sidebar",this.onSidebarChange),this.listenTo(s,"hide:sidebar",this.onHideSideBar),this.listenTo(s,"hide:sidebar",this.onSidebarChange),this.listenTo(s,"show:actionbar",this.onShowActionBar),this.listenTo(s,"hide:actionbar",this.onHideActionBar),this.listenTo(s,"show:breadcrumbbar",this.onShowBreadcrumbBar),this.listenTo(s,"hide:breadcrumbbar",this.onHideBreadcrumbBar),this.listenTo(s,"show:filterbar",this.onShowFilterBar),this.listenTo(s,"hide:filterbar",this.onHideFilterBar),this.listenTo(s,"show:alphabar",this.onShowAlphaBar),this.listenTo(s,"hide:alphabar",this.onHideAlphaBar),this.listenTo(s,"start:resizeListener",this.onStartResizeListener),this.listenTo(s,"stop:resizeListener",this.onStopResizeListener),this.listenTo(s,"start:scrollListener",this.onStartScrollListener),this.listenTo(s,"stop:scrollListener",this.onStopScrollListener),this.listenTo(s,"update:scrollPosition",this.onUpdateScrollPosition)
},"showBar":function(e,t,n){this.$el.addClass(e),n&&t.append(n,this.$el)},"hideBar":function(e,t,n){n||(n={}),this.$el.removeClass(e),n.preserve||t.close()},"hideBackground":function(){if(this.currentView&&this.currentView.model){var e=this.currentView.model;s.trigger("hide:background",e),a.execute("playSound",{"key":e.get("key"),"stop":!0,"background":!0})}},"triggerResizeEvent":function(){s.trigger("resize",this.ui.content)},"triggerScrollEvent":function(){s.trigger("scroll",this.ui.content,this.ui.content.scrollTop())
},"onRender":function(){this.background.prepend(new l,this.$el),this.status.append(new d,this.$el)},"onAuthorizedChange":function(e,t){this.$el.toggleClass("show-nav-bar",t),t?this.navbar.prepend(new f({"model":e}),this.$el):this.navbar.close()},"onMultiserverChange":function(e,t){this.$el.toggleClass("show-multiserver",t)},"onShowLoading":function(){this.content.show(new o)},"onShowView":function(e){n(".tooltip").remove(),this.hideBackground(),s.trigger("purge:cache"),this.currentView=e,this.content.show(e),this.ui.content.scrollTop(0)
},"onShowModal":function(e){this.modals.push(e),n("body").append(e.render().el)},"onHideModal":function(e){var n=t.indexOf(this.modals,e);n>-1&&this.modals.splice(n,1)[0].close()},"onShowAlert":function(e){var t=new c(e);this.$el.append(t.render().el),t.triggerMethod("after:render",t)},"onShowVideo":function(e){n(".tooltip").remove(),this.video.append(new u(e),this.$el)},"onHideVideo":function(){this.video.close()},"onShowMusic":function(e){var t=this.music.currentView;t&&t.collection===e.collection||(this.music.append(new h(e),this.$el),this.$el.addClass("show-music-player"))
},"onHideMusic":function(){this.music.close(),this.$el.removeClass("show-music-player")},"onShowPhoto":function(e){n(".tooltip").remove(),this.photo.append(new p(e),this.$el)},"onHidePhoto":function(){this.photo.close()},"onShowSideBar":function(e){this.showBar("show-side-bar",this.sidebar,e)},"onHideSideBar":function(e){this.hideBar("show-side-bar",this.sidebar,e)},"onSidebarChange":function(){this.listeningToResize&&t.delay(t.bind(this.triggerResizeEvent,this),this.sidebarDelay)},"onShowActionBar":function(e){this.showBar("show-action-bar",this.actionbar,e)
},"onHideActionBar":function(e){this.hideBar("show-action-bar",this.actionbar,e)},"onShowBreadcrumbBar":function(e){this.showBar("show-breadcrumb-bar",this.breadcrumbbar,e)},"onHideBreadcrumbBar":function(e){this.hideBar("show-breadcrumb-bar",this.breadcrumbbar,e)},"onShowFilterBar":function(e){this.showBar("show-filter-bar",this.filterbar,e)},"onHideFilterBar":function(e){this.hideBar("show-filter-bar",this.filterbar,e)},"onShowAlphaBar":function(e){this.showBar("show-alpha-bar",this.alphabar,e)
},"onHideAlphaBar":function(e){this.hideBar("show-alpha-bar",this.alphabar,e)},"onStartResizeListener":function(){this.listeningToResize=!0,n(window).on("resize",this.onResize)},"onStopResizeListener":function(){this.listeningToResize=!1,n(window).off("resize",this.onResize)},"onResize":function(){this.resizeTimeout=clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(this.triggerResizeEvent,this.resizeDelay)},"onStartScrollListener":function(){this.listeningToScroll=!0,this.ui.content.on("scroll",this.onScroll),this.triggerScrollEvent()
},"onStopScrollListener":function(){this.listeningToScroll=!1,this.ui.content.off("scroll",this.onScroll),this.ui.shadow.addClass("transition-out"),this.scrollTimeout=clearTimeout(this.scrollTimeout)},"onScroll":function(){var e=this.ui.content.scrollTop();this.ui.shadow.toggleClass("transition-out",10>e),this.scrollTimeout=clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(this.triggerScrollEvent,this.scrollDelay)},"onUpdateScrollPosition":function(e){this.ui.content[0].scrollTop=e}});
return m}),define("hb!templates/desktop/dashboard/DashboardView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{},'<div class="priority-1-container"></div>\n<div class="priority-2-container"></div>\n<div class="priority-3-container"></div>\n<div class="priority-4-container"></div>\n<div class="priority-5-container"></div>\n'})}),define("hb!templates/desktop/sidebar/DashboardSideBarView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{},'<div class="dashboard-empty-servers-container"></div>\n<div class="dashboard-servers-container"></div>\n'
})}),define("hb!templates/desktop/dashboard/DashboardEmptyServersView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s,a="";return a+='\n  <p class="text-muted">',s={"hash":{},"data":t},a+=d((i=n.t||e&&e.t,i?i.call(e,"You do not have permission to access this server.",s):c.call(e,"t","You do not have permission to access this server.",s)))+"</p>\n"}function r(e,t){var i,s,a="";return a+='\n  <p class="text-muted">',s={"hash":{},"data":t},a+=d((i=n.t||e&&e.t,i?i.call(e,"You don't have any media servers yet. {1}Download and install{2} one and it'll appear here.","<a href='https://plex.tv/downloads' target='_blank'>","</a>",s):c.call(e,"t","You don't have any media servers yet. {1}Download and install{2} one and it'll appear here.","<a href='https://plex.tv/downloads' target='_blank'>","</a>",s)))+"</p>\n"
}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var o,l="",c=n.helperMissing,d=this.escapeExpression,u=this;return l+='<i class="plex-image server-sm"></i>\n\n',o=n["if"].call(t,t&&t.bundled,{"hash":{},"inverse":u.program(3,r,s),"fn":u.program(1,a,s),"data":s}),(o||0===o)&&(l+=o),l+="\n"})}),define("plex/desktop/views/dashboard/DashboardEmptyServersView",["hb!templates/desktop/dashboard/DashboardEmptyServersView.tpl","marionette","plex/base/models/ConfigModel"],function(e,t,n){var i=t.ItemView.extend({"className":"dashboard-empty-servers-message","template":e,"serializeData":function(){return{"bundled":n.get("bundled")}
}});return i}),define("hb!templates/desktop/lists/dashboard/DashboardServerListItem",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s,a,l="";return l+='\n  <div class="side-bar-actions pull-right">\n    <a class="add-library-btn btn-gray" href="#"><i class="glyphicon plus"></i></a>\n\n    <span id="'+x((i=e&&e.server,i=null==i||i===!1?i:i.machineIdentifier,typeof i===k?i.apply(e):i))+'-dropdown" class="dropdown">\n      <a class="btn-gray dropdown-toggle" href="#'+x((i=e&&e.server,i=null==i||i===!1?i:i.machineIdentifier,typeof i===k?i.apply(e):i))+'-dropdown" data-toggle="dropdown"><i class="glyphicon cogwheel"></i> <i class="caret-icon caret-icon-sm"></i></a>\n\n      <ul class="dropdown-menu pull-right">\n        <li><a class="update-btn" href="#">',s=n["if"].call(e,e&&e.hasRefreshingSection,{"hash":{},"inverse":S.program(4,o,t),"fn":S.program(2,r,t),"data":t}),(s||0===s)&&(l+=s),l+='</a></li>\n        <li><a class="optimize-btn" href="#">',a={"hash":{},"data":t},l+=x((i=n.t||e&&e.t,i?i.call(e,"Optimize...",a):w.call(e,"t","Optimize...",a)))+'</a></li>\n        <li><a class="clean-bundles-btn" href="#">',a={"hash":{},"data":t},l+=x((i=n.t||e&&e.t,i?i.call(e,"Clean Bundles...",a):w.call(e,"t","Clean Bundles...",a)))+'</a></li>\n        <li><a class="empty-trash-btn" href="#">',a={"hash":{},"data":t},l+=x((i=n.t||e&&e.t,i?i.call(e,"Empty Trash...",a):w.call(e,"t","Empty Trash...",a)))+"</a></li>\n      </ul>\n    </span>\n  </div>\n"
}function r(e,t){var i,s;return s={"hash":{},"data":t},x((i=n.t||e&&e.t,i?i.call(e,"Cancel Update",s):w.call(e,"t","Cancel Update",s)))}function o(e,t){var i,s;return s={"hash":{},"data":t},x((i=n.t||e&&e.t,i?i.call(e,"Update Libraries",s):w.call(e,"t","Update Libraries",s)))}function l(){return"selected"}function c(){return"disabled"}function d(){return"show-actions"}function u(){return'<i class="cloud-sync-icon glyphicon cloud"></i>'}function h(e,t){var i,s,a="";return a+='\n  <span class="mixed-content-error">',s={"hash":{},"data":t},a+=x((i=n.t||e&&e.t,i?i.call(e,"We're sorry, but we can't reach this server.",s):w.call(e,"t","We're sorry, but we can't reach this server.",s)))+"</span>\n"
}function p(e,t){var i;return i=n["if"].call(e,e&&e.showMixedContentMessage,{"hash":{},"inverse":S.noop,"fn":S.program(17,f,t),"data":t}),i||0===i?i:""}function f(e,t){var i,s,a="";return a+='\n  <span class="mixed-content-error">',s={"hash":{},"data":t},a+=x((i=n.t||e&&e.t,i?i.call(e,"We're sorry, but we can't reach this server. {1}Click here{2} to connect to it directly.","<a class='mixed-content-btn' href='#' target='_blank'>","</a>",s):w.call(e,"t","We're sorry, but we can't reach this server. {1}Click here{2} to connect to it directly.","<a class='mixed-content-btn' href='#' target='_blank'>","</a>",s)))+"</span>\n"
}function m(){return"hidden"}function g(e,t){var i,s,a="";return a+='\n    <li>\n      <a class="btn-gray" href="#!/server/',s={"hash":{},"data":t},a+=x((i=n.encodeUrl||e&&e.encodeUrl,i?i.call(e,(i=e&&e.server,null==i||i===!1?i:i.machineIdentifier),s):w.call(e,"encodeUrl",(i=e&&e.server,null==i||i===!1?i:i.machineIdentifier),s)))+'/channels">\n        <i class="section-icon glyphicon show-big-thumbnails"></i> ',s={"hash":{},"data":t},a+=x((i=n.t||e&&e.t,i?i.call(e,"Channels",s):w.call(e,"t","Channels",s)))+"\n      </a>\n    </li>\n  "
}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var v,y,b="",w=n.helperMissing,x=this.escapeExpression,k="function",S=this;return v=n["if"].call(t,t&&t.showActions,{"hash":{},"inverse":S.noop,"fn":S.program(1,a,s),"data":s}),(v||0===v)&&(b+=v),b+='\n\n<h5>\n  <a class="select-server-btn ',v=n["if"].call(t,t&&t.selected,{"hash":{},"inverse":S.noop,"fn":S.program(6,l,s),"data":s}),(v||0===v)&&(b+=v),b+=" ",v=n.unless.call(t,t&&t.canBePrimary,{"hash":{},"inverse":S.noop,"fn":S.program(8,c,s),"data":s}),(v||0===v)&&(b+=v),b+='" href="#">\n    <span class="server-title ',v=n["if"].call(t,t&&t.showActions,{"hash":{},"inverse":S.noop,"fn":S.program(10,d,s),"data":s}),(v||0===v)&&(b+=v),b+='">'+x((v=t&&t.server,v=null==v||v===!1?v:v.friendlyName,typeof v===k?v.apply(t):v))+'</span>\n    <span class="selected-server-icon"></span>\n  </a>\n  ',y=n["if"].call(t,(v=t&&t.server,null==v||v===!1?v:v.isCloudSync),{"hash":{},"inverse":S.noop,"fn":S.program(12,u,s),"data":s}),(y||0===y)&&(b+=y),b+="\n</h5>\n\n",y=n["if"].call(t,t&&t.showUnavailableMessage,{"hash":{},"inverse":S.program(16,p,s),"fn":S.program(14,h,s),"data":s}),(y||0===y)&&(b+=y),b+='\n\n<ul class="list side-bar-list dashboard-section-list ',y=n.unless.call(t,(v=t&&t.server,null==v||v===!1?v:v.connected),{"hash":{},"inverse":S.noop,"fn":S.program(19,m,s),"data":s}),(y||0===y)&&(b+=y),b+='">\n  ',y=n["if"].call(t,t&&t.showChannels,{"hash":{},"inverse":S.noop,"fn":S.program(21,g,s),"data":s}),(y||0===y)&&(b+=y),b+="\n</ul>\n"
})}),define("hb!templates/desktop/lists/dashboard/DashboardSectionListItem",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(){return"active"}function r(){return'\n    <div class="section-actions pull-right">\n      <button class="edit-section-btn btn-gray" href="#"><i class="glyphicon pencil"></i></button>\n    </div>\n  '}function o(){return"show-actions"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var l,c,d,u="",h=this,p=n.helperMissing,f=this.escapeExpression,m="function";
return u+='<a class="btn-gray btn-loading ',l=n["if"].call(t,t&&t.refreshing,{"hash":{},"inverse":h.noop,"fn":h.program(1,a,s),"data":s}),(l||0===l)&&(u+=l),u+='" href="#!/server/',d={"hash":{},"data":s},u+=f((l=n.encodeUrl||t&&t.encodeUrl,l?l.call(t,t&&t.serverID,d):p.call(t,"encodeUrl",t&&t.serverID,d)))+"/section/",d={"hash":{},"data":s},u+=f((l=n.encodeUrl||t&&t.encodeUrl,l?l.call(t,(l=t&&t.section,null==l||l===!1?l:l.key),d):p.call(t,"encodeUrl",(l=t&&t.section,null==l||l===!1?l:l.key),d)))+'">\n  ',c=n["if"].call(t,t&&t.showActions,{"hash":{},"inverse":h.noop,"fn":h.program(3,r,s),"data":s}),(c||0===c)&&(u+=c),u+='\n  <div class="loading loading-xs"></div>\n  <i class="btn-label section-icon glyphicon ',(c=n.icon)?c=c.call(t,{"hash":{},"data":s}):(c=t&&t.icon,c=typeof c===m?c.call(t,{"hash":{},"data":s}):c),u+=f(c)+'"></i> <span class="section-title ',c=n["if"].call(t,t&&t.showActions,{"hash":{},"inverse":h.noop,"fn":h.program(5,o,s),"data":s}),(c||0===c)&&(u+=c),u+='"></span>\n</a>\n'
})}),define("hb!templates/desktop/modals/EditSectionModal",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s,a="";return a+='\n          <i class="modal-icon glyphicon plus"></i> ',s={"hash":{},"data":t},a+=y((i=n.t||e&&e.t,i?i.call(e,"Add Library",s):v.call(e,"t","Add Library",s)))+"\n        "}function r(e,t){var i,s,a="";return a+='\n          <i class="modal-icon glyphicon pencil"></i> ',s={"hash":{},"data":t},a+=y((i=n.t||e&&e.t,i?i.call(e,"Edit Library",s):v.call(e,"t","Edit Library",s)))+"\n        "
}function o(){return" selected"}function l(){return"disabled"}function c(e,t){var i,s,a="";return a+='\n        <button type="button" class="delete-btn btn btn-danger pull-left" data-dismiss="modal">',s={"hash":{},"data":t},a+=y((i=n.t||e&&e.t,i?i.call(e,"Delete Library",s):v.call(e,"t","Delete Library",s)))+"</button>\n      "}function d(){return"hidden"}function u(e,t){var i,s;return s={"hash":{},"data":t},y((i=n.t||e&&e.t,i?i.call(e,"Add Library",s):v.call(e,"t","Add Library",s)))}function h(e,t){var i,s;
return s={"hash":{},"data":t},y((i=n.t||e&&e.t,i?i.call(e,"Save Changes",s):v.call(e,"t","Save Changes",s)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var p,f,m,g="",v=n.helperMissing,y=this.escapeExpression,b=this;return g+='<div class="modal-dialog">\n  <div class="modal-content">\n    <div class="modal-header">\n      <button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button>\n      <h4 class="modal-title">\n        ',p=n["if"].call(t,t&&t.add,{"hash":{},"inverse":b.program(3,r,s),"fn":b.program(1,a,s),"data":s}),(p||0===p)&&(g+=p),g+='\n      </h4>\n    </div>\n\n    <div class="modal-body modal-body-scroll modal-body-with-panes">\n      <div class="modal-nav-pane">\n        <ul class="list modal-nav-list">\n          <li><a class="btn-gray change-pane-btn general-btn',m={"hash":{},"inverse":b.noop,"fn":b.program(5,o,s),"data":s},p=n.if_eq||t&&t.if_eq,f=p?p.call(t,t&&t.selectedPane,"general",m):v.call(t,"if_eq",t&&t.selectedPane,"general",m),(f||0===f)&&(g+=f),g+='" data-pane="general" href="#">\n            <i class="modal-nav-icon glyphicon align-center"></i>\n            ',m={"hash":{},"data":s},g+=y((p=n.t||t&&t.t,p?p.call(t,"General",m):v.call(t,"t","General",m)))+'\n          </a></li>\n          <li><a class="btn-gray change-pane-btn folders-btn',m={"hash":{},"inverse":b.noop,"fn":b.program(5,o,s),"data":s},p=n.if_eq||t&&t.if_eq,f=p?p.call(t,t&&t.selectedPane,"folders",m):v.call(t,"if_eq",t&&t.selectedPane,"folders",m),(f||0===f)&&(g+=f),g+=" ",f=n["if"].call(t,t&&t.add,{"hash":{},"inverse":b.noop,"fn":b.program(7,l,s),"data":s}),(f||0===f)&&(g+=f),g+='"  data-pane="folders" href="#">\n            <i class="modal-nav-icon glyphicon folder-open"></i>\n            ',m={"hash":{},"data":s},g+=y((p=n.t||t&&t.t,p?p.call(t,"Folders",m):v.call(t,"t","Folders",m)))+'\n          </a></li>\n          <li><a class="btn-gray change-pane-btn advanced-btn',m={"hash":{},"inverse":b.noop,"fn":b.program(5,o,s),"data":s},p=n.if_eq||t&&t.if_eq,f=p?p.call(t,t&&t.selectedPane,"advanced",m):v.call(t,"if_eq",t&&t.selectedPane,"advanced",m),(f||0===f)&&(g+=f),g+=" ",f=n["if"].call(t,t&&t.add,{"hash":{},"inverse":b.noop,"fn":b.program(7,l,s),"data":s}),(f||0===f)&&(g+=f),g+='" data-pane="advanced" href="#">\n            <i class="modal-nav-icon glyphicon cogwheel"></i>\n            ',m={"hash":{},"data":s},g+=y((p=n.t||t&&t.t,p?p.call(t,"Advanced",m):v.call(t,"t","Advanced",m)))+'\n          </a></li>\n        </ul>\n      </div>\n\n      <div class="modal-body-pane minimal-scroll">\n      </div>\n    </div>\n\n    <div class="modal-footer">\n      ',f=n.unless.call(t,t&&t.add,{"hash":{},"inverse":b.noop,"fn":b.program(9,c,s),"data":s}),(f||0===f)&&(g+=f),g+='\n\n      <span class="form-message"></span>\n\n      <button type="button" class="cancel-btn btn btn-default" data-dismiss="modal">',m={"hash":{},"data":s},g+=y((p=n.t||t&&t.t,p?p.call(t,"Cancel",m):v.call(t,"t","Cancel",m)))+'</button>\n      <button type="button" class="next-btn btn btn-primary disabled ',f=n.unless.call(t,t&&t.add,{"hash":{},"inverse":b.noop,"fn":b.program(11,d,s),"data":s}),(f||0===f)&&(g+=f),g+='">',m={"hash":{},"data":s},g+=y((p=n.t||t&&t.t,p?p.call(t,"Next",m):v.call(t,"t","Next",m)))+'</button>\n      <button type="button" class="save-btn btn btn-primary btn-loading ',f=n["if"].call(t,t&&t.add,{"hash":{},"inverse":b.noop,"fn":b.program(11,d,s),"data":s}),(f||0===f)&&(g+=f),g+='">\n        <div class="loading loading-sm"></div>\n        <span class="btn-label">',f=n["if"].call(t,t&&t.add,{"hash":{},"inverse":b.program(15,h,s),"fn":b.program(13,u,s),"data":s}),(f||0===f)&&(g+=f),g+="</span>\n      </button>\n    </div>\n\n  </div>\n</div>\n"
})}),define("plex/base/utils/types/SectionTypes",["underscore","plex/base/utils/BaseClass"],function(e,t){var n=[{"key":"movies","typeID":"1","typeString":"movie","label":"Movies","defaultAgent":"com.plexapp.agents.imdb","defaultLanguage":"en","defaultScanner":"Plex Movie Scanner"},{"key":"tv","typeID":"2","typeString":"show","label":"TV Shows","defaultAgent":"com.plexapp.agents.thetvdb","defaultLanguage":"en","defaultScanner":"Plex Series Scanner"},{"key":"music","typeID":"8","typeString":"artist","label":"Music","defaultAgent":"com.plexapp.agents.lastfm","defaultLanguage":"en","defaultScanner":"Plex Music Scanner"},{"key":"photos","typeID":"13","typeString":"photo","label":"Photos","defaultAgent":"com.plexapp.agents.none","defaultLanguage":"xn","defaultScanner":"Plex Photo Scanner"},{"key":"videos","typeID":"1","typeString":"movie","label":"Home Videos","defaultAgent":"com.plexapp.agents.none","defaultLanguage":"xn","defaultScanner":"Plex Video Files Scanner"}],i=t.extend({"initialize":function(){this.byKey=e.reduce(n,function(e,t){return e[t.key]=t,e
},{}),this.byType=e.reduceRight(n,function(e,t){return e[t.typeString]=t,e},{})},"getSectionTypes":function(){return n},"getSectionType":function(e){return this.byKey[e]},"getSectionTypeByString":function(e){return this.byType[e]}});return new i}),define("plex/base/models/library/AgentModel",["underscore","jquery","plex/base/utils/Parser","plex/base/models/BaseModel"],function(e,t,n,i){var s=i.extend({"idAttribute":"identifier","whitelistedAttrs":["identifier","name","enabled","hasPrefs","language"],"convert":function(t){var i=e.isObject(t)?t:n.parseXML(t);
return n.parseBoolean(i,["enabled","hasPrefs"]),n.parseArray(i,["Language"]),i},"parse":function(t){var n=this.convert(t);return n.language=e.pluck(n.Language,"code"),n=e.pick(n,this.whitelistedAttrs)},"fetchAttribution":function(){var n=this.server.getXHROptions("/system/agents/attribution?identifier="+this.id),i=t.ajax(n);return i.done(e.bind(function(e){this.set("attribution",e)},this)),i}});return s}),define("plex/base/models/library/AgentCollection",["underscore","plex/base/models/BaseCollection","plex/base/models/library/AgentModel"],function(e,t,n){var i=t.extend({"model":n,"url":function(){return this.primaryAgent?"system/agents/contributors?mediaType="+this.sectionType+"&primaryAgent="+this.primaryAgent:this.relatedAgent?"system/agents/"+this.relatedAgent+"/config/"+this.sectionType:this.sectionType?"system/agents?mediaType="+this.sectionType:"system/agents"
},"initialize":function(e,t){this.primaryAgent=t.primaryAgent,this.relatedAgent=t.relatedAgent,this.sectionType=t.sectionType},"parse":function(e){return this.convert(e,"Agent")}});return i}),define("plex/base/models/library/ScannerModel",["plex/base/models/BaseModel"],function(e){var t=e.extend({"idAttribute":"name"});return t}),define("plex/base/models/library/ScannerCollection",["underscore","plex/base/models/BaseCollection","plex/base/models/library/ScannerModel"],function(e,t,n){var i=t.extend({"model":n,"url":function(){return"system/scanners/"+this.sectionType
},"initialize":function(e,t){this.sectionType=t.sectionType},"parse":function(e){return this.convert(e,"Scanner")}});return i}),define("hb!templates/desktop/editsection/EditSectionAdvancedView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s,a="";return a+="\n        ",s={"hash":{"idSuffix":"_c"},"data":t},a+=u((i=n.partial||e&&e.partial,i?i.call(e,"setting",s):d.call(e,"partial","setting",s)))+"\n      "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};
var r,o,l,c="",d=n.helperMissing,u=this.escapeExpression,h="function",p=this;return c+='<form class="edit-section-advanced-form settings-container">\n  <div class="language-group">\n    <input type="hidden" name="language" value="'+u((r=t&&t.section,r=null==r||r===!1?r:r.language,typeof r===h?r.apply(t):r))+'">\n  </div>\n\n  <div class="row">\n    <div class="col-md-12">\n      <div class="form-group scanner-group">\n        <label for="edit-section-scanner" class="control-label">\n          ',l={"hash":{},"data":s},c+=u((r=n.t||t&&t.t,r?r.call(t,"Scanner",l):d.call(t,"t","Scanner",l)))+'\n          <span class="control-error">',l={"hash":{},"data":s},c+=u((r=n.t||t&&t.t,r?r.call(t,"A scanner is required.",l):d.call(t,"t","A scanner is required.",l)))+'</span>\n        </label>\n        <select id="edit-section-scanner" name="scanner"></select>\n      </div>\n    </div>\n  </div>\n\n  <div class="row">\n    <div class="col-md-12">\n      <div class="form-group agent-group">\n        <label for="edit-section-agent" class="control-label">\n          ',l={"hash":{},"data":s},c+=u((r=n.t||t&&t.t,r?r.call(t,"Agent",l):d.call(t,"t","Agent",l)))+'\n          <span class="control-error">',l={"hash":{},"data":s},c+=u((r=n.t||t&&t.t,r?r.call(t,"An agent is required.",l):d.call(t,"t","An agent is required.",l)))+'</span>\n        </label>\n        <select id="edit-section-agent" name="agent"></select>\n      </div>\n    </div>\n  </div>\n\n  <div class="section-settings-container row">\n    <div class="col-md-12">\n      ',o=n.each.call(t,t&&t.settings,{"hash":{},"inverse":p.noop,"fn":p.program(1,a,s),"data":s}),(o||0===o)&&(c+=o),c+="\n    </div>\n  <div>\n</form>\n"
})}),define("plex/base/utils/LanguageUtil",["plex/base/utils/BaseClass"],function(e){var t=e.extend({"languages":{"aa":"Afaraf","af":"Afrikaans","ab":"Abkhazian","ak":"Akan","sq":"Shqip","am":"Amharic","ar":"\u0627\u0644\u0639\u0631\u0628\u064a\u0629","an":"Aragon\xe9s","hy":"\u0540\u0561\u0575\u0565\u0580\u0565\u0576","as":"Assamese","av":"\u0430\u0432\u0430\u0440 \u043c\u0430\u0446\u04c0","ae":"avesta","ay":"aymar aru","az":"az\u0259rbaycan dili","ba":"\u0431\u0430\u0448\u04a1\u043e\u0440\u0442 \u0442\u0435\u043b\u0435","bm":"bamanankan","eu":"euskara","be":"\u0411\u0435\u043b\u0430\u0440\u0443\u0441\u043a\u0430\u044f","bn":"Bengali","bh":"\u092d\u094b\u091c\u092a\u0941\u0930\u0940","bi":"Bislama","bs":"bosanski jezik","br":"brezhoneg","bg":"\u0431\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438 \u0435\u0437\u0438\u043a","my":"Burmese","ca":"Catal\xe0","ch":"Chamoru","ce":"\u043d\u043e\u0445\u0447\u0438\u0439\u043d \u043c\u043e\u0442\u0442","cu":"\u0469\u0437\u044b\u043a\u044a \u0441\u043b\u043e\u0432\u0463\u043d\u044c\u0441\u043a\u044a","cv":"\u0447\u04d1\u0432\u0430\u0448 \u0447\u04d7\u043b\u0445\u0438","kw":"Kernewek","co":"corsu","cr":"\u14c0\u1426\u1403\u152d\u140d\u140f\u1423","dv":"Divehi","dz":"\u0f62\u0fab\u0f7c\u0f44\u0f0b\u0f41","en":"English","en-GB":"English (UK)","eo":"Esperanto","et":"eesti","ee":"E\u028begbe","fo":"f\xf8royskt","fj":"vosa Vakaviti","fy":"Frysk","ff":"Fulfulde","ka":"\u10e5\u10d0\u10e0\u10d7\u10e3\u10da\u10d8","gd":"G\xe0idhlig","ga":"Gaeilge","gl":"Galego","gv":"Gaelg","gn":"Ava\xf1e&apos;\u1ebd","gu":"\u0a97\u0ac1\u0a9c\u0ab0\u0abe\u0aa4\u0ac0","ht":"Krey\xf2l ayisyen","ha":"\u0647\u064e\u0648\u064f\u0633\u064e","hz":"Otjiherero","hi":"\u0939\u093f\u0928\u094d\u0926\u0940","ho":"Hiri Motu","hr":"hrvatski","ig":"As\u1ee5s\u1ee5 Igbo","is":"\xcdslenska","io":"Ido","ii":"\ua188\ua320\ua4bf Nuosuhxop","iu":"\u1403\u14c4\u1483\u144e\u1450\u1466","ie":"Interlingue","ia":"Interlingua","id":"Bahasa Indonesia","ik":"I\xf1upiaq","jv":"basa Jawa","kl":"kalaallisut","kn":"\u0c95\u0ca8\u0ccd\u0ca8\u0ca1","ks":"\u0915\u0936\u094d\u092e\u0940\u0930\u0940","kr":"Kanuri","kk":"\u049a\u0430\u0437\u0430\u049b \u0442\u0456\u043b\u0456","km":"Khmer","ki":"G\u0129k\u0169y\u0169","rw":"Ikinyarwanda","ky":"\u043a\u044b\u0440\u0433\u044b\u0437 \u0442\u0438\u043b\u0438","kv":"\u043a\u043e\u043c\u0438 \u043a\u044b\u0432","kg":"KiKongo","kj":"Kuanyama","ku":"Kurd\xee","lo":"Lao","la":"latine","lv":"latvie\u0161u valoda","li":"Limburgs","ln":"Ling\xe1la","lt":"lietuvi\u0173 kalba","lb":"L\xebtzebuergesch","lu":"Luba-Katanga","lg":"Luganda","mk":"\u043c\u0430\u043a\u0435\u0434\u043e\u043d\u0441\u043a\u0438 \u0458\u0430\u0437\u0438\u043a","mh":"Kajin M\u0327aje\u013c","ml":"Malayalam","mi":"te reo M\u0101ori","mr":"\u092e\u0930\u093e\u0920\u0940","ms":"bahasa Melayu","mg":"Malagasy fiteny","mt":"Malti","mo":"Moldavian","mn":"\u043c\u043e\u043d\u0433\u043e\u043b","na":"Ekakair\u0169 Naoero","nv":"Din\xe9 bizaad","nr":"isiNdebele (North)","nd":"isiNdebele (South)","ng":"Owambo","ne":"\u0928\u0947\u092a\u093e\u0932\u0940","nn":"Norsk nynorsk","nb":"Norsk bokm\xe5l","ny":"chiChe\u0175a","oc":"Occitan","oj":"\u140a\u14c2\u1511\u14c8\u142f\u14a7\u140e\u14d0","or":"Oriya","om":"Afaan Oromoo","os":"\u0438\u0440\u043e\u043d \xe6\u0432\u0437\u0430\u0433","pa":"\u0a2a\u0a70\u0a1c\u0a3e\u0a2c\u0a40","pi":"\u092a\u093e\u0934\u093f","ps":"\u067e\u069a\u062a\u0648","qu":"Runa Simi","rm":"rumantsch grischun","ro":"rom\xe2n\u0103","rn":"kiRundi","sg":"y\xe2ng\xe2 t\xee s\xe4ng\xf6","sa":"\u0938\u0902\u0938\u094d\u0915\u0943\u0924\u092e\u094d","sr":"\u0441\u0440\u043f\u0441\u043a\u0438 \u0458\u0435\u0437\u0438\u043a","si":"Sinhala","sk":"sloven\u010dina","sl":"Sloven\u0161\u010dina","se":"Davvis\xe1megiella","sm":"gagana fa&apos;a Samoa","sn":"chiShona","sd":"\u0938\u093f\u0928\u094d\u0927\u0940","so":"Soomaaliga","st":"Sesotho","sc":"sardu","ss":"SiSwati","su":"Basa Sunda","sw":"Kiswahili","ty":"Reo Tahiti","ta":"\u0ba4\u0bae\u0bbf\u0bb4\u0bcd","tt":"\u0442\u0430\u0442\u0430\u0440\u0447\u0430","te":"Telugu","tg":"\u0442\u043e\u04b7\u0438\u043a\u04e3","tl":"Wikang Tagalog","th":"\u0e44\u0e17\u0e22","bo":"\u0f56\u0f7c\u0f51\u0f0b\u0f61\u0f72\u0f42","ti":"Tigrinya","to":"faka Tonga","tn":"Setswana","ts":"Xitsonga","tk":"T\xfcrkmen","tw":"Twi","ug":"Uy\u01a3urq\u0259","uk":"\u0443\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430","ur":"\u0627\u0631\u062f\u0648","uz":"O&apos;zbek","ve":"Tshiven\u1e13a","vi":"Ti\u1ebfng Vi\u1ec7t","vo":"Volap\xfck","cy":"Cymraeg","wa":"Walon","wo":"Wollof","xh":"isiXhosa","yi":"\u05d9\u05d9\u05b4\u05d3\u05d9\u05e9","yo":"Yor\xf9b\xe1","za":"Sa\u026f cue\u014b\u0185","zu":"isiZulu","pb":"Portugu\xeas (Brasil)","fr":"Fran\xe7ais","de":"Deutsch","sv":"Svenska","no":"Norsk","da":"Dansk","fi":"Suomeksi","nl":"Nederlands","it":"Italiano","es":"Espa\xf1ol","es-419":"Espa\xf1ol (Latinoam\xe9rica)","pl":"Polski","hu":"Magyar","el":"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac","tr":"T\xfcrk\xe7e","zh":"\u4e2d\u6587","zh-TW":"\u81fa\u8a9e","ru":"\u0440\u0443\u0441\u0441\u043a\u0438\u0439 \u044f\u0437\u044b\u043a","he":"\u05e2\u05d1\u05e8\u05d9\u05ea","ja":"\u65e5\u672c\u8a9e","pt":"Portugu\xeas","pt-BR":"Portugu\xeas Brasileiro","ko":"\ud55c\uad6d\uc5b4","cs":"\u010de\u0161tina","fa":"\u0641\u0627\u0631\u0633\u06cc","xx":"Unknown","xn":"None"},"getLanguageName":function(e){return this.languages[e]||""
}});return new t}),define("plex/desktop/views/editsection/EditSectionBaseView",["underscore","jquery","marionette","plex/base/utils/LanguageUtil","plex/base/adapters/LocalizerAdapter"],function(e,t,n,i,s){var a=n.CompositeView.extend({"fieldNames":[],"serializeData":function(){var e={};return this.model.isNew()?e.add=!0:e.edit=!0,e.section=this.model.toJSON(),e.sectionType=this.model.sectionType.label.toLowerCase(),e.sectionTypeLabel=s.get().t(e.sectionType),e},"flushChanges":function(t){e.isEmpty(this.settingsChanges)||(t.settingsChanges=this.settingsChanges),e.each(this.fieldNames,function(e){this.model.set(e,this.ui[e].find("*[name]").val())
},this)},"showValidationResult":function(t){e.each(this.fieldNames,function(e){this.ui[e].toggleClass("has-error",e in t)},this)},"createMenuOptions":function(t,n){return e.map(t,function(e){return'<option value="'+e.value+'"'+(e.value===n?" selected":"")+">"+e.label+"</option>"}).join("\n")}});return a}),define("plex/desktop/views/editsection/EditSectionAdvancedView",["hb!templates/desktop/editsection/EditSectionAdvancedView.tpl","underscore","jquery","plex/desktop/views/editsection/EditSectionBaseView"],function(e,t,n,i){var s=i.extend({"template":e,"fieldNames":["scanner","agent","language"],"ui":{"scanner":".scanner-group","scannerMenu":'select[name="scanner"]',"agent":".agent-group","agentMenu":'select[name="agent"]',"language":".language-group","languageInput":'input[name="language"]'},"events":{"change #edit-section-agent":"onAgentChange","change .section-settings-container input[name]":"onSectionSettingInputChange","change .section-settings-container select[name]":"onSectionSettingInputChange"},"initialize":function(e){this.settings=e.settings,this.settingsChanges={}
},"serializeData":function(){var e=i.prototype.serializeData.apply(this,arguments);return t.extend(e,{"settings":this.settings.toJSON()})},"onRender":function(){this.model.agents.populate().done(t.bind(function(e){this.ui.agentMenu.empty(),this.ui.agentMenu.append(this.createMenuOptions(e.map(function(e){return{"label":e.get("name"),"value":e.get("identifier")}}),this.model.get("agent")))},this)),this.model.scanners.populate().done(t.bind(function(e){this.ui.scannerMenu.empty(),this.ui.scannerMenu.append(this.createMenuOptions(e.map(function(e){return{"label":e.get("name"),"value":e.get("name")}
}),this.model.get("scanner")))},this))},"onAgentChange":function(e){var n=e.currentTarget.value,i=this.model.agents.get(n),s=this.model.get("language"),a=i.get("language");t.indexOf(a,s)<0&&this.ui.languageInput.val(t.first(a))},"onSectionSettingInputChange":function(e){var t=e.currentTarget,n=t.value;"checkbox"!=t.type||t.checked||(n="0"),this.settingsChanges[t.name]=n,this.settings.get(t.name).set("value",n)}});return s}),define("hb!templates/desktop/editsection/EditSectionFoldersView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s,a="";
return a+="\n      ",s={"hash":{},"data":t},a+=h((i=n.t||e&&e.t,i?i.call(e,"Add folders where your {1} is located",e&&e.sectionTypeLabel,s):u.call(e,"t","Add folders where your {1} is located",e&&e.sectionTypeLabel,s)))+"\n    "}function r(e,t){var i,s,a="";return a+="\n      ",s={"hash":{},"data":t},a+=h((i=n.t||e&&e.t,i?i.call(e,"Add folders where your {1} are located",e&&e.sectionTypeLabel,s):u.call(e,"t","Add folders where your {1} are located",e&&e.sectionTypeLabel,s)))+"\n    "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};
var o,l,c,d="",u=n.helperMissing,h=this.escapeExpression,p=this;return d+='<form class="edit-section-folders-form settings-container">\n  <label>\n    ',c={"hash":{},"inverse":p.program(3,r,s),"fn":p.program(1,a,s),"data":s},o=n.if_eq||t&&t.if_eq,l=o?o.call(t,t&&t.sectionType,"music",c):u.call(t,"if_eq",t&&t.sectionType,"music",c),(l||0===l)&&(d+=l),d+='\n  </label>\n\n  <p class="help-block">',c={"hash":{},"data":s},d+=h((o=n.t||t&&t.t,o?o.call(t,"Help us out by following <a href='{1}' target='_blank'>our guide</a> to naming and organizing your media.","http://support.plex.tv/hc/en-us/categories/200028098-Media-Preparation",c):u.call(t,"t","Help us out by following <a href='{1}' target='_blank'>our guide</a> to naming and organizing your media.","http://support.plex.tv/hc/en-us/categories/200028098-Media-Preparation",c)))+'</p>\n\n  <div class="Location-group control-group">\n    <div class="path-container"></div>\n\n    <p class="add-folder-container">\n      <button type="button" class="add-folder-btn btn btn-icon-label btn-default"><i class="glyphicon folder-plus"></i> ',c={"hash":{},"data":s},d+=h((o=n.t||t&&t.t,o?o.call(t,"Add Folder",c):u.call(t,"t","Add Folder",c)))+'</button>\n    </p>\n\n    <p class="control-error">',c={"hash":{},"data":s},d+=h((o=n.t||t&&t.t,o?o.call(t,"At least one folder is required.",c):u.call(t,"t","At least one folder is required.",c)))+"</p>\n  </div>\n</form>\n"
})}),define("hb!templates/desktop/editsection/EditSectionPathItemView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,r="",o="function",l=this.escapeExpression;return r+='<div class="col-md-12">\n  <div class="form-group path-group">\n    <input type="text" name="path" class="form-control" value="',(a=n.path)?a=a.call(t,{"hash":{},"data":s}):(a=t&&t.path,a=typeof a===o?a.call(t,{"hash":{},"data":s}):a),r+=l(a)+'">\n    <div class="path-actions">\n      <a href="#" class="remove-path-btn btn-link btn-gray"><i class="glyphicon remove-2"></i></a>\n    </div>\n  </div>\n</div>\n'
})}),define("plex/desktop/views/editsection/EditSectionPathItemView",["hb!templates/desktop/editsection/EditSectionPathItemView.tpl","marionette"],function(e,t){var n=t.ItemView.extend({"template":e,"className":"row","events":{"click .remove-path-btn":"onRemovePathClick"},"onRemovePathClick":function(e){e.preventDefault(),this.model.destroy()}});return n}),define("hb!templates/desktop/modals/AddFolderModal",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};
var a,r,o="",l=n.helperMissing,c=this.escapeExpression;return o+='<div class="modal-dialog">\n  <div class="modal-content">\n    <form name="add-folder-form">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button>\n        <h4 class="modal-title"><i class="modal-icon glyphicon folder-plus"></i> ',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Add Folder",r):l.call(t,"t","Add Folder",r)))+'</h4>\n      </div>\n\n      <div class="modal-body modal-body-scroll minimal-scroll">\n        <div class="row">\n          <div class="col-md-12">\n            <input type="text" name="path" class="form-control" value="">\n          </div>\n        </div>\n\n        <div class="row directory-container-row">\n          <div class="home-container col-md-5"></div>\n          <div class="path-container col-md-7"></div>\n        </div>\n      </div>\n\n      <div class="modal-footer">\n        <button type="button" class="cancel-btn btn btn-default" data-dismiss="modal">',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Cancel",r):l.call(t,"t","Cancel",r)))+'</button>\n        <button type="submit" class="add-btn btn btn-primary">',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Add",r):l.call(t,"t","Add",r)))+"</button>\n      </div>\n    </form>\n  </div>\n</div>\n"
})}),define("plex/base/models/server/BrowseDirectoryModel",["underscore","plex/base/utils/Parser","plex/base/models/BaseModel"],function(e,t,n){var i=n.extend({"idAttribute":"key","defaults":{"key":"/services/browse","title":"Root","path":""},"whitelistedAttrs":["key","title","path","home","network"],"url":function(){return this.server.resolveUrl(this.id)},"convert":function(n){var i=e.isObject(n)?n:t.parseXML(n);return t.parseBoolean(i,["home","network"]),i}});return i}),define("plex/base/models/server/BrowseDirectoryCollection",["underscore","plex/base/models/BaseCollection","plex/base/models/server/BrowseDirectoryModel"],function(e,t,n){var i=t.extend({"model":n,"url":function(){return this.parent?this.parent.url():this.server.resolveUrl("/services/browse")
},"initialize":function(t){var n=e.bind(function(e){e.set("parent",this.parent),e.set("children",new i([],{"parent":e,"server":this.server}))},this);e.each(t,n),this.on("reset",function(){this.each(n)},this),this.on("add",n)},"parse":function(e){return this.convert(e,"Path")}});return i}),define("hb!templates/desktop/lists/server/BrowseDirectoryListItem",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(){return"left-arrow"}function r(e,t){var i;return i=n["if"].call(e,e&&e.home,{"hash":{},"inverse":m.program(6,l,t),"fn":m.program(4,o,t),"data":t}),i||0===i?i:""
}function o(){return"home"}function l(e,t){var i;return i=n["if"].call(e,e&&e.network,{"hash":{},"inverse":m.program(9,d,t),"fn":m.program(7,c,t),"data":t}),i||0===i?i:""}function c(){return"globe"}function d(e,t){var i;return i=n.unless.call(e,e&&e.parent,{"hash":{},"inverse":m.program(12,h,t),"fn":m.program(10,u,t),"data":t}),i||0===i?i:""}function u(){return"hdd"}function h(){return"folder-open"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var p,f="",m=this,g="function",v=this.escapeExpression;
return f+='<a href="#" data-key="',(p=n.key)?p=p.call(t,{"hash":{},"data":s}):(p=t&&t.key,p=typeof p===g?p.call(t,{"hash":{},"data":s}):p),f+=v(p)+'">\n  <i class="folder-icon glyphicon ',p=n["if"].call(t,t&&t.back,{"hash":{},"inverse":m.program(3,r,s),"fn":m.program(1,a,s),"data":s}),(p||0===p)&&(f+=p),f+='"></i> ',(p=n.title)?p=p.call(t,{"hash":{},"data":s}):(p=t&&t.title,p=typeof p===g?p.call(t,{"hash":{},"data":s}):p),f+=v(p)+' <div class="loading loading-sm loading-inline hidden"></div>\n</a>\n'
})}),define("plex/desktop/views/lists/server/BrowseDirectoryListItem",["hb!templates/desktop/lists/server/BrowseDirectoryListItem.tpl","marionette"],function(e,t){var n=t.ItemView.extend({"tagName":"li","className":"striped-list-item rounded-list-item browse-directory-list-item","template":e,"ui":{"link":"a","spinner":".loading"},"events":{"click a":"onDirectoryClick"},"markAsSelected":function(e){this.ui.link.addClass("selected"),this.ui.spinner.toggleClass("hidden",!e)},"onDirectoryClick":function(e){e.preventDefault(),this.markAsSelected(!0)
}});return n}),define("plex/desktop/views/lists/server/BrowseDirectoryList",["marionette","jquery","plex/desktop/views/lists/server/BrowseDirectoryListItem"],function(e,t,n){var i=e.CollectionView.extend({"tagName":"ul","className":"list browse-directory-list","itemView":n,"events":{"click a":"onDirectoryClick"},"collectionEvents":{"reset":"onReset"},"initialize":function(e){this.root=e.root},"loadDirectory":function(e){this.$("a").removeClass("selected");var t=this.children.findByModel(e);t&&t.markAsSelected(!0)
},"unloadDirectory":function(e){var t=this.children.findByModel(e);t&&t.markAsSelected(!1)},"onReset":function(){this.parentItem&&this.collection.add(this.parentItem,{"at":0})},"onDirectoryClick":function(e){e.preventDefault();var n=t(e.currentTarget),i=n.data("key"),s=this.collection.get(i)||this.parentItem;this.trigger("change:path",s),this.root||(this.collection.parent=s,s.get("parent")?(this.parentItem=s.get("parent").clone(),this.parentItem.set("back",!0),this.parentItem.set("title",".. [Back]")):this.parentItem=null,this.collection.fetch({"reset":!0}))
}});return i}),define("plex/desktop/views/modals/AddFolderModal",["hb!templates/desktop/modals/AddFolderModal.tpl","underscore","plex/base/models/server/BrowseDirectoryCollection","plex/desktop/views/modals/BaseModal","plex/desktop/views/lists/server/BrowseDirectoryList"],function(e,t,n,i,s){var a=i.extend({"name":"addFolderModal","className":"add-folder-modal modal fade","template":e,"events":t.extend({"submit form":"onSubmitForm"},i.prototype.events),"ui":{"path":'input[name="path"]'},"regions":{"home":".home-container","path":".path-container"},"initialize":function(e){this.server=e.server,this.homeCollection=new n([],{"server":this.server}),this.pathCollection=new n([],{"server":this.server}),this.listenTo(this.homeCollection,"reset",this.onHomeReset),this.listenTo(this.pathCollection,"reset",this.onPathReset),this.homeCollection.fetch({"reset":!0})
},"onRender":function(){i.prototype.onRender.apply(this,arguments);var e=new s({"root":!0,"collection":this.homeCollection});this.listenTo(e,"change:path",this.onHomeChange),this.home.show(e);var t=new s({"collection":this.pathCollection});this.listenTo(t,"change:path",this.onPathChange),this.path.show(t)},"onSubmitForm":function(e){e.preventDefault(),this.trigger("add:folder",this.ui.path.val()),this.hide()},"onHomeReset":function(e){var n=e.where({"home":!0});n=n.length?t.first(n):e.first(),this.onHomeChange(n)
},"onPathReset":function(){this.home.currentView.unloadDirectory(this.pathCollection.parent)},"onHomeChange":function(e){this.home.currentView.loadDirectory(e),this.ui.path.val(e.get("path")),this.path.currentView.parentItem=null,this.pathCollection.parent=e,this.pathCollection.fetch({"reset":!0})},"onPathChange":function(e){this.ui.path.val(e.get("path"))}});return a}),define("plex/desktop/views/editsection/EditSectionFoldersView",["hb!templates/desktop/editsection/EditSectionFoldersView.tpl","underscore","jquery","backbone","plex/base/utils/Dispatcher","plex/desktop/views/editsection/EditSectionBaseView","plex/desktop/views/editsection/EditSectionPathItemView","plex/desktop/views/modals/AddFolderModal"],function(e,t,n,i,s,a,r,o){var l=a.extend({"template":e,"fieldNames":["Location"],"itemView":r,"itemViewContainer":".path-container","ui":{"Location":".Location-group"},"collectionEvents":{"add":"onCollectionChange","remove":"onCollectionChange"},"events":{"click .add-folder-btn":"onAddFolderClick","change input[name=path]":"onFolderChange"},"onlyAfterRender":["onCollectionChange"],"initialize":function(e){this.server=e.server;
var n=this.model.get("Location")||[];this.collection=new i.Collection(t.map(n,function(e){return{"path":e.path}}))},"flushChanges":function(){this.model.set("Location",this.collection.toJSON())},"onCollectionChange":function(e,t){this.ui.Location.toggleClass("has-error",!t.length)},"onAddFolderClick":function(e){e.preventDefault();var n=new o({"server":this.server}),i=t.bind(function(e){e&&this.collection.add({"path":e}),n.off("add:folder",i)},this);n.on("add:folder",i),s.trigger("show:modal",n)},"onFolderChange":function(e){var t=n(e.currentTarget),i=t.prop("defaultValue"),s=t.val();
if(!s)return void t.val(i);var a=this.collection.findWhere({"path":i});a.set("path",s),t.prop("defaultValue",s)}});return l}),define("hb!templates/desktop/editsection/EditSectionGeneralView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(){return"hidden"}function r(e,t){var i,s,a,r="";return r+='\n      <a class="section-type" data-key="',(i=n.key)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.key,i=typeof i===k?i.call(e,{"hash":{},"data":t}):i),r+=S(i)+'" href="#">\n        <i class="section-icon glyphicon ',a={"hash":{},"inverse":w.program(6,l,t),"fn":w.program(4,o,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,e&&e.key,"movies",a):x.call(e,"if_eq",e&&e.key,"movies",a),(s||0===s)&&(r+=s),r+='"></i> ',a={"hash":{},"data":t},r+=S((i=n.t||e&&e.t,i?i.call(e,e&&e.label,a):x.call(e,"t",e&&e.label,a)))+"\n      </a>\n    "
}function o(){return"film"}function l(e,t){var i,s,a;return a={"hash":{},"inverse":w.program(9,d,t),"fn":w.program(7,c,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,e&&e.key,"tv",a):x.call(e,"if_eq",e&&e.key,"tv",a),s||0===s?s:""}function c(){return"display"}function d(e,t){var i,s,a;return a={"hash":{},"inverse":w.program(12,h,t),"fn":w.program(10,u,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,e&&e.key,"music",a):x.call(e,"if_eq",e&&e.key,"music",a),s||0===s?s:""}function u(){return"music"}function h(e,t){var i,s,a;
return a={"hash":{},"inverse":w.program(15,f,t),"fn":w.program(13,p,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,e&&e.key,"photos",a):x.call(e,"if_eq",e&&e.key,"photos",a),s||0===s?s:""}function p(){return"picture"}function f(){return"facetime-video"}function m(e,t){var i,s,a="";return a+='\n    <div class="row">\n      <div class="col-md-12">\n        <span class="text-muted">',s={"hash":{},"data":t},a+=S((i=n.t||e&&e.t,i?i.call(e,"Last updated {1}",e&&e.updatedAt,s):x.call(e,"t","Last updated {1}",e&&e.updatedAt,s)))+"</span>\n      </div>\n    </div>\n  "
}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var g,v,y,b="",w=this,x=n.helperMissing,k="function",S=this.escapeExpression;return b+='<form class="edit-section-type-form settings-container ',v=n["if"].call(t,(g=t&&t.section,null==g||g===!1?g:g.type),{"hash":{},"inverse":w.noop,"fn":w.program(1,a,s),"data":s}),(v||0===v)&&(b+=v),b+='">\n  <label>',y={"hash":{},"data":s},b+=S((g=n.t||t&&t.t,g?g.call(t,"Select a type of media for this library",y):x.call(t,"t","Select a type of media for this library",y)))+'</label>\n  <p class="help-block">',y={"hash":{},"data":s},b+=S((g=n.t||t&&t.t,g?g.call(t,"Each library should only contain one type of media.",y):x.call(t,"t","Each library should only contain one type of media.",y)))+'</p>\n\n  <div class="section-types-group form-group type-group">\n    ',v=n.each.call(t,t&&t.sectionTypes,{"hash":{},"inverse":w.noop,"fn":w.program(3,r,s),"data":s}),(v||0===v)&&(b+=v),b+='\n\n    <label class="control-label">\n      <span class="control-error">',y={"hash":{},"data":s},b+=S((g=n.t||t&&t.t,g?g.call(t,"You must select a media type.",y):x.call(t,"t","You must select a media type.",y)))+'</span>\n    </label>\n  </div>\n</form>\n\n<form class="edit-section-general-form settings-container ',v=n.unless.call(t,(g=t&&t.section,null==g||g===!1?g:g.type),{"hash":{},"inverse":w.noop,"fn":w.program(1,a,s),"data":s}),(v||0===v)&&(b+=v),b+='">\n  <div class="row">\n    <div class="col-md-12">\n      <div class="form-group title-group">\n        <label for="edit-section-title" class="control-label">\n          ',y={"hash":{},"data":s},b+=S((g=n.t||t&&t.t,g?g.call(t,"Name",y):x.call(t,"t","Name",y)))+'\n          <span class="control-error">',y={"hash":{},"data":s},b+=S((g=n.t||t&&t.t,g?g.call(t,"A section name is required.",y):x.call(t,"t","A section name is required.",y)))+'</span>\n        </label>\n        <input type="text" id="edit-section-title" name="title" class="form-control" value="'+S((g=t&&t.section,g=null==g||g===!1?g:g.title,typeof g===k?g.apply(t):g))+'">\n      </div>\n    </div>\n  </div>\n\n  <div class="row">\n    <div class="col-md-12">\n      <div class="form-group language-group">\n        <label for="edit-section-language" class="control-label">\n          ',y={"hash":{},"data":s},b+=S((g=n.t||t&&t.t,g?g.call(t,"Language",y):x.call(t,"t","Language",y)))+'\n          <span class="control-error">',y={"hash":{},"data":s},b+=S((g=n.t||t&&t.t,g?g.call(t,"A language is required.",y):x.call(t,"t","A language is required.",y)))+'</span>\n        </label>\n        <select id="edit-section-language" name="language"></select>\n      </div>\n    </div>\n  </div>\n\n  ',v=n["if"].call(t,t&&t.updatedAt,{"hash":{},"inverse":w.noop,"fn":w.program(17,m,s),"data":s}),(v||0===v)&&(b+=v),b+="\n</form>\n"
})}),define("plex/desktop/views/editsection/EditSectionGeneralView",["hb!templates/desktop/editsection/EditSectionGeneralView.tpl","underscore","jquery","moment","plex/base/utils/LanguageUtil","plex/base/utils/types/SectionTypes","plex/desktop/views/editsection/EditSectionBaseView"],function(e,t,n,i,s,a,r){var o=r.extend({"template":e,"fieldNames":["title","language"],"ui":{"typeForm":".edit-section-type-form","generalForm":".edit-section-general-form","title":".title-group","titleInput":"input[name=title]","language":".language-group","languageMenu":'select[name="language"]'},"modelEvents":{"change:type":"onTypeChange"},"events":{"click .section-type":"onSectionTypeClick"},"onlyAfterRender":["onTypeChange"],"serializeData":function(){var e=r.prototype.serializeData.apply(this,arguments);
e.sectionTypes=a.getSectionTypes();var t=this.model.get("updatedAt");return t&&(e.updatedAt=i.unix(t).fromNow()),e},"bindings":{"input[name=title]":{"modelAttribute":"title","manual":!0,"formatter":function(e,t){t.val(e)}},"input[name=langauge]":{"modelAttribute":"type","manual":!0,"formatter":function(){this.model.agents.populate().done(t.bind(function(e){this.ui.languageMenu.empty();var n=e.get(this.model.get("agent"));n&&this.ui.languageMenu.html(this.createMenuOptions(t.map(n.get("language"),function(e){return{"label":s.getLanguageName(e),"value":e}
}),this.model.get("language")))},this))}}},"onTypeChange":function(e,t){t&&(this.ui.typeForm.addClass("hidden"),this.ui.generalForm.removeClass("hidden"))},"onSectionTypeClick":function(e){e.preventDefault();var t=n(e.currentTarget);this.model.set("type",a.getSectionType(t.data("key")))}});return o}),define("plex/desktop/views/modals/EditSectionModal",["hb!templates/desktop/modals/EditSectionModal.tpl","underscore","jquery","plex/base/utils/Dispatcher","plex/base/utils/Parser","plex/base/utils/types/SectionTypes","plex/base/adapters/LocalizerAdapter","plex/base/commands/Commands","plex/base/models/server/ServerSettingCollection","plex/base/models/library/AgentCollection","plex/base/models/library/ScannerCollection","plex/base/models/library/section/SectionModel","plex/desktop/views/editsection/EditSectionAdvancedView","plex/desktop/views/editsection/EditSectionFoldersView","plex/desktop/views/editsection/EditSectionGeneralView","plex/desktop/views/modals/BaseModal"],function(e,t,n,i,s,a,r,o,l,c,d,u,h,p,f,m){var g={"advanced":h,"folders":p,"general":f},v=m.extend({"name":"editSectionModal","className":"edit-section-modal modal modal-lg fade","template":e,"ui":{"foldersBtn":".folders-btn","advancedBtn":".advanced-btn","saveBtn":".save-btn","nextBtn":".next-btn","message":".form-message"},"regions":{"body":".modal-body-pane"},"events":t.extend({"click .change-pane-btn":"onChangePaneClick","click .next-btn":"onNextClick","click .save-btn":"onSaveClick","click .delete-btn":"onDeleteClick"},m.prototype.events),"initialize":function(e){var t,i,s="general";
this.server=e.server,this.redirect=e.redirect,this.model?(this.tempModel=this.model.clone(),t=a.getSectionTypeByString(this.model.get("type")),i="/library/sections/"+this.model.id+"/prefs"):(this.tempModel=new u({},{"server":this.server,"collection":this.server.get("sections")}),t=a.getSectionTypeByString("movie"));var r={"server":this.server,"sectionType":t.typeID};this.tempModel.scanners=new d([],r),this.tempModel.agents=new c([],r),this.tempModel.sectionType=t,this.settings=new l([],{"server":this.server,"url":i});
var o=[];this.model&&(o.push(this.tempModel.scanners.populate()),o.push(this.tempModel.agents.populate())),this.server.supports("sectionSettings")&&i&&o.push(this.settings.populate()),this.collectionsPromise=n.when.apply(n,o),this.selectedPane=e.selectedPane||s,this.listenTo(this.tempModel,"change:type",this.onSectionTypeChange)},"serializeData":function(){var e={};return this.model?(e.edit=!0,e.section=this.model.toJSON()):e.add=!0,e.selectedPane=this.selectedPane,e},"showPane":function(e,t){if(e!==this.selectedPane||t){var n=g[e];
this.body.currentView&&(this.$("."+this.selectedPane+"-btn").removeClass("selected"),this.body.currentView.flushChanges(this)),this.$("."+e+"-btn").addClass("selected"),this.selectedPane=e,this.body.show(new n({"model":this.tempModel,"server":this.server,"settings":this.settings}))}},"validate":function(){var e=this.tempModel,n=!0,i={},s=null;return e.get("scanner")||(i.scanner=!0,s="advanced",n=!1),e.get("agent")||(i.agent=!0,s="advanced",n=!1),t.isEmpty(e.get("Location"))&&(i.Location=!0,s="folders",n=!1),e.get("title")||(i.title=!0,s="general",n=!1),e.get("language")||(i.language=!0,s="general",n=!1),e.get("type")||(i.type=!0,s="general",n=!1),n||(this.showPane(s),"general"!==s&&(this.ui.nextBtn.addClass("hidden"),this.ui.saveBtn.removeClass("hidden"))),this.body.currentView.showValidationResult(i),n
},"onRender":function(){m.prototype.onRender.apply(this,arguments),this.showPane(this.selectedPane,!0),this.ui.saveBtn.addClass("disabled"),this.collectionsPromise.done(t.bind(function(){this.ui.saveBtn.removeClass("disabled")},this))},"onSectionTypeChange":function(e,i){var s=t.isObject(i)?i:a.getSectionTypeByString(i);this.tempModel.set("title",s.label),this.tempModel.set("agent",s.defaultAgent),this.tempModel.set("scanner",s.defaultScanner);var r={"server":this.server,"sectionType":s.typeID};this.tempModel.scanners=new d([],r),this.tempModel.agents=new c([],r),this.tempModel.sectionType=s,this.settings.url="/library/sections/prefs?type="+s.typeID;
var o=[];o.push(this.tempModel.scanners.populate()),o.push(this.tempModel.agents.populate()),this.server.supports("sectionSettings")&&o.push(this.settings.populate()),this.collectionsPromise=n.when.apply(n,o),this.collectionsPromise.done(t.bind(function(){this.ui.nextBtn.removeClass("disabled")},this)),this.showPane("general")},"onChangePaneClick":function(e){e.preventDefault();var t=this.$(e.currentTarget);t.isDisabled()||this.showPane(t.data("pane"))},"onNextClick":function(e){e.preventDefault(),this.ui.nextBtn.isDisabled()||(this.ui.foldersBtn.removeClass("disabled"),this.ui.advancedBtn.removeClass("disabled"),this.body.currentView.flushChanges(this),this.validate())
},"onSaveClick":function(e){e.preventDefault();var a=this.ui.saveBtn,o=this.ui.message;if(!a.isDisabled()&&(o.text(""),this.body.currentView.flushChanges(this),this.validate())){a.addClass("active");var l,c;this.model?(l=this.model,c=this.model.save(this.model.changedAttributes(this.tempModel.attributes))):c=this.tempModel.save(),c=c.then(t.bind(function(e,t,i){if(l)return n.Deferred().resolve().promise();var a=s.parseXML(e);if(201===i.status){if(a.Directory&&(a=a.Directory),!a.key){var r=i.getResponseHeader("Location");
r&&(a.key=r.substring(r.lastIndexOf("/")+1))}this.server.supports("advancedFilters")&&(a.filters=!0)}return l=new u(a,{"parse":!0,"server":this.server}),this.server.get("sections").add(l),n.Deferred().resolve().promise()},this)),c=c.then(t.bind(function(){if(!this.settingsChanges||!this.server.supports("sectionSettings"))return n.Deferred().resolve().promise();var e=this.settings.first(),i=e.getSaveParams(this.settingsChanges),s="/library/sections/"+l.id+"/prefs?"+n.param(i,!0),a=t.extend(this.server.getXHROptions(s),{"type":"PUT"});
return n.ajax(a).promise()},this)),c.done(t.bind(function(){this.hide(),this.redirect&&i.trigger("navigate","section",{"serverID":l.server.id,"sectionID":l.id})},this)),c.fail(function(){var e=r.get();o.text(e.t("Your changes could not be saved."))}),c.always(function(){a.removeClass("active")})}},"onDeleteClick":function(e){e.preventDefault();var t=o.execute("deleteSection",{"section":this.model});t.done(function(){i.trigger("navigate","dashboard")})}});return v}),define("plex/desktop/views/lists/dashboard/DashboardSectionListItem",["hb!templates/desktop/lists/dashboard/DashboardSectionListItem.tpl","marionette","plex/base/utils/Dispatcher","plex/desktop/views/modals/EditSectionModal"],function(e,t,n,i){var s={"artist":"music","movie":"film","photo":"picture","show":"display"},a=t.ItemView.extend({"tagName":"li","className":"dashboard-section-list-item","template":e,"ui":{"loadingBtn":".btn-loading"},"events":{"click .edit-section-btn":"onEditClick"},"initialize":function(e){this.showActions=e.showActions,this.showActions&&(this.listenTo(this.model,"change:refreshing",this.onRefreshingChange),this.refreshing=this.model.get("refreshing"))
},"serializeData":function(){var e=this.model.server,t=this.model.toJSON();return{"section":t,"serverID":e.id,"icon":s[t.type],"showActions":this.showActions,"refreshing":this.refreshing}},"bindings":{".section-title":{"modelAttribute":"title"}},"onEditClick":function(e){e.preventDefault(),n.trigger("show:modal",new i({"server":this.model.server,"model":this.model}))},"onRefreshingChange":function(e,t){this.ui.loadingBtn.toggleClass("active",t)}});return a}),define("plex/desktop/views/lists/dashboard/DashboardServerListItem",["hb!templates/desktop/lists/dashboard/DashboardServerListItem.tpl","underscore","marionette","plex/base/utils/Dispatcher","plex/base/adapters/LocalizerAdapter","plex/base/commands/Commands","plex/base/models/AppModel","plex/base/models/SettingsModel","plex/base/models/server/ServerStorageModel","plex/desktop/views/lists/dashboard/DashboardSectionListItem","plex/desktop/views/modals/EditSectionModal"],function(e,t,n,i,s,a,r,o,l,c,d){var u=n.CompositeView.extend({"tagName":"li","className":"dashboard-server-list-item","template":e,"itemView":c,"itemViewContainer":".dashboard-section-list","itemViewOptions":function(){return{"showActions":this.showActions}
},"ui":{"selectServerBtn":".select-server-btn","updateBtn":".update-btn"},"modelEvents":{"change:connected":"onConnectedChange","change:shared":"onSharedChange","change:mixedContent":"onMixedContentChange"},"events":{"click .select-server-btn":"onSelectServerClick","click .add-library-btn":"onAddLibraryClick","click .update-btn":"onUpdateClick","click .optimize-btn":"onOptimizeClick","click .clean-bundles-btn":"onCleanBundlesClick","click .empty-trash-btn":"onEmptyTrashClick","click .mixed-content-btn":"onMixedContentClick"},"onlyAfterRender":["onPrimaryServerChange","onSectionsChange","onSectionRefreshingChange"],"initialize":function(){this.collection=this.model.get("sections"),this.listenTo(r,"change:primaryServer",this.onPrimaryServerChange),this.setup()
},"setup":function(){var e=this.model.get("shared")||this.model.get("synced");if(this.allowCancel=this.model.supports("cancelAllUpdates")&&!e,this.showActions=this.model.get("connected")&&!e,this.model.get("connected")){this.allowCancel&&this.collection.length&&this.updateRefreshingStatus();var t=!this.collection.populatePromise,n=t?"reset":"add remove";this.collection.fetch({"reset":t}),this.allowCancel&&(this.listenTo(this.collection,n,this.onSectionsChange),this.listenTo(this.collection,"change:refreshing",this.onSectionRefreshingChange))
}},"serializeData":function(){var e=r.get("primaryServer"),t=this.model.toJSON();return{"server":t,"selected":e&&this.model.id===e.id,"canBePrimary":this.model.canBePrimary(),"showActions":this.showActions,"showChannels":this.showActions&&o.get("dashboardChannelsEnabled"),"showUnavailableMessage":!t.mixedContent&&!t.available,"showMixedContentMessage":!!t.mixedContent,"hasRefreshingSection":this.hasRefreshingSection}},"updateRefreshingStatus":function(){this.hasRefreshingSection=this.collection.some(function(e){return e.get("refreshing")
})},"getUpdateText":function(){var e=s.get();return e.t(this.hasRefreshingSection?"Cancel Update":"Update Libraries")},"onPrimaryServerChange":function(e,t){this.ui.selectServerBtn.toggleClass("selected",t&&t.id===this.model.id)},"onSectionsChange":function(){this.updateRefreshingStatus(),this.ui.updateBtn.html(this.getUpdateText())},"onSectionRefreshingChange":function(e,t){this.hasRefreshingSection=t,this.ui.updateBtn.html(this.getUpdateText())},"onConnectedChange":function(){this.setup(),this.render()
},"onSharedChange":function(){this.render()},"onMixedContentChange":function(e,t){t||this.collection.populate({"reset":!0}),this.render()},"onSelectServerClick":function(e){e.preventDefault();var t=this.ui.selectServerBtn;t.hasClass("disabled")||t.hasClass("selected")||(r.set("primaryServer",this.model),l.save("lastPrimaryServerID",this.model.id))},"onAddLibraryClick":function(e){e.preventDefault(),i.trigger("show:modal",new d({"server":this.model,"redirect":!0}))},"onUpdateClick":function(e){e.preventDefault();
var t=this.allowCancel?this.hasRefreshingSection:!1;a.execute("updateLibrary",{"server":this.model,"cancel":t})},"onOptimizeClick":function(e){e.preventDefault(),a.execute("optimize",{"server":this.model})},"onCleanBundlesClick":function(e){e.preventDefault(),a.execute("cleanBundles",{"server":this.model})},"onEmptyTrashClick":function(e){e.preventDefault(),a.execute("emptyTrash",{"server":this.model})},"onMixedContentClick":function(e){e.preventDefault();var n=t.findWhere(this.model.connections,{"mixedContent":!0});
n&&(window.location=this.model.resolveUrl("/web",{"connection":n}))}});return u}),define("plex/desktop/views/lists/dashboard/DashboardServerList",["plex/desktop/views/lists/BaseList","plex/desktop/views/lists/dashboard/DashboardServerListItem"],function(e,t){var n=e.extend({"tagName":"ul","className":"list dashboard-server-list","itemView":t,"sorted":!0});return n}),define("plex/desktop/views/sidebar/DashboardSideBarView",["hb!templates/desktop/sidebar/DashboardSideBarView.tpl","marionette","plex/base/models/AppModel","plex/base/models/server/ServerCollection","plex/desktop/views/dashboard/DashboardEmptyServersView","plex/desktop/views/lists/dashboard/DashboardServerList"],function(e,t,n,i,s,a){var r=t.Layout.extend({"className":"side-bar minimal-scroll","template":e,"regions":{"empty":".dashboard-empty-servers-container","servers":".dashboard-servers-container"},"initialize":function(){var e=n.get("servers"),t=e.filter(this.isAuthorized),s=e.filter(this.isUnavailableOwned),a=e.where({"mixedContent":!0}),r=t.concat(s,a);
this.collection=new i(r),this.listenTo(n,"change:primaryServer",this.onPrimaryServerChange),this.listenTo(e,"change:connected",this.onServerConnectedChange),this.listenTo(e,"change:mixedContent",this.onServerMixedContentChange)},"showEmptyView":function(){var e=n.get("servers"),t=!!e.where({"cloud":!1}).length;t||this.empty.show(new s)},"isAuthorized":function(e){return e.id&&!e.get("cloud")&&e.get("authorized")},"isUnavailableOwned":function(e){var t=e.get("shared")||e.get("synced");return e.id&&!e.get("cloud")&&!t&&!e.get("available")
},"onRender":function(){var e=n.get("primaryServer");e===!1&&this.showEmptyView(),this.servers.show(new a({"collection":this.collection}))},"onPrimaryServerChange":function(e,t){t===!1&&this.showEmptyView()},"onServerConnectedChange":function(e){this.isAuthorized(e)||this.isUnavailableOwned(e)?this.collection.add(e):this.collection.remove(e)},"onServerMixedContentChange":function(e,t){t&&this.collection.add(e)}});return r}),define("hb!templates/desktop/dashboard/DashboardMediaView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};
var a,r,o="",l=n.helperMissing,c=this.escapeExpression;return o+='<ul class="nav nav-header nav-dashboard pull-right">\n  <li><a class="previous-btn btn-gray" href="#"><i class="glyphicon chevron-left"></i></a></li>\n  <li><a class="next-btn btn-gray" href="#"><i class="glyphicon chevron-right"></i></a></li>\n</ul>\n\n<h3>',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,t&&t.label,r):l.call(t,"t",t&&t.label,r)))+'</h3>\n\n<div class="dashboard-list-container"></div>\n'})}),define("plex/desktop/views/lists/HorizontalTileList",["plex/desktop/views/lists/BaseList"],function(e){var t=e.extend({"measure":!0,"page":1,"pagesPadding":1,"itemViewOptions":{"skipFirstRender":!0},"initialize":function(e){this.$container=e.$container
},"scroll":function(){var e=(this.page-1)*this.pageWidth,t=(this.page-1)*this.itemsPerPage,n=t+this.itemsPerPage;t-=this.itemsPadding,n+=this.itemsPadding;for(var i=0,s=this.children.length;s>i;i++){var a=this.children.findByIndex(i);i>=t&&n>i?a.show():a.hide()}this.trigger("scroll",this,this.page,-1*e)},"previous":function(){this.page=Math.max(this.page-1,1),this.scroll()},"next":function(){this.page=Math.min(this.page+1,this.pages),this.scroll()},"onMeasure":function(){this.containerWidth=this.$container.width(),this.listWidth=this.itemWidth*this.children.length,this.itemsPerPage=Math.floor((this.containerWidth+this.itemMarginRight)/this.itemWidth),this.itemsPadding=this.pagesPadding*this.itemsPerPage,this.pageWidth=this.itemWidth*this.itemsPerPage,this.pages=Math.ceil(this.listWidth/this.pageWidth),this.$el.width(this.listWidth),this.$el.removeClass("hidden"),this.page=1,this.scroll()
},"onCollectionBeforeClose":function(){this.isClosing=!0},"onCollectionClosed":function(){this.isClosing=!1},"onItemRemoved":function(){this.isClosing||this.measureList()}});return t}),define("hb!templates/desktop/lists/library/MediaTileListItem",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(){return"hide-actions"}function r(){return"selected"}function o(){return"hidden"}function l(){return'\n      <span class="media-added-at"></span>\n    '}function c(e,t){var i,s,a;
return a={"hash":{},"inverse":x.program(12,u,t),"fn":x.program(10,d,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,e&&e.sort,"originallyAvailableAt",a):k.call(e,"if_eq",e&&e.sort,"originallyAvailableAt",a),s||0===s?s:""}function d(){return'\n      <span class="media-available-at"></span>\n    '}function u(e,t){var i,s,a;return a={"hash":{},"inverse":x.program(15,p,t),"fn":x.program(13,h,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,e&&e.sort,"rating",a):k.call(e,"if_eq",e&&e.sort,"rating",a),s||0===s?s:""
}function h(){return'\n      <span class="media-rating"></span>\n    '}function p(e,t){var i,s,a;return a={"hash":{},"inverse":x.program(18,m,t),"fn":x.program(16,f,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,e&&e.sort,"mediaHeight",a):k.call(e,"if_eq",e&&e.sort,"mediaHeight",a),s||0===s?s:""}function f(){return'\n      <span class="media-resolution"></span>\n    '}function m(e,t){var i,s,a;return a={"hash":{},"inverse":x.noop,"fn":x.program(19,g,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,e&&e.sort,"duration",a):k.call(e,"if_eq",e&&e.sort,"duration",a),s||0===s?s:""
}function g(){return'\n      <span class="media-duration"></span>\n    '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var v,y,b,w="",x=this,k=n.helperMissing,S="function",C=this.escapeExpression;return w+='<a class="media-poster-container ',v=n.unless.call(t,t&&t.showActions,{"hash":{},"inverse":x.noop,"fn":x.program(1,a,s),"data":s}),(v||0===v)&&(w+=v),w+=" ",v=n["if"].call(t,t&&t.selected,{"hash":{},"inverse":x.noop,"fn":x.program(3,r,s),"data":s}),(v||0===v)&&(w+=v),w+='" href="',(v=n.url)?v=v.call(t,{"hash":{},"data":s}):(v=t&&t.url,v=typeof v===S?v.call(t,{"hash":{},"data":s}):v),w+=C(v)+'">\n  <div class="media-poster">\n    <div class="media-poster-overlay"></div>\n\n    <div class="media-poster-overlay-icons">\n      <i class="analyzing-icon media-poster-overlay-icon glyphicon magic hidden"></i>\n      <i class="matching-icon media-poster-overlay-icon glyphicon search hidden"></i>\n      <i class="metadata-icon media-poster-overlay-icon glyphicon tags hidden"></i>\n      <i class="trash-icon media-poster-overlay-icon glyphicon bin warning hidden"></i>\n    </div>\n\n    <div class="media-poster-actions ',v=n.unless.call(t,t&&t.showActions,{"hash":{},"inverse":x.noop,"fn":x.program(5,o,s),"data":s}),(v||0===v)&&(w+=v),w+='">\n      <button class="play-btn media-poster-btn btn-link" tabindex="-1"><i class="glyphicon play"></i></button>\n      <button class="play-unwatched-btn media-poster-btn btn-link" tabindex="-1"><i class="glyphicon play"></i></button>\n      <button class="edit-btn media-poster-btn btn-link" tabindex="-1"><i class="glyphicon pencil"></i></button>\n      <button class="more-btn media-poster-btn btn-link" tabindex="-1"><i class="glyphicon more"></i></button>\n    </div>\n\n    <span class="media-count-badge badge badge-lg hidden"></span>\n    <span class="unwatched-count-badge badge badge-lg hidden"></span>\n\n    <div class="media-poster-progress-track hidden"></div>\n    <div class="media-poster-progress hidden"></div>\n    <div class="loading loading-inline"></div>\n  </div>\n\n  <span class="unwatched-icon"></span>\n\n  <div class="media-title media-heading"></div>\n  <div class="media-subtitle-1 media-heading secondary"></div>\n  <div class="media-subtitle-2 media-heading secondary"></div>\n  <div class="media-context media-heading secondary"></div>\n\n  <div class="media-sort media-heading secondary">\n    ',b={"hash":{},"inverse":x.program(9,c,s),"fn":x.program(7,l,s),"data":s},v=n.if_eq||t&&t.if_eq,y=v?v.call(t,t&&t.sort,"addedAt",b):k.call(t,"if_eq",t&&t.sort,"addedAt",b),(y||0===y)&&(w+=y),w+='\n  </div>\n\n  <div class="media-subtitle-1-fill media-heading hidden"></div>\n  <div class="media-subtitle-2-fill media-heading hidden"></div>\n</a>\n\n<div class="media-actions-dropdown dropdown">\n  <div class="dropdown-toggle" data-toggle="dropdown"></div>\n</div>\n'
})}),define("hb!templates/desktop/lists/library/MediaListItem",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(){return"show-actions"}function r(){return"selected"}function o(){return"hidden"}function l(){return'\n      <span class="media-added-at"></span>\n    '}function c(e,t){var i,s,a;return a={"hash":{},"inverse":x.program(12,u,t),"fn":x.program(10,d,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,e&&e.sort,"originallyAvailableAt",a):k.call(e,"if_eq",e&&e.sort,"originallyAvailableAt",a),s||0===s?s:""
}function d(){return'\n      <span class="media-available-at"></span>\n    '}function u(e,t){var i,s,a;return a={"hash":{},"inverse":x.program(15,p,t),"fn":x.program(13,h,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,e&&e.sort,"rating",a):k.call(e,"if_eq",e&&e.sort,"rating",a),s||0===s?s:""}function h(){return'\n      <span class="media-rating"></span>\n    '}function p(e,t){var i,s,a;return a={"hash":{},"inverse":x.program(18,m,t),"fn":x.program(16,f,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,e&&e.sort,"mediaHeight",a):k.call(e,"if_eq",e&&e.sort,"mediaHeight",a),s||0===s?s:""
}function f(){return'\n      <span class="media-resolution"></span>\n    '}function m(e,t){var i,s,a;return a={"hash":{},"inverse":x.noop,"fn":x.program(19,g,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,e&&e.sort,"duration",a):k.call(e,"if_eq",e&&e.sort,"duration",a),s||0===s?s:""}function g(){return'\n      <span class="media-duration"></span>\n    '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var v,y,b,w="",x=this,k=n.helperMissing,S="function",C=this.escapeExpression;
return w+='<a class="media-container ',v=n["if"].call(t,t&&t.showActions,{"hash":{},"inverse":x.noop,"fn":x.program(1,a,s),"data":s}),(v||0===v)&&(w+=v),w+=" ",v=n["if"].call(t,t&&t.selected,{"hash":{},"inverse":x.noop,"fn":x.program(3,r,s),"data":s}),(v||0===v)&&(w+=v),w+='" href="',(v=n.url)?v=v.call(t,{"hash":{},"data":s}):(v=t&&t.url,v=typeof v===S?v.call(t,{"hash":{},"data":s}):v),w+=C(v)+'">\n  <div class="media-actions ',v=n.unless.call(t,t&&t.showActions,{"hash":{},"inverse":x.noop,"fn":x.program(5,o,s),"data":s}),(v||0===v)&&(w+=v),w+='">\n    <button class="play-btn media-action-btn btn-link" tabindex="-1"><i class="glyphicon play"></i></button>\n    <button class="play-unwatched-btn media-action-btn btn-link" tabindex="-1"><i class="glyphicon play"></i></button>\n    <button class="edit-btn media-action-btn btn-link btn-loading btn-loading-static" tabindex="-1">\n      <i class="btn-label glyphicon pencil"></i>\n      <div class="loading loading-sm"></div>\n    </button>\n    <button class="more-btn media-action-btn btn-link" tabindex="-1"><i class="glyphicon more"></i></button>\n  </div>\n\n  <span class="media-title media-heading"></span>\n  <span class="media-subtitle-2 media-heading secondary"></span>\n  <span class="media-subtitle-1 media-heading secondary"></span>\n  <span class="unwatched-icon"></span>\n  <span class="media-context media-heading"></span>\n\n  <span class="media-sort media-heading secondary">\n    ',b={"hash":{},"inverse":x.program(9,c,s),"fn":x.program(7,l,s),"data":s},v=n.if_eq||t&&t.if_eq,y=v?v.call(t,t&&t.sort,"addedAt",b):k.call(t,"if_eq",t&&t.sort,"addedAt",b),(y||0===y)&&(w+=y),w+='\n  </span>\n</a>\n\n<div class="media-actions-dropdown dropdown pull-right">\n  <div class="dropdown-toggle" data-toggle="dropdown"></div>\n</div>\n'
})}),define("hb!templates/desktop/Rating",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s="";return s+='<i class="star-icon glyphicon ',i=n["if"].call(e,e,{"hash":{},"inverse":d.program(4,o,t),"fn":d.program(2,r,t),"data":t}),(i||0===i)&&(s+=i),s+='"></i>'}function r(){return"star"}function o(){return"dislikes"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var l,c="",d=this;return l=n.each.call(t,t&&t.stars,{"hash":{},"inverse":d.noop,"fn":d.program(1,a,s),"data":s}),(l||0===l)&&(c+=l),c+="\n"
})}),define("plex/desktop/views/Rating",["hb!templates/desktop/Rating.tpl","jquery","marionette","plex/base/commands/Commands"],function(e,t,n,i){var s=n.ItemView.extend({"tagName":"span","className":"rating","template":e,"disabled":!0,"modelEvents":{"change:rating":"onRatingChange","change:userRating":"onRatingChange"},"events":{"mouseenter":"onMouseEnter","mouseleave":"onMouseLeave","mouseover .star-icon":"onMouseOver","click":"onClick"},"initialize":function(e){this.disabled=e.disabled,this.update()
},"update":function(){this.metadataRating=this.model.get("rating")||0,this.userRating=this.model.get("userRating"),this.rating=this.userRating?this.userRating:this.metadataRating},"serializeData":function(){var e=Math.round(this.rating/2);return{"stars":[e>0,e>1,e>2,e>3,e>4]}},"onRender":function(){0===this.rating&&this.disabled&&this.$el.addClass("hidden"),this.$el.removeClass("hide user-rating disabled"),this.userRating&&this.$el.addClass("user-rating"),this.disabled||this.model.server.get("shared")?(this.$el.addClass("disabled"),this.undelegateEvents()):this.delegateEvents()
},"onRatingChange":function(){this.update(),this.render()},"onMouseEnter":function(){this.$el.addClass("user-rating")},"onMouseLeave":function(){this.render(),this.$el.removeClass("saved")},"onMouseOver":function(e){var n=t(e.target),i=this.$(".glyphicon"),s=i.index(n);i.each(function(e){var n=s>=e;t(this).toggleClass("star",n).toggleClass("dislikes",!n)})},"onClick":function(e){e.preventDefault();var t=this.$(".glyphicon.star"),n=2*t.length;this.$el.addClass("saved"),i.execute("rate",{"item":this.model,"rating":n})
}});return s}),define("plex/desktop/views/lists/library/MediaListItem",["hb!templates/desktop/lists/library/MediaListItem.tpl","jquery","underscore","moment","marionette","plex/base/utils/Dispatcher","plex/base/utils/MediaUtil","plex/base/utils/formatters/DateTimeUtil","plex/base/utils/formatters/MetadataUtil","plex/base/adapters/LocalizerAdapter","plex/base/commands/Commands","plex/base/models/SettingsModel","plex/desktop/models/MediaActionsModel","plex/desktop/views/Rating","plex/desktop/views/dropdowns/MediaActionsDropdown","plex/desktop/views/modals/EditMetadataModal"],function(e,t,n,i,s,a,r,o,l,c,d,u,h,p,f,m){var g=s.Layout.extend({"tagName":"li","className":"striped-list-item media-list-item","template":e,"visible":!1,"selected":!1,"ui":{"container":".media-container","actions":".media-actions","dropdown":".media-actions-dropdown"},"regions":{"rating":".media-rating"},"events":{"mouseenter > a":"onMouseEnter","mouseleave > a":"onMouseLeave","mousedown > a":"onMouseDown","click > a":"onClick","click .play-btn":"onPlayClick","click .play-unwatched-btn":"onPlayUnwatchedClick","click .edit-btn":"onEditClick","click .more-btn":"onMoreClick","hide.bs.dropdown .media-actions-dropdown":"onDropdownHide"},"onlyAfterRender":["select","deselect"],"initialize":function(e){this.skipFirstRender=e.skipFirstRender;
var t;this.model&&(t=this.model.get("type")),t||(t=e.type),this.type=t,this.sort=e.sort,this.$el.addClass(t),this.sort&&/^(addedAt|originallyAvailableAt|rating|mediaHeight|duration)$/.test(this.sort)&&this.$el.addClass("show-sort"),this.mediaActions=new h({},{"item":this.model,"type":this.type}),this.listenTo(this.mediaActions,{"change:showPlay":this.onActionsChange,"change:showEdit":this.onActionsChange,"change:showListDropdown":this.onActionsChange})},"serializeData":function(){this.shared=this.model.server.get("shared"),this.synced=this.model.server.get("synced"),this.multiuser=this.model.server.get("multiuser");
var e=this.model.toJSON(),t="#!/server/"+encodeURIComponent(this.model.server.id);if(e.isFolder)t+="/section/"+encodeURIComponent(this.model.section.id)+"/folder/"+encodeURIComponent(e.key);else if(e.isChannel){var n=this.model.channel,i=n.id?n.id:n.get("identifier");t+="/channel/"+encodeURIComponent(i),t+="clip"===e.type?"/details/"+encodeURIComponent(e.key):"/"+encodeURIComponent(e.key)}else"playlistItem"===e.type?t="#!/playlist/"+e.playlist+"/details/"+e.id:t+="/details/"+encodeURIComponent(e.key);
return{"item":e,"url":t,"selected":this.selected,"showActions":this.showActions(),"sort":this.sort}},"render":function(){return this.model?this.skipFirstRender?(this.skipFirstRender=!1,this):(this.visible=!0,void s.Layout.prototype.render.apply(this,arguments)):this},"show":function(){this.model&&!this.visible&&(this.image&&this.image.setModel(this.model),this.mediaActions.setParent({"item":this.model}),this.visible=!0,this.render())},"hide":function(){this.model&&this.visible&&(this.image&&this.image.cancel(),this.visible=!1,this.stopListening(this.model),this.$el.empty())
},"select":function(){this.ui.container.addClass("selected")},"deselect":function(){this.ui.container.removeClass("selected")},"getPosterUrl":function(e){return"show"===this.type?this.model.get("parentThumb")||this.model.get("grandparentThumb")||e:e||this.model.get("parentThumb")||this.model.get("grandparentThumb")},"showActions":function(){return this.mediaActions.get("showPlay")||this.mediaActions.get("showEdit")||this.mediaActions.get("showListDropdown")},"bindings":{".play-btn":{"model":"mediaActions","modelAttribute":"showPlay","manual":!0,"autohide":!0},".play-unwatched-btn":{"model":"mediaActions","modelAttribute":"showPlayUnwatched","manual":!0,"autohide":!0},".edit-btn":{"model":"mediaActions","modelAttribute":"showEdit","manual":!0,"autohide":!0},".more-btn":{"model":"mediaActions","modelAttribute":"showListDropdown","manual":!0,"autohide":!0},".unwatched-icon":{"modelAttribute":"viewCount","modelListeners":["viewCount","viewOffset"],"manual":!0,"autohide":function(e){if(!u.get("showUnwatchedIcons"))return!1;
if(!/^(movie|episode|playlistItem)$/.test(this.model.get("type")))return!1;if(this.model.get("isFolder"))return!1;if(this.shared&&!this.multiuser)return!1;var t=this.model.get("viewOffset");return!e&&!t}},".media-title":{"modelAttribute":"title","formatter":function(e){return this.model.get("grandparentTitle")||this.model.get("parentTitle")||e}},".media-subtitle-1":{"modelAttribute":"year","modelListeners":["title","year"],"autohide":!0,"formatter":function(e){var t;if("playlistItem"===this.model.get("type")){var n=c.get();
this.model.get("recommender")&&(t=n.t("from {1}",this.model.get("recommender")))}else{var i=this.model.get("grandparentTitle")||this.model.get("parentTitle");t=i?this.model.get("title"):e}return this.$el.toggleClass("show-subtitle",!!t),t}},".media-subtitle-2":{"modelAttribute":"index","modelListeners":["index","message"],"autohide":!0,"formatter":function(e){var t=this.model.get("type");return"playlistItem"===t?this.model.get("message"):"episode"===t?r.getSeasonEpisodeIndex({"seasonIndex":this.model.get("parentIndex"),"episodeIndex":e,"date":this.model.get("originallyAvailableAt")}):void 0
}},".media-context":{"modelAttribute":"sourceTitle","manual":!0,"formatter":function(e,t){var n=!!this.model.get("librarySectionID"),i=n?this.model.server.get("friendlyName"):e;t.toggleClass("multiserver-only",n),t.text(i)}},".media-added-at":{"modelAttribute":"addedAt","autohide":!0,"formatter":function(e){return i.unix(e).fromNow()}},".media-available-at":{"modelAttribute":"originallyAvailableAt","autohide":!0,"formatter":function(e){return o.formatDate(e)}},".media-resolution":{"modelAttribute":"Media","autohide":!0,"formatter":function(e){return e&&e.length?l.formatResolution(e[0].videoResolution):""
}},".media-duration":{"modelAttribute":"duration","autohide":!0,"formatter":function(e){return o.formatHoursMinutes(e)}}},"onRender":function(){this.image&&this.image.setElement(this.ui.poster),("rating"===this.sort||this.showRating)&&this.rating.show(new p({"model":this.model,"disabled":!0}))},"onClose":function(){this.mediaActions.stopListening(),this.image&&this.image.close(),this.dropdown&&this.dropdown.close()},"onActionsChange":function(){if(this._isRendered){var e=!this.showActions();this.ui.container.toggleClass("hide-actions",e),this.ui.actions.toggleClass("hidden",e)
}},"onMouseEnter":function(e){this.model.section&&this.model.section.get("selecting")&&this.trigger("autoselect",{"shiftKey":e.shiftKey})},"onMouseLeave":function(){this.preventClick=!1},"onMouseDown":function(e){var t=this.model.section,n=e.metaKey||e.ctrlKey||e.shiftKey;(n||t&&t.get("selecting"))&&(this.trigger("select",{"shiftKey":e.shiftKey}),this.preventClick=!0)},"onClick":function(e){return this.preventClick?(e.preventDefault(),void(this.preventClick=!1)):void(/^(track|photo)$/.test(this.model.get("type"))&&(e.preventDefault(),d.execute("playMedia",{"item":this.model})))
},"onPlayClick":function(e){e.preventDefault(),e.stopImmediatePropagation(),d.execute("playMedia",{"item":this.model})},"onPlayUnwatchedClick":function(){event.preventDefault(),event.stopImmediatePropagation(),d.execute("playMedia",{"item":this.model,"unwatched":!0})},"onEditClick":function(e){e.preventDefault(),e.stopImmediatePropagation();var i=t(e.currentTarget),s=i.hasClass("btn-loading")?i:this.$el;if(!s.hasClass("active")){s.addClass("active");var r=this.model.populate();r.done(n.bind(function(){a.trigger("show:modal",new m({"model":this.model}))
},this)),r.always(n.bind(function(){s.removeClass("active")},this))}},"onMoreClick":function(e){e.preventDefault(),e.stopImmediatePropagation(),this.dropdown=new f({"model":this.model}),this.ui.dropdown.append(this.dropdown.render().el),this.ui.dropdown.addClass("open"),this.$el.addClass("force-hover")},"onDropdownHide":function(){this.dropdown.close(),this.dropdown=null,this.$el.removeClass("force-hover")}});return g}),define("plex/desktop/views/lists/library/MediaTileListItem",["hb!templates/desktop/lists/library/MediaTileListItem.tpl","underscore","jquery","plex/desktop/views/lists/library/MediaListItem","plex/desktop/views/images/MediaPosterImage"],function(e,t,n,i,s){var a=i.extend({"className":"poster-item media-tile-list-item","template":e,"ui":{"container":".media-poster-container","poster":".media-poster","actions":".media-poster-actions","progressTrack":".media-poster-progress-track","dropdown":".media-actions-dropdown","subtitle1Fill":".media-subtitle-1-fill","subtitle2Fill":".media-subtitle-2-fill"},"initialize":function(){i.prototype.initialize.apply(this,arguments);
var e=this.type,t=150;"episode"===e?e="show":("clip"===e||"playlistItem"===e)&&(t=250),this.image=new s({"model":this.model,"type":e,"getUrl":this.getPosterUrl,"width":t})},"updateDim":function(){var e=this.model.get("mediaState"),t=this.model.get("metadataState"),n=t&&"created"!==t||e,i=!!this.model.get("deletedAt");n||i?this.$el.addClass("dim"):this.$el.removeClass("dim")},"bindings":t.extend({},i.prototype.bindings,{".media-subtitle-1":{"modelAttribute":"year","modelListeners":["title","year"],"autohide":!0,"formatter":function(){var e=i.prototype.bindings[".media-subtitle-1"].formatter.apply(this,arguments);
return"playlistItem"!==this.model.get("type")&&this.ui.subtitle1Fill.toggleClass("hidden",!!e),e}},".media-subtitle-2":{"modelAttribute":"index","modelListeners":["index","message"],"autohide":!0,"formatter":function(){var e=i.prototype.bindings[".media-subtitle-2"].formatter.apply(this,arguments);return"episode"===this.model.get("type")&&this.ui.subtitle2Fill.toggleClass("hidden",!!e),e}},".media-count-badge":{"modelAttribute":"Media","formatter":function(e){return e.length},"autohide":function(e){return/^(clip|playlistItem)$/.test(this.model.get("type"))?!1:e>1
}},".unwatched-count-badge":{"modelAttribute":"unviewedLeafCount","autohide":function(e){return this.shared&&!this.multiuser?!1:/^(artist|album)$/.test(this.model.get("type"))?!1:!!e}},".media-poster-progress":{"modelAttribute":"viewOffset","manual":!0,"formatter":function(e,t){if(e){var n=Math.round(e/this.model.get("duration")*100);t.css("width",n+"%")}t.toggleClass("hidden",!e),this.ui.progressTrack.toggleClass("hidden",!e)}},".analyzing-icon":{"modelAttribute":"mediaState","manual":!0,"autohide":!0,"formatter":function(e){return this.updateDim(),e
}},".matching-icon":{"modelAttribute":"metadataState","manual":!0,"autohide":!0,"formatter":function(e){return this.updateDim(),"matching"===e}},".metadata-icon":{"modelAttribute":"metadataState","manual":!0,"autohide":!0,"formatter":function(e){return this.updateDim(),"processing"===e||"loading"===e}},".trash-icon":{"modelAttribute":"deletedAt","manual":!0,"autohide":!0,"formatter":function(e){return this.updateDim(),e}}}),"onMoreClick":function(e){i.prototype.onMoreClick.apply(this,arguments);var t=n(e.currentTarget);
this.ui.dropdown.css("top",this.ui.actions.position().top),this.ui.dropdown.css("left",t.position().left)}});return a}),define("plex/desktop/views/lists/library/HorizontalMediaTileList",["plex/desktop/views/lists/HorizontalTileList","plex/desktop/views/lists/library/MediaTileListItem"],function(e,t){var n=e.extend({"tagName":"ul","className":"tile-list media-tile-list horizontal-media-tile-list hidden","itemView":t});return n}),define("plex/desktop/views/dashboard/DashboardMediaView",["hb!templates/desktop/dashboard/DashboardMediaView.tpl","underscore","jquery","marionette","plex/base/models/AppModel","plex/base/models/library/MetadataCollection","plex/desktop/views/lists/library/HorizontalMediaTileList"],function(e,t,n,i,s,a,r){var o=i.Layout.extend({"className":"dashboard-container hidden","template":e,"resizeDelay":200,"ui":{"previousBtn":".previous-btn","nextBtn":".next-btn","list":".dashboard-list-container"},"regions":{"list":".dashboard-list-container"},"events":{"click .previous-btn":"onPreviousClick","click .next-btn":"onNextClick"},"initialize":function(e){this.onResize=t.debounce(t.bind(this.onResize,this),this.resizeDelay),this.key=e.key,this.label="onDeck"===e.key?"On Deck":"Recently Added",n(window).on("resize",this.onResize),this.listenTo(s,"change:primaryServer",this.setup),this.setup()
},"setup":function(){var e=s.get("primaryServer");this.$el.addClass("hidden"),this.list.close(),this.collection&&(this.stopListening(this.collection),this.collection.release()),!e||e.get("shared")&&!e.get("multiuser")||(this.collection=new a([],{"server":e,"url":"/library/"+this.key}),this.listenToOnce(this.collection,"reset",this.onReset),this.collection.fetch({"reset":!0,"cancelable":!0}))},"serializeData":function(){return{"label":this.label}},"onClose":function(){n(window).off("resize",this.onResize),this.collection&&(this.stopListening(this.collection),this.collection.release())
},"onResize":function(){this.list.currentView&&this.list.currentView.measureList&&this.list.currentView.measureList()},"onReset":function(e){if(e.length){this.$el.removeClass("hidden");var t=new r({"collection":e,"$container":this.$el});this.listenTo(t,"scroll",this.onListScroll),this.list.show(t)}},"onListScroll":function(e,t,n){this.ui.previousBtn.toggleClass("disabled",1>=t),this.ui.nextBtn.toggleClass("disabled",t>=e.pages),this.ui.list.css("transform","translate("+n+"px, 0)")},"onPreviousClick":function(e){e.preventDefault(),this.ui.previousBtn.isDisabled()||this.list.currentView.previous()
},"onNextClick":function(e){e.preventDefault(),this.ui.nextBtn.isDisabled()||this.list.currentView.next()}});return o}),define("hb!templates/desktop/dashboard/DashboardChannelsView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,r,o="",l=n.helperMissing,c=this.escapeExpression;return o+='<ul class="nav nav-header nav-dashboard pull-right">\n  <li><a class="previous-btn btn-gray" href="#"><i class="glyphicon chevron-left"></i></a></li>\n  <li><a class="next-btn btn-gray" href="#"><i class="glyphicon chevron-right"></i></a></li>\n</ul>\n\n<h3>',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Channels",r):l.call(t,"t","Channels",r)))+'</h3>\n\n<div class="dashboard-list-container"></div>\n'
})}),define("plex/base/models/channel/ChannelCollection",["underscore","plex/base/models/BaseCollection","plex/base/models/channel/ChannelModel"],function(e,t,n){var i=t.extend({"model":n,"url":function(){return"/channels/"+this.subset},"initialize":function(e,t){this.subset=t.subset||"all"},"parse":function(t){e.isString(t)&&(t=t.replace(/<(\/?)(Directory|Video|Track|Photo)/g,"<$1Channel"));var n=this.convert(t);return this.viewGroup=n.viewGroup,n.Channel},"sortByTitle":function(e){return e.get("title").toLowerCase()
},"filterByType":function(e){var t=this.filter(function(t){return t.get("type")===e});return this.clone(t)}});return i}),define("hb!templates/desktop/lists/channel/ChannelTileListItem",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(){return'\n        <button class="settings-btn media-poster-btn btn-link" tabindex="-1"><i class="glyphicon cogwheel"></i></button>\n      '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var r,o,l,c="",d=n.helperMissing,u=this.escapeExpression,h=this;
return c+='<a class="media-poster-container" href="#!/server/',l={"hash":{},"data":s},c+=u((r=n.encodeUrl||t&&t.encodeUrl,r?r.call(t,t&&t.serverID,l):d.call(t,"encodeUrl",t&&t.serverID,l)))+"/channel/",l={"hash":{},"data":s},c+=u((r=n.encodeUrl||t&&t.encodeUrl,r?r.call(t,(r=t&&t.item,null==r||r===!1?r:r.key),l):d.call(t,"encodeUrl",(r=t&&t.item,null==r||r===!1?r:r.key),l)))+'">\n  <div class="media-poster">\n    <div class="media-poster-overlay"></div>\n\n    <div class="media-poster-actions">\n      ',o=n["if"].call(t,(r=t&&t.item,null==r||r===!1?r:r.hasPrefs),{"hash":{},"inverse":h.noop,"fn":h.program(1,a,s),"data":s}),(o||0===o)&&(c+=o),c+='\n      <button class="uninstall-btn media-poster-btn btn-link btn-danger" tabindex="-1"><i class="glyphicon ban"></i></button>\n    </div>\n\n    <div class="loading loading-inline"></div>\n  </div>\n\n  <div class="media-title media-heading"></div>\n  <div class="media-subtitle-1 media-heading secondary"></div>\n</a>\n'
})}),define("hb!templates/desktop/modals/ChannelSettingsModal",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s,a="";return a+="\n          ",s={"hash":{},"data":t},a+=p((i=n.t||e&&e.t,i?i.call(e,"Directory Settings",s):h.call(e,"t","Directory Settings",s)))+"\n        "}function r(e,t){var i,s,a="";return a+="\n          ",s={"hash":{},"data":t},a+=p((i=n.t||e&&e.t,i?i.call(e,"{1} Settings",e&&e.title,s):h.call(e,"t","{1} Settings",e&&e.title,s)))+"\n        "
}function o(e,t){var i,s,a="";return a+="\n          ",s={"hash":{"idSuffix":"_c"},"data":t},a+=p((i=n.partial||e&&e.partial,i?i.call(e,"setting",s):h.call(e,"partial","setting",s)))+"\n        "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var l,c,d,u="",h=n.helperMissing,p=this.escapeExpression,f=this;return u+='<div class="modal-dialog">\n  <div class="modal-content">\n    <div class="modal-header">\n      <button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button>\n      <h4 class="modal-title">\n        <i class="modal-icon glyphicon cogwheel"></i>\n\n        ',d={"hash":{},"inverse":f.program(3,r,s),"fn":f.program(1,a,s),"data":s},l=n.if_eq||t&&t.if_eq,c=l?l.call(t,t&&t.title,"Preferences...",d):h.call(t,"if_eq",t&&t.title,"Preferences...",d),(c||0===c)&&(u+=c),u+='\n      </h4>\n    </div>\n\n    <form id="channel-settings-form">\n      <div class="modal-body settings-container">\n        ',c=n.each.call(t,t&&t.settings,{"hash":{},"inverse":f.noop,"fn":f.program(5,o,s),"data":s}),(c||0===c)&&(u+=c),u+='\n      </div>\n\n      <div class="modal-footer">\n        <button type="button" class="cancel-btn btn btn-lg btn-default" data-dismiss="modal">',d={"hash":{},"data":s},u+=p((l=n.t||t&&t.t,l?l.call(t,"Cancel",d):h.call(t,"t","Cancel",d)))+'</button>\n        <button type="submit" class="submit-btn btn btn-lg btn-primary btn-loading">\n          <div class="loading loading-sm"></div>\n          <span class="btn-label">',d={"hash":{},"data":s},u+=p((l=n.t||t&&t.t,l?l.call(t,"Save",d):h.call(t,"t","Save",d)))+"</span>\n        </button>\n      </div>\n    </form>\n  </div>\n</div>\n"
})}),define("plex/desktop/views/modals/ChannelSettingsModal",["hb!templates/desktop/modals/ChannelSettingsModal.tpl","underscore","jquery","plex/base/utils/Dispatcher","plex/base/adapters/LocalizerAdapter","plex/desktop/views/modals/BaseModal"],function(e,t,n,i,s,a){var r=a.extend({"name":"channelSettingsModal","className":"channel-settings-modal modal fade","template":e,"ui":{"submitBtn":".submit-btn"},"events":t.extend({"change input[name]":"onInputChange","change select[name]":"onInputChange","submit #channel-settings-form":"onSubmit"},a.prototype.events),"initialize":function(){this.changes={}
},"serializeData":function(){var e=this.model.get("title")||this.model.get("name");return{"title":e?e:"Preferences...","settings":this.collection.toJSON()}},"onInputChange":function(e){var t=e.currentTarget,n=t.value;"checkbox"==t.type&&(n=t.checked),this.changes[t.name]=n},"onSubmit":function(e){if(e.preventDefault(),t.isEmpty(this.changes))return void this.hide();var a=this.ui.submitBtn;if(!a.hasClass("active")){a.addClass("active");var r=this.collection.first(),o=r.getSaveParams(this.changes),l=t.result(this.collection,"url"),c=l+"/set?"+n.param(o,!0),d=n.ajax(r.server.getXHROptions(c));
d.done(t.bind(function(){this.hide()},this)),d.fail(t.bind(function(){var e=s.get();i.trigger("show:alert",{"type":"error","message":e.t("There was a problem saving these settings.")})},this)),d.always(function(){a.removeClass("active")})}}});return r}),define("plex/desktop/views/lists/channel/ChannelTileListItem",["hb!templates/desktop/lists/channel/ChannelTileListItem.tpl","underscore","marionette","plex/base/utils/Dispatcher","plex/base/adapters/LocalizerAdapter","plex/base/commands/Commands","plex/base/models/server/ServerSettingCollection","plex/desktop/views/images/MediaPosterImage","plex/desktop/views/modals/ChannelSettingsModal"],function(e,t,n,i,s,a,r,o,l){var c=n.ItemView.extend({"tagName":"li","className":"poster-item media-tile-list-item channel","template":e,"ui":{"poster":".media-poster"},"events":{"click .settings-btn":"onSettingsClick","click .uninstall-btn":"onUninstallClick"},"initialize":function(e){this.skipFirstRender=e.skipFirstRender,this.image=new o({"model":this.model,"type":"channel","width":150})
},"serializeData":function(){return{"item":this.model.toJSON(),"serverID":this.model.server.id}},"render":function(){return this.skipFirstRender?(this.skipFirstRender=!1,this):(this.visible=!0,void n.ItemView.prototype.render.apply(this,arguments))},"show":function(){this.visible||(this.visible=!0,this.render())},"hide":function(){this.visible&&(this.image.cancel(),this.visible=!1,this.stopListening(this.model),this.$el.empty())},"bindings":{".media-title":{"modelAttribute":"title"},".media-subtitle-1":{"modelAttribute":"type","autohide":!0,"formatter":function(e){var t=s.get();
return"video"===e?t.t("Video"):"music"===e?t.t("Music"):"photos"===e?t.t("Photo"):""}}},"onRender":function(){this.image.setElement(this.ui.poster)},"onClose":function(){this.image.close()},"onSettingsClick":function(e){if(e.preventDefault(),!this.$el.hasClass("active")){this.$el.addClass("active");var n=new r([],{"server":this.model.server,"url":this.model.id+"/:/prefs"}),s=n.fetch();s.done(t.bind(function(){i.trigger("show:modal",new l({"model":this.model,"collection":n}))},this)),s.always(t.bind(function(){this.$el.removeClass("active")
},this))}},"onUninstallClick":function(e){if(e.preventDefault(),!this.$el.hasClass("active")){this.$el.addClass("active");var n=a.execute("uninstallChannel",{"channel":this.model});n.done(t.bind(function(){this.model.trigger("destroy",this.model,this.model.collection)},this)),n.always(t.bind(function(){this.$el.removeClass("active")},this))}}});return c}),define("plex/desktop/views/lists/channel/HorizontalChannelTileList",["plex/desktop/views/lists/HorizontalTileList","plex/desktop/views/lists/channel/ChannelTileListItem"],function(e,t){var n=e.extend({"tagName":"ul","className":"tile-list media-tile-list horizontal-media-tile-list channel-tile-list hidden","itemView":t});
return n}),define("plex/desktop/views/dashboard/DashboardChannelsView",["hb!templates/desktop/dashboard/DashboardChannelsView.tpl","underscore","jquery","plex/base/models/AppModel","plex/base/models/channel/ChannelCollection","plex/desktop/views/dashboard/DashboardMediaView","plex/desktop/views/lists/channel/HorizontalChannelTileList"],function(e,t,n,i,s,a,r){var o=a.extend({"template":e,"initialize":function(){this.onResize=t.debounce(t.bind(this.onResize,this),this.resizeDelay),n(window).on("resize",this.onResize),this.listenTo(i,"change:primaryServer",this.setup),this.setup()
},"setup":function(){var e=i.get("primaryServer");this.$el.addClass("hidden"),e&&!e.get("shared")&&(this.collection=new s([],{"server":e,"subset":"recentlyViewed","pageSize":50}),this.listenToOnce(this.collection,"reset",this.onReset),this.collection.fetch({"reset":!0,"cancelable":!0}))},"onReset":function(e){if(e.length){this.$el.removeClass("hidden");var t=new r({"collection":e,"$container":this.$el});this.listenTo(t,"scroll",this.onListScroll),this.list.show(t)}}});return o}),define("hb!templates/desktop/dashboard/DashboardPlaylistView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s="";
return s+='\n    <a class="playlist-help" href="',(i=n.helpRoute)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.helpRoute,i=typeof i===d?i.call(e,{"hash":{},"data":t}):i),s+=u(i)+'" target="',(i=n.defaultTarget)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.defaultTarget,i=typeof i===d?i.call(e,{"hash":{},"data":t}):i),s+=u(i)+'"><i class="glyphicon circle-question-mark"></i></a>\n  '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var r,o,l,c="",d="function",u=this.escapeExpression,h=n.helperMissing,p=this;
return c+='<ul class="nav nav-header nav-dashboard pull-right">\n  <li><a class="previous-btn btn-gray disabled" href="#"><i class="glyphicon chevron-left"></i></a></li>\n  <li><a class="next-btn btn-gray disabled" href="#"><i class="glyphicon chevron-right"></i></a></li>\n</ul>\n\n<h3>\n  ',l={"hash":{},"data":s},c+=u((r=n.t||t&&t.t,r?r.call(t,t&&t.label,l):h.call(t,"t",t&&t.label,l)))+"\n\n  ",o=n["if"].call(t,t&&t.helpRoute,{"hash":{},"inverse":p.noop,"fn":p.program(1,a,s),"data":s}),(o||0===o)&&(c+=o),c+='\n</h3>\n\n<div class="dashboard-list-container"></div>\n'
})}),define("plex/base/models/user/PlaylistItemModel",["underscore","plex/base/utils/Parser","plex/base/models/library/MetadataModel"],function(e,t,n){var i=n.extend({"idAttribute":"id","url":function(){return"/pms/playlists/"+this.get("playlist")+"/items/"+this.id},"initialize":function(e,t){this.set("playlist",t.playlist||this.collection.key)},"convert":function(){var e=n.prototype.convert.apply(this,arguments);return t.parseInteger(e,"id"),e},"parse":function(){var e=n.prototype.parse.apply(this,arguments);
if(e.type="playlistItem",e.ratingKey=e.url,e.thumb){var i=/\?(\d+)$/.exec(e.thumb);i&&(e.addedAt=i[1],t.parseInteger(e,"addedAt"))}return e}});return i}),define("plex/base/models/user/PlaylistItemCollection",["underscore","plex/base/utils/Parser","plex/base/models/ConfigModel","plex/base/models/BaseCollection","plex/base/models/user/PlaylistItemModel"],function(e,t,n,i,s){var a=i.extend({"model":s,"url":function(){return"/pms/playlists/"+this.key+"/"+this.subset},"initialize":function(e,t){this.key=t.key,this.label=t.label||"queue"===this.key?"Queue":"Recommended",this.subset=t.subset||"all","queue"===this.key&&(this.helpRoute=n.get("bundled")||n.get("hosted")?"#!/playlist/"+this.key+"/help":this.server.resolveUrl("/queue/help"))
},"parse":function(n){var i=this.convert(n);return t.parseArray(i,"Video"),e.each(i.Video,function(t){t.identifier=i.identifier,t.containerKey=e.result(this,"url")},this),i.Video},"filterWatched":function(){var e=this.filter(function(e){return!!e.get("viewCount")});return this.clone(e)},"filterUnwatched":function(){var e=this.filter(function(e){return!e.get("viewCount")});return this.clone(e)}});return a}),define("hb!templates/desktop/dashboard/DashboardEmptyPlaylistView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};
var a,r,o,l="",c=n.helperMissing,d=this.escapeExpression,u="function";return l+='<h4 class="text-muted">\n  ',o={"hash":{},"data":s},l+=d((a=n.t||t&&t.t,a?a.call(t,"No queued items.",o):c.call(t,"t","No queued items.",o)))+'\n  <a href="',(r=n.helpRoute)?r=r.call(t,{"hash":{},"data":s}):(r=t&&t.helpRoute,r=typeof r===u?r.call(t,{"hash":{},"data":s}):r),l+=d(r)+'" target="',(r=n.defaultTarget)?r=r.call(t,{"hash":{},"data":s}):(r=t&&t.defaultTarget,r=typeof r===u?r.call(t,{"hash":{},"data":s}):r),l+=d(r)+'">',o={"hash":{},"data":s},l+=d((a=n.t||t&&t.t,a?a.call(t,"Learn how to add videos to your queue.",o):c.call(t,"t","Learn how to add videos to your queue.",o)))+"</a>\n</h4>\n"
})}),define("plex/desktop/views/dashboard/DashboardEmptyPlaylistView",["hb!templates/desktop/dashboard/DashboardEmptyPlaylistView.tpl","marionette","plex/base/models/ConfigModel"],function(e,t,n){var i=t.ItemView.extend({"template":e,"initialize":function(e){this.type=e.type,this.helpRoute=e.helpRoute},"serializeData":function(){return{"type":this.type,"helpRoute":this.helpRoute,"defaultTarget":n.get("defaultTarget")}}});return i}),define("plex/desktop/views/dashboard/DashboardPlaylistView",["hb!templates/desktop/dashboard/DashboardPlaylistView.tpl","underscore","jquery","plex/base/models/AppModel","plex/base/models/ConfigModel","plex/base/models/user/PlaylistItemCollection","plex/desktop/views/dashboard/DashboardMediaView","plex/desktop/views/lists/library/HorizontalMediaTileList","plex/desktop/views/dashboard/DashboardEmptyPlaylistView"],function(e,t,n,i,s,a,r,o,l){var c=r.extend({"template":e,"initialize":function(e){this.onResize=t.debounce(t.bind(this.onResize,this),this.resizeDelay);
var s=i.get("user");this.type=e.key,this.collection=new a([],{"server":s.server,"parent":s,"key":e.key,"subset":"unwatched"}),this.label=this.collection.label,n(window).on("resize",this.onResize),this.listenTo(i.get("user"),"change:signedIn",this.setup),this.setup()},"setup":function(){var e=i.get("user"),t=e.get("signedIn");this.collection&&(this.stopListening(this.collection),this.collection.release()),this.$el.addClass("hidden"),t&&(this.listenToOnce(this.collection,"reset",this.onReset),this.collection.fetch({"reset":!0,"cancelable":!0}))
},"serializeData":function(){return{"label":this.label,"helpRoute":this.collection.helpRoute,"defaultTarget":s.get("defaultTarget")}},"onReset":function(e){var t;if(!e.length){if("queue"!==this.type)return;t=new l({"type":this.type,"helpRoute":this.collection.helpRoute})}this.$el.removeClass("hidden"),t||(t=new o({"className":o.prototype.className+" show-context","collection":e,"$container":this.$el})),this.listenTo(t,"scroll",this.onListScroll),this.list.show(t)}});return c}),define("plex/desktop/views/dashboard/DashboardView",["hb!templates/desktop/dashboard/DashboardView.tpl","marionette","plex/base/utils/Dispatcher","plex/base/models/SettingsModel","plex/desktop/views/sidebar/DashboardSideBarView","plex/desktop/views/dashboard/DashboardMediaView","plex/desktop/views/dashboard/DashboardChannelsView","plex/desktop/views/dashboard/DashboardPlaylistView"],function(e,t,n,i,s,a,r,o){var l=t.Layout.extend({"className":"priorities-container","template":e,"ui":{"1":".priority-1-container","2":".priority-2-container","3":".priority-3-container","4":".priority-4-container","5":".priority-5-container"},"regions":{"onDeck":".on-deck-container","recentlyAdded":".recently-added-container","channels":".channels-container","queue":".queue-container","recommendations":".recommendations-container"},"initialize":function(){this.onDeckPriority=i.get("dashboardPriorityOnDeck"),this.recentlyAddedPriority=i.get("dashboardPriorityRecentlyAdded"),this.channelsPriority=i.get("dashboardPriorityChannels"),this.queuePriority=i.get("dashboardPriorityQueue"),this.recommendationsPriority=i.get("dashboardPriorityRecommendations"),n.trigger("show:sidebar",new s)
},"onRender":function(){i.get("dashboardOnDeckEnabled")&&this.onDeck.append(new a({"key":"onDeck"}),this.ui[this.onDeckPriority]),i.get("dashboardRecentlyAddedEnabled")&&this.recentlyAdded.append(new a({"key":"recentlyAdded"}),this.ui[this.recentlyAddedPriority]),i.get("dashboardChannelsEnabled")&&this.channels.append(new r,this.ui[this.channelsPriority]),i.get("dashboardQueueEnabled")&&this.queue.append(new o({"key":"queue"}),this.ui[this.queuePriority]),i.get("dashboardRecommendationsEnabled")&&this.recommendations.append(new o({"key":"recommendations"}),this.ui[this.recommendationsPriority])
},"onClose":function(){n.trigger("hide:sidebar")}});return l}),define("hb!templates/desktop/SignInView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{},'<div class="sign-in-logo text-center">\n  <i class="plex-image logo"></i>\n</div>\n\n<div class="row row-padded">\n  <div class="col-sm-6 col-sm-offset-3">\n    <form id="user-account-form"></form>\n  </div>\n</div>\n'})}),define("hb!templates/desktop/SignInFormView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s,a="";
return a+='\n    <div class="remember-group checkbox">\n      <label class="control-label">\n        <input type="checkbox" id="remember" checked> ',s={"hash":{},"data":t},a+=u((i=n.t||e&&e.t,i?i.call(e,"Remember me",s):d.call(e,"t","Remember me",s)))+"\n      </label>\n    </div>\n  "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var r,o,l,c="",d=n.helperMissing,u=this.escapeExpression,h=this;return c+='<div class="row">\n  <div class="col-sm-12">\n    <h3 class="sign-in-header">\n      <a class="sign-in-btn selected" href="#">',l={"hash":{},"data":s},c+=u((r=n.t||t&&t.t,r?r.call(t,"Sign In",l):d.call(t,"t","Sign In",l)))+'</a>\n      <span class="sign-in-header-divider">',l={"hash":{},"data":s},c+=u((r=n.t||t&&t.t,r?r.call(t,"or",l):d.call(t,"t","or",l)))+'</span>\n      <a class="sign-up-btn" href="#">',l={"hash":{},"data":s},c+=u((r=n.t||t&&t.t,r?r.call(t,"Sign Up",l):d.call(t,"t","Sign Up",l)))+'</a>\n    </h3>\n  </div>\n</div>\n\n<div class="username-group form-group">\n  <label for="username" class="control-label">\n    ',l={"hash":{},"data":s},c+=u((r=n.t||t&&t.t,r?r.call(t,"Username",l):d.call(t,"t","Username",l)))+' <span class="control-error">',l={"hash":{},"data":s},c+=u((r=n.t||t&&t.t,r?r.call(t,"Required",l):d.call(t,"t","Required",l)))+'</span>\n  </label>\n  <input type="text" id="username" class="form-control">\n</div>\n\n<div class="email-group form-group">\n  <label for="email" class="control-label">\n    ',l={"hash":{},"data":s},c+=u((r=n.t||t&&t.t,r?r.call(t,"Email",l):d.call(t,"t","Email",l)))+' <span class="control-error">',l={"hash":{},"data":s},c+=u((r=n.t||t&&t.t,r?r.call(t,"Required",l):d.call(t,"t","Required",l)))+'</span>\n  </label>\n  <input type="text" id="email" class="form-control">\n</div>\n\n<div class="password-group form-group">\n  <label for="password" class="control-label">\n    ',l={"hash":{},"data":s},c+=u((r=n.t||t&&t.t,r?r.call(t,"Password",l):d.call(t,"t","Password",l)))+' <span class="control-error">',l={"hash":{},"data":s},c+=u((r=n.t||t&&t.t,r?r.call(t,"Required",l):d.call(t,"t","Required",l)))+'</span>\n  </label>\n  <input type="password" id="password" class="form-control">\n</div>\n\n<div class="confirm-group form-group">\n  <label for="confirm" class="control-label">\n    ',l={"hash":{},"data":s},c+=u((r=n.t||t&&t.t,r?r.call(t,"Confirm Password",l):d.call(t,"t","Confirm Password",l)))+' <span class="control-error">',l={"hash":{},"data":s},c+=u((r=n.t||t&&t.t,r?r.call(t,"Passwords do not match",l):d.call(t,"t","Passwords do not match",l)))+'</span>\n  </label>\n  <input type="password" id="confirm" class="form-control">\n</div>\n\n<div class="age-group form-group">\n  <label for="month" class="control-label">\n    ',l={"hash":{},"data":s},c+=u((r=n.t||t&&t.t,r?r.call(t,"Date of Birth",l):d.call(t,"t","Date of Birth",l)))+' <span class="invalid-error control-error">',l={"hash":{},"data":s},c+=u((r=n.t||t&&t.t,r?r.call(t,"This can't be your birthday",l):d.call(t,"t","This can't be your birthday",l)))+'</span> <span class="underage-error control-error">',l={"hash":{},"data":s},c+=u((r=n.t||t&&t.t,r?r.call(t,"You must be 13 years or older",l):d.call(t,"t","You must be 13 years or older",l)))+'</span>\n  </label>\n  <div class="row">\n    <div class="birthday-col col-xs-2">\n      <input type="text" id="month" class="form-control" placeholder="01">\n    </div>\n    <div class="birthday-col col-xs-2">\n      <input type="text" id="day" class="form-control" placeholder="31">\n    </div>\n    <div class="birthday-col col-xs-3">\n      <input type="text" id="age" class="form-control" placeholder="1985">\n    </div>\n  </div>\n</div>\n\n<div class="form-footer">\n  <button type="submit" class="btn btn-lg btn-primary btn-loading pull-right">\n    <div class="loading loading-sm"></div>\n    <span class="sign-in-label btn-label">',l={"hash":{},"data":s},c+=u((r=n.t||t&&t.t,r?r.call(t,"Sign In",l):d.call(t,"t","Sign In",l)))+'</span>\n    <span class="sign-up-label btn-label">',l={"hash":{},"data":s},c+=u((r=n.t||t&&t.t,r?r.call(t,"Sign Up",l):d.call(t,"t","Sign Up",l)))+'</span>\n  </button>\n\n  <div class="terms-group checkbox">\n    <label class="control-label">\n      <input type="checkbox" id="terms" checked> ',l={"hash":{},"data":s},c+=u((r=n.t||t&&t.t,r?r.call(t,"I agree to the {1}terms of service{2}","<a href='https://plex.tv/legal' target='_blank'>","</a>",l):d.call(t,"t","I agree to the {1}terms of service{2}","<a href='https://plex.tv/legal' target='_blank'>","</a>",l)))+"</a>\n    </label>\n  </div>\n\n  ",o=n["if"].call(t,t&&t.showRememberMe,{"hash":{},"inverse":h.noop,"fn":h.program(1,a,s),"data":s}),(o||0===o)&&(c+=o),c+="\n</div>\n"
})}),define("plex/desktop/views/SignInFormView",["hb!templates/desktop/SignInFormView.tpl","underscore","backbone","marionette","moment","plex/base/utils/Dispatcher"],function(e,t,n,i,s){var a=i.ItemView.extend({"className":"sign-in-form","template":e,"validationFields":["username","email","password","confirm","age","terms"],"ui":{"submitBtn":"[type=submit]","signInBtn":".sign-in-btn","signUpBtn":".sign-up-btn","username":".username-group","email":".email-group","password":".password-group","confirm":".confirm-group","age":".age-group","terms":".terms-group"},"events":{"click .sign-in-btn":"onSignInClick","click .sign-up-btn":"onSignUpClick","blur input":"onInputBlur","submit form":"onSubmit"},"initialize":function(e){this.showRememberMe=e.showRememberMe
},"serializeData":function(){return{"showRememberMe":this.showRememberMe}},"validateAll":function(e,n,i){var s=!0;return n||(n=this.validationFields),t.each(n,t.bind(function(t){var n=e[t];this.validate(n,i[t],i)||(s=!1)},this)),s},"validate":function(e,n,i){var a,r=e.id;if(t.indexOf(this.validationFields,r)<0)return!0;var o=this.ui[r];if("confirm"===e.id)a=n===e.form.password.value;else if("age"===e.id){var l=parseInt(e.form.day.value,10),c=parseInt(e.form.month.value,10),d=parseInt(n,10),u=!!(l&&c&&d),h=32>l,p=13>c,f=d>1800;
if(!p&&32>c&&13>l){var m=c;c=l,l=m,p=!0}if(u&&h&&p&&f){var g=s({"day":l,"month":c-1,"year":d}),v=s().diff(g,"years");i&&(i.birthday=g),a=v>12,o.removeClass("is-invalid"),o.addClass("is-underage")}else a=!1,o.addClass("is-invalid"),o.removeClass("is-underage")}else a=!!n;return o.toggleClass("has-error",!a),a},"onSignInClick":function(e){e.preventDefault(),this.ui.signInBtn.addClass("selected"),this.ui.signUpBtn.removeClass("selected"),this.$el.addClass("sign-in-form"),this.$el.removeClass("sign-up-form")
},"onSignUpClick":function(e){e.preventDefault(),this.ui.signInBtn.removeClass("selected"),this.ui.signUpBtn.addClass("selected"),this.$el.removeClass("sign-in-form"),this.$el.addClass("sign-up-form")},"onInputBlur":function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value;this.validate(t,n)}});return a}),define("plex/desktop/views/SignInView",["hb!templates/desktop/SignInView.tpl","underscore","jquery","backbone","marionette","plex/base/utils/Dispatcher","plex/base/commands/Commands","plex/desktop/views/SignInFormView"],function(e,t,n,i,s,a,r,o){var l=s.Layout.extend({"className":"sign-in-container container","template":e,"ui":{"form":"#user-account-form"},"regions":{"form":"#user-account-form"},"events":{"submit form":"onSubmit"},"signIn":function(e){return this.form.currentView.validateAll(this.ui.form[0],["username","password"],e)?r.execute("signIn",e):n.Deferred().reject().promise()
},"signUp":function(e){return this.form.currentView.validateAll(this.ui.form[0],null,e)?r.execute("signUp",e):n.Deferred().reject().promise()},"onRender":function(){this.form.show(new o({"showRememberMe":!0}))},"onSubmit":function(e){e.preventDefault();var n=e.currentTarget,i=this.form.currentView.ui.submitBtn;if(!i.hasClass("active")){i.addClass("active");var s,r={"username":n.username.value,"email":n.email.value,"password":n.password.value,"confirm":n.confirm.value,"age":n.age.value,"terms":n.terms.checked,"remember":n.remember.checked};
s=this.form.currentView.$el.hasClass("sign-in-form")?this.signIn(r):this.signUp(r),s.done(function(){a.trigger("navigate:refresh")}),s.fail(t.bind(function(){i.removeClass("active")},this))}}});return l}),define("hb!templates/desktop/LogsView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,r="",o="function",l=this.escapeExpression;return r+='<textarea class="form-control">',(a=n.logs)?a=a.call(t,{"hash":{},"data":s}):(a=t&&t.logs,a=typeof a===o?a.call(t,{"hash":{},"data":s}):a),r+=l(a)+"</textarea>\n"
})}),define("plex/desktop/views/LogsView",["hb!templates/desktop/LogsView.tpl","marionette"],function(e,t){var n=t.ItemView.extend({"className":"logs-container","template":e,"ui":{"textarea":"textarea"},"collectionEvents":{"add":"onAdd"},"onlyAfterRender":["onAdd"],"serializeData":function(){return{"logs":this.collection.toJSONString()}},"onAdd":function(){this.ui.textarea.text(this.collection.toJSONString())}});return n}),define("hb!templates/desktop/error/UnavailableView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s="";
return s+="\n      ",i=n["if"].call(e,e&&e.downForMaintenance,{"hash":{},"inverse":p.program(4,o,t),"fn":p.program(2,r,t),"data":t}),(i||0===i)&&(s+=i),s+="\n    "}function r(e,t){var i,s,a="";return a+="\n        <h1>",s={"hash":{},"data":t},a+=h((i=n.t||e&&e.t,i?i.call(e,"Plex is down for maintenance.",s):u.call(e,"t","Plex is down for maintenance.",s)))+'</h1>\n        <h2 class="text-muted">',s={"hash":{},"data":t},a+=h((i=n.t||e&&e.t,i?i.call(e,"Don't worry, it'll be back soon.",s):u.call(e,"t","Don't worry, it'll be back soon.",s)))+"</h2>\n      "
}function o(e,t){var i,s,a="";return a+="\n        <h1>",s={"hash":{},"data":t},a+=h((i=n.t||e&&e.t,i?i.call(e,"Plex is not reachable.",s):u.call(e,"t","Plex is not reachable.",s)))+'</h1>\n        <h2 class="text-muted">',s={"hash":{},"data":t},a+=h((i=n.t||e&&e.t,i?i.call(e,"Make sure your server has an internet connection and any firewalls or other programs are set to allow access.",s):u.call(e,"t","Make sure your server has an internet connection and any firewalls or other programs are set to allow access.",s)))+"</h2>\n      "
}function l(e,t){var i,s,a="";return a+="\n      <h1>",s={"hash":{},"data":t},a+=h((i=n.t||e&&e.t,i?i.call(e,"Server unavailable.",s):u.call(e,"t","Server unavailable.",s)))+'</h1>\n      <h2 class="text-muted">',s={"hash":{},"data":t},a+=h((i=n.t||e&&e.t,i?i.call(e,"We couldn't reach this server. Make sure it's online and try again.",s):u.call(e,"t","We couldn't reach this server. Make sure it's online and try again.",s)))+"</h2>\n    "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};
var c,d="",u=n.helperMissing,h=this.escapeExpression,p=this;return d+='<div class="row row-padded">\n  <div class="col-md-8 col-md-offset-2">\n    ',c=n["if"].call(t,t&&t.cloud,{"hash":{},"inverse":p.program(6,l,s),"fn":p.program(1,a,s),"data":s}),(c||0===c)&&(d+=c),d+="\n  </div>\n</div>\n"})}),define("plex/desktop/views/error/UnavailableView",["hb!templates/desktop/error/UnavailableView.tpl","marionette","plex/base/utils/Dispatcher"],function(e,t,n){var i=t.ItemView.extend({"className":"container","template":e,"modelEvents":{"change:connected":"onConnectedChange"},"onConnectedChange":function(){n.trigger("navigate:refresh")
}});return i}),define("hb!templates/desktop/error/UnauthorizedView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,r,o="",l=n.helperMissing,c=this.escapeExpression;return o+='<div class="row row-padded">\n  <div class="col-md-8 col-md-offset-2">\n    <h1>',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"No soup for you!",r):l.call(t,"t","No soup for you!",r)))+'</h1>\n    <h2 class="text-muted">',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"The server you're trying to access doesn't want to let you in. Make sure you're signed in as a user with access to this server.",r):l.call(t,"t","The server you're trying to access doesn't want to let you in. Make sure you're signed in as a user with access to this server.",r)))+"</h2>\n  </div>\n</div>\n"
})}),define("plex/desktop/views/error/UnauthorizedView",["hb!templates/desktop/error/UnauthorizedView.tpl","marionette"],function(e,t){var n=t.ItemView.extend({"className":"container","template":e});return n}),define("hb!templates/desktop/error/ServerRequiredView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,r,o="",l=n.helperMissing,c=this.escapeExpression;return o+='<div class="row row-padded">\n  <div class="col-md-8 col-md-offset-2">\n    <h1>',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"You don't have any media servers yet.",r):l.call(t,"t","You don't have any media servers yet.",r)))+'</h1>\n    <h2 class="text-muted">',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"{1}Download and install{2} one and try again.","<a href='https://plex.tv/downloads' target='_blank'>","</a>",r):l.call(t,"t","{1}Download and install{2} one and try again.","<a href='https://plex.tv/downloads' target='_blank'>","</a>",r)))+"</h2>\n  </div>\n</div>\n"
})}),define("plex/desktop/views/error/ServerRequiredView",["hb!templates/desktop/error/ServerRequiredView.tpl","marionette"],function(e,t){var n=t.ItemView.extend({"className":"container","template":e});return n}),define("hb!templates/desktop/error/NotFoundView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s,a="";return a+="\n      <h1>",s={"hash":{},"data":t},a+=f((i=n.t||e&&e.t,i?i.call(e,"You must be lost.",s):p.call(e,"t","You must be lost.",s)))+'</h1>\n      <h2 class="text-muted">',s={"hash":{},"data":t},a+=f((i=n.t||e&&e.t,i?i.call(e,"This page doesn't exist.",s):p.call(e,"t","This page doesn't exist.",s)))+"</h2>\n    "
}function r(e,t){var i,s,a;return a={"hash":{},"inverse":m.program(6,l,t),"fn":m.program(4,o,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,e&&e.type,"server",a):p.call(e,"if_eq",e&&e.type,"server",a),s||0===s?s:""}function o(e,t){var i,s,a="";return a+="\n      <h1>",s={"hash":{},"data":t},a+=f((i=n.t||e&&e.t,i?i.call(e,"Media server not found.",s):p.call(e,"t","Media server not found.",s)))+'</h1>\n      <h2 class="text-muted">',s={"hash":{},"data":t},a+=f((i=n.t||e&&e.t,i?i.call(e,"The server you're trying to access doesn't seem to exist.",s):p.call(e,"t","The server you're trying to access doesn't seem to exist.",s)))+"</h2>\n    "
}function l(e,t){var i,s,a="";return a+="\n      <h1>",s={"hash":{},"data":t},a+=f((i=n.t||e&&e.t,i?i.call(e,"Media not found.",s):p.call(e,"t","Media not found.",s)))+'</h1>\n      <h2 class="text-muted">',s={"hash":{},"data":t},a+=f((i=n.t||e&&e.t,i?i.call(e,"The media you're trying to access doesn't seem to exist.",s):p.call(e,"t","The media you're trying to access doesn't seem to exist.",s)))+"</h2>\n    "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var c,d,u,h="",p=n.helperMissing,f=this.escapeExpression,m=this;
return h+='<div class="row row-padded">\n  <div class="col-md-8 col-md-offset-2">\n    ',u={"hash":{},"inverse":m.program(3,r,s),"fn":m.program(1,a,s),"data":s},c=n.if_eq||t&&t.if_eq,d=c?c.call(t,t&&t.type,"404",u):p.call(t,"if_eq",t&&t.type,"404",u),(d||0===d)&&(h+=d),h+="\n  </div>\n</div>\n"})}),define("plex/desktop/views/error/NotFoundView",["hb!templates/desktop/error/NotFoundView.tpl","marionette"],function(e,t){var n=t.ItemView.extend({"className":"container","template":e,"initialize":function(e){this.type=e.type||"404"
},"serializeData":function(){return{"type":this.type}}});return n}),define("hb!templates/desktop/error/ErrorView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,r="",o="function",l=this.escapeExpression;return r+='<div class="row row-padded">\n  <div class="col-md-8 col-md-offset-2">\n    <h1>',(a=n.message)?a=a.call(t,{"hash":{},"data":s}):(a=t&&t.message,a=typeof a===o?a.call(t,{"hash":{},"data":s}):a),r+=l(a)+"</h1>\n  </div>\n</div>\n"
})}),define("plex/desktop/views/error/ErrorView",["hb!templates/desktop/error/ErrorView.tpl","marionette"],function(e,t){var n=t.ItemView.extend({"className":"container","template":e,"initialize":function(e){this.message=e.message},"serializeData":function(){return{"message":this.message}}});return n}),define("plex/desktop/routes/DesktopAppController",["backbone","plex/base/utils/Dispatcher","plex/base/adapters/LocalizerAdapter","plex/base/models/AppModel","plex/base/routes/BaseController","plex/desktop/views/DesktopAppView","plex/desktop/views/dashboard/DashboardView","plex/desktop/views/SignInView","plex/desktop/views/LogsView","plex/desktop/views/error/UnavailableView","plex/desktop/views/error/UnauthorizedView","plex/desktop/views/error/ServerRequiredView","plex/desktop/views/error/NotFoundView","plex/desktop/views/error/ErrorView"],function(e,t,n,i,s,a,r,o,l,c,d,u,h,p){var f=s.extend({"initialize":function(){this.appView=new a,this.appView.render()
},"dashboard":function(){var e=this.populateView();e.done(function(){t.trigger("show:view",new r)})},"login":function(){var e=i.get("servers"),n=e.findWhere({"cloud":!0});t.trigger("show:loading"),n.populate().always(function(){n.get("available")?t.trigger("show:view",new o):t.trigger("show:view",new c({"model":n}))})},"unauthorized":function(e){var s=i.get("user").get("signedIn"),a=i.get("servers"),r=a.findWhere({"cloud":!0}),o=a.findWhere({"authorized":!0}),l=e.server,f=e.options;if(!o){var m=a.findWhere({"available":!0});
return m&&!s?void t.trigger("navigate","login",{"silent":!0}):void t.trigger("show:view",new c({"model":r}))}if(!l)return void(f.primaryServer?t.trigger("show:view",new u):t.trigger("show:view",new h({"type":"server"})));if(!l.get("available"))return void t.trigger("show:view",new c({"model":l}));if(!l.get("authorized")){if(!s)return void(null==r.get("authorized")?a.populate().done(function(){r.get("authorized")?t.trigger("navigate:refresh"):t.trigger("navigate","login",{"silent":!0})}):t.trigger("navigate","login",{"silent":!0}));
t.trigger("show:view",new d)}if(f.channelID){var g=n.get();t.trigger("show:view",new p({"message":g.t("This channel is not responding.")}))}else t.trigger("show:view",new h({"type":"media"}))},"logs":function(){t.trigger("show:view",new l({"collection":i.get("logs")}))},"error":function(){t.trigger("show:view",new h({"type":"404"}))}});return f}),define("plex/desktop/routes/DesktopAppRouter",["plex/base/routes/BaseAppRouter","plex/desktop/routes/DesktopAppController"],function(e,t){var n=e.extend({"controller":new t,"appRoutes":{"!/dashboard":"dashboard","":"dashboard","!/login":"login","!/unauthorized":"unauthorized","!/logs":"logs","*404":"error"}});
return n}),define("hb!templates/desktop/setup/SetupView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,r,o="",l=n.helperMissing,c=this.escapeExpression;return o+="<h3>",r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Get Started",r):l.call(t,"t","Get Started",r)))+'</h3>\n\n<div class="setup-progress">\n  <div class="basic-segment setup-progress-segment">\n    <a class="segment-btn btn-gray" data-subset="setupBasic" href="#">',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Basic Setup",r):l.call(t,"t","Basic Setup",r)))+'</a>\n  </div>\n  <div class="library-segment setup-progress-segment">\n    <a class="segment-btn btn-gray" data-subset="setupLibrary" href="#">',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Library",r):l.call(t,"t","Library",r)))+'</a>\n  </div>\n  <div class="channels-segment setup-progress-segment">\n    <a class="segment-btn btn-gray" data-subset="setupChannels" href="#">',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Channels",r):l.call(t,"t","Channels",r)))+'</a>\n  </div>\n</div>\n\n<div class="setup-container"></div>\n'
})}),define("hb!templates/desktop/setup/SetupLoadingView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,r,o="",l=n.helperMissing,c=this.escapeExpression;return o+='<div class="loading loading-inline"></div>\n\n<p class="loading-title">',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Please wait a moment while Plex starts.",r):l.call(t,"t","Please wait a moment while Plex starts.",r)))+"</p>\n"})}),define("plex/desktop/views/setup/SetupLoadingView",["hb!templates/desktop/setup/SetupLoadingView.tpl","marionette"],function(e,t){var n=t.ItemView.extend({"className":"setup-loading-container","template":e});
return n}),define("hb!templates/desktop/setup/SetupErrorView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s,a="";return a+="\n      <h1>",s={"hash":{},"data":t},a+=d((i=n.t||e&&e.t,i?i.call(e,"Setup is not allowed for shared servers.",s):c.call(e,"t","Setup is not allowed for shared servers.",s)))+"</h1>\n    "}function r(e,t){var i,s,a="";return a+="\n      <h1>",s={"hash":{},"data":t},a+=d((i=n.t||e&&e.t,i?i.call(e,"A problem has been detected with a core component of Plex Media Server.",s):c.call(e,"t","A problem has been detected with a core component of Plex Media Server.",s)))+'</h1>\n      <h2 class="text-muted">',s={"hash":{},"data":t},a+=d((i=n.t||e&&e.t,i?i.call(e,"Please visit the {1}forums{2} and provide your logs, as described {3}here{4}.","<a href='https://forums.plex.tv' target='_blank'>","</a>","<a href='http://support.plex.tv/hc/en-us/articles/200250417-Log-File-Locations' target='_blank'>","</a>",s):c.call(e,"t","Please visit the {1}forums{2} and provide your logs, as described {3}here{4}.","<a href='https://forums.plex.tv' target='_blank'>","</a>","<a href='http://support.plex.tv/hc/en-us/articles/200250417-Log-File-Locations' target='_blank'>","</a>",s)))+"</h2>\n    "
}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var o,l="",c=n.helperMissing,d=this.escapeExpression,u=this;return l+='<div class="row row-padded">\n  <div class="col-md-8 col-md-offset-2">\n    ',o=n["if"].call(t,t&&t.shared,{"hash":{},"inverse":u.program(3,r,s),"fn":u.program(1,a,s),"data":s}),(o||0===o)&&(l+=o),l+="\n  </div>\n</div>\n"})}),define("plex/desktop/views/setup/SetupErrorView",["hb!templates/desktop/setup/SetupErrorView.tpl","marionette"],function(e,t){var n=t.ItemView.extend({"className":"setup-error-container","template":e});
return n}),define("hb!templates/desktop/setup/SetupBasicView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s,a="";return a+='\n        <p class="setup-basic-help text-muted">\n          ',s={"hash":{},"data":t},a+=f((i=n.t||e&&e.t,i?i.call(e,"Let's start by giving your Plex Media Server a friendly name so it can identify itself to other computers on the network. If you leave it blank, your computer name will be used.",s):p.call(e,"t","Let's start by giving your Plex Media Server a friendly name so it can identify itself to other computers on the network. If you leave it blank, your computer name will be used.",s)))+'\n        </p>\n\n        <div class="form-group">\n          <label for="'+f((i=e&&e.friendlyNameSetting,i=null==i||i===!1?i:i.id,typeof i===m?i.apply(e):i))+'">'+f((i=e&&e.friendlyNameSetting,i=null==i||i===!1?i:i.label,typeof i===m?i.apply(e):i))+'</label>\n          <input type="text" id="'+f((i=e&&e.friendlyNameSetting,i=null==i||i===!1?i:i.id,typeof i===m?i.apply(e):i))+'" class="form-control" value="'+f((i=e&&e.friendlyNameSetting,i=null==i||i===!1?i:i.value,typeof i===m?i.apply(e):i))+'" placeholder="'+f((i=e&&e.server,i=null==i||i===!1?i:i.name,typeof i===m?i.apply(e):i))+'">\n        </div>\n      '
}function r(e,t){var i,s,a="";return a+='\n        <p class="setup-basic-help text-muted">\n          ',s={"hash":{},"data":t},a+=f((i=n.t||e&&e.t,i?i.call(e,"Connecting your server to Plex allows you to stream media outside your home network.",s):p.call(e,"t","Connecting your server to Plex allows you to stream media outside your home network.",s)))+'\n        </p>\n\n        <div class="checkbox">\n          <label for="connect">\n            <input type="checkbox" id="connect" checked> ',s={"hash":{},"data":t},a+=f((i=n.t||e&&e.t,i?i.call(e,"Connect to Plex",s):p.call(e,"t","Connect to Plex",s)))+"\n          </label>\n        </div>\n      "
}function o(e,t){var i,s,a,r="";return r+='\n        <p class="setup-basic-help text-muted">\n          ',a={"hash":{},"data":t},r+=f((i=n.t||e&&e.t,i?i.call(e,"Would you like to help us make Plex better for everyone? We collect anonymous data, which we use to improve the service over time.",a):p.call(e,"t","Would you like to help us make Plex better for everyone? We collect anonymous data, which we use to improve the service over time.",a)))+'\n        </p>\n\n        <div class="checkbox">\n          <label for="'+f((i=e&&e.collectUsageDataSetting,i=null==i||i===!1?i:i.id,typeof i===m?i.apply(e):i))+'">\n            <input type="checkbox" id="'+f((i=e&&e.collectUsageDataSetting,i=null==i||i===!1?i:i.id,typeof i===m?i.apply(e):i))+'" name="'+f((i=e&&e.collectUsageDataSetting,i=null==i||i===!1?i:i.id,typeof i===m?i.apply(e):i))+'" value="1" ',s=n["if"].call(e,(i=e&&e.collectUsageDataSetting,null==i||i===!1?i:i.value),{"hash":{},"inverse":g.noop,"fn":g.program(6,l,t),"data":t}),(s||0===s)&&(r+=s),r+="> ",a={"hash":{},"data":t},r+=f((i=n.t||e&&e.t,i?i.call(e,"Send feedback",a):p.call(e,"t","Send feedback",a)))+"\n          </label>\n        </div>\n      "
}function l(){return"checked"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var c,d,u,h="",p=n.helperMissing,f=this.escapeExpression,m="function",g=this;return h+='<div class="row">\n  <div class="col-md-4 visible-md visible-lg text-center">\n    <i class="plex-image server"></i>\n  </div>\n\n  <div class="col-md-8">\n    <h4>',u={"hash":{},"data":s},h+=f((c=n.t||t&&t.t,c?c.call(t,"Welcome to Plex!",u):p.call(t,"t","Welcome to Plex!",u)))+'</h4>\n\n    <form id="setup-basic-form" class="settings-container">\n      ',d=n["if"].call(t,t&&t.friendlyNameSetting,{"hash":{},"inverse":g.noop,"fn":g.program(1,a,s),"data":s}),(d||0===d)&&(h+=d),h+="\n\n      ",d=n["if"].call(t,t&&t.signedIn,{"hash":{},"inverse":g.noop,"fn":g.program(3,r,s),"data":s}),(d||0===d)&&(h+=d),h+="\n\n      ",d=n["if"].call(t,t&&t.collectUsageDataSetting,{"hash":{},"inverse":g.noop,"fn":g.program(5,o,s),"data":s}),(d||0===d)&&(h+=d),h+='\n\n      <div class="setup-footer">\n        <button type="submit" class="submit-btn btn btn-primary btn-loading btn-lg">\n          <div class="loading loading-sm"></div>\n          <span class="btn-label">',u={"hash":{},"data":s},h+=f((c=n.t||t&&t.t,c?c.call(t,"Next",u):p.call(t,"t","Next",u)))+'</span>\n        </button>\n        <button class="next-btn hidden" data-subset="setupLibrary"></button>\n      </div>\n    </form>\n  </div>\n</div>\n'
})}),define("plex/desktop/views/setup/SetupBasicView",["hb!templates/desktop/setup/SetupBasicView.tpl","underscore","jquery","marionette","plex/base/utils/Dispatcher","plex/base/adapters/LocalizerAdapter","plex/base/commands/Commands","plex/base/models/AppModel"],function(e,t,n,i,s,a,r,o){var l=i.ItemView.extend({"className":"setup-basic-container","template":e,"ui":{"connectCheckbox":"#connect","submitBtn":".submit-btn","nextBtn":".next-btn"},"collectionEvents":{"reset":"render"},"events":{"change input[id]":"onInputChange","submit #setup-basic-form":"onSubmit"},"initialize":function(){this.collection=this.model.get("settings"),this.collection.populate({"reset":!0}),this.changes=this.model.supports("firstRunPref")?{"FirstRun":0}:{};
var e=this.model.get("superToken");e&&(this.changes.PlexOnlineToken=e)},"serializeData":function(){var e=this.model.toJSON(),t=(o.get("user"),this.collection.get("FriendlyName")),n=this.collection.get("collectUsageData");return{"server":e,"signedIn":!!e.superToken||"ok"===e.myPlexSigninState,"friendlyNameSetting":t?t.toJSON():null,"collectUsageDataSetting":n?n.toJSON():null}},"save":function(){if(t.isEmpty(this.changes))return n.Deferred().resolve().promise();delete this.changes.connect;var e=this.collection.first().save(this.changes);
return e=e.then(t.bind(function(){return this.ui.connectCheckbox.length?r.execute("connectServer",{"cloudAccount":this.model.get("cloudAccount"),"value":this.ui.connectCheckbox.prop("checked")}):void 0},this),t.bind(function(){var e=a.get();s.trigger("show:alert",{"type":"error","message":e.t("There was a problem saving these settings.")})}))},"onInputChange":function(e){var t=e.currentTarget,n=t.value;"checkbox"!==t.type||t.checked||(n="0"),this.changes[t.id]=n},"onSubmit":function(e){e.preventDefault();
var n=this.ui.submitBtn;if(!n.hasClass("active")){n.addClass("active");var i=this.save();i.done(t.bind(function(){if(!this.isClosed){var e=this.model.get("cloudAccount");e.get("mappingError")&&this.ui.nextBtn.data("subset","setupConnectError"),this.ui.nextBtn.click()}},this)),i.always(function(){n.removeClass("active")})}}});return l}),define("hb!templates/desktop/setup/SetupConnectErrorView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s,a,o="";return o+='\n        <div class="checkbox">\n          <label>\n            <input type="checkbox" id="'+p((i=e&&e.mappingModeSetting,i=null==i||i===!1?i:i.id,typeof i===h?i.apply(e):i))+'" value="1" ',s=n["if"].call(e,(i=e&&e.mappingModeSetting,null==i||i===!1?i:i.value),{"hash":{},"inverse":f.noop,"fn":f.program(2,r,t),"data":t}),(s||0===s)&&(o+=s),o+="> ",a={"hash":{},"data":t},o+=p((i=n.t||e&&e.t,i?i.call(e,"Manually specify port",a):m.call(e,"t","Manually specify port",a)))+"\n          </label>\n        </div>\n      "
}function r(){return"checked"}function o(e){var t,n="";return n+='\n        <div class="form-group">\n          <input type="text" id="'+p((t=e&&e.mappingPortSetting,t=null==t||t===!1?t:t.id,typeof t===h?t.apply(e):t))+'" class="form-control" value="'+p((t=e&&e.mappingPortSetting,t=null==t||t===!1?t:t.value,typeof t===h?t.apply(e):t))+'">\n        </div>\n      '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var l,c,d,u="",h="function",p=this.escapeExpression,f=this,m=n.helperMissing;
return u+='<div class="row">\n  <div class="col-md-4 visible-md visible-lg text-center">\n    <i class="plex-image server"></i>\n  </div>\n\n  <div class="server-connect-error-container col-md-8">\n    ',d={"hash":{"mappingError":(l=t&&t.cloudAccount,null==l||l===!1?l:l.mappingError),"context":"setup"},"data":s},u+=p((l=n.partial||t&&t.partial,l?l.call(t,"connectError",d):m.call(t,"partial","connectError",d)))+'\n\n    <form id="setup-manual-connect-form" class="form-inline">\n      ',c=n["if"].call(t,t&&t.mappingModeSetting,{"hash":{},"inverse":f.noop,"fn":f.program(1,a,s),"data":s}),(c||0===c)&&(u+=c),u+="\n\n      ",c=n["if"].call(t,t&&t.mappingPortSetting,{"hash":{},"inverse":f.noop,"fn":f.program(4,o,s),"data":s}),(c||0===c)&&(u+=c),u+='\n\n      <button type="submit" class="retry-btn btn btn-default btn-loading">\n        <div class="loading loading-sm"></div>\n        <span class="btn-label">',d={"hash":{},"data":s},u+=p((l=n.t||t&&t.t,l?l.call(t,"Retry",d):m.call(t,"t","Retry",d)))+'</span>\n      </button>\n\n      <p class="help-block">',d={"hash":{},"data":s},u+=p((l=n.t||t&&t.t,l?l.call(t,"Enable this if automatic mapping fails. You will need to configure your router. Detailed instructions are available {1}here{2}.","<a href='http://support.plex.tv/hc/en-us/articles/200931138-Troubleshooting-myPlex-Server-connections' target='_blank'>","</a>",d):m.call(t,"t","Enable this if automatic mapping fails. You will need to configure your router. Detailed instructions are available {1}here{2}.","<a href='http://support.plex.tv/hc/en-us/articles/200931138-Troubleshooting-myPlex-Server-connections' target='_blank'>","</a>",d)))+'</p>\n    </form>\n\n    <div class="setup-footer">\n      <button class="next-btn btn btn-primary btn-lg" data-subset="setupLibrary">',d={"hash":{},"data":s},u+=p((l=n.t||t&&t.t,l?l.call(t,"Next",d):m.call(t,"t","Next",d)))+"</button>\n    </div>\n  </div>\n</div>\n"
})}),define("plex/desktop/views/setup/SetupConnectErrorView",["hb!templates/desktop/setup/SetupConnectErrorView.tpl","underscore","jquery","marionette","plex/base/commands/Commands"],function(e,t,n,i,s){var a=i.ItemView.extend({"className":"setup-connect-error-container","template":e,"ui":{"retryBtn":".retry-btn","nextBtn":".next-btn"},"events":{"change input[id]":"onInputChange","submit #setup-manual-connect-form":"onSubmit"},"initialize":function(){this.collection=this.model.get("settings"),this.changes={}
},"serializeData":function(){var e=this.model.get("cloudAccount"),t=this.collection.get("ManualPortMappingMode"),n=this.collection.get("ManualPortMappingPort");return{"cloudAccount":e.toJSON(),"mappingModeSetting":t?t.toJSON():null,"mappingPortSetting":n?n.toJSON():null}},"save":function(){if(t.isEmpty(this.changes))return n.Deferred().resolve().promise();var e=this.collection.first().save(this.changes);return e.done(t.bind(function(){t.each(this.changes,function(e,t){var n=this.collection.get(t),i=n.get("type");
"bool"===i?n.set("value","0"!==e):"int"==i?n.set("value",parseInt(e,10)):n.set("value",e)},this),this.changes={}},this)),e},"reconnect":function(){return s.execute("reconnectServer",{"cloudAccount":this.model.get("cloudAccount")})},"onInputChange":function(e){var t=e.currentTarget,n=t.value;"checkbox"!==t.type||t.checked||(n="0"),this.changes[t.id]=n},"onSubmit":function(e){e.preventDefault();var n=this.ui.retryBtn;if(!n.hasClass("active")){n.addClass("active");var i=this.save();i.always(t.bind(function(){var e=this.reconnect();
e.done(t.bind(function(){this.isClosed||this.ui.nextBtn.click()},this)),e.fail(t.bind(this.render,this))},this))}}});return a}),define("hb!templates/desktop/setup/SetupLibraryView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,r,o="",l=n.helperMissing,c=this.escapeExpression;return o+="<h4>",r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Organize Your Media",r):l.call(t,"t","Organize Your Media",r)))+'</h4>\n\n<p class="text-muted">',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Plex organizes your media into libraries. You can add as many libraries as you want, and you can have multiple libraries with the same type.",r):l.call(t,"t","Plex organizes your media into libraries. You can add as many libraries as you want, and you can have multiple libraries with the same type.",r)))+'</p>\n\n<p class="setup-add-section-container">\n  <button class="add-section-btn btn btn-default">',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Add Library",r):l.call(t,"t","Add Library",r)))+'</button>\n</p>\n\n<div class="setup-section-list-container"></div>\n\n<div class="setup-footer">\n  <button class="next-btn btn btn-primary btn-lg" data-subset="setupChannels">',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Next",r):l.call(t,"t","Next",r)))+"</button>\n</div>\n"
})}),define("hb!templates/desktop/lists/setup/SectionCardListItem",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,r="",o="function",l=this.escapeExpression;return r+='<div class="card card-section">\n  <div class="card-actions">\n    <button class="edit-section-btn btn-gray" href="#"><i class="glyphicon pencil"></i></button>\n    <button class="delete-section-btn btn-gray btn-danger" href="#"><i class="glyphicon ban"></i></button>\n  </div>\n\n  <i class="section-icon glyphicon ',(a=n.icon)?a=a.call(t,{"hash":{},"data":s}):(a=t&&t.icon,a=typeof a===o?a.call(t,{"hash":{},"data":s}):a),r+=l(a)+'"></i>\n  <span class="section-title"></span>\n</div>\n'
})}),define("plex/desktop/views/lists/setup/SectionCardListItem",["hb!templates/desktop/lists/setup/SectionCardListItem.tpl","marionette","plex/base/utils/Dispatcher","plex/base/commands/Commands","plex/desktop/views/modals/EditSectionModal"],function(e,t,n,i,s){var a={"artist":"music","movie":"film","photo":"picture","show":"display"},r=t.ItemView.extend({"tagName":"li","className":"card-item","template":e,"events":{"click .edit-section-btn":"onEditClick","click .delete-section-btn":"onDeleteClick"},"serializeData":function(){var e=this.model.server,t=this.model.toJSON();
return{"section":t,"serverID":e.id,"icon":a[t.type]}},"bindings":{".section-title":{"modelAttribute":"title"}},"onEditClick":function(e){e.preventDefault(),n.trigger("show:modal",new s({"server":this.model.server,"model":this.model}))},"onDeleteClick":function(e){e.preventDefault(),i.execute("deleteSection",{"section":this.model})}});return r}),define("plex/desktop/views/lists/setup/SectionCardList",["plex/desktop/views/lists/BaseList","plex/desktop/views/lists/setup/SectionCardListItem"],function(e,t){var n=e.extend({"tagName":"ul","className":"list card-list","itemView":t});
return n}),define("plex/desktop/views/setup/SetupLibraryView",["hb!templates/desktop/setup/SetupLibraryView.tpl","marionette","plex/base/utils/Dispatcher","plex/desktop/views/lists/setup/SectionCardList","plex/desktop/views/modals/EditSectionModal"],function(e,t,n,i,s){var a=t.Layout.extend({"className":"setup-library-container","template":e,"regions":{"list":".setup-section-list-container"},"events":{"click .add-section-btn":"onAddSectionClick"},"initialize":function(){this.collection=this.model.get("sections"),this.collection.populate()
},"onRender":function(){this.list.show(new i({"collection":this.collection}))},"onAddSectionClick":function(e){e.preventDefault(),n.trigger("show:modal",new s({"server":this.model}))}});return a}),define("hb!templates/desktop/setup/SetupChannelsView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,r,o="",l=n.helperMissing,c=this.escapeExpression;return o+="<h4>",r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Install Channels",r):l.call(t,"t","Install Channels",r)))+'</h4>\n\n<p class="text-muted">',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Plex channels give you access to online media from a variety of sites. You can browse and install these channels from the Channel Directory, but get started by installing some featured channels.",r):l.call(t,"t","Plex channels give you access to online media from a variety of sites. You can browse and install these channels from the Channel Directory, but get started by installing some featured channels.",r)))+'</p>\n\n<div class="setup-channel-list-container"></div>\n\n<div class="setup-footer">\n  <button class="next-btn btn btn-primary btn-lg" data-subset="setupComplete">',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Next",r):l.call(t,"t","Next",r)))+"</button>\n</div>\n"
})}),define("hb!templates/desktop/lists/channel/ChannelDirectoryTileListItem",["handlebars"],function(e){return e.template(function(e,t,n,i,s){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{},'<a class="media-poster-container" href="#">\n  <div class="media-poster">\n     <div class="installed-icon"><i class="glyphicon ok-2"></i></div>\n  </div>\n\n  <div class="media-title media-heading"></div>\n  <div class="media-subtitle-1 media-heading secondary"></div>\n</a>\n'})}),define("hb!templates/desktop/modals/ChannelModal",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s,a="";
return a+='<button class="browse-btn btn btn-primary">',s={"hash":{},"data":t},a+=u((i=n.t||e&&e.t,i?i.call(e,"Browse",s):d.call(e,"t","Browse",s)))+"</button>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var r,o,l,c="",d=n.helperMissing,u=this.escapeExpression,h="function",p=this;return c+='<div class="modal-dialog">\n  <div class="modal-content">\n    <div class="modal-header">\n      <button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button>\n      <h4 class="modal-title">'+u((r=t&&t.channel,r=null==r||r===!1?r:r.title,typeof r===h?r.apply(t):r))+'</h4>\n    </div>\n\n    <div class="modal-body">\n      <div class="channel-poster-container">\n        <div class="channel-poster media-poster"></div>\n\n        <div class="installed-actions-container">\n          ',o=n.unless.call(t,t&&t.agent,{"hash":{},"inverse":p.noop,"fn":p.program(1,a,s),"data":s}),(o||0===o)&&(c+=o),c+='\n\n          <div class="btn-group">\n            <button type="button" class="update-btn btn btn-default btn-loading">\n              <div class="loading loading-sm"></div>\n              <span class="btn-label">',l={"hash":{},"data":s},c+=u((r=n.t||t&&t.t,r?r.call(t,"Update",l):d.call(t,"t","Update",l)))+'</span>\n              </button>\n            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">\n              <i class="caret-icon caret-icon-sm"></i>\n            </button>\n            <ul class="dropdown-menu pull-right">\n              <li><a class="restart-btn" href="#">',l={"hash":{},"data":s},c+=u((r=n.t||t&&t.t,r?r.call(t,"Restart",l):d.call(t,"t","Restart",l)))+'</a></li>\n              <li><a class="reset-btn" href="#">',l={"hash":{},"data":s},c+=u((r=n.t||t&&t.t,r?r.call(t,"Reset",l):d.call(t,"t","Reset",l)))+'</a></li>\n            </ul>\n          </div>\n\n          <button class="uninstall-btn btn btn-danger btn-loading">\n            <div class="loading loading-sm"></div>\n            <span class="btn-label">',l={"hash":{},"data":s},c+=u((r=n.t||t&&t.t,r?r.call(t,"Uninstall",l):d.call(t,"t","Uninstall",l)))+'</span>\n          </button>\n        </div>\n\n        <div class="uninstalled-actions-container">\n          <button class="install-btn btn btn-primary btn-loading">\n            <div class="loading loading-sm"></div>\n            <span class="btn-label">',l={"hash":{},"data":s},c+=u((r=n.t||t&&t.t,r?r.call(t,"Install",l):d.call(t,"t","Install",l)))+'</span>\n          </button>\n        </div>\n      </div>\n\n      <div class="channel-details">\n        '+u((r=t&&t.channel,r=null==r||r===!1?r:r.summary,typeof r===h?r.apply(t):r))+"\n      </div>\n    </div>\n  </div>\n</div>\n"
})}),define("plex/desktop/views/modals/ChannelModal",["hb!templates/desktop/modals/ChannelModal.tpl","underscore","plex/base/utils/Dispatcher","plex/base/commands/Commands","plex/desktop/views/modals/BaseModal","plex/desktop/views/images/MediaPosterImage"],function(e,t,n,i,s,a){var r=s.extend({"name":"channelModal","className":"channel-modal modal fade","template":e,"ui":{"poster":".media-poster","installBtn":".install-btn","updateBtn":".update-btn","uninstallBtn":".uninstall-btn"},"events":t.extend({"click .browse-btn":"onBrowseClick","click .install-btn":"onInstallClick","click .update-btn":"onUpdateClick","click .restart-btn":"onRestartClick","click .reset-btn":"onResetClick","click .uninstall-btn":"onUninstallClick"},s.prototype.events),"initialize":function(e){this.closeOnInstall=e.closeOnInstall,this.image=new a({"model":this.model,"type":"channel","width":200})
},"serializeData":function(){return{"channel":this.model.toJSON(),"serverID":this.model.server.id,"agent":/com.plexapp.agents./.test(this.model.id)}},"bindings":{".installed-actions-container":{"modelAttribute":"installed","manual":!0,"autohide":!0},".uninstalled-actions-container":{"modelAttribute":"installed","manual":!0,"autohide":function(e){return!e}}},"onRender":function(){s.prototype.onRender.apply(this,arguments),this.image.setElement(this.ui.poster)},"onClose":function(){this.image.close()
},"onBrowseClick":function(e){e.preventDefault();var i=this.model.get("key"),s=t.last(i.split("/"));n.trigger("navigate","channel",{"serverID":this.model.server.id,"channelID":s}),this.hide()},"onInstallClick":function(e){e.preventDefault();var n=this.ui.installBtn;if(!n.hasClass("active")){n.addClass("active");var s=i.execute("installChannel",{"channel":this.model});s.done(t.bind(function(){this.closeOnInstall&&this.hide()},this)),s.always(function(){n.removeClass("active")})}},"onUpdateClick":function(e){e.preventDefault();
var t=this.ui.updateBtn;if(!t.hasClass("active")){t.addClass("active");var n=i.execute("updateChannel",{"channel":this.model,"skipConfirmation":!0});n.always(function(){t.removeClass("active")})}},"onRestartClick":function(e){e.preventDefault(),i.execute("restartChannel",{"channel":this.model})},"onResetClick":function(e){e.preventDefault(),i.execute("resetChannel",{"channel":this.model})},"onUninstallClick":function(e){e.preventDefault();var t=this.ui.uninstallBtn;if(!t.hasClass("active")){t.addClass("active");
var n=i.execute("uninstallChannel",{"channel":this.model,"skipConfirmation":!0});n.always(function(){t.removeClass("active")})}}});return r}),define("plex/desktop/views/lists/channel/ChannelDirectoryTileListItem",["hb!templates/desktop/lists/channel/ChannelDirectoryTileListItem.tpl","underscore","marionette","plex/base/utils/Dispatcher","plex/base/adapters/LocalizerAdapter","plex/desktop/views/images/MediaPosterImage","plex/desktop/views/modals/ChannelModal"],function(e,t,n,i,s,a,r){var o=n.ItemView.extend({"tagName":"li","className":"poster-item media-tile-list-item channel-directory-tile-list-item channel","template":e,"ui":{"poster":".media-poster","subtitle":".media-subtitle-1"},"events":{"click a":"onClick"},"initialize":function(e){this.closeOnInstall=e.closeOnInstall,this.image=new a({"model":this.model,"type":"channel","width":150})
},"bindings":{".media-title":{"modelAttribute":"title"},".installed-icon":{"modelAttribute":"installed","manual":!0,"autohide":!0,"formatter":function(e){var t=s.get(),n=e?t.t("Installed"):"";return this.ui.subtitle.text(n),e}}},"onRender":function(){this.image.setElement(this.ui.poster)},"onClose":function(){this.image.close()},"onClick":function(e){e.preventDefault(),i.trigger("show:modal",new r({"model":this.model,"closeOnInstall":this.closeOnInstall}))}});return o}),define("plex/desktop/views/lists/channel/ChannelDirectoryTileList",["plex/desktop/views/lists/BaseList","plex/desktop/views/lists/channel/ChannelDirectoryTileListItem"],function(e,t){var n=e.extend({"tagName":"ul","className":"tile-list media-tile-list channel-directory-tile-list","itemView":t});
return n}),define("plex/desktop/views/setup/SetupChannelsView",["hb!templates/desktop/setup/SetupChannelsView.tpl","marionette","plex/base/models/channel/ChannelCollection","plex/desktop/views/lists/channel/ChannelDirectoryTileList"],function(e,t,n,i){var s=t.Layout.extend({"className":"setup-channels-container","template":e,"regions":{"list":".setup-channel-list-container"},"initialize":function(){this.collection=new n([],{"server":this.model,"url":"/system/appstore/featured"}),this.collection.fetch({"cancelable":!0})
},"onRender":function(){this.list.show(new i({"collection":this.collection,"itemViewOptions":{"closeOnInstall":!0}}))}});return s}),define("hb!templates/desktop/setup/SetupCompleteView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s,a="";return a+="\n        <h4>",s={"hash":{},"data":t},a+=h((i=n.t||e&&e.t,i?i.call(e,"Thanks for supporting Plex.",s):u.call(e,"t","Thanks for supporting Plex.",s)))+'</h4>\n        <span class="text-muted">',s={"hash":{},"data":t},a+=h((i=n.t||e&&e.t,i?i.call(e,"We really appreciate it. See what {1}benefits{2} come with your subscription.","<a href='https://plex.tv/subscription/welcome' target='_blank'>","</a>",s):u.call(e,"t","We really appreciate it. See what {1}benefits{2} come with your subscription.","<a href='https://plex.tv/subscription/welcome' target='_blank'>","</a>",s)))+"</span>\n      "
}function r(e,t){var i,s,a,r="";return r+="\n        <h4>",a={"hash":{},"data":t},r+=h((i=n.t||e&&e.t,i?i.call(e,"Go Premium. Get a Plex Pass.",a):u.call(e,"t","Go Premium. Get a Plex Pass.",a)))+'</h4>\n        <span class="text-muted">',a={"hash":{},"data":t},r+=h((i=n.t||e&&e.t,i?i.call(e,"Everything you need to experience the best of Plex. Your subscription gives you premium features and exclusive access to new ones.",a):u.call(e,"t","Everything you need to experience the best of Plex. Your subscription gives you premium features and exclusive access to new ones.",a)))+'</span>\n\n        <div class="setup-plex-pass-action-container">\n          <a class="btn btn-sm btn-default" href="',(s=n.plexPassUrl)?s=s.call(e,{"hash":{},"data":t}):(s=e&&e.plexPassUrl,s=typeof s===p?s.call(e,{"hash":{},"data":t}):s),r+=h(s)+'" target="_blank">',a={"hash":{},"data":t},r+=h((i=n.t||e&&e.t,i?i.call(e,"Learn More",a):u.call(e,"t","Learn More",a)))+"</a>\n        </div>\n      "
}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var o,l,c,d="",u=n.helperMissing,h=this.escapeExpression,p="function",f=this;return d+='<div class="row">\n  <div class="col-md-6">\n    <h4>',c={"hash":{},"data":s},d+=h((o=n.t||t&&t.t,o?o.call(t,"Congratulations!",c):u.call(t,"t","Congratulations!",c)))+'</h4>\n\n    <p class="text-muted">',c={"hash":{},"data":s},d+=h((o=n.t||t&&t.t,o?o.call(t,"See, that wasn't too bad, right? At this very moment, Plex is working tirelessly to build your library, and make it look beautiful.",c):u.call(t,"t","See, that wasn't too bad, right? At this very moment, Plex is working tirelessly to build your library, and make it look beautiful.",c)))+'</p>\n\n    <p class="text-muted">',c={"hash":{},"data":s},d+=h((o=n.t||t&&t.t,o?o.call(t,"Feel free to watch Plex work, or take this opportunity to {1}download{2} some Plex apps!","<a href='https://plex.tv/downloads' target='_blank'>","</a>",c):u.call(t,"t","Feel free to watch Plex work, or take this opportunity to {1}download{2} some Plex apps!","<a href='https://plex.tv/downloads' target='_blank'>","</a>",c)))+'</p>\n  </div>\n\n  <div class="col-md-6 visible-md visible-lg text-center">\n    <i class="plex-image plex-pass"></i>\n\n    <div class="setup-plex-pass-container">\n      ',l=n["if"].call(t,t&&t.hasPlexPass,{"hash":{},"inverse":f.program(3,r,s),"fn":f.program(1,a,s),"data":s}),(l||0===l)&&(d+=l),d+='\n    </div>\n  </div>\n</div>\n\n<div class="setup-footer setup-done-footer">\n  <button class="done-btn btn btn-primary btn-lg">',c={"hash":{},"data":s},d+=h((o=n.t||t&&t.t,o?o.call(t,"Done",c):u.call(t,"t","Done",c)))+"</button>\n</div>\n"
})}),define("plex/desktop/views/setup/SetupCompleteView",["hb!templates/desktop/setup/SetupCompleteView.tpl","marionette","plex/base/models/AppModel"],function(e,t,n){var i=t.ItemView.extend({"className":"setup-complete-container","template":e,"serializeData":function(){var e=n.get("user");return{"hasPlexPass":e.hasPlexPass(),"plexPassUrl":e.server.get("plexPassUrl")}}});return i}),define("plex/desktop/views/setup/SetupView",["hb!templates/desktop/setup/SetupView.tpl","underscore","jquery","marionette","plex/base/utils/Dispatcher","plex/base/utils/Logger","plex/base/commands/Commands","plex/base/models/library/AgentCollection","plex/desktop/views/setup/SetupLoadingView","plex/desktop/views/setup/SetupErrorView","plex/desktop/views/setup/SetupBasicView","plex/desktop/views/setup/SetupConnectErrorView","plex/desktop/views/setup/SetupLibraryView","plex/desktop/views/setup/SetupChannelsView","plex/desktop/views/setup/SetupCompleteView"],function(e,t,n,i,s,a,r,o,l,c,d,u,h,p,f){var m={"setupLoading":l,"setupError":c,"setupBasic":d,"setupConnectError":u,"setupLibrary":h,"setupChannels":p,"setupComplete":f},g=["com.plexapp.agents.imdb","com.plexapp.agents.thetvdb","com.plexapp.agents.lastfm"],v=i.Layout.extend({"className":"container","template":e,"maxAttempts":120,"regions":{"container":".setup-container"},"events":{"click .segment-btn":"onNavClick","click .next-btn":"onNavClick","click .done-btn":"onDoneClick"},"onlyAfterRender":["onAgentsSuccess","onAgentsFail","onUpdatesComplete"],"initialize":function(e){t.bindAll(this,"start","onAgentsSuccess","onAgentsFail","onUpdatesComplete"),this.subset=e.subset||"setupBasic",this.attempts=0,a.info("Starting the setup wizard")
},"serializeData":function(){return{"subset":this.subset}},"start":function(){if(this.attempts>=this.maxAttempts)return a.error("Failed to start the setup wizard after "+this.attempts+" attempts"),void this.navigate("setupError");this.attempts++;var e=this.model.get("startState");if(e)a.log("Waiting for server to start ("+e+")"),this.model.fetch().done(t.delay(this.start,500));else{var n=new o([],{"server":this.model}),i=n.fetch({"cancelable":!0});i.done(this.onAgentsSuccess),i.fail(this.onAgentsFail)
}},"navigate":function(e){var t=m[e];this.previousSubset=this.subset,this.subset=e,this.container.show(new t({"model":this.model})),this.$el.addClass(e),this.previousSubset!=e&&this.$el.removeClass(this.previousSubset)},"onRender":function(){this.model.get("shared")?this.navigate("setupError"):(this.navigate("setupLoading"),this.start())},"onAgentsSuccess":function(e){a.log("Looking for a core agent");for(var t=0,n=g.length;n>t;t++){var i=g[t];if(e.get(i)){a.log(i+" found");var s=r.execute("updateChannel",{"server":this.model,"silent":!0});
return void s.always(this.onUpdatesComplete)}}a.error("No core agents found"),this.navigate("setupError")},"onAgentsFail":function(){a.warn("Unable to request agents"),t.delay(this.start,500)},"onUpdatesComplete":function(){this.navigate(this.previousSubset)},"onNavClick":function(e){e.preventDefault();var t=n(e.currentTarget),i=t.data("subset");this.navigate(i),s.trigger("navigate",i,{"trigger":!1})},"onDoneClick":function(e){e.preventDefault(),s.trigger("navigate","dashboard")}});return v}),define("plex/desktop/routes/SetupController",["plex/base/utils/Dispatcher","plex/base/routes/BaseController","plex/desktop/views/setup/SetupView"],function(e,t,n){var i=t.extend({"setupBasic":function(){var t=this.populateView({"primaryServer":!0});
t.done(function(t){e.trigger("show:view",new n({"model":t.server,"subset":"setupBasic"}))})},"setupLibrary":function(){var t=this.populateView({"primaryServer":!0});t.done(function(t){e.trigger("show:view",new n({"model":t.server,"subset":"setupLibrary"}))})},"setupChannels":function(){var t=this.populateView({"primaryServer":!0});t.done(function(t){e.trigger("show:view",new n({"model":t.server,"subset":"setupChannels"}))})},"setupComplete":function(){var t=this.populateView({"primaryServer":!0});
t.done(function(t){e.trigger("show:view",new n({"model":t.server,"subset":"setupComplete"}))})}});return i}),define("plex/desktop/routes/SetupRouter",["plex/base/routes/BaseRouter","plex/desktop/routes/SetupController"],function(e,t){var n=e.extend({"controller":new t,"appRoutes":{"!/setup":"setupBasic","!/setup/library":"setupLibrary","!/setup/channels":"setupChannels","!/setup/complete":"setupComplete"}});return n}),define("hb!templates/desktop/SearchView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};
var a,r,o="",l=n.helperMissing,c=this.escapeExpression;return o+='<h3 class="searching-header">\n  ',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Searching for {1}",t&&t.query,r):l.call(t,"t","Searching for {1}",t&&t.query,r)))+' <span class="loading loading-sm"></span>\n</h3>\n\n<h3 class="search-results-header">\n  ',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Results for {1}",t&&t.query,r):l.call(t,"t","Results for {1}",t&&t.query,r)))+'\n</h3>\n\n<div class="movie-search-container hidden">\n  <div class="filter-bar"><h4>',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Movies",r):l.call(t,"t","Movies",r)))+'</h4></div>\n</div>\n\n<div class="show-search-container hidden">\n  <div class="filter-bar"><h4>',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"TV Shows",r):l.call(t,"t","TV Shows",r)))+'</h4></div>\n</div>\n\n<div class="episode-search-container hidden">\n  <div class="filter-bar"><h4>',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Episodes",r):l.call(t,"t","Episodes",r)))+'</h4></div>\n</div>\n\n<div class="artist-search-container hidden">\n  <div class="filter-bar"><h4>',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Artists",r):l.call(t,"t","Artists",r)))+'</h4></div>\n</div>\n\n<div class="album-search-container hidden">\n  <div class="filter-bar"><h4>',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Albums",r):l.call(t,"t","Albums",r)))+'</h4></div>\n</div>\n\n<div class="track-search-container hidden">\n  <div class="filter-bar"><h4>',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Tracks",r):l.call(t,"t","Tracks",r)))+'</h4></div>\n</div>\n\n<div class="photo-search-container hidden">\n  <div class="filter-bar"><h4>',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Photos",r):l.call(t,"t","Photos",r)))+'</h4></div>\n</div>\n\n<div class="clip-search-container hidden">\n  <div class="filter-bar"><h4>',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Clips",r):l.call(t,"t","Clips",r)))+"</h4></div>\n</div>\n"
})}),define("plex/base/models/library/SearchProviderModel",["underscore","plex/base/utils/Parser","plex/base/models/BaseModel"],function(e,t,n){var i=n.extend({"idAttribute":"key","whitelistedAttrs":["key","machineIdentifier","type","title"],"convert":function(n){var i=e.isObject(n)?n:t.parseXML(n);return i},"parse":function(t){var n=this.convert(t);return n=e.pick(n,this.whitelistedAttrs)}});return i}),define("plex/base/models/library/SearchProviderCollection",["plex/base/models/BaseCollection","plex/base/models/library/SearchProviderModel"],function(e,t){var n=e.extend({"model":t,"url":function(){return"/system/search?query="+this.query
},"initialize":function(e,t){this.query=t.query},"parse":function(e){return this.convert(e,"Provider")}});return n}),define("plex/desktop/views/lists/library/MediaTileList",["plex/desktop/views/lists/BaseList","plex/desktop/views/lists/library/MediaTileListItem"],function(e,t){var n=e.extend({"tagName":"ul","className":"tile-list media-tile-list show-context","itemView":t});return n}),define("plex/desktop/views/SearchView",["hb!templates/desktop/SearchView.tpl","underscore","marionette","plex/base/models/AppModel","plex/base/models/SettingsModel","plex/base/models/library/SearchProviderCollection","plex/base/models/library/MetadataCollection","plex/desktop/views/lists/library/MediaTileList"],function(e,t,n,i,s,a,r,o){var l=["movie","show","episode","artist","album","track","photo","clip"],c=n.Layout.extend({"className":"search-container container searching","template":e,"initialize":function(e){this.query=e.query,this.collections=[],this.channelProviders=[],this.pendingRequests=0,this.lists={},t.each(l,function(e){var t="."+e+"-search-container",n=new r;
n.comparator=this.itemComparator;var i=new o({"collection":n});i.sorted=!0,this.addRegion(e,t),this.lists[e]=i},this);var n=i.get("servers");n.each(this.initializeServer,this),i.set("searchValue",this.query),this.listenTo(n,"change:authorized",this.initializeServer)},"initializeServer":function(e){!e.get("authorized")||e.get("cloud")||e.get("synced")||(!e.get("shared")||s.get("sharedSearch"))&&e.populate().done(t.bind(function(){e.supports("search")&&this.initializeProviders(e)},this))},"initializeProviders":function(e){var n=new r([],{"server":e,"url":"/search?local=1&query="+this.query}),i=new r([],{"server":e,"url":"/search?type=10&query="+this.query});
if(this.listenToOnce(n,"reset",this.onMetadataReset),this.listenToOnce(i,"reset",this.onMetadataReset),this.pendingRequests+=2,n.fetch({"reset":!0,"cancelable":!0}).always(t.bind(this.checkPendingRequests,this)),i.fetch({"reset":!0,"cancelable":!0}).always(t.bind(this.checkPendingRequests,this)),s.get("channelSearch")&&!e.get("shared")){var o=new a([],{"server":e,"query":this.query});this.listenToOnce(o,"reset",this.onChannelProvidersReset),this.pendingRequests++,o.fetch({"reset":!0,"cancelable":!0}).always(t.bind(this.checkPendingRequests,this))
}},"serializeData":function(){return{"query":decodeURIComponent(this.query)}},"checkPendingRequests":function(){--this.pendingRequests||this.$el.removeClass("searching")},"itemComparator":function(e){var t=e.server,n=t.get("friendlyName")||"",i=t.get("shared"),s=i?"1":"0";return s+=n.toLowerCase()},"onRender":function(){t.each(l,function(e){var t=this.lists[e];this[e].append(t)},this)},"onClose":function(){t.each(this.collections,function(e){e.release()})},"onChannelProvidersReset":function(e){e.each(function(e){if(!(e.get("machineIdentifier")||t.indexOf(this.channelProviders,e.id)>-1)){var n=new r([],{"server":e.server,"url":e.id+"&query="+this.query});
this.listenToOnce(n,"reset",this.onMetadataReset),this.pendingRequests++,n.fetch({"reset":!0,"cancelable":!0}).always(t.bind(this.checkPendingRequests,this))}},this)},"onMetadataReset":function(e){this.collections.push(e);var n=e.splitByType();for(var i in n){if(t.indexOf(l,i)<0)return;this.$("."+i+"-search-container").removeClass("hidden");var s=this.lists[i];s.collection.add(n[i])}}});return c}),define("hb!templates/desktop/section/SectionView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};
var a="";return a})}),define("hb!templates/desktop/actionbar/SectionActionBarView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,r,o="",l=n.helperMissing,c=this.escapeExpression;return o+='<div class="action-bar">\n  <ul class="nav action-bar-nav">\n    <li>\n      <a class="options-btn btn-gray" href="#" title="',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Options",r):l.call(t,"t","Options",r)))+'" data-toggle="tooltip"><i class="glyphicon show-lines"></i></a>\n    </li>\n    <li>\n      <a class="play-btn btn-gray" href="#" title="',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Play All",r):l.call(t,"t","Play All",r)))+'" data-toggle="tooltip"><i class="glyphicon play"></i></a>\n    </li>\n    <li>\n      <a class="play-shuffled-btn btn-gray" href="#" title="',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Play Shuffled",r):l.call(t,"t","Play Shuffled",r)))+'" data-toggle="tooltip"><i class="glyphicon random"></i></a>\n    </li>\n    <li>\n      <a class="select-btn btn-gray" href="#" title="',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Select",r):l.call(t,"t","Select",r)))+'" data-toggle="tooltip"><i class="glyphicon check"></i></a>\n    </li>\n    <li>\n      <a class="deselect-btn btn-gray selected" href="#" title="',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Deselect All",r):l.call(t,"t","Deselect All",r)))+'" data-toggle="tooltip"><i class="glyphicon unchecked"></i></a>\n    </li>\n    <li>\n      <a class="refresh-btn btn-gray" href="#" title="',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Refresh",r):l.call(t,"t","Refresh",r)))+'" data-toggle="tooltip"><i class="glyphicon repeat"></i></a>\n    </li>\n    <li>\n      <a class="analyze-btn btn-gray" href="#" title="',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Analyze",r):l.call(t,"t","Analyze",r)))+'" data-toggle="tooltip"><i class="glyphicon magic"></i></a>\n    </li>\n    <li>\n      <a class="mark-watched-btn btn-gray" href="#" title="',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Mark as Watched",r):l.call(t,"t","Mark as Watched",r)))+'" data-toggle="tooltip"><i class="glyphicon circle-ok"></i></a>\n    </li>\n    <li>\n      <a class="mark-unwatched-btn btn-gray" href="#" title="',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Mark as Unwatched",r):l.call(t,"t","Mark as Unwatched",r)))+'" data-toggle="tooltip"><i class="glyphicon circle-minus"></i></a>\n    </li>\n    <li>\n      <a class="add-to-collection-btn btn-gray" href="#" title="',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Add to Collection",r):l.call(t,"t","Add to Collection",r)))+'" data-toggle="tooltip"><i class="glyphicon folder-plus"></i></a>\n    </li>\n    <li>\n      <a class="merge-btn btn-gray" href="#" title="',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Merge",r):l.call(t,"t","Merge",r)))+'" data-toggle="tooltip"><i class="glyphicon resize-small"></i></a>\n    </li>\n    <li>\n      <a class="sync-btn btn-gray" href="#" title="',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Sync",r):l.call(t,"t","Sync",r)))+'" data-toggle="tooltip"><i class="glyphicon download"></i></a>\n    </li>\n  </ul>\n</div>\n'
})}),define("hb!templates/desktop/sidebar/SectionSideBarView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(){return"hidden"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var r,o,l,c="",d=n.helperMissing,u=this.escapeExpression,h=this;return c+='<div class="side-bar-page main-page minimal-scroll">\n  <div class="section-type-container hidden">\n    <h5>',l={"hash":{},"data":s},c+=u((r=n.t||t&&t.t,r?r.call(t,"Type",l):d.call(t,"t","Type",l)))+'</h5>\n    <div class="section-type-list-container"></div>\n  </div>\n\n  <div class="section-current-filters-container">\n    <div class="side-bar-actions">\n      <a class="new-filter-icon-btn new-filter-btn btn-gray ',o=n.unless.call(t,t&&t.showNewFilterIconBtn,{"hash":{},"inverse":h.noop,"fn":h.program(1,a,s),"data":s}),(o||0===o)&&(c+=o),c+='" href="#"><i class="glyphicon plus"></i></a>\n    </div>\n\n    <h5>',l={"hash":{},"data":s},c+=u((r=n.t||t&&t.t,r?r.call(t,"Filters",l):d.call(t,"t","Filters",l)))+'</h5>\n    <div class="section-current-filters-list-container"></div>\n  </div>\n\n  <div class="section-sort-container hidden">\n    <h5>',l={"hash":{},"data":s},c+=u((r=n.t||t&&t.t,r?r.call(t,"Sort",l):d.call(t,"t","Sort",l)))+'</h5>\n    <div class="section-sort-list-container"></div>\n  </div>\n</div>\n\n<div class="side-bar-page filters-page minimal-scroll">\n  <div class="section-filters-container">\n    <div class="side-bar-actions">\n      <a class="hide-btn btn-gray" href="#"><i class="glyphicon chevron-left"></i></a>\n    </div>\n\n    <h5>',l={"hash":{},"data":s},c+=u((r=n.t||t&&t.t,r?r.call(t,"Select A Filter",l):d.call(t,"t","Select A Filter",l)))+'</h5>\n    <div class="section-filters-list-container"></div>\n  </div>\n</div>\n\n<div class="side-bar-page filter-options-page minimal-scroll">\n  <div class="section-filter-options-container">\n    <div class="side-bar-actions">\n      <a class="hide-btn btn-gray" href="#"><i class="glyphicon chevron-left"></i></a>\n    </div>\n\n    <h5 class="filter-options-header"></h5>\n    <div class="section-filter-option-list-container"></div>\n  </div>\n</div>\n'
})}),define("hb!templates/desktop/filterbar/SectionFilterBarView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,r="",o="function",l=this.escapeExpression;return r+='<div class="filter-bar-right">\n  <a class="clear-filters-btn btn-gray" href="#"><i class="glyphicon remove-2"></i></a>\n</div>\n\n<h4>',(a=n.titles)?a=a.call(t,{"hash":{},"data":s}):(a=t&&t.titles,a=typeof a===o?a.call(t,{"hash":{},"data":s}):a),r+=l(a)+"</h4>\n"
})}),define("plex/desktop/views/filterbar/SectionFilterBarView",["hb!templates/desktop/filterbar/SectionFilterBarView.tpl","underscore","marionette","plex/base/utils/Dispatcher"],function(e,t,n,i){var s=n.ItemView.extend({"className":"filter-bar filter-bar-fixed","template":e,"events":{"click .clear-filters-btn":"onClearFiltersClick"},"serializeData":function(){var e=this.model.get("currentFilters"),n=[];return t.each(e,function(e){n.push(e.titles.join(", "))}),{"titles":n.join(", ")}},"onClearFiltersClick":function(e){e.preventDefault();
var t=this.model.get("currentFilters");t.length=0,this.model.trigger("change:currentFilters",this.model,t),i.trigger("navigate","section",{"serverID":this.model.server.id,"sectionID":this.model.id,"subset":"all","trigger":!1})}});return s}),define("hb!templates/desktop/lists/library/section/MediaTypeListItem",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,r,o="",l=n.helperMissing,c=this.escapeExpression;return o+='<a class="media-type-btn btn-gray" href="#">',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,t&&t.title,r):l.call(t,"t",t&&t.title,r)))+"</a>\n"
})}),define("plex/desktop/views/lists/library/section/MediaTypeListItem",["hb!templates/desktop/lists/library/section/MediaTypeListItem.tpl","marionette"],function(e,t){var n=t.ItemView.extend({"tagName":"li","template":e,"events":{"click a":"onClick"},"initialize":function(){this.listenTo(this.model.section,"change:currentType",this.onCurrentTypeChange)},"bindings":{".media-type-btn":{"modelAttribute":"selected","manual":!0,"formatter":function(e,t){t.toggleClass("selected",e)}}},"onCurrentTypeChange":function(e,t){this.model.set("selected",this.model.id===t.id)
},"onClick":function(e){e.preventDefault(),this.model.section.set("currentType",this.model)}});return n}),define("plex/desktop/views/lists/library/section/MediaTypeList",["plex/desktop/views/lists/BaseList","plex/desktop/views/lists/library/section/MediaTypeListItem"],function(e,t){var n=e.extend({"tagName":"ul","className":"list side-bar-list","itemView":t,"initialize":function(e){e.disabled&&this.$el.addClass("disabled")}});return n}),define("hb!templates/desktop/lists/library/section/CurrentFilterList",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s,a="";
return a+='\n  <div class="label-list-item">\n    <a class="new-filter-btn label label-btn label-default" href="#"><i class="label-icon glyphicon circle-plus"></i> ',s={"hash":{},"data":t},a+=d((i=n.t||e&&e.t,i?i.call(e,"New Filter",s):c.call(e,"t","New Filter",s)))+"</a>\n  </div>\n"}function r(e,t){var i,s,a="";return a+='\n  <div class="label-list-item">\n    <a class="remove-filter-btn label label-btn label-primary" data-key="',(i=n.key)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.key,i=typeof i===u?i.call(e,{"hash":{},"data":t}):i),a+=d(i)+'" href="#"><i class="label-icon glyphicon circle-remove"></i> <span class="label-truncate">',s={"hash":{},"data":t},a+=d((i=n.csl||e&&e.csl,i?i.call(e,e&&e.titles,s):c.call(e,"csl",e&&e.titles,s)))+"</span></a>\n  </div>\n"
}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var o,l="",c=n.helperMissing,d=this.escapeExpression,u="function",h=this;return o=n.unless.call(t,t&&t.currentFilters,{"hash":{},"inverse":h.noop,"fn":h.program(1,a,s),"data":s}),(o||0===o)&&(l+=o),l+="\n\n",o=n.each.call(t,t&&t.currentFilters,{"hash":{},"inverse":h.noop,"fn":h.program(3,r,s),"data":s}),(o||0===o)&&(l+=o),l+="\n"})}),define("plex/desktop/views/lists/library/section/CurrentFilterList",["hb!templates/desktop/lists/library/section/CurrentFilterList.tpl","underscore","jquery","marionette"],function(e,t,n,i){var s=i.ItemView.extend({"className":"label-list section-current-filters-list","template":e,"modelEvents":{"change:currentFilters":"render"},"events":{"click .remove-filter-btn":"onRemoveFilterClick"},"initialize":function(e){e.disabled&&this.$el.addClass("disabled")
},"serializeData":function(){return{"currentFilters":this.model.get("currentFilters")}},"onRemoveFilterClick":function(e){e.preventDefault();var t=n(e.currentTarget).data("key");this.trigger("removeAllFilters",t)}});return s}),define("hb!templates/desktop/lists/library/section/FilterListItem",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(){return"boolean-btn"}function r(){return"filter-btn"}function o(){return"selected"}function l(){return"hidden"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};
var c,d,u,h="",p=this,f=n.helperMissing,m=this.escapeExpression;return h+='<a class="',u={"hash":{},"inverse":p.program(3,r,s),"fn":p.program(1,a,s),"data":s},c=n.if_eq||t&&t.if_eq,d=c?c.call(t,(c=t&&t.filter,null==c||c===!1?c:c.filterType),"boolean",u):f.call(t,"if_eq",(c=t&&t.filter,null==c||c===!1?c:c.filterType),"boolean",u),(d||0===d)&&(h+=d),h+=" btn-gray ",d=n["if"].call(t,t&&t.selected,{"hash":{},"inverse":p.noop,"fn":p.program(5,o,s),"data":s}),(d||0===d)&&(h+=d),h+='" href="#">\n  ',u={"hash":{},"data":s},h+=m((c=n.t||t&&t.t,c?c.call(t,(c=t&&t.filter,null==c||c===!1?c:c.title),u):f.call(t,"t",(c=t&&t.filter,null==c||c===!1?c:c.title),u)))+'\n  <i class="selected-icon glyphicon ok-2 ',d=n.unless.call(t,t&&t.selected,{"hash":{},"inverse":p.noop,"fn":p.program(7,l,s),"data":s}),(d||0===d)&&(h+=d),h+='"></i>\n</a>\n'
})}),define("plex/desktop/views/lists/library/section/FilterListItem",["hb!templates/desktop/lists/library/section/FilterListItem.tpl","underscore","marionette"],function(e,t,n){var i=n.ItemView.extend({"tagName":"li","template":e,"ui":{"btn":"a","selectedIcon":".selected-icon"},"events":{"click .boolean-btn":"onBooleanFilterClick","click .filter-btn":"onFilterClick"},"onlyAfterRender":["onCurrentFiltersChange"],"initialize":function(){this.listenTo(this.model.section,"change:currentFilters",this.onCurrentFiltersChange)
},"serializeData":function(){return{"filter":this.model.toJSON(),"selected":this.isCurrentFilter()}},"isCurrentFilter":function(){var e=this.model.section.get("currentFilters");return!!t.findWhere(e,{"key":this.model.id})},"onBooleanFilterClick":function(e){e.preventDefault();var t={"key":this.model.id,"title":this.model.get("title"),"value":1};this.ui.btn.hasClass("selected")?this.trigger("removeFilter",t):this.trigger("addFilter",t)},"onFilterClick":function(e){e.preventDefault(),this.trigger("showOptions",this.model)
},"onCurrentFiltersChange":function(){var e=this.isCurrentFilter();this.ui.btn.toggleClass("selected",e),this.ui.selectedIcon.toggleClass("hidden",!e)}});return i}),define("plex/desktop/views/lists/library/section/FilterList",["plex/desktop/views/lists/BaseList","plex/desktop/views/lists/library/section/FilterListItem"],function(e,t){var n=e.extend({"tagName":"ul","className":"list side-bar-list","itemView":t,"initialize":function(e){var t=this.collection.section;e.disabled?this.$el.addClass("disabled"):this.listenTo(t,"change:currentType",this.onCurrentTypeChange)
},"onCurrentTypeChange":function(){this.collection.fetch({"reset":!0,"cancelable":!0})}});return n}),define("hb!templates/desktop/lists/library/section/FilterOptionList",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(){return"hidden"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var r,o,l="",c=this,d="function",u=this.escapeExpression,h=n.helperMissing;return l+='<form id="filter-options-search-form" class="',r=n.unless.call(t,t&&t.showSearch,{"hash":{},"inverse":c.noop,"fn":c.program(1,a,s),"data":s}),(r||0===r)&&(l+=r),l+='">\n  <div class="form-group form-group-search">\n    <label class="control-label-search" for="filter-options-search"><i class="glyphicon search"></i></label>\n    <input type="search" id="filter-options-search" class="form-control form-control-search" value="',(r=n.query)?r=r.call(t,{"hash":{},"data":s}):(r=t&&t.query,r=typeof r===d?r.call(t,{"hash":{},"data":s}):r),l+=u(r)+'">\n  </div>\n</form>\n\n<ul class="list side-bar-list">\n  <li><a class="deselect-btn btn-gray" href="#">',o={"hash":{},"data":s},l+=u((r=n.t||t&&t.t,r?r.call(t,"Deselect All",o):h.call(t,"t","Deselect All",o)))+"</a>\n</ul>\n"
})}),define("hb!templates/desktop/lists/library/section/FilterOptionListItem",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(){return"selected"}function r(){return"hidden"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var o,l,c,d="",u=this,h=n.helperMissing,p=this.escapeExpression;return d+='<a class="filter-option-btn btn-gray ',o=n["if"].call(t,t&&t.selected,{"hash":{},"inverse":u.noop,"fn":u.program(1,a,s),"data":s}),(o||0===o)&&(d+=o),d+='" href="#">\n  ',c={"hash":{},"data":s},d+=p((o=n.t||t&&t.t,o?o.call(t,(o=t&&t.filterOption,null==o||o===!1?o:o.title),c):h.call(t,"t",(o=t&&t.filterOption,null==o||o===!1?o:o.title),c)))+'\n  <i class="selected-icon glyphicon ok-2 ',l=n.unless.call(t,t&&t.selected,{"hash":{},"inverse":u.noop,"fn":u.program(3,r,s),"data":s}),(l||0===l)&&(d+=l),d+='"></i>\n</a>\n'
})}),define("plex/desktop/views/lists/library/section/FilterOptionListItem",["hb!templates/desktop/lists/library/section/FilterOptionListItem.tpl","underscore","marionette"],function(e,t,n){var i=n.ItemView.extend({"tagName":"li","template":e,"ui":{"btn":"a","selectedIcon":".selected-icon"},"events":{"click a":"onClick"},"onlyAfterRender":["onCurrentFiltersChange"],"initialize":function(){this.listenTo(this.model.section,"change:currentFilters",this.onCurrentFiltersChange)},"serializeData":function(){return{"filterOption":this.model.toJSON(),"selected":this.isCurrentFilter()}
},"isCurrentFilter":function(){var e=this.model.section.get("currentFilters"),n=t.findWhere(e,{"key":this.model.parent.id});if(!n)return!1;var i=n.values,s=t.find(i,t.bind(function(e){return e==this.model.get("key")},this));return!!s},"onClick":function(e){e.preventDefault();var t={"key":this.model.parent.id,"title":this.model.get("title"),"value":this.model.id};this.ui.btn.hasClass("selected")?this.trigger("removeFilter",t):this.trigger("addFilter",t)},"onCurrentFiltersChange":function(){var e=this.isCurrentFilter();
this.ui.btn.toggleClass("selected",e),this.ui.selectedIcon.toggleClass("hidden",!e)}});return i}),define("plex/desktop/views/lists/library/section/FilterOptionList",["hb!templates/desktop/lists/library/section/FilterOptionList.tpl","jquery","marionette","plex/desktop/views/lists/library/section/FilterOptionListItem"],function(e,t,n,i){var s=n.CompositeView.extend({"classname":"filter-option-list-search-container","template":e,"itemView":i,"itemViewContainer":".side-bar-list","query":"","ui":{"searchForm":"#filter-options-search-form","searchInput":"#filter-options-search"},"events":{"keyup #filter-options-search":"onSearchKeyUp","submit #filter-options-search-form":"onSearchSubmit","click .deselect-btn":"onDeselectClick"},"initialize":function(){this.originalCollection=this.collection,this.listenToOnce(this.originalCollection,"reset",this.onCollectionReset),this.collection.fetch({"reset":!0,"cancelable":!0})
},"serializeData":function(){return{"showSearch":this.collection.length>20,"query":this.query}},"search":function(){this.query=t.trim(this.ui.searchInput.val()),this.rebase(this.query?this.originalCollection.search(this.query):this.originalCollection)},"selectExactMatch":function(){this.collection.each(function(e){var t=e.get("title");if(t&&t.toLowerCase()===this.query.toLowerCase()){var n={"key":e.parent.id,"title":t,"value":e.id};this.trigger("addFilter",this,n)}},this)},"onCollectionReset":function(e){var t=e.length>20;
this.ui.searchForm.toggleClass("hidden",!t)},"onSearchKeyUp":function(){this.search()},"onSearchSubmit":function(e){e.preventDefault(),this.search(),this.query&&this.selectExactMatch()},"onDeselectClick":function(e){e.preventDefault(),this.trigger("removeAllFilters",this.collection.parent.id)}});return s}),define("hb!templates/desktop/lists/library/section/SortListItem",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};
var a,r,o="",l=n.helperMissing,c=this.escapeExpression;return o+='<a class="sort-btn btn-gray" href="#">\n  ',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,t&&t.title,r):l.call(t,"t",t&&t.title,r)))+'\n  <i class="desc-icon caret-icon caret-icon-sm hidden"></i>\n  <i class="asc-icon caret-icon caret-icon-sm caret-icon-reverse hidden"></i>\n</a>\n'})}),define("plex/desktop/views/lists/library/section/SortListItem",["hb!templates/desktop/lists/library/section/SortListItem.tpl","marionette"],function(e,t){var n=t.ItemView.extend({"tagName":"li","template":e,"events":{"click a":"onClick"},"initialize":function(){var e=this.model.section.get("currentSort");
if(!e){var t=this.model.get("defaultDirection");t&&(this.model.set({"selected":!0,"direction":t}),this.model.section.set("currentSort",this.model,{"silent":!0}))}this.listenTo(this.model.section,"change:currentSort",this.onCurrentSortChange)},"bindings":{".sort-btn":{"modelAttribute":"selected","manual":!0,"formatter":function(e,t){t.toggleClass("selected",e)}},".desc-icon":{"modelAttribute":"direction","manual":!0,"formatter":function(e,t){t.toggleClass("hidden","desc"!==e)}},".asc-icon":{"modelAttribute":"direction","manual":!0,"formatter":function(e,t){t.toggleClass("hidden","asc"!==e)
}}},"onCurrentSortChange":function(e,t){this.model.id!==t.id&&this.model.set({"selected":!1,"direction":null})},"onClick":function(e){e.preventDefault();var t=this.model.section.get("currentSort"),n=this.model.get("direction");n=n&&"asc"!==n?"asc":"desc",this.model.set({"selected":!0,"direction":n}),t&&t.id===this.model.id?this.model.section.trigger("change:currentSort",this.model.section,this.model):this.model.section.set("currentSort",this.model)}});return n}),define("plex/desktop/views/lists/library/section/SortList",["plex/desktop/views/lists/BaseList","plex/desktop/views/lists/library/section/SortListItem"],function(e,t){var n=e.extend({"tagName":"ul","className":"list side-bar-list","itemView":t,"initialize":function(e){var t=this.collection.section;
e.disabled?this.$el.addClass("disabled"):(this.listenTo(t,"change:currentType",this.onCurrentTypeChange),this.collection.populate({"reset":!0,"cancelable":!0}))},"onCurrentTypeChange":function(){this.collection.section.set("currentSort",null,{"silent":!0}),this.collection.fetch({"reset":!0,"cancelable":!0})}});return n}),define("plex/desktop/views/sidebar/SectionSideBarView",["hb!templates/desktop/sidebar/SectionSideBarView.tpl","underscore","marionette","plex/base/utils/Dispatcher","plex/base/adapters/LocalizerAdapter","plex/base/models/AppModel","plex/base/models/SettingsModel","plex/desktop/views/filterbar/SectionFilterBarView","plex/desktop/views/lists/library/section/MediaTypeList","plex/desktop/views/lists/library/section/CurrentFilterList","plex/desktop/views/lists/library/section/FilterList","plex/desktop/views/lists/library/section/FilterOptionList","plex/desktop/views/lists/library/section/SortList"],function(e,t,n,i,s,a,r,o,l,c,d,u,h){var p=n.Layout.extend({"className":"side-bar","template":e,"ui":{"newFilterBtn":".new-filter-icon-btn","filterOptionsHeader":".filter-options-header","typeContainer":".section-type-container","sortContainer":".section-sort-container"},"regions":{"type":".section-type-list-container","currentFilters":".section-current-filters-list-container","filters":".section-filters-list-container","filterOptions":".section-filter-option-list-container","sort":".section-sort-list-container"},"modelEvents":{"change:currentFilters":"onCurrentFiltersChange"},"events":{"click .new-filter-btn":"onNewFilterClick","click .hide-btn":"onHideClick"},"initialize":function(){this.hidden=!r.get("sidebarOpen"),this.advancedFilters=!!this.model.get("allowAdvancedFilters"),this.linearFilters=!this.advancedFilters,this.hidden?this.$el.addClass("transition-out"):i.trigger("show:sidebar"),a.set({"searchType":"section","searchPlaceholder":this.model.get("title"),"searchValue":this.getSearchValue()}),this.listenTo(i,"search:section",this.onSearch)
},"serializeData":function(){return{"showNewFilterIconBtn":this.advancedFilters&&!!this.model.get("currentFilters").length}},"open":function(){this.hidden=!1,r.save("sidebarOpen",!0),this.$el.removeClass("transition-out"),i.trigger("show:sidebar")},"hide":function(){this.hidden=!0,r.save("sidebarOpen",!1),this.$el.addClass("transition-out"),i.trigger("hide:sidebar")},"getSearchValue":function(){var e=this.model.get("currentFilters"),n=t.findWhere(e,{"key":"title"});return n&&n.values.length?n.values[0]:null
},"addFilter":function(e,n){n||(n={});var i=this.model.get("currentFilters");this.linearFilters&&i.length&&(i.length=0);var s=t.findWhere(i,{"key":e.key});if(s){if(t.indexOf(s.values,e.value)>-1)return;n.replace?(s.titles=[e.title],s.values=[e.value]):(s.titles.push(e.title),s.values.push(e.value))}else i.push({"key":e.key,"titles":[e.title],"values":[e.value]});this.model.trigger("change:currentFilters",this.model,i)},"removeFilter":function(e){var n=this.model.get("currentFilters"),i=t.findWhere(n,{"key":e.key});
i&&(i.titles=t.reject(i.titles,function(t){return t===e.title}),i.values=t.reject(i.values,function(t){return t===e.value}),i.values.length||n.splice(t.indexOf(n,i),1)),this.model.trigger("change:currentFilters",this.model,n)},"removeAllFilters":function(e){var n=this.model.get("currentFilters"),i=t.findWhere(n,{"key":e});n.splice(t.indexOf(n,i),1),this.model.trigger("change:currentFilters",this.model,n)},"onRender":function(){var e="all"!==this.model.get("currentSubset").id,n=new l({"collection":this.model.get("types"),"disabled":this.linearFilters||e}),s=new c({"model":this.model,"disabled":e}),a=new h({"collection":this.model.get("sorts"),"disabled":e});
if(this.listenToOnce(n,"collection:rendered",this.onTypeListRender),this.listenTo(s,"removeAllFilters",this.onRemoveAllFilters),this.listenToOnce(a,"collection:rendered",this.onSortListRender),this.type.show(n),this.currentFilters.show(s),this.sort.show(a),!e){var r=this.model.get("filters").populate({"reset":!0,"cancelable":!0});r.done(t.bind(function(t){var n=this.linearFilters?t.filterBySecondary():t,i=new d({"collection":n,"disabled":e});this.listenTo(i,"itemview:addFilter",this.onAddFilter),this.listenTo(i,"itemview:removeFilter",this.onRemoveFilter),this.listenTo(i,"itemview:showOptions",this.onFilterListShowOptions),this.filters.show(i)
},this))}this.model.get("currentFilters").length&&i.trigger("show:filterbar",new o({"model":this.model}))},"onClose":function(){a.set({"searchType":null,"searchPlaceholder":null}),i.trigger("hide:sidebar"),i.trigger("hide:filterbar")},"onCurrentFiltersChange":function(e,t){var n=!!t.length;this.ui.newFilterBtn.toggleClass("hidden",this.linearFilters||!n),a.set("searchValue",this.getSearchValue()),n?i.trigger("show:filterbar",new o({"model":this.model})):i.trigger("hide:filterbar")},"onSearch":function(e){return e?void this.addFilter({"key":"title","value":e,"title":e},{"replace":!0}):void this.removeAllFilters("title")
},"onAddFilter":function(e,t){this.addFilter(t)},"onRemoveFilter":function(e,t){this.removeFilter(t)},"onRemoveAllFilters":function(e){this.removeAllFilters(e)},"onTypeListRender":function(e){this.ui.typeContainer.toggleClass("hidden",e.collection.length<2)},"onFilterListShowOptions":function(e,t){var n=s.get().t(t.get("title"));this.$el.addClass("show-filter-options"),this.$el.removeClass("show-filters"),this.ui.filterOptionsHeader.text(n);var i=new u({"collection":t.get("options")});this.listenTo(i,"addFilter",this.onAddFilter),this.listenTo(i,"removeAllFilters",this.onRemoveAllFilters),this.listenTo(i,"itemview:addFilter",this.onAddFilter),this.listenTo(i,"itemview:removeFilter",this.onRemoveFilter),this.filterOptions.show(i)
},"onSortListRender":function(e){this.ui.sortContainer.toggleClass("hidden",!e.collection.length);var t=e.collection.length;t||this.listenToOnce(e,"before:item:added",this.onSortListItemAdded)},"onSortListItemAdded":function(){this.ui.sortContainer.removeClass("hidden")},"onNewFilterClick":function(e){e.preventDefault(),this.$el.addClass("show-filters")},"onHideClick":function(e){e.preventDefault(),this.$el.removeClass("show-filters show-filter-options")}});return p}),define("hb!templates/desktop/modals/AddToCollectionModal",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s="";
return s+='\n        <ul class="list select-list select-collections-list minimal-scroll">\n          ',i=n.each.call(e,e&&e.collections,{"hash":{},"inverse":v.noop,"fn":v.program(2,r,t),"data":t}),(i||0===i)&&(s+=i),s+="\n        </ul>\n      "}function r(e,t){var i,s,a="";return a+='\n            <li class="striped-list-item select-list-item">\n              <a class="collection" data-value="',(i=n.key)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.key,i=typeof i===f?i.call(e,{"hash":{},"data":t}):i),a+=m(i)+'" href="#">',s={"hash":{},"data":t},a+=m((i=n.truncate||e&&e.truncate,i?i.call(e,e&&e.title,25,s):g.call(e,"truncate",e&&e.title,25,s)))+"</a>\n            </li>\n          "
}function o(e,t){var i;return i=n["if"].call(e,e&&e.loading,{"hash":{},"inverse":v.program(7,c,t),"fn":v.program(5,l,t),"data":t}),i||0===i?i:""}function l(){return'\n        <div class="loading-container">\n          <div class="loading loading-inline"></div>\n        </div>\n      '}function c(e,t){var i,s,a="";return a+='\n        <div class="empty-message">',s={"hash":{},"data":t},a+=m((i=n.t||e&&e.t,i?i.call(e,"There are no collections in this library.",s):g.call(e,"t","There are no collections in this library.",s)))+"</div>\n      "
}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var d,u,h,p="",f="function",m=this.escapeExpression,g=n.helperMissing,v=this;return p+='<div class="modal-dialog">\n  <div class="modal-content">\n    <div class="modal-header">\n      <button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button>\n      <h4 class="modal-title"><i class="modal-icon glyphicon folder-plus"></i> ',h={"hash":{},"data":s},p+=m((d=n.t||t&&t.t,d?d.call(t,"Select a Collection",h):g.call(t,"t","Select a Collection",h)))+'</h4>\n    </div>\n\n    <div class="modal-body modal-body-scroll minimal-scroll">\n      ',u=n["if"].call(t,t&&t.collections,{"hash":{},"inverse":v.program(4,o,s),"fn":v.program(1,a,s),"data":s}),(u||0===u)&&(p+=u),p+='\n\n      <div class="message-container">\n        <textarea class="message form-control" placeholder="',h={"hash":{},"data":s},p+=m((d=n.t||t&&t.t,d?d.call(t,"New collection...",h):g.call(t,"t","New collection...",h)))+'"></textarea>\n      </div>\n    </div>\n\n    <div class="modal-footer">\n      <button type="button" class="add-btn btn btn-primary btn-loading disabled">\n        <div class="loading loading-sm"></div>\n        <span class="btn-label">',h={"hash":{},"data":s},p+=m((d=n.t||t&&t.t,d?d.call(t,"Add",h):g.call(t,"t","Add",h)))+"</span>\n      </button>\n    </div>\n  </div>\n</div>\n"
})}),define("plex/desktop/views/modals/AddToCollectionModal",["hb!templates/desktop/modals/AddToCollectionModal.tpl","underscore","jquery","plex/base/utils/Dispatcher","plex/base/adapters/LocalizerAdapter","plex/base/models/library/section/FilterModel","plex/desktop/views/modals/SelectModal"],function(e,t,n,i,s,a,r){var o=r.extend({"name":"addToCollectionModal","className":"add-to-collection-modal select-modal modal modal-sm fade","template":e,"ui":{"addBtn":".add-btn","message":".message"},"events":{"click .collection":"onCollectionClick","keyup .message":"onMessageKeyUp","click .add-btn":"onAddClick"},"onlyAfterRender":["onReset"],"initialize":function(e){r.prototype.initialize.apply(this,arguments),this.loading=!0,this.models=e.models,this.model=t.first(this.models),this.collectionIDs=[],this.filter=new a({"filter":"collection","flterType":"string","type":"filter","title":"Collection","standalone":!0},{"server":this.model.server,"section":this.model.section}),this.collections=this.filter.get("options"),this.collections.fetch().always(t.bind(this.onReset,this))
},"serializeData":function(){return{"loading":this.loading,"collections":this.filter.get("options").toJSON()}},"toggleAddButton":function(){var e=this.ui.message.val();this.ui.addBtn.toggleClass("disabled",!this.collectionIDs.length&&!e.length)},"onReset":function(){this.loading=!1,this.render()},"onCollectionClick":function(e){e.preventDefault();var i=n(e.currentTarget),s=i.data("value");i.hasClass("selected")?this.collectionIDs.splice(t.indexOf(this.collectionIDs,s),1):this.collectionIDs.push(s),i.toggleClass("selected"),this.toggleAddButton()
},"onMessageKeyUp":function(){this.toggleAddButton()},"onAddClick":function(e){e.preventDefault();var a=this.ui.addBtn;if(!a.isDisabled()){a.addClass("active");var r=this.ui.message.val(),o=[];r&&o.push(this.model.batchAdd(this.models,"collection",r)),t.each(this.collectionIDs,function(e){var t=this.collections.get(e);o.push(this.model.batchAdd(this.models,"collection",t.get("title")))},this);var l=n.when.apply(n,o);l.done(t.bind(this.hide,this)),l.fail(function(){a.removeClass("active");var e=s.get();
i.trigger("show:alert",{"type":"error","message":e.t("There was a problem adding to this collection.")})})}}});return o}),define("plex/desktop/views/actionbar/SectionActionBarView",["hb!templates/desktop/actionbar/SectionActionBarView.tpl","underscore","jquery","marionette","plex/base/utils/Dispatcher","plex/base/utils/types/MediaTypes","plex/base/commands/Commands","plex/base/models/AppModel","plex/desktop/models/MediaActionsModel","plex/desktop/views/sidebar/SectionSideBarView","plex/desktop/views/modals/AddToCollectionModal"],function(e,t,n,i,s,a,r,o,l,c,d){var u=i.Layout.extend({"className":"section-side-bar-container","template":e,"ui":{"playBtn":".play-btn","playShuffledBtn":".play-shuffled-btn","refreshBtn":".refresh-btn","analyzeBtn":".analyze-btn","markWatchedBtn":".mark-watched-btn","markUnwatchedBtn":".mark-unwatched-btn","addToCollectionBtn":".add-to-collection-btn","mergeBtn":".merge-btn","syncBtn":".sync-btn"},"regions":{"sidebar":".side-bar"},"triggers":{"click .options-btn":"toggleSidebar","click .play-btn":"play","click .play-shuffled-btn":"playShuffled","click .select-btn":"select","click .deselect-btn":"deselect","click .refresh-btn":"refresh","click .analyze-btn":"analyze","click .mark-watched-btn":"markWatched","click .mark-unwatched-btn":"markUnwatched","click .add-to-collection-btn":"addToCollection","click .merge-btn":"merge","click .sync-btn":"sync"},"modelEvents":{"change:selectedModels":"onSelectedModelsChange"},"onlyAfterRender":["onToggleSidebar","onPlay","onRefresh","onAnalyze","onMarkWatched","onMarkUnwatched","onAddToCollection","onSync"],"initialize":function(){this.type=this.model.get("type"),this.shared=this.model.server.get("shared"),this.synced=this.model.server.get("synced"),this.multiuser=this.model.server.get("multiuser"),this.signedIn=o.get("user").get("signedIn"),this.mediaActions=new l({},{"section":this.model}),this.listenTo(s,{"shortcut:sidebar":this.onToggleSidebar,"shortcut:play":this.onPlay,"shortcut:refresh":this.onRefresh,"shortcut:analyze":this.onAnalyze,"shortcut:markWatched":this.onMarkWatched,"shortcut:markUnwatched":this.onMarkUnwatched,"shortcut:sync":this.onSync})
},"bindings":{".play-btn":{"model":"mediaActions","modelAttribute":"showPlay","manual":!0,"autohide":!0},".play-shuffled-btn":{"model":"mediaActions","modelAttribute":"showShuffle","manual":!0,"autohide":!0},".select-btn":{"modelAttribute":"selecting","manual":!0,"autohide":function(e){return!e}},".deselect-btn":{"modelAttribute":"selecting","manual":!0,"autohide":!0},".refresh-btn":{"modelAttribute":"selectedModels","manual":!0,"autohide":function(e){return e.length&&this.mediaActions.get("showRefresh")&&!this.hasSelectedFolder
}},".analyze-btn":{"modelAttribute":"selectedModels","manual":!0,"autohide":function(e){return e.length&&this.mediaActions.get("showAnalyze")&&!this.hasSelectedFolder}},".mark-watched-btn, .mark-unwatched-btn":{"modelAttribute":"selectedModels","manual":!0,"autohide":function(e){return e.length&&this.mediaActions.get("showMarkWatched")&&!this.hasSelectedFolder}},".add-to-collection-btn":{"modelAttribute":"selectedModels","manual":!0,"autohide":function(e){return e.length&&this.mediaActions.get("showAddToCollection")&&!this.hasSelectedFolder
}},".merge-btn":{"modelAttribute":"selectedModels","manual":!0,"autohide":function(e){var t=this.model.server.supports("merge");return e.length>1&&this.mediaActions.get("showMerge")&&t&&!this.hasSelectedFolder}},".sync-btn":{"model":"mediaActions","modelAttribute":"showSync","manual":!0,"autohide":!0}},"onRender":function(){this.sidebar.append(new c({"model":this.model}),this.$el),this.$el.tooltip({"selector":".nav > li > a","container":"body","placement":"right"})},"onClose":function(){this.mediaActions.stopListening(),this.model.set({"selecting":!1,"selectedModels":[]})
},"onSelectedModelsChange":function(e,t){this.model.set("selecting",!!t.length),this.hasSelectedFolder=!1;for(var n=0,i=t.length;i>n;n++){var s=t[n];if(s.get("isFolder")){this.hasSelectedFolder=!0;break}}},"onToggleSidebar":function(){n(".tooltip").remove();var e=this.sidebar.currentView;e.hidden?e.open():e.hide()},"onPlay":function(){this.ui.playBtn.isDisabled()||r.execute("playMedia",{"item":this.model})},"onPlayShuffled":function(){this.ui.playShuffledBtn.isDisabled()||r.execute("playMedia",{"item":this.model,"shuffle":!0})
},"onSelect":function(){this.model.set("selecting",!0)},"onDeselect":function(){this.model.set("selecting",!1)},"onRefresh":function(){return this.ui.refreshBtn.isDisabled()?void r.execute("updateLibrary",{"section":this.model}):void t.each(this.model.get("selectedModels"),function(e){r.execute("refreshMetadata",{"item":e})})},"onAnalyze":function(){return this.ui.analyzeBtn.isDisabled()?void r.execute("analyzeSection",{"section":this.model}):void t.each(this.model.get("selectedModels"),function(e){r.execute("analyzeItem",{"item":e})
})},"onMarkWatched":function(){if(!this.ui.markWatchedBtn.isDisabled()){var e=n.Deferred().resolve();t.each(this.model.get("selectedModels"),function(t,n){e=e.then(function(){return r.execute("markWatched",{"item":t,"force":n>0})})})}},"onMarkUnwatched":function(){if(!this.ui.markUnwatchedBtn.isDisabled()){var e=n.Deferred().resolve();t.each(this.model.get("selectedModels"),function(t,n){e=e.then(function(){r.execute("markUnwatched",{"item":t,"force":n>0})})})}},"onAddToCollection":function(){this.ui.addToCollectionBtn.isDisabled()||s.trigger("show:modal",new d({"models":this.model.get("selectedModels")}))
},"onMerge":function(){if(!this.ui.mergeBtn.isDisabled()){var e=this.model.get("selectedModels"),n=t.first(e),i=e.slice(1);r.execute("merge",{"item":n,"items":i})}},"onSync":function(){if(!this.ui.syncBtn.isDisabled()){var e=this.model.get("selectedModels"),t=a.getMediaTypeByString(this.model.get("type")),n={"model":this.model,"type":t,"isNew":!0,"isSection":!0,"isDirectory":!0};e.length&&!this.hasSelectedFolder&&(n.models=e),r.execute("showSyncModal",n)}}});return u}),define("hb!templates/desktop/breadcrumbbar/SectionBreadcrumbBarView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s,a,o="";
return o+='\n    <a class="edit-btn btn-gray" href="#" title="',a={"hash":{},"data":t},o+=p((i=n.t||e&&e.t,i?i.call(e,"Edit Library",a):h.call(e,"t","Edit Library",a)))+'" data-toggle="tooltip"><i class="glyphicon pencil"></i></a>\n    <a class="update-btn btn-gray btn-loading btn-loading-replace btn-loading-static ',s=n["if"].call(e,e&&e.refreshing,{"hash":{},"inverse":f.noop,"fn":f.program(2,r,t),"data":t}),(s||0===s)&&(o+=s),o+='" href="#" title="',(s=n.updateTitle)?s=s.call(e,{"hash":{},"data":t}):(s=e&&e.updateTitle,s=typeof s===m?s.call(e,{"hash":{},"data":t}):s),o+=p(s)+'" data-title-alt="',(s=n.updateTitleAlt)?s=s.call(e,{"hash":{},"data":t}):(s=e&&e.updateTitleAlt,s=typeof s===m?s.call(e,{"hash":{},"data":t}):s),o+=p(s)+'" data-toggle="tooltip">\n      <span class="loading loading-bc"></span>\n      <i class="btn-label-alt glyphicon ban"></i>\n      <i class="btn-label glyphicon repeat"></i>\n    </a>\n\n    <span id="section-actions-dropdown" class="dropdown">\n      <a class="btn-gray dropdown-toggle" href="#section-actions-dropdown" data-toggle="dropdown"><i class="glyphicon cogwheel"></i> <i class="caret-icon caret-icon-sm"></i></a>\n\n      <ul class="dropdown-menu pull-right">\n        <li><a class="analyze-btn" href="#">',a={"hash":{},"data":t},o+=p((i=n.t||e&&e.t,i?i.call(e,"Analyze...",a):h.call(e,"t","Analyze...",a)))+'</a></li>\n        <li><a class="force-refresh-btn" href="#">',a={"hash":{},"data":t},o+=p((i=n.t||e&&e.t,i?i.call(e,"Force Refresh...",a):h.call(e,"t","Force Refresh...",a)))+'</a></li>\n        <li><a class="empty-trash-btn" href="#">',a={"hash":{},"data":t},o+=p((i=n.t||e&&e.t,i?i.call(e,"Empty Trash...",a):h.call(e,"t","Empty Trash...",a)))+'</a></li>\n        <li><a class="delete-btn has-danger" href="#">',a={"hash":{},"data":t},o+=p((i=n.t||e&&e.t,i?i.call(e,"Delete...",a):h.call(e,"t","Delete...",a)))+"</a></li>\n      </ul>\n    </span>\n  "
}function r(){return"active"}function o(){return"hidden"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var l,c,d,u="",h=n.helperMissing,p=this.escapeExpression,f=this,m="function";return u+='<div class="breadcrumb-actions pull-right">\n  ',l=n.unless.call(t,t&&t.limited,{"hash":{},"inverse":f.noop,"fn":f.program(1,a,s),"data":s}),(l||0===l)&&(u+=l),u+='\n\n  <span id="section-list-dropdown" class="dropdown">\n    <a class="btn-gray dropdown-toggle" href="#section-list-dropdown" data-toggle="dropdown"><i class="glyphicon show-thumbnails"></i> <i class="caret-icon caret-icon-sm"></i></a>\n\n    <ul class="dropdown-menu pull-right">\n      <li><a class="list-btn" data-type="media-tile-list" href="#">',d={"hash":{},"data":s},u+=p((l=n.t||t&&t.t,l?l.call(t,"Posters",d):h.call(t,"t","Posters",d)))+'<i class="dropdown-selected-icon glyphicon ok-2 ',d={"hash":{},"inverse":f.noop,"fn":f.program(4,o,s),"data":s},l=n.if_neq||t&&t.if_neq,c=l?l.call(t,t&&t.listType,"media-tile-list",d):h.call(t,"if_neq",t&&t.listType,"media-tile-list",d),(c||0===c)&&(u+=c),u+='"></i></a></li>\n      <li><a class="list-btn" data-type="media-details-list" href="#">',d={"hash":{},"data":s},u+=p((l=n.t||t&&t.t,l?l.call(t,"Details",d):h.call(t,"t","Details",d)))+'<i class="dropdown-selected-icon glyphicon ok-2 ',d={"hash":{},"inverse":f.noop,"fn":f.program(4,o,s),"data":s},l=n.if_neq||t&&t.if_neq,c=l?l.call(t,t&&t.listType,"media-details-list",d):h.call(t,"if_neq",t&&t.listType,"media-details-list",d),(c||0===c)&&(u+=c),u+='"></i></a></li>\n      <li><a class="list-btn" data-type="media-list" href="#">',d={"hash":{},"data":s},u+=p((l=n.t||t&&t.t,l?l.call(t,"List",d):h.call(t,"t","List",d)))+'<i class="dropdown-selected-icon glyphicon ok-2 ',d={"hash":{},"inverse":f.noop,"fn":f.program(4,o,s),"data":s},l=n.if_neq||t&&t.if_neq,c=l?l.call(t,t&&t.listType,"media-list",d):h.call(t,"if_neq",t&&t.listType,"media-list",d),(c||0===c)&&(u+=c),u+='"></i></a></li>\n    </ul>\n  </span>\n</div>\n\n<span class="breadcrumb-dropdown"></span>\n<span class="breadcrumb-subset-dropdown"></span>\n\n<span class="breadcrumb-items-dropdown">\n  <span class="items-badge badge badge-lg">',(c=n.totalSize)?c=c.call(t,{"hash":{},"data":s}):(c=t&&t.totalSize,c=typeof c===m?c.call(t,{"hash":{},"data":s}):c),u+=p(c)+"</span>\n</span>\n"
})}),define("hb!templates/desktop/dropdowns/SectionDropdown",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s,a="";return a+='\n  <a class="dropdown-toggle" href="#section-dropdown" data-toggle="dropdown">'+h((i=e&&e.currentSection,i=null==i||i===!1?i:i.title,typeof i===p?i.apply(e):i))+' <i class="caret-icon"></i></a>\n\n  <ul class="dropdown-menu">\n    ',s=n.each.call(e,e&&e.sections,{"hash":{},"inverse":f.noop,"fn":f.programWithDepth(2,r,t,e),"data":t}),(s||0===s)&&(a+=s),a+="\n  </ul>\n"
}function r(e,t,i){var s,a,r,l="";return l+='\n      <li><a href="#!/server/',r={"hash":{},"data":t},l+=h((s=n.encodeUrl||i&&i.encodeUrl,s?s.call(e,i&&i.serverID,r):u.call(e,"encodeUrl",i&&i.serverID,r)))+"/section/",r={"hash":{},"data":t},l+=h((s=n.encodeUrl||e&&e.encodeUrl,s?s.call(e,e&&e.key,r):u.call(e,"encodeUrl",e&&e.key,r)))+'"><span class="dropdown-truncated-label">',(a=n.title)?a=a.call(e,{"hash":{},"data":t}):(a=e&&e.title,a=typeof a===p?a.call(e,{"hash":{},"data":t}):a),l+=h(a)+"</span>",r={"hash":{},"inverse":f.noop,"fn":f.program(3,o,t),"data":t},s=n.if_eq||i&&i.if_eq,a=s?s.call(e,(s=i&&i.currentSection,null==s||s===!1?s:s.key),e&&e.key,r):u.call(e,"if_eq",(s=i&&i.currentSection,null==s||s===!1?s:s.key),e&&e.key,r),(a||0===a)&&(l+=a),l+="</a></li>\n    "
}function o(){return'<i class="dropdown-selected-icon glyphicon ok-2"></i>'}function l(e){var t,n="";return n+="\n  "+h((t=e&&e.currentSection,t=null==t||t===!1?t:t.title,typeof t===p?t.apply(e):t))+"\n"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var c,d="",u=n.helperMissing,h=this.escapeExpression,p="function",f=this;return c=n["if"].call(t,t&&t.showDropdown,{"hash":{},"inverse":f.program(5,l,s),"fn":f.program(1,a,s),"data":s}),(c||0===c)&&(d+=c),d+="\n"})}),define("plex/desktop/views/dropdowns/SectionDropdown",["hb!templates/desktop/dropdowns/SectionDropdown.tpl","marionette"],function(e,t){var n=t.ItemView.extend({"id":"section-dropdown","tagName":"span","className":"dropdown","template":e,"modelEvents":{"change:title":"render"},"serializeData":function(){return{"showDropdown":this.collection.length>1,"sections":this.collection.toJSON(),"serverID":this.model.server.id,"currentSection":this.model.toJSON()}
}});return n}),define("hb!templates/desktop/dropdowns/SectionSubsetDropdown",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s,a,o="";return o+='\n  <a class="btn-gray dropdown-toggle" href="#section-subset-dropdown" data-toggle="dropdown">',a={"hash":{},"data":t},o+=p((i=n.t||e&&e.t,i?i.call(e,(i=e&&e.currentSubset,null==i||i===!1?i:i.title),a):h.call(e,"t",(i=e&&e.currentSubset,null==i||i===!1?i:i.title),a)))+' <i class="caret-icon"></i></a>\n\n  <ul class="dropdown-menu">\n    ',s=n.each.call(e,e&&e.subsets,{"hash":{},"inverse":f.noop,"fn":f.programWithDepth(2,r,t,e),"data":t}),(s||0===s)&&(o+=s),o+="\n  </ul>\n"
}function r(e,t,i){var s,a="";return a+="\n      ",s=n["if"].call(e,e&&e.primary,{"hash":{},"inverse":f.noop,"fn":f.programWithDepth(3,o,t,i),"data":t}),(s||0===s)&&(a+=s),a+="\n    "}function o(e,t,i){var s,a,r,o="";return o+='\n        <li><a href="#!/server/',r={"hash":{},"data":t},o+=p((s=n.encodeUrl||i&&i.encodeUrl,s?s.call(e,i&&i.serverID,r):h.call(e,"encodeUrl",i&&i.serverID,r)))+"/section/",r={"hash":{},"data":t},o+=p((s=n.encodeUrl||i&&i.encodeUrl,s?s.call(e,i&&i.sectionID,r):h.call(e,"encodeUrl",i&&i.sectionID,r)))+"/",r={"hash":{},"data":t},o+=p((s=n.encodeUrl||e&&e.encodeUrl,s?s.call(e,e&&e.key,r):h.call(e,"encodeUrl",e&&e.key,r)))+'">',r={"hash":{},"data":t},o+=p((s=n.t||e&&e.t,s?s.call(e,e&&e.title,r):h.call(e,"t",e&&e.title,r)))+" ",r={"hash":{},"inverse":f.noop,"fn":f.program(4,l,t),"data":t},s=n.if_eq||i&&i.if_eq,a=s?s.call(e,(s=i&&i.currentSubset,null==s||s===!1?s:s.key),e&&e.key,r):h.call(e,"if_eq",(s=i&&i.currentSubset,null==s||s===!1?s:s.key),e&&e.key,r),(a||0===a)&&(o+=a),o+="</a></li>\n      "
}function l(){return'<i class="dropdown-selected-icon glyphicon ok-2"></i>'}function c(e,t){var i,s,a="";return a+='\n  <span class="dropdown-placeholder">',s={"hash":{},"data":t},a+=p((i=n.t||e&&e.t,i?i.call(e,(i=e&&e.currentSubset,null==i||i===!1?i:i.title),s):h.call(e,"t",(i=e&&e.currentSubset,null==i||i===!1?i:i.title),s)))+"</span>\n"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var d,u="",h=n.helperMissing,p=this.escapeExpression,f=this;return d=n["if"].call(t,t&&t.showDropdown,{"hash":{},"inverse":f.program(6,c,s),"fn":f.program(1,a,s),"data":s}),(d||0===d)&&(u+=d),u+="\n"
})}),define("plex/desktop/views/dropdowns/SectionSubsetDropdown",["hb!templates/desktop/dropdowns/SectionSubsetDropdown.tpl","marionette"],function(e,t){var n=t.ItemView.extend({"id":"section-subset-dropdown","tagName":"span","className":"dropdown","template":e,"collectionEvents":{"reset":"render"},"initialize":function(){this.collection.populate({"reset":!0,"cancelable":!0})},"serializeData":function(){var e=this.collection.get(this.model.id)||this.model;return{"showDropdown":this.collection.length>1,"subsets":this.collection.toJSON(),"currentSubset":e.toJSON(),"serverID":this.model.server.id,"sectionID":this.model.section.id}
}});return n}),define("plex/desktop/views/breadcrumbbar/SectionBreadcrumbBarView",["hb!templates/desktop/breadcrumbbar/SectionBreadcrumbBarView.tpl","jquery","underscore","marionette","plex/base/utils/Dispatcher","plex/base/adapters/LocalizerAdapter","plex/base/commands/Commands","plex/base/utils/types/MediaTypes","plex/base/models/SettingsModel","plex/desktop/views/dropdowns/SectionDropdown","plex/desktop/views/dropdowns/SectionSubsetDropdown","plex/desktop/views/modals/EditSectionModal"],function(e,t,n,i,s,a,r,o,l,c,d,u){var h={"preventDefault":!0,"stopPropagation":!1},p=i.Layout.extend({"className":"breadcrumb-bar","template":e,"ui":{"listSelectedIcons":"#section-list-dropdown .dropdown-selected-icon","itemsBadge":".items-badge","updateBtn":".update-btn"},"regions":{"sectionDropdown":".breadcrumb-dropdown","subsetDropdown":".breadcrumb-subset-dropdown"},"triggers":{"click .edit-btn":"edit","click .update-btn":"update","click .analyze-btn":n.extend({"event":"analyze"},h),"click .force-refresh-btn":n.extend({"event":"forceRefresh"},h),"click .empty-trash-btn":n.extend({"event":"emptyTrash"},h),"click .delete-btn":n.extend({"event":"delete"},h)},"events":{"click .list-btn":"onListClick"},"onlyAfterRender":["onTotalSizeChange"],"initialize":function(){var e=this.model.get("items"),t=a.get();
this.refreshing=this.model.get("refreshing"),this.updateTitle=t.t("Update Library"),this.updateTitleAlt=t.t("Cancel Update"),this.shared=this.model.server.get("shared"),this.synced=this.model.server.get("synced"),this.limited=!(!this.shared&&!this.synced),this.listenTo(e,"change:totalSize",this.onTotalSizeChange),this.listenTo(this.model,"change:refreshing",this.onRefreshingChange),this.listenTo(s,{"shortcut:edit":this.onEdit,"shortcut:delete":this.onDelete})},"serializeData":function(){var e=this.model.getScopedKey("listType");
return{"limited":this.limited,"totalSize":this.model.get("items").totalSize,"listType":l.get(e)||"media-tile-list","refreshing":this.refreshing,"updateTitle":this.refreshing?this.updateTitleAlt:this.updateTitle,"updateTitleAlt":this.refreshing?this.updateTitle:this.updateTitleAlt}},"onRender":function(){this.$el.tooltip({"selector":".breadcrumb-actions > a","container":"body","placement":"bottom"}),this.sectionDropdown.show(new c({"model":this.model,"collection":this.model.server.get("sections")})),this.subsetDropdown.show(new d({"model":this.model.get("currentSubset"),"collection":this.model.get("subsets")}))
},"onTotalSizeChange":function(e,t){this.ui.itemsBadge.text(t)},"onEdit":function(){this.limited||s.trigger("show:modal",new u({"server":this.model.server,"model":this.model}))},"onUpdate":function(){this.limited||r.execute("updateLibrary",{"section":this.model,"cancel":this.model.get("refreshing")})},"onAnalyze":function(){this.limited||r.execute("analyzeSection",{"section":this.model})},"onForceRefresh":function(){this.limited||r.execute("updateLibrary",{"section":this.model,"params":{"force":!0}})
},"onEmptyTrash":function(){this.limited||r.execute("emptyTrash",{"section":this.model})},"onDelete":function(){if(!this.limited){var e=r.execute("deleteSection",{"section":this.model});e.done(function(){s.trigger("navigate","dashboard")})}},"onListClick":function(e){e.preventDefault();var n=t(e.currentTarget),i=n.data("type"),s=this.model.getScopedKey("listType");l.save(s,i),this.ui.listSelectedIcons.addClass("hidden"),n.find(".dropdown-selected-icon").removeClass("hidden")},"onRefreshingChange":function(){var e=this.ui.updateBtn,i=this.ui.updateBtn.attr("data-original-title");
if(this.ui.updateBtn.toggleClass("active",this.model.get("refreshing")),i){var s=t(".tooltip > .tooltip-inner").html();n.contains([this.updateTitle,this.updateTitleAlt],s)&&t(".tooltip > .tooltip-inner").html(e.attr("data-title-alt")),e.attr("data-original-title",e.attr("data-title-alt")),e.attr("data-title-alt",i)}}});return p}),define("hb!templates/desktop/alphabar/AlphaBarView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};
var a="";return a})}),define("hb!templates/desktop/lists/library/section/AlphaListItem",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,r="",o="function",l=this.escapeExpression;return r+='<a class="btn-gray" href="#">',(a=n.title)?a=a.call(t,{"hash":{},"data":s}):(a=t&&t.title,a=typeof a===o?a.call(t,{"hash":{},"data":s}):a),r+=l(a)+"</a>\n"})}),define("plex/desktop/views/lists/library/section/AlphaListItem",["hb!templates/desktop/lists/library/section/AlphaListItem.tpl","marionette"],function(e,t){var n=t.ItemView.extend({"tagName":"li","className":"alpha-bar-list-item","template":e,"events":{"click a":"onClick"},"onClick":function(e){e.preventDefault(),this.model.section.set("currentFirstCharacter",this.model)
}});return n}),define("plex/desktop/views/lists/library/section/AlphaList",["plex/desktop/views/lists/BaseList","plex/desktop/views/lists/library/section/AlphaListItem"],function(e,t){var n=e.extend({"tagName":"ul","className":"list alpha-bar-list","itemView":t});return n}),define("plex/desktop/views/alphabar/AlphaBarView",["hb!templates/desktop/alphabar/AlphaBarView.tpl","underscore","marionette","plex/base/utils/Dispatcher","plex/desktop/views/lists/library/section/AlphaList"],function(e,t,n,i,s){var a=n.Layout.extend({"className":"action-bar alpha-bar","template":e,"regions":{"list":".alpha-bar-list"},"modelEvents":{"change:currentType":"onListRefresh","change:currentFilters":"onListRefresh","change:currentSort":"onListRefresh"},"collectionEvents":{"reset":"onReset"},"initialize":function(){this.listenTo(i,"resize",this.onResize),this.collection.fetch({"reset":!0,"cancelable":!0})
},"measure":function(){this.updateContainerHeight(),this.updateLineHeight()},"updateContainerHeight":function(){this.containerHeight=this.$el.height()},"updateLineHeight":function(){var e=this.collection.length;if(e){var t=this.containerHeight/e;this.$el.css("line-height",t+"px")}},"onRender":function(){this.list.append(new s({"collection":this.collection}),this.$el),t.defer(t.bind(this.measure,this))},"onClose":function(){this.stopListening(this.collection),this.collection.release()},"onListRefresh":function(){this.list.currentView.$el.addClass("hidden"),this.collection.fetch({"reset":!0,"cancelable":!0})
},"onReset":function(e){return e.length<10?(this.$el.addClass("hidden"),void i.trigger("hide:alphabar",{"preserve":!0})):(this.containerHeight&&this.updateLineHeight(),this.$el.removeClass("hidden"),this.list.currentView.$el.removeClass("hidden"),void i.trigger("show:alphabar"))},"onResize":function(){this.updateContainerHeight(),this.updateLineHeight()}});return a}),define("hb!templates/desktop/section/SectionListView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{},'<div class="section-loading-container hidden">\n  <div class="loading loading-inline"></div>\n</div>\n'
})}),define("plex/desktop/mixins/MultiselectListMixin",["underscore","plex/base/utils/RangeUtil"],function(e,t){var n={"selectable":!0,"events":{"mousedown":"onMouseDown","mouseup":"onMouseUp","mouseleave":"onMouseUp"},"itemEvents":{"select":"onItemSelect","autoselect":"onItemAutoselect"},"singleSelect":function(t){this.shiftRange.end=-1,-1===e.indexOf(this.selectedItems,t)?(this.selectItem(t),this.shiftRange.start=this.collection.indexOf(t.model)):(this.deselectItem(t),this.shiftRange.start=-1)},"multiSelect":function(e){var n=this.collection.indexOf(e.model);
this.shiftRange.start<0?(this.selectItem(e),this.shiftRange.start=n):this.shiftRange.end<0?(this.shiftRange.end=n,t.each(this.shiftRange,function(e){var t=this.collection.at(e);this.selectItem(this.children.findByModel(t))},this)):(t.each(this.shiftRange,function(e){var t=this.collection.at(e);this.deselectItem(this.children.findByModel(t))},this),this.shiftRange.end=n,t.each(this.shiftRange,function(e){var t=this.collection.at(e);this.selectItem(this.children.findByModel(t))},this))},"selectItem":function(t){t.selected=!0,t.select(),e.indexOf(this.selectedItems,t)<0&&this.selectedItems.push(t)
},"deselectItem":function(t){if(this.selectedItems){var n=e.indexOf(this.selectedItems,t);n>-1&&(t.selected=!1,t.deselect(),this.selectedItems.splice(n,1))}},"deselectAllItems":function(){this.selectedItems&&(e.each(this.selectedItems,function(e){e.selected=!1,e.deselect()}),this.shiftRange.start=-1,this.shiftRange.end=-1,this.selectedItems.length=0,this.trigger("change:selectedItems",this.selectedItems))},"onMouseDown":function(){this.isMouseDown=!0},"onMouseUp":function(){this.isMouseDown=!1},"onItemSelect":function(e,t,n){this.selectable&&(n||(n={}),this.selectedItems||(this.selectedItems=[]),this.shiftRange||(this.shiftRange={"start":-1,"end":-1}),n.shiftKey?this.multiSelect(t):this.singleSelect(t),this.trigger("change:selectedItems",this.selectedItems))
},"onItemAutoselect":function(){this.isMouseDown&&this.onItemSelect.apply(this,arguments)},"onItemRemoved":function(e){e.selected&&(this.deselectItem(e),this.trigger("change:selectedItems",this.selectedItems))}};return n}),define("plex/desktop/views/lists/VirtualList",["underscore","marionette","plex/base/utils/Dispatcher","plex/base/utils/types/MediaTypes","plex/base/adapters/BugsenseAdapter","plex/desktop/mixins/MultiselectListMixin","plex/desktop/views/lists/BaseList"],function(e,t,n,i,s,a,r){var o=r.extend({"mixins":a,"sorted":!0,"measure":!0,"paginated":!0,"scrollPosition":0,"scrollDirection":"down","visibleStartIndex":null,"visibleEndIndex":null,"populatePending":!1,"mergeDelay":5e3,"initialize":function(t){null!=t.paginated&&(this.paginated=t.paginated),this.sortedChildViews=[],this.sizeProperty=this.paginated?"totalSize":"length",this.merge=e.throttle(e.bind(this.merge,this),this.mergeDelay),this.listenTo(n,"resize",this.onResize),this.listenTo(n,"scroll",this.onScroll),n.trigger("start:resizeListener"),n.trigger("start:scrollListener")
},"_renderChildren":function(){this.startBuffering(),this.closeEmptyView(),this.closeChildren(),this.visibleStartIndex=null,this.visibleEndIndex=null,this.scrollDirection="down";var t,i,s=this.collection.section;if(s){var a=s.get("currentType"),r=this.collection.getSort();if(t=a&&a.get("typeString"),r){var o=r.split(":");o.length&&(i=e.first(o))}}else t="clip";this.itemViewOptions={"type":t,"sort":i},this.collection&&this.collection[this.sizeProperty]>0?(this.showVirtualCollection(0),e.defer(e.bind(function(){this.collection.scrollPosition?(this.restoringScrollPosition=!0,n.trigger("update:scrollPosition",this.collection.scrollPosition)):this.$container[0].scrollTop>0?(this.restoringScrollPosition=!0,n.trigger("update:scrollPosition",0)):this.virtualize()
},this))):this.showEmptyView(),this.endBuffering()},"showVirtualCollection":function(e){for(var t=this.collection[this.sizeProperty],n=e;t>n;n++){var i=this.collection.at(n-this.collection.populatedRange.start),a=this.addItemView(i,this.getItemView(i),n);this.sortedChildViews.splice(n,0,a)}for(var r=this.sortedChildViews.length-1;r>=t;r--){var o=this.sortedChildViews[r];if(o)this.removeChildView(o);else{var l=s.get();l.notify(new Error("No child view to remove."),{"totalSize":t,"jIndex":r,"sortedChildViewsLength":this.sortedChildViews.length})
}}},"addChildView":function(e){this.closeEmptyView();var t=this.collection.indexOf(e),n=this.collection.populatedRange.start+t,i=this.sortedChildViews[n];i?i.model?(this.visibleStartIndex=0,this.visibleEndIndex++,i=this.addItemView(e,this.getItemView(e),n),this.sortedChildViews.splice(n,0,i)):(i.model=e,this.children._indexByModel[i.model.cid]=i.cid):(i=this.addItemView(e,this.getItemView(e),n),this.sortedChildViews.splice(n,0,i)),n>=this.visibleStartIndex&&n<=this.visibleEndIndex&&i.show()},"removeChildView":function(t){if(r.prototype.removeChildView.apply(this,arguments),!this.isClosing){var n=e.indexOf(this.sortedChildViews,t);
this.sortedChildViews.splice(n,1),n>=this.visibleStartIndex&&n<=this.visibleEndIndex&&this.visibleEndIndex--}},"virtualize":function(){if(null!=this.collection[this.sizeProperty]&&!this.restoringScrollPosition){if(!this.itemHeight)return this.virtualizeAfterMeasure=!0,void this.measureList();var e=this.visibleStartIndex,t=this.visibleEndIndex;if(this.visibleStartIndex=Math.floor(this.scrollPosition/this.itemHeight)*this.itemsPerRow,this.visibleEndIndex=this.visibleStartIndex+this.itemsPerPage-1,this.visibleStartIndex-=this.itemsPadding,this.visibleEndIndex+=this.itemsPadding,this.visibleStartIndex=Math.max(this.visibleStartIndex,0),this.visibleEndIndex=Math.min(this.visibleEndIndex,this.collection[this.sizeProperty]-1),e!==this.visibleStartIndex||t!==this.visibleEndIndex){var n,i;
null==e||null==t?(n=this.visibleStartIndex,i=this.visibleEndIndex):(n=Math.min(e,this.visibleStartIndex),i=Math.max(t,this.visibleEndIndex));for(var s=n;i>=s;s++){var a=this.sortedChildViews[s];if(!a)return;if(s<this.visibleStartIndex||s>this.visibleEndIndex)a.hide();else if(a.show(),!a.model){var r=this.collection.populatePromise;r&&"pending"===r.state()?this.populatePending=!0:this.populateRange({"start":s,"size":this.itemsPerPageWithPadding})}}}}},"populateRange":function(t){var n=t.start,i=t.size,s="up"===this.scrollDirection,a=this.collection.populatedRange,r=!1;
s&&(n=Math.max(n-i,0)),a.end>0?n<a.start?(i=a.start-n,a.start=n):(i=n+i-a.end,n=a.end):(a.start=n,a.end=n+i,r=!0),this.trigger("change:loading",!0,{"prepend":s});var o=this.collection.fetchRange({"start":n,"size":i,"prepend":s});o.always(e.bind(function(){this.trigger("change:loading",!1),a.end=a.start+this.collection.length,r&&this.measureList(),this.populatePending&&(this.populatePending=!1,this.virtualize())},this))},"merge":function(){if(!this.isClosed){var t=this.collection.populatedRange,n=t.start,i=t.end>this.itemsPerPageWithPadding?t.end:this.itemsPerPageWithPadding;
if(n>0)return this.scrollDirection="up",void this.populateRange({"start":0,"size":n});this.collection.pageStart=n,this.collection.pageSize=i;var s=this.collection.fetch();s.done(e.bind(function(){t.end=this.collection.length>i?t.start+i:t.start+this.collection.length,this.showVirtualCollection(this.children.length),this.virtualize()},this))}},"scrollToIndex":function(e){var t=Math.floor(e/this.itemsPerRow),i=t*this.itemHeight;n.trigger("update:scrollPosition",i)},"onCollectionRendered":function(){},"onMeasure":function(){var e=parseInt(this.$el.css("margin-top"),10),t=parseInt(this.$el.css("margin-bottom"),10);
this.containerWidth=this.$el.width(),this.containerHeight=this.$container.height()-e-t,this.itemsPerRow=Math.floor(this.containerWidth/this.itemWidth),this.itemsPerColumn=Math.floor(this.containerHeight/this.itemHeight),this.itemsPerPage=this.itemsPerRow*this.itemsPerColumn,this.itemsPadding=this.itemsPerRow*Math.max(this.itemsPerColumn,2),this.itemsPerPageWithPadding=2*this.itemsPadding+this.itemsPerPage,this.virtualizeAfterMeasure&&(this.virtualizeAfterMeasure=!1,this.virtualize())},"onCollectionBeforeClose":function(){this.isClosing=!0
},"onClose":function(){n.trigger("stop:resizeListener"),n.trigger("stop:scrollListener"),this.collection.scrollPosition=this.scrollPosition},"onResize":function(e){this.$container=e,this.scrollDirection=this.containerWidth>this.$el.width()?"up":"down",this.virtualizeAfterMeasure=!0,this.measureList()},"onScroll":function(e,t){this.restoringScrollPosition=!1,this.scrollDirection=t<this.scrollPosition?"up":"down",this.scrollPosition=t,this.$container?this.virtualize():this.$container=e}});return o}),define("plex/desktop/views/lists/library/VirtualMediaTileList",["plex/desktop/views/lists/VirtualList","plex/desktop/views/lists/library/MediaTileListItem"],function(e,t){var n=e.extend({"tagName":"ul","className":"tile-list virtual-list media-tile-list","itemView":t});
return n}),define("hb!templates/desktop/lists/library/MediaDetailsListItem",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(){return"show-actions"}function r(){return"selected"}function o(){return"hidden"}function l(){return'\n      <span class="media-added-at"></span>\n    '}function c(e,t){var i,s,a;return a={"hash":{},"inverse":x.program(12,u,t),"fn":x.program(10,d,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,e&&e.sort,"originallyAvailableAt",a):k.call(e,"if_eq",e&&e.sort,"originallyAvailableAt",a),s||0===s?s:""
}function d(){return'\n      <span class="media-available-at"></span>\n    '}function u(e,t){var i,s,a;return a={"hash":{},"inverse":x.program(15,p,t),"fn":x.program(13,h,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,e&&e.sort,"rating",a):k.call(e,"if_eq",e&&e.sort,"rating",a),s||0===s?s:""}function h(){return'\n      <span class="media-rating"></span>\n    '}function p(e,t){var i,s,a;return a={"hash":{},"inverse":x.program(18,m,t),"fn":x.program(16,f,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,e&&e.sort,"mediaHeight",a):k.call(e,"if_eq",e&&e.sort,"mediaHeight",a),s||0===s?s:""
}function f(){return'\n      <span class="media-resolution"></span>\n    '}function m(e,t){var i,s,a;return a={"hash":{},"inverse":x.noop,"fn":x.program(19,g,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,e&&e.sort,"duration",a):k.call(e,"if_eq",e&&e.sort,"duration",a),s||0===s?s:""}function g(){return'\n      <span class="media-duration"></span>\n    '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var v,y,b,w="",x=this,k=n.helperMissing,S="function",C=this.escapeExpression;
return w+='<a class="media-container ',v=n["if"].call(t,t&&t.showActions,{"hash":{},"inverse":x.noop,"fn":x.program(1,a,s),"data":s}),(v||0===v)&&(w+=v),w+=" ",v=n["if"].call(t,t&&t.selected,{"hash":{},"inverse":x.noop,"fn":x.program(3,r,s),"data":s}),(v||0===v)&&(w+=v),w+='" href="',(v=n.url)?v=v.call(t,{"hash":{},"data":s}):(v=t&&t.url,v=typeof v===S?v.call(t,{"hash":{},"data":s}):v),w+=C(v)+'">\n  <div class="media-poster">\n    <span class="media-count-badge badge hidden"></span>\n    <span class="unwatched-count-badge badge hidden"></span>\n\n    <div class="media-poster-progress-track hidden"></div>\n    <div class="media-poster-progress hidden"></div>\n  </div>\n\n  <div class="media-actions ',v=n.unless.call(t,t&&t.showActions,{"hash":{},"inverse":x.noop,"fn":x.program(5,o,s),"data":s}),(v||0===v)&&(w+=v),w+='">\n    <button class="play-btn media-action-btn btn-link" tabindex="-1"><i class="glyphicon play"></i></button>\n    <button class="play-unwatched-btn media-action-btn btn-link" tabindex="-1"><i class="glyphicon play"></i></button>\n    <button class="edit-btn media-action-btn btn-link btn-loading btn-loading-static" tabindex="-1">\n      <i class="btn-label glyphicon pencil"></i>\n      <div class="loading loading-sm"></div>\n    </button>\n    <button class="more-btn media-action-btn btn-link" tabindex="-1"><i class="glyphicon more"></i></button>\n  </div>\n\n  <div class="media-sort media-heading secondary">\n    ',b={"hash":{},"inverse":x.program(9,c,s),"fn":x.program(7,l,s),"data":s},v=n.if_eq||t&&t.if_eq,y=v?v.call(t,t&&t.sort,"addedAt",b):k.call(t,"if_eq",t&&t.sort,"addedAt",b),(y||0===y)&&(w+=y),w+='\n  </div>\n\n  <span class="media-title media-heading"></span>\n  <span class="media-subtitle-2 media-heading secondary"></span>\n  <span class="media-subtitle-1 media-heading secondary"></span>\n  <span class="unwatched-icon"></span>\n  <span class="media-context media-heading secondary"></span>\n\n  <p class="media-tagline"></p>\n\n  <p class="media-summary"></p>\n</a>\n\n<div class="media-actions-dropdown dropdown pull-right">\n  <div class="dropdown-toggle" data-toggle="dropdown"></div>\n</div>\n'
})}),define("plex/desktop/views/lists/library/MediaDetailsListItem",["hb!templates/desktop/lists/library/MediaDetailsListItem.tpl","underscore","plex/desktop/views/lists/library/MediaListItem","plex/desktop/views/images/MediaPosterImage"],function(e,t,n,i){var s=n.extend({"className":"striped-list-item media-list-item media-details-list-item","template":e,"ui":t.extend({"poster":".media-poster","progressTrack":".media-poster-progress-track"},n.prototype.ui),"initialize":function(){n.prototype.initialize.apply(this,arguments);
var e=this.type;"episode"===e&&(e="show"),this.image=new i({"model":this.model,"type":e,"getUrl":this.getPosterUrl,"height":150})},"bindings":t.extend({},n.prototype.bindings,{".media-count-badge":{"modelAttribute":"Media","formatter":function(e){return e.length},"autohide":function(e){return/^(clip|playlistItem)$/.test(this.model.get("type"))?!1:e>1}},".unwatched-count-badge":{"modelAttribute":"unviewedLeafCount","autohide":function(e){return this.shared&&!this.multiuser?!1:/^(artist|album)$/.test(this.model.get("type"))?!1:!!e
}},".media-tagline":{"modelAttribute":"tagline","autohide":!0},".media-summary":{"modelAttribute":"summary","autohide":!0}})});return s}),define("plex/desktop/views/lists/library/VirtualMediaDetailsList",["plex/desktop/views/lists/VirtualList","plex/desktop/views/lists/library/MediaDetailsListItem"],function(e,t){var n=e.extend({"tagName":"ul","className":"list virtual-list media-list media-details-list","itemView":t});return n}),define("plex/desktop/views/lists/library/VirtualMediaList",["plex/desktop/views/lists/VirtualList","plex/desktop/views/lists/library/MediaListItem"],function(e,t){var n=e.extend({"tagName":"ul","className":"list virtual-list media-list","itemView":t});
return n}),define("plex/desktop/views/section/SectionListView",["hb!templates/desktop/section/SectionListView.tpl","underscore","marionette","plex/base/models/SettingsModel","plex/desktop/views/lists/library/VirtualMediaTileList","plex/desktop/views/lists/library/VirtualMediaDetailsList","plex/desktop/views/lists/library/VirtualMediaList"],function(e,t,n,i,s,a,r){var o=n.Layout.extend({"className":"section-list-container","template":e,"ui":{"loading":".section-loading-container"},"regions":{"list":"ul"},"modelEvents":{"change:selecting":"onSelectingChange","change:currentType":"onListRefresh","change:currentFilters":"onListRefresh","change:currentSort":"onListRefresh","change:currentFirstCharacter":"onCurrentFirstCharacterChange","socket:timeline":"onTimeline"},"initialize":function(){var e=this.model.getScopedKey("listType");
this.listenTo(i,"change:"+e,this.onListTypeChange),this.collection.fetch({"reset":!0,"cancelable":!0})},"showLoading":function(e){e||(e={});var t=this.list.currentView,n=t.itemsPerPage,i=this.collection[t.sizeProperty];this.ui.loading.toggleClass("has-scrollbar",i>n),this.ui.loading.toggleClass("bottom",!e.prepend),this.ui.loading.removeClass("hidden")},"hideLoading":function(){this.ui.loading.addClass("hidden")},"getListConstructor":function(){var e=this.model.getScopedKey("listType"),t=i.get(e);
switch(t){case"media-details-list":return a;case"media-list":return r;default:return s}},"onRender":function(){var e=this.getListConstructor();e&&(this.list.append(new e({"collection":this.collection,"paginated":!this.model.server.get("synced")}),this.$el),this.listenTo(this.list.currentView,{"change:loading":this.onLoadingChange,"change:selectedItems":this.onSelectedItemsChange}))},"onClose":function(){this.stopListening(this.collection),this.collection.release()},"onListTypeChange":function(){this.list.currentView.scrollPosition=0,this.collection.populatedRange.start>0&&(this.collection.release(),this.collection.fetch({"reset":!0,"cancelable":!0})),this.render()
},"onSelectingChange":function(e,t){t||this.list.currentView.deselectAllItems(),this.$el.toggleClass("hide-actions",t)},"onListRefresh":function(){this.collection.scrollPosition=0,this.collection.release(),this.collection.fetch({"reset":!0,"cancelable":!0})},"onCurrentFirstCharacterChange":function(e,t){for(var n=e.get("alphanumeric"),i=0,s=0,a=n.length;a>s;s++){var r=n.at(s);if(t.id===r.id)break;i+=r.get("size")}this.list.currentView.scrollToIndex(i)},"onTimeline":function(e){if(0===e.state||9===e.state){var t=this.model.get("currentType");
("folder"===this.collection.subset||e.type===t.id)&&this.list.currentView.merge()}},"onLoadingChange":function(e,t){e?this.showLoading(t):this.hideLoading()},"onSelectedItemsChange":function(e){this.model.set("selectedModels",t.pluck(e,"model"))}});return o}),define("plex/desktop/views/section/SectionView",["hb!templates/desktop/section/SectionView.tpl","underscore","marionette","plex/base/utils/Dispatcher","plex/base/utils/types/SubsetTypes","plex/base/utils/types/MediaTypes","plex/base/models/SettingsModel","plex/base/models/library/section/SectionSubsetModel","plex/desktop/views/actionbar/SectionActionBarView","plex/desktop/views/breadcrumbbar/SectionBreadcrumbBarView","plex/desktop/views/alphabar/AlphaBarView","plex/desktop/views/section/SectionListView"],function(e,t,n,i,s,a,r,o,l,c,d,u){var h=n.Layout.extend({"className":"section-container","template":e,"regions":{"list":".section-list-container"},"initialize":function(e){this.initSubset(e),this.initType(e),this.model.set("currentFolderKey",e.folderKey),i.trigger("show:actionbar",new l({"model":this.model})),i.trigger("show:breadcrumbbar",new c({"model":this.model})),this.model.get("allowAdvancedFilters")&&"all"===this.subset.key&&i.trigger("show:alphabar",new d({"model":this.model,"collection":this.model.get("alphanumeric")}))
},"initSubset":function(e){var t=e.subset,n=this.model.getScopedKey("subset");t||(t=r.get(n)),this.subset=s.getSubsetType(t),this.subset||(this.subset=s.getSubsetType("all")),r.save(n,this.subset.key);var i=this.model.get("currentSubset");i&&i.id!==this.subset.key&&(this.model.get("items").scrollPosition=0,this.model.set("currentSubset",new o(this.subset,{"server":this.model.server,"section":this.model})))},"initType":function(e){var n=e.type,i=this.model.get("currentType");if(!i||n&&i.id!==n){var s=this.model.get("types"),r=a.getMediaTypeByString(this.model.get("type")),o=t.reject(a.getRelatedMediaTypes(r.typeString),function(e){var t=e.typeString;
return"track"===t||"photoAlbum"===t});s.reset(o,{"parse":!0});var l=n?n:r.id,c=s.get(l);c.set("selected",!0),this.model.set("currentType",c)}},"onRender":function(){this.list.append(new u({"model":this.model,"collection":this.model.get("items")}),this.$el)},"onClose":function(){i.trigger("hide:actionbar"),i.trigger("hide:breadcrumbbar"),i.trigger("hide:alphabar")}});return h}),define("hb!templates/desktop/details/DetailsView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};
var a="";return a})}),define("hb!templates/desktop/actionbar/ActionBarView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s;return s={"hash":{},"data":t},g((i=n.t||e&&e.t,i?i.call(e,"Play",s):m.call(e,"t","Play",s)))}function r(e,t){var i,s;return s={"hash":{},"data":t},g((i=n.t||e&&e.t,i?i.call(e,"Play All",s):m.call(e,"t","Play All",s)))}function o(e,t){var i,s,a="";return a+='<li><a class="play-next-btn btn-link secondary-only ',i=n.unless.call(e,e&&e.canQueue,{"hash":{},"inverse":v.noop,"fn":v.program(6,l,t),"data":t}),(i||0===i)&&(a+=i),a+='" href="#">',s={"hash":{},"data":t},a+=g((i=n.t||e&&e.t,i?i.call(e,"Play Next",s):m.call(e,"t","Play Next",s)))+"</a></li>"
}function l(){return"disabled"}function c(e,t){var i,s,a="";return a+='<li><a class="add-to-up-next-btn btn-link secondary-only ',i=n.unless.call(e,e&&e.canQueue,{"hash":{},"inverse":v.noop,"fn":v.program(6,l,t),"data":t}),(i||0===i)&&(a+=i),a+='" href="#">',s={"hash":{},"data":t},a+=g((i=n.t||e&&e.t,i?i.call(e,"Add to Up Next",s):m.call(e,"t","Add to Up Next",s)))+"</a></li>"}function d(e,t){var i,s,a="";return a+='\n        <li><a class="download-btn secondary-only" href="',(i=n.downloadUrl)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.downloadUrl,i=typeof i===y?i.call(e,{"hash":{},"data":t}):i),a+=g(i)+'" download="',(i=n.downloadName)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.downloadName,i=typeof i===y?i.call(e,{"hash":{},"data":t}):i),a+=g(i)+'">',s={"hash":{},"data":t},a+=g((i=n.t||e&&e.t,i?i.call(e,"Download",s):m.call(e,"t","Download",s)))+"</a></li>\n      "
}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var u,h,p,f="",m=n.helperMissing,g=this.escapeExpression,v=this,y="function";return f+='<ul class="nav action-bar-nav">\n  <li>\n    <a class="play-btn btn-gray" href="#" title="',u=n["if"].call(t,t&&t.isSingleItem,{"hash":{},"inverse":v.program(3,r,s),"fn":v.program(1,a,s),"data":s}),(u||0===u)&&(f+=u),f+='" data-toggle="tooltip"><i class="glyphicon play"></i></a>\n  </li>\n  <li>\n    <a class="play-unwatched-btn btn-gray" href="#" title="',p={"hash":{},"data":s},f+=g((u=n.t||t&&t.t,u?u.call(t,"Play Unwatched",p):m.call(t,"t","Play Unwatched",p)))+'" data-toggle="tooltip"><i class="glyphicon play"></i></a>\n  </li>\n  <li>\n    <a class="play-shuffled-btn btn-gray" href="#" title="',p={"hash":{},"data":s},f+=g((u=n.t||t&&t.t,u?u.call(t,"Play Shuffled",p):m.call(t,"t","Play Shuffled",p)))+'" data-toggle="tooltip"><i class="glyphicon random"></i></a>\n  </li>\n  <li>\n    <a class="edit-btn btn-gray" href="#" title="',p={"hash":{},"data":s},f+=g((u=n.t||t&&t.t,u?u.call(t,"Edit",p):m.call(t,"t","Edit",p)))+'" data-toggle="tooltip"><i class="glyphicon pencil"></i></a>\n  </li>\n  <li>\n    <a class="refresh-btn btn-gray" href="#" title="',p={"hash":{},"data":s},f+=g((u=n.t||t&&t.t,u?u.call(t,"Refresh",p):m.call(t,"t","Refresh",p)))+'" data-toggle="tooltip"><i class="glyphicon repeat"></i></a>\n  </li>\n  <li>\n    <a class="analyze-btn btn-gray secondary-action" href="#" title="',p={"hash":{},"data":s},f+=g((u=n.t||t&&t.t,u?u.call(t,"Analyze",p):m.call(t,"t","Analyze",p)))+'" data-toggle="tooltip"><i class="glyphicon magic"></i></a>\n  </li>\n  <li>\n    <a class="mark-watched-btn btn-gray" href="#" title="',p={"hash":{},"data":s},f+=g((u=n.t||t&&t.t,u?u.call(t,"Mark as Watched",p):m.call(t,"t","Mark as Watched",p)))+'" data-toggle="tooltip"><i class="glyphicon circle-ok"></i></a>\n  </li>\n  <li>\n    <a class="mark-unwatched-btn btn-gray" href="#" title="',p={"hash":{},"data":s},f+=g((u=n.t||t&&t.t,u?u.call(t,"Mark as Unwatched",p):m.call(t,"t","Mark as Unwatched",p)))+'" data-toggle="tooltip"><i class="glyphicon circle-minus"></i></a>\n  </li>\n  <li>\n    <a class="sync-btn btn-gray" href="#" title="',p={"hash":{},"data":s},f+=g((u=n.t||t&&t.t,u?u.call(t,"Sync",p):m.call(t,"t","Sync",p)))+'" data-toggle="tooltip"><i class="glyphicon download"></i></a>\n  </li>\n  <li>\n    <a class="share-btn btn-gray secondary-action" href="#" title="',p={"hash":{},"data":s},f+=g((u=n.t||t&&t.t,u?u.call(t,"Share",p):m.call(t,"t","Share",p)))+'" data-toggle="tooltip"><i class="glyphicon share"></i></a>\n  </li>\n  <li>\n    <a class="recommend-btn btn-gray secondary-action" href="#" title="',p={"hash":{},"data":s},f+=g((u=n.t||t&&t.t,u?u.call(t,"Recommend",p):m.call(t,"t","Recommend",p)))+'" data-toggle="tooltip"><i class="glyphicon share-alt"></i></a>\n  </li>\n  <li>\n    <a class="delete-btn btn-gray secondary-action" href="#" title="',p={"hash":{},"data":s},f+=g((u=n.t||t&&t.t,u?u.call(t,"Delete",p):m.call(t,"t","Delete",p)))+'" data-toggle="tooltip"><i class="glyphicon ban"></i></a>\n  </li>\n  <li>\n    <a class="delete-from-playlist-btn btn-gray secondary-action" href="#" title="',p={"hash":{},"data":s},f+=g((u=n.t||t&&t.t,u?u.call(t,"Delete",p):m.call(t,"t","Delete",p)))+'" data-toggle="tooltip"><i class="glyphicon ban"></i></a>\n  </li>\n  <li>\n    <a class="info-btn btn-gray secondary-action" href="#" title="',p={"hash":{},"data":s},f+=g((u=n.t||t&&t.t,u?u.call(t,"Info",p):m.call(t,"t","Info",p)))+'" data-toggle="tooltip"><i class="glyphicon circle-info"></i></a>\n  </li>\n\n  <li class="secondary-actions-dropdown dropdown">\n    <a class="more-btn btn-gray dropdown-toggle" href="#" data-toggle="dropdown"><i class="glyphicon more"></i></a>\n    <ul class="dropdown-menu">\n      <li><a class="play-all-btn btn-link secondary-only" href="#">',h=n["if"].call(t,t&&t.isSingleItem,{"hash":{},"inverse":v.program(3,r,s),"fn":v.program(1,a,s),"data":s}),(h||0===h)&&(f+=h),f+="</a></li>\n      ",h=n["if"].call(t,t&&t.showQueue,{"hash":{},"inverse":v.noop,"fn":v.program(5,o,s),"data":s}),(h||0===h)&&(f+=h),f+="\n      ",h=n["if"].call(t,t&&t.showQueue,{"hash":{},"inverse":v.noop,"fn":v.program(8,c,s),"data":s}),(h||0===h)&&(f+=h),f+='\n      <li class="secondary-divider divider"></li>\n      <li><a class="analyze-btn" href="#">',p={"hash":{},"data":s},f+=g((u=n.t||t&&t.t,u?u.call(t,"Analyze",p):m.call(t,"t","Analyze",p)))+'</a></li>\n      <li><a class="fix-match-btn secondary-only" href="#">',p={"hash":{},"data":s},f+=g((u=n.t||t&&t.t,u?u.call(t,"Fix Incorrect Match",p):m.call(t,"t","Fix Incorrect Match",p)))+'</a></li>\n      <li><a class="unmatch-btn secondary-only" href="#">',p={"hash":{},"data":s},f+=g((u=n.t||t&&t.t,u?u.call(t,"Unmatch",p):m.call(t,"t","Unmatch",p)))+'</a></li>\n      <li><a class="split-apart-btn secondary-only" href="#">',p={"hash":{},"data":s},f+=g((u=n.t||t&&t.t,u?u.call(t,"Split Apart",p):m.call(t,"t","Split Apart",p)))+"</a></li>\n      ",h=n["if"].call(t,t&&t.downloadUrl,{"hash":{},"inverse":v.noop,"fn":v.program(10,d,s),"data":s}),(h||0===h)&&(f+=h),f+='\n      <li><a class="share-btn" href="#">',p={"hash":{},"data":s},f+=g((u=n.t||t&&t.t,u?u.call(t,"Share",p):m.call(t,"t","Share",p)))+'</a></li>\n      <li><a class="recommend-btn" href="#">',p={"hash":{},"data":s},f+=g((u=n.t||t&&t.t,u?u.call(t,"Recommend",p):m.call(t,"t","Recommend",p)))+'</a></li>\n      <li><a class="delete-btn has-danger" href="#">',p={"hash":{},"data":s},f+=g((u=n.t||t&&t.t,u?u.call(t,"Delete",p):m.call(t,"t","Delete",p)))+'</a></li>\n      <li><a class="delete-from-playlist-btn has-danger" href="#">',p={"hash":{},"data":s},f+=g((u=n.t||t&&t.t,u?u.call(t,"Delete",p):m.call(t,"t","Delete",p)))+'</a></li>\n      <li><a class="info-btn" href="#">',p={"hash":{},"data":s},f+=g((u=n.t||t&&t.t,u?u.call(t,"Info",p):m.call(t,"t","Info",p)))+"</a></li>\n    </ul>\n  </li>\n</ul>\n"
})}),define("hb!templates/desktop/modals/FixIncorrectMatchModal",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s="";return s+='\n                  <option value="',(i=n.identifier)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.identifier,i=typeof i===f?i.call(e,{"hash":{},"data":t}):i),s+=m(i)+'" ',i=n["if"].call(e,e&&e.selected,{"hash":{},"inverse":g.noop,"fn":g.program(2,r,t),"data":t}),(i||0===i)&&(s+=i),s+=">",(i=n.name)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.name,i=typeof i===f?i.call(e,{"hash":{},"data":t}):i),s+=m(i)+"</option>\n                "
}function r(){return"selected"}function o(e,t){var i,s,a="";return a+='\n                  <option value="">',s={"hash":{},"data":t},a+=m((i=n.t||e&&e.t,i?i.call(e,"Loading...",s):v.call(e,"t","Loading...",s)))+"</option>\n                "}function l(e,t){var i,s="";return s+='\n                  <option value="',(i=n.value)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.value,i=typeof i===f?i.call(e,{"hash":{},"data":t}):i),s+=m(i)+'">',(i=n.label)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.label,i=typeof i===f?i.call(e,{"hash":{},"data":t}):i),s+=m(i)+"</option>\n                "
}function c(e,t){var i,s,a="";return a+='\n          <div class="match-location">\n            ',s={"hash":{},"data":t},a+=m((i=n.t||e&&e.t,i?i.call(e,"Location",s):v.call(e,"t","Location",s)))+": ",s={"hash":{},"data":t},a+=m((i=n.truncateMiddle||e&&e.truncateMiddle,i?i.call(e,e&&e.location,60,12,s):v.call(e,"truncateMiddle",e&&e.location,60,12,s)))+"\n          </div>\n        "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var d,u,h,p="",f="function",m=this.escapeExpression,g=this,v=n.helperMissing;
return p+='<div class="modal-dialog">\n  <div class="modal-content">\n    <form id="fix-incorrect-match-form">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button>\n        <h4 class="modal-title"><i class="modal-icon glyphicon nameplate"></i> ',h={"hash":{},"data":s},p+=m((d=n.t||t&&t.t,d?d.call(t,"Fix Incorrect Match",h):v.call(t,"t","Fix Incorrect Match",h)))+'</h4>\n      </div>\n\n      <div class="modal-body modal-body-scroll minimal-scroll">\n        <ul class="list modal-list">\n          <li class="modal-list-item"><a class="search-options-btn" href="#">',h={"hash":{},"data":s},p+=m((d=n.t||t&&t.t,d?d.call(t,"Search Options",h):v.call(t,"t","Search Options",h)))+'</a></li>\n          <li class="auto-match-container modal-list-item"></li>\n        </ul>\n\n        <div class="match-loading-container">\n          <div class="loading loading-inline"></div>\n        </div>\n\n        <div class="match-results-container"></div>\n\n        <div class="match-empty-message">',h={"hash":{},"data":s},p+=m((d=n.t||t&&t.t,d?d.call(t,"No matches found.",h):v.call(t,"t","No matches found.",h)))+'</div>\n\n        <div class="match-search-options row">\n          <div class="col-md-6">\n            <div class="form-group">\n              <label class="control-label" for="match-search-title">',h={"hash":{},"data":s},p+=m((d=n.t||t&&t.t,d?d.call(t,"Title",h):v.call(t,"t","Title",h)))+'</label>\n              <input type="text" id="match-search-title" name="title" class="form-control" value="'+m((d=t&&t.item,d=null==d||d===!1?d:d.title,typeof d===f?d.apply(t):d))+'">\n            </div>\n          </div>\n\n          <div class="col-md-6">\n            <div class="form-group">\n              <label class="control-label" for="match-search-agent">',h={"hash":{},"data":s},p+=m((d=n.t||t&&t.t,d?d.call(t,"Agent",h):v.call(t,"t","Agent",h)))+'</label>\n              <select id="match-search-agent" name="agent">\n                ',u=n.each.call(t,t&&t.agents,{"hash":{},"inverse":g.program(4,o,s),"fn":g.program(1,a,s),"data":s}),(u||0===u)&&(p+=u),p+='\n              </select>\n            </div>\n          </div>\n        </div>\n\n        <div class="match-search-options row">\n          <div class="col-md-6">\n            <div class="form-group">\n              <label class="control-label" for="match-search-year">',h={"hash":{},"data":s},p+=m((d=n.t||t&&t.t,d?d.call(t,"Year",h):v.call(t,"t","Year",h)))+'</label>\n              <input type="text" id="match-search-year" name="year" class="form-control" value="'+m((d=t&&t.item,d=null==d||d===!1?d:d.year,typeof d===f?d.apply(t):d))+'">\n            </div>\n          </div>\n\n          <div class="col-md-6">\n            <div class="form-group">\n              <label class="control-label" for="match-search-language">',h={"hash":{},"data":s},p+=m((d=n.t||t&&t.t,d?d.call(t,"Language",h):v.call(t,"t","Language",h)))+'</label>\n              <select id="match-search-language" name="language">\n                ',u=n.each.call(t,t&&t.languages,{"hash":{},"inverse":g.program(4,o,s),"fn":g.program(6,l,s),"data":s}),(u||0===u)&&(p+=u),p+='\n              </select>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class="modal-footer">\n        ',u=n["if"].call(t,t&&t.location,{"hash":{},"inverse":g.noop,"fn":g.program(8,c,s),"data":s}),(u||0===u)&&(p+=u),p+='\n\n        <div class="match-search-actions">\n          <button type="button" class="cancel-btn btn btn-default">',h={"hash":{},"data":s},p+=m((d=n.t||t&&t.t,d?d.call(t,"Cancel",h):v.call(t,"t","Cancel",h)))+'</button>\n          <button type="submit" class="btn btn-primary">',h={"hash":{},"data":s},p+=m((d=n.t||t&&t.t,d?d.call(t,"Search",h):v.call(t,"t","Search",h)))+"</button>\n        </div>\n      </div>\n    </form>\n  </div>\n</div>\n"
})}),define("plex/base/models/library/MatchResultModel",["underscore","plex/base/utils/Parser","plex/base/models/BaseModel"],function(e,t,n){var i=n.extend({"idAttribute":"guid","whitelistedAttrs":["guid","name","lang","score","year"],"convert":function(n){var i=e.isObject(n)?n:t.parseXML(n);return t.parseInteger(i,"score"),i.score=Math.min(Math.max(i.score,0),100),i},"parse":function(t){var n=this.convert(t);return n=e.pick(n,this.whitelistedAttrs)}});return i}),define("plex/base/models/library/MatchResultCollection",["underscore","plex/base/models/BaseCollection","plex/base/models/library/MatchResultModel"],function(e,t,n){var i=t.extend({"model":n,"url":function(){return"/library/metadata/"+this.parent.id+"/matches"
},"parse":function(e){return this.convert(e,"SearchResult")}});return i}),define("hb!templates/desktop/dropdowns/AutoMatchDropdown",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s="";return s+='\n    <li><a class="auto-match-agent" href="#" data-id="',(i=n.identifier)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.identifier,i=typeof i===d?i.call(e,{"hash":{},"data":t}):i),s+=u(i)+'">',(i=n.name)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.name,i=typeof i===d?i.call(e,{"hash":{},"data":t}):i),s+=u(i)+"</a></li>\n  "
}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var r,o,l,c="",d="function",u=this.escapeExpression,h=n.helperMissing,p=this;return c+='<a class="dropdown-toggle" href="#auto-match-dropdown" data-toggle="dropdown">',l={"hash":{},"data":s},c+=u((r=n.t||t&&t.t,r?r.call(t,"Auto Match",l):h.call(t,"t","Auto Match",l)))+' <i class="caret-icon caret-icon-sm"></i></a>\n\n<ul class="dropdown-menu">\n  ',o=n.each.call(t,t&&t.agents,{"hash":{},"inverse":p.noop,"fn":p.program(1,a,s),"data":s}),(o||0===o)&&(c+=o),c+="\n</ul>\n"
})}),define("plex/desktop/views/dropdowns/AutoMatchDropdown",["hb!templates/desktop/dropdowns/AutoMatchDropdown.tpl","jquery","marionette","plex/base/commands/Commands"],function(e,t,n,i){var s=n.ItemView.extend({"id":"auto-match-dropdown","tagName":"span","className":"dropdown","template":e,"collectionEvents":{"reset":"render"},"events":{"click .auto-match-agent":"onClick"},"initialize":function(){this.collection.populate({"reset":!0,"cancelable":!0})},"serializeData":function(){return{"agents":this.collection.toJSON()}
},"onClick":function(e){e.preventDefault();var n=t(e.currentTarget).data("id"),s=this.collection.get(n);i.execute("autoMatch",{"item":this.model,"agent":s})}});return s}),define("hb!templates/desktop/lists/library/MatchResultListItem",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s="";return s+="(",(i=n.year)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.year,i=typeof i===l?i.call(e,{"hash":{},"data":t}):i),s+=c(i)+")"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};
var r,o="",l="function",c=this.escapeExpression,d=this;return o+='<a class="match-result" href="#">\n  <span class="match-score pull-right">',(r=n.score)?r=r.call(t,{"hash":{},"data":s}):(r=t&&t.score,r=typeof r===l?r.call(t,{"hash":{},"data":s}):r),o+=c(r)+'</span>\n  <span class="match-name">',(r=n.name)?r=r.call(t,{"hash":{},"data":s}):(r=t&&t.name,r=typeof r===l?r.call(t,{"hash":{},"data":s}):r),o+=c(r)+"</span> ",r=n["if"].call(t,t&&t.year,{"hash":{},"inverse":d.noop,"fn":d.program(1,a,s),"data":s}),(r||0===r)&&(o+=r),o+="\n</a>\n"
})}),define("plex/desktop/views/lists/library/MatchResultListItem",["hb!templates/desktop/lists/library/MatchResultListItem.tpl","marionette","plex/base/commands/Commands"],function(e,t,n){var i=t.ItemView.extend({"tagName":"li","className":"striped-list-item rounded-list-item match-result-list-item","template":e,"events":{"click .match-result":"onClick"},"initialize":function(e){this.item=e.item},"onClick":function(e){e.preventDefault(),n.execute("match",{"item":this.item,"guid":this.model.id,"name":this.model.get("name")})
}});return i}),define("plex/desktop/views/lists/library/MatchResultList",["plex/desktop/views/lists/BaseList","plex/desktop/views/lists/library/MatchResultListItem"],function(e,t){var n=e.extend({"tagName":"ul","className":"list match-result-list","itemView":t});return n}),define("plex/desktop/views/modals/FixIncorrectMatchModal",["hb!templates/desktop/modals/FixIncorrectMatchModal.tpl","underscore","plex/base/utils/LanguageUtil","plex/base/utils/types/SectionTypes","plex/base/models/library/AgentCollection","plex/base/models/library/MatchResultCollection","plex/desktop/views/modals/BaseModal","plex/desktop/views/dropdowns/AutoMatchDropdown","plex/desktop/views/lists/library/MatchResultList"],function(e,t,n,i,s,a,r,o,l){function c(e){return t.map(e,function(e){return'<option value="'+e.value+'"'+(e.selected?" selected":"")+">"+e.label+"</option>"
}).join("\n")}function d(e){return e?t.map(e.get("language"),function(e){return{"label":n.getLanguageName(e),"value":e}}):[]}var u=r.extend({"name":"fixIncorrectMatch","className":"fix-incorrect-match-modal modal fade show-loading","template":e,"ui":{"agentSelect":"#match-search-agent","languageSelect":"#match-search-language"},"regions":{"autoMatchDropdown":".auto-match-container","list":".match-results-container"},"events":t.extend({"click .auto-match-agent":"hide","click .match-result":"hide","click .search-options-btn":"onSearchOptionsClick","click .cancel-btn":"onCancelClick","change #match-search-agent":"onAgentChange","submit #fix-incorrect-match-form":"onSubmit"},r.prototype.events),"onlyAfterRender":["onAgentsReset"],"initialize":function(){var e=i.getSectionTypeByString(this.model.section.get("type"));
this.collection=new a([],{"server":this.model.server,"parent":this.model}),this.agents=new s([],{"server":this.model.server,"sectionType":e.typeID}),this.listenTo(this.collection,"reset",this.onResultsReset),this.listenTo(this.agents,"reset",this.onAgentsReset),this.collection.populate({"reset":!0,"timeout":0}),this.agents.populate({"reset":!0})},"serializeData":function(){var e=this.agents.get(this.model.section.get("agent")),n=this.agents.get(e),i={"item":this.model.toJSON(),"location":this.model.getLocation(),"agents":this.agents.toJSON(),"languages":d(n)};
return t.each(i.agents,function(t){t.identifier===e&&(t.selected=!0)}),i},"setLanguages":function(e){this.ui.languageSelect.empty(),e&&this.ui.languageSelect.append(c(d(e)))},"onRender":function(){r.prototype.onRender.apply(this,arguments),this.autoMatchDropdown.show(new o({"model":this.model,"collection":this.agents})),this.list.show(new l({"collection":this.collection,"itemViewOptions":{"item":this.model}}))},"onResultsReset":function(e){this.$el.removeClass("show-loading"),this.$el.toggleClass("show-empty",!e.length)
},"onAgentsReset":function(e){var t=this.model.section.get("agent");this.ui.agentSelect.empty(),this.ui.agentSelect.append(c(e.map(function(e){return{"label":e.get("name"),"value":e.get("identifier"),"selected":t===e.get("identifier")}}))),this.setLanguages(e.get(t))},"onSearchOptionsClick":function(e){e.preventDefault(),this.$el.addClass("show-options")},"onCancelClick":function(e){e.preventDefault(),this.$el.removeClass("show-options")},"onAgentChange":function(e){var t=this.agents.get(e.currentTarget.value);
this.setLanguages(t)},"onSubmit":function(e){e.preventDefault(),this.$el.addClass("show-loading"),this.$el.removeClass("show-empty show-options");var t=e.currentTarget,n={"title":t.title.value,"year":t.year.value,"agent":t.agent.value,"language":t.language.value,"manual":1};this.pendingRequest=this.collection.fetch({"reset":!0,"data":n,"processData":!0,"timeout":0})}});return u}),define("plex/desktop/views/actionbar/ActionBarView",["hb!templates/desktop/actionbar/ActionBarView.tpl","underscore","jquery","marionette","plex/base/utils/Dispatcher","plex/base/utils/types/MediaTypes","plex/base/utils/formatters/StringUtil","plex/base/commands/Commands","plex/desktop/models/MediaActionsModel","plex/desktop/views/modals/EditMetadataModal","plex/desktop/views/modals/FixIncorrectMatchModal","plex/desktop/views/modals/ShareModal","plex/desktop/views/modals/RecommendModal","plex/desktop/views/modals/MediaInfoModal"],function(e,t,n,i,s,a,r,o,l,c,d,u,h,p){var f=["episode","movie","clip","playlistItem"],m={"preventDefault":!0,"stopPropagation":!1},g=i.ItemView.extend({"className":"action-bar","template":e,"ui":{"primaryActions":".action-bar-nav","secondaryActions":".dropdown-menu","playBtn":".play-btn","playAllBtn":".play-all-btn","playUnwatchedBtn":".play-unwatched-btn","playShuffledBtn":".play-shuffled-btn","playNextBtn":".play-next-btn","addToUpNextBtn":".add-to-up-next-btn","secondaryDivider":".secondary-divider","editBtn":".edit-btn","refreshBtn":".refresh-btn","analyzeBtn":".analyze-btn","markWatchedBtn":".mark-watched-btn","markUnwatchedBtn":".mark-unwatched-btn","syncBtn":".sync-btn","deleteBtn":".delete-btn","deleteFromPlaylistBtn":".delete-from-playlist-btn","infoBtn":".info-btn"},"triggers":{"click .play-btn":"play","click .play-all-btn":t.extend({"event":"play"},m),"click .play-unwatched-btn":"playUnwatched","click .play-shuffled-btn":"playShuffled","click .edit-btn":"edit","click .refresh-btn":"refresh","click .analyze-btn":t.extend({"event":"analyze"},m),"click .mark-watched-btn":"markWatched","click .mark-unwatched-btn":"markUnwatched","click .fix-match-btn":t.extend({"event":"fixMatch"},m),"click .unmatch-btn":t.extend({"event":"unmatch"},m),"click .split-apart-btn":t.extend({"event":"splitApart"},m),"click .sync-btn":"sync","click .share-btn":t.extend({"event":"share"},m),"click .recommend-btn":t.extend({"event":"recommend"},m),"click .delete-btn":t.extend({"event":"delete"},m),"click .delete-from-playlist-btn":t.extend({"event":"deleteFromPlaylist"},m),"click .info-btn":t.extend({"event":"info"},m)},"events":{"click .play-next-btn":"onPlayNextClick","click .add-to-up-next-btn":"onAddToUpNextClick"},"onlyAfterRender":["edit","refresh","analyze","markWatched","markUnwatched","sync","deleteFile","deleteFromPlaylist","info","onPlayQueuesChange"],"initialize":function(){this.type=this.model.get("type"),this.mediaActions=new l({},{"item":this.model,"showAdvanced":!0}),this.listenTo(this.mediaActions,"change",t.throttle(this.updateDropdown,50)),this.listenTo(s,{"shortcut:play":this.onPlay,"shortcut:edit":this.onEdit,"shortcut:refresh":this.onRefresh,"shortcut:analyze":this.onAnalyze,"shortcut:markWatched":this.onMarkWatched,"shortcut:markUnwatched":this.onMarkUnwatched,"shortcut:sync":this.onSync,"shortcut:delete":this.onDelete,"shortcut:info":this.onInfo}),this.listenTo(s,"shortcut:play",this.onPlayUnwatched),this.listenTo(s,"shortcut:delete",this.onDeleteFromPlaylist)
},"serializeData":function(){var e=t.extend({},this.mediaActions.attributes);if(e.isSingleItem=t.contains(f,this.type),this.mediaActions.get("showDownload")){e.downloadUrl=this.model.getDownloadUrl();var n=this.model.getFilepath();n&&(e.downloadName=r.getLastSegment(n))}return e},"updateDropdown":function(){var e=this.ui.secondaryActions.find("a:not(.hidden)"),t=e.hasClass("secondary-only"),n=e.length>2||t;if(this.$el.toggleClass("show-secondary-actions-dropdown",n),n){var i=this.ui.secondaryDivider,s=i.prevAll(":not(:has(.hidden))").length,a=i.nextAll(":not(:has(.hidden))").length;
i.toggleClass("hidden",!s||!a)}},"bindingsModel":"mediaActions","bindings":{".play-btn":{"modelAttribute":"showPlay","manual":!0,"autohide":!0},".play-all-btn":{"modelAttribute":"showPlayAll","manual":!0,"autohide":!0},".play-unwatched-btn":{"modelAttribute":"showPlayUnwatched","manual":!0,"autohide":!0},".play-shuffled-btn":{"modelAttribute":"showShuffle","manual":!0,"autohide":!0},".edit-btn":{"modelAttribute":"showEdit","manual":!0,"autohide":!0},".refresh-btn":{"modelAttribute":"showRefresh","manual":!0,"autohide":!0},".analyze-btn":{"modelAttribute":"showAnalyze","manual":!0,"autohide":!0},".mark-watched-btn":{"modelAttribute":"showMarkWatched","manual":!0,"autohide":!0},".mark-unwatched-btn":{"modelAttribute":"showMarkUnwatched","manual":!0,"autohide":!0},".fix-match-btn":{"modelAttribute":"showFixMatch","manual":!0,"autohide":!0},".unmatch-btn":{"modelAttribute":"showUnmatch","manual":!0,"autohide":!0},".split-apart-btn":{"modelAttribute":"showSplitApart","manual":!0,"autohide":!0},".sync-btn":{"modelAttribute":"showSync","manual":!0,"autohide":!0},".download-btn":{"modelAttribute":"showDownload","manual":!0,"autohide":!0},".share-btn, .recommend-btn":{"modelAttribute":"showShare","manual":!0,"autohide":!0},".delete-btn":{"modelAttribute":"showDelete","manual":!0,"autohide":!0},".delete-from-playlist-btn":{"modelAttribute":"showDeleteFromPlaylist","manual":!0,"autohide":!0},".info-btn":{"modelAttribute":"showInfo","manual":!0,"autohide":!0}},"onRender":function(){this.$el.tooltip({"selector":".nav > li > a","container":"body","placement":"right"}),this.updateDropdown()
},"onPlay":function(){this.ui.playBtn.isDisabled()&&this.ui.playAllBtn.isDisabled()||o.execute("playMedia",{"item":this.model})},"onPlayUnwatched":function(){this.ui.playUnwatchedBtn.isDisabled()||o.execute("playMedia",{"item":this.model,"unwatched":!0})},"onPlayShuffled":function(){this.ui.playShuffledBtn.isDisabled()||o.execute("playMedia",{"item":this.model,"shuffle":!0})},"onEdit":function(){this.ui.editBtn.isDisabled()||s.trigger("show:modal",new c({"model":this.model}))},"onRefresh":function(){this.ui.refreshBtn.isDisabled()||o.execute("refreshMetadata",{"item":this.model})
},"onAnalyze":function(){this.ui.analyzeBtn.isDisabled()||o.execute("analyzeItem",{"item":this.model})},"onMarkWatched":function(){this.ui.markWatchedBtn.isDisabled()||o.execute("markWatched",{"item":this.model})},"onMarkUnwatched":function(){this.ui.markUnwatchedBtn.isDisabled()||o.execute("markUnwatched",{"item":this.model})},"onFixMatch":function(){s.trigger("show:modal",new d({"model":this.model}))},"onUnmatch":function(){o.execute("unmatch",{"item":this.model})},"onSplitApart":function(){o.execute("splitApart",{"item":this.model})
},"onSync":function(){if(!this.ui.syncBtn.isDisabled()){var e=a.getMediaTypeByString(this.model.get("type")),t={"model":this.model,"type":e,"isNew":!0,"isSection":!1};o.execute("showSyncModal",t)}},"onShare":function(){s.trigger("show:modal",new u({"model":this.model}))},"onRecommend":function(){s.trigger("show:modal",new h({"model":this.model}))},"onDelete":function(){this.ui.deleteBtn.isDisabled()||o.execute("deleteFile",{"item":this.model})},"onDeleteFromPlaylist":function(){if(!this.ui.deleteFromPlaylistBtn.isDisabled()){var e=this.model.destroy();
e.done(t.bind(function(){n(".tooltip").remove(),s.trigger("navigate","playlist",{"key":this.model.get("playlist")})},this))}},"onInfo":function(){this.ui.infoBtn.isDisabled()||s.trigger("show:modal",new p({"model":this.model}))},"onPlayNextClick":function(e){return e.preventDefault(),this.ui.playNextBtn.isDisabled()?void e.stopImmediatePropagation():void o.execute("queueMedia",{"item":this.model,"next":!0})},"onAddToUpNextClick":function(e){return e.preventDefault(),this.ui.addToUpNextBtn.isDisabled()?void e.stopImmediatePropagation():void o.execute("queueMedia",{"item":this.model,"next":!1})
}});return g}),define("hb!templates/desktop/breadcrumbbar/DetailsBreadcrumbBarView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s,a,o="";return o+='\n    <span id="section-list-dropdown" class="dropdown">\n      <a class="btn-gray dropdown-toggle" href="#section-list-dropdown" data-toggle="dropdown"><i class="glyphicon show-thumbnails"></i> <i class="caret-icon caret-icon-sm"></i></a>\n\n      <ul class="dropdown-menu pull-right">\n        <li><a class="list-btn" data-type="episode-tile-list" href="#">',a={"hash":{},"data":t},o+=h((i=n.t||e&&e.t,i?i.call(e,"Posters",a):u.call(e,"t","Posters",a)))+'<i class="dropdown-selected-icon glyphicon ok-2 ',a={"hash":{},"inverse":p.noop,"fn":p.program(2,r,t),"data":t},i=n.if_neq||e&&e.if_neq,s=i?i.call(e,e&&e.listType,"episode-tile-list",a):u.call(e,"if_neq",e&&e.listType,"episode-tile-list",a),(s||0===s)&&(o+=s),o+='"></i></a></li>\n        <li><a class="list-btn" data-type="episode-details-list" href="#">',a={"hash":{},"data":t},o+=h((i=n.t||e&&e.t,i?i.call(e,"Details",a):u.call(e,"t","Details",a)))+'<i class="dropdown-selected-icon glyphicon ok-2 ',a={"hash":{},"inverse":p.noop,"fn":p.program(2,r,t),"data":t},i=n.if_neq||e&&e.if_neq,s=i?i.call(e,e&&e.listType,"episode-details-list",a):u.call(e,"if_neq",e&&e.listType,"episode-details-list",a),(s||0===s)&&(o+=s),o+='"></i></a></li>\n        <li><a class="list-btn" data-type="episode-list" href="#">',a={"hash":{},"data":t},o+=h((i=n.t||e&&e.t,i?i.call(e,"List",a):u.call(e,"t","List",a)))+'<i class="dropdown-selected-icon glyphicon ok-2 ',a={"hash":{},"inverse":p.noop,"fn":p.program(2,r,t),"data":t},i=n.if_neq||e&&e.if_neq,s=i?i.call(e,e&&e.listType,"episode-list",a):u.call(e,"if_neq",e&&e.listType,"episode-list",a),(s||0===s)&&(o+=s),o+='"></i></a></li>\n      </ul>\n    </span>\n  '
}function r(){return"hidden"}function o(e,t){var i,s,a="";return a+='\n  <span id="section-dropdown" class="details-breadcrumb dropdown">\n    <a class="section-btn btn-gray" data-key="'+h((i=e&&e.section,i=null==i||i===!1?i:i.key,typeof i===f?i.apply(e):i))+'" href="#">'+h((i=e&&e.section,i=null==i||i===!1?i:i.title,typeof i===f?i.apply(e):i))+'</a>\n\n    <a class="btn-gray dropdown-toggle split-dropdown-toggle" href="#section-dropdown" data-toggle="dropdown">\n      <i class="caret-icon caret-icon-sm"></i>\n    </a>\n\n    <ul class="dropdown-menu">\n      ',s=n.each.call(e,e&&e.sections,{"hash":{},"inverse":p.noop,"fn":p.programWithDepth(5,l,t,e),"data":t}),(s||0===s)&&(a+=s),a+="\n    </ul>\n  </span>\n"
}function l(e,t,i){var s,a,o,l="";return l+='\n        <li><a class="section-btn" data-key="',(s=n.key)?s=s.call(e,{"hash":{},"data":t}):(s=e&&e.key,s=typeof s===f?s.call(e,{"hash":{},"data":t}):s),l+=h(s)+'" href="#"><span class="dropdown-truncated-label">',(s=n.title)?s=s.call(e,{"hash":{},"data":t}):(s=e&&e.title,s=typeof s===f?s.call(e,{"hash":{},"data":t}):s),l+=h(s)+'</span><i class="dropdown-selected-icon glyphicon ok-2 ',o={"hash":{},"inverse":p.noop,"fn":p.program(2,r,t),"data":t},s=n.if_neq||i&&i.if_neq,a=s?s.call(e,(s=i&&i.section,null==s||s===!1?s:s.key),e&&e.key,o):u.call(e,"if_neq",(s=i&&i.section,null==s||s===!1?s:s.key),e&&e.key,o),(a||0===a)&&(l+=a),l+='"></i></a></li>\n      '
}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var c,d="",u=n.helperMissing,h=this.escapeExpression,p=this,f="function";return d+='<div class="breadcrumb-actions pull-right">\n  ',c=n["if"].call(t,t&&t.listType,{"hash":{},"inverse":p.noop,"fn":p.program(1,a,s),"data":s}),(c||0===c)&&(d+=c),d+='\n\n  <a class="previous-btn btn-gray hidden" href="#"><i class="glyphicon chevron-left"></i></a>\n  <a class="next-btn btn-gray hidden" href="#"><i class="glyphicon chevron-right"></i></a>\n</div>\n\n',c=n["if"].call(t,t&&t.section,{"hash":{},"inverse":p.noop,"fn":p.program(4,o,s),"data":s}),(c||0===c)&&(d+=c),d+='\n\n<span class="grandparent-item hidden"></span>\n<span class="parents-dropdown hidden"></span>\n<span class="siblings-dropdown hidden"></span>\n<span class="current-item hidden"></span>\n'
})}),define("hb!templates/desktop/dropdowns/BreadcrumbDropdown",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s,a="";return a+='\n  <a class="breadcrumb-btn btn-gray" data-key="'+h((i=e&&e.item,i=null==i||i===!1?i:i.key,typeof i===u?i.apply(e):i))+'" href="#"><span class="breadcrumb-truncated-label">'+h((i=e&&e.item,i=null==i||i===!1?i:i.title,typeof i===u?i.apply(e):i))+'</span></a>\n\n  <a class="btn-gray dropdown-toggle split-dropdown-toggle" href="#',(s=n.id)?s=s.call(e,{"hash":{},"data":t}):(s=e&&e.id,s=typeof s===u?s.call(e,{"hash":{},"data":t}):s),a+=h(s)+'" data-toggle="dropdown">\n    <i class="caret-icon caret-icon-sm"></i>\n  </a>\n\n  <ul class="dropdown-menu">\n    ',s=n.each.call(e,e&&e.items,{"hash":{},"inverse":p.noop,"fn":p.programWithDepth(2,r,t,e),"data":t}),(s||0===s)&&(a+=s),a+="\n  </ul>\n"
}function r(e,t,i){var s,a,r,l="";return l+='\n      <li><a class="breadcrumb-btn" data-key="',(s=n.key)?s=s.call(e,{"hash":{},"data":t}):(s=e&&e.key,s=typeof s===u?s.call(e,{"hash":{},"data":t}):s),l+=h(s)+'" href="#"><span class="dropdown-truncated-label">',(s=n.title)?s=s.call(e,{"hash":{},"data":t}):(s=e&&e.title,s=typeof s===u?s.call(e,{"hash":{},"data":t}):s),l+=h(s)+'</span><i class="dropdown-selected-icon glyphicon ok-2 ',r={"hash":{},"inverse":p.noop,"fn":p.program(3,o,t),"data":t},s=n.if_neq||i&&i.if_neq,a=s?s.call(e,(s=i&&i.item,null==s||s===!1?s:s.key),e&&e.key,r):f.call(e,"if_neq",(s=i&&i.item,null==s||s===!1?s:s.key),e&&e.key,r),(a||0===a)&&(l+=a),l+='"></i></a></li>\n    '
}function o(){return"hidden"}function l(e){var t,n="";return n+='\n  <a class="breadcrumb-btn btn-gray" data-key="'+h((t=e&&e.item,t=null==t||t===!1?t:t.key,typeof t===u?t.apply(e):t))+'" href="#"><span class="breadcrumb-truncated-label">'+h((t=e&&e.item,t=null==t||t===!1?t:t.title,typeof t===u?t.apply(e):t))+"</span></a>\n"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var c,d="",u="function",h=this.escapeExpression,p=this,f=n.helperMissing;return c=n["if"].call(t,t&&t.showDropdown,{"hash":{},"inverse":p.program(5,l,s),"fn":p.program(1,a,s),"data":s}),(c||0===c)&&(d+=c),d+="\n"
})}),define("plex/desktop/views/dropdowns/BreadcrumbDropdown",["hb!templates/desktop/dropdowns/BreadcrumbDropdown.tpl","jquery","marionette","plex/base/utils/Dispatcher"],function(e,t,n,i){var s=n.ItemView.extend({"tagName":"span","className":"details-breadcrumb dropdown","template":e,"events":{"click .breadcrumb-btn":"onClick"},"initialize":function(){this.listenTo(this.model,"change:title",this.render)},"serializeData":function(){var e=this.collection&&this.collection.length>1;return{"id":this.id,"item":this.model.toJSON(),"items":e?this.collection.toJSON():null,"showDropdown":e}
},"onClick":function(e){e.preventDefault();var n=t(e.currentTarget).data("key");i.trigger("navigate","details",{"serverID":this.model.server.id,"key":n})}});return s}),define("plex/desktop/views/breadcrumbbar/DetailsBreadcrumbBarView",["hb!templates/desktop/breadcrumbbar/DetailsBreadcrumbBarView.tpl","underscore","jquery","marionette","plex/base/utils/Dispatcher","plex/base/models/SettingsModel","plex/base/models/library/MetadataModel","plex/desktop/views/dropdowns/BreadcrumbDropdown"],function(e,t,n,i,s,a,r,o){var l=i.Layout.extend({"className":"details-breadcrumb-bar breadcrumb-bar","template":e,"ui":{"previousBtn":".previous-btn","nextBtn":".next-btn","listSelectedIcons":"#section-list-dropdown .dropdown-selected-icon"},"regions":{"currentItem":".current-item","grandparentItem":".grandparent-item","siblingsDropdown":".siblings-dropdown","parentsDropdown":".parents-dropdown"},"events":{"click .section-btn":"onSectionClick","click .list-btn":"onListClick","click .previous-btn":"onPreviousClick","click .next-btn":"onNextClick"},"onlyAfterRender":["onSiblingsPopulate","onParentsPopulate"],"initialize":function(){var e=this.model.get("parentKey");
if(!e)return void this.onSiblingsPopulate(!1);var t,n={"server":this.model.server,"section":this.model.section},i=this.parent=new r({"key":e},n),s=i.populate({"cancelable":!0});s=s.then(function(){return t=i.get("children"),t.populate({"cancelable":!0})}),s.done(this.onSiblingsPopulate);var a=this.model.get("grandparentKey");if(a){var o=this.grandparent=new r({"key":a},n),l=o.populate({"cancelable":!0});l=l.then(function(){var e=o.get("children");return e.populate({"cancelable":!0})}),l.done(this.onParentsPopulate)
}},"serializeData":function(){var e=this.model.server,t=this.model.section;return{"serverID":e.id,"sections":e.get("sections").toJSON(),"section":t?t.toJSON():null,"item":this.model.toJSON(),"parent":this.parent?this.parent.toJSON():null,"grandparent":this.grandparent?this.grandparent.toJSON():null,"listType":this.getListType()}},"getListTypeSettingKey":function(){var e="episodeListType",t=this.model.section||this.model.server;return t.getScopedKey(e)},"getListType":function(){return"season"===this.model.get("type")?a.get(this.getListTypeSettingKey())||"episode-tile-list":null
},"previous":function(){this.previousSibling&&s.trigger("navigate","details",{"serverID":this.model.server.id,"key":this.previousSibling.get("key")})},"next":function(){this.nextSibling&&s.trigger("navigate","details",{"serverID":this.model.server.id,"key":this.nextSibling.get("key")})},"onClose":function(){this.parent&&this.parent.release(),this.grandparent&&this.grandparent.release()},"onSiblingsPopulate":function(e){if(!e)return this.currentItem.show(new o({"model":this.model})),void this.currentItem.$el.removeClass("hidden");
var t=e.get(this.model.id),n=e.indexOf(t);n>0&&(this.previousSibling=e.at(n-1)),n<e.length-1&&(this.nextSibling=e.at(n+1)),this.ui.previousBtn.toggleClass("disabled",!this.previousSibling),this.ui.nextBtn.toggleClass("disabled",!this.nextSibling),this.ui.previousBtn.removeClass("hidden"),this.ui.nextBtn.removeClass("hidden"),this.grandparent||(this.grandparentItem.show(new o({"model":this.parent})),this.grandparentItem.$el.removeClass("hidden")),this.siblingsDropdown.show(new o({"id":"siblings-dropdown","model":this.model,"collection":e})),this.siblingsDropdown.$el.removeClass("hidden")
},"onParentsPopulate":function(e){this.grandparentItem.show(new o({"model":this.grandparent})),this.grandparentItem.$el.removeClass("hidden"),this.parentsDropdown.show(new o({"id":"parents-dropdown","model":this.parent,"collection":e})),this.parentsDropdown.$el.removeClass("hidden")},"onSectionClick":function(e){e.preventDefault();var t=n(e.currentTarget),i=t.data("key");s.trigger("navigate","section",{"serverID":this.model.server.id,"sectionID":i})},"onListClick":function(e){e.preventDefault();var t=n(e.currentTarget),i=t.data("type");
a.save(this.getListTypeSettingKey(),i),this.ui.listSelectedIcons.addClass("hidden"),t.find(".dropdown-selected-icon").removeClass("hidden")},"onPreviousClick":function(e){e.preventDefault(),this.previous()},"onNextClick":function(e){e.preventDefault(),this.next()}});return l}),define("hb!templates/desktop/details/MovieDetailsView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,r,o="",l=n.helperMissing,c=this.escapeExpression;
return o+='<div class="details-title-container">\n  <h1 class="item-title"></h1>\n  <h2 class="item-year"></h2>\n</div>\n\n<div class="details-metadata-container">\n  <div class="details-progress-container">\n    <div class="item-progress details-progress"></div>\n  </div>\n\n  <div class="metadata-right pull-right">\n    <div class="item-genre metadata-tags"></div>\n\n    <div class="rating-container"></div>\n\n    <div class="content-rating-flag-container"></div>\n  </div>\n\n  <p class="metadata-labels">\n    <span class="item-duration metadata-duration"></span> <span class="item-unwatched-label label label-primary">',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Unwatched",r):l.call(t,"t","Unwatched",r)))+'</span> <a class="item-unavailable-btn label label-btn label-danger" href="#"><i class="label-icon glyphicon circle-info"></i> ',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Unavailable",r):l.call(t,"t","Unavailable",r)))+'</a>\n  </p>\n\n  <p class="item-tagline metadata-tagline"></p>\n\n  <div class="item-director metadata-tags">\n    <span class="metadata-label">',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Director",r):l.call(t,"t","Director",r)))+'</span> <span class="metadata-tag-list"></span>\n  </div>\n  <div class="item-writer metadata-tags">\n    <span class="metadata-label">',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Writer",r):l.call(t,"t","Writer",r)))+'</span> <span class="metadata-tag-list"></span>\n  </div>\n  <div class="item-cast metadata-tags">\n    <span class="metadata-label">',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Cast",r):l.call(t,"t","Cast",r)))+'</span> <span class="metadata-tag-list"></span>\n  </div>\n\n  <div class="item-audio metadata-tags metadata-tags-separator">\n    <span class="metadata-label">',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Audio",r):l.call(t,"t","Audio",r)))+'</span>\n  </div>\n  <div class="item-subtitles metadata-tags">\n    <span class="metadata-label">',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Subtitles",r):l.call(t,"t","Subtitles",r)))+'</span>\n  </div>\n\n  <p class="item-summary metadata-summary"></p>\n\n  <div class="studio-flag-container"></div>\n</div>\n\n<div class="details-poster-container">\n  <a class="media-poster-container play-btn" href="#">\n    <div class="movie-poster item-poster media-poster">\n      <div class="media-poster-overlay"></div>\n      <div class="media-poster-overlay-icons">\n        <i class="media-poster-overlay-icon glyphicon play"></i>\n      </div>\n\n      <span class="media-count-badge badge badge-lg hidden"></span>\n    </div>\n  </a>\n\n  <div class="video-audio-flags-container media-flags"></div>\n</div>\n'
})}),define("plex/base/utils/formatters/TagUtil",["plex/base/utils/BaseClass","plex/base/utils/formatters/StringUtil","plex/base/utils/types/MediaTypes"],function(e,t,n){var i=e.extend({"truncateTagList":function(e){var n=e.tags,i=e.separator||", ",s="";if(n&&n.length){var a=e.maxTags||n.length;a>n.length&&(a=n.length);for(var r=0;a>r;r++){var o=n[r];"undefined"!=typeof o.tag&&""!==o.tag&&(s+=t.truncate(o.tag,e.maxLen),a>r+1&&(s+=i))}}return s},"truncateLinkedTagList":function(e){var i=e.model.section,s=n.getMediaTypeByString(e.model.get("type")),a=e.tags,r=i&&i.get("allowAdvancedFilters"),o="",l=function(n){if(!r||!n.id)return t.truncate(n.tag,e.maxLen);
var a=["#!/server/"+encodeURIComponent(i.server.id),"/section/"+encodeURIComponent(i.id),"/filter","/"+encodeURIComponent(s.id),"/"+encodeURIComponent(e.key),"/"+encodeURIComponent(n.id),"/"+encodeURIComponent(n.tag)];return'<a href="'+a.join("")+'">'+t.truncate(n.tag,e.maxLen)+"</a>"};if(a&&a.length){var c=e.maxTags||a.length;c>a.length&&(c=a.length);for(var d=0;c>d;d++){var u=a[d];"undefined"!=typeof u.tag&&""!==u.tag&&(o+=l(u),c>d+1&&(o+=", "))}}return o}});return new i}),define("plex/base/mixins/details/BaseDetailsMixin",["underscore","plex/base/utils/MediaUtil","plex/base/utils/formatters/DateTimeUtil","plex/base/utils/formatters/TagUtil"],function(e,t,n,i){var s={"defaultBindings":{".item-title":{"modelAttribute":"title"},".item-year":{"modelAttribute":"year"},".item-progress":{"modelAttribute":"viewOffset","manual":!0,"formatter":function(e,t){var n=this.model.get("duration"),i=!(!e||!n);
if(i){var s=Math.round(e/n*100);t.css("width",s+"%")}t.parent().toggleClass("hidden",!i)}},".item-duration":{"modelAttribute":"duration","autohide":!0,"formatter":function(e){return e?n.formatHoursMinutes(e):0}},".item-unwatched-label":{"modelAttribute":"viewCount","modelListeners":["viewCount","viewOffset"],"manual":!0,"autohide":function(e){if(this.shared&&!this.multiuser)return!1;var t=this.model.get("viewOffset");return!e&&!t}},".item-unavailable-btn":{"modelAttribute":"Media","manual":!0,"autohide":function(e){var n=t.getMissingParts(e);
return!!n.length}},".item-available-at":{"modelAttribute":"originallyAvailableAt","autohide":!0,"formatter":function(e){return e?n.formatDate(e):""}},".item-tagline":{"modelAttribute":"tagline","autohide":!0},".item-genre":{"modelAttribute":"Genre","autohide":!0,"formatter":function(e){if(!e||!e.length)return"";var t=i.truncateLinkedTagList({"model":this.model,"key":"genre","tags":e,"maxLen":50,"maxTags":2});return t}},".item-director":{"modelAttribute":"Director","manual":!0,"autohide":!0,"formatter":function(e,t){if(!e||!e.length)return"";
var n=i.truncateLinkedTagList({"model":this.model,"key":"director","tags":e,"maxLen":50,"maxTags":3});return t.find(".metadata-tag-list").html(n),n}},".item-writer":{"modelAttribute":"Writer","manual":!0,"autohide":!0,"formatter":function(e,t){if(!e||!e.length)return"";var n=i.truncateLinkedTagList({"model":this.model,"key":"writer","tags":e,"maxLen":50,"maxTags":3});return t.find(".metadata-tag-list").html(n),n}},".item-cast":{"modelAttribute":"Role","manual":!0,"autohide":!0,"formatter":function(e,t){if(!e||!e.length)return"";
var n=i.truncateLinkedTagList({"model":this.model,"key":"actor","tags":e,"maxLen":50,"maxTags":5});return t.find(".metadata-tag-list").html(n),n}},".item-summary":{"modelAttribute":"summary","autohide":!0},".media-count-badge":{"modelAttribute":"Media","formatter":function(e){return e.length},"autohide":function(e){return e>1}},".unwatched-count-badge":{"modelAttribute":"unviewedLeafCount","autohide":function(e){return this.shared&&!this.multiuser?!1:!!e}},".content-rating-flag-container":{"modelAttribute":"contentRating","manual":!0,"autohide":!0},".studio-flag-container":{"modelAttribute":"studio","manual":!0,"autohide":!0}}};
return s}),define("plex/base/mixins/details/MovieDetailsMixin",["underscore","plex/base/mixins/details/BaseDetailsMixin"],function(e,t){var n={"bindings":e.pick(t.defaultBindings,[".item-title",".item-year",".item-progress",".item-duration",".item-unwatched-label",".item-unavailable-btn",".item-tagline",".item-genre",".item-director",".item-writer",".item-cast",".item-summary",".media-count-badge",".content-rating-flag-container",".studio-flag-container"])};return n}),define("plex/desktop/views/details/BaseDetailsView",["underscore","marionette","plex/base/utils/Dispatcher","plex/base/utils/types/MediaTypes","plex/base/adapters/PlayerControllerAdapter","plex/base/mixins/details/BaseDetailsMixin","plex/base/commands/Commands","plex/base/models/AppModel","plex/desktop/views/modals/EditMetadataModal","plex/desktop/views/modals/MediaInfoModal"],function(e,t,n,i,s,a,r,o,l,c){var d=t.Layout.extend({"mixins":a,"posterWidth":280,"ui":{"poster":".item-poster"},"regions":{"rating":".rating-container","audio":".item-audio","subtitles":".item-subtitles","studio":".studio-flag-container","contentRating":".content-rating-flag-container","videoResolution":".video-audio-flags-container","audioCodec":".video-audio-flags-container","audioChannels":".video-audio-flags-container","poster":".details-poster-container","list":".details-list-container"},"events":{"click .details-poster-container > .play-btn":"onPlayClick","click .item-unavailable-btn":"onUnavailableClick"},"initialize":function(){this.shared=this.model.server.get("shared"),this.synced=this.model.server.get("synced"),this.multiuser=this.model.server.get("multiuser"),this.listenTo(o,"change:primaryPlayer",this.onPrimaryPlayerChange),this.mirror()
},"serializeData":function(){var e=this.model.server.get("playQueues");return{"canPlay":e.canCreateFor(this.model),"limited":this.shared||this.synced}},"mirror":function(){var e=i.getChildMediaType(this.model.get("type")),t=s.get(e.element);t&&this.allowMirror&&t.mirror({"item":this.model})},"onRender":function(){if(this.ListConstructor){var e=this.model.get("children");e.populate({"reset":!0,"cancelable":!0}),this.list.show(new this.ListConstructor({"collection":e,"itemViewOptions":this.listItemViewOptions}))
}this.ratingView&&this.rating.show(this.ratingView),this.audioDropdown&&this.audio.append(this.audioDropdown),this.subtitlesDropdown&&this.subtitles.append(this.subtitlesDropdown),this.posterImage&&this.posterImage.setElement(this.ui.poster),this.studioFlag&&this.studio.show(this.studioFlag),this.contentRatingFlag&&this.contentRating.show(this.contentRatingFlag),this.videoResolutionFlag&&this.videoResolution.append(this.videoResolutionFlag),this.audioCodecFlag&&this.audioCodec.append(this.audioCodecFlag),this.audioChannelsFlag&&this.audioChannels.append(this.audioChannelsFlag)
},"onClose":function(){this.posterImage&&this.posterImage.close()},"onPrimaryPlayerChange":function(e,t){t&&this.mirror()},"onPlayClick":function(e){e.preventDefault(),r.execute("playMedia",{"item":this.model})},"onUnavailableClick":function(e){e.preventDefault(),n.trigger("show:modal",new c({"model":this.model}))}});return d}),define("hb!templates/desktop/dropdowns/StreamDropdown",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s,a,c="";return c+='\n  <a class="dropdown-toggle" href="#',(i=n.type)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.type,i=typeof i===S?i.call(e,{"hash":{},"data":t}):i),c+=C(i)+'-dropdown" data-toggle="dropdown">',s=n["if"].call(e,(i=e&&e.selectedStream,null==i||i===!1?i:i.language),{"hash":{},"inverse":A.program(4,o,t),"fn":A.program(2,r,t),"data":t}),(s||0===s)&&(c+=s),a={"hash":{},"inverse":A.noop,"fn":A.program(6,l,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,e&&e.type,"subtitles",a):T.call(e,"if_eq",e&&e.type,"subtitles",a),(s||0===s)&&(c+=s),a={"hash":{},"inverse":A.noop,"fn":A.program(10,u,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,e&&e.type,"audio",a):T.call(e,"if_eq",e&&e.type,"audio",a),(s||0===s)&&(c+=s),c+=' <i class="caret-icon caret-icon-sm"></i></a>\n\n  <ul class="dropdown-menu">\n    ',s=n.each.call(e,e&&e.streams,{"hash":{},"inverse":A.noop,"fn":A.programWithDepth(13,p,t,e),"data":t}),(s||0===s)&&(c+=s),c+="\n  </ul>\n"
}function r(e){var t;return C((t=e&&e.selectedStream,t=null==t||t===!1?t:t.language,typeof t===S?t.apply(e):t))}function o(e,t){var i,s;return s={"hash":{},"data":t},C((i=n.t||e&&e.t,i?i.call(e,"Unknown",s):T.call(e,"t","Unknown",s)))}function l(e,t){var i,s;return s=n["if"].call(e,(i=e&&e.selectedStream,null==i||i===!1?i:i.format),{"hash":{},"inverse":A.noop,"fn":A.program(7,c,t),"data":t}),s||0===s?s:""}function c(e,t){var i,s,a,r="";return r+=" (",a={"hash":{},"data":t},r+=C((i=n.upperCase||e&&e.upperCase,i?i.call(e,(i=e&&e.selectedStream,null==i||i===!1?i:i.format),a):T.call(e,"upperCase",(i=e&&e.selectedStream,null==i||i===!1?i:i.format),a))),s=n["if"].call(e,(i=e&&e.selectedStream,null==i||i===!1?i:i.forced),{"hash":{},"inverse":A.noop,"fn":A.program(8,d,t),"data":t}),(s||0===s)&&(r+=s),r+=")"
}function d(e,t){var i,s,a="";return a+=" ",s={"hash":{},"data":t},a+=C((i=n.t||e&&e.t,i?i.call(e,"Forced",s):T.call(e,"t","Forced",s)))}function u(e,t){var i,s;return s=n["if"].call(e,(i=e&&e.selectedStream,null==i||i===!1?i:i.codec),{"hash":{},"inverse":A.noop,"fn":A.program(11,h,t),"data":t}),s||0===s?s:""}function h(e,t){var i,s,a="";return a+=" (",s={"hash":{},"data":t},a+=C((i=n.formatAudioCodec||e&&e.formatAudioCodec,i?i.call(e,(i=e&&e.selectedStream,null==i||i===!1?i:i.codec),s):T.call(e,"formatAudioCodec",(i=e&&e.selectedStream,null==i||i===!1?i:i.codec),s)))+" ",s={"hash":{},"data":t},a+=C((i=n.formatAudioChannels||e&&e.formatAudioChannels,i?i.call(e,(i=e&&e.selectedStream,null==i||i===!1?i:i.channels),s):T.call(e,"formatAudioChannels",(i=e&&e.selectedStream,null==i||i===!1?i:i.channels),s)))+")"
}function p(e,t,i){var s,a,r,l="";return l+='\n      <li><a data-id="',(s=n.id)?s=s.call(e,{"hash":{},"data":t}):(s=e&&e.id,s=typeof s===S?s.call(e,{"hash":{},"data":t}):s),l+=C(s)+'" href="#">',s=n["if"].call(e,e&&e.language,{"hash":{},"inverse":A.program(4,o,t),"fn":A.program(14,f,t),"data":t}),(s||0===s)&&(l+=s),r={"hash":{},"inverse":A.noop,"fn":A.program(16,m,t),"data":t},s=n.if_eq||i&&i.if_eq,a=s?s.call(e,i&&i.type,"subtitles",r):T.call(e,"if_eq",i&&i.type,"subtitles",r),(a||0===a)&&(l+=a),r={"hash":{},"inverse":A.noop,"fn":A.program(19,v,t),"data":t},s=n.if_eq||i&&i.if_eq,a=s?s.call(e,i&&i.type,"audio",r):T.call(e,"if_eq",i&&i.type,"audio",r),(a||0===a)&&(l+=a),l+=" ",a=n["if"].call(e,e&&e.selected,{"hash":{},"inverse":A.noop,"fn":A.program(22,b,t),"data":t}),(a||0===a)&&(l+=a),l+="</a></li>\n    "
}function f(e,t){var i;return(i=n.language)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.language,i=typeof i===S?i.call(e,{"hash":{},"data":t}):i),C(i)}function m(e,t){var i;return i=n["if"].call(e,e&&e.format,{"hash":{},"inverse":A.noop,"fn":A.program(17,g,t),"data":t}),i||0===i?i:""}function g(e,t){var i,s,a,r="";return r+=" (",a={"hash":{},"data":t},r+=C((i=n.upperCase||e&&e.upperCase,i?i.call(e,e&&e.format,a):T.call(e,"upperCase",e&&e.format,a))),s=n["if"].call(e,e&&e.forced,{"hash":{},"inverse":A.noop,"fn":A.program(8,d,t),"data":t}),(s||0===s)&&(r+=s),r+=")"
}function v(e,t){var i;return i=n["if"].call(e,e&&e.codec,{"hash":{},"inverse":A.noop,"fn":A.program(20,y,t),"data":t}),i||0===i?i:""}function y(e,t){var i,s,a="";return a+=" (",s={"hash":{},"data":t},a+=C((i=n.formatAudioCodec||e&&e.formatAudioCodec,i?i.call(e,e&&e.codec,s):T.call(e,"formatAudioCodec",e&&e.codec,s)))+" ",s={"hash":{},"data":t},a+=C((i=n.formatAudioChannels||e&&e.formatAudioChannels,i?i.call(e,e&&e.channels,s):T.call(e,"formatAudioChannels",e&&e.channels,s)))+")"}function b(){return'<i class="dropdown-selected-icon glyphicon ok-2"></i>'
}function w(e,t){var i,s,a,c="";return s=n["if"].call(e,(i=e&&e.selectedStream,null==i||i===!1?i:i.language),{"hash":{},"inverse":A.program(4,o,t),"fn":A.program(2,r,t),"data":t}),(s||0===s)&&(c+=s),a={"hash":{},"inverse":A.noop,"fn":A.program(6,l,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,e&&e.type,"subtitles",a):T.call(e,"if_eq",e&&e.type,"subtitles",a),(s||0===s)&&(c+=s),a={"hash":{},"inverse":A.noop,"fn":A.program(10,u,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,e&&e.type,"audio",a):T.call(e,"if_eq",e&&e.type,"audio",a),(s||0===s)&&(c+=s),c
}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var x,k="",S="function",C=this.escapeExpression,T=n.helperMissing,A=this;return x=n["if"].call(t,t&&t.showDropdown,{"hash":{},"inverse":A.program(24,w,s),"fn":A.program(1,a,s),"data":s}),(x||0===x)&&(k+=x),k+="\n"})}),define("plex/desktop/views/dropdowns/StreamDropdown",["hb!templates/desktop/dropdowns/StreamDropdown.tpl","underscore","jquery","marionette","plex/base/utils/MediaUtil","plex/base/utils/types/StreamTypes","plex/base/commands/Commands"],function(e,t,n,i,s,a,r){var o=i.ItemView.extend({"tagName":"span","className":"dropdown","template":e,"modelEvents":{"change:Media":"render","change:streams":"render"},"events":{"click .dropdown-menu a":"onStreamClick"},"initialize":function(e){this.streamType=a.getStreamTypeByString(e.type),this.disabled=e.disabled
},"serializeData":function(){var e,n=this.model.server.get("multiuser"),i=this.model.server.get("shared"),a=t.first(this.model.get("Media")),r=s.getStreams(a,{"streamType":this.streamType.id}),o=s.getStreams(a,{"streamType":this.streamType.id,"selected":!0});return o.length&&(e=o[0]),{"showDropdown":!this.disabled&&r.length>1&&(!i||n),"type":this.streamType.typeString,"streams":r,"selectedStream":e}},"onRender":function(){this.$el.attr("id",this.streamType.typeString+"-dropdown")},"onStreamClick":function(e){e.preventDefault();
var t=n(e.currentTarget),i=t.data("id");r.execute("selectStream",{"type":this.streamType.id,"item":this.model,"streamID":i})}});return o}),define("plex/desktop/views/images/MediaFlagImage",["plex/desktop/views/images/BaseImage"],function(e){var t=(window.devicePixelRatio?window.devicePixelRatio:1,e.extend({"setup":function(e){if(e.className&&this.$el.addClass(e.className),this.model=e.model,this.server=e.model.server,e.flag){var t=this.model.get("Media");this.flag=e.flag,t&&t.length&&(this.path=t[0][this.flag]),this.listenTo(this.model,"change:Media",this.onMediaChange)
}else this.flag=e.modelAttribute,this.path=this.model.get(this.flag),this.listenTo(this.model,"change:"+this.flag,this.onChange);this.prefix=this.model.get("mediaTagPrefix"),this.version=this.model.get("mediaTagVersion"),this.path&&(this.url=this.getUrl(this.path)),this.setDimensions(e)},"getUrl":function(e){return this.prefix+this.flag+"/"+encodeURIComponent(e)+"?t="+this.version},"onMediaChange":function(e,t){this.onChange(e,t[0][this.flag])}}));return t}),define("plex/desktop/views/details/MovieDetailsView",["hb!templates/desktop/details/MovieDetailsView.tpl","plex/base/mixins/details/MovieDetailsMixin","plex/desktop/views/details/BaseDetailsView","plex/desktop/views/Rating","plex/desktop/views/dropdowns/StreamDropdown","plex/desktop/views/images/MediaPosterImage","plex/desktop/views/images/MediaFlagImage"],function(e,t,n,i,s,a,r){var o=n.extend({"className":"movie-details-row details-row","mixins":t,"template":e,"allowMirror":!0,"initialize":function(){n.prototype.initialize.apply(this,arguments),this.ratingView=new i({"model":this.model}),this.audioDropdown=new s({"type":"audio","model":this.model}),this.subtitlesDropdown=new s({"type":"subtitles","model":this.model}),this.posterImage=new a({"model":this.model,"type":this.model.get("type"),"width":this.posterWidth}),this.contentRatingFlag=new r({"model":this.model,"modelAttribute":"contentRating","className":"content-rating-flag","width":70,"height":30}),this.videoResolutionFlag=new r({"model":this.model,"flag":"videoResolution","className":"media-flag","width":100,"height":20}),this.audioCodecFlag=new r({"model":this.model,"flag":"audioCodec","className":"media-flag","width":100,"height":20}),this.audioChannelsFlag=new r({"model":this.model,"flag":"audioChannels","className":"media-flag","width":100,"height":20}),this.studioFlag=new r({"model":this.model,"modelAttribute":"studio","className":"studio-flag","width":200,"height":40})
}});return o}),define("hb!templates/desktop/details/ShowDetailsView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(){return'\n  <a class="media-poster-container play-btn" href="#">\n    <div class="show-poster item-poster media-poster">\n      <div class="media-poster-overlay"></div>\n      <div class="media-poster-overlay-icons">\n        <i class="media-poster-overlay-icon glyphicon play"></i>\n      </div>\n\n      <span class="unwatched-count-badge badge badge-lg hidden"></span>\n    </div>\n  </a>\n  '
}function r(){return'\n  <div class="show-poster item-poster media-poster">\n    <span class="unwatched-count-badge badge badge-lg hidden"></span>\n  </div>\n  '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var o,l="",c=this;return l+='<div class="details-title-container">\n  <h1 class="item-title"></h1>\n  <h2 class="item-year"></h2>\n</div>\n\n<div class="details-metadata-container">\n  <div class="show-details-metadata-container">\n    <div class="metadata-right pull-right">\n      <div class="item-genre metadata-tags"></div>\n    </div>\n\n    <p class="metadata-labels">\n      <span class="item-duration metadata-duration"></span>\n\n      <span class="rating-container rating-container-inline"></span>\n\n      <span class="content-rating-flag-container content-rating-flag-container-inline"></span>\n    </p>\n\n    <p class="item-summary metadata-summary"></p>\n\n    <div class="studio-flag-container"></div>\n  </div>\n\n  <div class="season-list-container details-list-container"></div>\n</div>\n\n<div class="details-poster-container">\n  ',o=n["if"].call(t,t&&t.canPlay,{"hash":{},"inverse":c.program(3,r,s),"fn":c.program(1,a,s),"data":s}),(o||0===o)&&(l+=o),l+="\n</div>\n"
})}),define("plex/base/mixins/details/ShowDetailsMixin",["underscore","plex/base/mixins/details/BaseDetailsMixin"],function(e,t){var n={"bindings":e.pick(t.defaultBindings,[".item-title",".item-year",".item-duration",".item-genre",".item-summary",".unwatched-count-badge",".content-rating-flag-container",".studio-flag-container"])};return n}),define("hb!templates/desktop/lists/library/SeasonTileListItem",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(){return"hide-actions"
}function r(){return"hidden"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var o,l="",c=this,d="function",u=this.escapeExpression;return l+='<a class="media-poster-container ',o=n.unless.call(t,t&&t.showActions,{"hash":{},"inverse":c.noop,"fn":c.program(1,a,s),"data":s}),(o||0===o)&&(l+=o),l+='" href="',(o=n.url)?o=o.call(t,{"hash":{},"data":s}):(o=t&&t.url,o=typeof o===d?o.call(t,{"hash":{},"data":s}):o),l+=u(o)+'">\n  <div class="media-poster">\n    <div class="media-poster-overlay"></div>\n\n    <div class="media-poster-actions ',o=n.unless.call(t,t&&t.showActions,{"hash":{},"inverse":c.noop,"fn":c.program(3,r,s),"data":s}),(o||0===o)&&(l+=o),l+='">\n      <button class="play-btn media-poster-btn btn-link" tabindex="-1"><i class="glyphicon play"></i></button>\n      <button class="play-unwatched-btn media-poster-btn btn-link" tabindex="-1"><i class="glyphicon play"></i></button>\n      <button class="edit-btn media-poster-btn btn-link" tabindex="-1"><i class="glyphicon pencil"></i></button>\n      <button class="more-btn media-poster-btn btn-link" tabindex="-1"><i class="glyphicon more"></i></button>\n    </div>\n\n    <span class="unwatched-count-badge badge badge-lg hidden"></span>\n  </div>\n\n  <div class="media-title media-heading"></div>\n  <div class="media-subtitle-1 media-heading secondary"></div>\n</a>\n\n<div class="media-actions-dropdown dropdown">\n  <div class="dropdown-toggle" data-toggle="dropdown"></div>\n</div>\n'
})}),define("plex/desktop/views/lists/library/SeasonTileListItem",["hb!templates/desktop/lists/library/SeasonTileListItem.tpl","underscore","plex/base/utils/Dispatcher","plex/base/adapters/LocalizerAdapter","plex/desktop/views/lists/library/MediaListItem","plex/desktop/views/lists/library/MediaTileListItem","plex/desktop/views/images/MediaPosterImage","plex/desktop/views/modals/EditMetadataModal"],function(e,t,n,i,s,a,r){var o=s.extend({"className":"poster-item media-tile-list-item","template":e,"ui":a.prototype.ui,"initialize":function(){s.prototype.initialize.apply(this,arguments),this.image=new r({"model":this.model,"type":"season","width":150})
},"bindings":t.extend({},s.prototype.bindings,{".media-title":{"modelAttribute":"title"},".media-subtitle-1":{"modelAttribute":"leafCount","formatter":function(e){var t=i.get();return 1===e?t.t("{1} episode",e):t.t("{1} episodes",e)}},".unwatched-count-badge":{"modelAttribute":"unviewedLeafCount","autohide":function(e){var t=this.model.server.get("shared"),n=this.model.server.get("multiuser");return t&&!n?!1:"album"===this.type?!1:!!e}}}),"onMoreClick":function(){a.prototype.onMoreClick.apply(this,arguments)
}});return o}),define("plex/desktop/views/lists/library/SeasonTileList",["plex/desktop/views/lists/BaseList","plex/desktop/views/lists/library/SeasonTileListItem"],function(e,t){var n=e.extend({"tagName":"ul","className":"tile-list media-tile-list season-tile-list","itemView":t});return n}),define("plex/desktop/views/details/ShowDetailsView",["hb!templates/desktop/details/ShowDetailsView.tpl","underscore","plex/base/mixins/details/ShowDetailsMixin","plex/desktop/views/details/BaseDetailsView","plex/desktop/views/Rating","plex/desktop/views/images/MediaPosterImage","plex/desktop/views/images/MediaFlagImage","plex/desktop/views/lists/library/SeasonTileList"],function(e,t,n,i,s,a,r,o){var l=i.extend({"className":"show-details-row details-row","mixins":n,"template":e,"allowMirror":!0,"initialize":function(){i.prototype.initialize.apply(this,arguments),this.ListConstructor=o,this.ratingView=new s({"model":this.model}),this.posterImage=new a({"model":this.model,"type":this.model.get("type"),"width":this.posterWidth}),this.contentRatingFlag=new r({"model":this.model,"modelAttribute":"contentRating","className":"show-content-rating content-rating-flag","width":70,"height":30}),this.studioFlag=new r({"model":this.model,"modelAttribute":"studio","className":"show-studio studio-flag","width":200,"height":40})
}});return l}),define("hb!templates/desktop/details/SeasonDetailsView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{},'<div class="details-title-container">\n  <h1 class="show-title"></h1>\n  <h2 class="season-title"></h2>\n</div>\n\n<div class="details-metadata-container">\n  <div class="media-actions-container title"></div>\n  <p class="item-summary metadata-summary"></p>\n\n  <div class="episode-list-container details-list-container"></div>\n</div>\n'
})}),define("hb!templates/desktop/lists/library/EpisodeTileListItem",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(){return"hide-actions"}function r(){return"hidden"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var o,l="",c=this,d="function",u=this.escapeExpression;return l+='<a class="media-poster-container ',o=n.unless.call(t,t&&t.showActions,{"hash":{},"inverse":c.noop,"fn":c.program(1,a,s),"data":s}),(o||0===o)&&(l+=o),l+='" href="',(o=n.url)?o=o.call(t,{"hash":{},"data":s}):(o=t&&t.url,o=typeof o===d?o.call(t,{"hash":{},"data":s}):o),l+=u(o)+'">\n  <div class="media-poster">\n    <div class="media-poster-overlay"></div>\n\n    <div class="media-poster-actions ',o=n.unless.call(t,t&&t.showActions,{"hash":{},"inverse":c.noop,"fn":c.program(3,r,s),"data":s}),(o||0===o)&&(l+=o),l+='">\n      <button class="play-btn media-poster-btn btn-link" tabindex="-1"><i class="glyphicon play"></i></button>\n      <button class="edit-btn media-poster-btn btn-link" tabindex="-1"><i class="glyphicon pencil"></i></button>\n      <button class="more-btn media-poster-btn btn-link" tabindex="-1"><i class="glyphicon more"></i></button>\n    </div>\n\n    <span class="media-count-badge badge badge-lg hidden"></span>\n\n    <div class="media-poster-progress-track hidden"></div>\n    <div class="media-poster-progress hidden"></div>\n  </div>\n\n  <span class="unwatched-icon"></span>\n\n  <div class="media-title media-heading"></div>\n  <div class="media-subtitle-1 media-heading secondary"></div>\n</a>\n\n<div class="media-actions-dropdown dropdown">\n  <div class="dropdown-toggle" data-toggle="dropdown"></div>\n</div>\n'
})}),define("plex/desktop/views/lists/library/EpisodeTileListItem",["hb!templates/desktop/lists/library/EpisodeTileListItem.tpl","underscore","plex/base/utils/Dispatcher","plex/base/utils/MediaUtil","plex/desktop/views/lists/library/MediaListItem","plex/desktop/views/lists/library/MediaTileListItem","plex/desktop/views/images/MediaPosterImage","plex/desktop/views/modals/EditMetadataModal"],function(e,t,n,i,s,a,r){var o=s.extend({"className":"poster-item media-tile-list-item","template":e,"ui":a.prototype.ui,"initialize":function(){s.prototype.initialize.apply(this,arguments),this.image=new r({"model":this.model,"type":"episode","width":250})
},"bindings":t.extend({},s.prototype.bindings,{".unwatched-icon":{"modelAttribute":"viewCount","modelListeners":["viewCount","viewOffset"],"manual":!0,"autohide":function(e){if(this.shared&&!this.multiuser)return!1;var t=this.model.get("viewOffset");return!e&&!t}},".media-title":{"modelAttribute":"title"},".media-subtitle-1":{"modelAttribute":"index","formatter":function(e){return i.getEpisodeIndex({"episodePrefix":"Episode {1}","episodeIndex":e,"date":this.model.get("originallyAvailableAt"),"noLeadingZero":!0})
}},".media-count-badge":{"modelAttribute":"Media","formatter":function(e){return e.length},"autohide":function(e){return e>1}},".media-poster-progress":{"modelAttribute":"viewOffset","manual":!0,"formatter":function(e,t){if(e){var n=Math.round(e/this.model.get("duration")*100);t.css("width",n+"%")}t.toggleClass("hidden",!e),this.ui.progressTrack.toggleClass("hidden",!e)}}}),"onMoreClick":function(){a.prototype.onMoreClick.apply(this,arguments)}});return o}),define("plex/desktop/views/lists/library/EpisodeTileList",["plex/desktop/views/lists/BaseList","plex/desktop/views/lists/library/EpisodeTileListItem"],function(e,t){var n=e.extend({"tagName":"ul","className":"tile-list media-tile-list episode-tile-list","itemView":t});
return n}),define("hb!templates/desktop/lists/library/EpisodeDetailsListItem",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(){return"show-actions"}function r(){return"hidden"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var o,l="",c=this,d="function",u=this.escapeExpression;return l+='<a class="media-container ',o=n["if"].call(t,t&&t.showActions,{"hash":{},"inverse":c.noop,"fn":c.program(1,a,s),"data":s}),(o||0===o)&&(l+=o),l+='" href="',(o=n.url)?o=o.call(t,{"hash":{},"data":s}):(o=t&&t.url,o=typeof o===d?o.call(t,{"hash":{},"data":s}):o),l+=u(o)+'">\n  <div class="media-poster">\n    <span class="media-count-badge badge hidden"></span>\n    <span class="unwatched-count-badge badge hidden"></span>\n\n    <div class="media-poster-progress-track hidden"></div>\n    <div class="media-poster-progress hidden"></div>\n  </div>\n\n  <div class="media-actions ',o=n.unless.call(t,t&&t.showActions,{"hash":{},"inverse":c.noop,"fn":c.program(3,r,s),"data":s}),(o||0===o)&&(l+=o),l+='">\n    <button class="play-btn media-action-btn btn-link" tabindex="-1"><i class="glyphicon play"></i></button>\n    <button class="edit-btn media-action-btn btn-link" tabindex="-1"><i class="glyphicon pencil"></i></button>\n    <button class="more-btn media-action-btn btn-link" tabindex="-1"><i class="glyphicon more"></i></button>\n  </div>\n\n  <span class="media-title media-heading"></span>\n  <span class="media-subtitle-1 media-heading secondary"></span>\n  <span class="unwatched-icon"></span>\n  <span class="media-heading secondary"></span>\n  <span class="media-heading media-rating"></span>\n\n  <p class="media-tagline"></p>\n\n  <p class="media-summary"></p>\n</a>\n\n<div class="media-actions-dropdown dropdown pull-right">\n  <div class="dropdown-toggle" data-toggle="dropdown"></div>\n</div>\n'
})}),define("plex/desktop/views/lists/library/EpisodeDetailsListItem",["hb!templates/desktop/lists/library/EpisodeDetailsListItem.tpl","underscore","plex/base/utils/MediaUtil","plex/desktop/views/lists/library/MediaDetailsListItem"],function(e,t,n,i){var s=i.extend({"className":"striped-list-item media-list-item media-details-list-item","template":e,"showRating":!0,"getPosterUrl":function(e){return e},"bindings":t.extend({},i.prototype.bindings,{".unwatched-icon":{"modelAttribute":"viewCount","modelListeners":["viewCount","viewOffset"],"manual":!0,"autohide":function(e){if(this.shared&&!this.multiuser)return!1;
var t=this.model.get("viewOffset");return!e&&!t}},".media-title":{"modelAttribute":"title"},".media-subtitle-1":{"modelAttribute":"index","formatter":function(e){return n.getEpisodeIndex({"episodePrefix":"Episode {1}","episodeIndex":e,"date":this.model.get("originallyAvailableAt"),"noLeadingZero":!0})}}})});return s}),define("plex/desktop/views/lists/library/EpisodeDetailsList",["plex/desktop/views/lists/BaseList","plex/desktop/views/lists/library/EpisodeDetailsListItem"],function(e,t){var n=e.extend({"tagName":"ul","className":"media-details-list episode-details-list show-context","itemView":t});
return n}),define("hb!templates/desktop/lists/library/EpisodeListItem",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(){return"show-actions"}function r(){return"hidden"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var o,l="",c=this,d="function",u=this.escapeExpression;return l+='<a class="media-container ',o=n["if"].call(t,t&&t.showActions,{"hash":{},"inverse":c.noop,"fn":c.program(1,a,s),"data":s}),(o||0===o)&&(l+=o),l+='" href="',(o=n.url)?o=o.call(t,{"hash":{},"data":s}):(o=t&&t.url,o=typeof o===d?o.call(t,{"hash":{},"data":s}):o),l+=u(o)+'">\n  <span class="media-heading secondary episode-index"></span>\n  <span class="media-title media-heading"></span>\n  <span class="unwatched-icon"></span>\n\n  <div class="media-actions ',o=n.unless.call(t,t&&t.showActions,{"hash":{},"inverse":c.noop,"fn":c.program(3,r,s),"data":s}),(o||0===o)&&(l+=o),l+='">\n    <button class="play-btn media-action-btn btn-link" tabindex="-1"><i class="glyphicon play"></i></button>\n    <button class="edit-btn media-action-btn btn-link" tabindex="-1"><i class="glyphicon pencil"></i></button>\n    <button class="more-btn media-action-btn btn-link" tabindex="-1"><i class="glyphicon more"></i></button>\n  </div>\n\n  <span class="media-heading media-rating"></span>\n</a>\n\n<div class="media-actions-dropdown dropdown pull-right">\n  <div class="dropdown-toggle" data-toggle="dropdown"></div>\n</div>\n'
})}),define("plex/desktop/views/lists/library/EpisodeListItem",["hb!templates/desktop/lists/library/EpisodeListItem.tpl","underscore","plex/base/utils/MediaUtil","plex/desktop/views/lists/library/MediaListItem"],function(e,t,n,i){var s=i.extend({"className":"striped-list-item media-list-item episode-list-item","template":e,"showRating":!0,"bindings":{".unwatched-icon":{"modelAttribute":"viewCount","modelListeners":["viewCount","viewOffset"],"manual":!0,"autohide":function(e){if(this.shared&&!this.multiuser)return!1;
var t=this.model.get("viewOffset");return!e&&!t}},".media-title":{"modelAttribute":"title"},".episode-index":{"modelAttribute":"index","formatter":function(e){return n.getEpisodeIndex({"episodeIndex":e,"date":this.model.get("originallyAvailableAt")})}}}});return s}),define("plex/desktop/views/lists/library/EpisodeList",["plex/desktop/views/lists/BaseList","plex/desktop/views/lists/library/EpisodeListItem"],function(e,t){var n=e.extend({"tagName":"ul","className":"list media-list episode-list show-context","itemView":t});
return n}),define("plex/desktop/views/details/SeasonDetailsView",["hb!templates/desktop/details/SeasonDetailsView.tpl","underscore","plex/base/models/SettingsModel","plex/desktop/views/details/BaseDetailsView","plex/desktop/views/lists/library/EpisodeTileList","plex/desktop/views/lists/library/EpisodeDetailsList","plex/desktop/views/lists/library/EpisodeList"],function(e,t,n,i,s,a,r){var o=i.extend({"className":"season-details-row details-row","template":e,"initialize":function(){i.prototype.initialize.apply(this,arguments),this.ListConstructor=this.getListConstructor(),this.listenTo(n,"change:"+this.getListTypeSettingKey(),this.onListTypeChange)
},"getListTypeSettingKey":function(){var e="episodeListType",t=this.model.section||this.model.server;return t.getScopedKey(e)},"getListConstructor":function(e){switch(e||(e=n.get(this.getListTypeSettingKey())),e){case"episode-details-list":return a;case"episode-list":return r;default:return s}},"bindings":t.extend({".show-title":{"modelAttribute":"parentTitle"},".season-title":{"modelAttribute":"title"}},t.pick(i.prototype.defaultBindings,".item-summary")),"onListTypeChange":function(e,t){this.ListConstructor=this.getListConstructor(t),this.render()
}});return o}),define("hb!templates/desktop/details/EpisodeDetailsView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,r,o="",l=n.helperMissing,c=this.escapeExpression;return o+='<div class="details-title-container">\n  <h1 class="show-title"></h1>\n  <h2 class="episode-title"></h2>\n  <h3 class="episode-index"></h3>\n</div>\n\n<div class="details-metadata-container">\n  <div class="details-progress-container">\n    <div class="item-progress details-progress"></div>\n  </div>\n\n  <div class="metadata-right pull-right">\n    <div class="item-available-at metadata-tags"></div>\n\n    <div class="rating-container"></div>\n\n    <div class="content-rating-flag-container"></div>\n  </div>\n\n  <p class="metadata-labels">\n    <span class="item-duration metadata-duration"></span> <span class="item-unwatched-label label label-primary">',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Unwatched",r):l.call(t,"t","Unwatched",r)))+'</span> <a class="item-unavailable-btn label label-btn label-danger" href="#"><i class="label-icon glyphicon circle-info"></i> ',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Unavailable",r):l.call(t,"t","Unavailable",r)))+'</a>\n  </p>\n\n  <div class="item-director metadata-tags">\n    <span class="metadata-label">',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Director",r):l.call(t,"t","Director",r)))+'</span> <span class="metadata-tag-list"></span>\n  </div>\n  <div class="item-writer metadata-tags">\n    <span class="metadata-label">',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Writer",r):l.call(t,"t","Writer",r)))+'</span> <span class="metadata-tag-list"></span>\n  </div>\n  <div class="item-cast metadata-tags">\n    <span class="metadata-label">',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Cast",r):l.call(t,"t","Cast",r)))+'</span> <span class="metadata-tag-list"></span>\n  </div>\n\n  <div class="item-audio metadata-tags metadata-tags-separator">\n    <span class="metadata-label">',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Audio",r):l.call(t,"t","Audio",r)))+'</span>\n  </div>\n  <div class="item-subtitles metadata-tags">\n    <span class="metadata-label">',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Subtitles",r):l.call(t,"t","Subtitles",r)))+'</span>\n  </div>\n\n  <p class="item-summary metadata-summary"></p>\n</div>\n\n<div class="details-poster-container">\n  <a class="media-poster-container play-btn" href="#">\n    <div class="episode-poster item-poster media-poster">\n      <div class="media-poster-overlay"></div>\n      <div class="media-poster-overlay-icons">\n        <i class="media-poster-overlay-icon glyphicon play"></i>\n      </div>\n    </div>\n  </a>\n\n  <div class="video-audio-flags-container media-flags"></div>\n</div>\n'
})}),define("plex/base/mixins/details/EpisodeDetailsMixin",["underscore","plex/base/mixins/details/BaseDetailsMixin","plex/base/utils/MediaUtil"],function(e,t,n){var i={"bindings":e.extend({".show-title":{"modelAttribute":"grandparentTitle"},".episode-title":{"modelAttribute":"title"},".episode-index":{"modelAttribute":"index","formatter":function(e){return n.getSeasonEpisodeIndex({"seasonIndex":this.model.get("parentIndex"),"episodeIndex":e,"date":this.model.get("originallyAvailableAt")})}}},e.pick(t.defaultBindings,[".item-progress",".item-duration",".item-unwatched-label",".item-unavailable-btn",".item-available-at",".item-director",".item-writer",".item-cast",".item-summary",".media-count-badge",".content-rating-flag-container"]))};
return i}),define("plex/desktop/views/details/EpisodeDetailsView",["hb!templates/desktop/details/EpisodeDetailsView.tpl","underscore","plex/base/mixins/details/EpisodeDetailsMixin","plex/desktop/views/details/BaseDetailsView","plex/desktop/views/Rating","plex/desktop/views/dropdowns/StreamDropdown","plex/desktop/views/images/MediaPosterImage","plex/desktop/views/images/MediaFlagImage"],function(e,t,n,i,s,a,r,o){var l=i.extend({"className":"episode-details-row details-row","mixins":n,"template":e,"allowMirror":!0,"initialize":function(){i.prototype.initialize.apply(this,arguments),this.ratingView=new s({"model":this.model}),this.audioDropdown=new a({"type":"audio","model":this.model}),this.subtitlesDropdown=new a({"type":"subtitles","model":this.model}),this.posterImage=new r({"model":this.model,"type":this.model.get("type"),"width":this.posterWidth}),this.contentRatingFlag=new o({"model":this.model,"modelAttribute":"contentRating","className":"content-rating-flag","width":70,"height":30}),this.videoResolutionFlag=new o({"model":this.model,"flag":"videoResolution","className":"media-flag","width":100,"height":20}),this.audioCodecFlag=new o({"model":this.model,"flag":"audioCodec","className":"media-flag","width":100,"height":20}),this.audioChannelsFlag=new o({"model":this.model,"flag":"audioChannels","className":"media-flag","width":100,"height":20})
}});return l}),define("hb!templates/desktop/details/ArtistDetailsView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(){return'\n  <a class="media-poster-container play-btn" href="#">\n    <div class="artist-poster item-poster media-poster">\n      <div class="media-poster-overlay"></div>\n      <div class="media-poster-overlay-icons">\n        <i class="media-poster-overlay-icon glyphicon play"></i>\n      </div>\n    </div>\n  </a>\n  '}function r(){return'\n  <div class="artist-poster item-poster media-poster"></div>\n  '
}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var o,l="",c=this;return l+='<div class="details-title-container">\n  <h1 class="item-title"></h1>\n</div>\n\n<div class="details-metadata-container">\n  <div class="artist-details-metadata-container">\n    <div class="metadata-right pull-right">\n      <div class="item-genre metadata-tags"></div>\n    </div>\n\n    <p class="metadata-labels">\n      <span class="rating-container rating-container-inline"></span>\n    </p>\n\n    <p class="item-summary metadata-summary"></p>\n  </div>\n\n  <div class="album-list-container details-list-container"></div>\n</div>\n\n<div class="details-poster-container">\n  ',o=n["if"].call(t,t&&t.canPlay,{"hash":{},"inverse":c.program(3,r,s),"fn":c.program(1,a,s),"data":s}),(o||0===o)&&(l+=o),l+="\n</div>"
})}),define("plex/base/mixins/details/ArtistDetailsMixin",["underscore","plex/base/mixins/details/BaseDetailsMixin"],function(e,t){var n={"bindings":e.pick(t.defaultBindings,[".item-title",".item-genre",".item-summary"])};return n}),define("hb!templates/desktop/lists/library/AlbumListItem",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(){return'\n          <button class="album-edit-btn media-poster-btn btn-link" tabindex="-1"><i class="glyphicon pencil"></i></button>\n        '
}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var r,o="",l="function",c=this.escapeExpression,d=this;return o+='<div class="media-poster-container">\n  <a href="',(r=n.url)?r=r.call(t,{"hash":{},"data":s}):(r=t&&t.url,r=typeof r===l?r.call(t,{"hash":{},"data":s}):r),o+=c(r)+'">\n    <div class="album-poster media-poster">\n      <div class="media-poster-overlay"></div>\n\n      <div class="media-poster-actions">\n        <button class="album-play-btn media-poster-btn btn-link" tabindex="-1"><i class="glyphicon play"></i></button>\n        ',r=n["if"].call(t,t&&t.showEdit,{"hash":{},"inverse":d.noop,"fn":d.program(1,a,s),"data":s}),(r||0===r)&&(o+=r),o+='\n        <button class="album-more-btn media-poster-btn btn-link" tabindex="-1"><i class="glyphicon more"></i></button>\n      </div>\n    </div>\n\n    <div class="media-title media-heading"></div>\n    <div class="media-subtitle-1 media-heading secondary"></div>\n  </a>\n\n  <div class="album-actions-dropdown media-actions-dropdown dropdown">\n    <div class="dropdown-toggle" data-toggle="dropdown"></div>\n  </div>\n</div>\n\n<ul class="list media-list track-list show-context"></ul>\n'
})}),define("hb!templates/desktop/lists/library/TrackListItem",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(){return'\n    	<button class="track-edit-btn media-action-btn btn-link" tabindex="-1"><i class="glyphicon pencil"></i></button>\n    '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var r,o="",l=this;return o+='<a class="media-container show-actions" href="#">\n  <div class="media-actions">\n    ',r=n["if"].call(t,t&&t.showEdit,{"hash":{},"inverse":l.noop,"fn":l.program(1,a,s),"data":s}),(r||0===r)&&(o+=r),o+='\n    <button class="track-more-btn media-action-btn btn-link" tabindex="-1"><i class="glyphicon more"></i></button>\n  </div>\n\n  <span class="track-index media-heading secondary"></span>\n  <span class="media-title media-heading"></span>\n  <span class="media-subtitle-1 media-heading secondary"></span>\n  <span class="media-context media-heading secondary"></span>\n</a>\n\n<div class="track-actions-dropdown media-actions-dropdown dropdown pull-right">\n  <div class="dropdown-toggle" data-toggle="dropdown"></div>\n</div>\n'
})}),define("plex/desktop/views/lists/library/TrackListItem",["hb!templates/desktop/lists/library/TrackListItem.tpl","underscore","marionette","plex/base/utils/Dispatcher","plex/base/utils/formatters/DateTimeUtil","plex/base/commands/Commands","plex/desktop/views/dropdowns/MediaActionsDropdown","plex/desktop/views/modals/EditMetadataModal"],function(e,t,n,i,s,a,r,o){var l=n.ItemView.extend({"tagName":"li","className":"striped-list-item rounded-list-item media-list-item track-list-item track","template":e,"ui":{"dropdown":".track-actions-dropdown"},"events":{"click .media-container":"onClick","click .track-edit-btn":"onEditClick","click .track-more-btn":"onMoreClick","hide.bs.dropdown .track-actions-dropdown":"onDropdownHide"},"initialize":function(e){this.artistTitle=e.artistTitle
},"serializeData":function(){return this.shared=this.model.server.get("shared"),this.synced=this.model.server.get("synced"),{"showEdit":!this.shared&&!this.synced}},"bindings":{".track-index":{"modelAttribute":"index","formatter":function(e){return 1>e?"":e}},".media-title":{"modelAttribute":"title"},".media-subtitle-1":{"modelAttribute":"originalTitle","autohide":function(e){var t=e&&this.artistTitle&&e.toLowerCase()!==this.artistTitle.toLowerCase();return this.$el.toggleClass("show-subtitle",!!t),t
}},".media-context":{"modelAttribute":"duration","autohide":!0,"formatter":function(e){return s.formatDuration(e)}}},"onClose":function(){this.dropdown&&this.dropdown.close()},"onClick":function(e){e.preventDefault(),a.execute("playMedia",{"item":this.model})},"onEditClick":function(e){e.preventDefault(),e.stopImmediatePropagation(),i.trigger("show:modal",new o({"model":this.model}))},"onMoreClick":function(e){e.preventDefault(),e.stopImmediatePropagation(),this.dropdown=new r({"model":this.model}),this.ui.dropdown.append(this.dropdown.render().el),this.ui.dropdown.addClass("open"),this.$el.addClass("force-hover")
},"onDropdownHide":function(){this.dropdown.close(),this.dropdown=null,this.$el.removeClass("force-hover")}});return l}),define("plex/desktop/views/lists/library/AlbumListItem",["hb!templates/desktop/lists/library/AlbumListItem.tpl","underscore","jquery","marionette","plex/base/utils/Dispatcher","plex/base/commands/Commands","plex/desktop/views/images/MediaPosterImage","plex/desktop/views/dropdowns/MediaActionsDropdown","plex/desktop/views/lists/library/TrackListItem","plex/desktop/views/modals/EditMetadataModal"],function(e,t,n,i,s,a,r,o,l,c){var d=i.CompositeView.extend({"tagName":"li","className":"poster-item album-list-item album","template":e,"itemView":l,"itemViewContainer":".track-list","ui":{"poster":".album-poster","actions":".media-poster-actions","dropdown":".album-actions-dropdown"},"events":{"click .album-play-btn":"onPlayClick","click .album-edit-btn":"onEditClick","click .album-more-btn":"onMoreClick","hide.bs.dropdown .album-actions-dropdown":"onDropdownHide"},"initialize":function(){this.image=new r({"model":this.model,"type":"album","width":200}),this.itemViewOptions={"artistTitle":this.model.parent.get("title")},this.collection=this.model.get("children"),this.collection.fetch({"reset":!0,"cancelable":!0})
},"serializeData":function(){this.shared=this.model.server.get("shared"),this.synced=this.model.server.get("synced");var e="#!/server/"+encodeURIComponent(this.model.server.id);return e+="/details/"+encodeURIComponent(this.model.get("key")),{"url":e,"showEdit":!this.shared&&!this.synced}},"bindings":{".media-title":{"modelAttribute":"title"},".media-subtitle-1":{"modelAttribute":"year","autohide":!0}},"onRender":function(){this.image.setElement(this.ui.poster)},"onClose":function(){this.image.close(),this.dropdown&&this.dropdown.close()
},"onPlayClick":function(e){e.preventDefault(),a.execute("playMedia",{"item":this.model})},"onEditClick":function(e){e.preventDefault(),s.trigger("show:modal",new c({"model":this.model}))},"onMoreClick":function(e){e.preventDefault(),e.stopImmediatePropagation(),this.dropdown=new o({"model":this.model}),this.ui.dropdown.append(this.dropdown.render().el);var t=n(e.currentTarget);this.ui.dropdown.css("top",this.ui.actions.position().top),this.ui.dropdown.css("left",t.position().left),this.ui.dropdown.addClass("open"),this.$el.addClass("force-hover")
},"onDropdownHide":function(){this.dropdown.close(),this.dropdown=null,this.$el.removeClass("force-hover")}});return d}),define("plex/desktop/views/lists/library/AlbumList",["plex/desktop/views/lists/BaseList","plex/desktop/views/lists/library/AlbumListItem"],function(e,t){var n=e.extend({"tagName":"ul","className":"list album-list","itemView":t});return n}),define("plex/desktop/views/details/ArtistDetailsView",["hb!templates/desktop/details/ArtistDetailsView.tpl","underscore","plex/base/mixins/details/ArtistDetailsMixin","plex/desktop/views/details/BaseDetailsView","plex/desktop/views/Rating","plex/desktop/views/images/MediaPosterImage","plex/desktop/views/lists/library/AlbumList"],function(e,t,n,i,s,a,r){var o=i.extend({"className":"artist-details-row details-row","mixins":n,"template":e,"allowMirror":!0,"initialize":function(){i.prototype.initialize.apply(this,arguments),this.ListConstructor=r,this.ratingView=new s({"model":this.model}),this.posterImage=new a({"model":this.model,"type":this.model.get("type"),"width":this.posterWidth})
}});return o}),define("hb!templates/desktop/details/AlbumDetailsView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(){return'\n  <a class="media-poster-container play-btn" href="#">\n    <div class="album-poster item-poster media-poster">\n      <div class="media-poster-overlay"></div>\n      <div class="media-poster-overlay-icons">\n        <i class="media-poster-overlay-icon glyphicon play"></i>\n      </div>\n    </div>\n  </a>\n  '}function r(){return'\n  <div class="album-poster item-poster media-poster"></div>\n  '
}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var o,l="",c=this;return l+='<div class="details-title-container">\n  <h1 class="artist-title"></h1>\n  <h2 class="album-title"></h2>\n  <h3 class="item-year"></h3>\n</div>\n\n<div class="details-metadata-container">\n  <div class="metadata-right pull-right">\n    <div class="item-genre metadata-tags"></div>\n  </div>\n\n  <p class="metadata-labels">\n    <span class="rating-container rating-container-inline"></span>\n  </p>\n\n  <p class="item-summary metadata-summary"></p>\n\n  <div class="track-list-container details-list-container"></div>\n</div>\n\n<div class="details-poster-container">\n  ',o=n["if"].call(t,t&&t.canPlay,{"hash":{},"inverse":c.program(3,r,s),"fn":c.program(1,a,s),"data":s}),(o||0===o)&&(l+=o),l+="\n</div>\n"
})}),define("plex/base/mixins/details/AlbumDetailsMixin",["underscore","plex/base/mixins/details/BaseDetailsMixin"],function(e,t){var n={"bindings":e.extend({".artist-title":{"modelAttribute":"parentTitle"},".album-title":{"modelAttribute":"title"}},e.pick(t.defaultBindings,[".item-year",".item-genre",".item-summary"]))};return n}),define("plex/desktop/views/lists/library/TrackList",["plex/desktop/views/lists/BaseList","plex/desktop/views/lists/library/TrackListItem"],function(e,t){var n=e.extend({"tagName":"ul","className":"list media-list track-list show-context","itemView":t});
return n}),define("plex/desktop/views/details/AlbumDetailsView",["hb!templates/desktop/details/AlbumDetailsView.tpl","underscore","plex/base/mixins/details/AlbumDetailsMixin","plex/desktop/views/details/BaseDetailsView","plex/desktop/views/Rating","plex/desktop/views/images/MediaPosterImage","plex/desktop/views/lists/library/TrackList"],function(e,t,n,i,s,a,r){var o=i.extend({"className":"album-details-row details-row","mixins":n,"template":e,"allowMirror":!0,"initialize":function(){i.prototype.initialize.apply(this,arguments),this.ListConstructor=r,this.listItemViewOptions={"artistTitle":this.model.get("parentTitle")},this.ratingView=new s({"model":this.model}),this.posterImage=new a({"model":this.model,"type":this.model.get("type"),"width":this.posterWidth})
}});return o}),define("hb!templates/desktop/details/PhotoAlbumDetailsView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{},'<div class="details-title-container">\n  <h1 class="item-title"></h1>\n</div>\n\n<div class="details-metadata-container">\n   <p class="item-summary metadata-summary"></p>\n\n  <div class="photo-list-container details-list-container"></div>\n</div>\n'})}),define("hb!templates/desktop/lists/library/PhotoTileListItem",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(){return"collection-poster-container"
}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var r,o,l,c="",d=this,u=n.helperMissing;return c+='<a class="media-poster-container hide-actions ',l={"hash":{},"inverse":d.noop,"fn":d.program(1,a,s),"data":s},r=n.if_eq||t&&t.if_eq,o=r?r.call(t,(r=t&&t.item,null==r||r===!1?r:r.type),"photoAlbum",l):u.call(t,"if_eq",(r=t&&t.item,null==r||r===!1?r:r.type),"photoAlbum",l),(o||0===o)&&(c+=o),c+='" href="#">\n  <div class="media-poster">\n    <div class="media-poster-overlay"></div>\n\n    <div class="collection-title-container">\n      <div class="collection-title"></div>\n    </div>\n  </div>\n</a>\n'
})}),define("plex/desktop/views/lists/library/PhotoTileListItem",["hb!templates/desktop/lists/library/PhotoTileListItem.tpl","underscore","plex/base/utils/Dispatcher","plex/base/commands/Commands","plex/desktop/views/lists/library/MediaListItem","plex/desktop/views/images/MediaPosterImage"],function(e,t,n,i,s,a){var r=s.extend({"className":"poster-item media-tile-list-item","template":e,"ui":{"poster":".media-poster"},"events":{"click a":"onClick"},"initialize":function(){s.prototype.initialize.apply(this,arguments),this.image=new a({"model":this.model,"type":this.type,"width":200})
},"bindings":{".collection-title-container":{"modelAttribute":"title","manual":!0,"autohide":function(){return"photoAlbum"===this.type}},".collection-title":{"modelAttribute":"title"}},"onClick":function(e){e.preventDefault(),"photoAlbum"===this.type?n.trigger("navigate","details",{"serverID":this.model.server.id,"key":this.model.get("key")}):i.execute("playMedia",{"item":this.model})}});return r}),define("plex/desktop/views/lists/library/PhotoTileList",["plex/desktop/views/lists/BaseList","plex/desktop/views/lists/library/PhotoTileListItem"],function(e,t){var n=e.extend({"tagName":"ul","className":"tile-list photo-tile-list","itemView":t});
return n}),define("plex/desktop/views/details/PhotoAlbumDetailsView",["hb!templates/desktop/details/PhotoAlbumDetailsView.tpl","underscore","plex/desktop/views/details/BaseDetailsView","plex/desktop/views/lists/library/PhotoTileList"],function(e,t,n,i){var s=n.extend({"className":"photo-album-details-row details-row","template":e,"initialize":function(){n.prototype.initialize.apply(this,arguments),this.ListConstructor=i},"bindings":t.pick(n.prototype.defaultBindings,[".item-title",".item-summary"])});
return s}),define("hb!templates/desktop/details/ClipDetailsView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,r,o="",l=n.helperMissing,c=this.escapeExpression;return o+='<div class="details-title-container">\n  <h1 class="item-title"></h1>\n  <h2 class="item-year"></h2>\n</div>\n\n<div class="details-metadata-container">\n  <div class="metadata-right pull-right">\n    <div class="item-genre metadata-tags"></div>\n\n    <div class="rating-container"></div>\n\n    <div class="content-rating-flag-container"></div>\n  </div>\n\n  <p class="metadata-labels">\n    <span class="item-duration metadata-duration"></span>\n  </p>\n\n  <p class="item-tagline metadata-tagline"></p>\n\n  <div class="item-director metadata-tags">\n    <span class="metadata-label">',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Director",r):l.call(t,"t","Director",r)))+'</span> <span class="metadata-tag-list"></span>\n  </div>\n  <div class="item-writer metadata-tags">\n    <span class="metadata-label">',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Writer",r):l.call(t,"t","Writer",r)))+'</span> <span class="metadata-tag-list"></span>\n  </div>\n  <div class="item-cast metadata-tags">\n    <span class="metadata-label">',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Cast",r):l.call(t,"t","Cast",r)))+'</span> <span class="metadata-tag-list"></span>\n  </div>\n\n  <div class="item-audio metadata-tags metadata-tags-separator">\n    <span class="metadata-label">',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Audio",r):l.call(t,"t","Audio",r)))+'</span>\n  </div>\n  <div class="item-subtitles metadata-tags">\n    <span class="metadata-label">',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Subtitles",r):l.call(t,"t","Subtitles",r)))+'</span>\n  </div>\n\n  <p class="item-summary metadata-summary"></p>\n\n  <div class="studio-flag-container"></div>\n</div>\n\n<div class="details-poster-container">\n  <a class="media-poster-container play-btn" href="#">\n    <div class="clip-poster item-poster media-poster">\n      <div class="media-poster-overlay"></div>\n      <div class="media-poster-overlay-icons">\n        <i class="media-poster-overlay-icon glyphicon play"></i>\n      </div>\n    </div>\n  </a>\n\n  <div class="video-audio-flags-container media-flags"></div>\n</div>\n'
})}),define("plex/base/mixins/details/ClipDetailsMixin",["underscore","plex/base/mixins/details/BaseDetailsMixin"],function(e,t){var n={"bindings":e.pick(t.defaultBindings,[".item-title",".item-year",".item-duration",".item-tagline",".item-genre",".item-director",".item-writer",".item-cast",".item-summary",".content-rating-flag-container",".studio-flag-container"])};return n}),define("plex/desktop/views/details/ClipDetailsView",["hb!templates/desktop/details/ClipDetailsView.tpl","plex/base/mixins/details/ClipDetailsMixin","plex/desktop/views/details/BaseDetailsView","plex/desktop/views/Rating","plex/desktop/views/dropdowns/StreamDropdown","plex/desktop/views/images/MediaPosterImage","plex/desktop/views/images/MediaFlagImage"],function(e,t,n,i,s,a,r){var o=n.extend({"className":"clip-details-row details-row","mixins":t,"template":e,"allowMirror":!0,"initialize":function(){n.prototype.initialize.apply(this,arguments),this.ratingView=new i({"model":this.model}),this.audioDropdown=new s({"type":"audio","model":this.model}),this.subtitlesDropdown=new s({"type":"subtitles","model":this.model}),this.posterImage=new a({"model":this.model,"type":this.model.get("type"),"width":this.posterWidth}),this.contentRatingFlag=new r({"model":this.model,"modelAttribute":"contentRating","className":"content-rating-flag","width":70,"height":30}),this.videoResolutionFlag=new r({"model":this.model,"flag":"videoResolution","className":"media-flag","width":100,"height":20}),this.audioCodecFlag=new r({"model":this.model,"flag":"audioCodec","className":"media-flag","width":100,"height":20}),this.audioChannelsFlag=new r({"model":this.model,"flag":"audioChannels","className":"media-flag","width":100,"height":20}),this.studioFlag=new r({"model":this.model,"modelAttribute":"studio","className":"studio-flag","width":200,"height":40})
}});return o}),define("hb!templates/desktop/details/UnknownDetailsView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,r,o="",l=n.helperMissing,c=this.escapeExpression;return o+='<div class="row row-padded">\n  <div class="col-md-8 col-md-offset-2">\n    <h1>',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"This media type does not have a details page.",r):l.call(t,"t","This media type does not have a details page.",r)))+"</h1>\n  </div>\n</div>\n"
})}),define("plex/desktop/views/details/UnknownDetailsView",["hb!templates/desktop/details/UnknownDetailsView.tpl","marionette"],function(e,t){var n=t.ItemView.extend({"className":"container","template":e});return n}),define("plex/desktop/views/details/DetailsView",["hb!templates/desktop/details/DetailsView.tpl","marionette","plex/base/utils/Dispatcher","plex/base/commands/Commands","plex/base/models/SettingsModel","plex/desktop/views/actionbar/ActionBarView","plex/desktop/views/breadcrumbbar/DetailsBreadcrumbBarView","plex/desktop/views/details/MovieDetailsView","plex/desktop/views/details/ShowDetailsView","plex/desktop/views/details/SeasonDetailsView","plex/desktop/views/details/EpisodeDetailsView","plex/desktop/views/details/ArtistDetailsView","plex/desktop/views/details/AlbumDetailsView","plex/desktop/views/details/PhotoAlbumDetailsView","plex/desktop/views/details/ClipDetailsView","plex/desktop/views/details/UnknownDetailsView"],function(e,t,n,i,s,a,r,o,l,c,d,u,h,p,f,m){var g={"movie":o,"show":l,"season":c,"episode":d,"artist":u,"album":h,"photoAlbum":p,"clip":f,"playlistItem":f},v=t.Layout.extend({"className":"details-container","template":e,"regions":{"details":".row"},"initialize":function(){var e=this.model.get("grandparentTheme")||this.model.get("parentTheme")||this.model.get("theme");
n.trigger("show:background",{"model":this.model}),n.trigger("show:actionbar",new a({"model":this.model})),this.model.isLibraryItem()&&n.trigger("show:breadcrumbbar",new r({"model":this.model})),e&&s.get("playThemeMusic")&&i.execute("playSound",{"key":this.model.get("key"),"url":this.model.server.resolveUrl(e,{"appendToken":!0}),"volume":50,"autoLoad":!0,"autoPlay":!0,"background":!0})},"onRender":function(){var e,t=this.model.get("type");if(g.hasOwnProperty(t)){var n=g[t];e=new n({"model":this.model})
}else e=new m({"model":this.model});this.details.append(e,this.$el)},"onClose":function(){this.model.release(),n.trigger("hide:actionbar"),this.model.isLibraryItem()&&n.trigger("hide:breadcrumbbar")}});return v}),define("plex/desktop/routes/LibraryController",["plex/base/utils/Dispatcher","plex/base/routes/BaseController","plex/desktop/views/SearchView","plex/desktop/views/section/SectionView","plex/desktop/views/details/DetailsView"],function(e,t,n,i,s){var a=t.extend({"search":function(t){var i=this.populateView({"primaryServer":!0});
i.done(function(){e.trigger("show:view",new n({"query":t}))})},"section":function(t,n,s){var a=this.populateView({"serverID":t,"sectionID":n});a.done(function(t){e.trigger("show:view",new i({"model":t.section,"subset":s}))})},"sectionFolder":function(t,n,s){var a=this.populateView({"serverID":t,"sectionID":n});a.done(function(t){var n=t.section.get("items");n.scrollPosition=0,e.trigger("show:view",new i({"model":t.section,"subset":"folder","folderKey":s}))})},"sectionFilter":function(t,n,s,a,r,o){var l=this.populateView({"serverID":t,"sectionID":n});
l.done(function(t){var n=t.section.get("currentFilters");n.length=0,o||(o=r),n.push({"key":a,"values":r.split(","),"titles":o.split(",")}),e.trigger("show:view",new i({"model":t.section,"type":parseInt(s,10)}))})},"details":function(t,n){var i=this.populateView({"serverID":t,"key":n});i.done(function(t){e.trigger("show:view",new s({"model":t.item}))})}});return a}),define("plex/desktop/routes/LibraryRouter",["plex/base/routes/BaseRouter","plex/desktop/routes/LibraryController"],function(e,t){var n=e.extend({"controller":new t,"appRoutes":{"!/search/:query":"search","!/server/:serverID/section/:sectionID(/:subset)":"section","!/server/:serverID/section/:sectionID/folder/:key":"sectionFolder","!/server/:serverID/section/:sectionID/filter/:type/:key/:value(/:title)":"sectionFilter","!/server/:serverID/details/:key":"details"}});
return n}),define("hb!templates/desktop/channel/ChannelView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a="";return a})}),define("hb!templates/desktop/breadcrumbbar/ChannelBreadcrumbBarView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(){return'<a class="settings-btn btn-gray" href="#"><i class="glyphicon cogwheel"></i></a>'}function r(){return"hidden"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};
var o,l,c,d="",u=this,h=n.helperMissing,p=this.escapeExpression,f="function";return d+='<div class="breadcrumb-actions pull-right">\n  ',o=n["if"].call(t,t&&t.showSettings,{"hash":{},"inverse":u.noop,"fn":u.program(1,a,s),"data":s}),(o||0===o)&&(d+=o),d+='\n\n  <span id="channel-list-dropdown" class="dropdown">\n    <a class="btn-gray dropdown-toggle" href="#channel-list-dropdown" data-toggle="dropdown"><i class="glyphicon show-thumbnails"></i> <i class="caret-icon caret-icon-sm"></i></a>\n\n    <ul class="dropdown-menu pull-right">\n      <li><a class="list-btn" data-type="media-tile-list" href="#">',c={"hash":{},"data":s},d+=p((o=n.t||t&&t.t,o?o.call(t,"Posters",c):h.call(t,"t","Posters",c)))+'<i class="dropdown-selected-icon glyphicon ok-2 ',c={"hash":{},"inverse":u.noop,"fn":u.program(3,r,s),"data":s},o=n.if_neq||t&&t.if_neq,l=o?o.call(t,t&&t.listType,"media-tile-list",c):h.call(t,"if_neq",t&&t.listType,"media-tile-list",c),(l||0===l)&&(d+=l),d+='"></i></a></li>\n      <li><a class="list-btn" data-type="media-details-list" href="#">',c={"hash":{},"data":s},d+=p((o=n.t||t&&t.t,o?o.call(t,"Details",c):h.call(t,"t","Details",c)))+'<i class="dropdown-selected-icon glyphicon ok-2 ',c={"hash":{},"inverse":u.noop,"fn":u.program(3,r,s),"data":s},o=n.if_neq||t&&t.if_neq,l=o?o.call(t,t&&t.listType,"media-details-list",c):h.call(t,"if_neq",t&&t.listType,"media-details-list",c),(l||0===l)&&(d+=l),d+='"></i></a></li>\n      <li><a class="list-btn" data-type="media-list" href="#">',c={"hash":{},"data":s},d+=p((o=n.t||t&&t.t,o?o.call(t,"List",c):h.call(t,"t","List",c)))+'<i class="dropdown-selected-icon glyphicon ok-2 ',c={"hash":{},"inverse":u.noop,"fn":u.program(3,r,s),"data":s},o=n.if_neq||t&&t.if_neq,l=o?o.call(t,t&&t.listType,"media-list",c):h.call(t,"if_neq",t&&t.listType,"media-list",c),(l||0===l)&&(d+=l),d+='"></i></a></li>\n    </ul>\n  </span>\n</div>\n\n<span class="breadcrumb-dropdown"><a href="',(l=n.channelUrl)?l=l.call(t,{"hash":{},"data":s}):(l=t&&t.channelUrl,l=typeof l===f?l.call(t,{"hash":{},"data":s}):l),d+=p(l)+'">',(l=n.channelTitle)?l=l.call(t,{"hash":{},"data":s}):(l=t&&t.channelTitle,l=typeof l===f?l.call(t,{"hash":{},"data":s}):l),d+=p(l)+'</a></span>\n<span class="breadcrumb-subset-dropdown ',l=n.unless.call(t,t&&t.title,{"hash":{},"inverse":u.noop,"fn":u.program(3,r,s),"data":s}),(l||0===l)&&(d+=l),d+='"><span class="dropdown-placeholder">',(l=n.title)?l=l.call(t,{"hash":{},"data":s}):(l=t&&t.title,l=typeof l===f?l.call(t,{"hash":{},"data":s}):l),d+=p(l)+'</span></span>\n<span class="list-badge badge badge-lg">',(l=n.totalSize)?l=l.call(t,{"hash":{},"data":s}):(l=t&&t.totalSize,l=typeof l===f?l.call(t,{"hash":{},"data":s}):l),d+=p(l)+"</span>\n"
})}),define("plex/desktop/views/breadcrumbbar/ChannelBreadcrumbBarView",["hb!templates/desktop/breadcrumbbar/ChannelBreadcrumbBarView.tpl","underscore","jquery","marionette","plex/base/utils/Dispatcher","plex/base/models/server/ServerSettingCollection","plex/desktop/views/modals/ChannelSettingsModal"],function(e,t,n,i,s,a,r){var o=i.Layout.extend({"className":"breadcrumb-bar","template":e,"ui":{"listSelectedIcons":"#channel-list-dropdown .dropdown-selected-icon"},"events":{"click .settings-btn":"onSettingsClick","click .list-btn":"onListClick"},"initialize":function(e){this.currentListType=e.currentListType,this.settingsKey=this.model.get("settingsKey"),!this.settingsKey&&this.model.channel&&(this.settingsKey=this.model.channel.get("settingsKey"))
},"serializeData":function(){var e=this.model.channel||this.model,t=e?e.get("title"):this.model.get("title"),n=e?e.id:e.get("identifier"),i="#!/server/"+encodeURIComponent(this.model.server.id);i+="/channel/"+encodeURIComponent(n);var s=this.model.channel?this.model.get("title"):null;return{"channelTitle":t,"channelUrl":i,"title":s,"totalSize":this.model.get("items").length,"showSettings":!!this.settingsKey,"listType":this.currentListType}},"onSettingsClick":function(e){e.preventDefault();var n=new a([],{"server":this.model.server,"url":this.settingsKey});
n.fetch().done(t.bind(function(){s.trigger("show:modal",new r({"model":this.model.channel||this.model,"collection":n}))},this))},"onListClick":function(e){e.preventDefault();var t=n(e.currentTarget),i=t.data("type");this.trigger("change:listType",i),this.ui.listSelectedIcons.addClass("hidden"),t.find(".dropdown-selected-icon").removeClass("hidden")}});return o}),define("plex/desktop/views/channel/ChannelView",["hb!templates/desktop/channel/ChannelView.tpl","underscore","marionette","plex/base/utils/Dispatcher","plex/base/models/AppModel","plex/desktop/views/breadcrumbbar/ChannelBreadcrumbBarView","plex/desktop/views/lists/library/VirtualMediaTileList","plex/desktop/views/lists/library/VirtualMediaDetailsList","plex/desktop/views/lists/library/VirtualMediaList"],function(e,t,n,i,s,a,r,o,l){var c=n.Layout.extend({"className":"channel-container","template":e,"regions":{"list":".channel-list-container"},"initialize":function(){var e=this.model.get("header"),t=this.model.get("message");
(e||t)&&i.trigger("show:alert",{"message":t||e}),this.searchKey=this.model.get("searchKey"),this.searchPlaceholder=this.model.get("title"),!this.searchKey&&this.model.channel&&(this.searchKey=this.model.channel.get("searchKey"),this.searchPlaceholder=this.model.channel.get("title")),this.searchKey&&(s.set({"searchType":"channel","searchPlaceholder":this.searchPlaceholder}),this.listenTo(i,"search:channel",this.onSearch)),this.listType=this.getListType();var n=new a({"model":this.model,"currentListType":this.listType});
this.listenTo(n,"change:listType",this.onListTypeChange),i.trigger("show:breadcrumbbar",n),i.trigger("show:background",{"model":this.model,"dim":!0})},"getListType":function(){var e="media-tile-list",n="media-details-list",i="media-list",s=this.collection.length,a=this.model.get("viewGroup");if("Pictures"===a)return e;if("List"===a)return i;if(this.collection.findWhere({"type":"photo"}))return e;var r=t.compact(this.collection.pluck("summary")),o=t.uniq(this.collection.pluck("thumb")),l=this.collection.reduce(function(e,t){var n=t.get("title");
return n?e+n.length:e},0),c=l/s;return o.length>s/2&&30>c?e:r.length>s/2?n:i},"getListConstructor":function(){switch(this.listType){case"media-tile-list":return r;case"media-details-list":return o;default:return l}},"onRender":function(){var e=this.getListConstructor();this.list.append(new e({"collection":this.collection,"paginated":!1}),this.$el)},"onClose":function(){s.set({"searchType":null,"searchPlaceholder":null}),i.trigger("hide:breadcrumbbar")},"onSearch":function(e){if(e){var t=this.model.channel||this.model,n=t.id?t.id:t.get("identifier"),s=this.searchKey;
s+=s.indexOf("?")>0?"&":"?",s+="query="+e,i.trigger("navigate","channel",{"serverID":this.model.server.id,"channelID":n,"key":s})}},"onListTypeChange":function(e){this.listType=e,this.collection.scrollPosition=0,this.list.currentView.scrollPosition=0,this.render()}});return c}),define("hb!templates/desktop/channel/ChannelsView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s="";return s+='<span class="badge">',(i=n.allCount)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.allCount,i=typeof i===p?i.call(e,{"hash":{},"data":t}):i),s+=f(i)+"</span>"
}function r(e,t){var i,s="";return s+='<span class="badge">',(i=n.videoCount)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.videoCount,i=typeof i===p?i.call(e,{"hash":{},"data":t}):i),s+=f(i)+"</span>"}function o(e,t){var i,s="";return s+='<span class="badge">',(i=n.musicCount)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.musicCount,i=typeof i===p?i.call(e,{"hash":{},"data":t}):i),s+=f(i)+"</span>"}function l(e,t){var i,s="";return s+='<span class="badge">',(i=n.photoCount)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.photoCount,i=typeof i===p?i.call(e,{"hash":{},"data":t}):i),s+=f(i)+"</span>"
}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var c,d,u,h="",p="function",f=this.escapeExpression,m=n.helperMissing,g=this;return h+='<ul class="nav nav-header pull-right">\n  <li><a class="all-btn btn-gray selected" href="#">',u={"hash":{},"data":s},h+=f((c=n.t||t&&t.t,c?c.call(t,"All",u):m.call(t,"t","All",u))),d=n["if"].call(t,t&&t.allCount,{"hash":{},"inverse":g.noop,"fn":g.program(1,a,s),"data":s}),(d||0===d)&&(h+=d),h+='</a></li>\n  <li><a class="video-btn btn-gray" href="#">',u={"hash":{},"data":s},h+=f((c=n.t||t&&t.t,c?c.call(t,"Video",u):m.call(t,"t","Video",u))),d=n["if"].call(t,t&&t.videoCount,{"hash":{},"inverse":g.noop,"fn":g.program(3,r,s),"data":s}),(d||0===d)&&(h+=d),h+='</a></li>\n  <li><a class="music-btn btn-gray" href="#">',u={"hash":{},"data":s},h+=f((c=n.t||t&&t.t,c?c.call(t,"Music",u):m.call(t,"t","Music",u))),d=n["if"].call(t,t&&t.musicCount,{"hash":{},"inverse":g.noop,"fn":g.program(5,o,s),"data":s}),(d||0===d)&&(h+=d),h+='</a></li>\n  <li><a class="photo-btn btn-gray" href="#">',u={"hash":{},"data":s},h+=f((c=n.t||t&&t.t,c?c.call(t,"Photo",u):m.call(t,"t","Photo",u))),d=n["if"].call(t,t&&t.photoCount,{"hash":{},"inverse":g.noop,"fn":g.program(7,l,s),"data":s}),(d||0===d)&&(h+=d),h+="</a></li>\n</ul>\n\n<h3>",u={"hash":{},"data":s},h+=f((c=n.t||t&&t.t,c?c.call(t,"Channels",u):m.call(t,"t","Channels",u)))+'</h3>\n\n<div class="filter-bar">\n  <a class="btn btn-sm btn-primary pull-right" href="#!/server/',u={"hash":{},"data":s},h+=f((c=n.encodeUrl||t&&t.encodeUrl,c?c.call(t,t&&t.serverID,u):m.call(t,"encodeUrl",t&&t.serverID,u)))+'/directory">',u={"hash":{},"data":s},h+=f((c=n.t||t&&t.t,c?c.call(t,"Install Channels",u):m.call(t,"t","Install Channels",u)))+'</a>\n  <a class="check-updates-btn btn btn-sm btn-default btn-loading" href="#">\n    <div class="loading loading-sm"></div>\n    <span class="btn-label">',u={"hash":{},"data":s},h+=f((c=n.t||t&&t.t,c?c.call(t,"Check for Updates",u):m.call(t,"t","Check for Updates",u)))+'</span>\n  </a>\n</div>\n\n<div class="channels-container"></div>\n'
})}),define("plex/desktop/views/lists/channel/ChannelTileList",["plex/desktop/views/lists/BaseList","plex/desktop/views/lists/channel/ChannelTileListItem"],function(e,t){var n=e.extend({"tagName":"ul","className":"tile-list media-tile-list channel-tile-list","itemView":t});return n}),define("plex/desktop/views/channel/ChannelsView",["hb!templates/desktop/channel/ChannelsView.tpl","underscore","jquery","marionette","plex/base/utils/Dispatcher","plex/base/commands/Commands","plex/desktop/views/lists/channel/ChannelTileList"],function(e,t,n,i,s,a,r){var o=i.Layout.extend({"className":"container","template":e,"ui":{"navLinks":".nav a","checkUpdatesBtn":".check-updates-btn"},"regions":{"list":".channels-container"},"events":{"click .nav a":"onNavClick","click .all-btn":"onAllClick","click .video-btn":"onVideoClick","click .music-btn":"onMusicClick","click .photo-btn":"onPhotoClick","click .check-updates-btn":"onCheckUpdatesClick"},"initialize":function(){this.videoCollection=this.collection.filterByType("video"),this.musicCollection=this.collection.filterByType("music"),this.photoCollection=this.collection.filterByType("photos")
},"serializeData":function(){return{"serverID":this.collection.server.id,"allCount":this.collection.length,"videoCount":this.videoCollection.length,"musicCount":this.musicCollection.length,"photoCount":this.photoCollection.length}},"onRender":function(){this.list.show(new r({"collection":this.collection}))},"onNavClick":function(e){this.ui.navLinks.removeClass("selected"),n(e.currentTarget).addClass("selected")},"onAllClick":function(e){e.preventDefault(),this.list.show(new r({"collection":this.collection}))
},"onVideoClick":function(e){e.preventDefault(),this.list.show(new r({"collection":this.videoCollection}))},"onMusicClick":function(e){e.preventDefault(),this.list.show(new r({"collection":this.musicCollection}))},"onPhotoClick":function(e){e.preventDefault(),this.list.show(new r({"collection":this.photoCollection}))},"onCheckUpdatesClick":function(e){e.preventDefault();var n=this.ui.checkUpdatesBtn;if(!n.hasClass("active")){n.addClass("active");var i=a.execute("updateChannel",{"server":this.collection.server});
i.always(t.bind(function(){n.removeClass("active")},this))}}});return o}),define("hb!templates/desktop/channel/ChannelDirectoryView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t,i){var s,a,o,l="";return l+='\n        <li><a class="btn-gray ',o={"hash":{},"inverse":u.noop,"fn":u.program(2,r,t),"data":t},s=n.if_eq||i&&i.if_eq,a=s?s.call(e,i&&i.currentKey,e&&e.key,o):h.call(e,"if_eq",i&&i.currentKey,e&&e.key,o),(a||0===a)&&(l+=a),l+='" href="#!/server/',o={"hash":{},"data":t},l+=p((s=n.encodeUrl||i&&i.encodeUrl,s?s.call(e,i&&i.serverID,o):h.call(e,"encodeUrl",i&&i.serverID,o)))+"/directory/",o={"hash":{},"data":t},l+=p((s=n.encodeUrl||e&&e.encodeUrl,s?s.call(e,e&&e.key,o):h.call(e,"encodeUrl",e&&e.key,o)))+'">',o={"hash":{},"data":t},l+=p((s=n.t||e&&e.t,s?s.call(e,e&&e.title,o):h.call(e,"t",e&&e.title,o)))+"</a></li>\n      "
}function r(){return"selected"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var o,l,c,d="",u=this,h=n.helperMissing,p=this.escapeExpression;return d+="<h3>",c={"hash":{},"data":s},d+=p((o=n.t||t&&t.t,o?o.call(t,"Channel Directory",c):h.call(t,"t","Channel Directory",c)))+'</h3>\n\n<div class="filter-bar">\n  <a class="btn btn-sm btn-default pull-right" href="#!/server/',c={"hash":{},"data":s},d+=p((o=n.encodeUrl||t&&t.encodeUrl,o?o.call(t,t&&t.serverID,c):h.call(t,"encodeUrl",t&&t.serverID,c)))+'/channels">',c={"hash":{},"data":s},d+=p((o=n.t||t&&t.t,o?o.call(t,"Browse Channels",c):h.call(t,"t","Browse Channels",c)))+'</a>\n</div>\n\n<div class="row">\n  <div class="col-md-3">\n    <ul class="nav nav-stacked nav-sidebar">\n      ',l=n.each.call(t,t&&t.directories,{"hash":{},"inverse":u.noop,"fn":u.programWithDepth(1,a,s,t),"data":s}),(l||0===l)&&(d+=l),d+='\n    </ul>\n  </div>\n\n  <div class="directory-container col-md-9"></div>\n</div>\n'
})}),define("hb!templates/desktop/lists/channel/ChannelDirectoryListItem",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,r,o="",l=n.helperMissing,c=this.escapeExpression;return o+='<a href="#!/server/',r={"hash":{},"data":s},o+=c((a=n.encodeUrl||t&&t.encodeUrl,a?a.call(t,t&&t.serverID,r):l.call(t,"encodeUrl",t&&t.serverID,r)))+"/directory/",r={"hash":{},"data":s},o+=c((a=n.encodeUrl||t&&t.encodeUrl,a?a.call(t,t&&t.currentKey,r):l.call(t,"encodeUrl",t&&t.currentKey,r)))+"/",r={"hash":{},"data":s},o+=c((a=n.encodeUrl||t&&t.encodeUrl,a?a.call(t,(a=t&&t.channel,null==a||a===!1?a:a.key),r):l.call(t,"encodeUrl",(a=t&&t.channel,null==a||a===!1?a:a.key),r)))+'">\n  <span class="media-title media-heading"></span>\n</a>\n'
})}),define("plex/desktop/views/lists/channel/ChannelDirectoryListItem",["hb!templates/desktop/lists/channel/ChannelDirectoryListItem.tpl","underscore","marionette","plex/base/utils/Dispatcher","plex/base/commands/Commands","plex/base/models/server/ServerSettingCollection","plex/desktop/views/modals/ChannelSettingsModal"],function(e,t,n,i,s,a,r){var o=n.ItemView.extend({"tagName":"li","className":"striped-list-item rounded-list-item channel-directory-list-item","template":e,"events":{"click a":"onClick"},"initialize":function(e){this.currentKey=e.currentKey
},"serializeData":function(){return{"channel":this.model.toJSON(),"serverID":this.model.server.id,"currentKey":this.currentKey}},"bindings":{".media-title":{"modelAttribute":"title"}},"onClick":function(e){if(/\/updates$/.test(this.model.id))e.preventDefault(),s.execute("updateChannel",{"server":this.model.server});else if(/\/prefs$/.test(this.model.id)){e.preventDefault();var n=new a([],{"server":this.model.server,"url":this.model.id});n.fetch().done(t.bind(function(){i.trigger("show:modal",new r({"model":this.model,"collection":n}))
},this))}}});return o}),define("plex/desktop/views/lists/channel/ChannelDirectoryList",["plex/desktop/views/lists/BaseList","plex/desktop/views/lists/channel/ChannelDirectoryListItem"],function(e,t){var n=e.extend({"tagName":"ul","className":"list channel-directory-list","itemView":t});return n}),define("plex/desktop/views/channel/ChannelDirectoryView",["hb!templates/desktop/channel/ChannelDirectoryView.tpl","marionette","plex/base/utils/Dispatcher","plex/base/models/channel/ChannelCollection","plex/desktop/views/lists/channel/ChannelDirectoryList","plex/desktop/views/lists/channel/ChannelDirectoryTileList"],function(e,t,n,i,s,a){var r=t.Layout.extend({"className":"container","template":e,"regions":{"list":".directory-container"},"initialize":function(e){this.currentKey=e.currentKey,this.currentPath=e.currentPath,this.currentKey||(this.currentKey=this.collection.first().get("key")),this.currentPath||(this.currentPath=this.currentKey);
var t=new i([],{"server":this.collection.server,"url":this.currentPath});this.listenToOnce(t,"reset",this.onReset),t.fetch({"reset":!0,"cancelable":!0})},"serializeData":function(){return{"directories":this.collection.toJSON(),"serverID":this.collection.server.id,"currentKey":this.currentKey}},"onReset":function(e){var t,n={"collection":e,"itemViewOptions":{"currentKey":this.currentKey}};t="Store:Info"===e.viewGroup?new a(n):new s(n),this.list.show(t)}});return r}),define("plex/desktop/routes/ChannelController",["plex/base/utils/Dispatcher","plex/base/adapters/LocalizerAdapter","plex/base/routes/BaseController","plex/base/models/channel/ChannelCollection","plex/desktop/views/channel/ChannelView","plex/desktop/views/channel/ChannelsView","plex/desktop/views/channel/ChannelDirectoryView","plex/desktop/views/details/DetailsView","plex/desktop/views/error/ErrorView"],function(e,t,n,i,s,a,r,o,l){var c=n.extend({"channel":function(t,n,i){var a=this.populateView({"serverID":t,"channelID":n,"channelKey":i});
a.done(function(t){var n=t.channelItem?t.channelItem:t.channel;e.trigger("show:view",new s({"model":n,"collection":n.get("items")}))})},"channelDetails":function(t,n,i){var s=this.populateView({"serverID":t,"channelID":n,"channelKey":i});s.done(function(t){var n=t.channelItem.get("items"),i=n.first();e.trigger("show:view",new o({"model":i}))})},"channels":function(n){var s=this.populateView({"serverID":n});s.done(function(n){var s=new i([],{"server":n.server,"subset":"all"});s.comparator=s.sortByTitle;
var r=s.fetch({"cancelable":!0});r.done(function(){e.trigger("show:view",new a({"collection":s}))}),r.fail(function(){var n=t.get();e.trigger("show:view",new l({"message":n.t("Your channels are unavailable.")}))})})},"directory":function(n,s,a){var o=this.populateView({"serverID":n});o.done(function(n){var o=new i([],{"server":n.server,"url":"system/appstore"}),c=o.fetch({"cancelable":!0});c.done(function(){e.trigger("show:view",new r({"collection":o,"currentKey":s,"currentPath":a}))}),c.fail(function(){var n=t.get();
e.trigger("show:view",new l({"message":n.t("The channel directory is unavailable.")}))})})}});return c}),define("plex/desktop/routes/ChannelRouter",["plex/base/routes/BaseRouter","plex/desktop/routes/ChannelController"],function(e,t){var n=e.extend({"controller":new t,"appRoutes":{"!/server/:serverID/channel/:channelID(/:key)":"channel","!/server/:serverID/channel/:channelID/details/:key":"channelDetails","!/server/:serverID/channels":"channels","!/server/:serverID/directory(/:key)(/:path)":"directory"}});
return n}),define("hb!templates/desktop/settings/SettingsView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(){return"selected"}function r(){return"hidden"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var o,l,c,d="",u=this,h=n.helperMissing,p=this.escapeExpression;return d+='<ul class="nav nav-header pull-right">\n  <li class="web-nav-item"><a class="btn-gray ',c={"hash":{},"inverse":u.noop,"fn":u.program(1,a,s),"data":s},o=n.if_eq||t&&t.if_eq,l=o?o.call(t,t&&t.subset,"web",c):h.call(t,"if_eq",t&&t.subset,"web",c),(l||0===l)&&(d+=l),d+='" href="#!/settings/web">',c={"hash":{},"data":s},d+=p((o=n.t||t&&t.t,o?o.call(t,"Web",c):h.call(t,"t","Web",c)))+'</a></li>\n  <li class="server-nav-item ',l=n.unless.call(t,t&&t.hasPrimaryServer,{"hash":{},"inverse":u.noop,"fn":u.program(3,r,s),"data":s}),(l||0===l)&&(d+=l),d+='"><a class="btn-gray ',c={"hash":{},"inverse":u.noop,"fn":u.program(1,a,s),"data":s},o=n.if_eq||t&&t.if_eq,l=o?o.call(t,t&&t.subset,"server",c):h.call(t,"if_eq",t&&t.subset,"server",c),(l||0===l)&&(d+=l),d+='" href="#!/settings/server">',c={"hash":{},"data":s},d+=p((o=n.t||t&&t.t,o?o.call(t,"Server",c):h.call(t,"t","Server",c)))+'</a></li>\n  <li class="devices-nav-item ',l=n.unless.call(t,t&&t.signedIn,{"hash":{},"inverse":u.noop,"fn":u.program(3,r,s),"data":s}),(l||0===l)&&(d+=l),d+='"><a class="btn-gray ',c={"hash":{},"inverse":u.noop,"fn":u.program(1,a,s),"data":s},o=n.if_eq||t&&t.if_eq,l=o?o.call(t,t&&t.subset,"devices",c):h.call(t,"if_eq",t&&t.subset,"devices",c),(l||0===l)&&(d+=l),d+='" href="#!/settings/devices">',c={"hash":{},"data":s},d+=p((o=n.t||t&&t.t,o?o.call(t,"Devices",c):h.call(t,"t","Devices",c)))+"</a></li>\n</ul>\n\n<h3>",c={"hash":{},"data":s},d+=p((o=n.t||t&&t.t,o?o.call(t,"Settings",c):h.call(t,"t","Settings",c)))+'</h3>\n\n<div class="settings-container"></div>\n'
})}),define("hb!templates/desktop/settings/WebSettingsView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s,a="";return a+='\n        <li><a class="btn-gray" href="#sync-web-group">',s={"hash":{},"data":t},a+=E((i=n.t||e&&e.t,i?i.call(e,"Sync",s):_.call(e,"t","Sync",s)))+"</a></li>\n      "}function r(e,t){var i,s,a="";return a+='\n            <span class="check-for-updates-container ',(i=n.updateStatus)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.updateStatus,i=typeof i===L?i.call(e,{"hash":{},"data":t}):i),a+=E(i)+'">\n              <a class="check-for-updates-btn label label-btn label-primary" href="#"><i class="label-icon glyphicon upload"></i> ',s={"hash":{},"data":t},a+=E((i=n.t||e&&e.t,i?i.call(e,"Check for Updates",s):_.call(e,"t","Check for Updates",s)))+'</a>\n              <a class="checking-for-updates-btn label label-btn label-primary active" href="#"><i class="label-icon glyphicon upload"></i> ',s={"hash":{},"data":t},a+=E((i=n.t||e&&e.t,i?i.call(e,"Checking for Updates",s):_.call(e,"t","Checking for Updates",s)))+'</a>\n              <a class="download-updates-btn label label-btn label-primary" href="#"><i class="label-icon glyphicon download"></i> ',s={"hash":{},"data":t},a+=E((i=n.t||e&&e.t,i?i.call(e,"Download Updates",s):_.call(e,"t","Download Updates",s)))+'</a>\n              <a class="downloading-updates-btn label label-btn label-primary active" href="#"><i class="label-icon glyphicon download"></i> ',s={"hash":{},"data":t},a+=E((i=n.t||e&&e.t,i?i.call(e,"Downloading Updates",s):_.call(e,"t","Downloading Updates",s)))+'</a>\n              <a class="refresh-updates-btn label label-btn label-primary" href="#"><i class="label-icon glyphicon repeat"></i> ',s={"hash":{},"data":t},a+=E((i=n.t||e&&e.t,i?i.call(e,"Refresh to Apply",s):_.call(e,"t","Refresh to Apply",s)))+'</a>\n              <span class="up-to-date-label"><i class="success-icon glyphicon ok-2"></i> ',s={"hash":{},"data":t},a+=E((i=n.t||e&&e.t,i?i.call(e,"Up to date",s):_.call(e,"t","Up to date",s)))+"</span>\n            </span>\n          "
}function o(e,t,i){var s,a,r,o="";return o+='\n              <option value="',(s=n.value)?s=s.call(e,{"hash":{},"data":t}):(s=e&&e.value,s=typeof s===L?s.call(e,{"hash":{},"data":t}):s),o+=E(s)+'" ',r={"hash":{},"inverse":R.noop,"fn":R.program(6,l,t),"data":t},s=n.if_eq||e&&e.if_eq,a=s?s.call(e,e&&e.value,(s=i&&i.settings,null==s||s===!1?s:s.language),r):_.call(e,"if_eq",e&&e.value,(s=i&&i.settings,null==s||s===!1?s:s.language),r),(a||0===a)&&(o+=a),o+=">\n                ",(a=n.title)?a=a.call(e,{"hash":{},"data":t}):(a=e&&e.title,a=typeof a===L?a.call(e,{"hash":{},"data":t}):a),o+=E(a)+"\n              </option>\n            "
}function l(){return"selected"}function c(){return"checked"}function d(e,t,i){var s,a,r,o="";return o+='\n              <option value="',(s=n.value)?s=s.call(e,{"hash":{},"data":t}):(s=e&&e.value,s=typeof s===L?s.call(e,{"hash":{},"data":t}):s),o+=E(s)+'"',r={"hash":{},"inverse":R.noop,"fn":R.program(11,u,t),"data":t},s=n.if_eq||e&&e.if_eq,a=s?s.call(e,e&&e.value,(s=i&&i.settings,null==s||s===!1?s:s.debugLevel),r):_.call(e,"if_eq",e&&e.value,(s=i&&i.settings,null==s||s===!1?s:s.debugLevel),r),(a||0===a)&&(o+=a),o+=">",r={"hash":{},"data":t},o+=E((s=n.t||e&&e.t,s?s.call(e,e&&e.title,r):_.call(e,"t",e&&e.title,r)))+"</option>\n            "
}function u(){return" selected"}function h(e,t){var i,s,a,r="";return r+='\n          <div class="form-group">\n            <label class="control-label">\n              <input type="checkbox" id="chromecastQA" ',s=n["if"].call(e,(i=e&&e.settings,null==i||i===!1?i:i.chromecastQA),{"hash":{},"inverse":R.noop,"fn":R.program(8,c,t),"data":t}),(s||0===s)&&(r+=s),r+="> ",a={"hash":{},"data":t},r+=E((i=n.t||e&&e.t,i?i.call(e,"Enable Chromecast Testing",a):_.call(e,"t","Enable Chromecast Testing",a)))+'\n            </label>\n            <p class="help-block">',a={"hash":{},"data":t},r+=E((i=n.t||e&&e.t,i?i.call(e,"Refresh after saving this setting for it to take effect.",a):_.call(e,"t","Refresh after saving this setting for it to take effect.",a)))+'</p>\n          </div>\n\n          <div class="form-group">\n            <label for="myPlexUrl">',a={"hash":{},"data":t},r+=E((i=n.t||e&&e.t,i?i.call(e,"myPlex URL",a):_.call(e,"t","myPlex URL",a)))+'</label>\n            <input type="text" id="myPlexUrl" class="form-control" placeholder="https://plex.tv">\n          </div>\n        '
}function p(e,t){var i,s,a="";return a+='\n            <li id="',(i=n.id)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.id,i=typeof i===L?i.call(e,{"hash":{},"data":t}):i),a+=E(i)+'" class="sortable-item">\n              <i class="sortable-icon glyphicon show-lines"></i>\n              <label class="control-label">\n                <input type="checkbox" id="',(i=n.enabledID)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.enabledID,i=typeof i===L?i.call(e,{"hash":{},"data":t}):i),a+=E(i)+'" ',i=n["if"].call(e,e&&e.enabled,{"hash":{},"inverse":R.noop,"fn":R.program(8,c,t),"data":t}),(i||0===i)&&(a+=i),a+="> ",s={"hash":{},"data":t},a+=E((i=n.t||e&&e.t,i?i.call(e,e&&e.title,s):_.call(e,"t",e&&e.title,s)))+"\n              </label>\n            </li>\n          "
}function f(e,t){var i,s,a,r="";return r+="\n          <h4>",a={"hash":{},"data":t},r+=E((i=n.t||e&&e.t,i?i.call(e,"Streaming Quality",a):_.call(e,"t","Streaming Quality",a)))+'</h4>\n\n          <div class="form-group">\n            <label for="localQuality">',a={"hash":{},"data":t},r+=E((i=n.t||e&&e.t,i?i.call(e,"Local Quality",a):_.call(e,"t","Local Quality",a)))+'</label>\n            <select id="localQuality" data-type="int">\n              ',s=n.each.call(e,e&&e.videoQualities,{"hash":{},"inverse":R.noop,"fn":R.programWithDepth(18,m,t,e),"data":t}),(s||0===s)&&(r+=s),r+='\n            </select>\n          </div>\n\n          <div class="form-group">\n            <label for="remoteQuality">',a={"hash":{},"data":t},r+=E((i=n.t||e&&e.t,i?i.call(e,"Remote Quality",a):_.call(e,"t","Remote Quality",a)))+'</label>\n            <select id="remoteQuality" data-type="int">\n              ',s=n.each.call(e,e&&e.videoQualities,{"hash":{},"inverse":R.noop,"fn":R.programWithDepth(20,g,t,e),"data":t}),(s||0===s)&&(r+=s),r+='\n            </select>\n          </div>\n\n          <div class="form-group">\n            <label for="channelQuality">',a={"hash":{},"data":t},r+=E((i=n.t||e&&e.t,i?i.call(e,"Channel Quality",a):_.call(e,"t","Channel Quality",a)))+'</label>\n            <select id="channelQuality" data-type="int">\n              ',s=n.each.call(e,e&&e.videoQualities,{"hash":{},"inverse":R.noop,"fn":R.programWithDepth(22,v,t,e),"data":t}),(s||0===s)&&(r+=s),r+="\n            </select>\n          </div>\n        "
}function m(e,t,i){var s,a,r,o="";return o+='\n                <option value="'+E((s=e&&e[0],typeof s===L?s.apply(e):s))+'" ',r={"hash":{},"inverse":R.noop,"fn":R.program(6,l,t),"data":t},s=n.if_eq||e&&e.if_eq,a=s?s.call(e,e&&e[0],(s=i&&i.settings,null==s||s===!1?s:s.localQuality),r):_.call(e,"if_eq",e&&e[0],(s=i&&i.settings,null==s||s===!1?s:s.localQuality),r),(a||0===a)&&(o+=a),o+=">\n                  ",r={"hash":{},"data":t},o+=E((s=n.formatVideoQuality||e&&e.formatVideoQuality,s?s.call(e,e,r):_.call(e,"formatVideoQuality",e,r)))+"\n                </option>\n              "
}function g(e,t,i){var s,a,r,o="";return o+='\n                <option value="'+E((s=e&&e[0],typeof s===L?s.apply(e):s))+'" ',r={"hash":{},"inverse":R.noop,"fn":R.program(6,l,t),"data":t},s=n.if_eq||e&&e.if_eq,a=s?s.call(e,e&&e[0],(s=i&&i.settings,null==s||s===!1?s:s.remoteQuality),r):_.call(e,"if_eq",e&&e[0],(s=i&&i.settings,null==s||s===!1?s:s.remoteQuality),r),(a||0===a)&&(o+=a),o+=">\n                  ",r={"hash":{},"data":t},o+=E((s=n.formatVideoQuality||e&&e.formatVideoQuality,s?s.call(e,e,r):_.call(e,"formatVideoQuality",e,r)))+"\n                </option>\n              "
}function v(e,t,i){var s,a,r,o="";return o+='\n                <option value="'+E((s=e&&e[0],typeof s===L?s.apply(e):s))+'" ',r={"hash":{},"inverse":R.noop,"fn":R.program(6,l,t),"data":t},s=n.if_eq||e&&e.if_eq,a=s?s.call(e,e&&e[0],(s=i&&i.settings,null==s||s===!1?s:s.channelQuality),r):_.call(e,"if_eq",e&&e[0],(s=i&&i.settings,null==s||s===!1?s:s.channelQuality),r),(a||0===a)&&(o+=a),o+=">\n                  ",r={"hash":{},"data":t},o+=E((s=n.formatVideoQuality||e&&e.formatVideoQuality,s?s.call(e,e,r):_.call(e,"formatVideoQuality",e,r)))+"\n                </option>\n              "
}function y(e,t){var i,s,a,r="";return r+="\n          ",i=n["if"].call(e,e&&e.showExperimentalPlayer,{"hash":{},"inverse":R.noop,"fn":R.program(25,b,t),"data":t}),(i||0===i)&&(r+=i),r+='\n\n          <div class="form-group advanced-setting">\n            <label class="control-label">\n              <input type="checkbox" id="directPlay" ',s=n["if"].call(e,(i=e&&e.settings,null==i||i===!1?i:i.directPlay),{"hash":{},"inverse":R.noop,"fn":R.program(8,c,t),"data":t}),(s||0===s)&&(r+=s),r+="> ",a={"hash":{},"data":t},r+=E((i=n.t||e&&e.t,i?i.call(e,"Direct Play",a):_.call(e,"t","Direct Play",a)))+'\n            </label>\n            <p class="help-block">',a={"hash":{},"data":t},r+=E((i=n.t||e&&e.t,i?i.call(e,"Allows the player to play compatible media without any conversion. In most browsers, direct play supports MP4 videos with h264 video and AAC audio. Videos with subtitles cannot be played directly.",a):_.call(e,"t","Allows the player to play compatible media without any conversion. In most browsers, direct play supports MP4 videos with h264 video and AAC audio. Videos with subtitles cannot be played directly.",a)))+'</p>\n          </div>\n\n          <div class="form-group advanced-setting">\n            <label class="control-label">\n              <input type="checkbox" id="directStream" ',s=n["if"].call(e,(i=e&&e.settings,null==i||i===!1?i:i.directStream),{"hash":{},"inverse":R.noop,"fn":R.program(8,c,t),"data":t}),(s||0===s)&&(r+=s),r+="> ",a={"hash":{},"data":t},r+=E((i=n.t||e&&e.t,i?i.call(e,"Direct Stream",a):_.call(e,"t","Direct Stream",a)))+'\n            </label>\n            <p class="help-block">',a={"hash":{},"data":t},r+=E((i=n.t||e&&e.t,i?i.call(e,"Allows the server to copy compatible audio and video streams without converting them.",a):_.call(e,"t","Allows the server to copy compatible audio and video streams without converting them.",a)))+"</p>\n          </div>\n        "
}function b(e,t){var i,s,a,r="";return r+='\n            <div class="form-group">\n              <label class="control-label">\n                <input type="checkbox" id="dash" ',s=n["if"].call(e,(i=e&&e.settings,null==i||i===!1?i:i.dash),{"hash":{},"inverse":R.noop,"fn":R.program(8,c,t),"data":t}),(s||0===s)&&(r+=s),r+="> ",a={"hash":{},"data":t},r+=E((i=n.t||e&&e.t,i?i.call(e,"Experimental Player",a):_.call(e,"t","Experimental Player",a)))+'\n              </label>\n              <p class="help-block">',a={"hash":{},"data":t},r+=E((i=n.t||e&&e.t,i?i.call(e,"Use the experimental video player, which supports streaming to the HTML5 video element instead of the Flash player. Requires Plex Media Server 0.9.8.6 or later.",a):_.call(e,"t","Use the experimental video player, which supports streaming to the HTML5 video element instead of the Flash player. Requires Plex Media Server 0.9.8.6 or later.",a)))+"</p>\n            </div>\n          "
}function w(e,t){var i,s,a,r="";return r+='\n          <div class="form-group advanced-setting">\n            <label class="control-label">\n              <input type="checkbox" id="allowAC3" ',s=n["if"].call(e,(i=e&&e.settings,null==i||i===!1?i:i.allowAC3),{"hash":{},"inverse":R.noop,"fn":R.program(8,c,t),"data":t}),(s||0===s)&&(r+=s),r+="> ",a={"hash":{},"data":t},r+=E((i=n.t||e&&e.t,i?i.call(e,"Allow Direct Play of AC3 Audio",a):_.call(e,"t","Allow Direct Play of AC3 Audio",a)))+'\n            </label>\n            <p class="help-block">',a={"hash":{},"data":t},r+=E((i=n.t||e&&e.t,i?i.call(e,"Allow MP4 videos with AC3 audio to be played directly. Browser support for AC3 audio is limited.",a):_.call(e,"t","Allow MP4 videos with AC3 audio to be played directly. Browser support for AC3 audio is limited.",a)))+'</p>\n          </div>\n\n          <div class="form-group advanced-setting">\n            <label class="control-label">\n              <input type="checkbox" id="preferAAC" ',s=n["if"].call(e,(i=e&&e.settings,null==i||i===!1?i:i.preferAAC),{"hash":{},"inverse":R.noop,"fn":R.program(8,c,t),"data":t}),(s||0===s)&&(r+=s),r+="> ",a={"hash":{},"data":t},r+=E((i=n.t||e&&e.t,i?i.call(e,"Prefer AAC Audio",a):_.call(e,"t","Prefer AAC Audio",a)))+'\n            </label>\n            <p class="help-block">',a={"hash":{},"data":t},r+=E((i=n.t||e&&e.t,i?i.call(e,"Prefer AAC over MP3 when transcoding audio. Some devices, like the Wii U, only support HLS with AAC audio.",a):_.call(e,"t","Prefer AAC over MP3 when transcoding audio. Some devices, like the Wii U, only support HLS with AAC audio.",a)))+'</p>\n          </div>\n\n          <div class="form-group">\n            <label for="subtitleSize">',a={"hash":{},"data":t},r+=E((i=n.t||e&&e.t,i?i.call(e,"Subtitle Size",a):_.call(e,"t","Subtitle Size",a)))+'</label>\n            <select id="subtitleSize" data-type="int">\n              ',s=n.each.call(e,e&&e.subtitleSizes,{"hash":{},"inverse":R.noop,"fn":R.programWithDepth(28,x,t,e),"data":t}),(s||0===s)&&(r+=s),r+='\n            </select>\n          </div>\n\n          <div class="form-group">\n            <label for="audioBoost">',a={"hash":{},"data":t},r+=E((i=n.t||e&&e.t,i?i.call(e,"Audio Boost",a):_.call(e,"t","Audio Boost",a)))+'</label>\n            <select id="audioBoost" data-type="int">\n              ',s=n.each.call(e,e&&e.audioLevels,{"hash":{},"inverse":R.noop,"fn":R.programWithDepth(30,k,t,e),"data":t}),(s||0===s)&&(r+=s),r+="\n            </select>\n          </div>\n        "
}function x(e,t,i){var s,a,r,o="";return o+='\n                <option value="',(s=n.value)?s=s.call(e,{"hash":{},"data":t}):(s=e&&e.value,s=typeof s===L?s.call(e,{"hash":{},"data":t}):s),o+=E(s)+'"',r={"hash":{},"inverse":R.noop,"fn":R.program(11,u,t),"data":t},s=n.if_eq||e&&e.if_eq,a=s?s.call(e,e&&e.value,(s=i&&i.settings,null==s||s===!1?s:s.subtitleSize),r):_.call(e,"if_eq",e&&e.value,(s=i&&i.settings,null==s||s===!1?s:s.subtitleSize),r),(a||0===a)&&(o+=a),o+=">",r={"hash":{},"data":t},o+=E((s=n.t||e&&e.t,s?s.call(e,e&&e.title,r):_.call(e,"t",e&&e.title,r)))+"</option>\n              "
}function k(e,t,i){var s,a,r,o="";return o+='\n                <option value="',(s=n.value)?s=s.call(e,{"hash":{},"data":t}):(s=e&&e.value,s=typeof s===L?s.call(e,{"hash":{},"data":t}):s),o+=E(s)+'"',r={"hash":{},"inverse":R.noop,"fn":R.program(11,u,t),"data":t},s=n.if_eq||e&&e.if_eq,a=s?s.call(e,e&&e.value,(s=i&&i.settings,null==s||s===!1?s:s.audioBoost),r):_.call(e,"if_eq",e&&e.value,(s=i&&i.settings,null==s||s===!1?s:s.audioBoost),r),(a||0===a)&&(o+=a),o+=">",r={"hash":{},"data":t},o+=E((s=n.t||e&&e.t,s?s.call(e,e&&e.title,r):_.call(e,"t",e&&e.title,r)))+"</option>\n              "
}function S(e,t){var i,s,a,r="";return r+='\n        <div id="sync-web-group" class="settings-group">\n          <h4>',a={"hash":{},"data":t},r+=E((i=n.t||e&&e.t,i?i.call(e,"Default Quality",a):_.call(e,"t","Default Quality",a)))+'</h4>\n\n          <div class="form-group">\n            <label for="syncVideoQuality">',a={"hash":{},"data":t},r+=E((i=n.t||e&&e.t,i?i.call(e,"Video",a):_.call(e,"t","Video",a)))+'</label>\n            <select id="syncVideoQuality">\n              ',s=n.each.call(e,e&&e.syncQualities,{"hash":{},"inverse":R.noop,"fn":R.programWithDepth(33,C,t,e),"data":t}),(s||0===s)&&(r+=s),r+='\n            </select>\n          </div>\n\n          <div class="form-group">\n            <label for="syncAudioQuality">',a={"hash":{},"data":t},r+=E((i=n.t||e&&e.t,i?i.call(e,"Audio",a):_.call(e,"t","Audio",a)))+'</label>\n            <select id="syncAudioQuality">\n              ',s=n.each.call(e,e&&e.syncQualities,{"hash":{},"inverse":R.noop,"fn":R.programWithDepth(35,T,t,e),"data":t}),(s||0===s)&&(r+=s),r+='\n            </select>\n          </div>\n\n          <div class="form-group">\n            <label for="syncPictureQuality">',a={"hash":{},"data":t},r+=E((i=n.t||e&&e.t,i?i.call(e,"Photo",a):_.call(e,"t","Photo",a)))+'</label>\n            <select id="syncPictureQuality">\n              ',s=n.each.call(e,e&&e.syncQualities,{"hash":{},"inverse":R.noop,"fn":R.programWithDepth(37,A,t,e),"data":t}),(s||0===s)&&(r+=s),r+="\n            </select>\n          </div>\n        </div>\n      "
}function C(e,t,i){var s,a,r,o="";return o+='\n                <option value="',(s=n.key)?s=s.call(e,{"hash":{},"data":t}):(s=e&&e.key,s=typeof s===L?s.call(e,{"hash":{},"data":t}):s),o+=E(s)+'"',r={"hash":{},"inverse":R.noop,"fn":R.program(11,u,t),"data":t},s=n.if_eq||e&&e.if_eq,a=s?s.call(e,e&&e.key,(s=i&&i.settings,null==s||s===!1?s:s.syncVideoQuality),r):_.call(e,"if_eq",e&&e.key,(s=i&&i.settings,null==s||s===!1?s:s.syncVideoQuality),r),(a||0===a)&&(o+=a),o+=">",r={"hash":{},"data":t},o+=E((s=n.t||e&&e.t,s?s.call(e,e&&e.title,r):_.call(e,"t",e&&e.title,r)))+"</option>\n              "
}function T(e,t,i){var s,a,r,o="";return o+='\n                <option value="',(s=n.key)?s=s.call(e,{"hash":{},"data":t}):(s=e&&e.key,s=typeof s===L?s.call(e,{"hash":{},"data":t}):s),o+=E(s)+'"',r={"hash":{},"inverse":R.noop,"fn":R.program(11,u,t),"data":t},s=n.if_eq||e&&e.if_eq,a=s?s.call(e,e&&e.key,(s=i&&i.settings,null==s||s===!1?s:s.syncAudioQuality),r):_.call(e,"if_eq",e&&e.key,(s=i&&i.settings,null==s||s===!1?s:s.syncAudioQuality),r),(a||0===a)&&(o+=a),o+=">",r={"hash":{},"data":t},o+=E((s=n.t||e&&e.t,s?s.call(e,e&&e.title,r):_.call(e,"t",e&&e.title,r)))+"</option>\n              "
}function A(e,t,i){var s,a,r,o="";return o+='\n                <option value="',(s=n.key)?s=s.call(e,{"hash":{},"data":t}):(s=e&&e.key,s=typeof s===L?s.call(e,{"hash":{},"data":t}):s),o+=E(s)+'"',r={"hash":{},"inverse":R.noop,"fn":R.program(11,u,t),"data":t},s=n.if_eq||e&&e.if_eq,a=s?s.call(e,e&&e.key,(s=i&&i.settings,null==s||s===!1?s:s.syncPictureQuality),r):_.call(e,"if_eq",e&&e.key,(s=i&&i.settings,null==s||s===!1?s:s.syncPictureQuality),r),(a||0===a)&&(o+=a),o+=">",r={"hash":{},"data":t},o+=E((s=n.t||e&&e.t,s?s.call(e,e&&e.title,r):_.call(e,"t",e&&e.title,r)))+"</option>\n              "
}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var I,P,M,D="",_=n.helperMissing,E=this.escapeExpression,L="function",R=this;return D+='<div class="filter-bar">\n  <button class="toggle-advanced-btn btn btn-sm btn-default pull-right basic-setting">',M={"hash":{},"data":s},D+=E((I=n.t||t&&t.t,I?I.call(t,"Show Advanced",M):_.call(t,"t","Show Advanced",M)))+'</button>\n  <button class="toggle-advanced-btn btn btn-sm btn-default pull-right advanced-setting">',M={"hash":{},"data":s},D+=E((I=n.t||t&&t.t,I?I.call(t,"Hide Advanced",M):_.call(t,"t","Hide Advanced",M)))+'</button>\n</div>\n\n<div class="row">\n  <div class="col-sm-4 col-md-3">\n    <ul class="settings-nav nav nav-stacked nav-sidebar">\n      <li><a class="btn-gray selected" href="#general-web-group">',M={"hash":{},"data":s},D+=E((I=n.t||t&&t.t,I?I.call(t,"General",M):_.call(t,"t","General",M)))+'</a></li>\n      <li class="advanced-setting"><a class="btn-gray" href="#debug-web-group">',M={"hash":{},"data":s},D+=E((I=n.t||t&&t.t,I?I.call(t,"Debug",M):_.call(t,"t","Debug",M)))+'</a></li>\n      <li><a class="btn-gray" href="#dashboard-web-group">',M={"hash":{},"data":s},D+=E((I=n.t||t&&t.t,I?I.call(t,"Dashboard",M):_.call(t,"t","Dashboard",M)))+'</a></li>\n      <li><a class="btn-gray" href="#search-web-group">',M={"hash":{},"data":s},D+=E((I=n.t||t&&t.t,I?I.call(t,"Search",M):_.call(t,"t","Search",M)))+'</a></li>\n      <li><a class="btn-gray" href="#player-web-group">',M={"hash":{},"data":s},D+=E((I=n.t||t&&t.t,I?I.call(t,"Player",M):_.call(t,"t","Player",M)))+"</a></li>\n      ",P=n["if"].call(t,t&&t.hasPlexPass,{"hash":{},"inverse":R.noop,"fn":R.program(1,a,s),"data":s}),(P||0===P)&&(D+=P),D+='\n    </ul>\n  </div>\n\n  <div class="col-sm-8 col-md-9">\n    <form id="web-settings-form">\n      <div id="general-web-group" class="settings-group active">\n        <h4 class="version-title">\n          ',M={"hash":{},"data":s},D+=E((I=n.t||t&&t.t,I?I.call(t,"Version",M):_.call(t,"t","Version",M)))+" ",(P=n.version)?P=P.call(t,{"hash":{},"data":s}):(P=t&&t.version,P=typeof P===L?P.call(t,{"hash":{},"data":s}):P),D+=E(P)+"\n\n          ",P=n["if"].call(t,t&&t.showBundleUpdate,{"hash":{},"inverse":R.noop,"fn":R.program(3,r,s),"data":s}),(P||0===P)&&(D+=P),D+='\n        </h4>\n\n        <div class="form-group">\n          <label for="language">',M={"hash":{},"data":s},D+=E((I=n.t||t&&t.t,I?I.call(t,"Language",M):_.call(t,"t","Language",M)))+'</label>\n          <select id="language">\n            ',P=n.each.call(t,t&&t.languages,{"hash":{},"inverse":R.noop,"fn":R.programWithDepth(5,o,s,t),"data":s}),(P||0===P)&&(D+=P),D+='\n          </select>\n          <p class="help-block">',M={"hash":{},"data":s},D+=E((I=n.t||t&&t.t,I?I.call(t,"Help us translate Plex/Web into your language {1}here{2}.","<a href='https://getlocalization.com/plexweb' target='_blank'>","</a>",M):_.call(t,"t","Help us translate Plex/Web into your language {1}here{2}.","<a href='https://getlocalization.com/plexweb' target='_blank'>","</a>",M)))+'</p>\n        </div>\n\n        <div class="form-group">\n          <label class="control-label">\n            <input type="checkbox" id="playThemeMusic" ',P=n["if"].call(t,(I=t&&t.settings,null==I||I===!1?I:I.playThemeMusic),{"hash":{},"inverse":R.noop,"fn":R.program(8,c,s),"data":s}),(P||0===P)&&(D+=P),D+="> ",M={"hash":{},"data":s},D+=E((I=n.t||t&&t.t,I?I.call(t,"Play Theme Music",M):_.call(t,"t","Play Theme Music",M)))+'\n          </label>\n          <p class="help-block">',M={"hash":{},"data":s},D+=E((I=n.t||t&&t.t,I?I.call(t,"Automatically play theme music in the background when available.",M):_.call(t,"t","Automatically play theme music in the background when available.",M)))+'</p>\n        </div>\n\n        <div class="form-group">\n          <label class="control-label">\n            <input type="checkbox" id="showUnwatchedIcons" ',P=n["if"].call(t,(I=t&&t.settings,null==I||I===!1?I:I.showUnwatchedIcons),{"hash":{},"inverse":R.noop,"fn":R.program(8,c,s),"data":s}),(P||0===P)&&(D+=P),D+="> ",M={"hash":{},"data":s},D+=E((I=n.t||t&&t.t,I?I.call(t,"Show Unwatched Icons",M):_.call(t,"t","Show Unwatched Icons",M)))+'\n          </label>\n          <p class="help-block">',M={"hash":{},"data":s},D+=E((I=n.t||t&&t.t,I?I.call(t,"Show unwatched icons in list items.",M):_.call(t,"t","Show unwatched icons in list items.",M)))+'</p>\n        </div>\n\n        <div class="form-group">\n          <label class="control-label">\n            <input type="checkbox" id="keyboardShortcuts" ',P=n["if"].call(t,(I=t&&t.settings,null==I||I===!1?I:I.keyboardShortcuts),{"hash":{},"inverse":R.noop,"fn":R.program(8,c,s),"data":s}),(P||0===P)&&(D+=P),D+="> ",M={"hash":{},"data":s},D+=E((I=n.t||t&&t.t,I?I.call(t,"Enable Keyboard Shortcuts",M):_.call(t,"t","Enable Keyboard Shortcuts",M)))+'\n          </label>\n          <p class="help-block">',M={"hash":{},"data":s},D+=E((I=n.t||t&&t.t,I?I.call(t,"Press ? to view the list of {1}available shortcuts{2}.","<a class='keyboard-shortcuts-btn' href='#'>","</a>",M):_.call(t,"t","Press ? to view the list of {1}available shortcuts{2}.","<a class='keyboard-shortcuts-btn' href='#'>","</a>",M)))+'</p>\n        </div>\n      </div>\n\n      <div id="debug-web-group" class="settings-group">\n        <div class="form-group">\n          <label for="debugLevel">',M={"hash":{},"data":s},D+=E((I=n.t||t&&t.t,I?I.call(t,"Debug Level",M):_.call(t,"t","Debug Level",M)))+'</label>\n          <select id="debugLevel" data-type="int">\n            ',P=n.each.call(t,t&&t.debugLevels,{"hash":{},"inverse":R.noop,"fn":R.programWithDepth(10,d,s,t),"data":s}),(P||0===P)&&(D+=P),D+='\n          </select>\n          <p class="help-block">',M={"hash":{},"data":s},D+=E((I=n.t||t&&t.t,I?I.call(t,"You can view the debug logs {1}here{2}.","<a href='#!/logs'>","</a>",M):_.call(t,"t","You can view the debug logs {1}here{2}.","<a href='#!/logs'>","</a>",M)))+"</p>\n        </div>\n\n        ",P=n["if"].call(t,t&&t.isNinja,{"hash":{},"inverse":R.noop,"fn":R.program(13,h,s),"data":s}),(P||0===P)&&(D+=P),D+='\n      </div>\n\n      <div id="dashboard-web-group" class="settings-group">\n        <p class="help-block">',M={"hash":{},"data":s},D+=E((I=n.t||t&&t.t,I?I.call(t,"Drag the items below to reorder your dashboard content.",M):_.call(t,"t","Drag the items below to reorder your dashboard content.",M)))+'</p>\n\n        <ul class="list sortable-list dashboard-list">\n          ',P=n.each.call(t,t&&t.dashboardPriorities,{"hash":{},"inverse":R.noop,"fn":R.program(15,p,s),"data":s}),(P||0===P)&&(D+=P),D+='\n        </ul>\n      </div>\n\n      <div id="search-web-group" class="settings-group">\n        <div class="form-group">\n          <label class="control-label">\n            <input type="checkbox" id="sharedSearch" ',P=n["if"].call(t,(I=t&&t.settings,null==I||I===!1?I:I.sharedSearch),{"hash":{},"inverse":R.noop,"fn":R.program(8,c,s),"data":s}),(P||0===P)&&(D+=P),D+="> ",M={"hash":{},"data":s},D+=E((I=n.t||t&&t.t,I?I.call(t,"Search Shared Libraries",M):_.call(t,"t","Search Shared Libraries",M)))+'\n          </label>\n          <p class="help-block">',M={"hash":{},"data":s},D+=E((I=n.t||t&&t.t,I?I.call(t,"Allow searching libraries that have been shared with you.",M):_.call(t,"t","Allow searching libraries that have been shared with you.",M)))+'</p>\n        </div>\n\n        <div class="form-group">\n          <label class="control-label">\n            <input type="checkbox" id="channelSearch" ',P=n["if"].call(t,(I=t&&t.settings,null==I||I===!1?I:I.channelSearch),{"hash":{},"inverse":R.noop,"fn":R.program(8,c,s),"data":s}),(P||0===P)&&(D+=P),D+="> ",M={"hash":{},"data":s},D+=E((I=n.t||t&&t.t,I?I.call(t,"Search Channels",M):_.call(t,"t","Search Channels",M)))+'\n          </label>\n          <p class="help-block">',M={"hash":{},"data":s},D+=E((I=n.t||t&&t.t,I?I.call(t,"Allow searching channels that have enabled search.",M):_.call(t,"t","Allow searching channels that have enabled search.",M)))+'</p>\n        </div>\n      </div>\n\n      <div id="player-web-group" class="settings-group">\n        ',P=n["if"].call(t,t&&t.hasVideoQualities,{"hash":{},"inverse":R.noop,"fn":R.program(17,f,s),"data":s}),(P||0===P)&&(D+=P),D+="\n\n        ",P=n["if"].call(t,t&&t.hasVideoTranscoder,{"hash":{},"inverse":R.noop,"fn":R.program(24,y,s),"data":s}),(P||0===P)&&(D+=P),D+='\n\n        <div class="form-group">\n          <label class="control-label">\n            <input type="checkbox" id="autoResolution" ',P=n["if"].call(t,(I=t&&t.settings,null==I||I===!1?I:I.autoResolution),{"hash":{},"inverse":R.noop,"fn":R.program(8,c,s),"data":s}),(P||0===P)&&(D+=P),D+="> ",M={"hash":{},"data":s},D+=E((I=n.t||t&&t.t,I?I.call(t,"Automatically Select Resolution",M):_.call(t,"t","Automatically Select Resolution",M)))+'\n          </label>\n          <p class="help-block">',M={"hash":{},"data":s},D+=E((I=n.t||t&&t.t,I?I.call(t,"When multiple resolutions are available for a video, automatically use the best resolution below the maximum quality.",M):_.call(t,"t","When multiple resolutions are available for a video, automatically use the best resolution below the maximum quality.",M)))+"</p>\n        </div>\n\n        ",P=n["if"].call(t,t&&t.hasVideoTranscoder,{"hash":{},"inverse":R.noop,"fn":R.program(27,w,s),"data":s}),(P||0===P)&&(D+=P),D+="\n      </div>\n\n      ",P=n["if"].call(t,t&&t.hasPlexPass,{"hash":{},"inverse":R.noop,"fn":R.program(32,S,s),"data":s}),(P||0===P)&&(D+=P),D+='\n\n      <div class="form-footer">\n        <button type="submit" class="submit-btn btn btn-lg btn-primary btn-loading disabled">\n          <div class="loading loading-sm"></div>\n          <span class="btn-label">',M={"hash":{},"data":s},D+=E((I=n.t||t&&t.t,I?I.call(t,"Save Changes",M):_.call(t,"t","Save Changes",M)))+'</span>\n        </button>\n\n        <span class="form-message"></span>\n      </div>\n    </form>\n  </div>\n</div>\n'
})}),define("hb!templates/desktop/modals/KeyboardShortcutsModal",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s="";return s+='\n        <h5 class="keyboard-shortcuts-header">',(i=n.label)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.label,i=typeof i===u?i.call(e,{"hash":{},"data":t}):i),s+=h(i)+'</h5>\n\n        <ul class="list">\n          ',i=n.each.call(e,e&&e.shortcuts,{"hash":{},"inverse":f.noop,"fn":f.program(2,r,t),"data":t}),(i||0===i)&&(s+=i),s+="\n        </ul>\n      "
}function r(e,t){var i,s,a="";return a+='\n            <li>\n              <span class="keyboard-shortcuts-key-container">\n                <span class="keyboard-shortcuts-key">',(i=n.key)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.key,i=typeof i===u?i.call(e,{"hash":{},"data":t}):i),a+=h(i)+'</span>\n              </span>\n              <span class="text-muted">',s={"hash":{},"data":t},a+=h((i=n.t||e&&e.t,i?i.call(e,e&&e.label,s):p.call(e,"t",e&&e.label,s)))+"</span>\n            </li>\n          "
}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var o,l,c,d="",u="function",h=this.escapeExpression,p=n.helperMissing,f=this;return d+='<div class="modal-dialog">\n  <div class="modal-content">\n    <div class="modal-header">\n      <button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button>\n      <h4 class="modal-title">\n        <i class="modal-icon glyphicon keyboard-wireless"></i>\n        ',c={"hash":{},"data":s},d+=h((o=n.t||t&&t.t,o?o.call(t,"Keyboard Shortcuts",c):p.call(t,"t","Keyboard Shortcuts",c)))+'\n      </h4>\n    </div>\n\n    <div class="modal-body modal-body-scroll minimal-scroll">\n      ',l=n.each.call(t,t&&t.groups,{"hash":{},"inverse":f.noop,"fn":f.program(1,a,s),"data":s}),(l||0===l)&&(d+=l),d+="\n    </div>\n  </div>\n</div>\n"
})}),define("plex/desktop/views/modals/KeyboardShortcutsModal",["hb!templates/desktop/modals/KeyboardShortcutsModal.tpl","underscore","plex/desktop/utils/KeyboardShortcuts","plex/desktop/views/modals/BaseModal"],function(e,t,n,i){var s=i.extend({"name":"keyboardShortcutsModal","className":"keyboard-shortcuts-modal modal fade","template":e,"orderedGroups":[{"group":"navigation","label":"Navigation"},{"group":"actions","label":"Actions"},{"group":"player","label":"Player"}],"initialize":function(e){this.shortcuts=e.shortcuts
},"serializeData":function(){var e={};t.each(this.shortcuts,function(t){var n=t.group;e[n]||(e[n]=[]),e[n].push(this.humanizeShortcut(t))},this);var n=t.map(this.orderedGroups,function(n){var i=t.clone(n);return i.shortcuts=e[n.group],i},this);return{"groups":n}},"humanizeShortcut":function(e){e=t.clone(e);var n=e.key;return n=n.replace(/(.+) (.+)/,"$1 then $2"),n=n.replace(/(.+)\+(\S+)/,"$1 + $2"),n=n.replace(/(.+)\,(.+)/,"$1 or $2"),e.key=n,e},"onRender":function(){i.prototype.onRender.apply(this,arguments)
}});return s}),define("plex/desktop/utils/KeyboardShortcuts",["underscore","plex/base/utils/Dispatcher","plex/base/utils/BaseClass","plex/desktop/views/modals/KeyboardShortcutsModal"],function(e,t,n,i){var s=n.extend({"shortcuts":[{"key":"?","fn":"help","group":"navigation","label":"Open Keyboard Shortcuts"},{"key":"esc","fn":"escape","group":"navigation","label":"Close Modal or Close Player or Navigate Back"},{"key":"`","fn":"sidebar","group":"navigation","label":"Toggle Sidebar"},{"key":"g d","fn":"dashboard","group":"navigation","label":"Navigate to Dashboard"},{"key":"g s","fn":"settings","group":"navigation","label":"Navigate to Settings"},{"key":"g a","fn":"activity","group":"navigation","label":"Navigate to Activity"},{"key":"g q","fn":"queue","group":"navigation","label":"Navigate to Queue"},{"key":"g r","fn":"recommendations","group":"navigation","label":"Navigate to Recommended"},{"key":"g f","fn":"friends","group":"navigation","label":"Navigate to Friends"},{"key":"/","fn":"search","group":"actions","label":"Focus Search"},{"key":"p","fn":"play","group":"actions","label":"Open Player"},{"key":"e","fn":"edit","group":"actions","label":"Edit Library or Edit Item"},{"key":"#,del","fn":"remove","group":"actions","label":"Delete Library or Delete Item"},{"key":"shift+s","fn":"save","group":"actions","label":"Save Changes"},{"key":"r","fn":"refresh","group":"actions","label":"Update Library or Refresh Item"},{"key":"a","fn":"analyze","group":"actions","label":"Analyze Library or Analyze Item"},{"key":"w","fn":"markWatched","group":"actions","label":"Mark as Watched"},{"key":"u","fn":"markUnwatched","group":"actions","label":"Mark as Unwatched"},{"key":"s","fn":"sync","group":"actions","label":"Sync"},{"key":"i","fn":"info","group":"actions","label":"Info"},{"key":"space","fn":"playPause","group":"player","label":"Play or Pause"},{"key":"down","fn":"decreaseVolume","group":"player","label":"Decrease Volume"},{"key":"up","fn":"increaseVolume","group":"player","label":"Increase Volume"},{"key":",","fn":"seekBackward","group":"player","label":"Seek Backward (10 seconds)"},{"key":".","fn":"seekForward","group":"player","label":"Seek Forward (10 seconds)"},{"key":"[","fn":"stepBackward","group":"player","label":"Step Backward (10%)"},{"key":"]","fn":"stepForward","group":"player","label":"Step Forward (10%)"},{"key":"left","fn":"skipPrevious","group":"player","label":"Skip to Previous Item"},{"key":"right","fn":"skipNext","group":"player","label":"Skip to Next Item"}],"hasListener":function(n){var i=t._events[n];
return e.isArray(i)&&i.length>0},"help":function(){t.trigger("show:modal",new i({"shortcuts":this.shortcuts}))},"escape":function(){t.trigger(this.hasListener("shortcut:escape")?"shortcut:escape":this.hasListener("shortcut:stop")?"shortcut:stop":"navigate:back")},"sidebar":function(){t.trigger("shortcut:sidebar")},"dashboard":function(){t.trigger("navigate","dashboard")},"settings":function(){t.trigger("navigate","settings")},"activity":function(){t.trigger("navigate","activity")},"queue":function(){t.trigger("navigate","playlist",{"key":"queue"})
},"recommendations":function(){t.trigger("navigate","playlist",{"key":"recommendations"})},"friends":function(){t.trigger("navigate","friends")},"search":function(){return t.trigger("shortcut:search"),!1},"edit":function(){t.trigger("shortcut:edit")},"play":function(){t.trigger("shortcut:play")},"remove":function(){t.trigger("shortcut:delete")},"save":function(){t.trigger("shortcut:save")},"refresh":function(){t.trigger("shortcut:refresh")},"analyze":function(){t.trigger("shortcut:analyze")},"markWatched":function(){t.trigger("shortcut:markWatched")
},"markUnwatched":function(){t.trigger("shortcut:markUnwatched")},"sync":function(){t.trigger("shortcut:sync")},"info":function(){t.trigger("shortcut:info")},"playPause":function(){return this.hasListener("shortcut:playPause")?(t.trigger("shortcut:playPause"),!1):void 0},"decreaseVolume":function(){return this.hasListener("shortcut:decreaseVolume")?(t.trigger("shortcut:decreaseVolume"),!1):void 0},"increaseVolume":function(){return this.hasListener("shortcut:increaseVolume")?(t.trigger("shortcut:increaseVolume"),!1):void 0
},"seekBackward":function(){t.trigger("shortcut:seekBackward")},"seekForward":function(){t.trigger("shortcut:seekForward")},"stepBackward":function(){t.trigger("shortcut:stepBackward")},"stepForward":function(){t.trigger("shortcut:stepForward")},"skipPrevious":function(){return this.hasListener("shortcut:skipPrevious")?(t.trigger("shortcut:skipPrevious"),!1):void 0},"skipNext":function(){return this.hasListener("shortcut:skipNext")?(t.trigger("shortcut:skipNext"),!1):void 0}});return s}),define("plex/base/utils/types/SyncQualities",["underscore","plex/base/utils/BaseClass"],function(e,t){var n=t.extend({"qualities":[{"key":"low","title":"Low","videoQuality":24,"videoResolutionFactor":.5,"photoQuality":24,"musicBitrate":96},{"key":"medium","title":"Medium","videoQuality":49,"videoResolutionFactor":.75,"photoQuality":49,"musicBitrate":128},{"key":"high","title":"High","videoQuality":74,"videoResolutionFactor":1,"photoQuality":74,"musicBitrate":192},{"key":"highest","title":"Highest","videoQuality":99,"photoQuality":99,"musicBitrate":320}],"initialize":function(){this.byKey=e.reduce(this.qualities,function(e,t){return e[t.key]=t,e
},{})},"getQuality":function(e){return this.byKey[e]},"getQualityByVideoQuality":function(e){return 25>=e?this.byKey.low:50>=e?this.byKey.medium:75>=e?this.byKey.high:this.byKey.highest}});return new n}),define("plex/desktop/views/settings/WebSettingsView",["hb!templates/desktop/settings/WebSettingsView.tpl","underscore","jquery","marionette","sortable","plex/base/utils/Dispatcher","plex/base/utils/Capabilities","plex/base/utils/LanguageUtil","plex/desktop/utils/KeyboardShortcuts","plex/base/utils/types/SyncQualities","plex/base/adapters/LocalizerAdapter","plex/base/commands/Commands","plex/base/models/AppModel","plex/base/models/ConfigModel","plex/desktop/views/modals/KeyboardShortcutsModal"],function(e,t,n,i,s,a,r,o,l,c,d,u,h,p,f){var m=[{"value":0,"title":"Disabled"},{"value":1,"title":"Enabled"},{"value":2,"title":"Verbose"}],g=[{"value":50,"title":"Tiny"},{"value":75,"title":"Small"},{"value":100,"title":"Normal"},{"value":125,"title":"Large"},{"value":200,"title":"Huge"}],v=[{"value":100,"title":"None"},{"value":150,"title":"Small"},{"value":200,"title":"Large"},{"value":250,"title":"Huge"}],y=[{"id":"dashboardPriorityOnDeck","enabledID":"dashboardOnDeckEnabled","title":"On Deck"},{"id":"dashboardPriorityRecentlyAdded","enabledID":"dashboardRecentlyAddedEnabled","title":"Recently Added"},{"id":"dashboardPriorityChannels","enabledID":"dashboardChannelsEnabled","title":"Channels"},{"id":"dashboardPriorityQueue","enabledID":"dashboardQueueEnabled","title":"Queue"},{"id":"dashboardPriorityRecommendations","enabledID":"dashboardRecommendationsEnabled","title":"Recommended"}],b=i.ItemView.extend({"className":"web-settings-container","template":e,"ui":{"checkForUpdates":".check-for-updates-container","dashboardList":".dashboard-list","submitBtn":".submit-btn","message":".form-message"},"events":{"click .toggle-advanced-btn":"onToggleAdvancedClick","click .settings-nav a":"onSettingsGroupClick","click .check-for-updates-btn":"onCheckForUpdatesClick","click .download-updates-btn":"onDownloadUpdatesClick","click .refresh-updates-btn":"onRefreshUpdatesClick","click .keyboard-shortcuts-btn":"onKeyboardShortcutsClick","change input[id]":"onInputChange","keyup input[type=text]":"onInputChange","change select[id]":"onInputChange","update .dashboard-list":"onDashboardUpdate","submit #web-settings-form":"onSubmit"},"onlyAfterRender":["saveChanges"],"initialize":function(){this.changes={};
var e=h.get("user");this.listenTo(e,"change:signedIn",this.onSignedInChange),this.listenTo(h,"change:primaryServer",this.render),this.listenTo(h,"change:updateStatus",this.onUpdateStatusChange),this.listenTo(a,"shortcut:save",this.saveChanges)},"serializeData":function(){var e=[],n=!1,i=!1,s=[],a=this.model.toJSON(),l=h.get("user"),u=l.hasPlexPass(),f=l.isNinja(),b=h.get("servers"),w=h.get("primaryServer"),x=b.findWhere({"bundled":!0});if(w&&(n=w.get("transcoderVideo"))){var k=w.get("transcoderVideoQualities"),S=w.get("transcoderVideoBitrates"),C=w.get("transcoderVideoResolutions"),T=k&&k.length>1,A=S&&S.length>1,I=C&&C.length>1;
T&&A&&I&&(i=!0,s=t.zip(k,S,C))}return t.each(t.keys(d.get().languages),function(t){e.push({"value":t,"title":o.getLanguageName(t)})}),t.each(y,function(e){e.value=a[e.id],e.enabled=a[e.enabledID]}),{"settings":a,"hasPlexPass":u,"isNinja":f,"showExperimentalPlayer":r.hasMediaSource&&p.get("flash"),"showBundleUpdate":x&&!x.get("shared"),"updateStatus":h.get("updateStatus"),"version":h.get("version"),"languages":e,"debugLevels":m,"hasVideoTranscoder":n,"hasVideoQualities":i,"videoQualities":s,"subtitleSizes":g,"audioLevels":v,"syncQualities":c.qualities,"dashboardPriorities":t.sortBy(y,"value")}
},"saveChanges":function(){var e=this.ui.submitBtn,n=this.ui.message;if(!e.isDisabled()){e.addClass("active");var i=d.get(),s=!!this.changes.language,a=this.model.save(this.changes);a.done(t.bind(function(){this.changes={},s||(e.addClass("disabled"),n.text(i.t("Your changes have been saved.")))},this)),a.fail(t.bind(function(){n.text(i.t("Your changes could not be saved."))},this)),a.always(t.bind(function(){s||e.removeClass("active")},this))}},"onRender":function(){this.sortable=new s(this.ui.dashboardList[0],{"draggable":".sortable-item"})
},"onClose":function(){"latest"===h.get("updateStatus")&&h.set("updateStatus","none")},"onSignedInChange":function(e,t){null!=t&&this.render()},"onUpdateStatusChange":function(e,t){this.ui.checkForUpdates.removeClass(e.previous("updateStatus")),this.ui.checkForUpdates.addClass(t)},"onToggleAdvancedClick":function(e){e.preventDefault();var t=this.$el.hasClass("show-advanced");t&&this.$(".advanced-setting > .selected").length&&this.$(".nav a:first").click(),this.$el.toggleClass("show-advanced",!t)},"onSettingsGroupClick":function(e){e.preventDefault();
var t=n(e.currentTarget),i=t.attr("href");this.$(".settings-group").removeClass("active"),this.$(i).addClass("active"),this.$(".nav a").removeClass("selected"),t.addClass("selected")},"onCheckForUpdatesClick":function(e){e.preventDefault(),u.execute("checkForBundleUpdates",{"checkAppStore":!0})},"onDownloadUpdatesClick":function(e){e.preventDefault(),u.execute("installBundleUpdates")},"onRefreshUpdatesClick":function(e){e.preventDefault(),window.location.reload(!0)},"onKeyboardShortcutsClick":function(e){e.preventDefault(),a.trigger("show:modal",new f({"shortcuts":l.prototype.shortcuts}))
},"onInputChange":function(e){var t=n(e.currentTarget),i=e.currentTarget,s=i.value;"checkbox"===i.type&&(s=t.prop("checked")),"int"===t.data("type")&&(s=parseInt(s,10)),this.changes[i.id]=s,this.ui.submitBtn.removeClass("disabled"),this.ui.message.text("")},"onDashboardUpdate":function(){var e={};this.ui.dashboardList.find(".sortable-item").each(function(t,n){e[n.id]=t+1}),t.extend(this.changes,e),this.ui.submitBtn.removeClass("disabled"),this.ui.message.text("")},"onSubmit":function(e){e.preventDefault(),this.saveChanges()
}});return b}),define("hb!templates/desktop/settings/ServerSettingsView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s,a="";return a+='\n    <div class="filter-bar-right">\n      <button class="toggle-advanced-btn btn btn-sm btn-default basic-setting">',s={"hash":{},"data":t},a+=S((i=n.t||e&&e.t,i?i.call(e,"Show Advanced",s):k.call(e,"t","Show Advanced",s)))+'</button>\n      <button class="toggle-advanced-btn btn btn-sm btn-default advanced-setting">',s={"hash":{},"data":t},a+=S((i=n.t||e&&e.t,i?i.call(e,"Hide Advanced",s):k.call(e,"t","Hide Advanced",s)))+"</button>\n    </div>\n  "
}function r(){return"hidden"}function o(e,t){var i,s,a="";return a+='\n  <div class="row row-padded">\n    <div class="col-md-8 col-md-offset-2">\n      <h1>',s={"hash":{},"data":t},a+=S((i=n.t||e&&e.t,i?i.call(e,"Settings are restricted from shared users.",s):k.call(e,"t","Settings are restricted from shared users.",s)))+"</h1>\n    </div>\n  </div>\n"}function l(e,t){var i,s,a="";return a+='\n  <div class="settings-row row hidden">\n    <div class="col-sm-4 col-md-3">\n      <ul class="settings-nav nav nav-stacked nav-sidebar">\n        ',i=n.each.call(e,e&&e.groups,{"hash":{},"inverse":C.noop,"fn":C.program(8,c,t),"data":t}),(i||0===i)&&(a+=i),a+='\n      </ul>\n    </div>\n\n    <div class="col-sm-8 col-md-9">\n      <form id="server-settings-form">\n        ',i=n.each.call(e,e&&e.groups,{"hash":{},"inverse":C.noop,"fn":C.programWithDepth(15,f,t,e),"data":t}),(i||0===i)&&(a+=i),a+='\n\n        <div class="form-footer">\n          <button type="submit" class="submit-btn btn btn-lg btn-primary btn-loading disabled">\n            <div class="loading loading-sm"></div>\n            <span class="btn-label">',s={"hash":{},"data":t},a+=S((i=n.t||e&&e.t,i?i.call(e,"Save Changes",s):k.call(e,"t","Save Changes",s)))+'</span>\n          </button>\n\n          <span class="form-message"></span>\n        </div>\n      </form>\n    </div>\n  </div>\n'
}function c(e,t){var i,s="";return s+="\n          ",i=n["if"].call(e,e&&e.settings,{"hash":{},"inverse":C.noop,"fn":C.program(9,d,t),"data":t}),(i||0===i)&&(s+=i),s+="\n        "}function d(e,t){var i;return i=n["if"].call(e,e&&e.title,{"hash":{},"inverse":C.noop,"fn":C.program(10,u,t),"data":t}),i||0===i?i:""}function u(e,t){var i,s,a,r="";return r+='\n            <li class="',i=n["if"].call(e,e&&e.advanced,{"hash":{},"inverse":C.noop,"fn":C.program(11,h,t),"data":t}),(i||0===i)&&(r+=i),r+='">\n              <a class="btn-gray ',a={"hash":{},"inverse":C.noop,"fn":C.program(13,p,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,e&&e.group,"general",a):k.call(e,"if_eq",e&&e.group,"general",a),(s||0===s)&&(r+=s),r+='" href="#',(s=n.id)?s=s.call(e,{"hash":{},"data":t}):(s=e&&e.id,s=typeof s===T?s.call(e,{"hash":{},"data":t}):s),r+=S(s)+'-server-group">',a={"hash":{},"data":t},r+=S((i=n.t||e&&e.t,i?i.call(e,e&&e.title,a):k.call(e,"t",e&&e.title,a)))+"</a>\n            </li>\n          "
}function h(){return"advanced-setting"}function p(){return"selected"}function f(e,t,i){var s,a="";return a+="\n          ",s=n["if"].call(e,e&&e.settings,{"hash":{},"inverse":C.noop,"fn":C.programWithDepth(16,m,t,i),"data":t}),(s||0===s)&&(a+=s),a+="\n        "}function m(e,t,i){var s,a,r,o="";return o+='\n            <div id="',(s=n.id)?s=s.call(e,{"hash":{},"data":t}):(s=e&&e.id,s=typeof s===T?s.call(e,{"hash":{},"data":t}):s),o+=S(s)+'-server-group" class="settings-group ',r={"hash":{},"inverse":C.noop,"fn":C.program(17,g,t),"data":t},s=n.if_eq||e&&e.if_eq,a=s?s.call(e,e&&e.group,"general",r):k.call(e,"if_eq",e&&e.group,"general",r),(a||0===a)&&(o+=a),o+='">\n              ',r={"hash":{},"inverse":C.noop,"fn":C.programWithDepth(19,v,t,i),"data":t},s=n.if_eq||e&&e.if_eq,a=s?s.call(e,e&&e.id,"general",r):k.call(e,"if_eq",e&&e.id,"general",r),(a||0===a)&&(o+=a),o+="\n\n              ",r={"hash":{},"inverse":C.noop,"fn":C.program(21,y,t),"data":t},s=n.if_eq||e&&e.if_eq,a=s?s.call(e,e&&e.id,"channels",r):k.call(e,"if_eq",e&&e.id,"channels",r),(a||0===a)&&(o+=a),o+="\n\n              ",a=n.each.call(e,e&&e.settings,{"hash":{},"inverse":C.noop,"fn":C.program(23,b,t),"data":t}),(a||0===a)&&(o+=a),o+="\n            </div>\n          "
}function g(){return"active"}function v(e,t,i){var s,a,r="";return r+='\n                <div class="form-group">\n                  <h4 class="version-title">',a={"hash":{},"data":t},r+=S((s=n.t||e&&e.t,s?s.call(e,"Version",a):k.call(e,"t","Version",a)))+" "+S((s=i&&i.version,typeof s===T?s.apply(e):s))+"</h4>\n                </div>\n              "}function y(e,t){var i,s,a="";return a+='\n                <div class="form-group">\n                  <button class="directory-settings-btn btn btn-default">',s={"hash":{},"data":t},a+=S((i=n.t||e&&e.t,i?i.call(e,"Directory Settings",s):k.call(e,"t","Directory Settings",s)))+"</button>\n                </div>\n              "
}function b(e,t){var i,s,a="";return a+="\n                ",s={"hash":{"idSuffix":"_c"},"data":t},a+=S((i=n.partial||e&&e.partial,i?i.call(e,"setting",s):k.call(e,"partial","setting",s)))+"\n              "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var w,x="",k=n.helperMissing,S=this.escapeExpression,C=this,T="function";return x+='<div class="filter-bar">\n  ',w=n.unless.call(t,t&&t.shared,{"hash":{},"inverse":C.noop,"fn":C.program(1,a,s),"data":s}),(w||0===w)&&(x+=w),x+='\n</div>\n\n<div class="row row-loading ',w=n["if"].call(t,t&&t.shared,{"hash":{},"inverse":C.noop,"fn":C.program(3,r,s),"data":s}),(w||0===w)&&(x+=w),x+='">\n  <div class="loading loading-inline"></div>\n</div>\n\n',w=n["if"].call(t,t&&t.shared,{"hash":{},"inverse":C.program(7,l,s),"fn":C.program(5,o,s),"data":s}),(w||0===w)&&(x+=w),x+="\n"
})}),define("plex/base/models/server/ServerAccountModel",["underscore","plex/base/utils/Parser","plex/base/models/BaseModel"],function(e,t,n){var i=n.extend({"idAttribute":"key","whitelistedAttrs":["key","name","defaultAudioLanguage","autoSelectAudio","defaultSubtitleLanguage","subtitleMode"],"url":function(){return this.get("key")},"convert":function(n){var i=e.isObject(n)?n:t.parseXML(n);return i.Account},"parse":function(t){var n=this.convert(t);return n=e.pick(n,this.whitelistedAttrs)}});return i
}),define("hb!templates/desktop/dropdowns/PrimaryServerDropdown",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s,a="";return a+='\n  <a class="dropdown-toggle" href="#primary-server-dropdown" data-toggle="dropdown">\n    '+h((i=e&&e.currentServer,i=null==i||i===!1?i:i.friendlyName,typeof i===u?i.apply(e):i))+' <i class="caret-icon"></i>\n  </a>\n\n  <ul class="dropdown-menu">\n    ',s=n.each.call(e,e&&e.servers,{"hash":{},"inverse":p.noop,"fn":p.programWithDepth(2,r,t,e),"data":t}),(s||0===s)&&(a+=s),a+="\n  </ul>\n"
}function r(e,t,i){var s,a,r,l="";return l+='\n      <li><a data-id="',(s=n.machineIdentifier)?s=s.call(e,{"hash":{},"data":t}):(s=e&&e.machineIdentifier,s=typeof s===u?s.call(e,{"hash":{},"data":t}):s),l+=h(s)+'" href="#"><span class="dropdown-truncated-label">',(s=n.friendlyName)?s=s.call(e,{"hash":{},"data":t}):(s=e&&e.friendlyName,s=typeof s===u?s.call(e,{"hash":{},"data":t}):s),l+=h(s)+"</span>",r={"hash":{},"inverse":p.noop,"fn":p.program(3,o,t),"data":t},s=n.if_eq||i&&i.if_eq,a=s?s.call(e,(s=i&&i.currentServer,null==s||s===!1?s:s.machineIdentifier),e&&e.machineIdentifier,r):f.call(e,"if_eq",(s=i&&i.currentServer,null==s||s===!1?s:s.machineIdentifier),e&&e.machineIdentifier,r),(a||0===a)&&(l+=a),l+="</a></li>\n    "
}function o(){return'<i class="dropdown-selected-icon glyphicon ok-2"></i>'}function l(e){var t,n="";return n+='\n  <span class="dropdown-placeholder">'+h((t=e&&e.currentServer,t=null==t||t===!1?t:t.friendlyName,typeof t===u?t.apply(e):t))+"</span>\n"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var c,d="",u="function",h=this.escapeExpression,p=this,f=n.helperMissing;return c=n["if"].call(t,t&&t.showDropdown,{"hash":{},"inverse":p.program(5,l,s),"fn":p.program(1,a,s),"data":s}),(c||0===c)&&(d+=c),d+="\n"
})}),define("plex/desktop/views/dropdowns/PrimaryServerDropdown",["hb!templates/desktop/dropdowns/PrimaryServerDropdown.tpl","underscore","jquery","marionette","plex/base/models/AppModel","plex/base/models/server/ServerStorageModel"],function(e,t,n,i,s,a){var r=i.ItemView.extend({"id":"primary-server-dropdown","tagName":"span","className":"dropdown","template":e,"collectionEvents":{"change:friendlyName":"render","change:authorized":"onServerAuthorizedChange"},"events":{"click .dropdown-menu a":"onServerClick"},"initialize":function(){this.model=s.get("primaryServer"),this.collection=s.get("servers"),this.listenTo(s,"change:primaryServer",this.render)
},"serializeData":function(){var e=this.collection.toJSON(),n=t.filter(e,function(e){return e.authorized?e.cloud||e.shared||e.synced?!1:!0:!1});return{"showDropdown":n.length>1,"servers":n,"currentServer":this.model?this.model.toJSON():null}},"onServerAuthorizedChange":function(e,t){t&&this.render()},"onServerClick":function(e){e.preventDefault();var t=n(e.currentTarget).data("id"),i=this.collection.get(t);i&&(s.set("primaryServer",i),a.save("lastPrimaryServerID",i.id))}});return r}),define("hb!templates/desktop/settings/ServerConnectSettingsView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(){return"hidden"
}function r(e,t){var i,s,a="";return a+='\n      <p class="server-mapping-status text-muted">',s={"hash":{},"data":t},a+=I((i=n.t||e&&e.t,i?i.call(e,"Connecting server...",s):A.call(e,"t","Connecting server...",s)))+"</p>\n    "}function o(e,t){var i;return i=n["if"].call(e,e&&e.disconnecting,{"hash":{},"inverse":P.program(8,c,t),"fn":P.program(6,l,t),"data":t}),i||0===i?i:""}function l(e,t){var i,s,a="";return a+='\n      <p class="server-mapping-status text-muted">',s={"hash":{},"data":t},a+=I((i=n.t||e&&e.t,i?i.call(e,"Disconnecting server...",s):A.call(e,"t","Disconnecting server...",s)))+"</p>\n    "
}function c(e,t){var i,s,a,r="";return r+="\n      ",s=n["if"].call(e,(i=e&&e.cloudAccount,null==i||i===!1?i:i.mappingError),{"hash":{},"inverse":P.program(11,u,t),"fn":P.program(9,d,t),"data":t}),(s||0===s)&&(r+=s),r+='\n\n      <div class="server-connect-error-container ',s=n.unless.call(e,(i=e&&e.cloudAccount,null==i||i===!1?i:i.mappingError),{"hash":{},"inverse":P.noop,"fn":P.program(16,f,t),"data":t}),(s||0===s)&&(r+=s),r+='">\n        <div class="form-inline">\n          ',s=n["if"].call(e,e&&e.mappingModeSetting,{"hash":{},"inverse":P.noop,"fn":P.program(18,m,t),"data":t}),(s||0===s)&&(r+=s),r+="\n\n          ",s=n["if"].call(e,e&&e.mappingPortSetting,{"hash":{},"inverse":P.noop,"fn":P.program(21,v,t),"data":t}),(s||0===s)&&(r+=s),r+='\n\n          <button class="retry-btn btn btn-default btn-loading">\n            <div class="loading loading-sm"></div>\n            <span class="btn-label">',s=n["if"].call(e,(i=e&&e.cloudAccount,null==i||i===!1?i:i.mappingError),{"hash":{},"inverse":P.program(25,b,t),"fn":P.program(23,y,t),"data":t}),(s||0===s)&&(r+=s),r+='</span>\n          </button>\n        </div>\n\n        <p class="help-block">',a={"hash":{},"data":t},r+=I((i=n.t||e&&e.t,i?i.call(e,"Enable this if automatic mapping fails. You will need to configure your router. Detailed instructions are available {1}here{2}.","<a href='http://support.plex.tv/hc/en-us/articles/200931138-Troubleshooting-myPlex-Server-connections' target='_blank'>","</a>",a):A.call(e,"t","Enable this if automatic mapping fails. You will need to configure your router. Detailed instructions are available {1}here{2}.","<a href='http://support.plex.tv/hc/en-us/articles/200931138-Troubleshooting-myPlex-Server-connections' target='_blank'>","</a>",a)))+"</p>\n      </div>\n    "
}function d(e,t){var i,s,a="";return a+="\n        ",s={"hash":{"mappingError":(i=e&&e.cloudAccount,null==i||i===!1?i:i.mappingError),"context":"settings"},"data":t},a+=I((i=n.partial||e&&e.partial,i?i.call(e,"connectError",s):A.call(e,"partial","connectError",s)))+"\n      "}function u(e,t){var i,s,a,r="";return r+="\n        ",a={"hash":{},"inverse":P.program(14,p,t),"fn":P.program(12,h,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,(i=e&&e.cloudAccount,null==i||i===!1?i:i.mappingState),"mapped",a):A.call(e,"if_eq",(i=e&&e.cloudAccount,null==i||i===!1?i:i.mappingState),"mapped",a),(s||0===s)&&(r+=s),r+="\n      "
}function h(e,t){var i,s,a="";return a+='\n          <p>\n            <i class="server-connect-status-icon glyphicon ok-2"></i> ',s={"hash":{},"data":t},a+=I((i=n.t||e&&e.t,i?i.call(e,"Server is mapped to port {1}",(i=e&&e.cloudAccount,null==i||i===!1?i:i.publicPort),s):A.call(e,"t","Server is mapped to port {1}",(i=e&&e.cloudAccount,null==i||i===!1?i:i.publicPort),s)))+'\n            <button class="disconnect-btn server-connect-status-btn btn btn-default btn-sm" href="#">',s={"hash":{},"data":t},a+=I((i=n.t||e&&e.t,i?i.call(e,"Disconnect",s):A.call(e,"t","Disconnect",s)))+"</button>\n          </p>\n        "
}function p(e,t){var i,s,a="";return a+='\n          <p class="server-connect-group">\n            <button class="connect-btn btn btn-primary">',s={"hash":{},"data":t},a+=I((i=n.t||e&&e.t,i?i.call(e,"Connect to Plex",s):A.call(e,"t","Connect to Plex",s)))+"</button>\n          </p>\n        "}function f(){return"advanced-setting"}function m(e,t){var i,s,a,r="";return r+='\n            <div class="checkbox">\n              <label>\n                <input type="checkbox" id="'+I((i=e&&e.mappingModeSetting,i=null==i||i===!1?i:i.id,typeof i===M?i.apply(e):i))+'" value="1" ',s=n["if"].call(e,(i=e&&e.mappingModeSetting,null==i||i===!1?i:i.value),{"hash":{},"inverse":P.noop,"fn":P.program(19,g,t),"data":t}),(s||0===s)&&(r+=s),r+="> ",a={"hash":{},"data":t},r+=I((i=n.t||e&&e.t,i?i.call(e,"Manually specify port",a):A.call(e,"t","Manually specify port",a)))+"\n              </label>\n            </div>\n          "
}function g(){return"checked"}function v(e){var t,n="";return n+='\n            <div class="form-group">\n              <input type="text" id="'+I((t=e&&e.mappingPortSetting,t=null==t||t===!1?t:t.id,typeof t===M?t.apply(e):t))+'" class="form-control" value="'+I((t=e&&e.mappingPortSetting,t=null==t||t===!1?t:t.value,typeof t===M?t.apply(e):t))+'">\n            </div>\n          '}function y(e,t){var i,s;return s={"hash":{},"data":t},I((i=n.t||e&&e.t,i?i.call(e,"Retry",s):A.call(e,"t","Retry",s)))}function b(e,t){var i,s;
return s={"hash":{},"data":t},I((i=n.t||e&&e.t,i?i.call(e,"Update",s):A.call(e,"t","Update",s)))}function w(e,t){var i;return i=n.unless.call(e,e&&e.disconnecting,{"hash":{},"inverse":P.noop,"fn":P.program(28,x,t),"data":t}),i||0===i?i:""}function x(e,t){var i,s,r,o="";return o+='\n    <div class="server-connect-allowed-networks advanced-setting col-sm-10 col-sm-offset-1 ',r={"hash":{},"inverse":P.noop,"fn":P.program(1,a,t),"data":t},i=n.if_neq||e&&e.if_neq,s=i?i.call(e,(i=e&&e.cloudAccount,null==i||i===!1?i:i.signInState),"ok",r):A.call(e,"if_neq",(i=e&&e.cloudAccount,null==i||i===!1?i:i.signInState),"ok",r),(s||0===s)&&(o+=s),o+='">\n      <label class="control-label">\n        <input type="checkbox" id="requireAuth" ',r={"hash":{},"inverse":P.noop,"fn":P.program(19,g,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,(i=e&&e.allowedNetworksSetting,null==i||i===!1?i:i.value),e&&e.requireAuthValue,r):A.call(e,"if_eq",(i=e&&e.allowedNetworksSetting,null==i||i===!1?i:i.value),e&&e.requireAuthValue,r),(s||0===s)&&(o+=s),o+="> ",r={"hash":{},"data":t},o+=I((i=n.t||e&&e.t,i?i.call(e,"Require authentication on local networks",r):A.call(e,"t","Require authentication on local networks",r)))+'</a>\n      </label>\n\n      <p class="help-block">\n        ',r={"hash":{},"data":t},o+=I((i=n.t||e&&e.t,i?i.call(e,"Sets the allowed networks setting to 127.0.0.1/255.255.255.255. This requires other computers on a local network to authenticate before accessing the server.",r):A.call(e,"t","Sets the allowed networks setting to 127.0.0.1/255.255.255.255. This requires other computers on a local network to authenticate before accessing the server.",r)))+"\n      </p>\n    </div>\n  "
}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var k,S,C,T="",A=n.helperMissing,I=this.escapeExpression,P=this,M="function";return T+='<div class="row">\n  <div id="server-account-form" class="col-sm-6 col-sm-offset-1 ',C={"hash":{},"inverse":P.noop,"fn":P.program(1,a,s),"data":s},k=n.if_eq||t&&t.if_eq,S=k?k.call(t,(k=t&&t.cloudAccount,null==k||k===!1?k:k.signInState),"ok",C):A.call(t,"if_eq",(k=t&&t.cloudAccount,null==k||k===!1?k:k.signInState),"ok",C),(S||0===S)&&(T+=S),T+='"></div>\n\n  <div class="server-connect-status col-sm-10 col-sm-offset-1 ',C={"hash":{},"inverse":P.noop,"fn":P.program(1,a,s),"data":s},k=n.if_neq||t&&t.if_neq,S=k?k.call(t,(k=t&&t.cloudAccount,null==k||k===!1?k:k.signInState),"ok",C):A.call(t,"if_neq",(k=t&&t.cloudAccount,null==k||k===!1?k:k.signInState),"ok",C),(S||0===S)&&(T+=S),T+='">\n    <p class="text-muted">\n      ',C={"hash":{},"data":s},T+=I((k=n.t||t&&t.t,k?k.call(t,"Connecting your server to Plex allows you to stream media outside your home network.",C):A.call(t,"t","Connecting your server to Plex allows you to stream media outside your home network.",C)))+'\n    </p>\n\n    <p class="server-sign-in-status">\n      <i class="server-connect-status-icon glyphicon ok-2"></i> ',C={"hash":{},"data":s},T+=I((k=n.t||t&&t.t,k?k.call(t,"Signed in as",C):A.call(t,"t","Signed in as",C)))+" ",C={"hash":{},"data":s},T+=I((k=n.truncate||t&&t.truncate,k?k.call(t,(k=t&&t.cloudAccount,null==k||k===!1?k:k.username),20,C):A.call(t,"truncate",(k=t&&t.cloudAccount,null==k||k===!1?k:k.username),20,C)))+'\n\n      <button class="sign-out-btn server-connect-status-btn btn btn-default btn-sm btn-loading">\n        <div class="loading loading-sm"></div>\n        <span class="btn-label">',C={"hash":{},"data":s},T+=I((k=n.t||t&&t.t,k?k.call(t,"Sign Out",C):A.call(t,"t","Sign Out",C)))+"</span>\n      </button>\n    </p>\n\n    ",S=n["if"].call(t,t&&t.connecting,{"hash":{},"inverse":P.program(5,o,s),"fn":P.program(3,r,s),"data":s}),(S||0===S)&&(T+=S),T+="\n  </div>\n\n  ",S=n.unless.call(t,t&&t.connecting,{"hash":{},"inverse":P.noop,"fn":P.program(27,w,s),"data":s}),(S||0===S)&&(T+=S),T+="\n</div>\n"
})}),define("plex/desktop/views/settings/ServerConnectSettingsView",["hb!templates/desktop/settings/ServerConnectSettingsView.tpl","underscore","jquery","marionette","plex/base/commands/Commands","plex/base/models/AppModel","plex/desktop/views/SignInFormView"],function(e,t,n,i,s,a,r){var o=i.Layout.extend({"className":"connect-settings-container","template":e,"connecting":!1,"disconnecting":!1,"requireAuthValue":"127.0.0.1/255.255.255.255","ui":{"form":"#server-account-form"},"regions":{"form":"#server-account-form"},"events":{"change .server-connect-error-container input[id]":"onMappingInputChange","change input[id=requireAuth]":"onRequireAuthChange","click .connect-btn":"onConnectClick","click .disconnect-btn":"onDisconnectClick","click .retry-btn":"onRetryClick","click .sign-out-btn":"onSignOutClick"},"initialize":function(){this.cloudAccount=this.model.get("cloudAccount"),this.collection=this.model.get("settings"),this.changes={},this.listenTo(this.cloudAccount,{"change:signInState":this.render,"change:mappingState":this.render,"change:mappingError":this.render}),this.cloudAccount.fetch()
},"serializeData":function(){var e=this.collection.get("ManualPortMappingMode"),t=this.collection.get("ManualPortMappingPort"),n=this.collection.get("allowedNetworks");return{"cloudAccount":this.cloudAccount.toJSON(),"connecting":this.connecting,"disconnecting":this.disconnecting,"mappingModeSetting":e?e.toJSON():null,"mappingPortSetting":t?t.toJSON():null,"allowedNetworksSetting":n?n.toJSON():null,"requireAuthValue":this.requireAuthValue}},"submit":function(e){var n=e[0],i=this.form.currentView.ui.submitBtn;
if(!i.hasClass("active")){i.addClass("active");var s={"cloudAccount":this.cloudAccount,"username":n.username.value,"email":n.email.value,"password":n.password.value,"confirm":n.confirm.value,"age":n.age.value,"terms":n.terms.checked};this.connecting=!0;var a;a=this.form.currentView.$el.hasClass("sign-in-form")?this.signIn(n,s):this.signUp(n,s),a=a.then(t.bind(function(){return this.signInUser(s.username,s.password)},this)),a=a.then(t.bind(function(){return this.connect()},this)),a.fail(function(){i.removeClass("active")
}),a.always(t.bind(function(){this.connecting=!1,this.render()},this))}},"signIn":function(e,t){var i=this.form.currentView;return i.validateAll(e,["username","password"],t)?s.execute("signInServer",t):n.Deferred().reject().promise()},"signUp":function(e,t){var i=this.form.currentView;return i.validateAll(e,i.validationFields,t)?s.execute("signUpServer",t):n.Deferred().reject().promise()},"signInUser":function(e,t){var i=a.get("user");return i.get("signedIn")?n.Deferred().resolve().promise():s.execute("signIn",{"username":e,"password":t})
},"connect":function(){return s.execute("connectServer",{"cloudAccount":this.model.get("cloudAccount"),"value":!0})},"disconnect":function(){return s.execute("connectServer",{"cloudAccount":this.model.get("cloudAccount"),"value":!1})},"reconnect":function(){return s.execute("reconnectServer",{"cloudAccount":this.model.get("cloudAccount")})},"save":function(){if(t.isEmpty(this.changes))return n.Deferred().resolve().promise();var e=this.collection.first().save(this.changes);return e.done(t.bind(function(){t.each(this.changes,function(e,t){var n=this.collection.get(t),i=n.get("type");
"bool"===i?n.set("value","0"!==e):"int"==i?n.set("value",parseInt(e,10)):n.set("value",e)},this),this.changes={}},this)),e},"signOut":function(){return s.execute("signOutServer",{"cloudAccount":this.cloudAccount})},"resetRequireAuth":function(){var e=this.collection.get("allowedNetworks");e&&e.get("value")===this.requireAuthValue&&(this.changes.allowedNetworks="",this.save())},"onRender":function(){this.form.show(new r({"showRememberMe":!1}))},"onMappingInputChange":function(e){var t=e.currentTarget,n=t.value;
"checkbox"!==t.type||t.checked||(n="0"),this.changes[t.id]=n},"onRequireAuthChange":function(e){var t=n(e.currentTarget).prop("checked"),i=t?this.requireAuthValue:"";this.changes.allowedNetworks=i,this.save()},"onConnectClick":function(e){e.preventDefault(),this.connecting=!0,this.render();var n=this.connect();n.always(t.bind(function(){this.connecting=!1,this.render()},this))},"onDisconnectClick":function(e){e.preventDefault(),this.disconnecting=!0,this.render();var n=this.disconnect();n.always(t.bind(function(){this.disconnecting=!1,this.render()
},this))},"onRetryClick":function(e){e.preventDefault(),this.connecting=!0,this.render();var n=this.save();n.always(t.bind(function(){var e=this.reconnect();e.always(t.bind(function(){this.connecting=!1,this.render()},this))},this))},"onSignOutClick":function(e){e.preventDefault();var i=n(e.currentTarget);if(!i.hasClass("active")){i.addClass("active");var s=this.signOut();s.done(t.bind(function(){this.resetRequireAuth(),this.cloudAccount.fetch()},this)),s.fail(function(){i.removeClass("active")})
}}});return o}),define("hb!templates/desktop/settings/ServerAgentsSettingsView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t,i){var s,a,o,l="";return l+='\n    <li class="',o={"hash":{},"inverse":d.noop,"fn":d.program(2,r,t),"data":t},s=n.if_eq||i&&i.if_eq,a=s?s.call(e,(s=i&&i.currentType,null==s||s===!1?s:s.id),e&&e.id,o):u.call(e,"if_eq",(s=i&&i.currentType,null==s||s===!1?s:s.id),e&&e.id,o),(a||0===a)&&(l+=a),l+='">\n      <a class="btn-gray" data-type="',(a=n.typeString)?a=a.call(e,{"hash":{},"data":t}):(a=e&&e.typeString,a=typeof a===h?a.call(e,{"hash":{},"data":t}):a),l+=p(a)+'" href="#">',o={"hash":{},"data":t},l+=p((s=n.t||e&&e.t,s?s.call(e,e&&e.plural,o):u.call(e,"t",e&&e.plural,o)))+"</a>\n    </li>\n  "
}function r(){return"active"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var o,l,c="",d=this,u=n.helperMissing,h="function",p=this.escapeExpression;return c+='<ul class="agent-types-nav nav nav-pills">\n  ',o=n.each.call(t,t&&t.agentTypes,{"hash":{},"inverse":d.noop,"fn":d.programWithDepth(1,a,s,t),"data":s}),(o||0===o)&&(c+=o),c+='\n</ul>\n\n<div class="agents-list-container"></div>\n\n<p class="agents-help-block help-block">',l={"hash":{},"data":s},c+=p((o=n.t||t&&t.t,o?o.call(t,"Select which additional agents should contribute to metadata from {1}, and drag them to change the order of preference.","<span class='agent-label'></span>",l):u.call(t,"t","Select which additional agents should contribute to metadata from {1}, and drag them to change the order of preference.","<span class='agent-label'></span>",l)))+'</p>\n\n<div class="contributors-list-container"></div>\n'
})}),define("hb!templates/desktop/lists/settings/AgentListItem",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,r="",o="function",l=this.escapeExpression;return r+='<a class="btn-gray" data-identifier="',(a=n.identifier)?a=a.call(t,{"hash":{},"data":s}):(a=t&&t.identifier,a=typeof a===o?a.call(t,{"hash":{},"data":s}):a),r+=l(a)+'" href="#">',(a=n.name)?a=a.call(t,{"hash":{},"data":s}):(a=t&&t.name,a=typeof a===o?a.call(t,{"hash":{},"data":s}):a),r+=l(a)+"</a>\n"
})}),define("plex/desktop/views/lists/settings/AgentListItem",["hb!templates/desktop/lists/settings/AgentListItem.tpl","marionette"],function(e,t){var n=t.ItemView.extend({"tagName":"li","template":e,"bindings":{"a":{"modelAttribute":"selected","manual":!0,"formatter":function(e){this.$el.toggleClass("active",!!e)}}}});return n}),define("plex/desktop/views/lists/settings/AgentList",["plex/desktop/views/lists/BaseList","plex/desktop/views/lists/settings/AgentListItem"],function(e,t){var n=e.extend({"tagName":"ul","className":"agents-nav nav nav-pills nav-pills-sm","itemView":t});
return n}),define("hb!templates/desktop/lists/settings/ContributorListItem",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(){return"checked"}function r(){return"disabled"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var o,l,c,d="",u=n.helperMissing,h=this.escapeExpression,p="function",f=this;return d+='<a class="sortable-btn info-btn" rel="tooltip" title="',c={"hash":{},"data":s},d+=h((o=n.t||t&&t.t,o?o.call(t,"Agent Info",c):u.call(t,"t","Agent Info",c)))+'" href="#">\n  <i class="glyphicon circle-info"></i>\n</a>\n\n<a class="sortable-btn settings-btn" rel="tooltip" title="',c={"hash":{},"data":s},d+=h((o=n.t||t&&t.t,o?o.call(t,"Agent Settings",c):u.call(t,"t","Agent Settings",c)))+'" href="#">\n  <i class="glyphicon cogwheel"></i>\n</a>\n\n<i class="sortable-icon glyphicon show-lines"></i>\n\n<label class="sortable-label" for="',(l=n.identifier)?l=l.call(t,{"hash":{},"data":s}):(l=t&&t.identifier,l=typeof l===p?l.call(t,{"hash":{},"data":s}):l),d+=h(l)+'">\n  <input id="',(l=n.identifier)?l=l.call(t,{"hash":{},"data":s}):(l=t&&t.identifier,l=typeof l===p?l.call(t,{"hash":{},"data":s}):l),d+=h(l)+'" name="',(l=n.identifier)?l=l.call(t,{"hash":{},"data":s}):(l=t&&t.identifier,l=typeof l===p?l.call(t,{"hash":{},"data":s}):l),d+=h(l)+'" type="checkbox"  ',l=n["if"].call(t,t&&t.enabled,{"hash":{},"inverse":f.noop,"fn":f.program(1,a,s),"data":s}),(l||0===l)&&(d+=l),d+=" ",l=n["if"].call(t,t&&t.primary,{"hash":{},"inverse":f.noop,"fn":f.program(3,r,s),"data":s}),(l||0===l)&&(d+=l),d+="> ",c={"hash":{},"data":s},d+=h((o=n.t||t&&t.t,o?o.call(t,t&&t.name,c):u.call(t,"t",t&&t.name,c)))+"\n</label>\n"
})}),define("hb!templates/desktop/modals/AgentInfoModal",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,r="",o="function",l=this.escapeExpression;return r+='<div class="modal-dialog">\n  <div class="modal-content">\n    <div class="modal-header">\n      <button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button>\n      <h4 class="modal-title">\n        <i class="modal-icon glyphicon circle-info"></i>\n        ',(a=n.name)?a=a.call(t,{"hash":{},"data":s}):(a=t&&t.name,a=typeof a===o?a.call(t,{"hash":{},"data":s}):a),r+=l(a)+'\n      </h4>\n    </div>\n\n    <div class="modal-body">\n      <p class="agent-icon-container"></p>\n      <p>',(a=n.attribution)?a=a.call(t,{"hash":{},"data":s}):(a=t&&t.attribution,a=typeof a===o?a.call(t,{"hash":{},"data":s}):a),(a||0===a)&&(r+=a),r+="</p>\n    </div>\n  </div>\n</div>\n"
})}),define("plex/desktop/views/modals/AgentInfoModal",["hb!templates/desktop/modals/AgentInfoModal.tpl","plex/desktop/views/modals/BaseModal","plex/desktop/views/images/BaseImage"],function(e,t,n){var i=t.extend({"name":"agentInfoModal","className":"agent-info-modal modal fade","template":e,"regions":{"icon":".agent-icon-container"},"onRender":function(){t.prototype.onRender.apply(this,arguments),this.icon.show(new n({"model":this.model,"url":"/system/agents/attribution/image?identifier="+this.model.id,"className":"agent-icon","width":100,"height":100}))
}});return i}),define("plex/desktop/views/lists/settings/ContributorListItem",["hb!templates/desktop/lists/settings/ContributorListItem.tpl","underscore","marionette","plex/base/utils/Dispatcher","plex/base/models/server/ServerSettingCollection","plex/desktop/views/modals/ChannelSettingsModal","plex/desktop/views/modals/AgentInfoModal"],function(e,t,n,i,s,a,r){var o=n.ItemView.extend({"tagName":"li","className":"sortable-item","template":e,"events":{"click .settings-btn":"onSettingsClick","click .info-btn":"onInfoClick"},"initialize":function(){this.model.fetchAttribution()
},"bindings":{".info-btn":{"modelAttribute":"attribution","manual":!0,"autohide":!0},".settings-btn":{"modelAttribute":"hasPrefs","manual":!0,"autohide":!0}},"onSettingsClick":function(e){e.preventDefault();var n=new s([],{"server":this.model.server,"url":"/:/plugins/"+this.model.id+"/prefs"});n.fetch().done(t.bind(function(){i.trigger("show:modal",new a({"model":this.model,"collection":n}))},this))},"onInfoClick":function(e){e.preventDefault(),i.trigger("show:modal",new r({"model":this.model}))}});
return o}),define("plex/desktop/views/lists/settings/ContributorList",["sortable","plex/desktop/views/lists/BaseList","plex/desktop/views/lists/settings/ContributorListItem"],function(e,t,n){var i=t.extend({"tagName":"ul","className":"list sortable-list contributor-list","itemView":n,"events":{"change input[type=checkbox]":"save","update":"save"},"save":function(){var e=[];this.$(":checked").each(function(){e.push(this.name)}),this.trigger("save",e.join(","))},"onRender":function(){this.sortable=new e(this.$el[0],{"draggable":".sortable-item"})
},"onClose":function(){this.sortable.destroy()}});return i}),define("plex/desktop/views/settings/ServerAgentsSettingsView",["hb!templates/desktop/settings/ServerAgentsSettingsView.tpl","underscore","jquery","marionette","plex/base/utils/types/MediaTypes","plex/base/models/library/AgentCollection","plex/desktop/views/lists/settings/AgentList","plex/desktop/views/lists/settings/ContributorList"],function(e,t,n,i,s,a,r,o){var l=i.Layout.extend({"className":"agents-settings-container","template":e,"ui":{"agentLabel":".agent-label","typeNavItems":".agent-types-nav li","agentNavItems":".agents-nav li"},"regions":{"agentsList":".agents-list-container","contributorsList":".contributors-list-container"},"events":{"click .agent-types-nav a":"onAgentTypeClick","click .agents-nav a":"onAgentClick"},"initialize":function(){this.agentTypes=[],this.agentTypes.push(s.getMediaTypeByString("movie")),this.agentTypes.push(s.getMediaTypeByString("show")),this.agentTypes.push(s.getMediaTypeByString("artist")),this.agentTypes.push(s.getMediaTypeByString("album")),this.agentTypes.push(s.getMediaTypeByString("photo")),this.currentType=t.first(this.agentTypes),this.agents=new a([],{"server":this.model,"sectionType":this.currentType.id}),this.additionalAgents=new a([],{"server":this.model,"sectionType":this.currentType.id}),this.contributors=new a([],{"server":this.model,"sectionType":this.currentType.id}),this.listenTo(this.agents,"reset",this.onAgentsReset)
},"serializeData":function(){return{"currentType":this.currentType,"agentTypes":this.agentTypes}},"selectAgent":function(e){this.currentAgent&&this.currentAgent.set("selected",!1),this.currentAgent=e,e.set("selected",!0),this.additionalAgents.relatedAgent=e.id,this.contributors.primaryAgent=e.id,this.ui.agentLabel.text(e.get("name")),this.additionalAgents.release(),this.contributors.release(),this.populateContributors()},"populateAgents":function(){this.agents.populate({"reset":!0,"cancelable":!0})
},"populateContributors":function(){var e=[];e.push(this.additionalAgents.populate({"reset":!0,"cancelable":!0})),e.push(this.contributors.populate({"reset":!0,"cancelable":!0}));var i=n.when.apply(n,e);i.done(t.bind(function(){var e=t.bind(function(e){return e.id===this.currentAgent.id?(e.set("primary",!0),!0):!!this.contributors.get(e.id)},this);this.contributors.reset(this.additionalAgents.filter(e))},this))},"onRender":function(){this.populateAgents(),this.agentsList.show(new r({"collection":this.agents})),this.contributorsList.show(new o({"collection":this.contributors})),this.listenTo(this.contributorsList.currentView,"save",this.onContributorsSave)
},"onAgentsReset":function(e){e.length&&this.selectAgent(e.first())},"onAgentTypeClick":function(e){e.preventDefault();var t=n(e.currentTarget),i=t.data("type");this.currentType=s.getMediaTypeByString(i),this.agents.sectionType=this.currentType.id,this.additionalAgents.sectionType=this.currentType.id,this.contributors.sectionType=this.currentType.id,this.agents.release(),this.populateAgents(),this.ui.typeNavItems.removeClass("active"),t.parent("li").addClass("active")},"onAgentClick":function(e){e.preventDefault();
var t=n(e.target),i=t.data("identifier"),s=this.agents.get(i);this.selectAgent(s)},"onContributorsSave":function(e){this.currentAgent.url="system/agents/"+this.currentAgent.id+"/config/"+this.currentType.id,this.currentAgent.save({"order":e})}});return l}),define("plex/desktop/views/settings/ServerSettingsView",["hb!templates/desktop/settings/ServerSettingsView.tpl","underscore","jquery","marionette","plex/base/utils/Dispatcher","plex/base/utils/LanguageUtil","plex/base/adapters/LocalizerAdapter","plex/base/models/AppModel","plex/base/models/server/ServerSettingModel","plex/base/models/server/ServerSettingCollection","plex/base/models/server/ServerAccountModel","plex/desktop/views/dropdowns/PrimaryServerDropdown","plex/desktop/views/settings/ServerConnectSettingsView","plex/desktop/views/settings/ServerAgentsSettingsView","plex/desktop/views/modals/ChannelSettingsModal"],function(e,t,n,i,s,a,r,o,l,c,d,u,h,p,f){var m=i.Layout.extend({"className":"server-settings-container","template":e,"ui":{"loading":".row-loading","settings":".settings-row","form":"#server-settings-form","allowedNetworksInput":"input[name=allowedNetworks]","footer":".form-footer","submitBtn":".submit-btn","message":".form-message"},"regions":{"serverDropdown":".filter-bar","connectSettings":"#connect-server-group","agentsSettings":"#agents-server-group"},"modelEvents":{"change:shared":"onSharedChange"},"events":{"click .toggle-advanced-btn":"onToggleAdvancedClick","click .settings-nav a":"onSettingsGroupClick","click .directory-settings-btn":"onDirectorySettingsClick","change input[name]":"onInputChange","keyup input[type=text]":"onInputChange","change select[name]":"onInputChange","submit #server-settings-form":"onSubmit"},"onlyAfterRender":["saveChanges"],"orderedGroups":[{"id":"general","group":"general","title":"General"},{"id":"connect","group":"connect","title":"Connect"},{"id":"agents","group":"agents","title":"Agents"},{"id":"library","group":"library","title":"Library"},{"id":"channels","group":"channels","title":"Channels"},{"id":"network","group":"network","title":"Network"},{"id":"transcoder","group":"transcoder","title":"Transcoder"},{"id":"languages","group":"account.language","title":"Languages"},{"id":"dlna","group":"dlna","title":"DLNA"},{"id":"bonjour","group":"bonjour","title":"Network Discovery"},{"id":"butler","group":"butler","title":"Scheduled Tasks"}],"initialize":function(){var e=[],i=this.model.get("shared")?o.get("user").id:1;
this.shared=this.model.get("shared"),this.account=new d({"key":"/accounts/"+i},{"server":this.model}),this.changes={},e.push(this.collection.populate()),e.push(this.account.populate({"cancelable":!0})),n.when.apply(n,e).always(t.bind(function(){this.render(),this.ui.loading.addClass("hidden"),this.shared||this.ui.settings.removeClass("hidden")},this)),o.set("primaryServer",this.model),this.listenTo(o,"change:primaryServer",this.onPrimaryServerChange),this.listenTo(s,"shortcut:save",this.saveChanges)
},"serializeData":function(){var e="",n=!1,i=this.collection.get("FriendlyName"),s=this.collection.get("allowedNetworks");i&&!i.get("value")&&(e=i.get("value"),n=!0,i.set("value",this.model.get("name"),{"silent":!0})),s&&(this.stopListening(s),this.listenTo(s,"change:value",this.onAllowedNetworksChange));var a={},r={};a.connect=!0,a.agents=!0,r.connect=!0,r.agents=!0;var o=function(e){if(!e.get("hidden")){var t=e.get("group");a[t]||(a[t]=[]),a[t].push(e.toJSON()),e.get("advanced")||(r[t]=!0)}};this.collection.each(o),t.each(this.getFakeSettings(),o);
var l=t.map(this.orderedGroups,function(e){var n=t.clone(e);return n.settings=a[e.group],n.advanced=!(e.group in r),delete a[e.group],n},this);return t.each(a,function(e,t){l.push({"group":t,"title":t,"settings":e,"advanced":!(t in r)})}),n&&i.set("value",e,{"silent":!0}),{"shared":this.shared,"version":this.model.get("version"),"groups":l}},"getFakeSettings":function(){var e=[],n=t.map(a.languages,function(e,t){return{"value":t,"label":e}});return e.push(new l({"id":"account.autoSelectAudio","label":"Automatically select audio tracks","summary":"Automatically select audio tracks in your preferred language when possible.","default":!1,"value":"1"===this.account.get("autoSelectAudio"),"type":"bool","group":"account.language","advanced":!1,"hidden":!1},{"server":this.model})),e.push(new l({"id":"account.defaultAudioLanguage","label":"Prefer audio tracks in","default":"en","value":this.account.get("defaultAudioLanguage"),"type":"text","group":"account.language","advanced":!1,"hidden":!1,"enumValues":n},{"server":this.model})),e.push(new l({"id":"account.subtitleMode","label":"Subtitle mode","default":0,"value":parseInt(this.account.get("subtitleMode"),10),"type":"int","group":"account.language","advanced":!1,"hidden":!1,"enumValues":[{"value":"0","label":"Manually selected"},{"value":"1","label":"Shown with foreign audio"},{"value":"2","label":"Always enabled"}]},{"server":this.model})),e.push(new l({"id":"account.defaultSubtitleLanguage","label":"Prefer subtitles in","default":"en","value":this.account.get("defaultSubtitleLanguage"),"type":"text","group":"account.language","advanced":!1,"hidden":!1,"enumValues":n},{"server":this.model})),e
},"saveChanges":function(){if(this.form)return void this.form.submit(this.ui.form);var e=this.ui.submitBtn,i=this.ui.message;if(!e.isDisabled()){e.addClass("active");var s=r.get(),a=[],o="account.",l=!1;t.each(t.keys(this.changes),function(e){0===e.lastIndexOf(o,0)&&(this.account.set(e.substring(o.length),this.changes[e],{"silent":!0}),l=!0,delete this.changes[e])},this),l&&a.push(this.account.save()),t.isEmpty(this.changes)||a.push(this.collection.first().save(this.changes));var c=n.when.apply(n,a);
c.done(t.bind(function(){t.each(this.changes,function(e,t){var n=this.collection.get(t),i=n.get("type");"bool"===i?n.set("value","0"!==e):"int"==i?n.set("value",parseInt(e,10)):n.set("value",e)},this),this.changes={},e.addClass("disabled"),i.text(s.t("Your changes have been saved."))},this)),c.fail(function(){i.text(s.t("Your changes could not be saved."))}),c.always(function(){e.removeClass("active")})}},"onRender":function(){this.serverDropdown.append(new u),this.connectSettings.show(new h({"model":this.model})),this.agentsSettings.show(new p({"model":this.model}))
},"onPrimaryServerChange":function(e,t){t&&s.trigger("navigate","serverSettings",{"serverID":t.id})},"onSharedChange":function(e,t){this.shared=t,this.render(),this.ui.loading.addClass("hidden"),t||this.ui.settings.removeClass("hidden")},"onAllowedNetworksChange":function(e,t){this.ui.allowedNetworksInput.val(t)},"onToggleAdvancedClick":function(e){e.preventDefault();var t=this.$el.hasClass("show-advanced");t&&this.$(".advanced-setting > .selected").length&&this.$(".nav a:first").click(),this.$el.toggleClass("show-advanced",!t)
},"onSettingsGroupClick":function(e){e.preventDefault();var t=n(e.currentTarget),i=t.attr("href");"#connect-server-group"===i?(this.form=this.connectSettings.currentView,this.ui.footer.addClass("hidden")):"#agents-server-group"===i?(this.form=this.agentsSettings.currentView,this.ui.footer.addClass("hidden")):(this.form=null,this.ui.footer.removeClass("hidden")),this.$(".settings-group").removeClass("active"),this.$(i).addClass("active"),this.$(".nav a").removeClass("selected"),t.addClass("selected")
},"onDirectorySettingsClick":function(e){e.preventDefault();var n=new c([],{"server":this.model,"url":"/system/:/prefs"});n.fetch().done(t.bind(function(){s.trigger("show:modal",new f({"model":this.model,"collection":n}))},this))},"onInputChange":function(e){if(!this.form){var t=e.currentTarget,n=t.value;"checkbox"!=t.type||t.checked||(n="0"),this.changes[t.name]=n,this.ui.submitBtn.removeClass("disabled"),this.ui.message.text("")}},"onSubmit":function(e){e.preventDefault(),this.saveChanges()}});
return m}),define("hb!templates/desktop/settings/DevicesView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s="";return s+="\n      ",i=n["if"].call(e,e&&e.title,{"hash":{},"inverse":d.noop,"fn":d.program(2,r,t),"data":t}),(i||0===i)&&(s+=i),s+="\n    "}function r(e,t){var i,s,a,r="";return r+='\n        <li>\n          <a class="btn-gray ',a={"hash":{},"inverse":d.noop,"fn":d.program(3,o,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,e&&e.id,"all",a):u.call(e,"if_eq",e&&e.id,"all",a),(s||0===s)&&(r+=s),r+='" data-id="',(s=n.id)?s=s.call(e,{"hash":{},"data":t}):(s=e&&e.id,s=typeof s===h?s.call(e,{"hash":{},"data":t}):s),r+=p(s)+'" href="#">',a={"hash":{},"data":t},r+=p((i=n.t||e&&e.t,i?i.call(e,e&&e.title,a):u.call(e,"t",e&&e.title,a)))+"</a>\n        </li>\n      "
}function o(){return"selected"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var l,c="",d=this,u=n.helperMissing,h="function",p=this.escapeExpression;return c+='<div class="col-sm-4 col-md-3">\n  <ul class="nav nav-stacked nav-sidebar">\n    ',l=n.each.call(t,t&&t.deviceTypes,{"hash":{},"inverse":d.noop,"fn":d.program(1,a,s),"data":s}),(l||0===l)&&(c+=l),c+='\n  </ul>\n</div>\n\n<div class="device-list-container col-sm-8 col-md-9"></div>\n'})}),define("hb!templates/desktop/lists/settings/DeviceListItem",["handlebars"],function(e){return e.template(function(e,t,n,i,s){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{},'<div class="card card-device">\n  <i class="device-icon"></i>\n\n  <div class="card-actions">\n    <button class="remove-device-btn btn-gray btn-danger" href="#"><i class="glyphicon ban"></i></button>\n  </div>\n\n  <h4 class="product"></h4>\n\n  <div class="pull-right">\n    <div class="last-seen text-muted"></div>\n\n    <span class="sync-info hidden">\n      <span class="glyphicon circle-arrow-down sync-icon"></span>\n      <span class="sync-count"></span>\n      <span class="sync-size"></span>\n    </span>\n  </div>\n\n  <span class="version text-muted"></span>\n\n  <div class="device-info-container">\n    <div class="name"></div>\n    <div class="device text-muted"></div>\n    <div class="platform-info text-muted">\n      <span class="platform"></span>\n      <span class="platform-version"></span>\n    </div>\n  </div>\n</div>\n'
})}),define("plex/base/utils/DeviceIcons",["underscore"],function(e){var t={"pms":/plex.*media.*server|plex.*media.*hub/i,"osx":/macosx/i,"pht":/plex.*home.*theater|plex.*media.*center/i,"win8":/windows/i,"wp":/windows.*phone|wince/i,"ios":/ios/i,"android":/android/i,"chrome":/chrome/i,"safari":/safari/i,"firefox":/firefox/i,"ie":/internet.*explorer|explorer.*windows/i,"opera":/opera/i,"wiiu":/wii.*u/i,"samsung":/samsung/i,"roku":/roku/i,"atv":/plex.*atv/i,"gtv":/google.*tv/i,"cloudsync":/cloudsync/i,"dlna":/dlna/i},n=e.pairs(t),i={};
return{"getIcon":function(t){var s="default";return t?i.hasOwnProperty(t)?i[t]:(e.every(n,function(e){var n=e[1].test(t);return n&&(s=e[0],i[t]=s),!n}),s):s}}}),define("plex/desktop/views/lists/settings/DeviceListItem",["hb!templates/desktop/lists/settings/DeviceListItem.tpl","underscore","jquery","marionette","moment","plex/base/utils/Dispatcher","plex/base/utils/DeviceIcons","plex/base/adapters/LocalizerAdapter","plex/desktop/views/modals/ConfirmModal","plex/base/utils/formatters/StringUtil","plex/base/utils/formatters/NumberUtil"],function(e,t,n,i,s,a,r,o,l,c,d){var u=i.ItemView.extend({"tagName":"li","className":"card-item card-2-col-item","template":e,"ui":{"icon":".device-icon","syncInfo":".sync-info"},"events":{"click .remove-device-btn":"onRemoveClick"},"isMediaServer":function(){if(null==this.isServer){var e=this.model.get("product").toLowerCase();
this.isServer="plex media server"===e}return this.isServer},"bindings":{".device-icon":{"modelAttribute":"platform","manual":!0,"formatter":function(e,t){var n=r.getIcon(e);t.addClass("device-icon-"+n)}},".product":{"modelAttribute":"product","autohide":!1},".version":{"modelAttribute":"productVersion","autohide":!1},".last-seen":{"modelAttribute":"lastSeenAt","autohide":!0,"formatter":function(e){return e?s.unix(e).fromNow():void 0}},".name":{"modelAttribute":"name","autohide":!1},".platform":{"modelAttribute":"platform","autohide":function(e){return e&&this.isMediaServer()
}},".platform-version":{"modelAttribute":"platformVersion","autohide":function(e){return e&&this.isMediaServer()}},".device":{"modelAttribute":"device","autohide":!1},".sync-count":{"modelAttribute":"SyncList","autohide":!1,"formatter":function(e){if(e){var t,n=e.itemsCompleteCount;return n&&n>0&&(t=[n,c.pluralize("item",n)].join(" "),this.ui.syncInfo.removeClass("hidden")),t}}},".sync-size":{"modelAttribute":"SyncList","autohide":!1,"formatter":function(e){if(e){var t,n=e.totalSize;return n&&n>0&&(t=["(",d.bytesToSize(n),")"].join("")),t
}}},".remove-device-btn":{"modelAttribute":"product","manual":!0,"autohide":!0,"formatter":function(){return!this.isMediaServer()}}},"onRemoveClick":function(e){e.preventDefault();var n=o.get(),i=new l({"title":n.t("Remove Device"),"message":n.t("If you remove the device, you will need to sign in again on the device to restore access to Plex."),"confirmLabel":n.t("Remove"),"cancelLabel":n.t("Cancel"),"async":!0,"hasDanger":!0}),s=i.promise;s.done(t.bind(function(){var e=this.model.destroy({"wait":!0});
e.fail(t.bind(function(){a.trigger("show:alert",{"type":"error","message":n.t("Unable to remove device.")})})),e.always(function(){i.hide()})},this)),a.trigger("show:modal",i)}});return u}),define("plex/desktop/views/lists/settings/DeviceList",["plex/desktop/views/lists/BaseList","plex/desktop/views/lists/settings/DeviceListItem"],function(e,t){var n=e.extend({"tagName":"ul","className":"list card-list","itemView":t});return n}),define("plex/desktop/views/settings/DevicesView",["hb!templates/desktop/settings/DevicesView.tpl","underscore","jquery","marionette","plex/base/utils/Dispatcher","plex/desktop/views/lists/settings/DeviceList"],function(e,t,n,i,s,a){var r=i.Layout.extend({"className":"devices-container row","template":e,"regions":{"list":".device-list-container"},"events":{"click .nav a":"onDeviceTypeClick"},"ui":{"filters":".nav a"},"deviceTypes":[{"id":"all","title":"All","ids":["all"]},{"id":"web","title":"Web","ids":["Web Client","Plex Web"]},{"id":"pht","title":"Home Theater","ids":["Plex Home Theater","Plex for Home Theater","PlexHomeTheater","Plex Media Center"]},{"id":"pms","title":"Server","ids":["Plex Media Server"]},{"id":"android","title":"Android","ids":["Plex for Android","Android"]},{"id":"ios","title":"iOS","ids":["Plex/iOS"]},{"id":"samsung","title":"Samsung","ids":["Plex for Samsung"]},{"id":"google-tv","title":"Google TV","ids":["Google TV"]},{"id":"windows","title":"Windows","ids":["Plex for Windows"]},{"id":"apple-tv","title":"Apple TV","ids":["Plex-ATV"]},{"id":"windows-phone","title":"Windows Phone","ids":["Plex for Windows Phone"]},{"id":"plexbmc","title":"PleXBMC","ids":["PleXBMC"]},{"id":"cloud-sync","title":"Cloud Sync","ids":["Cloud Sync"]},{"id":"roku","title":"Roku","ids":["Plex for Roku"]},{"id":"popcorn-hour","title":"Popcorn Hour","ids":["Plex for Popcorn Hour"]},{"id":"other","title":"Other","ids":[]}],"initialize":function(){this.products=this.collection.products(),this.addOtherIds()
},"serializeData":function(){return{"deviceTypes":this.getFilteredDeviceTypes()}},"sortDeviceTypes":function(e){var n=t.sortBy(e,function(e){return"all"===e.id?"":e.title.toLowerCase()});return n},"getFilteredDeviceTypes":function(){var e=this.deviceTypes.filter(function(e){return"all"===e.id?!0:t.intersection(this.products,e.ids).length>0},this);return this.sortDeviceTypes(e)},"addOtherIds":function(){var e=t.flatten(t.map(this.deviceTypes,function(e){return e.ids})),n=t.difference(this.products,e),i=t.find(this.deviceTypes,function(e){return"other"===e.id
});t.each(n,function(e){i.ids.push(e)})},"onRender":function(){this.list.show(new a({"collection":this.collection}))},"onDeviceTypeClick":function(e){e.preventDefault();var i=n(e.currentTarget),s=i.data("id"),r=this.collection;if(this.ui.filters.removeClass("selected"),i.addClass("selected"),"all"!==s){var o=t.findWhere(this.deviceTypes,{"id":s});r=this.collection.filterByProducts(o.ids)}this.list.show(new a({"collection":r}))}});return r}),define("plex/desktop/views/settings/SettingsView",["hb!templates/desktop/settings/SettingsView.tpl","marionette","plex/base/utils/Dispatcher","plex/base/models/AppModel","plex/desktop/views/settings/WebSettingsView","plex/desktop/views/settings/ServerSettingsView","plex/desktop/views/settings/DevicesView"],function(e,t,n,i,s,a,r){var o={"web":s,"server":a,"devices":r},l=t.Layout.extend({"className":"container","template":e,"ui":{"webNavItem":".web-nav-item","serverNavItem":".server-nav-item","devicesNavItem":".devices-nav-item"},"regions":{"container":".settings-container"},"onlyAfterRender":["onSignedInChange","onPrimaryServerChange"],"initialize":function(e){this.options=e,this.subset=e.subset||"web";
var t=i.get("user");this.listenTo(t,"change:signedIn",this.onSignedInChange),this.listenTo(i,"change:primaryServer",this.onPrimaryServerChange),this.listenTo(n,"change:language",this.render)},"serializeData":function(){var e=i.get("user"),t=i.get("primaryServer");return{"subset":this.subset,"signedIn":e.get("signedIn"),"hasPrimaryServer":t&&!t.get("shared")}},"onRender":function(){var e=o[this.subset];this.container.show(new e(this.options))},"onSignedInChange":function(e,t){this.ui.devicesNavItem.toggleClass("hidden",!t)
},"onPrimaryServerChange":function(e,t){var n=t&&!t.get("shared");this.ui.serverNavItem.toggleClass("hidden",!n)}});return l}),define("plex/desktop/routes/SettingsController",["plex/base/utils/Dispatcher","plex/base/adapters/LocalizerAdapter","plex/base/routes/BaseController","plex/base/models/AppModel","plex/base/models/SettingsModel","plex/desktop/views/settings/SettingsView","plex/desktop/views/error/ErrorView"],function(e,t,n,i,s,a,r){var o=n.extend({"settings":function(){var t=this.populateView();
t.done(function(){e.trigger("show:view",new a({"model":s,"subset":"web"}))})},"webSettings":function(){var t=this.populateView();t.done(function(){e.trigger("show:view",new a({"model":s,"subset":"web"}))})},"serverSettings":function(t){var n;n=t?{"serverID":t}:{"primaryServer":!0};var i=this.populateView(n);i.done(function(t){var n=t.server;e.trigger("show:view",new a({"model":n,"collection":n.get("settings"),"subset":"server"}))})},"devices":function(){var n=this.populateView({"serverID":"myPlex"});
n.done(function(){var n=i.get("user"),s=n.get("devices"),o=s.populate();o.done(function(){e.trigger("show:view",new a({"model":n,"collection":s,"subset":"devices"}))}),o.fail(function(){var n=t.get();e.trigger("show:view",new r({"message":n.t("Your devices are unavailable.")}))})})}});return o}),define("plex/desktop/routes/SettingsRouter",["plex/base/routes/BaseRouter","plex/desktop/routes/SettingsController"],function(e,t){var n=e.extend({"controller":new t,"appRoutes":{"!/settings":"settings","!/settings/web":"webSettings","!/settings/server(/:serverID)":"serverSettings","!/settings/devices":"devices"}});
return n}),define("hb!templates/desktop/activity/ActivityView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(){return"selected"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var r,o,l,c="",d=this,u=n.helperMissing,h=this.escapeExpression;return c+='<ul class="nav nav-header pull-right">\n  <li class="alerts-nav-item"><a class="alerts-btn btn-gray ',l={"hash":{},"inverse":d.noop,"fn":d.program(1,a,s),"data":s},r=n.if_eq||t&&t.if_eq,o=r?r.call(t,t&&t.subset,"alerts",l):u.call(t,"if_eq",t&&t.subset,"alerts",l),(o||0===o)&&(c+=o),c+='" href="#!/activity/alerts">',l={"hash":{},"data":s},c+=h((r=n.t||t&&t.t,r?r.call(t,"Alerts",l):u.call(t,"t","Alerts",l)))+'</a></li>\n  <li class="sync-nav-item"><a class="sync-btn btn-gray ',l={"hash":{},"inverse":d.noop,"fn":d.program(1,a,s),"data":s},r=n.if_eq||t&&t.if_eq,o=r?r.call(t,t&&t.subset,"sync",l):u.call(t,"if_eq",t&&t.subset,"sync",l),(o||0===o)&&(c+=o),c+='" href="#!/activity/sync">',l={"hash":{},"data":s},c+=h((r=n.t||t&&t.t,r?r.call(t,"Sync",l):u.call(t,"t","Sync",l)))+'</a></li>\n  <li class="now-playing-nav-item"><a class="now-playing-btn btn-gray ',l={"hash":{},"inverse":d.noop,"fn":d.program(1,a,s),"data":s},r=n.if_eq||t&&t.if_eq,o=r?r.call(t,t&&t.subset,"nowPlaying",l):u.call(t,"if_eq",t&&t.subset,"nowPlaying",l),(o||0===o)&&(c+=o),c+='" href="#!/activity/playing">',l={"hash":{},"data":s},c+=h((r=n.t||t&&t.t,r?r.call(t,"Now Playing",l):u.call(t,"t","Now Playing",l)))+'<span class="badge"></span></a></li>\n</ul>\n\n<h3>',l={"hash":{},"data":s},c+=h((r=n.t||t&&t.t,r?r.call(t,"Activity",l):u.call(t,"t","Activity",l)))+'</h3>\n\n<div class="activity-container"></div>\n'
})}),define("hb!templates/desktop/activity/AlertsView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s,a,o="";return o+='\n    <div class="filter-bar-right">\n      <span class="page-count">',a={"hash":{},"data":t},o+=h((i=n.t||e&&e.t,i?i.call(e,"{1} of {2}",e&&e.page,e&&e.pages,a):u.call(e,"t","{1} of {2}",e&&e.page,e&&e.pages,a)))+'</span>\n\n      <a class="previous-btn btn-gray ',s=n.unless.call(e,e&&e.enablePrevious,{"hash":{},"inverse":p.noop,"fn":p.program(2,r,t),"data":t}),(s||0===s)&&(o+=s),o+='" href="#">\n        <i class="glyphicon chevron-left"></i>\n      </a>\n\n      <a class="next-btn btn-gray ',s=n.unless.call(e,e&&e.enableNext,{"hash":{},"inverse":p.noop,"fn":p.program(2,r,t),"data":t}),(s||0===s)&&(o+=s),o+='" href="#">\n        <i class="glyphicon chevron-right"></i>\n      </a>\n    </div>\n  '
}function r(){return"disabled"}function o(e,t){var i,s,a="";return a+='\n  <div class="row row-padded">\n    <div class="col-md-8 col-md-offset-2">\n      <h1>',s={"hash":{},"data":t},a+=h((i=n.t||e&&e.t,i?i.call(e,"Alerts are restricted from shared users.",s):u.call(e,"t","Alerts are restricted from shared users.",s)))+"</h1>\n    </div>\n  </div>\n"}function l(){return'\n  <div class="alert-list-container"></div>\n'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var c,d="",u=n.helperMissing,h=this.escapeExpression,p=this;
return d+='<div class="filter-bar">\n  ',c=n.unless.call(t,t&&t.shared,{"hash":{},"inverse":p.noop,"fn":p.program(1,a,s),"data":s}),(c||0===c)&&(d+=c),d+="\n</div>\n\n",c=n["if"].call(t,t&&t.shared,{"hash":{},"inverse":p.program(6,l,s),"fn":p.program(4,o,s),"data":s}),(c||0===c)&&(d+=c),d+="\n"})}),define("hb!templates/desktop/lists/activity/AlertListItem",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(){return'\n  <i class="server-alert-icon glyphicon cogwheel"></i>\n'
}function r(e,t){var i,s,a;return a={"hash":{},"inverse":j.program(6,l,t),"fn":j.program(4,o,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,(i=e&&e.event,null==i||i===!1?i:i._type),"status",a):H.call(e,"if_eq",(i=e&&e.event,null==i||i===!1?i:i._type),"status",a),s||0===s?s:""}function o(){return'\n  <i class="server-alert-icon glyphicon bullhorn"></i>\n'}function l(e,t){var i,s,a;return a={"hash":{},"inverse":j.program(9,d,t),"fn":j.program(7,c,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,(i=e&&e.event,null==i||i===!1?i:i._type),"playing",a):H.call(e,"if_eq",(i=e&&e.event,null==i||i===!1?i:i._type),"playing",a),s||0===s?s:""
}function c(){return'\n  <i class="server-alert-icon glyphicon imac"></i>\n'}function d(e,t){var i,s,a;return a={"hash":{},"inverse":j.program(15,f,t),"fn":j.program(10,u,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,(i=e&&e.event,null==i||i===!1?i:i._type),"websocket",a):H.call(e,"if_eq",(i=e&&e.event,null==i||i===!1?i:i._type),"websocket",a),s||0===s?s:""}function u(e,t){var i,s,a="";return a+="\n  ",s=n["if"].call(e,(i=e&&e.event,null==i||i===!1?i:i.opened),{"hash":{},"inverse":j.program(13,p,t),"fn":j.program(11,h,t),"data":t}),(s||0===s)&&(a+=s),a+="\n"
}function h(){return'\n    <i class="server-alert-icon glyphicon bullhorn"></i>\n  '}function p(){return'\n    <i class="server-alert-icon glyphicon warning-sign"></i>\n  '}function f(e,t){var i,s,a;return a={"hash":{},"inverse":j.program(18,g,t),"fn":j.program(16,m,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,(i=e&&e.event,null==i||i===!1?i:i.state),0,a):H.call(e,"if_eq",(i=e&&e.event,null==i||i===!1?i:i.state),0,a),s||0===s?s:""}function m(){return'\n  <i class="server-alert-icon glyphicon plus"></i>\n'
}function g(e,t){var i,s,a;return a={"hash":{},"inverse":j.program(21,y,t),"fn":j.program(19,v,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,(i=e&&e.event,null==i||i===!1?i:i.state),5,a):H.call(e,"if_eq",(i=e&&e.event,null==i||i===!1?i:i.state),5,a),s||0===s?s:""}function v(){return'\n  <i class="server-alert-icon glyphicon ok-2"></i>\n'}function y(e,t){var i,s,a;return a={"hash":{},"inverse":j.program(24,w,t),"fn":j.program(22,b,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,(i=e&&e.event,null==i||i===!1?i:i.state),6,a):H.call(e,"if_eq",(i=e&&e.event,null==i||i===!1?i:i.state),6,a),s||0===s?s:""
}function b(){return'\n  <i class="server-alert-icon glyphicon magic"></i>\n'}function w(e,t){var i,s,a;return a={"hash":{},"inverse":j.program(27,k,t),"fn":j.program(25,x,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,(i=e&&e.event,null==i||i===!1?i:i.state),9,a):H.call(e,"if_eq",(i=e&&e.event,null==i||i===!1?i:i.state),9,a),s||0===s?s:""}function x(){return'\n  <i class="server-alert-icon glyphicon ban"></i>\n'}function k(){return'\n  <i class="server-alert-icon glyphicon tags"></i>\n'}function S(e,t){var i,s,a="";
return a+="\n  ",s={"hash":{},"data":t},a+=$((i=n.t||e&&e.t,i?i.call(e,"{1} set to {2}.",(i=e&&e.event,null==i||i===!1?i:i.label),(i=e&&e.event,null==i||i===!1?i:i.value),s):H.call(e,"t","{1} set to {2}.",(i=e&&e.event,null==i||i===!1?i:i.label),(i=e&&e.event,null==i||i===!1?i:i.value),s)))+"\n"}function C(e,t){var i,s,a;return a={"hash":{},"inverse":j.program(38,M,t),"fn":j.program(32,T,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,(i=e&&e.event,null==i||i===!1?i:i._type),"status",a):H.call(e,"if_eq",(i=e&&e.event,null==i||i===!1?i:i._type),"status",a),s||0===s?s:""
}function T(e,t){var i,s,a="";return a+="\n  ",s=n["if"].call(e,(i=e&&e.event,null==i||i===!1?i:i.message),{"hash":{},"inverse":j.program(35,I,t),"fn":j.program(33,A,t),"data":t}),(s||0===s)&&(a+=s),a+="\n"}function A(e,t){var i,s,a="";return a+="\n    ",s={"hash":{},"data":t},a+=$((i=n.t||e&&e.t,i?i.call(e,(i=e&&e.event,null==i||i===!1?i:i.message),s):H.call(e,"t",(i=e&&e.event,null==i||i===!1?i:i.message),s)))+"\n  "}function I(e,t){var i,s,a,r="";return r+="\n    ",a={"hash":{},"data":t},r+=$((i=n.t||e&&e.t,i?i.call(e,(i=e&&e.event,null==i||i===!1?i:i.title),a):H.call(e,"t",(i=e&&e.event,null==i||i===!1?i:i.title),a))),s=n["if"].call(e,(i=e&&e.event,null==i||i===!1?i:i.description),{"hash":{},"inverse":j.noop,"fn":j.program(36,P,t),"data":t}),(s||0===s)&&(r+=s),r+="\n  "
}function P(e,t){var i,s,a="";return a+=": ",s={"hash":{},"data":t},a+=$((i=n.t||e&&e.t,i?i.call(e,(i=e&&e.event,null==i||i===!1?i:i.description),s):H.call(e,"t",(i=e&&e.event,null==i||i===!1?i:i.description),s)))}function M(e,t){var i,s,a;return a={"hash":{},"inverse":j.program(41,_,t),"fn":j.program(39,D,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,(i=e&&e.event,null==i||i===!1?i:i._type),"timeline",a):H.call(e,"if_eq",(i=e&&e.event,null==i||i===!1?i:i._type),"timeline",a),s||0===s?s:""}function D(e,t){var i,s,a="";
return a+="\n  ",s={"hash":{},"data":t},a+=$((i=n.t||e&&e.t,i?i.call(e,(i=e&&e.event,null==i||i===!1?i:i.stateString),s):H.call(e,"t",(i=e&&e.event,null==i||i===!1?i:i.stateString),s)))+'\n  <a href="#!/server/',s={"hash":{},"data":t},a+=$((i=n.encodeUrl||e&&e.encodeUrl,i?i.call(e,e&&e.serverID,s):H.call(e,"encodeUrl",e&&e.serverID,s)))+"/details/",s={"hash":{},"data":t},a+=$((i=n.encodeUrl||e&&e.encodeUrl,i?i.call(e,e&&e.itemKey,s):H.call(e,"encodeUrl",e&&e.itemKey,s)))+'">'+$((i=e&&e.event,i=null==i||i===!1?i:i.mediaTitle,typeof i===W?i.apply(e):i))+"</a>\n  ",s={"hash":{},"data":t},a+=$((i=n.t||e&&e.t,i?i.call(e,"in",s):H.call(e,"t","in",s)))+'\n  <a href="#!/server/',s={"hash":{},"data":t},a+=$((i=n.encodeUrl||e&&e.encodeUrl,i?i.call(e,e&&e.serverID,s):H.call(e,"encodeUrl",e&&e.serverID,s)))+"/section/",s={"hash":{},"data":t},a+=$((i=n.encodeUrl||e&&e.encodeUrl,i?i.call(e,(i=e&&e.event,null==i||i===!1?i:i.sectionID),s):H.call(e,"encodeUrl",(i=e&&e.event,null==i||i===!1?i:i.sectionID),s)))+'">'+$((i=e&&e.event,i=null==i||i===!1?i:i.sectionTitle,typeof i===W?i.apply(e):i))+"</a>\n"
}function _(e,t){var i,s,a;return a={"hash":{},"inverse":j.program(44,L,t),"fn":j.program(42,E,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,(i=e&&e.event,null==i||i===!1?i:i._type),"playing",a):H.call(e,"if_eq",(i=e&&e.event,null==i||i===!1?i:i._type),"playing",a),s||0===s?s:""}function E(e,t){var i,s,a="";return a+="\n  ",s={"hash":{},"data":t},a+=$((i=n.t||e&&e.t,i?i.call(e,"{1} started playing {2} on {3}.",(i=e&&e.event,null==i||i===!1?i:i.username),(i=e&&e.event,null==i||i===!1?i:i.title),(i=e&&e.event,null==i||i===!1?i:i.player),s):H.call(e,"t","{1} started playing {2} on {3}.",(i=e&&e.event,null==i||i===!1?i:i.username),(i=e&&e.event,null==i||i===!1?i:i.title),(i=e&&e.event,null==i||i===!1?i:i.player),s)))+"\n"
}function L(e,t){var i,s,a;return a={"hash":{},"inverse":j.noop,"fn":j.program(45,R,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,(i=e&&e.event,null==i||i===!1?i:i._type),"websocket",a):H.call(e,"if_eq",(i=e&&e.event,null==i||i===!1?i:i._type),"websocket",a),s||0===s?s:""}function R(e,t){var i,s,a="";return a+="\n  ",s=n["if"].call(e,(i=e&&e.event,null==i||i===!1?i:i.opened),{"hash":{},"inverse":j.program(48,O,t),"fn":j.program(46,N,t),"data":t}),(s||0===s)&&(a+=s),a+="\n"}function N(e,t){var i,s,a="";
return a+="\n    ",s={"hash":{},"data":t},a+=$((i=n.t||e&&e.t,i?i.call(e,"Opened connection to {1}, listening for events.",e&&e.serverName,s):H.call(e,"t","Opened connection to {1}, listening for events.",e&&e.serverName,s)))+"\n  "}function O(e,t){var i,s;return s=n["if"].call(e,(i=e&&e.event,null==i||i===!1?i:i.closed),{"hash":{},"inverse":j.program(51,V,t),"fn":j.program(49,B,t),"data":t}),s||0===s?s:""}function B(e,t){var i,s,a="";return a+="\n    ",s={"hash":{},"data":t},a+=$((i=n.t||e&&e.t,i?i.call(e,"Connection to {1} closed.",e&&e.serverName,s):H.call(e,"t","Connection to {1} closed.",e&&e.serverName,s)))+"\n  "
}function V(e,t){var i,s,a="";return a+="\n    ",s={"hash":{},"data":t},a+=$((i=n.t||e&&e.t,i?i.call(e,"Unable to listen for events on {1}.",e&&e.serverName,s):H.call(e,"t","Unable to listen for events on {1}.",e&&e.serverName,s)))+"\n  "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var F,q,U,z="",j=this,H=n.helperMissing,$=this.escapeExpression,W="function";return U={"hash":{},"inverse":j.program(3,r,s),"fn":j.program(1,a,s),"data":s},F=n.if_eq||t&&t.if_eq,q=F?F.call(t,(F=t&&t.event,null==F||F===!1?F:F._type),"setting",U):H.call(t,"if_eq",(F=t&&t.event,null==F||F===!1?F:F._type),"setting",U),(q||0===q)&&(z+=q),z+='\n\n<div class="server-alert-details">\n<span class="server-alert-time">',U={"hash":{},"data":s},z+=$((F=n.formatDate||t&&t.formatDate,F?F.call(t,(F=t&&t.event,null==F||F===!1?F:F.time),"LT",U):H.call(t,"formatDate",(F=t&&t.event,null==F||F===!1?F:F.time),"LT",U)))+"</span>\n",U={"hash":{},"inverse":j.program(31,C,s),"fn":j.program(29,S,s),"data":s},F=n.if_eq||t&&t.if_eq,q=F?F.call(t,(F=t&&t.event,null==F||F===!1?F:F._type),"setting",U):H.call(t,"if_eq",(F=t&&t.event,null==F||F===!1?F:F._type),"setting",U),(q||0===q)&&(z+=q),z+="\n</div>\n"
})}),define("plex/desktop/views/lists/activity/AlertListItem",["hb!templates/desktop/lists/activity/AlertListItem.tpl","marionette","plex/base/adapters/LocalizerAdapter"],function(e,t,n){var i=t.ItemView.extend({"tagName":"li","className":"striped-list-item rounded-list-item alert-list-item","template":e,"serializeData":function(){var e=n.get(),t={"serverID":this.model.server.id,"serverName":this.model.server.get("friendlyName"),"itemKey":"/library/metadata/"+this.model.get("itemID"),"event":this.model.toJSON()};
if("timeline"==this.model.get("_type"))switch(t.event.sectionTitle=this.model.get("section")?this.model.get("section").get("title"):"section "+this.model.get("sectionID"),t.event.mediaTitle=this.model.get("title")||"an item",this.model.get("state")){case 0:t.event.stateString=e.t("Created");break;case 1:t.event.stateString=e.t("Progress for");break;case 2:t.event.stateString=e.t("Matching");break;case 3:t.event.stateString=e.t("Downloading metadata for");break;case 4:t.event.stateString=e.t("Loading metadata for");
break;case 5:t.event.stateString=e.t("Finished processing");break;case 6:t.event.stateString=e.t("Analyzing");break;case 9:t.event.stateString=e.t("Deleted")}return t}});return i}),define("plex/desktop/views/lists/activity/AlertList",["plex/desktop/views/lists/BaseList","plex/desktop/views/lists/activity/AlertListItem"],function(e,t){var n=e.extend({"tagName":"ul","className":"list alert-list","itemView":t,"reversed":!0});return n}),define("plex/desktop/views/activity/AlertsView",["hb!templates/desktop/activity/AlertsView.tpl","marionette","plex/base/utils/Dispatcher","plex/base/adapters/LocalizerAdapter","plex/base/models/AppModel","plex/desktop/views/dropdowns/PrimaryServerDropdown","plex/desktop/views/lists/activity/AlertList"],function(e,t,n,i,s,a,r){var o=t.Layout.extend({"className":"alerts-container","template":e,"ui":{"pageCount":".page-count","previousBtn":".previous-btn","nextBtn":".next-btn"},"regions":{"serverDropdown":".filter-bar","list":".alert-list-container"},"modelEvents":{"change:shared":"onSharedChange"},"collectionEvents":{"add":"onAlertAdd"},"events":{"click .previous-btn":"onPreviousClick","click .next-btn":"onNextClick"},"onlyAfterRender":["onAlertAdd"],"initialize":function(){this.shared=this.model.get("shared"),this.page=1,this.listCollection=this.collection.clone(this.collection.page(this.page,{"reverse":!0})),this.listCollection.stopListening(),s.set("primaryServer",this.model),this.listenTo(s,"change:primaryServer",this.onPrimaryServerChange)
},"serializeData":function(){var e=this.collection.pages();return{"shared":this.shared,"page":this.page,"pages":e,"enablePrevious":this.page>1,"enableNext":this.page<e}},"updatePages":function(){var e=i.get(),t=this.collection.pages();this.ui.pageCount.text(e.t("{1} of {2}",this.page,t)),this.ui.previousBtn.toggleClass("disabled",this.page<2),this.ui.nextBtn.toggleClass("disabled",this.page>=t)},"updateList":function(){this.listCollection.reset(this.collection.page(this.page,{"reverse":!0}))},"onRender":function(){this.serverDropdown.append(new a),this.shared||this.list.append(new r({"collection":this.listCollection}))
},"onPrimaryServerChange":function(e,t){t&&n.trigger("navigate","alerts",{"serverID":t.id})},"onSharedChange":function(e,t){this.shared=t,this.render()},"onAlertAdd":function(){this.shared||(this.updatePages(),this.updateList())},"onPreviousClick":function(e){e.preventDefault(),this.ui.previousBtn.isDisabled()||(this.page--,this.updatePages(),this.updateList())},"onNextClick":function(e){e.preventDefault(),this.ui.nextBtn.isDisabled()||(this.page++,this.updatePages(),this.updateList())}});return o
}),define("hb!templates/desktop/activity/SyncView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s="";return s+='\n    <div class="filter-bar-right">\n      ',i=n["if"].call(e,e&&e.hasTouchScreen,{"hash":{},"inverse":w.noop,"fn":w.program(2,r,t),"data":t}),(i||0===i)&&(s+=i),s+='\n      <a class="refresh-btn btn-gray" href="#"><i class="glyphicon repeat"></i></a>\n    </div>\n  '}function r(){return'<a class="edit-btn btn-gray" href="#"><i class="glyphicon pencil"></i></a>'
}function o(e,t){var i,s,a="";return a+='\n  <div class="row row-padded">\n    <div class="col-md-8 col-md-offset-2">\n      <h1>',s={"hash":{},"data":t},a+=k((i=n.t||e&&e.t,i?i.call(e,"Sync is restricted from shared users.",s):x.call(e,"t","Sync is restricted from shared users.",s)))+"</h1>\n    </div>\n  </div>\n"}function l(e,t){var i,s="";return s+="\n  ",i=n["if"].call(e,e&&e.hasPlexPass,{"hash":{},"inverse":w.program(20,v,t),"fn":w.program(7,c,t),"data":t}),(i||0===i)&&(s+=i),s+="\n"}function c(e,t){var i,s="";
return s+="\n    ",i=n["if"].call(e,e&&e.devices,{"hash":{},"inverse":w.program(18,g,t),"fn":w.program(8,d,t),"data":t}),(i||0===i)&&(s+=i),s+="\n  "}function d(e,t){var i,s="";return s+='\n      <div class="row">\n        <div class="col-sm-4 col-md-3">\n          <ul class="nav nav-stacked nav-sidebar">\n            ',i=n.each.call(e,e&&e.devices,{"hash":{},"inverse":w.noop,"fn":w.programWithDepth(9,u,t,e),"data":t}),(i||0===i)&&(s+=i),s+='\n          </ul>\n        </div>\n\n        <div class="sync-device-container col-sm-8 col-md-9"></div>\n      </div>\n    '
}function u(e,t,i){var s,a,r,o="";return o+='\n              <li>\n                <a class="btn-gray ',r={"hash":{},"inverse":w.noop,"fn":w.program(10,h,t),"data":t},s=n.if_eq||i&&i.if_eq,a=s?s.call(e,(s=i&&i.selectedDevice,null==s||s===!1?s:s.id),e&&e.id,r):x.call(e,"if_eq",(s=i&&i.selectedDevice,null==s||s===!1?s:s.id),e&&e.id,r),(a||0===a)&&(o+=a),o+='" data-id="',(a=n.id)?a=a.call(e,{"hash":{},"data":t}):(a=e&&e.id,a=typeof a===S?a.call(e,{"hash":{},"data":t}):a),o+=k(a)+'" href="#">\n                  ',a=n["if"].call(e,e&&e.name,{"hash":{},"inverse":w.program(14,f,t),"fn":w.program(12,p,t),"data":t}),(a||0===a)&&(o+=a),o+=" ",a=n["if"].call(e,e&&e.isCloudSync,{"hash":{},"inverse":w.noop,"fn":w.program(16,m,t),"data":t}),(a||0===a)&&(o+=a),o+="\n                </a>\n              </li>\n            "
}function h(){return"selected"}function p(e,t){var i;return(i=n.name)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.name,i=typeof i===S?i.call(e,{"hash":{},"data":t}):i),k(i)}function f(e,t){var i;return(i=n.device)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.device,i=typeof i===S?i.call(e,{"hash":{},"data":t}):i),k(i)}function m(){return'<i class="cloud-sync-icon glyphicon cloud"></i><button class="cloud-sync-settings-btn btn-link btn-gray"><i class="glyphicon cogwheel"></i></button>'}function g(e,t){var i,s,a="";
return a+='\n      <div class="row row-padded">\n        <h4 class="text-muted text-center">',s={"hash":{},"data":t},a+=k((i=n.t||e&&e.t,i?i.call(e,"You have no sync capable devices.",s):x.call(e,"t","You have no sync capable devices.",s)))+"</h4>\n      </div>\n    "}function v(e,t){var i,s,a,r="";return r+='\n    <div class="row row-padded">\n      <h4 class="text-muted text-center">',a={"hash":{},"data":t},r+=k((i=n.t||e&&e.t,i?i.call(e,"You need a Plex Pass to use the sync feature.",a):x.call(e,"t","You need a Plex Pass to use the sync feature.",a)))+'</h4>\n\n      <p class="text-center">\n        <a class="btn btn-sm btn-primary" href="',(s=n.plexPassUrl)?s=s.call(e,{"hash":{},"data":t}):(s=e&&e.plexPassUrl,s=typeof s===S?s.call(e,{"hash":{},"data":t}):s),r+=k(s)+'" target="_blank">',a={"hash":{},"data":t},r+=k((i=n.t||e&&e.t,i?i.call(e,"Learn More",a):x.call(e,"t","Learn More",a)))+"</a>\n      </p>\n    </div>\n  "
}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var y,b="",w=this,x=n.helperMissing,k=this.escapeExpression,S="function";return b+='<div class="filter-bar">\n  ',y=n.unless.call(t,t&&t.shared,{"hash":{},"inverse":w.noop,"fn":w.program(1,a,s),"data":s}),(y||0===y)&&(b+=y),b+="\n</div>\n\n",y=n["if"].call(t,t&&t.shared,{"hash":{},"inverse":w.program(6,l,s),"fn":w.program(4,o,s),"data":s}),(y||0===y)&&(b+=y),b+="\n"})}),define("hb!templates/desktop/activity/SyncDeviceView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};
var a,r,o="",l=n.helperMissing,c=this.escapeExpression;return o+='<div class="row row-loading">\n  <div class="loading loading-inline"></div>\n</div>\n\n<div class="sync-empty-message row row-padded hidden">\n  <p class="text-muted text-center">',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Nothing is synced to this device.",r):l.call(t,"t","Nothing is synced to this device.",r)))+'</p>\n</div>\n\n<div class="sync-item-list-container"></div>\n'})}),define("hb!templates/desktop/lists/activity/SyncItemTileListItem",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(){return"cloud-download"
}function r(){return"circle-arrow-down"}function o(){return"hidden"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var l,c="",d=this;return c+='<a class="media-poster-container" href="#">\n  <div class="media-poster">\n    <div class="media-poster-overlay"></div>\n\n    <div class="sync-status">\n      <div class="sync-status-transcode hidden"></div>\n\n      <i class="sync-status-icon sync-complete-icon glyphicon ok-2 hidden"></i>\n      <i class="sync-status-icon sync-waiting-icon glyphicon ',l=n["if"].call(t,t&&t.isCloudSync,{"hash":{},"inverse":d.program(3,r,s),"fn":d.program(1,a,s),"data":s}),(l||0===l)&&(c+=l),c+=' hidden"></i>\n      <i class="sync-status-icon sync-processing-icon glyphicon more hidden"></i>\n      <i class="sync-status-icon sync-failed-icon glyphicon warning-sign ',l=n.unless.call(t,t&&t.isFailure,{"hash":{},"inverse":d.noop,"fn":d.program(5,o,s),"data":s}),(l||0===l)&&(c+=l),c+='"></i>\n      <i class="sync-status-icon sync-unknown-icon glyphicon circle-question-mark ',l=n["if"].call(t,t&&t.isFailure,{"hash":{},"inverse":d.noop,"fn":d.program(5,o,s),"data":s}),(l||0===l)&&(c+=l),c+='"></i>\n    </div>\n\n    <div class="media-poster-actions">\n      <button class="edit-btn media-poster-btn btn-link" tabindex="-1"><i class="glyphicon pencil"></i></button>\n      <button class="delete-btn media-poster-btn btn-link btn-danger" tabindex="-1"><i class="glyphicon ban"></i></button>\n    </div>\n  </div>\n\n  <div class="media-title media-heading"></div>\n  <div class="media-subtitle-1 media-heading secondary"></div>\n  <div class="media-context media-heading secondary"></div>\n</a>\n'
})}),define("plex/base/models/library/SyncMetadataCollection",["underscore","plex/base/models/library/MetadataCollection","plex/base/models/library/SyncMetadataModel"],function(e,t,n){var i=t.extend({"model":n,"url":function(){return"/sync/items/"+this.syncItemId},"initialize":function(e,t){this.syncItemId=t.syncItemId},"parse":function(){var n=t.prototype.parse.apply(this,arguments);return e.each(n,e.bind(function(e){e.syncItemId=this.syncItemId},this)),n}});return i}),define("hb!templates/desktop/modals/SyncStatusModal",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e){var t,n="";
return n+='\n        <p class="text-muted"><i class="glyphicon warning-sign"></i> '+u((t=e&&e.Status,t=null==t||t===!1?t:t.failure,typeof t===d?t.apply(e):t))+"</p>\n      "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var r,o,l,c="",d="function",u=this.escapeExpression,h=n.helperMissing,p=this;return c+='<div class="modal-dialog">\n  <div class="modal-content">\n    <div class="modal-header">\n      <button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button>\n      <h4 class="modal-title"><i class="modal-icon glyphicon download"></i> ',l={"hash":{},"data":s},c+=u((r=n.t||t&&t.t,r?r.call(t,"Sync Status",l):h.call(t,"t","Sync Status",l)))+'</h4>\n    </div>\n\n    <div class="modal-body modal-body-scroll minimal-scroll">\n      <h4 class="sync-item-title">',(o=n.rootTitle)?o=o.call(t,{"hash":{},"data":s}):(o=t&&t.rootTitle,o=typeof o===d?o.call(t,{"hash":{},"data":s}):o),c+=u(o)+" &middot; ",(o=n.title)?o=o.call(t,{"hash":{},"data":s}):(o=t&&t.title,o=typeof o===d?o.call(t,{"hash":{},"data":s}):o),c+=u(o)+"</h3>\n\n      ",o=n["if"].call(t,(r=t&&t.Status,null==r||r===!1?r:r.failure),{"hash":{},"inverse":p.noop,"fn":p.program(1,a,s),"data":s}),(o||0===o)&&(c+=o),c+='\n\n      <div class="sync-status-list-container"></div>\n    </div>\n  </div>\n</div>\n'
})}),define("hb!templates/desktop/lists/activity/SyncStatusListItem",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s,a="";return a+='\n    <i class="glyphicon cloud-download"></i> ',s={"hash":{},"data":t},a+=h((i=n.t||e&&e.t,i?i.call(e,"Waiting to be uploaded",s):u.call(e,"t","Waiting to be uploaded",s)))+"\n  "}function r(e,t){var i,s,a="";return a+='\n    <i class="glyphicon circle-arrow-down"></i> ',s={"hash":{},"data":t},a+=h((i=n.t||e&&e.t,i?i.call(e,"Waiting to be downloaded",s):u.call(e,"t","Waiting to be downloaded",s)))+"\n  "
}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var o,l,c,d="",u=n.helperMissing,h=this.escapeExpression,p=this;return d+='<div class="media-poster"></div>\n\n<p class="title"></p>\n\n<p class="complete-subtitle subtitle hidden">\n  <i class="glyphicon ok-2"></i> ',c={"hash":{},"data":s},d+=h((o=n.t||t&&t.t,o?o.call(t,"Synced",c):u.call(t,"t","Synced",c)))+'\n</p>\n\n<p class="waiting-subtitle subtitle hidden">\n  ',l=n["if"].call(t,t&&t.isCloudSync,{"hash":{},"inverse":p.program(3,r,s),"fn":p.program(1,a,s),"data":s}),(l||0===l)&&(d+=l),d+='\n</p>\n\n<p class="downloading-subtitle subtitle hidden">\n  <i class="glyphicon more"></i> ',c={"hash":{},"data":s},d+=h((o=n.t||t&&t.t,o?o.call(t,"Downloading",c):u.call(t,"t","Downloading",c)))+' &middot; <span class="transcode-progress"></span>%\n</p>\n\n<p class="converting-subtitle subtitle hidden">\n  <i class="glyphicon more"></i> ',c={"hash":{},"data":s},d+=h((o=n.t||t&&t.t,o?o.call(t,"Converting",c):u.call(t,"t","Converting",c)))+' &middot; <span class="transcode-progress"></span>% &middot; <span class="transcode-remaining"></span>\n</p>\n\n<p class="processing-subtitle subtitle hidden">\n  <i class="glyphicon more"></i> ',c={"hash":{},"data":s},d+=h((o=n.t||t&&t.t,o?o.call(t,"Waiting to be converted",c):u.call(t,"t","Waiting to be converted",c)))+'\n</p>\n\n<p class="unknown-subtitle subtitle hidden">\n  <i class="glyphicon circle-question-mark"></i> ',c={"hash":{},"data":s},d+=h((o=n.t||t&&t.t,o?o.call(t,"Unknown",c):u.call(t,"t","Unknown",c)))+'\n</p>\n\n<p class="failed-subtitle subtitle hidden">\n  <i class="glyphicon warning-sign"></i> <span class="error-message"></span>\n</p>\n'
})}),define("plex/desktop/views/lists/activity/SyncStatusListItem",["hb!templates/desktop/lists/activity/SyncStatusListItem.tpl","underscore","marionette","plex/base/utils/formatters/DateTimeUtil","plex/base/adapters/LocalizerAdapter","plex/desktop/views/images/MediaPosterImage"],function(e,t,n,i,s,a){var r=n.ItemView.extend({"tagName":"li","className":"sync-status-list-item","template":e,"ui":{"poster":".media-poster"},"initialize":function(e){this.syncItem=e.syncItem,this.transcodeJobs=this.model.server.get("transcodeJobs"),this.$el.addClass(this.model.get("type")),this.image=new a({"model":this.model,"type":this.model.get("type"),"getUrl":this.getPosterUrl,"height":50,"background":!1}),this.listenTo(this.transcodeJobs,"reset",function(){this.model.trigger("change:Media",this.model,this.model.get("Media"))
})},"serializeData":function(){return{"isCloudSync":this.model.device.get("isCloudSync")}},"getPosterUrl":function(e){return e||this.model.get("parentThumb")||this.model.get("grandparentThumb")},"analyzeTranscodeJobs":function(){var e;if(this.transcodeJobs.each(t.bind(function(t){if(this.syncItem.id===t.get("syncItemId")){var n=this.model.get("thumb"),i=this.model.get("title"),s=t.get("transcodeThumb"),a=t.get("title"),r=a&&a.indexOf(i)>-1,o=!0;if(n&&s){var l=new RegExp("(.+)"+t.get("thumb")+"$");
o=l.exec(n)}r&&o&&(e=t)}},this)),e&&e.get("progress")>0){var n=Math.round(10*e.get("speed"))/10,s=i.formatMinutesRemaining(e.get("remaining")),a=Math.round(10*e.get("progress"))/10;return{"active":!0,"speed":n,"remaining":s,"progress":a}}return{"active":!1}},"analyzeParts":function(){var e=/^(transcoded|downloaded|directplay)$/,t=/^downloading$/,n=/^(pending|transcoding)$/,i=/^failed$/,s="complete",a=this.model.get("Media");if(!a.length)return"unknown";for(var r=0,o=a.length;o>r;r++)for(var l=a[r].Part,c=0,d=l.length;d>c;c++){var u=l[c],h=u.transcodeState;
i.test(h)&&(s=u.transcodeStateContext),n.test(h)&&(s="processing"),t.test(h)&&(s="downloading"),e.test(h)&&"processing"!==s&&(s=u.key?"waiting":"processing")}return s},"getErrorMessage":function(e){var t=s.get();switch(e){case"sourceFileUnavailable":return t.t("This media is inaccessible. Please check that the file exists with the correct permissions.");case"sourceFileMetadataError":return t.t("The metadata for this media is invalid. Please reanalyze the media and try again.");case"clientProfileError":return t.t("The client profile for the sync target is invalid.");
case"ioError":return t.t("An error occurred processing this media. Please check that the disk is not full.");case"transcoderError":return t.t("The transcoder was unable to process this media.");case"mediaAnalysisError":return t.t("This media was unable to be analyzed.");case"downloadFailed":return t.t("This media was unable to be downloaded. Please check that it is still available and try again.");case"unknownError":return t.t("An error occurred while syncing this media.")}return t.t("An error occurred while syncing this media.")
},"bindings":{".title":{"modelAttribute":"title"},".subtitle":{"modelAttribute":"Media","manual":!0,"formatter":function(){var e=this.analyzeParts(),t=this.analyzeTranscodeJobs();switch(this.$(".subtitle").addClass("hidden"),e){case"complete":this.$(".complete-subtitle").removeClass("hidden");break;case"waiting":this.$(".waiting-subtitle").removeClass("hidden");break;case"downloading":t.active?(this.$(".downloading-subtitle").removeClass("hidden"),this.$(".transcode-progress").text(t.progress)):this.$(".processing-subtitle").removeClass("hidden");
break;case"processing":t.active?(this.$(".converting-subtitle").removeClass("hidden"),this.$(".transcode-progress").text(t.progress),this.$(".transcode-remaining").text(t.remaining)):this.$(".processing-subtitle").removeClass("hidden");break;case"unknown":this.$(".unknown-subtitle").removeClass("hidden");break;default:this.$(".failed-subtitle").removeClass("hidden"),this.$(".error-message").text(this.getErrorMessage(e))}}}},"onRender":function(){this.image.setElement(this.ui.poster)}});return r}),define("plex/desktop/views/lists/activity/SyncStatusList",["plex/desktop/views/lists/BaseList","plex/desktop/views/lists/activity/SyncStatusListItem"],function(e,t){var n=e.extend({"tagName":"ul","className":"list sync-status-list","itemView":t});
return n}),define("plex/desktop/views/modals/SyncStatusModal",["hb!templates/desktop/modals/SyncStatusModal.tpl","plex/desktop/views/modals/BaseModal","plex/desktop/views/lists/activity/SyncStatusList"],function(e,t,n){var i=t.extend({"name":"syncStatusModal","template":e,"regions":{"list":".sync-status-list-container"},"onRender":function(){t.prototype.onRender.apply(this,arguments),this.list.show(new n({"collection":this.collection,"itemViewOptions":{"syncItem":this.model}}))}});return i}),define("hb!templates/desktop/modals/SyncModal",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s="";
return s+="\n      ",i=n["if"].call(e,e&&e.showCloudSyncChannelError,{"hash":{},"inverse":k.program(4,o,t),"fn":k.program(2,r,t),"data":t}),(i||0===i)&&(s+=i),s+="\n    "}function r(e,t){var i,s,a="";return a+='\n        <div class="sync-error-container row">\n          <div class="col-sm-3 text-center">\n            <p class="sync-error-icon"><i class="glyphicon warning-sign"></i></p>\n          </div>\n\n          <div class="col-sm-8">\n            <h4>',s={"hash":{},"data":t},a+=w((i=n.t||e&&e.t,i?i.call(e,"Syncing channels to Cloud Sync is not supported.",s):b.call(e,"t","Syncing channels to Cloud Sync is not supported.",s)))+'</h4>\n            <h4 class="text-muted">',s={"hash":{},"data":t},a+=w((i=n.t||e&&e.t,i?i.call(e,"Try syncing library media to Cloud Sync.",s):b.call(e,"t","Try syncing library media to Cloud Sync.",s)))+"</h4>\n          </div>\n        </div>\n      "
}function o(e,t){var i,s,a,r="";return r+='\n        <form id="sync-form" class="settings-container">\n          <div class="modal-body">\n            <div class="form-group ',i=n.unless.call(e,e&&e.isSection,{"hash":{},"inverse":k.noop,"fn":k.program(5,l,t),"data":t}),(i||0===i)&&(r+=i),r+='">\n              <label class="control-label" for="sync-title">',a={"hash":{},"data":t},r+=w((i=n.t||e&&e.t,i?i.call(e,"Title",a):b.call(e,"t","Title",a)))+'</label>\n              <input type="text" id="sync-title" name="title" class="form-control" value="',(s=n.title)?s=s.call(e,{"hash":{},"data":t}):(s=e&&e.title,s=typeof s===x?s.call(e,{"hash":{},"data":t}):s),r+=w(s)+'" placeholder="',(s=n.title)?s=s.call(e,{"hash":{},"data":t}):(s=e&&e.title,s=typeof s===x?s.call(e,{"hash":{},"data":t}):s),r+=w(s)+'">\n            </div>\n\n            <div class="form-group">\n              <label class="control-label" for="sync-quality">',a={"hash":{},"data":t},r+=w((i=n.t||e&&e.t,i?i.call(e,"Quality",a):b.call(e,"t","Quality",a)))+'</label>\n              <select id="sync-quality" name="quality">\n                <option value="low" ',a={"hash":{},"inverse":k.noop,"fn":k.program(7,c,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,e&&e.selectedQuality,"low",a):b.call(e,"if_eq",e&&e.selectedQuality,"low",a),(s||0===s)&&(r+=s),r+=">",a={"hash":{},"data":t},r+=w((i=n.t||e&&e.t,i?i.call(e,"Low",a):b.call(e,"t","Low",a)))+'</option>\n                <option value="medium" ',a={"hash":{},"inverse":k.noop,"fn":k.program(7,c,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,e&&e.selectedQuality,"medium",a):b.call(e,"if_eq",e&&e.selectedQuality,"medium",a),(s||0===s)&&(r+=s),r+=">",a={"hash":{},"data":t},r+=w((i=n.t||e&&e.t,i?i.call(e,"Medium",a):b.call(e,"t","Medium",a)))+'</option>\n                <option value="high" ',a={"hash":{},"inverse":k.noop,"fn":k.program(7,c,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,e&&e.selectedQuality,"high",a):b.call(e,"if_eq",e&&e.selectedQuality,"high",a),(s||0===s)&&(r+=s),r+=">",a={"hash":{},"data":t},r+=w((i=n.t||e&&e.t,i?i.call(e,"High",a):b.call(e,"t","High",a)))+'</option>\n                <option value="highest" ',a={"hash":{},"inverse":k.noop,"fn":k.program(7,c,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,e&&e.selectedQuality,"highest",a):b.call(e,"if_eq",e&&e.selectedQuality,"highest",a),(s||0===s)&&(r+=s),r+=">",a={"hash":{},"data":t},r+=w((i=n.t||e&&e.t,i?i.call(e,"Highest",a):b.call(e,"t","Highest",a)))+'</option>\n              </select>\n            </div>\n\n            <div class="form-group ',a={"hash":{},"inverse":k.noop,"fn":k.program(5,l,t),"data":t},i=n.if_neq||e&&e.if_neq,s=i?i.call(e,e&&e.childElement,"video",a):b.call(e,"if_neq",e&&e.childElement,"video",a),(s||0===s)&&(r+=s),r+=" ",s=n.unless.call(e,e&&e.isDirectory,{"hash":{},"inverse":k.noop,"fn":k.program(5,l,t),"data":t}),(s||0===s)&&(r+=s),r+='">\n              <label class="control-label">\n                <input type="checkbox" id="sync-unwatched" name="unwatched" ',s=n["if"].call(e,e&&e.unwatched,{"hash":{},"inverse":k.noop,"fn":k.program(9,d,t),"data":t}),(s||0===s)&&(r+=s),r+="> ",a={"hash":{},"data":t},r+=w((i=n.t||e&&e.t,i?i.call(e,"Unwatched",a):b.call(e,"t","Unwatched",a)))+'\n              </label>\n            </div>\n\n            <div class="form-group ',s=n.unless.call(e,e&&e.isDirectory,{"hash":{},"inverse":k.noop,"fn":k.program(5,l,t),"data":t}),(s||0===s)&&(r+=s),r+='">\n              <label class="limit-label">',a={"hash":{},"data":t},r+=w((i=n.t||e&&e.t,i?i.call(e,"Limit",a):b.call(e,"t","Limit",a)))+'</label>\n              <label class="radio-inline" for="sync-limit-none"><input type="radio" id="sync-limit-none" name="limit" value="all" ',a={"hash":{},"inverse":k.noop,"fn":k.program(9,d,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,e&&e.selectedLimit,"all",a):b.call(e,"if_eq",e&&e.selectedLimit,"all",a),(s||0===s)&&(r+=s),r+="> ",a={"hash":{},"data":t},r+=w((i=n.t||e&&e.t,i?i.call(e,"None",a):b.call(e,"t","None",a)))+'</label>\n              <label class="radio-inline" for="sync-limit-items"><input type="radio" id="sync-limit-items" name="limit" value="count" ',a={"hash":{},"inverse":k.noop,"fn":k.program(9,d,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,e&&e.selectedLimit,"count",a):b.call(e,"if_eq",e&&e.selectedLimit,"count",a),(s||0===s)&&(r+=s),r+="> ",a={"hash":{},"data":t},r+=w((i=n.t||e&&e.t,i?i.call(e,"By number of items",a):b.call(e,"t","By number of items",a)))+'</label>\n              <label class="radio-inline ',a={"hash":{},"inverse":k.noop,"fn":k.program(5,l,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,e&&e.childElement,"photo",a):b.call(e,"if_eq",e&&e.childElement,"photo",a),(s||0===s)&&(r+=s),r+='" for="sync-limit-duration"><input type="radio" id="sync-limit-duration" name="limit" value="duration" ',a={"hash":{},"inverse":k.noop,"fn":k.program(9,d,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,e&&e.selectedLimit,"duration",a):b.call(e,"if_eq",e&&e.selectedLimit,"duration",a),(s||0===s)&&(r+=s),r+="> ",a={"hash":{},"data":t},r+=w((i=n.t||e&&e.t,i?i.call(e,"By duration",a):b.call(e,"t","By duration",a)))+'</label>\n            </div>\n\n            <div class="limit-value-group form-group ',a={"hash":{},"inverse":k.noop,"fn":k.program(5,l,t),"data":t},i=n.if_eq||e&&e.if_eq,s=i?i.call(e,e&&e.selectedLimit,"all",a):b.call(e,"if_eq",e&&e.selectedLimit,"all",a),(s||0===s)&&(r+=s),r+='">\n              <input type="text" id="sync-limit-value" name="limitValue" class="limit-value-control form-control" ',s=n["if"].call(e,e&&e.limitValue,{"hash":{},"inverse":k.noop,"fn":k.program(11,u,t),"data":t}),(s||0===s)&&(r+=s),r+='>\n              <label class="limit-items-label limit-value-label ',a={"hash":{},"inverse":k.noop,"fn":k.program(5,l,t),"data":t},i=n.if_neq||e&&e.if_neq,s=i?i.call(e,e&&e.selectedLimit,"count",a):b.call(e,"if_neq",e&&e.selectedLimit,"count",a),(s||0===s)&&(r+=s),r+='" for="sync-limit-value">',a={"hash":{},"data":t},r+=w((i=n.t||e&&e.t,i?i.call(e,"items",a):b.call(e,"t","items",a)))+'</label>\n              <label class="limit-duration-label limit-value-label ',a={"hash":{},"inverse":k.noop,"fn":k.program(5,l,t),"data":t},i=n.if_neq||e&&e.if_neq,s=i?i.call(e,e&&e.selectedLimit,"duration",a):b.call(e,"if_neq",e&&e.selectedLimit,"duration",a),(s||0===s)&&(r+=s),r+='" for="sync-limit-value">',a={"hash":{},"data":t},r+=w((i=n.t||e&&e.t,i?i.call(e,"minutes",a):b.call(e,"t","minutes",a)))+'</label>\n            </div>\n          </div>\n\n          <div class="modal-footer">\n            <button type="button" class="btn btn-default" data-dismiss="modal">',a={"hash":{},"data":t},r+=w((i=n.t||e&&e.t,i?i.call(e,"Cancel",a):b.call(e,"t","Cancel",a)))+'</button>\n            <button type="submit" class="submit-btn btn btn-primary btn-loading">\n              <div class="loading loading-sm"></div>\n              <span class="btn-label">',s=n["if"].call(e,e&&e.isNew,{"hash":{},"inverse":k.program(15,p,t),"fn":k.program(13,h,t),"data":t}),(s||0===s)&&(r+=s),r+='</span>\n            </button>\n          </div>\n        </form>\n\n        <div class="sync-success-container row">\n          <div class="col-sm-3 text-center">\n            <p class="sync-success-icon"><i class="glyphicon ok-2"></i></p>\n          </div>\n\n          <div class="col-sm-8">\n            <h4>',a={"hash":{},"data":t},r+=w((i=n.t||e&&e.t,i?i.call(e,"This media is being synced to your device.",a):b.call(e,"t","This media is being synced to your device.",a)))+'</h4>\n            <h4 class="text-muted">',a={"hash":{},"data":t},r+=w((i=n.t||e&&e.t,i?i.call(e,"Watch the status of the sync {1}here{2}.","<a class='sync-status-btn' href='#'>","</a>",a):b.call(e,"t","Watch the status of the sync {1}here{2}.","<a class='sync-status-btn' href='#'>","</a>",a)))+"</h4>\n          </div>\n        </div>\n      "
}function l(){return"hidden"}function c(){return"selected"}function d(){return"checked"}function u(e,t){var i,s="";return s+='value="',(i=n.limitValue)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.limitValue,i=typeof i===x?i.call(e,{"hash":{},"data":t}):i),s+=w(i)+'"'}function h(e,t){var i,s;return s={"hash":{},"data":t},w((i=n.t||e&&e.t,i?i.call(e,"Sync",s):b.call(e,"t","Sync",s)))}function p(e,t){var i,s;return s={"hash":{},"data":t},w((i=n.t||e&&e.t,i?i.call(e,"Save",s):b.call(e,"t","Save",s)))}function f(e,t){var i,s,a="";
return a+='\n      <div class="sync-error-container row">\n        <div class="col-sm-3 text-center">\n          <p class="sync-error-icon"><i class="glyphicon circle-exclamation-mark"></i></p>\n        </div>\n\n        <div class="col-sm-8">\n          <h4>',s={"hash":{},"data":t},a+=w((i=n.t||e&&e.t,i?i.call(e,"You have no sync capable devices.",s):b.call(e,"t","You have no sync capable devices.",s)))+'</h4>\n          <h4 class="text-muted">',s={"hash":{},"data":t},a+=w((i=n.t||e&&e.t,i?i.call(e,"Find more Plex apps {1}here{2}.","<a class='apps-btn' href='#'>","</a>",s):b.call(e,"t","Find more Plex apps {1}here{2}.","<a class='apps-btn' href='#'>","</a>",s)))+"</h4>\n        </div>\n      </div>\n    "
}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var m,g,v,y="",b=n.helperMissing,w=this.escapeExpression,x="function",k=this;return y+='<div class="modal-dialog">\n  <div class="modal-content">\n    <div class="modal-header">\n      <button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button>\n      <h4 class="modal-title"><i class="modal-icon glyphicon download"></i> ',v={"hash":{},"data":s},y+=w((m=n.t||t&&t.t,m?m.call(t,"Sync",v):b.call(t,"t","Sync",v)))+"</h4>\n    </div>\n\n    ",g=n["if"].call(t,t&&t.hasDevice,{"hash":{},"inverse":k.program(17,f,s),"fn":k.program(1,a,s),"data":s}),(g||0===g)&&(y+=g),y+="\n  </div>\n</div>\n"
})}),define("plex/desktop/views/modals/SyncModal",["hb!templates/desktop/modals/SyncModal.tpl","underscore","jquery","plex/base/utils/Dispatcher","plex/base/utils/types/MediaTypes","plex/base/utils/types/SyncQualities","plex/base/commands/Commands","plex/base/models/AppModel","plex/base/models/SettingsModel","plex/desktop/views/modals/BaseModal"],function(e,t,n,i,s,a,r,o,l,c){var d=c.extend({"name":"syncModal","className":"sync-modal modal fade","template":e,"limit":"all","ui":{"limitValueGroup":".limit-value-group","limitValueInput":"#sync-limit-value","limitValueLabel":".limit-value-label","limitItemsLabel":".limit-items-label","limitDurationLabel":".limit-duration-label","submitBtn":".submit-btn"},"events":t.extend({"change input[name=limit]":"onLimitChange","submit #sync-form":"onSubmit","click .sync-status-btn":"onSyncStatusClick","click .apps-btn":"onAppsClick"},c.prototype.events),"initialize":function(e){this.isNew=e.isNew,e.isNew?(this.type=e.type,this.subset=e.subset,this.models=e.models,this.isSection=e.isSection,this.isDirectory=!(!e.isDirectory&&"directory"!==this.type.element)):(this.type=s.getMediaTypeByString(this.model.get("metadataType")),this.isDirectory=this.model.get("isDirectory"),this.limit=this.model.get("Policy").scope),this.childMediaType=s.getChildMediaType(this.type.typeString)
},"serializeData":function(){var e=this.childMediaType.element,t={"hasDevice":!this.isNew||this.device,"showCloudSyncChannelError":this.model.get("isChannel")&&this.device.get("isCloudSync"),"title":this.isSection?this.model.getSyncTitle(this.models):this.model.get("title"),"childElement":e,"isNew":this.isNew,"isSection":this.isSection,"isDirectory":this.isDirectory,"selectedLimit":this.limit};if(this.isNew){var n="medium";"video"===e?n=l.get("syncVideoQuality"):"audio"===e?n=l.get("syncAudioQuality"):"photo"===e&&(n=l.get("syncPictureQuality")),t.selectedQuality=n,t.selectedLimit="all"
}else{var i=this.model.get("MediaSettings"),s=this.model.get("Policy"),r=a.getQualityByVideoQuality(i.videoQuality);t.selectedQuality=r.key,t.unwatched=parseInt(s.unwatched,10),t.limitValue=s.value,"duration"===t.selectedLimit&&(t.limitValue/=60)}return t},"create":function(e){var n={"isDirectory":this.isDirectory,"subset":this.subset,"models":this.models,"device":this.device,"settings":e,"childMediaType":this.childMediaType};this.isSection?n.section=this.model:n.item=this.model;var i=r.execute("createSyncItem",n);
i.done(t.bind(function(){this.$el.addClass("show-sync-success")},this)),i.always(t.bind(function(){this.ui.submitBtn&&this.ui.submitBtn.removeClass("active")},this))},"edit":function(e){var n={"syncItem":this.model,"settings":e},i=r.execute("editSyncItem",n);i.done(t.bind(this.hide,this)),i.fail(t.bind(function(){this.ui.submitBtn&&this.ui.submitBtn.removeClass("active")},this))},"onLimitChange":function(e){switch(this.limit=n(e.currentTarget).val(),this.ui.limitValueLabel.addClass("hidden"),this.limit){case"all":this.ui.limitValueGroup.addClass("hidden");
break;case"count":this.ui.limitValueGroup.removeClass("hidden"),this.ui.limitItemsLabel.removeClass("hidden"),this.ui.limitValueInput.val(10);break;case"duration":this.ui.limitValueGroup.removeClass("hidden"),this.ui.limitDurationLabel.removeClass("hidden"),this.ui.limitValueInput.val(60)}},"onSubmit":function(e){e.preventDefault();var t=this.ui.submitBtn;if(!t.hasClass("active")){t.addClass("active");var n=e.currentTarget,i={"title":n.title.value,"quality":n.quality.value,"unwatched":n.unwatched.checked?1:0,"scope":this.limit};
"all"!==this.limit&&(i.value=n.limitValue.value,"duration"===this.limit&&(i.value*=60)),this.isNew?this.create(i):this.edit(i)}},"onSyncStatusClick":function(e){e.preventDefault(),this.hide(),i.trigger("hide:photo"),i.trigger("navigate","sync",{"serverID":this.model.server.id,"deviceID":this.device.id})},"onAppsClick":function(e){e.preventDefault();var t=o.get("user");window.open(t.server.get("appsUrl"))}});return d}),define("plex/desktop/views/lists/activity/SyncItemTileListItem",["hb!templates/desktop/lists/activity/SyncItemTileListItem.tpl","underscore","backbone","marionette","plex/base/utils/Dispatcher","plex/base/utils/formatters/DateTimeUtil","plex/base/adapters/LocalizerAdapter","plex/base/commands/Commands","plex/base/models/library/SyncMetadataCollection","plex/desktop/views/images/MediaPosterImage","plex/desktop/views/progressbar/CircleProgressBarView","plex/desktop/views/modals/SyncStatusModal","plex/desktop/views/modals/SyncModal","plex/desktop/views/modals/ConfirmModal"],function(e,t,n,i,s,a,r,o,l,c,d,u,h,p){var f=i.Layout.extend({"tagName":"li","className":"poster-item media-tile-list-item sync-tile-list-item","template":e,"metadataItemsDelay":5e3,"ui":{"poster":".media-poster","transcodeStatus":".sync-status-transcode","transcodeTimeRemaining":".media-context","statusIcons":".sync-status-icon","completeIcon":".sync-complete-icon","waitingIcon":".sync-waiting-icon","processingIcon":".sync-processing-icon","failedIcon":".sync-failed-icon","unknownIcon":".sync-unknown-icon"},"regions":{"transcodeProgress":".sync-status-transcode"},"events":{"click a":"onClick","click .edit-btn":"onEditClick","click .delete-btn":"onDeleteClick"},"onlyAfterRender":["onMetadataItemsReset","onMediaChange","onTranscodeJobsReset"],"initialize":function(e){this.server=e.server,this.model.parent=this.server,this.type=this.model.get("metadataType"),this.$el.addClass(this.type);
var i=this.type,s=150;"episode"===i?i="show":("clip"===i||"playlistItem"===i)&&(s=250),this.image=new c({"server":this.server,"type":i,"width":s}),this.progressModel=new n.Model({"current":0});var a=this.server.get("transcodeJobs");this.metadataItems=new l([],{"server":this.server,"device":this.model.device,"syncItemId":this.model.id}),this.listenTo(this.metadataItems,"reset",this.onMetadataItemsReset),this.listenTo(a,"reset",this.onTranscodeJobsReset),this.metadataItems.fetch({"reset":!0}),this.server.supports("syncNotifications")?this.listenTo(this.metadataItems,"change:Media",this.onMediaChange):this.metadataItemsInterval=setInterval(t.bind(function(){this.metadataItems.fetch({"reset":!0})
},this),this.metadataItemsDelay)},"serializeData":function(){return{"syncItem":this.model.toJSON(),"isCloudSync":this.model.device.get("isCloudSync"),"isFailure":!!this.model.get("Status").failure}},"getPosterUrl":function(e){var t=e.get("thumb");return this.hasMultipleItems?this.hasSameParents?e.get("parentThumb")||e.get("grandparentThumb")||t:this.hasSameGrandparents?e.get("grandparentThumb")||e.get("parentThumb")||t:void 0:t},"updatePoster":function(e){if(this.hasPoster=!0,!e){var t=this.metadataItems.first();
if(!t)return;e=this.getPosterUrl(t)}this.image.url!==e&&(this.image.src=null,this.image.url=e,this.image.render())},"analyzeParts":function(e){if(this.model.get("Status").failure)return"failed";var n=e.models,i=n.length;if(!i)return"unknown";for(var s=/^(transcoded|downloaded|directplay)$/,a=/^(pending|transcoding|downloading)$/,r=/^failed$/,o="complete",l=[],c=[],d=0;i>d;d++){var u=n[d],h=u.get("Media");if(l.push(u.get("grandparentKey")),c.push(u.get("parentKey")),h.length||(o="unknown"),"failed"!==o&&"unknown"!==o)for(var p=0,f=h.length;f>p;p++)for(var m=h[p].Part,g=0,v=m.length;v>g;g++){var y=m[g],b=y.transcodeState;
r.test(b)&&(o="failed"),a.test(b)&&(o="processing"),s.test(b)&&"processing"!==o&&(o=y.key?"waiting":"processing")}}return this.hasMultipleItems=i>1,this.hasSameGrandparents=1===t.compact(t.uniq(l)).length,this.hasSameParents=1===t.compact(t.uniq(c)).length,this.hasPoster||this.updatePoster(),o},"bindings":{".media-title":{"modelAttribute":"title"},".media-subtitle-1":{"modelAttribute":"rootTitle"}},"onRender":function(){this.image.setElement(this.ui.poster),this.transcodeProgress.append(new d({"model":this.progressModel}))
},"onClose":function(){clearInterval(this.metadataItemsInterval),this.metadataItems.release()},"onMetadataItemsReset":function(e){var t=this.analyzeParts(e);if(this.ui.statusIcons.addClass("hidden"),this.ui.transcodeStatus.hasClass("hidden"))switch(t){case"complete":this.ui.completeIcon.removeClass("hidden");break;case"waiting":this.ui.waitingIcon.removeClass("hidden");break;case"processing":this.ui.processingIcon.removeClass("hidden");break;case"failed":this.ui.failedIcon.removeClass("hidden");break;
default:this.ui.unknownIcon.removeClass("hidden")}},"onMediaChange":function(){this.onMetadataItemsReset(this.metadataItems)},"onTranscodeJobsReset":function(e){var t=r.get(),n=e.where({"syncItemId":this.model.id});if(!n.length)return this.ui.transcodeStatus.hasClass("hidden")||(this.ui.transcodeStatus.addClass("hidden"),this.ui.waitingIcon.removeClass("hidden")),this.ui.transcodeTimeRemaining.text(""),void this.updatePoster();var i=n[0];if(this.ui.statusIcons.addClass("hidden"),i.get("progress")>0){this.ui.transcodeStatus.removeClass("hidden");
var s=i.get("type"),o=a.formatMinutesRemaining(i.get("remaining")),l=.01*i.get("progress");if(this.progressModel.set("fraction",l),"download"===s)this.progressModel.set("text",""+i.get("progress")+"%"),this.ui.transcodeTimeRemaining.text(t.t("Downloading"));else if("upload"===s)this.progressModel.set("text",""+i.get("progress")+"%"),this.ui.transcodeTimeRemaining.text(t.t("Uploading"));else{var c=Math.round(10*i.get("speed"))/10;c>10&&(c=Math.round(c)),this.progressModel.set("text",""+c+"x"),this.ui.transcodeTimeRemaining.text(o)
}this.updatePoster(i.get("thumb"))}else this.ui.transcodeStatus.addClass("hidden"),this.ui.processingIcon.removeClass("hidden")},"onClick":function(e){e.preventDefault(),s.trigger("show:modal",new u({"model":this.model,"collection":this.metadataItems}))},"onEditClick":function(e){e.stopImmediatePropagation(),e.preventDefault(),s.trigger("show:modal",new h({"model":this.model}))},"onDeleteClick":function(e){e.stopImmediatePropagation(),e.preventDefault();var n=r.get(),i=new p({"title":n.t("Stop Syncing"),"message":n.t("Are you sure you want to stop syncing this item? It will be removed from the device."),"confirmLabel":n.t("Remove"),"cancelLabel":n.t("Cancel"),"async":!0,"hasDanger":!0}),a=i.promise;
a.done(t.bind(function(){var e=this.model.destroy();e.done(t.bind(function(){o.execute("refreshSyncItems",{"server":this.server,"silent":!0,"skipContent":!0})},this)),e.always(function(){i.hide()})},this)),s.trigger("show:modal",i)}});return f}),define("plex/desktop/views/lists/activity/SyncItemTileList",["plex/desktop/views/lists/BaseList","plex/desktop/views/lists/activity/SyncItemTileListItem"],function(e,t){var n=e.extend({"tagName":"ul","className":"tile-list media-tile-list sync-tile-list show-context","itemView":t});
return n}),define("plex/desktop/views/activity/SyncDeviceView",["hb!templates/desktop/activity/SyncDeviceView.tpl","underscore","marionette","plex/base/models/AppModel","plex/base/models/user/SyncItemCollection","plex/desktop/views/lists/activity/SyncItemTileList"],function(e,t,n,i,s,a){var r=n.Layout.extend({"className":"sync-device-items-container","template":e,"ui":{"loading":".row-loading","empty":".sync-empty-message"},"regions":{"list":".sync-item-list-container"},"onlyAfterRender":["onSyncItemsReset"],"initialize":function(e){this.server=e.server,this.collection=new s([],{"server":this.server,"device":this.model});
var t=this.model.get("syncItems");this.listenTo(t,{"reset":this.onSyncItemsReset}),this.listenTo(this.collection,{"reset":this.onSyncItemsChange,"remove":this.onSyncItemsChange}),t.fetch({"cancelable":!0,"reset":!0})},"onRender":function(){this.list.show(new a({"collection":this.collection,"itemViewOptions":{"server":this.server}}))},"onSyncItemsReset":function(e){this.ui.loading.addClass("hidden"),this.collection.reset(e.filterByServer(this.server.id).models)},"onSyncItemsChange":function(){this.ui.empty.toggleClass("hidden",!!this.collection.length)
}});return r}),define("plex/desktop/views/activity/SyncView",["hb!templates/desktop/activity/SyncView.tpl","underscore","jquery","marionette","plex/base/utils/Dispatcher","plex/base/utils/Capabilities","plex/base/commands/Commands","plex/base/models/AppModel","plex/desktop/views/dropdowns/PrimaryServerDropdown","plex/desktop/views/activity/SyncDeviceView"],function(e,t,n,i,s,a,r,o,l,c){var d=i.Layout.extend({"className":"sync-container","template":e,"transcodeJobDelay":2e3,"ui":{"devices":".nav a"},"regions":{"filterBar":".filter-bar","container":".sync-device-container"},"modelEvents":{"change:shared":"onSharedChange"},"events":{"click .nav a":"onDeviceClick","click .edit-btn":"onEditClick","click .refresh-btn":"onRefreshClick","click .cloud-sync-settings-btn":"onCloudSyncSettingsClick"},"initialize":function(e){this.selectedDevice=e.selectedDevice,this.user=o.get("user"),this.shared=this.model.get("shared"),this.transcodeJobs=this.model.get("transcodeJobs"),o.set("primaryServer",this.model),this.listenTo(o,"change:primaryServer",this.onPrimaryServerChange),this.collection.length&&!this.shared&&(this.selectedDevice||(this.selectedDevice=this.collection.first()),this.fetchTranscodeJobs())
},"serializeData":function(){return{"shared":this.shared,"hasTouchScreen":a.hasTouchScreen,"hasPlexPass":this.user.hasPlexPass(),"plexPassUrl":this.user.server.get("plexPassUrl"),"selectedDevice":this.selectedDevice?this.selectedDevice.toJSON():null,"devices":this.collection.toJSON()}},"fetchTranscodeJobs":function(){this.transcodeJobs.fetch({"cancelable":!0,"reset":!0}),this.transcodeJobTimeout=setTimeout(t.bind(this.fetchTranscodeJobs,this),this.transcodeJobDelay)},"showList":function(){this.selectedDevice?this.container.show(new c({"model":this.selectedDevice,"server":this.model})):this.container.close()
},"onRender":function(){this.filterBar.append(new l),!this.shared&&this.user.hasPlexPass()&&this.showList()},"onClose":function(){clearTimeout(this.transcodeJobTimeout)},"onPrimaryServerChange":function(e,t){t&&s.trigger("navigate","sync",{"serverID":t.id})},"onSharedChange":function(e,t){this.shared=t,this.render()},"onDeviceClick":function(e){e.preventDefault();var t=n(e.currentTarget),i=t.data("id");this.ui.devices.removeClass("selected"),t.addClass("selected"),this.selectedDevice=this.collection.get(i),this.showList()
},"onEditClick":function(e){e.preventDefault(),n(e.currentTarget).toggleClass("selected"),this.$el.toggleClass("force-hover")},"onRefreshClick":function(e){e.preventDefault(),r.execute("refreshSyncItems",{"server":this.model})},"onCloudSyncSettingsClick":function(e){e.preventDefault(),e.stopImmediatePropagation();var t=o.get("user");window.open(t.server.get("cloudSyncUrl"))}});return d}),define("hb!templates/desktop/activity/NowPlayingView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s,a="";
return a+='\n  <div class="row row-padded">\n    <div class="col-md-8 col-md-offset-2">\n      <h1>',s={"hash":{},"data":t},a+=h((i=n.t||e&&e.t,i?i.call(e,"Now Playing is restricted from shared users.",s):u.call(e,"t","Now Playing is restricted from shared users.",s)))+"</h1>\n    </div>\n  </div>\n"}function r(e,t){var i,s="";return s+="\n  ",i=n["if"].call(e,e&&e.hasPlexPass,{"hash":{},"inverse":f.program(6,l,t),"fn":f.program(4,o,t),"data":t}),(i||0===i)&&(s+=i),s+="\n"}function o(){return'\n    <div class="sessions-list-container"></div>\n  '
}function l(e,t){var i,s,a,r="";return r+='\n    <div class="row row-padded">\n      <h4 class="text-muted text-center">',a={"hash":{},"data":t},r+=h((i=n.t||e&&e.t,i?i.call(e,"You need a Plex Pass to use the sync feature.",a):u.call(e,"t","You need a Plex Pass to use the sync feature.",a)))+'</h4>\n\n      <p class="text-center">\n        <a class="btn btn-sm btn-primary" href="',(s=n.plexPassUrl)?s=s.call(e,{"hash":{},"data":t}):(s=e&&e.plexPassUrl,s=typeof s===p?s.call(e,{"hash":{},"data":t}):s),r+=h(s)+'" target="_blank">',a={"hash":{},"data":t},r+=h((i=n.t||e&&e.t,i?i.call(e,"Learn More",a):u.call(e,"t","Learn More",a)))+"</a>\n      </p>\n    </div>\n  "
}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var c,d="",u=n.helperMissing,h=this.escapeExpression,p="function",f=this;return d+='<div class="filter-bar"></div>\n\n',c=n["if"].call(t,t&&t.shared,{"hash":{},"inverse":f.program(3,r,s),"fn":f.program(1,a,s),"data":s}),(c||0===c)&&(d+=c),d+="\n"})}),define("hb!templates/desktop/lists/activity/SessionTileListItem",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(){return"hide-actions"}function r(){return"hidden"
}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var o,l,c="",d=this,u="function",h=this.escapeExpression,p=n.helperMissing;return c+='<a class="media-poster-container ',o=n.unless.call(t,t&&t.showActions,{"hash":{},"inverse":d.noop,"fn":d.program(1,a,s),"data":s}),(o||0===o)&&(c+=o),c+='" href="',(o=n.url)?o=o.call(t,{"hash":{},"data":s}):(o=t&&t.url,o=typeof o===u?o.call(t,{"hash":{},"data":s}):o),c+=h(o)+'">\n  <div class="media-poster-fade invisible"></div>\n  <div class="media-poster">\n    <div class="media-poster-overlay"></div>\n    <div class="media-poster-top-overlay"></div>\n\n    <div class="media-poster-actions ',o=n.unless.call(t,t&&t.showActions,{"hash":{},"inverse":d.noop,"fn":d.program(3,r,s),"data":s}),(o||0===o)&&(c+=o),c+='">\n      <button class="play-btn media-poster-btn btn-link" tabindex="-1"><i class="glyphicon play"></i></button>\n      <button class="edit-btn media-poster-btn btn-link" tabindex="-1"><i class="glyphicon pencil"></i></button>\n      <button class="info-btn media-poster-btn btn-link" tabindex="-1"><i class="glyphicon circle-info"></i></button>\n    </div>\n\n    <button class="close-btn btn-link btn-gray" href="#"><i class="glyphicon remove-2"></i></button>\n\n    <i class="device-icon"></i>\n\n    <div class="session-player"></div>\n    <div class="session-state"></div>\n    <div class="session-transcode-details">\n      <p class="session-transcode-title">\n        <span class="session-transcode"></span>\n        <span class="session-transcode-throttled"></span>\n      </p>\n\n      <p class="session-transcode-video">\n        <span class="session-transcode-label">',l={"hash":{},"data":s},c+=h((o=n.t||t&&t.t,o?o.call(t,"Video",l):p.call(t,"t","Video",l)))+'</span>\n        <span class="session-transcode-video-decision"></span>\n      </p>\n\n      <p class="session-transcode-audio">\n        <span class="session-transcode-label">',l={"hash":{},"data":s},c+=h((o=n.t||t&&t.t,o?o.call(t,"Audio",l):p.call(t,"t","Audio",l)))+'</span>\n        <span class="session-transcode-audio-decision"></span>\n      </p>\n    </div>\n\n    <div class="media-poster-progress-track hidden"></div>\n    <div class="media-poster-progress hidden"></div>\n  </div>\n\n  <div class="session-user pull-right">\n    <div class="user-poster"></div>\n    <div class="session-username media-heading secondary"></div>\n  </div>\n\n  <div class="media-title media-heading"></div>\n  <div class="media-subtitle-1 media-heading secondary"></div>\n</a>\n'
})}),define("plex/desktop/views/lists/activity/SessionTileListItem",["hb!templates/desktop/lists/activity/SessionTileListItem.tpl","underscore","plex/base/utils/DeviceIcons","plex/base/utils/MediaUtil","plex/base/utils/formatters/StringUtil","plex/base/adapters/LocalizerAdapter","plex/base/commands/Commands","plex/desktop/views/lists/library/MediaListItem","plex/desktop/views/images/MediaPosterImage"],function(e,t,n,i,s,a,r,o,l){var c=o.extend({"className":"poster-item session-tile-list-item","template":e,"screenshotPreferredIndex":"hd","screenshotInterval":null,"screenshotIntervalDelay":2e3,"screenshotCount":0,"ui":{"poster":".media-poster","posterFade":".media-poster-fade","userPoster":".user-poster","progressTrack":".media-poster-progress-track"},"events":t.extend({"click .info-btn":"onInfoClick","click .close-btn":"onInfoClick"},o.prototype.events),"initialize":function(){o.prototype.initialize.apply(this,arguments);
var e=this.getScreenshotUrl(this.model.get("Media"));this.image=new l({"model":this.model,"modelAttribute":"art","type":"clip","getUrl":this.getPosterUrl,"width":350,"url":e?e:null}),this.userImage=new l({"model":this.model,"modelAttribute":"User","type":"friend","getUrl":this.getUserPosterUrl,"width":44}),this.posterFade=new l({"model":this.model,"modelAttribute":"Media","type":"clip","getUrl":t.bind(this.getScreenshotUrl,this),"width":350});var n=this.model.get("Player");n&&"playing"===n.state&&(this.screenshotInterval=setInterval(t.bind(this.updateScreenshot,this),this.screenshotIntervalDelay)),this.listenTo(this.model,"change:Player",this.onPlayerChange)
},"getPosterUrl":function(e){if("photo"===this.model.get("type"))return this.model.get("thumb");var t=e||this.model.get("parentArt")||this.model.get("grandparentArt");return t||this.model.get("thumb")},"getUserPosterUrl":function(e){return e.thumb},"getScreenshotUrl":function(e){var n=t.first(e);if(n){var s=this.model.get("viewOffset")||0,a=this.screenshotCount*this.screenshotIntervalDelay+s+4e3;return i.getScreenshotUrl(n,a,this.screenshotPreferredIndex)}},"updateScreenshot":function(){this.screenshotCount++;
var e=this.getScreenshotUrl(this.model.get("Media"));e&&this.posterFade.load(e).done(t.bind(function(e){this.posterFade.showImage(e),this.ui.posterFade.removeClass("invisible"),this.posterFadeDelay=t.delay(t.bind(function(){this.image.showImage(e),this.ui.posterFade.addClass("invisible")},this),800),this.posterFade.blobs.length&&window.URL.revokeObjectURL(this.posterFade.blobs.shift())},this))},"bindings":t.extend({},o.prototype.bindings,{".media-subtitle-1":{"modelAttribute":"year","modelListeners":["title","year"],"autohide":!0,"formatter":function(){var e=o.prototype.bindings[".media-subtitle-1"].formatter.apply(this,arguments),t=o.prototype.bindings[".media-subtitle-2"].formatter.call(this,this.model.get("index"));
return t?t+" "+e:e}},".media-poster-progress":{"modelAttribute":"viewOffset","manual":!0,"formatter":function(e,t){if(e){var n=Math.round(e/this.model.get("duration")*100);t.css("width",n+"%")}t.toggleClass("hidden",!e),this.ui.progressTrack.toggleClass("hidden",!e),this.screenshotCount=0}},".device-icon":{"modelAttribute":"Player","manual":!0,"formatter":function(e,t){var i=n.getIcon(e.platform||e.product);t.addClass("device-icon-"+i)}},".session-player":{"modelAttribute":"Player","formatter":function(e){return e.title
}},".session-state":{"modelAttribute":"Player","formatter":function(e){var t=a.get();return t.t(s.titleCase(e.state))}},".session-transcode":{"modelAttribute":"TranscodeSession","formatter":function(e){var t=a.get();return t.t(e?"Transcoding":"No transcode session")}},".session-transcode-throttled":{"modelAttribute":"TranscodeSession","autohide":!0,"formatter":function(e){var t=a.get();return e&&"1"===e.throttled?t.t("(throttled)"):""}},".session-transcode-video-decision":{"modelAttribute":"TranscodeSession","formatter":function(e,t){var n=!(!e||!e.videoCodec);
if(t.parent().toggleClass("hidden",!n),n){var i=a.get();return"copy"===e.videoDecision?i.t("Direct Stream"):i.t("Transcode ({1})",e.videoCodec)}return""}},".session-transcode-audio-decision":{"modelAttribute":"TranscodeSession","formatter":function(e,t){var n=!(!e||!e.audioCodec);if(t.parent().toggleClass("hidden",!n),n){var i=a.get();return"copy"===e.audioDecision?i.t("Direct Stream"):i.t("Transcode ({1})",e.audioCodec)}return""}},".session-username":{"modelAttribute":"User","formatter":function(e){return e.title
}}}),"onRender":function(){o.prototype.onRender.apply(this,arguments),this.userImage.setElement(this.ui.userPoster),this.posterFade.setElement(this.ui.posterFade)},"onClose":function(){o.prototype.onClose.call(this),clearTimeout(this.posterFadeDelay),clearInterval(this.screenshotInterval),this.posterFade&&this.posterFade.close()},"onPlayerChange":function(e,n){n&&("playing"!==n.state&&this.screenshotInterval?(this.screenshotInterval=clearInterval(this.screenshotInterval),this.screenshotCount=0):"playing"!==n.state||this.screenshotInterval||(this.screenshotInterval=setInterval(t.bind(this.updateScreenshot,this),this.screenshotIntervalDelay)))
},"onPlayClick":function(e){e.preventDefault(),e.stopImmediatePropagation(),r.execute("playMedia",{"item":this.model,"offset":this.model.get("viewOffset")})},"onInfoClick":function(e){e.preventDefault(),e.stopImmediatePropagation(),this.$el.toggleClass("dim")}});return c}),define("hb!templates/desktop/lists/activity/SessionTileListEmptyView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,r,o="",l=n.helperMissing,c=this.escapeExpression;
return o+='<div class="row row-padded">\n  <p class="text-muted text-center">',r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Nothing is currently being played.",r):l.call(t,"t","Nothing is currently being played.",r)))+"</p>\n</div>\n"})}),define("plex/desktop/views/lists/activity/SessionTileListEmptyView",["hb!templates/desktop/lists/activity/SessionTileListEmptyView.tpl","marionette"],function(e,t){var n=t.ItemView.extend({"template":e});return n}),define("plex/desktop/views/lists/activity/SessionTileList",["plex/desktop/views/lists/BaseList","plex/desktop/views/lists/activity/SessionTileListItem","plex/desktop/views/lists/activity/SessionTileListEmptyView"],function(e,t,n){var i=e.extend({"tagName":"ul","className":"tile-list session-tile-list","itemView":t,"emptyView":n});
return i}),define("plex/desktop/views/activity/NowPlayingView",["hb!templates/desktop/activity/NowPlayingView.tpl","marionette","plex/base/utils/Dispatcher","plex/base/models/AppModel","plex/desktop/views/dropdowns/PrimaryServerDropdown","plex/desktop/views/lists/activity/SessionTileList"],function(e,t,n,i,s,a){var r=t.Layout.extend({"className":"now-playing-container","template":e,"regions":{"filterBar":".filter-bar","list":".sessions-list-container"},"modelEvents":{"change:shared":"onSharedChange"},"initialize":function(){this.user=i.get("user"),this.shared=this.model.get("shared"),i.set("primaryServer",this.model),this.listenTo(i,"change:primaryServer",this.onPrimaryServerChange)
},"serializeData":function(){return{"shared":this.shared,"hasPlexPass":this.user.hasPlexPass(),"plexPassUrl":this.user.server.get("plexPassUrl")}},"onRender":function(){this.filterBar.append(new s),!this.shared&&this.user.hasPlexPass()&&this.list.show(new a({"collection":this.collection}))},"onPrimaryServerChange":function(e,t){t&&n.trigger("navigate","nowPlaying",{"serverID":t.id})},"onSharedChange":function(e,t){this.shared=t,this.render()}});return r}),define("plex/desktop/views/activity/ActivityView",["hb!templates/desktop/activity/ActivityView.tpl","underscore","marionette","plex/desktop/views/activity/AlertsView","plex/desktop/views/activity/SyncView","plex/desktop/views/activity/NowPlayingView"],function(e,t,n,i,s,a){var r={"alerts":i,"sync":s,"nowPlaying":a},o=n.Layout.extend({"className":"container","template":e,"ui":{"nowPlayingBadge":".now-playing-btn > .badge"},"regions":{"container":".activity-container"},"onlyAfterRender":["onNowPlayingChange"],"initialize":function(e){this.options=e,this.subset=e.subset||"alerts",this.subsets={"nowPlaying":this.model.get("sessions")},this.listenTo(this.subsets.nowPlaying,{"reset":this.onNowPlayingChange,"add":this.onNowPlayingChange,"remove":this.onNowPlayingChange})
},"serializeData":function(){return{"subset":this.subset}},"updateBadges":function(){var e={"nowPlaying":this.subsets.nowPlaying.length};t.each(t.keys(e),function(t){var n=this.ui[t+"Badge"];n.text(e[t]),n.toggleClass("hidden",0===e[t])},this)},"onRender":function(){var e=r[this.subset];this.container.show(new e(this.options)),this.updateBadges()},"onNowPlayingChange":function(){this.updateBadges()}});return o}),define("plex/desktop/routes/ActivityController",["underscore","plex/base/utils/Dispatcher","plex/base/adapters/LocalizerAdapter","plex/base/routes/BaseController","plex/base/models/AppModel","plex/desktop/views/activity/ActivityView","plex/desktop/views/error/ErrorView"],function(e,t,n,i,s,a,r){var o=i.extend({"activity":function(){var e=this.populateView({"primaryServer":!0});
e.done(function(e){var n=e.server;t.trigger("show:view",new a({"model":n,"collection":n.get("alerts"),"subset":"alerts"}))})},"alerts":function(e){var n;n=e?{"serverID":e}:{"primaryServer":!0};var i=this.populateView(n);i.done(function(e){var n=e.server;t.trigger("show:view",new a({"model":n,"collection":n.get("alerts"),"subset":"alerts"}))})},"sync":function(i,o){var l=this.populateView({"serverID":"myPlex"});l=l.then(e.bind(function(){var e;return e=i?{"serverID":i}:{"primaryServer":!0},this.populateView(e)
},this)),l.done(function(e){var i=s.get("user"),l=i.get("devices"),c=l.populate();c.done(function(){var n=l.filterSyncDevices(),i=o?n.get(o):null;t.trigger("show:view",new a({"model":e.server,"collection":n,"selectedDevice":i,"subset":"sync"}))}),c.fail(function(){var e=n.get();t.trigger("show:view",new r({"message":e.t("Sync status is unavailable.")}))})})},"nowPlaying":function(n){var i=this.populateView({"serverID":"myPlex"});i=i.then(e.bind(function(){var e;return e=n?{"serverID":n}:{"primaryServer":!0},this.populateView(e)
},this)),i.done(function(e){var n=e.server;t.trigger("show:view",new a({"model":n,"collection":n.get("sessions"),"subset":"nowPlaying"}))})}});return o}),define("plex/desktop/routes/ActivityRouter",["plex/base/routes/BaseRouter","plex/desktop/routes/ActivityController"],function(e,t){var n=e.extend({"controller":new t,"appRoutes":{"!/activity":"activity","!/activity/alerts(/:serverID)":"alerts","!/activity/sync(/:serverID)(/:deviceID)":"sync","!/activity/playing(/:serverID)":"nowPlaying"}});return n
}),define("hb!templates/desktop/user/FriendsView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s,a="";return a+='\n    <li><a class="',(i=n.subset)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.subset,i=typeof i===c?i.call(e,{"hash":{},"data":t}):i),a+=d(i)+'-btn btn-gray" href="#!/friends/',(i=n.subset)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.subset,i=typeof i===c?i.call(e,{"hash":{},"data":t}):i),a+=d(i)+'">',s={"hash":{},"data":t},a+=d((i=n.t||e&&e.t,i?i.call(e,e&&e.title,s):u.call(e,"t",e&&e.title,s)))+'<span class="badge"></span></a></li>\n  '
}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var r,o,l="",c="function",d=this.escapeExpression,u=n.helperMissing,h=this;return l+='<ul class="nav nav-header pull-right">\n  ',r=n.each.call(t,t&&t.filters,{"hash":{},"inverse":h.noop,"fn":h.program(1,a,s),"data":s}),(r||0===r)&&(l+=r),l+="\n</ul>\n\n<h3>",o={"hash":{},"data":s},l+=d((r=n.t||t&&t.t,r?r.call(t,"Friends",o):u.call(t,"t","Friends",o)))+'</h3>\n\n<div class="filter-bar">\n  <form class="form-inline pull-right" role="form" id="invite-friend-form">\n    <div class="form-group">\n      <label class="sr-only" for="username-email">Username or Email</label>\n      <input type="text" class="form-control input-sm" id="username-email" name="username-email" placeholder="username or email">\n    </div>\n\n    <button type="submit" class="invite-friend-btn btn btn-sm btn-primary btn-loading" href="#">\n      <div class="loading loading-sm"></div>\n      <span class="btn-label">',o={"hash":{},"data":s},l+=d((r=n.t||t&&t.t,r?r.call(t,"Invite Friend",o):u.call(t,"t","Invite Friend",o)))+'</span>\n    </button>\n  </form>\n\n</div>\n\n<div class="friends-container"></div>\n'
})}),define("hb!templates/desktop/lists/user/FriendTileListItem",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(){return'\n        <button class="accept-btn media-poster-btn btn-link btn-success" tabindex="-1"><i class="glyphicon ok-2"></i></button>\n        <button class="reject-btn media-poster-btn btn-link btn-danger" tabindex="-1"><i class="glyphicon ban"></i></button>\n      '}function r(){return'\n        <button class="cancel-btn media-poster-btn btn-link btn-danger" tabindex="-1"><i class="glyphicon ban"></i></button>\n      '
}function o(){return'\n        <button class="delete-btn media-poster-btn btn-link btn-danger" tabindex="-1"><i class="glyphicon ban"></i></button>\n      '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var l,c,d,u="",h=this,p=n.helperMissing;return u+='<div class="media-poster-container">\n  <div class="media-poster">\n    <div class="media-poster-overlay"></div>\n\n    <div class="media-poster-actions">\n      ',d={"hash":{},"inverse":h.noop,"fn":h.program(1,a,s),"data":s},l=n.if_eq||t&&t.if_eq,c=l?l.call(t,t&&t.subset,"requests",d):p.call(t,"if_eq",t&&t.subset,"requests",d),(c||0===c)&&(u+=c),u+="\n\n      ",d={"hash":{},"inverse":h.noop,"fn":h.program(3,r,s),"data":s},l=n.if_eq||t&&t.if_eq,c=l?l.call(t,t&&t.subset,"requested",d):p.call(t,"if_eq",t&&t.subset,"requested",d),(c||0===c)&&(u+=c),u+="\n\n      ",d={"hash":{},"inverse":h.noop,"fn":h.program(5,o,s),"data":s},l=n.if_eq||t&&t.if_eq,c=l?l.call(t,t&&t.subset,"all",d):p.call(t,"if_eq",t&&t.subset,"all",d),(c||0===c)&&(u+=c),u+='\n    </div>\n\n    <div class="loading loading-inline"></div>\n  </div>\n\n  <div class="media-title media-heading"></div>\n  <div class="media-subtitle-1 media-heading secondary"></div>\n</div>\n'
})}),define("plex/desktop/views/lists/user/FriendTileListItem",["hb!templates/desktop/lists/user/FriendTileListItem.tpl","underscore","marionette","plex/base/utils/Dispatcher","plex/base/adapters/LocalizerAdapter","plex/desktop/views/images/MediaPosterImage"],function(e,t,n,i,s,a){var r=n.ItemView.extend({"tagName":"li","className":"poster-item media-tile-list-item photo","template":e,"ui":{"poster":".media-poster"},"events":{"click .accept-btn":"onAcceptClick","click .reject-btn":"onRejectClick","click .cancel-btn":"onCancelClick","click .delete-btn":"onDeleteClick"},"initialize":function(){this.subset=this.model.collection.subset||"all",this.image=new a({"model":this.model,"type":"friend","width":150})
},"serializeData":function(){return{"subset":this.subset}},"bindings":{".media-title":{"modelAttribute":"username"},".media-subtitle-1":{"autohide":!0,"formatter":function(){var e=s.get();return"requests"===this.subset?e.t("wants to be friends"):"requested"===this.subset?e.t("has not accepted yet"):""}}},"onRender":function(){this.image.setElement(this.ui.poster)},"onClose":function(){this.image.close()},"onAcceptClick":function(e){e.preventDefault(),this.failMessage="There was a problem accepting this friend request.",this.model.urlRoot="/pms/friends/requests",this.onSaveClose()
},"onRejectClick":function(e){e.preventDefault(),this.failMessage="There was a problem rejecting this friend request.",this.model.urlRoot="/pms/friends/requests",this.onDeleteClose()},"onCancelClick":function(e){e.preventDefault(),this.failMessage="There was a problem cancelling this friend request.",this.model.urlRoot="/pms/friends/requested",this.onDeleteClose()},"onDeleteClick":function(e){e.preventDefault(),this.failMessage="There was a problem deleting this friend request.",this.onDeleteClose()
},"onSaveClose":function(){if(!this.$el.hasClass("active")){this.$el.addClass("active");var e=this.model.save({"user":this.model.id},{"forceSave":!0});e.done(t.bind(function(){this.model.collection.trigger("refresh")},this)),e.fail(t.bind(function(){var e=s.get();i.trigger("show:alert",{"type":"error","message":e.t(this.failMessage)})},this)),e.always(t.bind(function(){this.$el.removeClass("active")},this))}},"onDeleteClose":function(){if(!this.$el.hasClass("active")){this.$el.addClass("active");
var e=this.model.destroy();e.done(t.bind(function(){},this)),e.fail(t.bind(function(){var e=s.get();i.trigger("show:alert",{"type":"error","message":e.t(this.failMessage)})},this)),e.always(t.bind(function(){this.$el.removeClass("active")},this))}}});return r}),define("plex/desktop/views/lists/user/FriendTileList",["plex/desktop/views/lists/BaseList","plex/desktop/views/lists/user/FriendTileListItem"],function(e,t){var n=e.extend({"tagName":"ul","className":"tile-list media-tile-list friend-tile-list","itemView":t});
return n}),define("plex/desktop/views/user/FriendsView",["hb!templates/desktop/user/FriendsView.tpl","underscore","jquery","marionette","plex/base/utils/Dispatcher","plex/base/adapters/LocalizerAdapter","plex/base/models/SettingsModel","plex/base/models/user/FriendModel","plex/desktop/views/lists/user/FriendTileList"],function(e,t,n,i,s,a,r,o,l){var c=i.Layout.extend({"className":"container","template":e,"ui":{"navLinks":".nav a","username":"#username-email","inviteFriendBtn":".invite-friend-btn","allBadge":".all-btn > .badge","requestsBadge":".requests-btn > .badge","requestedBadge":".requested-btn > .badge"},"regions":{"list":".friends-container"},"events":{"click .nav a":"onNavClick","click .all-btn":"onAllClick","click .requests-btn":"onRequestsClick","click .requested-btn":"onRequestedClick","submit #invite-friend-form":"onInviteSubmit"},"onlyAfterRender":["onFriendsChange","onRequestsChange","onRequestedChange"],"initialize":function(e){this.initSubset(e),this.subsets={"all":this.model.get("friends"),"requests":this.model.get("friendRequests"),"requested":this.model.get("friendsRequested")},t.each(t.keys(this.subsets),function(e){this.listenTo(this.subsets[e],{"add":this.onCollectionChange,"remove":this.onCollectionChange,"refresh":this.onCollectionRefresh})
},this)},"initSubset":function(e){var t=e.subset,n="friends!subset";t||(t=r.get(n)),t||(t="all"),r.save(n,t),this.subset=t},"serializeData":function(){return{"filters":[{"title":"All","subset":"all"},{"title":"Requests","subset":"requests"},{"title":"Pending","subset":"requested"}]}},"updateBadges":function(){var e={"all":this.subsets.all.length,"requests":this.subsets.requests.length,"requested":this.subsets.requested.length};t.each(t.keys(e),function(t){var n=this.ui[t+"Badge"];n.text(e[t]),n.toggleClass("hidden",0===e[t])
},this)},"onRender":function(){this.list.show(new l({"collection":this.subsets[this.subset]})),this.ui.navLinks.filter('[href*="/'+this.subset+'"]').addClass("selected"),this.updateBadges()},"onCollectionChange":function(){this.updateBadges()},"onCollectionRefresh":function(){this.subsets.all.fetch(),this.subsets.requests.fetch()},"onNavClick":function(e){e.preventDefault(),this.ui.navLinks.removeClass("selected"),n(e.currentTarget).addClass("selected"),this.initSubset({"subset":t.last(e.currentTarget.href.split("/"))}),this.list.show(new l({"collection":this.subsets[this.subset]})),s.trigger("navigate","friends",{"subset":this.subset,"trigger":!1})
},"onInviteSubmit":function(e){function i(e){return d.convert(e).status}e.preventDefault();var r=n.trim(this.ui.username.val()),l=this.ui.inviteFriendBtn;if(r&&!l.hasClass("active")){l.addClass("active");var c=a.get(),d=new o({"user":r},{"server":this.model.server}),u=d.save();u.done(t.bind(function(e){var t=i(e);s.trigger("show:alert",{"type":"success","message":c.t(t)}),this.ui.username.val(""),this.subsets.requested.fetch()},this)),u.fail(t.bind(function(e){var t=i(e.responseText);s.trigger("show:alert",{"type":"error","message":c.t(t)})
},this)),u.always(t.bind(function(){l.removeClass("active")},this))}}});return c}),define("hb!templates/desktop/user/PlaylistView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s,a="";return a+='\n    <li><a class="',(i=n.subset)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.subset,i=typeof i===u?i.call(e,{"hash":{},"data":t}):i),a+=h(i)+'-btn btn-gray" href="#!/playlist/',(i=n.key)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.key,i=typeof i===u?i.call(e,{"hash":{},"data":t}):i),a+=h(i)+"/",(i=n.subset)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.subset,i=typeof i===u?i.call(e,{"hash":{},"data":t}):i),a+=h(i)+'">',s={"hash":{},"data":t},a+=h((i=n.t||e&&e.t,i?i.call(e,e&&e.title,s):p.call(e,"t",e&&e.title,s)))+'<span class="badge"></span></a></li>\n  '
}function r(e,t){var i,s="";return s+='\n    <a class="playlist-help" href="',(i=n.helpRoute)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.helpRoute,i=typeof i===u?i.call(e,{"hash":{},"data":t}):i),s+=h(i)+'" target="',(i=n.defaultTarget)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.defaultTarget,i=typeof i===u?i.call(e,{"hash":{},"data":t}):i),s+=h(i)+'"><i class="glyphicon circle-question-mark"></i></a>\n  '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var o,l,c,d="",u="function",h=this.escapeExpression,p=n.helperMissing,f=this;
return d+='<ul class="nav nav-header pull-right">\n  ',o=n.each.call(t,t&&t.filters,{"hash":{},"inverse":f.noop,"fn":f.program(1,a,s),"data":s}),(o||0===o)&&(d+=o),d+="\n</ul>\n\n<h3>\n  ",c={"hash":{},"data":s},d+=h((o=n.t||t&&t.t,o?o.call(t,t&&t.label,c):p.call(t,"t",t&&t.label,c)))+"\n\n  ",l=n["if"].call(t,t&&t.helpRoute,{"hash":{},"inverse":f.noop,"fn":f.program(3,r,s),"data":s}),(l||0===l)&&(d+=l),d+='\n</h3>\n\n<div class="playlist-container"></div>\n'})}),define("hb!templates/desktop/lists/user/PlaylistListItem",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};
var a,r="",o="function",l=this.escapeExpression;return r+='<a class="card card-playlist" href="',(a=n.url)?a=a.call(t,{"hash":{},"data":s}):(a=t&&t.url,a=typeof a===o?a.call(t,{"hash":{},"data":s}):a),r+=l(a)+'">\n  <div class="media-poster"></div>\n\n  <div class="card-actions">\n    <button class="play-btn btn-gray" href="#"><i class="glyphicon play"></i></button>\n    <button class="mark-unwatched-btn btn-gray" href="#"><i class="glyphicon circle-minus"></i></button>\n    <button class="mark-watched-btn btn-gray" href="#"><i class="glyphicon circle-ok"></i></button>\n    <button class="delete-btn btn-gray btn-danger" href="#"><i class="glyphicon ban"></i></button>\n  </div>\n\n  <h4 class="media-title"></h4>\n  <span class="media-subtitle-1"></span>\n  <span class="media-context"></span>\n\n  <p class="media-summary"></p>\n</div>\n'
})}),define("plex/desktop/views/lists/user/PlaylistListItem",["hb!templates/desktop/lists/user/PlaylistListItem.tpl","underscore","plex/base/commands/Commands","plex/desktop/views/lists/library/MediaDetailsListItem"],function(e,t,n,i){var s=i.extend({"template":e,"className":"card-item card-2-col-item","events":{"click .play-btn":"onPlayClick","click .mark-watched-btn":"onMarkWatchedClick","click .mark-unwatched-btn":"onMarkUnwatchedClick","click .delete-btn":"onDeleteClick"},"serializeData":function(){var e=i.prototype.serializeData.apply(this,arguments);
return e},"bindings":t.extend({},i.prototype.bindings,{".media-summary":{"autohide":!0,"formatter":function(){return this.model.get("message")||this.model.get("summary")}},".mark-unwatched-btn":{"modelAttribute":"viewCount","manual":!0,"autohide":function(e){return e>0}},".mark-watched-btn":{"modelAttribute":"viewCount","manual":!0,"autohide":function(e){return 0===e}}}),"onPlayClick":function(e){e.preventDefault(),n.execute("playMedia",{"item":this.model})},"onMarkWatchedClick":function(e){e.preventDefault(),n.execute("markWatched",{"item":this.model})
},"onMarkUnwatchedClick":function(e){e.preventDefault(),n.execute("markUnwatched",{"item":this.model})},"onDeleteClick":function(e){e.preventDefault(),this.model.destroy()}});return s}),define("plex/desktop/views/lists/user/PlaylistList",["plex/desktop/views/lists/BaseList","plex/desktop/views/lists/user/PlaylistListItem"],function(e,t){var n=e.extend({"tagName":"ul","className":"list card-list","itemView":t});return n}),define("plex/desktop/views/user/PlaylistView",["hb!templates/desktop/user/PlaylistView.tpl","underscore","jquery","marionette","plex/base/utils/Dispatcher","plex/base/models/ConfigModel","plex/base/models/SettingsModel","plex/desktop/views/lists/user/PlaylistList"],function(e,t,n,i,s,a,r,o){var l=i.Layout.extend({"className":"container","template":e,"ui":{"navLinks":".nav a","allBadge":".all-btn > .badge","unwatchedBadge":".unwatched-btn > .badge","watchedBadge":".watched-btn > .badge"},"regions":{"list":".playlist-container"},"events":{"click .nav a":"onNavClick"},"initialize":function(e){this.initSubset(e),this.subsets={"all":this.collection,"unwatched":this.collection.filterUnwatched(),"watched":this.collection.filterWatched()},this.listenTo(this.collection,{"add":this.onCollectionChange,"remove":this.onCollectionChange,"change:viewCount":this.onCollectionChange})
},"initSubset":function(e){var t=e.subset,n=this.collection.key+"!subset";t||(t=r.get(n)),t||(t="unwatched"),r.save(n,t),this.subset=t},"serializeData":function(){return{"label":this.collection.label,"helpRoute":this.collection.helpRoute,"defaultTarget":a.get("defaultTarget"),"filters":[{"title":"All","key":this.collection.key,"subset":"all"},{"title":"Unwatched","key":this.collection.key,"subset":"unwatched"},{"title":"Watched","key":this.collection.key,"subset":"watched"}]}},"updateBadges":function(){var e={"all":this.subsets.all.length,"unwatched":this.subsets.unwatched.length,"watched":this.subsets.watched.length};
t.each(t.keys(e),function(t){var n=this.ui[t+"Badge"];n.text(e[t]),n.toggleClass("hidden",0===e[t])},this)},"onRender":function(){this.list.show(new o({"collection":this.subsets[this.subset]})),this.ui.navLinks.filter('[href*="/'+this.subset+'"]').addClass("selected"),this.updateBadges()},"onClose":function(){this.stopListening(this.collection),this.collection.release()},"onCollectionChange":function(){this.subsets.unwatched.set(this.collection.filterUnwatched().models),this.subsets.watched.set(this.collection.filterWatched().models),this.updateBadges()
},"onNavClick":function(e){e.preventDefault(),this.ui.navLinks.removeClass("selected"),n(e.currentTarget).addClass("selected"),this.initSubset({"subset":t.last(e.currentTarget.href.split("/"))}),this.list.show(new o({"collection":this.subsets[this.subset]})),s.trigger("navigate","playlist",{"key":this.collection.key,"subset":this.subset,"trigger":!1})}});return l}),define("hb!templates/desktop/user/AnnouncementsView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};
var a,r,o="",l=n.helperMissing,c=this.escapeExpression;return o+="<h3>",r={"hash":{},"data":s},o+=c((a=n.t||t&&t.t,a?a.call(t,"Announcements",r):l.call(t,"t","Announcements",r)))+'</h3>\n\n<div class="announcements-container"></div>\n'})}),define("hb!templates/desktop/lists/user/AnnouncementListItem",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(){return'\n    <div class="unread"></div>\n  '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var r,o,l,c="",d=this,u="function",h=this.escapeExpression,p=n.helperMissing;
return c+='<div class="card card-announcement">\n  ',r=n["if"].call(t,t&&t.isUnread,{"hash":{},"inverse":d.noop,"fn":d.program(1,a,s),"data":s}),(r||0===r)&&(c+=r),c+='\n\n  <h4><a href="',(r=n.link)?r=r.call(t,{"hash":{},"data":s}):(r=t&&t.link,r=typeof r===u?r.call(t,{"hash":{},"data":s}):r),c+=h(r)+'" target="_blank">',(r=n.title)?r=r.call(t,{"hash":{},"data":s}):(r=t&&t.title,r=typeof r===u?r.call(t,{"hash":{},"data":s}):r),c+=h(r)+'</a></h4>\n\n  <a href="',(r=n.link)?r=r.call(t,{"hash":{},"data":s}):(r=t&&t.link,r=typeof r===u?r.call(t,{"hash":{},"data":s}):r),c+=h(r)+'" target="_blank"><img class="thumb"/></a>\n\n  <p class="date">',l={"hash":{},"data":s},c+=h((r=n.formatTimestamp||t&&t.formatTimestamp,r?r.call(t,t&&t.timestamp,l):p.call(t,"formatTimestamp",t&&t.timestamp,l)))+'</p>\n  <p class="description">',(o=n.description)?o=o.call(t,{"hash":{},"data":s}):(o=t&&t.description,o=typeof o===u?o.call(t,{"hash":{},"data":s}):o),(o||0===o)&&(c+=o),c+="</p>\n</div>\n"
})}),define("plex/desktop/views/lists/user/AnnouncementListItem",["hb!templates/desktop/lists/user/AnnouncementListItem.tpl","underscore","marionette","plex/desktop/views/images/BaseImage"],function(e,t,n,i){var s=n.ItemView.extend({"tagName":"li","className":"card-item","template":e,"ui":{"thumb":".thumb"},"initialize":function(){this.image=new i({"url":this.model.get("thumb")})},"onRender":function(){this.image.setElement(this.ui.thumb)},"onClose":function(){this.image.close()}});return s}),define("plex/desktop/views/lists/user/AnnouncementList",["plex/desktop/views/lists/BaseList","plex/desktop/views/lists/user/AnnouncementListItem"],function(e,t){var n=e.extend({"tagName":"ul","className":"list card-list","itemView":t});
return n}),define("plex/desktop/views/user/AnnouncementsView",["hb!templates/desktop/user/AnnouncementsView.tpl","underscore","marionette","plex/desktop/views/lists/user/AnnouncementList","plex/base/models/AppModel"],function(e,t,n,i,s){var a=n.Layout.extend({"className":"container","template":e,"regions":{"list":".announcements-container"},"onRender":function(){var e=this.collection;s.get("user").hasPlexPass()&&(e=e.clone(e.reject(function(e){return"PlexPass"===e.get("promo")}))),this.list.show(new i({"collection":e}))
}});return a}),define("hb!templates/desktop/user/QueueHelpView",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,r,o,l="",c=n.helperMissing,d=this.escapeExpression,u="function";return l+="<h3>",o={"hash":{},"data":s},l+=d((a=n.t||t&&t.t,a?a.call(t,"Queue Help",o):c.call(t,"t","Queue Help",o)))+'</h3>\n\n<div class="filter-bar">\n<h4>',o={"hash":{},"data":s},l+=d((a=n.t||t&&t.t,a?a.call(t,"Add videos from your browser",o):c.call(t,"t","Add videos from your browser",o)))+'</h4>\n</div>\n\n<div class="row text-muted">\n  <div class="col-md-5">\n    <div class="text-center">\n      <a class="btn btn-primary btn-lg btn-plexit" href=\'javascript: var s=document.createElement("script");s.type="text/javascript";s.src="//plex.tv/queue/bookmarklet_payload";var h=document.getElementsByTagName("head")[0];h.appendChild(s);void(0);\'>\u276f Plex It!</a>\n    </div>\n\n    <ol class="steps-list">\n      <li>',(r=n.firstStepText)?r=r.call(t,{"hash":{},"data":s}):(r=t&&t.firstStepText,r=typeof r===u?r.call(t,{"hash":{},"data":s}):r),l+=d(r)+"</li>\n      <li>",o={"hash":{},"data":s},l+=d((a=n.t||t&&t.t,a?a.call(t,"To save a video to your queue, click \u201c\u276f Plex It!\u201d in your Bookmarks Bar so you can watch it later.",o):c.call(t,"t","To save a video to your queue, click \u201c\u276f Plex It!\u201d in your Bookmarks Bar so you can watch it later.",o)))+"</li>\n      <li>",o={"hash":{},"data":s},l+=d((a=n.t||t&&t.t,a?a.call(t,"A panel will appear on the left side of the page to let you know the video has been saved.",o):c.call(t,"t","A panel will appear on the left side of the page to let you know the video has been saved.",o)))+"</li>\n      <li>",o={"hash":{},"data":s},l+=d((a=n.t||t&&t.t,a?a.call(t,"You can also recommend the video to friends or \u201cfling\u201d it to a Plex player and watch it there.",o):c.call(t,"t","You can also recommend the video to friends or \u201cfling\u201d it to a Plex player and watch it there.",o)))+'</li>\n    </ol>\n  </div>\n\n  <div class="col-md-7 text-right">\n    <img class="plexit-img" src="',(r=n.stepsImgSrc)?r=r.call(t,{"hash":{},"data":s}):(r=t&&t.stepsImgSrc,r=typeof r===u?r.call(t,{"hash":{},"data":s}):r),l+=d(r)+'"/>\n  </div>\n</div>\n\n<div class="filter-bar">\n  <h4>',o={"hash":{},"data":s},l+=d((a=n.t||t&&t.t,a?a.call(t,"Add videos by email",o):c.call(t,"t","Add videos by email",o)))+'</h4>\n</div>\n\n<div class="row text-muted">\n  <div class="col-md-5">\n    <div class="queue-email form-control input-lg disabled" title="',(r=n.copyCommand)?r=r.call(t,{"hash":{},"data":s}):(r=t&&t.copyCommand,r=typeof r===u?r.call(t,{"hash":{},"data":s}):r),l+=d(r)+'" tabindex="-1">',(r=n.queueEmail)?r=r.call(t,{"hash":{},"data":s}):(r=t&&t.queueEmail,r=typeof r===u?r.call(t,{"hash":{},"data":s}):r),l+=d(r)+'</div>\n    <ol class="steps-list">\n      <li>',o={"hash":{},"data":s},l+=d((a=n.t||t&&t.t,a?a.call(t,"Send an email to the address above with any link(s) you want added to your queue.",o):c.call(t,"t","Send an email to the address above with any link(s) you want added to your queue.",o)))+"</li>\n      <li>",o={"hash":{},"data":s},l+=d((a=n.t||t&&t.t,a?a.call(t,"Add this to your address book so you can easily email links from your iPhone, iPad, Android, or any other device.",o):c.call(t,"t","Add this to your address book so you can easily email links from your iPhone, iPad, Android, or any other device.",o)))+'</li>\n    </ol>\n  </div>\n  <div class="col-md-7 text-right">\n    <img class="email-links" src="img/queue/email-links.png"/>\n  </div>\n</div>\n'
})}),define("plex/desktop/views/user/QueueHelpView",["hb!templates/desktop/user/QueueHelpView.tpl","jquery","underscore","marionette","plex/base/models/AppModel","plex/base/utils/Browser","plex/desktop/views/modals/ConfirmModal","plex/base/adapters/LocalizerAdapter","plex/base/utils/Dispatcher"],function(e,t,n,i,s,a,r,o,l){var c=i.ItemView.extend({"className":"container queue-help-container","template":e,"ui":{"queueEmail":".queue-email","plexitBtn":".btn-plexit"},"events":{"focus .queue-email":"onQueueEmailFocus","mouseup .queue-email":"onQueueEmailMouseUp","click .btn-plexit":"onPlexitClick","mousedown .btn-plexit":"onPlexitMouseDown","mouseup .btn-plexit":"onPlexitMouseUp"},"initialize":function(e){var t=o.get();
this.queueEmail=e.queueEmail,"ie"===a.id?(this.stepsImgSrc="img/queue/bookmarklet-steps-ie.png",this.modalText='Right click the "\u276f Plex It!" button and choose Add to Favorites so you can save videos to your queue.',this.firstStepText=t.t("Add the button above to your favorites bar.")):(this.stepsImgSrc="img/queue/bookmarklet-steps.png",this.modalText='Drag the "\u276f Plex it!" button to your Bookmarks Bar so you can save videos to your queue.',this.firstStepText=t.t("Drag the button above to your bookmarks bar."));
var i=["OSX","Windows","Linux"];if(-1!==n.indexOf(i,a.platform)){var s="OSX"===a.platform?"\u2318 C":"Ctrl C";this.copyCommand=t.t(s+" to copy")}},"serializeData":function(){return{"queueEmail":this.queueEmail,"copyCommand":this.copyCommand,"stepsImgSrc":this.stepsImgSrc,"firstStepText":this.firstStepText}},"onRender":function(){this.copyCommand&&this.$el.tooltip({"selector":".queue-email","placement":"top","trigger":"focus"})},"onQueueEmailFocus":function(){this.ui.queueEmail.selectText()},"onQueueEmailMouseUp":function(){return!1
},"onPlexitClick":function(e){e.preventDefault();var t=o.get(),n=new r({"title":t.t("Plex It!"),"message":t.t(this.modalText),"confirmLabel":t.t("OK"),"hideCancel":!0});l.trigger("show:modal",n)},"onPlexitMouseDown":function(){this.ui.plexitBtn.css("user-select","text")},"onPlexitMouseUp":function(){this.ui.plexitBtn.css("user-select","none")}});return c}),define("plex/desktop/routes/UserController",["jquery","plex/base/utils/Dispatcher","plex/base/adapters/LocalizerAdapter","plex/base/routes/BaseController","plex/base/models/AppModel","plex/base/models/SettingsModel","plex/base/models/user/PlaylistItemModel","plex/base/models/user/PlaylistItemCollection","plex/desktop/views/user/FriendsView","plex/desktop/views/user/PlaylistView","plex/desktop/views/user/AnnouncementsView","plex/desktop/views/details/DetailsView","plex/desktop/views/error/ErrorView","plex/desktop/views/user/QueueHelpView"],function(e,t,n,i,s,a,r,o,l,c,d,u,h,p){var f=i.extend({"friends":function(i){var a=this.populateView({"serverID":"myPlex"});
a.done(function(){var a=s.get("user"),r=a.get("friends"),o=a.get("friendRequests"),c=a.get("friendsRequested"),d=[];d.push(r.populate()),d.push(o.populate()),d.push(c.populate());var u=e.when.apply(e,d);u.done(function(){t.trigger("show:view",new l({"model":s.get("user"),"subset":i}))}),u.fail(function(){var e=n.get();t.trigger("show:view",new h({"message":e.t("Your friends are unavailable.")}))})})},"playlist":function(e,i){var a=this.populateView({"serverID":"myPlex"});a.done(function(){var a=s.get("user"),r=new o([],{"server":a.server,"parent":a,"key":e}),l=r.fetch({"cancelable":!0});
l.done(function(){t.trigger("show:view",new c({"model":s.get("user"),"collection":r,"subset":i}))}),l.fail(function(){var e=n.get();t.trigger("show:view",new h({"message":e.t("This playlist is unavailable.")}))})})},"playlistDetails":function(e,i){var a=this.populateView({"serverID":"myPlex"});a.done(function(a){var o=s.get("user"),l=new r({"id":i},{"server":a.server,"parent":o,"playlist":e}),c=l.fetch({"cancelable":!0});c.done(function(){t.trigger("show:view",new u({"model":l}))}),c.fail(function(){var e=n.get();
t.trigger("show:view",new h({"message":e.t("This playlist item is unavailable.")}))})})},"queueHelp":function(){var e=this.populateView({"serverID":"myPlex"});e.done(function(){var e=s.get("user"),i=e.populate();i.done(function(){t.trigger("show:view",new p({"queueEmail":e.get("queueEmail")}))}),i.fail(function(){var e=n.get();t.trigger("show:view",new h({"message":e.t("Queue Help is unavailable.")}))})})},"announcements":function(){var e=this.populateView();e.done(function(){var e=s.get("announcements"),i=e.populate();
i.done(function(){t.trigger("show:view",new d({"collection":e})),a.save("announcementsLastReadTimestamp",(new Date).getTime())}),i.fail(function(){var e=n.get();t.trigger("show:view",new h({"message":e.t("Announcements are not unavailable.")}))})})}});return f}),define("plex/desktop/routes/UserRouter",["plex/base/routes/BaseRouter","plex/desktop/routes/UserController"],function(e,t){var n=e.extend({"controller":new t,"appRoutes":{"!/friends(/:subset)":"friends","!/playlist/queue/help":"queueHelp","!/playlist/:key(/:subset)":"playlist","!/playlist/:key/details/:itemID":"playlistDetails","!/announcements":"announcements"}});
return n}),define("plex/desktop/initializers/RouterInitializer",["backbone","plex/desktop/routes/DesktopAppRouter","plex/desktop/routes/SetupRouter","plex/desktop/routes/LibraryRouter","plex/desktop/routes/ChannelRouter","plex/desktop/routes/SettingsRouter","plex/desktop/routes/ActivityRouter","plex/desktop/routes/UserRouter"],function(e,t,n,i,s,a,r,o){return{"init":function(){new t,new n,new i,new s,new a,new r,new o,e.history.start()}}}),function(e,t){function n(e,t,n){return e.addEventListener?void e.addEventListener(t,n,!1):void e.attachEvent("on"+t,n)
}function i(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return C[e.which]?C[e.which]:T[e.which]?T[e.which]:String.fromCharCode(e.which).toLowerCase()}function s(e,t){return e.sort().join(",")===t.sort().join(",")}function a(e){e=e||{};var t,n=!1;for(t in D)e[t]?n=!0:D[t]=0;n||(L=!1)}function r(e,t,n,i,a,r){var o,l,c=[],d=n.type;if(!P[e])return[];for("keyup"==d&&p(e)&&(t=[e]),o=0;o<P[e].length;++o)if(l=P[e][o],(i||!l.seq||D[l.seq]==l.level)&&d==l.action&&("keypress"==d&&!n.metaKey&&!n.ctrlKey||s(t,l.modifiers))){var u=!i&&l.combo==a,h=i&&l.seq==i&&l.level==r;
(u||h)&&P[e].splice(o,1),c.push(l)}return c}function o(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}function l(e){return e.preventDefault?void e.preventDefault():void(e.returnValue=!1)}function c(e){return e.stopPropagation?void e.stopPropagation():void(e.cancelBubble=!0)}function d(e,t,n,i){N.stopCallback(t,t.target||t.srcElement,n,i)||e(t,n)===!1&&(l(t),c(t))}function u(e,t,n){var i,s=r(e,t,n),o={},l=0,c=!1;for(i=0;i<s.length;++i)s[i].seq&&(l=Math.max(l,s[i].level));
for(i=0;i<s.length;++i)if(s[i].seq){if(s[i].level!=l)continue;c=!0,o[s[i].seq]=1,d(s[i].callback,n,s[i].combo,s[i].seq)}else c||d(s[i].callback,n,s[i].combo);var u="keypress"==n.type&&E;n.type!=L||p(e)||u||a(o),E=c&&"keydown"==n.type}function h(e){"number"!=typeof e.which&&(e.which=e.keyCode);var t=i(e);if(t)return"keyup"==e.type&&_===t?void(_=!1):void N.handleKey(t,o(e),e)}function p(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function f(){clearTimeout(S),S=setTimeout(a,1e3)}function m(){if(!k){k={};
for(var e in C)e>95&&112>e||C.hasOwnProperty(e)&&(k[C[e]]=e)}return k}function g(e,t,n){return n||(n=m()[e]?"keydown":"keypress"),"keypress"==n&&t.length&&(n="keydown"),n}function v(e,t,n,s){function r(t){return function(){L=t,++D[e],f()}}function o(t){d(n,t,e),"keyup"!==s&&(_=i(t)),setTimeout(a,10)}D[e]=0;for(var l=0;l<t.length;++l){var c=l+1===t.length,u=c?o:r(s||b(t[l+1]).action);w(t[l],u,s,e,l)}}function y(e){return"+"===e?["+"]:e.split("+")}function b(e,t){var n,i,s,a=[];for(n=y(e),s=0;s<n.length;++s)i=n[s],I[i]&&(i=I[i]),t&&"keypress"!=t&&A[i]&&(i=A[i],a.push("shift")),p(i)&&a.push(i);
return t=g(i,a,t),{"key":i,"modifiers":a,"action":t}}function w(e,t,n,i,s){M[e+":"+n]=t,e=e.replace(/\s+/g," ");var a,o=e.split(" ");return o.length>1?void v(e,o,t,n):(a=b(e,n),P[a.key]=P[a.key]||[],r(a.key,a.modifiers,{"type":a.action},i,e,s),void P[a.key][i?"unshift":"push"]({"callback":t,"modifiers":a.modifiers,"action":a.action,"seq":i,"level":s,"combo":e}))}function x(e,t,n){for(var i=0;i<e.length;++i)w(e[i],t,n)}for(var k,S,C={"8":"backspace","9":"tab","13":"enter","16":"shift","17":"ctrl","18":"alt","20":"capslock","27":"esc","32":"space","33":"pageup","34":"pagedown","35":"end","36":"home","37":"left","38":"up","39":"right","40":"down","45":"ins","46":"del","91":"meta","93":"meta","224":"meta"},T={"106":"*","107":"+","109":"-","110":".","111":"/","186":";","187":"=","188":",","189":"-","190":".","191":"/","192":"`","219":"[","220":"\\","221":"]","222":"'"},A={"~":"`","!":"1","@":"2","#":"3","$":"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0","_":"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},I={"option":"alt","command":"meta","return":"enter","escape":"esc","mod":/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},P={},M={},D={},_=!1,E=!1,L=!1,R=1;20>R;++R)C[111+R]="f"+R;
for(R=0;9>=R;++R)C[R+96]=R;n(t,"keypress",h),n(t,"keydown",h),n(t,"keyup",h);var N={"bind":function(e,t,n){return e=e instanceof Array?e:[e],x(e,t,n),this},"unbind":function(e,t){return N.bind(e,function(){},t)},"trigger":function(e,t){return M[e+":"+t]&&M[e+":"+t]({},e),this},"reset":function(){return P={},M={},this},"stopCallback":function(e,t){return(" "+t.className+" ").indexOf(" mousetrap ")>-1?!1:"INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable},"handleKey":u};
e.Mousetrap=N,"function"==typeof define&&define.amd&&define("mousetrap",N)}(window,document),define("plex/desktop/initializers/KeyboardShortcutsInitializer",["underscore","mousetrap","plex/desktop/utils/KeyboardShortcuts","plex/base/models/SettingsModel"],function(e,t,n,i){return{"init":function(){function s(t){return i.get("keyboardShortcuts")?t.apply(a,e.toArray(arguments).slice(1)):void 0}var a=new n,r=a.shortcuts;e.each(r,e.bind(function(n){var i=n.key;/.+,.+/.test(i)&&(i=i.split(",")),t.bind(i,e.wrap(a[n.fn],s))
},this))}}}),define("plex/desktop/initializers/MainInitializer",["jquery","fastclick","plex/base/initializers/AppInitializer","plex/base/initializers/SettingsInitializer","plex/desktop/initializers/DesktopAnalyticsInitializer","plex/desktop/initializers/SocketInitializer","plex/desktop/initializers/UserInitializer","plex/base/initializers/ServerInitializer","plex/desktop/initializers/RouterInitializer","plex/desktop/initializers/KeyboardShortcutsInitializer","plex/base/models/AppModel"],function(e,t,n,i,s,a,r,o,l,c,d){return function(){new t(document.body);
var u=[];u.push(n.init(d)),u.push(i.init()),e.when.apply(e,u).done(function(){s.init(),a.init(),r.init(),o.init(),l.init(),c.init()})}});var SM2_DEFER=!0;define("soundmanager-defer",function(){}),function(e){function t(t,n){function i(e){return function(t){var n=this._t;return n&&n._a?e.call(this,t):null}}this.flashVersion=8,this.debugMode=!1,this.debugFlash=!1,this.useConsole=!0,this.consoleOnly=!0,this.waitForWindowLoad=!1,this.bgColor="#ffffff",this.useHighPerformance=!1,this.flashPollingInterval=null,this.html5PollingInterval=null,this.flashLoadTimeout=1e3,this.wmode=null,this.allowScriptAccess="always",this.useFlashBlock=!1,this.useHTML5Audio=!0,this.html5Test=/^(probably|maybe)$/i,this.preferFlash=!0,this.noSWFCache=!1,this.audioFormats={"mp3":{"type":['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],"required":!0},"mp4":{"related":["aac","m4a"],"type":['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],"required":!1},"ogg":{"type":["audio/ogg; codecs=vorbis"],"required":!1},"wav":{"type":['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],"required":!1}},this.defaultOptions={"autoLoad":!1,"autoPlay":!1,"from":null,"loops":1,"onid3":null,"onload":null,"whileloading":null,"onplay":null,"onpause":null,"onresume":null,"whileplaying":null,"onposition":null,"onstop":null,"onfailure":null,"onfinish":null,"multiShot":!0,"multiShotEvents":!1,"position":null,"pan":0,"stream":!0,"to":null,"type":null,"usePolicyFile":!1,"volume":100},this.flash9Options={"isMovieStar":null,"usePeakData":!1,"useWaveformData":!1,"useEQData":!1,"onbufferchange":null,"ondataerror":null},this.movieStarOptions={"bufferTime":3,"serverURL":null,"onconnect":null,"duration":null},this.movieID="sm2-container",this.id=n||"sm2movie",this.debugID="soundmanager-debug",this.debugURLParam=/([#?&])debug=1/i,this.versionNumber="V2.97a.20120318",this.version=null,this.movieURL=null,this.url=t||null,this.altURL=null,this.swfLoaded=!1,this.enabled=!1,this.oMC=null,this.sounds={},this.soundIDs=[],this.muted=!1,this.didFlashBlock=!1,this.filePattern=null,this.filePatterns={"flash8":/\.mp3(\?.*)?$/i,"flash9":/\.mp3(\?.*)?$/i},this.features={"buffering":!1,"peakData":!1,"waveformData":!1,"eqData":!1,"movieStar":!1},this.sandbox={},this.hasHTML5=function(){try{return"undefined"!=typeof Audio&&"undefined"!=typeof(new Audio).canPlayType
}catch(e){return!1}}(),this.html5={"usingFlash":null},this.flash={},this.html5Only=!1,this.ignoreFlash=!1;var s,a,r,o,l,c,d,u,h,p,f,m,g,v,y,b,w,x,k,S,C,T,A,I,P,M,D,_,E,L,R,N,O,B,V,F,q,U,z,j,H,$,W,Y,Q,K,G,X,J,Z,et,tt,nt=this,it=null,st="soundManager",at=navigator.userAgent,rt=e,ot=rt.location.href.toString(),lt=document,ct=[],dt=!1,ut=!1,ht=!1,pt=!1,ft=!1,mt=8,gt=null,vt=null,yt=!1,bt=!1,wt=0,xt=null,kt=null,St=Array.prototype.slice,Ct=!1,Tt=at.match(/(ipad|iphone|ipod)/i),At=at.match(/firefox/i),It=at.match(/droid/i),Pt=at.match(/msie/i),Mt=at.match(/webkit/i),Dt=at.match(/safari/i)&&!at.match(/chrome/i),_t=at.match(/opera/i),Et=at.match(/(mobile|pre\/|xoom)/i)||Tt,Lt=!ot.match(/usehtml5audio/i)&&!ot.match(/sm2\-ignorebadua/i)&&Dt&&!at.match(/silk/i)&&at.match(/OS X 10_6_([3-7])/i),Rt=("undefined"!=typeof console&&"undefined"!=typeof console.log,"undefined"!=typeof lt.hasFocus?lt.hasFocus():null),Nt=Dt&&"undefined"==typeof lt.hasFocus,Ot=!Nt,Bt=/(mp3|mp4|mpa)/i,Vt="about:blank",Ft=lt.location?lt.location.protocol.match(/http/i):null,qt=Ft?"":"http://",Ut=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|mp4v|3gp|3g2)\s*(?:$|;)/i,zt=["mpeg4","aac","flv","mov","mp4","m4v","f4v","m4a","mp4v","3gp","3g2"],jt=new RegExp("\\.("+zt.join("|")+")(\\?.*)?$","i");
this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i,this.useAltURL=!Ft,this._global_a=null,R={"swfBox":"sm2-object-box","swfDefault":"movieContainer","swfError":"swf_error","swfTimedout":"swf_timedout","swfLoaded":"swf_loaded","swfUnblocked":"swf_unblocked","sm2Debug":"sm2_debug","highPerf":"high_performance","flashDebug":"flash_debug"},Et&&(nt.useHTML5Audio=!0,nt.preferFlash=!1,Tt&&(nt.ignoreFlash=!0,Ct=!0)),this.ok=function(){return kt?ht&&!pt:nt.useHTML5Audio&&nt.hasHTML5},this.supported=this.ok,this.getMovie=function(e){return a(e)||lt[e]||rt[e]
},this.createSound=function(e){function t(){return a=N(a),nt.sounds[o.id]=new s(o),nt.soundIDs.push(o.id),nt.sounds[o.id]}var n,i,a=null,r=null,o=null;return ht&&nt.ok()?(2===arguments.length&&(e={"id":arguments[0],"url":arguments[1]}),a=d(e),a.url=z(a.url),o=a,V(o.id,!0)?nt.sounds[o.id]:(H(o)?(r=t(),r._setup_html5(o)):(l>8&&(null===o.isMovieStar&&(o.isMovieStar=o.serverURL||(o.type?o.type.match(Ut):!1)||o.url.match(jt)),o.isMovieStar&&o.usePeakData&&(o.usePeakData=!1)),o=O(o,n),r=t(),8===l?it._createSound(o.id,o.loops||1,o.usePolicyFile):(it._createSound(o.id,o.url,o.usePeakData,o.useWaveformData,o.useEQData,o.isMovieStar,o.isMovieStar?o.bufferTime:!1,o.loops||1,o.serverURL,o.duration||null,o.autoPlay,!0,o.autoLoad,o.usePolicyFile),o.serverURL||(r.connected=!0,o.onconnect&&o.onconnect.apply(r))),o.serverURL||!o.autoLoad&&!o.autoPlay||r.load(o)),!o.serverURL&&o.autoPlay&&r.play(),r)):(B(i),!1)
},this.destroySound=function(e,t){if(!V(e))return!1;var n,i=nt.sounds[e];for(i._iO={},i.stop(),i.unload(),n=0;n<nt.soundIDs.length;n++)if(nt.soundIDs[n]===e){nt.soundIDs.splice(n,1);break}return t||i.destruct(!0),i=null,delete nt.sounds[e],!0},this.load=function(e,t){return V(e)?nt.sounds[e].load(t):!1},this.unload=function(e){return V(e)?nt.sounds[e].unload():!1},this.onPosition=function(e,t,n,i){return V(e)?nt.sounds[e].onposition(t,n,i):!1},this.onposition=this.onPosition,this.clearOnPosition=function(e,t,n){return V(e)?nt.sounds[e].clearOnPosition(t,n):!1
},this.play=function(e,t){return ht&&nt.ok()?V(e)?nt.sounds[e].play(t):(t instanceof Object||(t={"url":t}),t&&t.url?(t.id=e,nt.createSound(t).play()):!1):(B(st+".play(): "+_(ht?"notOK":"notReady")),!1)},this.start=this.play,this.setPosition=function(e,t){return V(e)?nt.sounds[e].setPosition(t):!1},this.stop=function(e){return V(e)?nt.sounds[e].stop():!1},this.stopAll=function(){var e;for(e in nt.sounds)nt.sounds.hasOwnProperty(e)&&nt.sounds[e].stop()},this.pause=function(e){return V(e)?nt.sounds[e].pause():!1
},this.pauseAll=function(){var e;for(e=nt.soundIDs.length-1;e>=0;e--)nt.sounds[nt.soundIDs[e]].pause()},this.resume=function(e){return V(e)?nt.sounds[e].resume():!1},this.resumeAll=function(){var e;for(e=nt.soundIDs.length-1;e>=0;e--)nt.sounds[nt.soundIDs[e]].resume()},this.togglePause=function(e){return V(e)?nt.sounds[e].togglePause():!1},this.setPan=function(e,t){return V(e)?nt.sounds[e].setPan(t):!1},this.setVolume=function(e,t){return V(e)?nt.sounds[e].setVolume(t):!1},this.mute=function(e){var t=0;
if("string"!=typeof e&&(e=null),e)return V(e)?nt.sounds[e].mute():!1;for(t=nt.soundIDs.length-1;t>=0;t--)nt.sounds[nt.soundIDs[t]].mute();return nt.muted=!0,!0},this.muteAll=function(){nt.mute()},this.unmute=function(e){var t;if("string"!=typeof e&&(e=null),e)return V(e)?nt.sounds[e].unmute():!1;for(t=nt.soundIDs.length-1;t>=0;t--)nt.sounds[nt.soundIDs[t]].unmute();return nt.muted=!1,!0},this.unmuteAll=function(){nt.unmute()},this.toggleMute=function(e){return V(e)?nt.sounds[e].toggleMute():!1},this.getMemoryUse=function(){var e=0;
return it&&8!==l&&(e=parseInt(it._getMemoryUse(),10)),e},this.disable=function(e){var t;if("undefined"==typeof e&&(e=!1),pt)return!1;for(pt=!0,t=nt.soundIDs.length-1;t>=0;t--)P(nt.sounds[nt.soundIDs[t]]);return c(e),G.remove(rt,"load",p),!0},this.canPlayMIME=function(e){var t;return nt.hasHTML5&&(t=$({"type":e})),!kt||t?t:e&&nt.ok()?!!((l>8?e.match(Ut):null)||e.match(nt.mimePattern)):null},this.canPlayURL=function(e){var t;return nt.hasHTML5&&(t=$({"url":e})),!kt||t?t:e&&nt.ok()?!!e.match(nt.filePattern):null
},this.canPlayLink=function(e){return"undefined"!=typeof e.type&&e.type&&nt.canPlayMIME(e.type)?!0:nt.canPlayURL(e.href)},this.getSoundById=function(e){if(!e)throw new Error(st+".getSoundById(): sID is null/undefined");var t=nt.sounds[e];return t},this.onready=function(e,t){var n="onready";if(e&&e instanceof Function)return t||(t=rt),u(n,e,t),h(),!0;throw _("needFunction",n)},this.ontimeout=function(e,t){var n="ontimeout";if(e&&e instanceof Function)return t||(t=rt),u(n,e,t),h({"type":n}),!0;throw _("needFunction",n)
},this._writeDebug=function(){return!0},this._wD=this._writeDebug,this._debug=function(){},this.reboot=function(){var e,t;for(e=nt.soundIDs.length-1;e>=0;e--)nt.sounds[nt.soundIDs[e]].destruct();try{Pt&&(vt=it.innerHTML),gt=it.parentNode.removeChild(it)}catch(n){}vt=gt=kt=null,nt.enabled=k=ht=yt=bt=dt=ut=pt=nt.swfLoaded=!1,nt.soundIDs=[],nt.sounds={},it=null;for(e in ct)if(ct.hasOwnProperty(e))for(t=ct[e].length-1;t>=0;t--)ct[e][t].fired=!1;rt.setTimeout(nt.beginDelayedInit,20)},this.getMoviePercent=function(){return it&&"undefined"!=typeof it.PercentLoaded?it.PercentLoaded():null
},this.beginDelayedInit=function(){ft=!0,w(),setTimeout(function(){return bt?!1:(C(),b(),bt=!0,!0)},20),f()},this.destruct=function(){nt.disable(!0)},s=function(e){var t,n,i,s,a,r,o,c,u,h=this,p=!1,f=[],m=0,g=null;u={"duration":null,"time":null},this.sID=e.id,this.url=e.url,this.options=d(e),this.instanceOptions=this.options,this._iO=this.instanceOptions,this.pan=this.options.pan,this.volume=this.options.volume,this.isHTML5=!1,this._a=null,this.id3={},this._debug=function(){},this.load=function(e){var t,n=null;
if("undefined"!=typeof e?(h._iO=d(e,h.options),h.instanceOptions=h._iO):(e=h.options,h._iO=e,h.instanceOptions=h._iO,g&&g!==h.url&&(h._iO.url=h.url,h.url=null)),h._iO.url||(h._iO.url=h.url),h._iO.url=z(h._iO.url),h._iO.url===h.url&&0!==h.readyState&&2!==h.readyState)return 3===h.readyState&&h._iO.onload&&h._iO.onload.apply(h,[!!h.duration]),h;if(t=h._iO,g=h.url,h.loaded=!1,h.readyState=1,h.playState=0,H(t))n=h._setup_html5(t),n._called_load||(h._html5_canplay=!1,h._a.autobuffer="auto",h._a.preload="auto",n.load(),n._called_load=!0,t.autoPlay&&h.play());
else try{h.isHTML5=!1,h._iO=O(N(t)),t=h._iO,8===l?it._load(h.sID,t.url,t.stream,t.autoPlay,t.whileloading?1:0,t.loops||1,t.usePolicyFile):it._load(h.sID,t.url,!!t.stream,!!t.autoPlay,t.loops||1,!!t.autoLoad,t.usePolicyFile)}catch(i){T({"type":"SMSOUND_LOAD_JS_EXCEPTION","fatal":!0})}return h},this.unload=function(){return 0!==h.readyState&&(h.isHTML5?(s(),h._a&&(h._a.pause(),Y(h._a))):8===l?it._unload(h.sID,Vt):it._unload(h.sID),t()),h},this.destruct=function(e){h.isHTML5?(s(),h._a&&(h._a.pause(),Y(h._a),Ct||i(),h._a._t=null,h._a=null)):(h._iO.onfailure=null,it._destroySound(h.sID)),e||nt.destroySound(h.sID,!0)
},this.play=function(e,t){var n,i,s;if(t=void 0===t?!0:t,e||(e={}),h._iO=d(e,h._iO),h._iO=d(h._iO,h.options),h._iO.url=z(h._iO.url),h.instanceOptions=h._iO,h._iO.serverURL&&!h.connected)return h.getAutoPlay()||h.setAutoPlay(!0),h;if(H(h._iO)&&(h._setup_html5(h._iO),a()),1===h.playState&&!h.paused&&(n=h._iO.multiShot,!n))return h;if(!h.loaded)if(0===h.readyState)h.isHTML5||(h._iO.autoPlay=!0),h.load(h._iO);else if(2===h.readyState)return h;if(!h.isHTML5&&9===l&&h.position>0&&h.position===h.duration&&(e.position=0),h.paused&&h.position&&h.position>0)h.resume();
else{if(h._iO=d(e,h._iO),null!==h._iO.from&&null!==h._iO.to&&0===h.instanceCount&&0===h.playState&&!h._iO.serverURL){if(s=function(){h._iO=d(e,h._iO),h.play(h._iO)},h.isHTML5&&!h._html5_canplay)return h.load({"_oncanplay":s}),!1;if(!(h.isHTML5||h.loaded||h.readyState&&2===h.readyState))return h.load({"onload":s}),!1;h._iO=c()}(!h.instanceCount||h._iO.multiShotEvents||!h.isHTML5&&l>8&&!h.getAutoPlay())&&h.instanceCount++,0===h.playState&&h._iO.onposition&&r(h),h.playState=1,h.paused=!1,h.position="undefined"==typeof h._iO.position||isNaN(h._iO.position)?0:h._iO.position,h.isHTML5||(h._iO=O(N(h._iO))),h._iO.onplay&&t&&(h._iO.onplay.apply(h),p=!0),h.setVolume(h._iO.volume,!0),h.setPan(h._iO.pan,!0),h.isHTML5?(a(),i=h._setup_html5(),h.setPosition(h._iO.position),i.play()):it._start(h.sID,h._iO.loops||1,9===l?h._iO.position:h._iO.position/1e3)
}return h},this.start=this.play,this.stop=function(e){var t,n=h._iO;return 1===h.playState&&(h._onbufferchange(0),h._resetOnPosition(0),h.paused=!1,h.isHTML5||(h.playState=0),o(),n.to&&h.clearOnPosition(n.to),h.isHTML5?h._a&&(t=h.position,h.setPosition(0),h.position=t,h._a.pause(),h.playState=0,h._onTimer(),s()):(it._stop(h.sID,e),n.serverURL&&h.unload()),h.instanceCount=0,h._iO={},n.onstop&&n.onstop.apply(h)),h},this.setAutoPlay=function(e){h._iO.autoPlay=e,h.isHTML5||(it._setAutoPlay(h.sID,e),e&&(h.instanceCount||1!==h.readyState||h.instanceCount++))
},this.getAutoPlay=function(){return h._iO.autoPlay},this.setPosition=function(e){void 0===e&&(e=0);var t,n,i,s=h.isHTML5?Math.max(e,0):Math.min(h.duration||h._iO.duration,Math.max(e,0));if(t=h.position,h.position=s,i=h.position/1e3,h._resetOnPosition(h.position),h._iO.position=s,h.isHTML5){if(h._a&&h._html5_canplay&&h._a.currentTime!==i)try{h._a.currentTime=i,(0===h.playState||h.paused)&&h._a.pause()}catch(a){}}else n=9===l?h.position:i,h.readyState&&2!==h.readyState&&it._setPosition(h.sID,n,h.paused||!h.playState);
return h.isHTML5&&h.paused&&h._onTimer(!0),h},this.pause=function(e){return h.paused||0===h.playState&&1!==h.readyState?h:(h.paused=!0,h.isHTML5?(h._setup_html5().pause(),s()):(e||void 0===e)&&it._pause(h.sID),h._iO.onpause&&h._iO.onpause.apply(h),h)},this.resume=function(){var e=h._iO;return h.paused?(h.paused=!1,h.playState=1,h.isHTML5?(h._setup_html5().play(),a()):(e.isMovieStar&&!e.serverURL&&h.setPosition(h.position),it._pause(h.sID)),!p&&e.onplay?(e.onplay.apply(h),p=!0):e.onresume&&e.onresume.apply(h),h):h
},this.togglePause=function(){return 0===h.playState?(h.play({"position":9!==l||h.isHTML5?h.position/1e3:h.position}),h):(h.paused?h.resume():h.pause(),h)},this.setPan=function(e,t){return"undefined"==typeof e&&(e=0),"undefined"==typeof t&&(t=!1),h.isHTML5||it._setPan(h.sID,e),h._iO.pan=e,t||(h.pan=e,h.options.pan=e),h},this.setVolume=function(e,t){return"undefined"==typeof e&&(e=100),"undefined"==typeof t&&(t=!1),h.isHTML5?h._a&&(h._a.volume=Math.max(0,Math.min(1,e/100))):it._setVolume(h.sID,nt.muted&&!h.muted||h.muted?0:e),h._iO.volume=e,t||(h.volume=e,h.options.volume=e),h
},this.mute=function(){return h.muted=!0,h.isHTML5?h._a&&(h._a.muted=!0):it._setVolume(h.sID,0),h},this.unmute=function(){h.muted=!1;var e="undefined"!=typeof h._iO.volume;return h.isHTML5?h._a&&(h._a.muted=!1):it._setVolume(h.sID,e?h._iO.volume:h.options.volume),h},this.toggleMute=function(){return h.muted?h.unmute():h.mute()},this.onPosition=function(e,t,n){return f.push({"position":parseInt(e,10),"method":t,"scope":"undefined"!=typeof n?n:h,"fired":!1}),h},this.onposition=this.onPosition,this.clearOnPosition=function(e,t){var n;
if(e=parseInt(e,10),isNaN(e))return!1;for(n=0;n<f.length;n++)e===f[n].position&&(t&&t!==f[n].method||(f[n].fired&&m--,f.splice(n,1)))},this._processOnPosition=function(){var e,t,n=f.length;if(!n||!h.playState||m>=n)return!1;for(e=n-1;e>=0;e--)t=f[e],!t.fired&&h.position>=t.position&&(t.fired=!0,m++,t.method.apply(t.scope,[t.position]));return!0},this._resetOnPosition=function(e){var t,n,i=f.length;if(!i)return!1;for(t=i-1;t>=0;t--)n=f[t],n.fired&&e<=n.position&&(n.fired=!1,m--);return!0},c=function(){var e,t,n=h._iO,i=n.from,s=n.to;
return t=function(){h.clearOnPosition(s,t),h.stop()},e=function(){null===s||isNaN(s)||h.onPosition(s,t)},null===i||isNaN(i)||(n.position=i,n.multiShot=!1,e()),n},r=function(){var e,t=h._iO.onposition;if(t)for(e in t)t.hasOwnProperty(e)&&h.onPosition(parseInt(e,10),t[e])},o=function(){var e,t=h._iO.onposition;if(t)for(e in t)t.hasOwnProperty(e)&&h.clearOnPosition(parseInt(e,10))},a=function(){h.isHTML5&&F(h)},s=function(){h.isHTML5&&q(h)},t=function(){f=[],m=0,p=!1,h._hasTimer=null,h._a=null,h._html5_canplay=!1,h.bytesLoaded=null,h.bytesTotal=null,h.duration=h._iO&&h._iO.duration?h._iO.duration:null,h.durationEstimate=null,h.eqData=[],h.eqData.left=[],h.eqData.right=[],h.failures=0,h.isBuffering=!1,h.instanceOptions={},h.instanceCount=0,h.loaded=!1,h.metadata={},h.readyState=0,h.muted=!1,h.paused=!1,h.peakData={"left":0,"right":0},h.waveformData={"left":[],"right":[]},h.playState=0,h.position=null
},t(),this._onTimer=function(e){var t,n,i=!1,s={};return h._hasTimer||e?h._a&&(e||(h.playState>0||1===h.readyState)&&!h.paused)?(t=h._get_html5_duration(),t!==u.duration&&(u.duration=t,h.duration=t,i=!0),h.durationEstimate=h.duration,n=1e3*h._a.currentTime||0,n!==u.time&&(u.time=n,i=!0),(i||e)&&h._whileplaying(n,s,s,s,s),i):!1:void 0},this._get_html5_duration=function(){var e=h._iO,t=h._a?1e3*h._a.duration:e?e.duration:void 0,n=t&&!isNaN(t)&&1/0!==t?t:e?e.duration:null;return n},this._setup_html5=function(e){var i=d(h._iO,e),s=decodeURI,a=Ct?nt._global_a:h._a,r=s(i.url),o=a&&a._t?a._t.instanceOptions:null;
if(a){if(a._t){if(!Ct&&r===s(g))return a;if(Ct&&o.url===i.url&&(!g||g===o.url))return a}Ct&&a._t&&a._t.playState&&i.url!==o.url&&a._t.stop(),t(),a.src=i.url,h.url=i.url,g=i.url,a._called_load=!1}else a=new Audio(i.url),a._called_load=!1,It&&(a._called_load=!0),Ct&&(nt._global_a=a);return h.isHTML5=!0,h._a=a,a._t=h,n(),a.loop=i.loops>1?"loop":"",i.autoLoad||i.autoPlay?h.load():(a.autobuffer=!1,a.preload="none"),a.loop=i.loops>1?"loop":"",a},n=function(){function e(e,t,n){return h._a?h._a.addEventListener(e,t,n||!1):null
}if(h._a._added_events)return!1;var t;h._a._added_events=!0;for(t in et)et.hasOwnProperty(t)&&e(t,et[t]);return!0},i=function(){function e(e,t,n){return h._a?h._a.removeEventListener(e,t,n||!1):null}var t;h._a._added_events=!1;for(t in et)et.hasOwnProperty(t)&&e(t,et[t])},this._onload=function(e){var t=!!e;return h.loaded=t,h.readyState=t?3:2,h._onbufferchange(0),h._iO.onload&&h._iO.onload.apply(h,[t]),!0},this._onbufferchange=function(e){return 0===h.playState?!1:e&&h.isBuffering||!e&&!h.isBuffering?!1:(h.isBuffering=1===e,h._iO.onbufferchange&&h._iO.onbufferchange.apply(h),!0)
},this._onsuspend=function(){return h._iO.onsuspend&&h._iO.onsuspend.apply(h),!0},this._onfailure=function(e,t,n){h.failures++,h._iO.onfailure&&1===h.failures&&h._iO.onfailure(h,e,t,n)},this._onfinish=function(){var e=h._iO.onfinish;h._onbufferchange(0),h._resetOnPosition(0),h.instanceCount&&(h.instanceCount--,h.instanceCount||(o(),h.playState=0,h.paused=!1,h.instanceCount=0,h.instanceOptions={},h._iO={},s()),(!h.instanceCount||h._iO.multiShotEvents)&&e&&e.apply(h))},this._whileloading=function(e,t,n,i){var s=h._iO;
h.bytesLoaded=e,h.bytesTotal=t,h.duration=Math.floor(n),h.bufferLength=i,s.isMovieStar?(h.durationEstimate=h.duration,3!==h.readyState&&s.whileloading&&s.whileloading.apply(h)):(h.durationEstimate=s.duration?h.duration>s.duration?h.duration:s.duration:parseInt(h.bytesTotal/h.bytesLoaded*h.duration,10),void 0===h.durationEstimate&&(h.durationEstimate=h.duration),3!==h.readyState&&s.whileloading&&s.whileloading.apply(h))},this._whileplaying=function(e,t,n,i,s){var a,r=h._iO;return isNaN(e)||null===e?!1:(h.position=e,h._processOnPosition(),!h.isHTML5&&l>8&&(r.usePeakData&&"undefined"!=typeof t&&t&&(h.peakData={"left":t.leftPeak,"right":t.rightPeak}),r.useWaveformData&&"undefined"!=typeof n&&n&&(h.waveformData={"left":n.split(","),"right":i.split(",")}),r.useEQData&&"undefined"!=typeof s&&s&&s.leftEQ&&(a=s.leftEQ.split(","),h.eqData=a,h.eqData.left=a,"undefined"!=typeof s.rightEQ&&s.rightEQ&&(h.eqData.right=s.rightEQ.split(",")))),1===h.playState&&(h.isHTML5||8!==l||h.position||!h.isBuffering||h._onbufferchange(0),r.whileplaying&&r.whileplaying.apply(h)),!0)
},this._onmetadata=function(e,t){var n,i,s={};for(n=0,i=e.length;i>n;n++)s[e[n]]=t[n];h.metadata=s,h._iO.onmetadata&&h._iO.onmetadata.apply(h)},this._onid3=function(e,t){var n,i,s=[];for(n=0,i=e.length;i>n;n++)s[e[n]]=t[n];h.id3=d(h.id3,s),h._iO.onid3&&h._iO.onid3.apply(h)},this._onconnect=function(e){e=1===e,h.connected=e,e&&(h.failures=0,V(h.sID)&&(h.getAutoPlay()?h.play(void 0,h.getAutoPlay()):h._iO.autoLoad&&h.load()),h._iO.onconnect&&h._iO.onconnect.apply(h,[e]))},this._ondataerror=function(){h.playState>0&&h._iO.ondataerror&&h._iO.ondataerror.apply(h)
}},S=function(){return lt.body||lt._docElement||lt.getElementsByTagName("div")[0]},a=function(e){return lt.getElementById(e)},d=function(e,t){var n,i,s,a={};for(n in e)e.hasOwnProperty(n)&&(a[n]=e[n]);i="undefined"==typeof t?nt.defaultOptions:t;for(s in i)i.hasOwnProperty(s)&&"undefined"==typeof a[s]&&(a[s]=i[s]);return a},G=function(){function e(e){var t=St.call(e),n=t.length;return s?(t[1]="on"+t[1],n>3&&t.pop()):3===n&&t.push(!1),t}function t(e,t){var n=e.shift(),i=[a[t]];s?n[i](e[0],e[1]):n[i].apply(n,e)
}function n(){t(e(arguments),"add")}function i(){t(e(arguments),"remove")}var s=rt.attachEvent,a={"add":s?"attachEvent":"addEventListener","remove":s?"detachEvent":"removeEventListener"};return{"add":n,"remove":i}}(),et={"abort":i(function(){}),"canplay":i(function(){var e,t=this._t;if(t._html5_canplay)return!0;if(t._html5_canplay=!0,t._onbufferchange(0),e=isNaN(t.position)?null:t.position/1e3,t.position&&this.currentTime!==e)try{this.currentTime=e}catch(n){}t._iO._oncanplay&&t._iO._oncanplay()}),"load":i(function(){var e=this._t;
e.loaded||(e._onbufferchange(0),e._whileloading(e.bytesTotal,e.bytesTotal,e._get_html5_duration()),e._onload(!0))}),"ended":i(function(){var e=this._t;e._onfinish()}),"error":i(function(){this._t._onload(!1)}),"loadeddata":i(function(){var e=this._t,t=e.bytesTotal||1;e._loaded||Dt||(e.duration=e._get_html5_duration(),e._whileloading(t,t,e._get_html5_duration()),e._onload(!0))}),"loadedmetadata":i(function(){}),"loadstart":i(function(){this._t._onbufferchange(1)}),"play":i(function(){this._t._onbufferchange(0)
}),"playing":i(function(){this._t._onbufferchange(0)}),"progress":i(function(e){var t,n=this._t,i=0,s=("progress"===e.type,e.target.buffered),a=e.loaded||0,r=e.total||1;if(n.loaded)return!1;if(s&&s.length){for(t=s.length-1;t>=0;t--)i=s.end(t)-s.start(t);a=i/e.target.duration}isNaN(a)||(n._onbufferchange(0),n._whileloading(a,r,n._get_html5_duration()),a&&r&&a===r&&et.load.call(this,e))}),"ratechange":i(function(){}),"suspend":i(function(e){var t=this._t;et.progress.call(this,e),t._onsuspend()}),"stalled":i(function(){}),"timeupdate":i(function(){this._t._onTimer()
}),"waiting":i(function(){var e=this._t;e._onbufferchange(1)})},H=function(e){return!e.serverURL&&(e.type?$({"type":e.type}):$({"url":e.url})||nt.html5Only)},Y=function(e){e&&(e.src=At?"":Vt)},$=function(e){function t(e){return nt.preferFlash&&X&&!nt.ignoreFlash&&"undefined"!=typeof nt.flash[e]&&nt.flash[e]}if(!nt.useHTML5Audio||!nt.hasHTML5)return!1;var n,i,s,a,r=e.url||null,o=e.type||null,l=nt.audioFormats;if(o&&"undefined"!=typeof nt.html5[o])return nt.html5[o]&&!t(o);if(!W){W=[];for(a in l)l.hasOwnProperty(a)&&(W.push(a),l[a].related&&(W=W.concat(l[a].related)));
W=new RegExp("\\.("+W.join("|")+")(\\?.*)?$","i")}if(s=r?r.toLowerCase().match(W):null,s&&s.length)s=s[1];else{if(!o)return!1;i=o.indexOf(";"),s=(-1!==i?o.substr(0,i):o).substr(6)}return s&&"undefined"!=typeof nt.html5[s]?nt.html5[s]&&!t(s):(o="audio/"+s,n=nt.html5.canPlayType({"type":o}),nt.html5[s]=n,n&&nt.html5[o]&&!t(o))},K=function(){function e(e){var t,n,i,a=!1;if(!s||"function"!=typeof s.canPlayType)return!1;if(e instanceof Array){for(n=0,i=e.length;i>n&&!a;n++)(nt.html5[e[n]]||s.canPlayType(e[n]).match(nt.html5Test))&&(a=!0,nt.html5[e[n]]=!0,nt.flash[e[n]]=!!(nt.preferFlash&&X&&e[n].match(Bt)));
return a}return t=s&&"function"==typeof s.canPlayType?s.canPlayType(e):!1,!(!t||!t.match(nt.html5Test))}if(!nt.useHTML5Audio||"undefined"==typeof Audio)return!1;var t,n,i,s="undefined"!=typeof Audio?_t?new Audio(null):new Audio:null,a={};n=nt.audioFormats;for(t in n)if(n.hasOwnProperty(t)&&(a[t]=e(n[t].type),a["audio/"+t]=a[t],nt.flash[t]=nt.preferFlash&&!nt.ignoreFlash&&t.match(Bt)?!0:!1,n[t]&&n[t].related))for(i=n[t].related.length-1;i>=0;i--)a["audio/"+n[t].related[i]]=a[t],nt.html5[n[t].related[i]]=a[t],nt.flash[n[t].related[i]]=a[t];
return a.canPlayType=s?e:null,nt.html5=d(nt.html5,a),!0},y={},_=function(){},N=function(e){return 8===l&&e.loops>1&&e.stream&&(e.stream=!1),e},O=function(e){return e&&!e.usePolicyFile&&(e.onid3||e.usePeakData||e.useWaveformData||e.useEQData)&&(e.usePolicyFile=!0),e},B=function(){},r=function(){return!1},P=function(e){var t;for(t in e)e.hasOwnProperty(t)&&"function"==typeof e[t]&&(e[t]=r);t=null},M=function(e){"undefined"==typeof e&&(e=!1),(pt||e)&&nt.disable(e)},D=function(e){var t,n=null;if(e)if(e.match(/\.swf(\?.*)?$/i)){if(n=e.substr(e.toLowerCase().lastIndexOf(".swf?")+4))return e
}else e.lastIndexOf("/")!==e.length-1&&(e+="/");return t=(e&&-1!==e.lastIndexOf("/")?e.substr(0,e.lastIndexOf("/")+1):"./")+nt.movieURL,nt.noSWFCache&&(t+="?ts="+(new Date).getTime()),t},g=function(){l=parseInt(nt.flashVersion,10),8!==l&&9!==l&&(nt.flashVersion=l=mt);var e=nt.debugMode||nt.debugFlash?"_debug.swf":".swf";nt.useHTML5Audio&&!nt.html5Only&&nt.audioFormats.mp4.required&&9>l&&(nt.flashVersion=l=9),nt.version=nt.versionNumber+(nt.html5Only?" (HTML5-only mode)":9===l?" (AS3/Flash 9)":" (AS2/Flash 8)"),l>8?(nt.defaultOptions=d(nt.defaultOptions,nt.flash9Options),nt.features.buffering=!0,nt.defaultOptions=d(nt.defaultOptions,nt.movieStarOptions),nt.filePatterns.flash9=new RegExp("\\.(mp3|"+zt.join("|")+")(\\?.*)?$","i"),nt.features.movieStar=!0):nt.features.movieStar=!1,nt.filePattern=nt.filePatterns[8!==l?"flash9":"flash8"],nt.movieURL=(8===l?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",e),nt.features.peakData=nt.features.waveformData=nt.features.eqData=l>8
},A=function(e,t){return it?void it._setPolling(e,t):!1},I=function(){nt.debugURLParam.test(ot)&&(nt.debugMode=!0)},V=this.getSoundById,L=function(){var e=[];return nt.debugMode&&e.push(R.sm2Debug),nt.debugFlash&&e.push(R.flashDebug),nt.useHighPerformance&&e.push(R.highPerf),e.join(" ")},E=function(){var e=(_("fbHandler"),nt.getMoviePercent()),t=R,n={"type":"FLASHBLOCK"};return nt.html5Only?!1:void(nt.ok()?nt.oMC&&(nt.oMC.className=[L(),t.swfDefault,t.swfLoaded+(nt.didFlashBlock?" "+t.swfUnblocked:"")].join(" ")):(kt&&(nt.oMC.className=L()+" "+t.swfDefault+" "+(null===e?t.swfTimedout:t.swfError)),nt.didFlashBlock=!0,h({"type":"ontimeout","ignoreInit":!0,"error":n}),T(n)))
},u=function(e,t,n){"undefined"==typeof ct[e]&&(ct[e]=[]),ct[e].push({"method":t,"scope":n||null,"fired":!1})},h=function(e){if(e||(e={"type":"onready"}),!ht&&e&&!e.ignoreInit)return!1;if("ontimeout"===e.type&&nt.ok())return!1;var t,n,i={"success":e&&e.ignoreInit?nt.ok():!pt},s=e&&e.type?ct[e.type]||[]:[],a=[],r=[i],o=kt&&nt.useFlashBlock&&!nt.ok();for(e.error&&(r[0].error=e.error),t=0,n=s.length;n>t;t++)s[t].fired!==!0&&a.push(s[t]);if(a.length)for(t=0,n=a.length;n>t;t++)a[t].scope?a[t].method.apply(a[t].scope,r):a[t].method.apply(this,r),o||(a[t].fired=!0);
return!0},p=function(){rt.setTimeout(function(){nt.useFlashBlock&&E(),h(),nt.onload instanceof Function&&nt.onload.apply(rt),nt.waitForWindowLoad&&G.add(rt,"load",p)},1)},J=function(){if(void 0!==X)return X;var e,t,n,i=!1,s=navigator,a=s.plugins,r=rt.ActiveXObject;if(a&&a.length)t="application/x-shockwave-flash",n=s.mimeTypes,n&&n[t]&&n[t].enabledPlugin&&n[t].enabledPlugin.description&&(i=!0);else if("undefined"!=typeof r){try{e=new r("ShockwaveFlash.ShockwaveFlash")}catch(o){}i=!!e}return X=i,i},j=function(){var e,t,n=Tt&&!!at.match(/os (1|2|3_0|3_1)/i);
if(n)return nt.hasHTML5=!1,nt.html5Only=!0,nt.oMC&&(nt.oMC.style.display="none"),!1;if(!nt.useHTML5Audio)return!0;if(!nt.html5||!nt.html5.canPlayType)return nt.hasHTML5=!1,!0;if(nt.hasHTML5=!0,Lt&&J())return!0;for(t in nt.audioFormats)nt.audioFormats.hasOwnProperty(t)&&(nt.audioFormats[t].required&&!nt.html5.canPlayType(nt.audioFormats[t].type)||nt.flash[t]||nt.flash[nt.audioFormats[t].type])&&(e=!0);return nt.ignoreFlash&&(e=!1),nt.html5Only=nt.hasHTML5&&nt.useHTML5Audio&&!e,!nt.html5Only},z=function(e){var t,n,i=0;
if(e instanceof Array){for(t=0,n=e.length;n>t;t++)if(e[t]instanceof Object){if(nt.canPlayMIME(e[t].type)){i=t;break}}else if(nt.canPlayURL(e[t])){i=t;break}return e[i].url&&(e[i]=e[i].url),e[i]}return e},F=function(t){t._hasTimer||(t._hasTimer=!0,!Et&&nt.html5PollingInterval&&(null===xt&&0===wt&&(xt=e.setInterval(U,nt.html5PollingInterval)),wt++))},q=function(e){e._hasTimer&&(e._hasTimer=!1,!Et&&nt.html5PollingInterval&&wt--)},U=function(){var t;if(null!==xt&&!wt)return e.clearInterval(xt),xt=null,!1;
for(t=nt.soundIDs.length-1;t>=0;t--)nt.sounds[nt.soundIDs[t]].isHTML5&&nt.sounds[nt.soundIDs[t]]._hasTimer&&nt.sounds[nt.soundIDs[t]]._onTimer()},T=function(e){e="undefined"!=typeof e?e:{},nt.onerror instanceof Function&&nt.onerror.apply(rt,[{"type":"undefined"!=typeof e.type?e.type:null}]),"undefined"!=typeof e.fatal&&e.fatal&&nt.disable()},Z=function(){if(!Lt||!J())return!1;var e,t,n=nt.audioFormats;for(t in n)if(n.hasOwnProperty(t)&&("mp3"===t||"mp4"===t)&&(nt.html5[t]=!1,n[t]&&n[t].related))for(e=n[t].related.length-1;e>=0;e--)nt.html5[n[t].related[e]]=!1
},this._setSandboxType=function(){},this._externalInterfaceOK=function(){if(nt.swfLoaded)return!1;(new Date).getTime();nt.swfLoaded=!0,Nt=!1,Lt&&Z(),Pt?setTimeout(o,100):o()},C=function(e,t){function n(){}function i(e,t){return'<param name="'+e+'" value="'+t+'" />'}if(dt&&ut)return!1;if(nt.html5Only)return g(),n(),nt.oMC=a(nt.movieID),o(),dt=!0,ut=!0,!1;var s,r,l,c,d,u,h,p,f=t||nt.url,m=nt.altURL||f,v="JS/Flash audio component (SoundManager 2)",y=S(),b=L(),w=null,x=null,k=lt.getElementsByTagName("html")[0];
if(x=k&&k.dir&&k.dir.match(/rtl/i),e="undefined"==typeof e?nt.id:e,g(),nt.url=D(Ft?f:m),t=nt.url,nt.wmode=!nt.wmode&&nt.useHighPerformance?"transparent":nt.wmode,null!==nt.wmode&&(at.match(/msie 8/i)||!Pt&&!nt.useHighPerformance)&&navigator.platform.match(/win32|win64/i)&&(nt.wmode=null),s={"name":e,"id":e,"src":t,"quality":"high","allowScriptAccess":nt.allowScriptAccess,"bgcolor":nt.bgColor,"pluginspage":qt+"www.macromedia.com/go/getflashplayer","title":v,"type":"application/x-shockwave-flash","wmode":nt.wmode,"hasPriority":"true"},null!==w&&(s.width=w,s.height=w),nt.debugFlash&&(s.FlashVars="debug=1"),nt.wmode||delete s.wmode,Pt)r=lt.createElement("div"),c=['<object id="'+e+'" data="'+t+'" type="'+s.type+'" title="'+s.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+qt+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0" width="'+s.width+'" height="'+s.height+'">',i("movie",t),i("AllowScriptAccess",nt.allowScriptAccess),i("quality",s.quality),nt.wmode?i("wmode",nt.wmode):"",i("bgcolor",nt.bgColor),i("hasPriority","true"),nt.debugFlash?i("FlashVars",s.FlashVars):"","</object>"].join("");
else{r=lt.createElement("embed");for(l in s)s.hasOwnProperty(l)&&r.setAttribute(l,s[l])}if(I(),b=L(),y=S())if(nt.oMC=a(nt.movieID)||lt.createElement("div"),nt.oMC.id)p=nt.oMC.className,nt.oMC.className=(p?p+" ":R.swfDefault)+(b?" "+b:""),nt.oMC.appendChild(r),Pt&&(d=nt.oMC.appendChild(lt.createElement("div")),d.className=R.swfBox,d.innerHTML=c),ut=!0;else{if(nt.oMC.id=nt.movieID,nt.oMC.className=R.swfDefault+" "+b,u=null,d=null,nt.useFlashBlock||(nt.useHighPerformance?u={"position":"fixed","width":"8px","height":"8px","bottom":"0px","left":"0px","overflow":"hidden"}:(u={"position":"absolute","width":"6px","height":"6px","top":"-9999px","left":"-9999px"},x&&(u.left=Math.abs(parseInt(u.left,10))+"px"))),Mt&&(nt.oMC.style.zIndex=1e4),!nt.debugFlash)for(h in u)u.hasOwnProperty(h)&&(nt.oMC.style[h]=u[h]);
try{Pt||nt.oMC.appendChild(r),y.appendChild(nt.oMC),Pt&&(d=nt.oMC.appendChild(lt.createElement("div")),d.className=R.swfBox,d.innerHTML=c),ut=!0}catch(C){throw new Error(_("domError")+" \n"+C.toString())}}return dt=!0,n(),!0},b=function(){return nt.html5Only?(C(),!1):it?!1:(it=nt.getMovie(nt.id),it||(gt?(Pt?nt.oMC.innerHTML=vt:nt.oMC.appendChild(gt),gt=null,dt=!0):C(nt.id,nt.url),it=nt.getMovie(nt.id)),nt.oninitmovie instanceof Function&&setTimeout(nt.oninitmovie,1),!0)},f=function(){setTimeout(m,1e3)
},m=function(){if(yt)return!1;if(yt=!0,G.remove(rt,"load",f),Nt&&!Rt)return!1;var e;ht||(e=nt.getMoviePercent()),setTimeout(function(){e=nt.getMoviePercent(),!ht&&Ot&&(null===e?nt.useFlashBlock||0===nt.flashLoadTimeout?nt.useFlashBlock&&E():M(!0):0===nt.flashLoadTimeout||M(!0))},nt.flashLoadTimeout)},v=function(){function e(){G.remove(rt,"focus",v),G.remove(rt,"load",v)}return Rt||!Nt?(e(),!0):(Ot=!0,Rt=!0,Dt&&Nt&&G.remove(rt,"mousemove",v),yt=!1,e(),!0)},tt=function(){var e,t=[];if(nt.useHTML5Audio&&nt.hasHTML5)for(e in nt.audioFormats)nt.audioFormats.hasOwnProperty(e)&&t.push(e+": "+nt.html5[e]+(!nt.html5[e]&&X&&nt.flash[e]?" (using flash)":nt.preferFlash&&nt.flash[e]&&X?" (preferring flash)":nt.html5[e]?"":" ("+(nt.audioFormats[e].required?"required, ":"")+"and no flash support)"))
},c=function(e){if(ht)return!1;if(nt.html5Only)return ht=!0,p(),!0;var t,n=nt.useFlashBlock&&nt.flashLoadTimeout&&!nt.getMoviePercent();return n||(ht=!0,pt&&(t={"type":!X&&kt?"NO_FLASH":"INIT_TIMEOUT"})),pt||e?(nt.useFlashBlock&&nt.oMC&&(nt.oMC.className=L()+" "+(null===nt.getMoviePercent()?R.swfTimedout:R.swfError)),h({"type":"ontimeout","error":t}),T(t),!1):nt.waitForWindowLoad&&!ft?(G.add(rt,"load",p),!1):(p(),!0)},o=function(){function e(){G.remove(rt,"load",nt.beginDelayedInit)}if(ht)return!1;
if(nt.html5Only)return ht||(e(),nt.enabled=!0,c()),!0;b();try{it._externalInterfaceTest(!1),A(!0,nt.flashPollingInterval||(nt.useHighPerformance?10:50)),nt.debugMode||it._disableDebug(),nt.enabled=!0,nt.html5Only||G.add(rt,"unload",r)}catch(t){return T({"type":"JS_TO_FLASH_EXCEPTION","fatal":!0}),M(!0),c(),!1}return c(),e(),!0},w=function(){return k?!1:(k=!0,I(),!X&&nt.hasHTML5&&(nt.useHTML5Audio=!0,nt.preferFlash=!1),K(),nt.html5.usingFlash=j(),kt=nt.html5.usingFlash,tt(),!X&&kt&&(nt.flashLoadTimeout=1),lt.removeEventListener&&lt.removeEventListener("DOMContentLoaded",w,!1),b(),!0)
},Q=function(){return"complete"===lt.readyState&&(w(),lt.detachEvent("onreadystatechange",Q)),!0},x=function(){ft=!0,G.remove(rt,"load",x)},J(),G.add(rt,"focus",v),G.add(rt,"load",v),G.add(rt,"load",f),G.add(rt,"load",x),Dt&&Nt&&G.add(rt,"mousemove",v),lt.addEventListener?lt.addEventListener("DOMContentLoaded",w,!1):lt.attachEvent?lt.attachEvent("onreadystatechange",Q):T({"type":"NO_DOM2_EVENTS","fatal":!0}),"complete"===lt.readyState&&setTimeout(w,100)}var n=null;"undefined"!=typeof SM2_DEFER&&SM2_DEFER||(n=new t),e.SoundManager=t,e.soundManager=n
}(window),define("soundmanager-lib",["soundmanager-defer"],function(e){return function(){var t;return t||e.soundManager}}(this)),define("soundmanager",["soundmanager-lib","plex/base/models/ConfigModel"],function(e,t){return e=new SoundManager,window.soundManager=e,e.url="swf/soundmanager",e.preferFlash=t.get("flash"),e.flashVersion=9,e.flashLoadTimeout=0,e.useFastPolling=!0,e.useHighPerformance=!0,e.beginDelayedInit(),e}),define("plex/desktop/commands/library/PlaySoundCommand",["underscore","soundmanager"],function(e,t){function n(){l&&(l.destruct(),l=null)
}function i(){var e=setInterval(function(){return l?(l.setVolume(l.volume-5),void(l.volume<=0&&(clearInterval(e),n()))):void clearInterval(e)},50)}function s(i){i.onfinish=i.onfinish?e.wrap(i.onfinish,function(e){n(),e()}):n,i.id=i.url,l=t.createSound(i),l.key=i.key,l.background=!!i.background,i.oncreate&&i.oncreate(l)}function a(e){if(l&&e.background){if(!l.background)return;if(l.url===e.url)return void(l.key=e.key)}n(),t.preferFlash&&!t.swfLoaded?(t.preferFlash=!1,t.onready(function(){s(e)}),t.reboot()):s(e)
}function r(e){l&&(e.key&&e.key!==l.key||(l.background?i():e.background||n()))}function o(e){e||(e={}),e.stop?r(e):a(e)}var l;return o}),define("plex/desktop/commands/library/RefreshMetadataCommand",["underscore","jquery"],function(e,t){function n(n){var i=n.item,s="/library/metadata/"+i.id+"/refresh",a=e.extend(i.server.getXHROptions(s),{"type":"PUT"});return t.ajax(a).promise()}return n}),define("plex/desktop/commands/library/AnalyzeItemCommand",["underscore","jquery"],function(e,t){function n(n){var i=n.item,s="/library/metadata/"+i.id+"/analyze",a=e.extend(i.server.getXHROptions(s),{"type":"PUT"});
return t.ajax(a).promise()}return n}),define("plex/desktop/commands/library/AnalyzeSectionCommand",["underscore","jquery","plex/base/utils/Dispatcher","plex/base/adapters/LocalizerAdapter","plex/desktop/views/modals/ConfirmModal"],function(e,t,n,i,s){function a(a){function r(){var e=t.ajax(u);e.done(function(){o.resolve()}),e.fail(function(e){n.trigger("show:alert",{"type":"error","message":l.t("There was a problem analyzing the library.")}),o.reject(e)}),e.always(function(){h.hide()})}var o=t.Deferred(),l=i.get(),c=a.section,d="/library/sections/"+c.id+"/analyze",u=e.extend(c.server.getXHROptions(d),{"type":"PUT"}),h=new s({"title":l.t("Analyze Library"),"message":l.t("Analyzes all the media files in the library. The analysis captures information about the media which helps Plex decide how to optimally play back the media."),"confirmLabel":l.t("Analyze"),"cancelLabel":l.t("Cancel"),"async":!0}),p=h.promise;
return p.done(r),p.fail(function(){o.reject()}),n.trigger("show:modal",h),o.promise()}return a}),define("plex/desktop/commands/library/MarkWatchedCommand",["underscore","jquery","plex/base/utils/Dispatcher","plex/base/utils/types/MediaTypes","plex/base/adapters/LocalizerAdapter","plex/desktop/views/modals/ConfirmModal"],function(e,t,n,i,s,a){function r(e){function r(){var e=t.ajax(c.server.getXHROptions(u));e.done(function(){function e(t){var n=i.getMediaTypeByString(t.get("type"));if(n&&"directory"===n.element){t.set({"unviewedLeafCount":0,"viewedLeafCount":t.get("leafCount")});
var s=t.get("children");if(!s)return;s.each(e)}else t.set({"viewOffset":0,"viewCount":1})}e(c),o.resolve()}),e.fail(function(e){n.trigger("show:alert",{"type":"error","message":l.t("There was a problem marking this item as watched.")}),o.reject(e)})}var o=t.Deferred(),l=s.get(),c=e.item,d=i.getMediaTypeByString(c.get("type")),u="/:/scrobble?key="+encodeURIComponent(c.get("ratingKey"))+"&identifier="+c.get("identifier");if(d&&"directory"===d.element&&!e.force){var h=new a({"title":l.t("Mark as Watched"),"message":l.t("Are you sure you want to mark all episodes as watched?")}),p=h.promise;
p.done(r),p.fail(function(){o.reject()}),n.trigger("show:modal",h)}else r();return o.promise()}return r}),define("plex/desktop/commands/library/MarkUnwatchedCommand",["underscore","jquery","plex/base/utils/Dispatcher","plex/base/utils/types/MediaTypes","plex/base/adapters/LocalizerAdapter","plex/desktop/views/modals/ConfirmModal"],function(e,t,n,i,s,a){function r(e){function r(){var e=t.ajax(c.server.getXHROptions(u));e.done(function(){function e(t){var n=i.getMediaTypeByString(t.get("type"));if(n&&"directory"===n.element){t.set({"unviewedLeafCount":t.get("leafCount"),"viewedLeafCount":0});
var s=t.get("children");if(!s)return;s.each(e)}else t.set({"viewOffset":0,"viewCount":0})}e(c),o.resolve()}),e.fail(function(e){n.trigger("show:alert",{"type":"error","message":l.t("There was a problem marking this item as unwatched.")}),o.reject(e)})}var o=t.Deferred(),l=s.get(),c=e.item,d=i.getMediaTypeByString(c.get("type")),u="/:/unscrobble?key="+encodeURIComponent(c.get("ratingKey"))+"&identifier="+c.get("identifier");if(d&&"directory"===d.element&&!e.force){var h=new a({"title":l.t("Mark as Unwatched"),"message":l.t("Are you sure you want to mark all episodes as unwatched?")}),p=h.promise;
p.done(r),p.fail(function(){o.reject()}),n.trigger("show:modal",h)}else r();return o.promise()}return r}),define("plex/desktop/commands/library/UnmatchCommand",["underscore","jquery","plex/base/utils/Dispatcher","plex/base/adapters/LocalizerAdapter","plex/base/models/AppModel"],function(e,t,n,i){function s(s){var a=s.item,r="/library/metadata/"+a.id+"/unmatch",o=e.extend(a.server.getXHROptions(r),{"type":"PUT"}),l=t.ajax(o);return l.fail(function(){var e=i.get();n.trigger("show:alert",{"type":"error","message":e.t("There was a problem unmatching this item.")})
}),l.promise()}return s}),define("plex/desktop/commands/library/SplitApartCommand",["underscore","jquery","plex/base/utils/Dispatcher","plex/base/adapters/LocalizerAdapter","plex/desktop/views/modals/ConfirmModal"],function(e,t,n,i,s){function a(a){function r(){var i=e.extend(c.server.getXHROptions(d),{"type":"PUT"}),s=t.ajax(i);s.done(function(){var e,t=c.get("type");e="show"===t||"artist"===t||"album"===t?"Location":"Media",c.set(e,c.get(e).slice(0,1)),n.trigger("navigate:back"),o.resolve()}),s.fail(function(e){n.trigger("show:alert",{"type":"error","message":l.t("There was a problem splitting this item apart.")}),o.reject(e)
}),s.always(function(){u.hide()})}var o=t.Deferred(),l=i.get(),c=a.item,d="/library/metadata/"+c.id+"/split",u=new s({"title":l.t("Split Apart"),"message":l.t("Are you sure you want to split this item apart?"),"async":!0}),h=u.promise;return h.done(r),h.fail(function(){o.reject()}),n.trigger("show:modal",u),o.promise()}return a}),define("plex/desktop/commands/library/MergeCommand",["underscore","jquery","plex/base/utils/Dispatcher","plex/base/adapters/LocalizerAdapter","plex/desktop/views/modals/ConfirmModal"],function(e,t,n,i,s){function a(a){function r(){var e=t.ajax(h);
e.done(function(){o.resolve()}),e.fail(function(e){n.trigger("show:alert",{"type":"error","message":l.t("There was a problem merging these items.")}),o.reject(e)}),e.always(function(){p.hide()})}var o=t.Deferred(),l=i.get(),c=a.item,d=e.pluck(a.items,"id").join(","),u="/library/metadata/"+c.id+"/merge?ids="+d,h=e.extend(c.server.getXHROptions(u),{"type":"PUT"}),p=new s({"title":l.t("Merge"),"message":l.t("Are you sure you want to merge these items together?"),"async":!0}),f=p.promise;return f.done(r),f.fail(function(){o.reject()
}),n.trigger("show:modal",p),o.promise()}return a}),define("plex/desktop/commands/library/DeleteFileCommand",["underscore","jquery","plex/base/utils/Dispatcher","plex/base/adapters/LocalizerAdapter","plex/base/models/library/MetadataModel","plex/desktop/views/modals/SelectMediaModal","plex/desktop/views/modals/ConfirmModal"],function(e,t,n,i,s,a,r){function o(o){function l(){if(u=g.get("Media"),u.length<2||!v.supports("specificMediaDeletion"))return void c();var e=new a({"model":g}),t=e.promise;t.done(function(e){h=u[e],c()
}),t.fail(function(){f.reject()}),n.trigger("show:modal",e)}function c(){p=new r({"title":m.t("Delete Item"),"message":m.t("Are you sure you want to delete this item from your filesystem?"),"async":!0,"hasDanger":!0});var e=p.promise;e.done(d),e.fail(function(){f.reject()}),n.trigger("show:modal",p)}function d(){var i;if(h){var a="/library/metadata/"+g.id+"/media/"+h.id,r=e.extend(v.getXHROptions(a),{"type":"DELETE"});i=t.ajax(r)}else i=g.destroy({"wait":!0});i.done(function(){if(h)u.splice(e.indexOf(u,h),1),g.trigger("change:Media",g,g.get("Media"));
else{var t=function(){f.resolve(),o.skipRedirect||n.trigger("navigate","section",{"serverID":v.id,"sectionID":g.section.id})},i=function(e){f.resolve(),o.skipRedirect||n.trigger("navigate","details",{"serverID":v.id,"key":e})},a=function(n){if(!n)return t(),!1;var i=new s({"key":n},{"server":g.server,"onlyIfCached":!0});return e.isEmpty(i)?(t(),!1):(i.release(),i)},r=a(g.get("parentKey"));if(r){var l=r.get("children");if(l.length)return void i(r.get("key"));var c=a(g.get("grandparentKey"));if(c){var d=c.get("children");
r.trigger("destroy",r,d),d.length?i(c.get("key")):t()}}}}),i.fail(function(e){var t;t=403===e.status?'"Allow clients to delete media" must be enabled in your server settings.':"There was a problem deleting this item.",n.trigger("show:alert",{"type":"error","message":m.t(t)}),f.reject(e)}),i.always(function(){p.hide()})}var u,h,p,f=t.Deferred(),m=i.get(),g=o.item,v=g.server;return l(),f.promise()}return o}),define("plex/desktop/commands/library/DeleteSectionCommand",["underscore","jquery","plex/base/utils/Dispatcher","plex/base/adapters/LocalizerAdapter","plex/desktop/views/modals/ConfirmModal"],function(e,t,n,i,s){function a(e){function a(){var e=l.destroy({"wait":!0});
e.done(function(){r.resolve()}),e.fail(function(e){n.trigger("show:alert",{"type":"error","message":o.t("There was a problem deleting the library.")}),r.reject(e)}),e.always(function(){c.hide()})}var r=t.Deferred(),o=i.get(),l=e.section,c=new s({"title":o.t("Delete Library"),"message":o.t("Are you sure you want to delete this library? This cannot be undone."),"confirmLabel":o.t("Delete"),"cancelLabel":o.t("Cancel"),"async":!0,"hasDanger":!0}),d=c.promise;return d.done(a),d.fail(function(){r.reject()
}),n.trigger("show:modal",c),r.promise()}return a}),define("plex/desktop/commands/library/RateCommand",["underscore","jquery","plex/base/utils/Dispatcher","plex/base/adapters/LocalizerAdapter"],function(e,t,n,i){function s(e){var s=e.item,a=e.rating,r={"key":s.get("ratingKey"),"identifier":s.get("identifier"),"rating":a},o="/:/rate?"+t.param(r,!0),l=t.ajax(s.server.getXHROptions(o));return s.set("userRating",a),l.fail(function(){var e=i.get();n.trigger("show:alert",{"type":"error","message":e.t("There was a problem rating this item.")})
}),l.promise()}return s}),define("plex/desktop/commands/library/UpdateLibraryCommand",["underscore","jquery","plex/base/utils/Dispatcher","plex/base/adapters/LocalizerAdapter","plex/desktop/views/modals/ConfirmModal"],function(e,t,n,i,s){function a(a){function r(){var e=t.ajax(g);e.done(function(){o.resolve()}),e.fail(function(e){var t;t=l.t(u?"There was a problem canceling the update.":"There was a problem updating the library."),n.trigger("show:alert",{"type":"error","message":t}),o.reject(e)})
}var o=t.Deferred(),l=i.get(),c=a.section,d=c?c.id:"all",u=a.cancel,h=c?c.server:a.server,p=a.params||{},f={};p.force&&(f.force=1);var m="/library/sections/"+d+"/refresh",g=e.extend(h.getXHROptions(m),{"data":f});if(u&&(g.type="DELETE",c&&c.set("refreshing",!1)),f.force){var v=new s({"title":l.t("Force Refresh"),"message":l.t("Forces a download of fresh media information from the Internet. This can take a long time. Any locked fields are not modified."),"confirmLabel":l.t("Refresh"),"cancelLabel":l.t("Cancel")}),y=v.promise;
y.done(r),y.fail(function(){o.reject()}),n.trigger("show:modal",v)}else r();return o.promise()}return a}),define("plex/desktop/commands/library/OptimizeCommand",["underscore","jquery","plex/base/utils/Dispatcher","plex/base/adapters/LocalizerAdapter","plex/desktop/views/modals/ConfirmModal"],function(e,t,n,i,s){function a(a){function r(){var e=t.ajax(u);e.done(function(){n.trigger("show:alert",{"type":"success","message":l.t("The database was optimized.")}),o.resolve()}),e.fail(function(e){n.trigger("show:alert",{"type":"error","message":l.t("There was a problem optimizing this database.")}),o.reject(e)
}),e.always(function(){h.hide()})}var o=t.Deferred(),l=i.get(),c=a.server,d="/library/optimize",u=e.extend(c.getXHROptions(d),{"type":"PUT"}),h=new s({"title":l.t("Optimize Database"),"message":l.t("Cleans up the library database and ensures it is operating as quickly as possible. This is especially useful when you've added or removed a large amount of media from the library."),"confirmLabel":l.t("Optimize"),"cancelLabel":l.t("Cancel"),"async":!0}),p=h.promise;return p.done(r),p.fail(function(){o.reject()
}),n.trigger("show:modal",h),o.promise()}return a}),define("plex/desktop/commands/library/CleanBundlesCommand",["underscore","jquery","plex/base/utils/Dispatcher","plex/base/adapters/LocalizerAdapter","plex/desktop/views/modals/ConfirmModal"],function(e,t,n,i,s){function a(a){function r(){var e=t.ajax(u);e.done(function(){n.trigger("show:alert",{"type":"success","message":l.t("Unused bundles are being removed.")}),o.resolve()}),e.fail(function(e){n.trigger("show:alert",{"type":"error","message":l.t("There was a problem removing unused bundles.")}),o.reject(e)
}),e.always(function(){h.hide()})}var o=t.Deferred(),l=i.get(),c=a.server,d="/library/clean/bundles",u=e.extend(c.getXHROptions(d),{"type":"PUT"}),h=new s({"title":l.t("Clean Bundles"),"message":l.t("The media server stores information about your media to disk, as well as posters, artwork, and other media resources from the Internet. Running this task deletes any bundles which are no longer in use."),"confirmLabel":l.t("Clean"),"cancelLabel":l.t("Cancel"),"async":!0}),p=h.promise;return p.done(r),p.fail(function(){o.reject()
}),n.trigger("show:modal",h),o.promise()}return a}),define("plex/desktop/commands/library/EmptyTrashCommand",["underscore","jquery","plex/base/utils/Dispatcher","plex/base/adapters/LocalizerAdapter","plex/desktop/views/modals/ConfirmModal"],function(e,t,n,i,s){function a(a){function r(){e.each(u,function(n){var i="/library/sections/"+n+"/emptyTrash",s=e.extend(d.getXHROptions(i),{"type":"PUT"});h.push(t.ajax(s))});var i=t.when.apply(t,h);i.done(function(){n.trigger("show:alert",{"type":"success","message":l.t("The trash was emptied.")}),o.resolve()
}),i.fail(function(e){n.trigger("show:alert",{"type":"error","message":l.t("There was a problem emptying the trash.")}),o.reject(e)}),i.always(function(){f.hide()})}var o=t.Deferred(),l=i.get(),c=a.section,d=c?c.server:a.server,u=[],h=[];if(c)u.push(c.id);else{var p=d.get("sections");p.each(function(e){u.push(e.id)})}var f=new s({"title":l.t("Empty Trash"),"message":l.t("By default the media server doesn't remove information for media right away. This helps if a drive is temporarily disconnected. When you empty the trash for a section, all information about missing media is deleted."),"confirmLabel":l.t("Empty"),"cancelLabel":l.t("Cancel"),"async":!0}),m=f.promise;
return m.done(r),m.fail(function(){o.reject()}),n.trigger("show:modal",f),o.promise()}return a}),define("plex/desktop/commands/library/MatchCommand",["underscore","jquery"],function(e,t){function n(n){var i=n.item,s={"guid":n.guid,"name":n.name},a="/library/metadata/"+i.id+"/match?"+t.param(s,!0),r=e.extend(i.server.getXHROptions(a),{"type":"PUT"});return t.ajax(r).promise()}return n}),define("plex/desktop/commands/library/AutoMatchCommand",["underscore","jquery","plex/base/utils/Dispatcher","plex/base/utils/Parser","plex/base/adapters/LocalizerAdapter"],function(e,t,n,i,s){function a(a){var r=t.Deferred(),o=s.get(),l=a.item,c=a.agent,d={"agent":c.id,"manual":0},u="/library/metadata/"+l.id+"/matches?"+t.param(d,!0),h=e.extend(l.server.getXHROptions(u)),p=t.ajax(h);
return p.done(function(s){var a=e.isObject(s)?s:i.parseXML(s);if(a.SearchResult){var c=a.SearchResult;e.isArray(a.SearchResult)&&(c=a.SearchResult[0]),d={"guid":c.guid,"name":c.name};var u="/library/metadata/"+l.id+"/match?"+t.param(d,!0),h=e.extend(l.server.getXHROptions(u),{"type":"PUT"}),p=t.ajax(h);p.done(function(){r.resolve()}),p.fail(function(){n.trigger("show:alert",{"type":"error","message":o.t("There was a problem matching this item.")}),r.reject()})}else n.trigger("show:alert",{"type":"error","message":o.t("No matches were found using this agent.")}),r.reject()
}),p.fail(function(e){n.trigger("show:alert",{"type":"error","message":o.t("There was a problem searching for matches.")}),r.reject(e)}),r.promise()}return a}),define("plex/desktop/commands/library/ChangeArtworkCommand",["underscore","jquery"],function(e,t){function n(n){var s=n.item,a={"url":n.artworkRatingKey},r="/library/metadata/"+s.id+"/"+n.artworkType+"?"+t.param(a,!0),o=e.extend(s.server.getXHROptions(r),{"type":"PUT"}),l=t.ajax(o);return l.done(function(e){s.set(i[n.artworkType],e)}),l.promise()
}var i={"poster":"thumb","art":"art","banner":"banner"};return n}),define("plex/desktop/commands/channel/InstallChannelCommand",["underscore","jquery"],function(e,t){function n(e){var n=e.channel,i=n.get("identifier"),s=i?"/system/appstore/apps/"+i:n.get("key"),a=s+"/install",r=n.server.getXHROptions(a),o=t.ajax(r);return o.done(function(){n.set("installed",!0)}),o.promise()}return n}),define("plex/desktop/commands/channel/UpdateChannelCommand",["underscore","jquery","plex/base/utils/Dispatcher","plex/base/utils/Parser","plex/base/adapters/LocalizerAdapter"],function(e,t,n,i,s){function a(a){function r(s){var a=e.isObject(s)?s:i.parseXML(s);
if(!a||!a.message&&!a.Directory)return void o();if(a.message)p||n.trigger("show:alert",{"type":"success","message":d.t(a.message)}),c.resolve();else{i.parseArray(a,"Directory");var l=a.Directory[0].key,u=t.ajax(h.getXHROptions(l));u.done(r),u.fail(o)}}function o(e){p||n.trigger("show:alert",{"type":"error","message":d.t("There was a problem checking for updates.")}),c.reject(e)}var l,c=t.Deferred(),d=s.get(),u=a.channel,h=u?u.server:a.server,p=a.silent;if(u){var f=u.get("identifier"),m=f?"/system/appstore/apps/"+f:u.get("key");
l=m+"/update"}else l="/system/appstore/updates";var g=t.ajax(h.getXHROptions(l));return g.done(r),g.fail(o),c.promise()}return a}),define("plex/desktop/commands/channel/RestartChannelCommand",["underscore","jquery","plex/base/utils/Dispatcher","plex/base/utils/Parser","plex/base/adapters/LocalizerAdapter"],function(e,t,n,i,s){function a(a){var r=s.get(),o=a.channel,l=o.get("identifier"),c=l?"/system/appstore/apps/"+l:o.get("key"),d=c+"/restart",u=o.server.getXHROptions(d),h=t.ajax(u);return h.done(function(t){var s,a=e.isObject(t)?t:i.parseXML(t);
s=a.message?a.message:r.t("This channel was successfully restarted."),n.trigger("show:alert",{"type":"success","message":s})}),h.fail(function(){n.trigger("show:alert",{"type":"error","message":r.t("There was a problem restarting this channel.")})}),h.promise()}return a}),define("plex/desktop/commands/channel/ResetChannelCommand",["underscore","jquery","plex/base/utils/Dispatcher","plex/base/utils/Parser","plex/base/adapters/LocalizerAdapter"],function(e,t,n,i,s){function a(a){var r=s.get(),o=a.channel,l=o.get("identifier"),c=l?"/system/appstore/apps/"+l:o.get("key"),d=c+"/reset",u=o.server.getXHROptions(d),h=t.ajax(u);
return h.done(function(t){var s,a=e.isObject(t)?t:i.parseXML(t);s=a.message?a.message:r.t("This channel was successfully reset."),n.trigger("show:alert",{"type":"success","message":s})}),h.fail(function(){n.trigger("show:alert",{"type":"error","message":r.t("There was a problem resetting this channel.")})}),h.promise()}return a}),define("plex/desktop/commands/channel/UninstallChannelCommand",["underscore","jquery","plex/base/utils/Dispatcher","plex/base/utils/Parser","plex/base/adapters/LocalizerAdapter","plex/desktop/views/modals/ConfirmModal"],function(e,t,n,i,s,a){function r(r){function o(){var s=t.ajax(f);
s.done(function(t){var s=e.isObject(t)?t:i.parseXML(t);d.set("installed",!1),s.message&&!r.skipConfirmation&&n.trigger("show:alert",{"type":"success","message":c.t(s.message)}),l.resolve()}),s.fail(function(e){n.trigger("show:alert",{"type":"error","message":c.t("This channel could not be uninstalled.")}),l.reject(e)})}var l=t.Deferred(),c=s.get(),d=r.channel,u=d.get("identifier"),h=u?"/system/appstore/apps/"+u:d.get("key"),p=h+"/uninstall",f=d.server.getXHROptions(p);if(r.skipConfirmation)o();else{var m=new a({"title":c.t("Uninstall Channel"),"message":c.t("Are you sure you want to uninstall this channel?")}),g=m.promise;
g.done(o),g.fail(function(){l.reject()}),n.trigger("show:modal",m)}return l.promise()}return r}),define("plex/desktop/commands/player/PlayMediaCommand",["underscore","jquery","plex/base/utils/Dispatcher","plex/base/utils/Logger","plex/base/utils/types/MediaTypes","plex/base/adapters/LocalizerAdapter","plex/desktop/views/modals/ConfirmModal"],function(e,t,n,i,s,a,r){function o(e){var i=e.server.get("playQueues").getFor(e),s=t.Deferred().resolve().promise();if(i&&i.hasUserAdditions){var o=a.get(),l=new r({"title":o.t("Play Now"),"message":o.t("This will clear the contents of Up Next and play the selection instead.")});
s=l.promise,n.trigger("show:modal",l)}return s}function l(t){var a,r=t.item,l=s.getMediaTypeByString(r.get("type")),d=s.getChildMediaType(r.get("type")),u=e(t).pick("shuffle","continuous","unwatched"),h=r;"directory"===l.element||r.get("items")||"episode"!==l.typeString&&"movie"!==l.typeString&&r.collection&&(a=r,h=r.collection,u.firstItem=r);var p=r.server.get("playQueues").getFor(r);return p&&p.selectedItem()&&p.selectedItem().get("key")===r.get("key")?void("audio"!==d.element&&n.trigger(c[d.element],{"model":p.selectedItem(),"collection":p,"offset":t.offset})):void o(a||h).done(function(){var e=r.server.get("playQueues").createFor(h,a);
if(!e)return void i.warn("Unable to queue item for playing: ",r);var s=e.addContent(h,u);"track"===l.element?n.trigger(c[d.element],{"model":a,"collection":e,"offset":t.offset}):s.done(function(){e.length&&n.trigger(c[d.element],{"model":e.selectedItem(),"collection":e,"offset":t.offset})})})}var c={"audio":"show:music","photo":"show:photo","video":"show:video"};return l}),define("plex/desktop/commands/player/QueueMediaCommand",["plex/base/utils/Dispatcher","plex/base/utils/Logger","plex/base/utils/types/MediaTypes"],function(e,t,n){function i(i){var s=i.item,a=n.getChildMediaType(s.get("type")).element,r=s.server.get("playQueues").getFor(s);
r?r.addContent(s,i).done(function(){"audio"===a.element&&e.trigger("show:music",{"collection":r})}):t.warn("No compatible queue found. Item not queued.")}return i}),define("plex/desktop/commands/server/ConnectServerCommand",["underscore","jquery","plex/base/utils/Dispatcher","plex/base/adapters/LocalizerAdapter"],function(e,t,n,i){function s(e){function s(){var t=r.fetch();t.done(function(){var t=r.get("mappingState"),n=e.value&&"unknown"===t,i=!e.value&&"mapped"===t;"waiting"===t||n||i?a||(a=setInterval(s,d)):(a=clearInterval(a),c.resolve())
})}var a,r=e.cloudAccount,o=r.server.get("settings"),l=o.get("PublishServerOnPlexOnlineKey"),c=t.Deferred(),d=500,u=l.save({"PublishServerOnPlexOnlineKey":e.value});return u.done(s),u.fail(function(t){var s,a=i.get();s=a.t(e.value?"There was a problem connecting your server.":"There was a problem disconnecting your server."),n.trigger("show:alert",{"type":"error","message":s}),c.reject(t)}),c.promise()}return s}),define("plex/desktop/commands/server/ReconnectServerCommand",["underscore","jquery","plex/base/utils/Dispatcher"],function(e,t,n){function i(i){var s=t.Deferred(),a=i.cloudAccount,r={"cloudAccount":a,"value":!1};
return n.trigger("command","connectServer",r,function(t){t=t.then(e.bind(function(){setTimeout(function(){r.value=!0,n.trigger("command","connectServer",r,function(e){e.done(function(){a.get("mappingError")?s.reject():s.resolve()}),e.fail(function(){s.reject()})})},5e3)},this)),t.fail(function(){s.reject()})}),s.promise()}return i}),define("plex/desktop/commands/server/SignInServerCommand",["underscore","jquery","plex/base/utils/Dispatcher","plex/base/utils/Parser","plex/base/adapters/LocalizerAdapter"],function(e,t,n,i,s){function a(a){var r=t.Deferred(),o=s.get(),l=a.cloudAccount;
l.set("signedIn",!0),l.set({"username":"","password":""});var c=l.save({"username":a.username,"password":a.password});return c.done(function(t){var s=e.isObject(t)?t:i.parseXML(t);s&&"invalid"===s.signInState?(n.trigger("show:alert",{"type":"error","message":o.t("The username or password is incorrect.")}),r.reject()):(l.server.set({"myPlexSigninState":"ok","myPlexUsername":a.username}),r.resolve())}),c.fail(function(e){l.set("signedIn",!1);var t;t=o.t(401===e.status?"The username or password is incorrect.":"There was a problem signing in to Plex."),n.trigger("show:alert",{"type":"error","message":t}),r.reject(e)
}),r.promise()}return a}),define("plex/desktop/commands/server/SignUpServerCommand",["underscore","jquery","plex/base/utils/Dispatcher","plex/base/utils/Parser","plex/base/adapters/LocalizerAdapter"],function(e,t,n,i,s){function a(a){var r=t.Deferred(),o=s.get(),l=a.cloudAccount;l.set("signedIn",!1),l.set({"username":"","email":"","password":""});var c=l.save({"username":a.username,"email":a.email,"password":a.password});return c.done(function(t){var s=e.isObject(t)?t:i.parseXML(t);if(s&&"invalid"===s.signInState){var a;
i.parseArray(s,"Error"),a=o.t(s.Error.length?e.first(s.Error).error:"This account information is invalid."),n.trigger("show:alert",{"type":"error","message":a}),r.reject()}else l.set("signedIn",!0),r.resolve()}),c.fail(function(e){n.trigger("show:alert",{"type":"error","message":o.t("There was a problem signing up for a Plex account.")}),r.reject(e)}),r.promise()}return a}),define("plex/desktop/commands/server/SignOutServerCommand",["underscore","plex/base/utils/Dispatcher","plex/base/adapters/LocalizerAdapter"],function(e,t,n){function i(e){var i=e.cloudAccount,s=i.destroy();
return s.done(function(){i.server.set({"myPlexSigninState":"none","myPlexSubscription":!1})}),s.fail(function(){var e=n.get();t.trigger("show:alert",{"type":"error","message":e.t("There was a problem signing out of Plex.")})}),s.promise()}return i}),define("plex/base/models/server/UpdateHistoryModel",["underscore","moment","plex/base/utils/Parser","plex/base/models/BaseModel"],function(e,t,n,i){var s=i.extend({"whitelistedAttrs":["name","summary","time"],"convert":function(i){var s=e.isObject(i)?i:n.parseXML(i);
return s.time=t(s.subtitle,"YYYY-MM-DD HH:mm:ss").toDate(),s},"parse":function(t){var n=this.convert(t);return n=e.pick(n,this.whitelistedAttrs)}});return s}),define("plex/base/models/server/UpdateHistoryCollection",["underscore","plex/base/models/BaseCollection","plex/base/models/server/UpdateHistoryModel"],function(e,t,n){var i=t.extend({"model":n,"url":"/system/appstore/history","parse":function(e){return this.convert(e,"Directory")}});return i}),define("plex/desktop/commands/server/CheckForBundleUpdatesCommand",["underscore","jquery","plex/base/utils/Dispatcher","plex/base/utils/Parser","plex/base/models/AppModel","plex/base/models/server/UpdateHistoryCollection"],function(e,t,n,i,s,a){function r(n){var a="/system/appstore/updates",r=t.ajax(n.getXHROptions(a));
return s.set("updateStatus","checking"),r.done(function(t){var n=i.parseXML(t);if(n.Directory&&n.Directory.length){var a=n.Directory[0].summary.split("\n");e.indexOf(a,"WebClient")>=0?s.set("updateStatus","download"):s.set("updateStatus","latest")}else s.set("updateStatus","latest")}),r.fail(function(){s.set("updateStatus","none")}),r}function o(e){var t=new a([],{"server":e,"pageStart":0,"pageSize":c?40:1});return t.on("reset",function(e){if(0!==e.length)if(c){var t=e.where({"name":"WebClient"});
t.length>0&&t[0].get("time")>c&&s.set("updateStatus","reload")}else c=e.first().get("time")}),t.fetch({"reset":!0})}function l(e){e||(e={});var t=s.get("updateStatus");if("download"!==t&&"reload"!==t){var n=s.get("servers"),i=n.findWhere({"bundled":!0});if(i&&!i.get("authorized")&&n.each(function(e){if(!e.get("cloud")&&!e.get("synced")){var t=e.get("activeConnection");t&&t.address===window.location.hostname&&(i=e)}}),i&&i.get("authorized")&&!i.get("shared"))return e.checkAppStore?r(i).then(function(){return o(i)
}):o(i)}}var c;return l}),define("plex/desktop/commands/server/InstallBundleUpdatesCommand",["underscore","jquery","plex/base/utils/Dispatcher","plex/base/adapters/LocalizerAdapter","plex/base/models/AppModel"],function(e,t,n,i,s){function a(){var e=s.get("servers"),a=e.findWhere({"bundled":!0});if(a&&!a.get("shared")){s.set("updateStatus","downloading");var r="/system/appstore/apps/com.plexapp.plugins.webclient/update",o=t.ajax(a.getXHROptions(r));return o.done(function(){window.location.reload(!0)
}),o.fail(function(){s.set("updateStatus","download");var e=i.get();n.trigger("show:alert",{"type":"error","message":e.t("There was a problem installing these updates.")})}),o}}return a}),define("hb!templates/desktop/modals/TermsModal",["handlebars"],function(e){return e.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=this.merge(i,e.partials),s=s||{};var a,r,o,l="",c=n.helperMissing,d=this.escapeExpression,u=this;return l+='<div class="modal-dialog">\n  <div class="modal-content">\n    <div class="modal-header">\n      <button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button>\n      <h4 class="modal-title"><i class="modal-icon glyphicon circle-info"></i> ',o={"hash":{},"data":s},l+=d((a=n.t||t&&t.t,a?a.call(t,"Plex Terms of Service",o):c.call(t,"t","Plex Terms of Service",o)))+'</h4>\n    </div>\n\n    <div class="modal-body modal-body-scroll minimal-scroll">\n      ',r=u.invokePartial(i.terms,"terms",t,n,i,s),(r||0===r)&&(l+=r),l+='\n    </div>\n\n    <div class="modal-footer">\n      <button type="button" class="confirm-btn btn btn-lg btn-primary btn-loading">\n        <div class="loading loading-sm"></div>\n        <span class="btn-label">',o={"hash":{},"data":s},l+=d((a=n.t||t&&t.t,a?a.call(t,"Agree",o):c.call(t,"t","Agree",o)))+"</span>\n      </button>\n    </div>\n  </div>\n</div>\n"
})}),define("plex/desktop/views/modals/TermsModal",["hb!templates/desktop/modals/TermsModal.tpl","underscore","plex/desktop/views/modals/BaseModal"],function(e,t,n){var i=n.extend({"name":"termsModal","template":e,"ui":{"confirmBtn":".confirm-btn"},"events":t.extend({"click .confirm-btn":"onConfirmClick"},n.prototype.events),"onRender":function(){this.$el.modal({"backdrop":"static","keyboard":!1})},"onConfirmClick":function(e){e.preventDefault();var n=this.ui.confirmBtn;if(!n.isDisabled()){n.addClass("active");
var i=this.collection.first().save({"AcceptedEULA":!0});i.always(t.bind(this.hide,this))}}});return i}),define("plex/desktop/commands/ui/ShowTermsOfServiceCommand",["plex/base/utils/Dispatcher","plex/desktop/views/modals/TermsModal"],function(e,t){function n(n){e.trigger("show:modal",new t({"collection":n.collection}))}return n}),define("hb!templates/desktop/modals/SelectDeviceModal",["handlebars"],function(e){return e.template(function(e,t,n,i,s){function a(e,t){var i,s="";return s+='\n          <li class="striped-list-item select-list-item">\n            <a class="media" data-value="',(i=n.id)?i=i.call(e,{"hash":{},"data":t}):(i=e&&e.id,i=typeof i===m?i.call(e,{"hash":{},"data":t}):i),s+=f(i)+'" href="#">\n              ',i=n["if"].call(e,e&&e.name,{"hash":{},"inverse":g.program(4,o,t),"fn":g.program(2,r,t),"data":t}),(i||0===i)&&(s+=i),s+="\n\n              ",i=n["if"].call(e,e&&e.isCloudSync,{"hash":{},"inverse":g.noop,"fn":g.program(6,l,t),"data":t}),(i||0===i)&&(s+=i),s+="\n            </a>\n          </li>\n        "
}function r(e,t){var i,s,a="";return a+="\n                ",s={"hash":{},"data":t},a+=f((i=n.truncate||e&&e.truncate,i?i.call(e,e&&e.name,25,s):p.call(e,"truncate",e&&e.name,25,s)))+"\n              "}function o(e,t){var i,s,a="";return a+="\n                ",s={"hash":{},"data":t},a+=f((i=n.truncate||e&&e.truncate,i?i.call(e,e&&e.device,25,s):p.call(e,"truncate",e&&e.device,25,s)))+"\n              "}function l(){return'<i class="cloud-sync-icon glyphicon cloud"></i>'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};
var c,d,u,h="",p=n.helperMissing,f=this.escapeExpression,m="function",g=this;return h+='<div class="modal-dialog">\n  <div class="modal-content">\n    <div class="modal-header">\n      <button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button>\n      <h4 class="modal-title"><i class="modal-icon glyphicon iphone"></i> ',u={"hash":{},"data":s},h+=f((c=n.t||t&&t.t,c?c.call(t,"Choose Destination",u):p.call(t,"t","Choose Destination",u)))+'</h4>\n    </div>\n\n    <div class="modal-body modal-body-scroll minimal-scroll">\n      <ul class="list select-list">\n        ',d=n.each.call(t,t&&t.devices,{"hash":{},"inverse":g.noop,"fn":g.program(1,a,s),"data":s}),(d||0===d)&&(h+=d),h+="\n      </ul>\n    </div>\n  </div>\n</div>\n"
})}),define("plex/desktop/views/modals/SelectDeviceModal",["hb!templates/desktop/modals/SelectDeviceModal.tpl","plex/desktop/views/modals/SelectModal"],function(e,t){var n=t.extend({"name":"selectDeviceModal","template":e,"serializeData":function(){return{"devices":this.collection.toJSON()}}});return n}),define("plex/desktop/commands/user/ShowSyncModalCommand",["underscore","plex/base/utils/Dispatcher","plex/base/models/AppModel","plex/desktop/views/modals/PlexPassModal","plex/desktop/views/modals/SyncModal","plex/desktop/views/modals/SelectDeviceModal"],function(e,t,n,i,s,a){function r(e){var r=n.get("user"),o=r.hasPlexPass();
if(!o)return void t.trigger("show:modal",new i({"model":r}));var l=r.get("devices"),c=l.filterSyncDevices(),d=new s(e);if(c.length>1){var u=new a({"collection":c}),h=u.promise;h.done(function(e){d.device=c.get(e),t.trigger("show:modal",d)}),t.trigger("show:modal",u)}else d.device=c.first(),t.trigger("show:modal",d)}return r}),define("plex/desktop/commands/user/CreateSyncItemCommand",["underscore","jquery","plex/base/utils/Dispatcher","plex/base/utils/MediaUtil","plex/base/utils/types/SyncQualities","plex/base/adapters/LocalizerAdapter","plex/base/models/SettingsModel","plex/base/models/library/section/SectionModel"],function(e,t,n,i,s,a,r){function o(o){var l,c=o.section,d=o.item,u=o.childMediaType,h={},p="",f=o.device.get("screenResolution");
if(f=f?f:"1024x768",c){var m,g=c.get("items");if(p=o.settings.title?o.settings.title:c.get("title"),o.models){var v=[];e.each(o.models,function(e){v.push(e.get("ratingKey"))}),m="/library/metadata/"+v.join(",")}else m=g.url();l=c.server,h["SyncItem[Location][uri]"]="library://"+c.get("uuid")+"/directory/"+encodeURIComponent(m),h["SyncItem[machineIdentifier]"]=c.server.id,h["SyncItem[title]"]=p,h["SyncItem[rootTitle]"]=c.get("title"),h["SyncItem[metadataType]"]=u.typeString}else if(d){var y=d.get("type"),b=d.get("grandparentTitle"),w=d.get("parentTitle");
if(l=d.server,p=d.get("title"),b?p=b+" - "+d.get("title"):w&&(p=w+" - "+d.get("title")),d.get("isChannel"))h["SyncItem[Location][uri]"]=o.isDirectory?"channel://"+d.channel.get("identifier")+"/directory/"+encodeURIComponent(d.get("key")):"channel://"+d.channel.get("identifier")+"/item/"+encodeURIComponent(d.get("key")),h["SyncItem[rootTitle]"]=d.channel.get("title");else{if("episode"===y){var x=i.getSeasonEpisodeIndex({"seasonIndex":d.get("parentIndex"),"episodeIndex":d.get("index"),"date":d.get("originallyAvailableAt")});
p+=" ("+x+")"}var k=d.server.getSectionForItem(d);if(e.isEmpty(k))return t.Deferred().reject().promise();var S=k.get("uuid"),C=k.get("title");h["SyncItem[Location][uri]"]=o.isDirectory?"library://"+S+"/directory/"+encodeURIComponent(d.get("key")):"library://"+S+"/item/"+encodeURIComponent(d.get("key")),h["SyncItem[rootTitle]"]=C}h["SyncItem[machineIdentifier]"]=d.server.id,h["SyncItem[title]"]=p,h["SyncItem[metadataType]"]=u.typeString}var T=s.getQuality(o.settings.quality);if(h["SyncItem[Policy][unwatched]"]=o.settings.unwatched,h["SyncItem[Policy][scope]"]=o.settings.scope,h["SyncItem[MediaSettings][videoQuality]"]=T.videoQuality,h["SyncItem[MediaSettings][photoQuality]"]=T.photoQuality,h["SyncItem[MediaSettings][musicBitrate]"]=T.musicBitrate,h["SyncItem[MediaSettings][audioBoost]"]=r.get("audioBoost"),h["SyncItem[MediaSettings][subtitleSize]"]=r.get("subtitleSize"),T.videoResolutionFactor){var A=f.split("x");
A[0]=Math.round(T.videoResolutionFactor*A[0]),A[1]=Math.round(T.videoResolutionFactor*A[1]);var I=A.join("x");h["SyncItem[MediaSettings][videoResolution]"]=I,h["SyncItem[MediaSettings][photoResolution]"]=I}o.settings.value&&(h["SyncItem[Policy][value]"]=o.settings.value);var P="/devices/"+o.device.get("clientIdentifier")+"/sync_items?"+t.param(h,!0),M=e.extend(o.device.server.getXHROptions(P),{"type":"POST"}),D=t.ajax(M);return D=D.then(function(){var n="/sync/refreshSynclists",i=e.extend(l.getXHROptions(n),{"type":"PUT"});
return t.ajax(i)}),D.fail(function(){var e=a.get();n.trigger("show:alert",{"type":"error","message":e.t("There was a problem syncing this media.")})}),D.promise()}return o}),define("plex/desktop/commands/user/EditSyncItemCommand",["underscore","jquery","plex/base/utils/Dispatcher","plex/base/utils/types/SyncQualities","plex/base/adapters/LocalizerAdapter","plex/base/models/SettingsModel"],function(e,t,n,i,s,a){function r(r){var o=r.syncItem,l=o.parent,c={},d=o.device.get("screenResolution");d=d?d:"1024x768";
var u=r.settings.title?r.settings.title:o.get("title"),h=i.getQuality(r.settings.quality);if(c["SyncItem[version]"]=o.get("version"),c["SyncItem[Location][uri]"]=o.get("Location").uri,c["SyncItem[machineIdentifier]"]=l.id,c["SyncItem[title]"]=u,c["SyncItem[rootTitle]"]=o.get("rootTitle"),c["SyncItem[metadataType]"]=o.get("metadataType"),c["SyncItem[Policy][unwatched]"]=r.settings.unwatched,c["SyncItem[Policy][scope]"]=r.settings.scope,c["SyncItem[MediaSettings][videoQuality]"]=h.videoQuality,c["SyncItem[MediaSettings][photoQuality]"]=h.photoQuality,c["SyncItem[MediaSettings][musicBitrate]"]=h.musicBitrate,c["SyncItem[MediaSettings][audioBoost]"]=a.get("audioBoost"),c["SyncItem[MediaSettings][subtitleSize]"]=a.get("subtitleSize"),h.videoResolutionFactor){var p=d.split("x");
p[0]=Math.round(h.videoResolutionFactor*p[0]),p[1]=Math.round(h.videoResolutionFactor*p[1]);var f=p.join("x");c["SyncItem[MediaSettings][videoResolution]"]=f,c["SyncItem[MediaSettings][photoResolution]"]=f}r.settings.value&&(c["SyncItem[Policy][value]"]=r.settings.value);var m="/devices/"+o.device.get("clientIdentifier")+"/sync_items/"+o.id+"?"+t.param(c,!0),g=e.extend(o.server.getXHROptions(m),{"type":"PUT"}),v=t.ajax(g);return v=v.then(function(){var n="/sync/refreshSynclists",i=e.extend(l.getXHROptions(n),{"type":"PUT"});
return t.ajax(i)}),v=v.then(function(){var n="/sync/refreshContent",i=e.extend(l.getXHROptions(n),{"type":"PUT"});return t.ajax(i)}),v.done(function(){o.set("title",u),o.set("version",1+o.get("version")),o.set("MediaSettings",{"videoQuality":h.videoQuality,"photoQuality":h.photoQuality,"musicBitrate":h.musicBitrate,"audioBoost":h.audioBoost}),o.set("Policy",{"scope":r.settings.scope,"unwatched":r.settings.unwatched,"value":r.settings.value})}),v.fail(function(){var e=s.get();n.trigger("show:alert",{"type":"error","message":e.t("There was a problem syncing this media.")})
}),v.promise()}return r}),define("plex/desktop/commands/user/RefreshSyncItemsCommand",["underscore","jquery","plex/base/utils/Dispatcher","plex/base/adapters/LocalizerAdapter"],function(e,t,n,i){function s(s){var a=s.server,r="/sync/refreshSynclists",o=e.extend(a.getXHROptions(r),{"type":"PUT"}),l=t.ajax(o);return s.skipContent||(l=l.then(function(){var n="/sync/refreshContent",i=e.extend(a.getXHROptions(n),{"type":"PUT"});return t.ajax(i)})),l.done(function(){if(!s.silent){var e=i.get();n.trigger("show:alert",{"type":"success","message":e.t("Synced items were refreshed.")})
}}),l.promise()}return s}),define("plex/desktop/commands/DesktopCommands",["underscore","plex/base/commands/Commands","plex/desktop/commands/library/PlaySoundCommand","plex/desktop/commands/library/RefreshMetadataCommand","plex/desktop/commands/library/AnalyzeItemCommand","plex/desktop/commands/library/AnalyzeSectionCommand","plex/desktop/commands/library/MarkWatchedCommand","plex/desktop/commands/library/MarkUnwatchedCommand","plex/desktop/commands/library/UnmatchCommand","plex/desktop/commands/library/SplitApartCommand","plex/desktop/commands/library/MergeCommand","plex/desktop/commands/library/DeleteFileCommand","plex/desktop/commands/library/DeleteSectionCommand","plex/desktop/commands/library/RateCommand","plex/desktop/commands/library/UpdateLibraryCommand","plex/desktop/commands/library/OptimizeCommand","plex/desktop/commands/library/CleanBundlesCommand","plex/desktop/commands/library/EmptyTrashCommand","plex/desktop/commands/library/MatchCommand","plex/desktop/commands/library/AutoMatchCommand","plex/desktop/commands/library/ChangeArtworkCommand","plex/desktop/commands/channel/InstallChannelCommand","plex/desktop/commands/channel/UpdateChannelCommand","plex/desktop/commands/channel/RestartChannelCommand","plex/desktop/commands/channel/ResetChannelCommand","plex/desktop/commands/channel/UninstallChannelCommand","plex/desktop/commands/player/PlayMediaCommand","plex/desktop/commands/player/QueueMediaCommand","plex/desktop/commands/server/ConnectServerCommand","plex/desktop/commands/server/ReconnectServerCommand","plex/desktop/commands/server/SignInServerCommand","plex/desktop/commands/server/SignUpServerCommand","plex/desktop/commands/server/SignOutServerCommand","plex/desktop/commands/server/CheckForBundleUpdatesCommand","plex/desktop/commands/server/InstallBundleUpdatesCommand","plex/desktop/commands/ui/ShowTermsOfServiceCommand","plex/desktop/commands/user/ShowSyncModalCommand","plex/desktop/commands/user/CreateSyncItemCommand","plex/desktop/commands/user/EditSyncItemCommand","plex/desktop/commands/user/RefreshSyncItemsCommand"],function(e,t,n,i,s,a,r,o,l,c,d,u,h,p,f,m,g,v,y,b,w,x,k,S,C,T,A,I,P,M,D,_,E,L,R,N,O,B,V,F){return e.extend(t.map,{"playSound":n,"refreshMetadata":i,"analyzeItem":s,"analyzeSection":a,"markWatched":r,"markUnwatched":o,"unmatch":l,"splitApart":c,"merge":d,"deleteFile":u,"deleteSection":h,"rate":p,"updateLibrary":f,"optimize":m,"cleanBundles":g,"emptyTrash":v,"match":y,"autoMatch":b,"changeArtwork":w,"installChannel":x,"updateChannel":k,"restartChannel":S,"resetChannel":C,"uninstallChannel":T,"playMedia":A,"queueMedia":I,"connectServer":P,"reconnectServer":M,"signInServer":D,"signUpServer":_,"signOutServer":E,"checkForBundleUpdates":L,"installBundleUpdates":R,"showTermsOfService":N,"showSyncModal":O,"createSyncItem":B,"editSyncItem":V,"refreshSyncItems":F}),t
}),define("plex/desktop/DesktopApp",["marionette","plex/desktop/adapters/DesktopAdapters","plex/desktop/initializers/configs/DesktopPartials","plex/desktop/initializers/MainInitializer","plex/desktop/commands/DesktopCommands"],function(e,t,n,i){t.registerAll();var s=new e.Application;return s.addInitializer(i),s}),window.PLEXWEB=window.PLEXWEB||{},require(["config"],function(){require(["plex/desktop/DesktopApp"],function(e){e.start()})}),define("main-desktop",function(){});